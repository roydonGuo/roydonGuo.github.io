<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>RabbitMQ</title>
      <link href="/posts/RabbitMQ.html"/>
      <url>/posts/RabbitMQ.html</url>
      
        <content type="html"><![CDATA[<h1 id="初识MQ"><a href="#初识MQ" class="headerlink" title="初识MQ"></a>初识MQ</h1><h2 id="同步和异步通讯"><a href="#同步和异步通讯" class="headerlink" title="同步和异步通讯"></a>同步和异步通讯</h2><p>微服务间通讯有同步和异步两种方式：</p><p>同步通讯：就像打电话，需要实时响应。</p><p>异步通讯：就像发邮件，不需要马上回复。</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301311854728.png" alt="image-20210717161939695"></p><p>两种方式各有优劣，打电话可以立即得到响应，但是你却不能跟多个人同时通话。发送邮件可以同时与多个人收发邮件，但是往往响应会有延迟。</p><h3 id="同步通讯"><a href="#同步通讯" class="headerlink" title="同步通讯"></a>同步通讯</h3><p>我们之前学习的Feign调用就属于同步方式，虽然调用可以实时得到结果，但存在下面的问题：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301311855116.png" alt="image-20210717162004285"></p><p>总结：</p><p>同步调用的优点：</p><ul><li>时效性较强，可以立即得到结果</li></ul><p>同步调用的问题：</p><ul><li>耦合度高</li><li>性能和吞吐能力下降</li><li>有额外的资源消耗</li><li>有级联失败问题</li></ul><h3 id="异步通讯"><a href="#异步通讯" class="headerlink" title="异步通讯"></a>异步通讯</h3><p>异步调用则可以避免上述问题：</p><p>我们以购买商品为例，用户支付后需要调用订单服务完成订单状态修改，调用物流服务，从仓库分配响应的库存并准备发货。</p><p>在事件模式中，支付服务是事件发布者（publisher），在支付完成后只需要发布一个支付成功的事件（event），事件中带上订单id。</p><p>订单服务和物流服务是事件订阅者（Consumer），订阅支付成功的事件，监听到事件后完成自己业务即可。</p><p>为了解除事件发布者与订阅者之间的耦合，两者并不是直接通信，而是有一个中间人（Broker）。发布者发布事件到Broker，不关心谁来订阅事件。订阅者从Broker订阅事件，不关心谁发来的消息。</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301311855885.png" alt="image-20210422095356088"></p><p>Broker 是一个像数据总线一样的东西，所有的服务要接收数据和发送数据都发到这个总线上，这个总线就像协议一样，让服务间的通讯变得标准和可控。</p><p>好处：</p><ul><li><p>吞吐量提升：无需等待订阅者处理完成，响应更快速</p></li><li><p>故障隔离：服务没有直接调用，不存在级联失败问题</p></li><li>调用间没有阻塞，不会造成无效的资源占用</li><li>耦合度极低，每个服务都可以灵活插拔，可替换</li><li>流量削峰：不管发布事件的流量波动多大，都由Broker接收，订阅者可以按照自己的速度去处理事件</li></ul><p>缺点：</p><ul><li>架构复杂了，业务没有明显的流程线，不好管理</li><li>需要依赖于Broker的可靠、安全、性能</li></ul><p>好在现在开源软件或云平台上 Broker 的软件是非常成熟的，比较常见的一种就是我们今天要学习的MQ技术。</p><h2 id="技术对比"><a href="#技术对比" class="headerlink" title="技术对比"></a>技术对比</h2><p>MQ，中文是消息队列（MessageQueue），字面来看就是存放消息的队列。也就是事件驱动架构中的Broker。</p><p>比较常见的MQ实现：</p><ul><li>ActiveMQ</li><li>RabbitMQ</li><li>RocketMQ</li><li>Kafka</li></ul><p>几种常见MQ的对比：</p><div class="table-container"><table><thead><tr><th></th><th><strong>RabbitMQ</strong></th><th><strong>ActiveMQ</strong></th><th><strong>RocketMQ</strong></th><th><strong>Kafka</strong></th></tr></thead><tbody><tr><td>公司/社区</td><td>Rabbit</td><td>Apache</td><td>阿里</td><td>Apache</td></tr><tr><td>开发语言</td><td>Erlang</td><td>Java</td><td>Java</td><td>Scala&amp;Java</td></tr><tr><td>协议支持</td><td>AMQP，XMPP，SMTP，STOMP</td><td>OpenWire,STOMP，REST,XMPP,AMQP</td><td>自定义协议</td><td>自定义协议</td></tr><tr><td>可用性</td><td>高</td><td>一般</td><td>高</td><td>高</td></tr><tr><td>单机吞吐量</td><td>一般</td><td>差</td><td>高</td><td>非常高</td></tr><tr><td>消息延迟</td><td>微秒级</td><td>毫秒级</td><td>毫秒级</td><td>毫秒以内</td></tr><tr><td>消息可靠性</td><td>高</td><td>一般</td><td>高</td><td>一般</td></tr></tbody></table></div><p>追求可用性：Kafka、 RocketMQ 、RabbitMQ</p><p>追求可靠性：RabbitMQ、RocketMQ</p><p>追求吞吐能力：RocketMQ、Kafka</p><p>追求消息低延迟：RabbitMQ、Kafka</p><h1 id="快速入门"><a href="#快速入门" class="headerlink" title="快速入门"></a>快速入门</h1><h2 id="安装RabbitMQ"><a href="#安装RabbitMQ" class="headerlink" title="安装RabbitMQ"></a>安装RabbitMQ</h2><h3 id="单机部署"><a href="#单机部署" class="headerlink" title="单机部署"></a>单机部署</h3><p>我们在Centos7虚拟机中使用Docker来安装。</p><p>启动docker</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start docker</span><br></pre></td></tr></table></figure><h4 id="下载镜像"><a href="#下载镜像" class="headerlink" title="下载镜像"></a>下载镜像</h4><p>方式一：在线拉取</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull rabbitmq:3-management</span><br></pre></td></tr></table></figure><p>方式二：从本地加载</p><p>在课前资料已经提供了镜像包：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301311902503.png" alt="image-20210423191210349"> </p><p>上传到虚拟机中后，使用命令加载镜像即可：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker load -i mq.tar</span><br></pre></td></tr></table></figure><p>输入命令查看加载镜像成功</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301311939777.png" alt="image-20230131193937418"></p><h4 id="安装MQ"><a href="#安装MQ" class="headerlink" title="安装MQ"></a>安装MQ</h4><p>执行下面的命令来运行MQ容器：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">docker run \</span><br><span class="line"> -e RABBITMQ_DEFAULT_USER=roydon \</span><br><span class="line"> -e RABBITMQ_DEFAULT_PASS=qwer1234 \</span><br><span class="line"> --name mq \</span><br><span class="line"> --hostname mq1 \</span><br><span class="line"> -p 15672:15672 \</span><br><span class="line"> -p 5672:5672 \</span><br><span class="line"> -d \</span><br><span class="line"> rabbitmq:3-management</span><br></pre></td></tr></table></figure><blockquote><p>15672为管理平台端口</p><p>5672为消息通信端口</p></blockquote><p>若执行命令失败出现如下图：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301311945786.png" alt="image-20230131194528810"></p><p>出现错误表示之前已经创建过一个名为<code>mq</code>的镜像，所以可以更名或者删除原有镜像再执行<code>docker run</code>：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker container <span class="built_in">rm</span> mq</span><br></pre></td></tr></table></figure><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301311948746.png" alt="image-20230131194847462"></p><p>部署成功后浏览器输入虚拟机地址加端口号<code>http://192.168.52.128:15672/</code>，成功访问：账号密码就是部署镜像时指定的账号密码。</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301311951432.png" alt="image-20230131195111334"></p><h3 id="集群部署"><a href="#集群部署" class="headerlink" title="集群部署"></a>集群部署</h3><h4 id="集群分类"><a href="#集群分类" class="headerlink" title="集群分类"></a>集群分类</h4><p>在RabbitMQ的官方文档中，讲述了两种集群的配置方式：</p><ul><li>普通模式：普通模式集群不进行数据同步，每个MQ都有自己的队列、数据信息（其它元数据信息如交换机等会同步）。例如我们有2个MQ：mq1，和mq2，如果你的消息在mq1，而你连接到了mq2，那么mq2会去mq1拉取消息，然后返回给你。如果mq1宕机，消息就会丢失。</li><li>镜像模式：与普通模式不同，队列会在各个mq的镜像节点之间同步，因此你连接到任何一个镜像节点，均可获取到消息。而且如果一个节点宕机，并不会导致数据丢失。不过，这种方式增加了数据同步的带宽消耗。</li></ul><p>我们先来看普通模式集群。</p><h4 id="设置网络"><a href="#设置网络" class="headerlink" title="设置网络"></a>设置网络</h4><p>首先，我们需要让3台MQ互相知道对方的存在。</p><p>分别在3台机器中，设置 /etc/hosts文件，添加如下内容：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">192.168.150.101 mq1</span><br><span class="line">192.168.150.102 mq2</span><br><span class="line">192.168.150.103 mq3</span><br></pre></td></tr></table></figure><p>并在每台机器上测试，是否可以ping通对方：</p><h2 id="MQ的基本结构"><a href="#MQ的基本结构" class="headerlink" title="MQ的基本结构"></a>MQ的基本结构</h2><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301311855249.png" alt="image-20210717162752376"></p><p>RabbitMQ中的一些角色：</p><ul><li>publisher：生产者</li><li>consumer：消费者</li><li>exchange个：交换机，负责消息路由</li><li>queue：队列，存储消息</li><li>virtualHost：虚拟主机，隔离不同租户的exchange、queue、消息的隔离</li></ul><h2 id="RabbitMQ消息模型"><a href="#RabbitMQ消息模型" class="headerlink" title="RabbitMQ消息模型"></a>RabbitMQ消息模型</h2><p><a href="https://www.rabbitmq.com/getstarted.html">RabbitMQ官方</a>提供了5个不同的Demo示例，对应了不同的消息模型：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301311856416.png" alt="image-20210717163332646"></p><h2 id="入门案例"><a href="#入门案例" class="headerlink" title="入门案例"></a>入门案例</h2><p>简单队列模式的模型图：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301311856605.png" alt="image-20210717163434647"></p><p>官方的HelloWorld是基于最基础的消息队列模型来实现的，只包括三个角色：</p><ul><li>publisher：消息发布者，将消息发送到队列queue</li><li>queue：消息队列，负责接受并缓存消息</li><li>consumer：订阅队列，处理队列中的消息</li></ul><h3 id="publisher"><a href="#publisher" class="headerlink" title="publisher"></a>publisher</h3><p>思路：</p><ul><li>建立连接</li><li>创建Channel</li><li>声明队列</li><li>发送消息</li><li>关闭连接和channel</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PublisherTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sendMessage</span><span class="params">()</span> <span class="keyword">throws</span> IOException, TimeoutException &#123;</span><br><span class="line">        <span class="comment">// 1.建立连接</span></span><br><span class="line">        <span class="type">ConnectionFactory</span> <span class="variable">factory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConnectionFactory</span>();</span><br><span class="line">        <span class="comment">// 1.1.设置连接参数，分别是：主机名、端口号、vhost、用户名、密码</span></span><br><span class="line">        factory.setHost(<span class="string">&quot;192.168.52.128&quot;</span>);</span><br><span class="line">        factory.setPort(<span class="number">5672</span>);</span><br><span class="line">        factory.setVirtualHost(<span class="string">&quot;/&quot;</span>);</span><br><span class="line">        factory.setUsername(<span class="string">&quot;roydon&quot;</span>);</span><br><span class="line">        factory.setPassword(<span class="string">&quot;qwer1234&quot;</span>);</span><br><span class="line">        <span class="comment">// 1.2.建立连接</span></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> factory.newConnection();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.创建通道Channel</span></span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> connection.createChannel();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.创建队列</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">queueName</span> <span class="operator">=</span> <span class="string">&quot;simple.queue&quot;</span>;</span><br><span class="line">        channel.queueDeclare(queueName, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4.发送消息</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="string">&quot;hello rabbitmq!&quot;</span>;</span><br><span class="line">        channel.basicPublish(<span class="string">&quot;&quot;</span>, queueName, <span class="literal">null</span>, message.getBytes());</span><br><span class="line">        System.out.println(<span class="string">&quot;发送消息成功：【&quot;</span> + message + <span class="string">&quot;】&quot;</span>);</span><br><span class="line">        <span class="comment">// 5.关闭通道和连接</span></span><br><span class="line">        channel.close();</span><br><span class="line">        connection.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="consumer"><a href="#consumer" class="headerlink" title="consumer"></a>consumer</h3><p>思路：</p><ul><li>建立连接</li><li>创建Channel</li><li>声明队列</li><li>订阅消息</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConsumerTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, TimeoutException &#123;</span><br><span class="line">        <span class="comment">// 1.建立连接</span></span><br><span class="line">        <span class="type">ConnectionFactory</span> <span class="variable">factory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConnectionFactory</span>();</span><br><span class="line">        <span class="comment">// 1.1.设置连接参数，分别是：主机名、端口号、vhost、用户名、密码</span></span><br><span class="line">        factory.setHost(<span class="string">&quot;192.168.52.128&quot;</span>);</span><br><span class="line">        factory.setPort(<span class="number">5672</span>);</span><br><span class="line">        factory.setVirtualHost(<span class="string">&quot;/&quot;</span>);</span><br><span class="line">        factory.setUsername(<span class="string">&quot;roydon&quot;</span>);</span><br><span class="line">        factory.setPassword(<span class="string">&quot;qwer1234&quot;</span>);</span><br><span class="line">        <span class="comment">// 1.2.建立连接</span></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> factory.newConnection();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.创建通道Channel</span></span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> connection.createChannel();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.创建队列</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">queueName</span> <span class="operator">=</span> <span class="string">&quot;simple.queue&quot;</span>;</span><br><span class="line">        channel.queueDeclare(queueName, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4.订阅消息</span></span><br><span class="line">        channel.basicConsume(queueName, <span class="literal">true</span>, <span class="keyword">new</span> <span class="title class_">DefaultConsumer</span>(channel)&#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">handleDelivery</span><span class="params">(String consumerTag, Envelope envelope,</span></span><br><span class="line"><span class="params">                                       AMQP.BasicProperties properties, <span class="type">byte</span>[] body)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">                <span class="comment">// 5.处理消息</span></span><br><span class="line">                <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(body);</span><br><span class="line">                System.out.println(<span class="string">&quot;接收到消息：【&quot;</span> + message + <span class="string">&quot;】&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        System.out.println(<span class="string">&quot;等待接收消息。。。。&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>基本消息队列的消息发送流程：</p><ol><li><p>建立connection</p></li><li><p>创建channel</p></li><li><p>利用channel声明队列</p></li><li><p>利用channel向队列发送消息</p></li></ol><p>基本消息队列的消息接收流程：</p><ol><li><p>建立connection</p></li><li><p>创建channel</p></li><li><p>利用channel声明队列</p></li><li><p>定义consumer的消费行为handleDelivery()</p></li><li><p>利用channel将消费者与队列绑定</p></li></ol><h1 id="SpringAMQP"><a href="#SpringAMQP" class="headerlink" title="SpringAMQP"></a>SpringAMQP</h1><p><a href="https://spring.io/projects/spring-amqp">SpringAMQP</a>是基于RabbitMQ封装的一套模板，并且还利用SpringBoot对其实现了自动装配，使用起来非常方便。</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301312027751.png" alt="image-20230131202736103"></p><p>SpringAMQP提供了三个功能：</p><ul><li>自动声明队列、交换机及其绑定关系</li><li>基于注解的监听器模式，异步接收消息</li><li>封装了RabbitTemplate工具，用于发送消息 </li></ul><h2 id="Basic-Queue-简单队列模型"><a href="#Basic-Queue-简单队列模型" class="headerlink" title="Basic Queue 简单队列模型"></a>Basic Queue 简单队列模型</h2><p>在父工程rabbitmq-demo中引入依赖</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--AMQP依赖，包含RabbitMQ--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-amqp<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="消息发送"><a href="#消息发送" class="headerlink" title="消息发送"></a>消息发送</h3><p>首先配置MQ地址，在publisher服务的application.yml中添加配置：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">rabbitmq:</span></span><br><span class="line">    <span class="attr">host:</span> <span class="number">192.168</span><span class="number">.52</span><span class="number">.128</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">5672</span> <span class="comment"># 端口</span></span><br><span class="line">    <span class="attr">virtual-host:</span> <span class="string">/</span> <span class="comment"># 虚拟主机</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">roydon</span> <span class="comment"># 用户名</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">qwer1234</span> <span class="comment"># 密码</span></span><br></pre></td></tr></table></figure><p>然后在publisher服务中编写测试类SpringAmqpTest，并利用RabbitTemplate实现消息发送：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith(SpringRunner.class)</span></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringAmqpTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> RabbitTemplate rabbitTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSimpleQueue</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 队列名称</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">queueName</span> <span class="operator">=</span> <span class="string">&quot;simple.queue&quot;</span>;</span><br><span class="line">        <span class="comment">// 消息</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="string">&quot;hello, spring amqp!&quot;</span>;</span><br><span class="line">        <span class="comment">// 发送消息</span></span><br><span class="line">        rabbitTemplate.convertAndSend(queueName, message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="消息接收"><a href="#消息接收" class="headerlink" title="消息接收"></a>消息接收</h3><p>首先配置MQ地址，在consumer服务的application.yml中添加配置：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">rabbitmq:</span></span><br><span class="line">    <span class="attr">host:</span> <span class="number">192.168</span><span class="number">.52</span><span class="number">.128</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">5672</span> <span class="comment"># 端口</span></span><br><span class="line">    <span class="attr">virtual-host:</span> <span class="string">/</span> <span class="comment"># 虚拟主机</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">roydon</span> <span class="comment"># 用户名</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">qwer1234</span> <span class="comment"># 密码</span></span><br></pre></td></tr></table></figure><p>然后在consumer服务新建一个类SpringRabbitListener，代码如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringRabbitListener</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RabbitListener(queues = &quot;simple.queue&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">listenSimpleQueueMessage</span><span class="params">(String msg)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;spring 消费者接收到消息：【&quot;</span> + msg + <span class="string">&quot;】&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><p>启动consumer服务，然后在publisher服务中运行测试代码，发送MQ消息观察控制台打印。</p><h2 id="WorkQueue"><a href="#WorkQueue" class="headerlink" title="WorkQueue"></a>WorkQueue</h2><p>Work queues，也被称为（Task queues），任务模型。简单来说就是<strong>让多个消费者绑定到一个队列，共同消费队列中的消息</strong>。</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301311856570.png" alt="image-20210717164238910"></p><p>当消息处理比较耗时的时候，可能生产消息的速度会远远大于消息的消费速度。长此以往，消息就会堆积越来越多，无法及时处理。此时就可以使用work 模型，多个消费者共同处理消息处理，提高速度，避免消息堆积。</p><h3 id="消息发送-1"><a href="#消息发送-1" class="headerlink" title="消息发送"></a>消息发送</h3><p>这次我们循环发送，模拟大量消息堆积现象。</p><p>在publisher服务中的SpringAmqpTest类中添加一个测试方法：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * workQueue</span></span><br><span class="line"><span class="comment">     * 向队列中不停发送消息，模拟消息堆积。</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testWorkQueue</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">    <span class="comment">// 队列名称</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">queueName</span> <span class="operator">=</span> <span class="string">&quot;simple.queue&quot;</span>;</span><br><span class="line">    <span class="comment">// 消息</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="string">&quot;hello, message_&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">50</span>; i++) &#123;</span><br><span class="line">        <span class="comment">// 发送消息</span></span><br><span class="line">        rabbitTemplate.convertAndSend(queueName, message + i);</span><br><span class="line">        Thread.sleep(<span class="number">20</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="消息接收-1"><a href="#消息接收-1" class="headerlink" title="消息接收"></a>消息接收</h3><p>要模拟多个消费者绑定同一个队列，我们在consumer服务的SpringRabbitListener中删除原有方法并添加2个新的方法：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RabbitListener(queues = &quot;simple.queue&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">listenWorkQueue1</span><span class="params">(String msg)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;消费者1接收到消息：【&quot;</span> + msg + <span class="string">&quot;】&quot;</span> + LocalTime.now());</span><br><span class="line">    Thread.sleep(<span class="number">20</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RabbitListener(queues = &quot;simple.queue&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">listenWorkQueue2</span><span class="params">(String msg)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">    System.err.println(<span class="string">&quot;消费者2........接收到消息：【&quot;</span> + msg + <span class="string">&quot;】&quot;</span> + LocalTime.now());</span><br><span class="line">    Thread.sleep(<span class="number">200</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>注意到这两·个消费者sleep了不同的时间，模拟任务耗时。查看控制台打印：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">消费者2........接收到消息：【hello, message_0】20:50:15.561</span><br><span class="line">消费者1接收到消息：【hello, message_1】20:50:15.561</span><br><span class="line">消费者1接收到消息：【hello, message_3】20:50:15.601</span><br><span class="line">消费者1接收到消息：【hello, message_5】20:50:15.651</span><br><span class="line">消费者1接收到消息：【hello, message_7】20:50:15.691</span><br><span class="line">消费者1接收到消息：【hello, message_9】20:50:15.742</span><br><span class="line">消费者2........接收到消息：【hello, message_2】20:50:15.762</span><br><span class="line">消费者1接收到消息：【hello, message_11】20:50:15.782</span><br><span class="line">消费者1接收到消息：【hello, message_13】20:50:15.822</span><br><span class="line">消费者1接收到消息：【hello, message_15】20:50:15.872</span><br><span class="line">消费者1接收到消息：【hello, message_17】20:50:15.917</span><br><span class="line">消费者1接收到消息：【hello, message_19】20:50:15.958</span><br><span class="line">消费者2........接收到消息：【hello, message_4】20:50:15.969</span><br><span class="line">消费者1接收到消息：【hello, message_21】20:50:16.009</span><br><span class="line">消费者1接收到消息：【hello, message_23】20:50:16.059</span><br><span class="line">消费者1接收到消息：【hello, message_25】20:50:16.109</span><br><span class="line">消费者1接收到消息：【hello, message_27】20:50:16.150</span><br><span class="line">消费者2........接收到消息：【hello, message_6】20:50:16.170</span><br><span class="line">消费者1接收到消息：【hello, message_29】20:50:16.190</span><br><span class="line">消费者1接收到消息：【hello, message_31】20:50:16.230</span><br><span class="line">消费者1接收到消息：【hello, message_33】20:50:16.280</span><br><span class="line">消费者1接收到消息：【hello, message_35】20:50:16.340</span><br><span class="line">消费者2........接收到消息：【hello, message_8】20:50:16.371</span><br><span class="line">消费者1接收到消息：【hello, message_37】20:50:16.391</span><br><span class="line">消费者1接收到消息：【hello, message_39】20:50:16.441</span><br><span class="line">消费者1接收到消息：【hello, message_41】20:50:16.491</span><br><span class="line">消费者1接收到消息：【hello, message_43】20:50:16.551</span><br><span class="line">消费者2........接收到消息：【hello, message_10】20:50:16.572</span><br><span class="line">消费者1接收到消息：【hello, message_45】20:50:16.593</span><br><span class="line">消费者1接收到消息：【hello, message_47】20:50:16.633</span><br><span class="line">消费者1接收到消息：【hello, message_49】20:50:16.682</span><br><span class="line">消费者2........接收到消息：【hello, message_12】20:50:16.779</span><br><span class="line">消费者2........接收到消息：【hello, message_14】20:50:16.981</span><br><span class="line">消费者2........接收到消息：【hello, message_16】20:50:17.184</span><br><span class="line">消费者2........接收到消息：【hello, message_18】20:50:17.385</span><br><span class="line">消费者2........接收到消息：【hello, message_20】20:50:17.596</span><br><span class="line">消费者2........接收到消息：【hello, message_22】20:50:17.800</span><br><span class="line">消费者2........接收到消息：【hello, message_24】20:50:18.010</span><br><span class="line">消费者2........接收到消息：【hello, message_26】20:50:18.211</span><br><span class="line">消费者2........接收到消息：【hello, message_28】20:50:18.413</span><br><span class="line">消费者2........接收到消息：【hello, message_30】20:50:18.615</span><br><span class="line">消费者2........接收到消息：【hello, message_32】20:50:18.826</span><br><span class="line">消费者2........接收到消息：【hello, message_34】20:50:19.027</span><br><span class="line">消费者2........接收到消息：【hello, message_36】20:50:19.233</span><br><span class="line">消费者2........接收到消息：【hello, message_38】20:50:19.437</span><br><span class="line">消费者2........接收到消息：【hello, message_40】20:50:19.639</span><br><span class="line">消费者2........接收到消息：【hello, message_42】20:50:19.840</span><br><span class="line">消费者2........接收到消息：【hello, message_44】20:50:20.041</span><br><span class="line">消费者2........接收到消息：【hello, message_46】20:50:20.245</span><br><span class="line">消费者2........接收到消息：【hello, message_48】20:50:20.445</span><br></pre></td></tr></table></figure><p>观察总耗时大约为5秒，远远大于预期值1秒。并且消费者1消费了所有25条奇数消息，消费者2消费了所有25条偶数消息，由于<code>消息预取</code>机制，消息被均等的分给了两个消费者。</p><p>那么如果每个消费者的能力不同，那么这种消费模式就存在问题。</p><h3 id="能者多劳"><a href="#能者多劳" class="headerlink" title="能者多劳"></a>能者多劳</h3><p>在spring中有一个简单的配置，可以解决这个问题。我们修改consumer服务的application.yml文件，添加配置：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">rabbitmq:</span></span><br><span class="line">    <span class="attr">host:</span> <span class="number">192.168</span><span class="number">.52</span><span class="number">.128</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">5672</span> <span class="comment"># 端口</span></span><br><span class="line">    <span class="attr">virtual-host:</span> <span class="string">/</span> <span class="comment"># 虚拟主机</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">roydon</span> <span class="comment"># 用户名</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">qwer1234</span> <span class="comment"># 密码</span></span><br><span class="line">    <span class="attr">listener:</span></span><br><span class="line">      <span class="attr">simple:</span></span><br><span class="line">        <span class="attr">prefetch:</span> <span class="number">1</span> <span class="comment"># 每次只能获取一条消息，处理完成才能获取下一个消息</span></span><br></pre></td></tr></table></figure><p>重新测试，查看控制台输出确实使用了一秒：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">消费者1接收到消息：【hello, message_0】21:02:09.382</span><br><span class="line">消费者2........接收到消息：【hello, message_1】21:02:09.382</span><br><span class="line">消费者1接收到消息：【hello, message_2】21:02:09.412</span><br><span class="line">消费者1接收到消息：【hello, message_3】21:02:09.432</span><br><span class="line">消费者1接收到消息：【hello, message_4】21:02:09.452</span><br><span class="line">消费者1接收到消息：【hello, message_5】21:02:09.472</span><br><span class="line">消费者1接收到消息：【hello, message_6】21:02:09.492</span><br><span class="line">消费者1接收到消息：【hello, message_7】21:02:09.522</span><br><span class="line">消费者1接收到消息：【hello, message_8】21:02:09.542</span><br><span class="line">消费者1接收到消息：【hello, message_9】21:02:09.572</span><br><span class="line">消费者1接收到消息：【hello, message_10】21:02:09.592</span><br><span class="line">消费者2........接收到消息：【hello, message_11】21:02:09.622</span><br><span class="line">消费者1接收到消息：【hello, message_12】21:02:09.642</span><br><span class="line">消费者1接收到消息：【hello, message_13】21:02:09.662</span><br><span class="line">消费者1接收到消息：【hello, message_14】21:02:09.687</span><br><span class="line">消费者1接收到消息：【hello, message_15】21:02:09.708</span><br><span class="line">消费者1接收到消息：【hello, message_16】21:02:09.728</span><br><span class="line">消费者1接收到消息：【hello, message_17】21:02:09.748</span><br><span class="line">消费者1接收到消息：【hello, message_18】21:02:09.781</span><br><span class="line">消费者1接收到消息：【hello, message_19】21:02:09.801</span><br><span class="line">消费者1接收到消息：【hello, message_20】21:02:09.821</span><br><span class="line">消费者1接收到消息：【hello, message_21】21:02:09.851</span><br><span class="line">消费者2........接收到消息：【hello, message_22】21:02:09.872</span><br><span class="line">消费者1接收到消息：【hello, message_23】21:02:09.892</span><br><span class="line">消费者1接收到消息：【hello, message_24】21:02:09.912</span><br><span class="line">消费者1接收到消息：【hello, message_25】21:02:09.932</span><br><span class="line">消费者1接收到消息：【hello, message_26】21:02:09.953</span><br><span class="line">消费者1接收到消息：【hello, message_27】21:02:09.982</span><br><span class="line">消费者1接收到消息：【hello, message_28】21:02:10.011</span><br><span class="line">消费者1接收到消息：【hello, message_29】21:02:10.038</span><br><span class="line">消费者1接收到消息：【hello, message_30】21:02:10.058</span><br><span class="line">消费者1接收到消息：【hello, message_31】21:02:10.083</span><br><span class="line">消费者2........接收到消息：【hello, message_32】21:02:10.101</span><br><span class="line">消费者1接收到消息：【hello, message_33】21:02:10.131</span><br><span class="line">消费者1接收到消息：【hello, message_34】21:02:10.151</span><br><span class="line">消费者1接收到消息：【hello, message_35】21:02:10.173</span><br><span class="line">消费者1接收到消息：【hello, message_36】21:02:10.202</span><br><span class="line">消费者1接收到消息：【hello, message_37】21:02:10.232</span><br><span class="line">消费者1接收到消息：【hello, message_38】21:02:10.252</span><br><span class="line">消费者1接收到消息：【hello, message_39】21:02:10.273</span><br><span class="line">消费者1接收到消息：【hello, message_40】21:02:10.294</span><br><span class="line">消费者1接收到消息：【hello, message_41】21:02:10.324</span><br><span class="line">消费者2........接收到消息：【hello, message_42】21:02:10.344</span><br><span class="line">消费者1接收到消息：【hello, message_43】21:02:10.374</span><br><span class="line">消费者1接收到消息：【hello, message_44】21:02:10.394</span><br><span class="line">消费者1接收到消息：【hello, message_45】21:02:10.424</span><br><span class="line">消费者1接收到消息：【hello, message_46】21:02:10.444</span><br><span class="line">消费者1接收到消息：【hello, message_47】21:02:10.474</span><br><span class="line">消费者1接收到消息：【hello, message_48】21:02:10.494</span><br><span class="line">消费者1接收到消息：【hello, message_49】21:02:10.524</span><br></pre></td></tr></table></figure><h3 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h3><p>Work模型的使用：</p><ul><li>多个消费者绑定到一个队列，同一条消息只会被一个消费者处理</li><li>通过设置prefetch来控制消费者预取的消息数量</li></ul><h2 id="发布-订阅模型"><a href="#发布-订阅模型" class="headerlink" title="发布/订阅模型"></a>发布/订阅模型</h2><p>允许同一消息发送给多个消费者，发布订阅的模型如图：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301311856953.png" alt="image-20210717165309625"></p><p>可以看到，在订阅模型中，多了一个exchange角色，而且过程略有变化：</p><ul><li>Publisher：生产者，也就是要发送消息的程序，但是不再发送到队列中，而是发给exchange（交换机）</li><li>Exchange：交换机，一方面，接收生产者发送的消息。另一方面，知道如何处理消息，例如递交给某个特别队列、递交给所有队列、或是将消息丢弃。到底如何操作，取决于Exchange的类型。Exchange有以下3种类型：<ul><li>Fanout：广播，将消息交给所有绑定到交换机的队列</li><li>Direct：定向，把消息交给符合指定routing key 的队列</li><li>Topic：通配符，把消息交给符合routing pattern（路由模式） 的队列</li></ul></li><li>Consumer：消费者，与以前一样，订阅队列，没有变化</li><li>Queue：消息队列也与以前一样，接收消息、缓存消息。</li></ul><blockquote><p><code>注意：</code><strong>Exchange（交换机）只负责转发消息，不具备存储消息的能力</strong>，因此如果没有任何队列与Exchange绑定，或者没有符合路由规则的队列，那么消息会丢失！</p></blockquote><h2 id="Fanout"><a href="#Fanout" class="headerlink" title="Fanout"></a>Fanout</h2><p>Fanout，英文翻译是扇出，我觉得在MQ中叫广播更合适。⎛⎝≥⏝⏝≤⎛⎝</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301311856983.png" alt="image-20210717165438225"></p><p>在广播模式下，消息发送流程是这样的：</p><ul><li>1）  可以有多个队列</li><li>2）  每个队列都要绑定到Exchange（交换机）</li><li>3）  生产者发送的消息，只能发送到交换机，交换机来决定要发给哪个队列，生产者无法决定</li><li>4）  交换机把消息发送给绑定过的所有队列</li><li>5）  订阅队列的消费者都能拿到消息</li></ul><p>实现思路：</p><ul><li>创建一个交换机 itcast.fanout，类型是Fanout</li><li>创建两个队列fanout.queue1和fanout.queue2，绑定到交换机itcast.fanout</li></ul><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301311856237.png" alt="image-20210717165509466"></p><h3 id="声明队列和交换机"><a href="#声明队列和交换机" class="headerlink" title="声明队列和交换机"></a>声明队列和交换机</h3><p>Spring提供了一个接口Exchange，来表示所有不同类型的交换机：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301311856500.png" alt="image-20210717165552676"></p><p>在consumer中创建一个类，声明队列和交换机：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FanoutConfig</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 声明交换机</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> Fanout类型交换机</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> FanoutExchange <span class="title function_">fanoutExchange</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">FanoutExchange</span>(<span class="string">&quot;itcast.fanout&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 第1个队列</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Queue <span class="title function_">fanoutQueue1</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Queue</span>(<span class="string">&quot;fanout.queue1&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 绑定队列和交换机</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Binding <span class="title function_">bindingQueue1</span><span class="params">(Queue fanoutQueue1, FanoutExchange fanoutExchange)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> BindingBuilder.bind(fanoutQueue1).to(fanoutExchange);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 第2个队列</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Queue <span class="title function_">fanoutQueue2</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Queue</span>(<span class="string">&quot;fanout.queue2&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 绑定队列和交换机</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Binding <span class="title function_">bindingQueue2</span><span class="params">(Queue fanoutQueue2, FanoutExchange fanoutExchange)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> BindingBuilder.bind(fanoutQueue2).to(fanoutExchange);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="消息发送-2"><a href="#消息发送-2" class="headerlink" title="消息发送"></a>消息发送</h3><p>在publisher服务的SpringAmqpTest类中添加测试方法：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testFanoutExchange</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 队列名称</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">exchangeName</span> <span class="operator">=</span> <span class="string">&quot;itcast.fanout&quot;</span>;</span><br><span class="line">    <span class="comment">// 消息</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="string">&quot;hello, everyone!&quot;</span>;</span><br><span class="line">    rabbitTemplate.convertAndSend(exchangeName, <span class="string">&quot;&quot;</span>, message);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><code>注意：</code>此时消息是发送到交换机而不是队列。</p></blockquote><h3 id="消息接收-2"><a href="#消息接收-2" class="headerlink" title="消息接收"></a>消息接收</h3><p>在consumer服务的SpringRabbitListener中添加两个方法，作为消费者：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RabbitListener(queues = &quot;fanout.queue1&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">listenFanoutQueue1</span><span class="params">(String msg)</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;消费者1接收到Fanout消息：【&quot;</span> + msg + <span class="string">&quot;】&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RabbitListener(queues = &quot;fanout.queue2&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">listenFanoutQueue2</span><span class="params">(String msg)</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;消费者2接收到Fanout消息：【&quot;</span> + msg + <span class="string">&quot;】&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>重启测试控制台观察到两个消费者都成功接收到消息：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">消费者2接收到fanout.queue消息：【hello, everyone!】</span><br><span class="line">消费者1接收到fanout.queue消息：【hello, everyone!】</span><br></pre></td></tr></table></figure><h3 id="总结-2"><a href="#总结-2" class="headerlink" title="总结"></a>总结</h3><p>交换机的作用是什么？</p><ul><li>接收publisher发送的消息</li><li>将消息按照规则路由到与之绑定的队列</li><li>不能缓存消息，路由失败，消息丢失</li><li>FanoutExchange的会将消息路由到每个绑定的队列</li></ul><p>声明队列、交换机、绑定关系的Bean是什么？</p><ul><li>Queue</li><li>FanoutExchange</li><li>Binding</li></ul><h2 id="Direct"><a href="#Direct" class="headerlink" title="Direct"></a>Direct</h2><p>在Fanout模式中，一条消息，会被所有订阅的队列都消费。</p><p>但是，在某些场景下，我们希望不同的消息被不同的队列消费。这时就要用到Direct类型的Exchange。</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301311857596.png" alt="image-20210717170041447"></p><p> 在Direct模型下：</p><ul><li>队列与交换机的绑定，不能是任意绑定了，而是要指定一个<code>RoutingKey</code>（路由key）</li><li>消息的发送方在 向 Exchange发送消息时，也必须指定消息的 <code>RoutingKey</code>。</li><li>Exchange不再把消息交给每一个绑定的队列，而是根据消息的<code>Routing Key</code>进行判断，只有队列的<code>Routingkey</code>与消息的 <code>Routing key</code>完全一致，才会接收到消息</li></ul><p><strong>案例需求如下</strong>：</p><ol><li><p>利用<code>@RabbitListener</code>声明Exchange、Queue、RoutingKey</p></li><li><p>在consumer服务中，编写两个消费者方法，分别监听direct.queue1和direct.queue2</p></li><li><p>在publisher中编写测试方法，向roydon.direct发送消息</p></li></ol><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301311857455.png" alt="image-20210717170223317"></p><h3 id="基于注解声明队列和交换机"><a href="#基于注解声明队列和交换机" class="headerlink" title="基于注解声明队列和交换机"></a>基于注解声明队列和交换机</h3><p>基于@Bean的方式声明队列和交换机比较麻烦，Spring还提供了基于注解方式来声明。</p><p>在consumer的<code>SpringRabbitListener</code>中添加两个消费者，同时基于注解来声明队列和交换机：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RabbitListener(bindings = @QueueBinding(</span></span><br><span class="line"><span class="meta">    value = @Queue(name = &quot;direct.queue1&quot;),</span></span><br><span class="line"><span class="meta">    exchange = @Exchange(name = &quot;roydon.direct&quot;, type = ExchangeTypes.DIRECT),</span></span><br><span class="line"><span class="meta">    key = &#123;&quot;red&quot;, &quot;blue&quot;&#125;</span></span><br><span class="line"><span class="meta">))</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">listenDirectQueue1</span><span class="params">(String msg)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;消费者接收到direct.queue1的消息：【&quot;</span> + msg + <span class="string">&quot;】&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RabbitListener(bindings = @QueueBinding(</span></span><br><span class="line"><span class="meta">    value = @Queue(name = &quot;direct.queue2&quot;),</span></span><br><span class="line"><span class="meta">    exchange = @Exchange(name = &quot;roydon.direct&quot;, type = ExchangeTypes.DIRECT),</span></span><br><span class="line"><span class="meta">    key = &#123;&quot;red&quot;, &quot;yellow&quot;&#125;</span></span><br><span class="line"><span class="meta">))</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">listenDirectQueue2</span><span class="params">(String msg)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;消费者接收到direct.queue2的消息：【&quot;</span> + msg + <span class="string">&quot;】&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="消息发送-3"><a href="#消息发送-3" class="headerlink" title="消息发送"></a>消息发送</h3><p>在publisher服务的SpringAmqpTest类中添加测试方法：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSendDirectExchange</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 交换机名称</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">exchangeName</span> <span class="operator">=</span> <span class="string">&quot;roydon.direct&quot;</span>;</span><br><span class="line">    <span class="comment">// 消息</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="string">&quot;hello blue!&quot;</span>;</span><br><span class="line">    <span class="comment">// 发送消息</span></span><br><span class="line">    rabbitTemplate.convertAndSend(exchangeName, <span class="string">&quot;blue&quot;</span>, message);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="总结-3"><a href="#总结-3" class="headerlink" title="总结"></a>总结</h3><p>描述下Direct交换机与Fanout交换机的差异？</p><ul><li>Fanout交换机将消息路由给每一个与之绑定的队列</li><li>Direct交换机根据RoutingKey判断路由给哪个队列</li><li>如果多个队列具有相同的RoutingKey，则与Fanout功能类似</li></ul><p>基于@RabbitListener注解声明队列和交换机有哪些常见注解？</p><ul><li>@Queue</li><li>@Exchange</li></ul><h2 id="Topic"><a href="#Topic" class="headerlink" title="Topic"></a>Topic</h2><p>Topic类型的Exchange与Direct相比，都是可以根据<code>RoutingKey</code>把消息路由到不同的队列。</p><p>只不过<code>Topic</code>类型Exchange可以让队列在绑定<code>Routing key</code> 的时候使用<code>通配符</code>！</p><p><code>Routingkey</code> 一般都是有一个或多个单词组成，多个单词之间以”.”分割，例如： <code>item.insert</code></p><p> 通配符规则：</p><p><code>#</code>：匹配一个或多个词</p><p><code>*</code>：匹配不多不少恰好1个词</p><p>举例：</p><p><code>item.#</code>：能够匹配<code>item.spu.insert</code> 或者 <code>item.spu</code></p><p><code>item.*</code>：只能匹配<code>item.spu</code></p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301311857349.png" alt="image-20210717170705380"></p><blockquote><ul><li>Queue1：绑定的是<code>china.#</code> ，因此凡是以 <code>china.</code>开头的<code>routing key</code> 都会被匹配到。包括china.news和china.weather</li><li>Queue4：绑定的是<code>#.news</code> ，因此凡是以 <code>.news</code>结尾的 <code>routing key</code> 都会被匹配。包括china.news和japan.news</li></ul></blockquote><p>案例需求：</p><p>实现思路如下：</p><ol><li><p>利用<code>@RabbitListener</code>声明Exchange、Queue、RoutingKey</p></li><li><p>在consumer服务中，编写两个消费者方法，分别监听topic.queue1和topic.queue2</p></li><li><p>在publisher中编写测试方法，向roydon.topic发送消息</p></li></ol><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301311857612.png" alt="image-20210717170829229"></p><h3 id="消息发送-4"><a href="#消息发送-4" class="headerlink" title="消息发送"></a>消息发送</h3><p>在publisher服务的SpringAmqpTest类中添加测试方法：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSendTopicExchange</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 交换机名称</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">exchangeName</span> <span class="operator">=</span> <span class="string">&quot;roydon.topic&quot;</span>;</span><br><span class="line">    <span class="comment">// 消息</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="string">&quot;hello, china.news!&quot;</span>;</span><br><span class="line">    <span class="comment">// 发送消息</span></span><br><span class="line">    rabbitTemplate.convertAndSend(exchangeName, <span class="string">&quot;china.news&quot;</span>, message);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="消息接收-3"><a href="#消息接收-3" class="headerlink" title="消息接收"></a>消息接收</h3><p>在consumer服务的SpringRabbitListener中添加方法：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RabbitListener(bindings = @QueueBinding(</span></span><br><span class="line"><span class="meta">    value = @Queue(name = &quot;topic.queue1&quot;),</span></span><br><span class="line"><span class="meta">    exchange = @Exchange(name = &quot;roydon.topic&quot;, type = ExchangeTypes.TOPIC),</span></span><br><span class="line"><span class="meta">    key = &quot;china.#&quot;</span></span><br><span class="line"><span class="meta">))</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">listenTopicQueue1</span><span class="params">(String msg)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;消费者接收到topic.queue1的消息：【&quot;</span> + msg + <span class="string">&quot;】&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RabbitListener(bindings = @QueueBinding(</span></span><br><span class="line"><span class="meta">    value = @Queue(name = &quot;topic.queue2&quot;),</span></span><br><span class="line"><span class="meta">    exchange = @Exchange(name = &quot;roydon.topic&quot;, type = ExchangeTypes.TOPIC),</span></span><br><span class="line"><span class="meta">    key = &quot;#.news&quot;</span></span><br><span class="line"><span class="meta">))</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">listenTopicQueue2</span><span class="params">(String msg)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;消费者接收到topic.queue2的消息：【&quot;</span> + msg + <span class="string">&quot;】&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="总结-4"><a href="#总结-4" class="headerlink" title="总结"></a>总结</h3><p>描述下Direct交换机与Topic交换机的差异？</p><ul><li>Topic交换机接收的消息RoutingKey必须是多个单词，以 <code>**.**</code> 分割</li><li>Topic交换机与队列绑定时的bindingKey可以指定通配符</li><li><code>#</code>：代表0个或多个词</li><li><code>*</code>：代表1个词</li></ul><h2 id="消息转换器"><a href="#消息转换器" class="headerlink" title="消息转换器"></a>消息转换器</h2><p>之前说过，Spring会把你发送的消息序列化为字节发送给MQ，接收消息的时候，还会把字节反序列化为Java对象。</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301311857846.png" alt="image-20200525170410401"></p><p>只不过，默认情况下Spring采用的序列化方式是JDK序列化。众所周知，JDK序列化存在下列问题：</p><ul><li>数据体积过大</li><li>有安全漏洞</li><li>可读性差</li></ul><h3 id="测试默认转换器"><a href="#测试默认转换器" class="headerlink" title="测试默认转换器"></a>测试默认转换器</h3><p>我们修改消息发送的代码，发送一个Map对象：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSendMap</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">    <span class="comment">// 准备消息</span></span><br><span class="line">    Map&lt;String,Object&gt; msg = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    msg.put(<span class="string">&quot;city&quot;</span>, <span class="string">&quot;河南&quot;</span>);</span><br><span class="line">    msg.put(<span class="string">&quot;age&quot;</span>, <span class="number">22</span>);</span><br><span class="line">    <span class="comment">// 发送消息</span></span><br><span class="line">    rabbitTemplate.convertAndSend(<span class="string">&quot;object.queue&quot;</span>, msg);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>停止consumer服务</p><p>发送消息后查看控制台：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301311857794.png" alt="image-20210422232835363"></p><h3 id="配置JSON转换器"><a href="#配置JSON转换器" class="headerlink" title="配置JSON转换器"></a>配置JSON转换器</h3><p>显然，JDK序列化方式并不合适。我们希望消息体的体积更小、可读性更高，因此可以使用JSON方式来做序列化和反序列化。</p><p>在publisher和consumer两个服务中都引入依赖：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.dataformat<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-dataformat-xml<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>配置消息转换器。</p><p>在启动类中添加一个Bean即可：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> MessageConverter <span class="title function_">jsonMessageConverter</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Jackson2JsonMessageConverter</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> RabbitMQ </tag>
            
            <tag> SpringAMQP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringCloud之gateway</title>
      <link href="/posts/gateway.html"/>
      <url>/posts/gateway.html</url>
      
        <content type="html"><![CDATA[<h1 id="Gateway服务网关"><a href="#Gateway服务网关" class="headerlink" title="Gateway服务网关"></a>Gateway服务网关</h1><p>Spring Cloud Gateway 是 Spring Cloud 的一个全新项目，该项目是基于 Spring 5.0，Spring Boot 2.0 和 Project Reactor 等响应式编程和事件流技术开发的网关，它旨在为微服务架构提供一种简单有效的统一的 API 路由管理方式。</p><h2 id="为什么需要网关"><a href="#为什么需要网关" class="headerlink" title="为什么需要网关"></a>为什么需要网关</h2><p>Gateway网关是我们服务的守门神，所有微服务的统一入口。</p><p>网关的<strong>核心功能特性</strong>：</p><ul><li>请求路由</li><li>权限控制</li><li>限流</li></ul><p>架构图：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301271729594.png" alt="image-20210714210131152"></p><p><strong>权限控制</strong>：网关作为微服务入口，需要校验用户是否有请求资格，如果没有则进行拦截。</p><p><strong>路由和负载均衡</strong>：一切请求都必须先经过gateway，但网关不处理业务，而是根据某种规则，把请求转发到某个微服务，这个过程叫做路由。当然路由的目标服务有多个时，还需要做负载均衡。</p><p><strong>限流</strong>：当请求流量过高时，在网关中按照下流的微服务能够接受的速度来放行请求，避免服务压力过大。</p><p>在SpringCloud中网关的实现包括两种：</p><ul><li>gateway</li><li>zuul</li></ul><p>Zuul是基于Servlet的实现，属于阻塞式编程。而SpringCloudGateway则是基于Spring5中提供的WebFlux，属于响应式编程的实现，具备更好的性能。</p><h2 id="gateway快速入门"><a href="#gateway快速入门" class="headerlink" title="gateway快速入门"></a>gateway快速入门</h2><p>下面，我们就演示下网关的基本路由功能。基本步骤如下：</p><ol><li>创建SpringBoot工程gateway，引入网关依赖</li><li>编写启动类</li><li>编写基础配置和路由规则</li><li>启动网关服务进行测试</li></ol><h3 id="1）创建服务，引入依赖"><a href="#1）创建服务，引入依赖" class="headerlink" title="1）创建服务，引入依赖"></a>1）创建服务，引入依赖</h3><p>新建module，名称为gateway。</p><p>引入依赖：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--网关--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-gateway<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--nacos服务发现依赖--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2）编写启动类"><a href="#2）编写启动类" class="headerlink" title="2）编写启动类"></a>2）编写启动类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GatewayApplication</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">SpringApplication.run(GatewayApplication.class, args);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3）编写基础配置和路由规则"><a href="#3）编写基础配置和路由规则" class="headerlink" title="3）编写基础配置和路由规则"></a>3）编写基础配置和路由规则</h3><p>创建application.yml文件，内容如下：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">10010</span> <span class="comment"># 网关端口</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">gateway</span> <span class="comment"># 服务名称</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">server-addr:</span> <span class="string">localhost:80</span> <span class="comment"># nacos集群地址</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span> <span class="comment"># 网关路由配置</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">user-service</span> <span class="comment"># 路由id，自定义，只要唯一即可</span></span><br><span class="line">          <span class="comment"># uri: http://127.0.0.1:8081 # 路由的目标地址 http就是固定地址</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">lb://userservice</span> <span class="comment"># 路由的目标地址 lb就是loadBalance负载均衡，后面跟服务名称</span></span><br><span class="line">          <span class="attr">predicates:</span> <span class="comment"># 路由断言，也就是判断请求是否符合路由规则的条件</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">Path=/user/**</span> <span class="comment"># 这个是按照路径匹配，只要以/user/开头就符合要求</span></span><br></pre></td></tr></table></figure><p>我们将符合<code>Path</code> 规则的一切请求，都代理到 <code>uri</code>参数指定的地址。</p><p>本例中，我们将 <code>/user/**</code>开头的请求，代理到<code>lb://userservice</code>，lb是负载均衡，根据服务名拉取服务列表，实现负载均衡。</p><p>网关添加orderservice：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">10010</span> <span class="comment"># 网关端口</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">gateway</span> <span class="comment"># 服务名称</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">server-addr:</span> <span class="string">localhost:80</span> <span class="comment"># nacos集群地址</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span> <span class="comment"># 网关路由配置</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">userservice</span> <span class="comment"># 路由id，自定义，只要唯一即可</span></span><br><span class="line">          <span class="comment"># uri: http://127.0.0.1:8081 # 路由的目标地址 http就是固定地址</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">lb://userservice</span> <span class="comment"># 路由的目标地址 lb就是负载均衡，后面跟服务名称</span></span><br><span class="line">          <span class="attr">predicates:</span> <span class="comment"># 路由断言，也就是判断请求是否符合路由规则的条件</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">Path=/user/**</span> <span class="comment"># 这个是按照路径匹配，只要以/user/开头就符合要求</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">orderservice</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">lb://orderservice</span></span><br><span class="line">          <span class="attr">predicates:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">Path=/order/**</span></span><br></pre></td></tr></table></figure><h3 id="4）启动测试"><a href="#4）启动测试" class="headerlink" title="4）启动测试"></a>4）启动测试</h3><p>启动网关，访问<code>http://localhost:10010/user/1</code>时，符合<code>/user/**</code>规则，请求转发到uri：<code>http://userservice/user/1</code>，得到了结果：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301271736043.png" alt="image-20230127173634606"></p><p>访问<code>http://localhost:10010/order/101</code>同理。</p><h3 id="5）网关路由的流程图"><a href="#5）网关路由的流程图" class="headerlink" title="5）网关路由的流程图"></a>5）网关路由的流程图</h3><p>整个访问的流程如下：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301271737464.png" alt="image-20210714211742956"></p><blockquote><p>总结：</p><p>网关搭建步骤：</p><ol><li><p>创建项目，引入nacos服务发现和gateway依赖</p></li><li><p>配置application.yml，包括服务基本信息、nacos地址、路由</p></li></ol><p>路由配置包括：</p><ol><li><p>路由id：路由的唯一标示</p></li><li><p>路由目标（uri）：路由的目标地址，http代表固定地址，lb代表根据服务名负载均衡</p></li><li><p>路由断言（predicates）：判断路由的规则，</p></li><li><p>路由过滤器（filters）：对请求或响应做处理</p></li></ol></blockquote><h2 id="断言工厂"><a href="#断言工厂" class="headerlink" title="断言工厂"></a>断言工厂</h2><p>我们在配置文件中写的断言规则只是字符串，这些字符串会被Predicate Factory读取并处理，转变为路由判断的条件</p><p>例如Path=/user/**是按照路径匹配，这个规则是由</p><p><code>org.springframework.cloud.gateway.handler.predicate.PathRoutePredicateFactory</code>类来处理的，像这样的断言工厂在SpringCloudGateway还有十几个:</p><div class="table-container"><table><thead><tr><th><strong>名称</strong></th><th><strong>说明</strong></th><th><strong>示例</strong></th></tr></thead><tbody><tr><td>After</td><td>是某个时间点后的请求</td><td>-  After=2037-01-20T17:42:47.789-07:00[America/Denver]</td></tr><tr><td>Before</td><td>是某个时间点之前的请求</td><td>-  Before=2031-04-13T15:14:47.433+08:00[Asia/Shanghai]</td></tr><tr><td>Between</td><td>是某两个时间点之前的请求</td><td>-  Between=2037-01-20T17:42:47.789-07:00[America/Denver],  2037-01-21T17:42:47.789-07:00[America/Denver]</td></tr><tr><td>Cookie</td><td>请求必须包含某些cookie</td><td>- Cookie=chocolate, ch.p</td></tr><tr><td>Header</td><td>请求必须包含某些header</td><td>- Header=X-Request-Id, \d+</td></tr><tr><td>Host</td><td>请求必须是访问某个host（域名）</td><td>-  Host=<strong>.somehost.org,</strong>.anotherhost.org</td></tr><tr><td>Method</td><td>请求方式必须是指定方式</td><td>- Method=GET,POST</td></tr><tr><td>Path</td><td>请求路径必须符合指定规则</td><td>- Path=/red/{segment},/blue/**</td></tr><tr><td>Query</td><td>请求参数必须包含指定参数</td><td>- Query=name, Jack或者-  Query=name</td></tr><tr><td>RemoteAddr</td><td>请求者的ip必须是指定范围</td><td>- RemoteAddr=192.168.1.1/24</td></tr><tr><td>Weight</td><td>权重处理</td></tr></tbody></table></div><p>我们只需要掌握Path这种路由工程就可以了。更多详情前往官网：<a href="https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/#gateway-request-predicates-factories">gateway-request-predicates-factories</a></p><h2 id="过滤器工厂"><a href="#过滤器工厂" class="headerlink" title="过滤器工厂"></a>过滤器工厂</h2><p>GatewayFilter是网关中提供的一种过滤器，可以对进入网关的请求和微服务返回的响应做处理：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301272012725.png" alt="image-20210714212312871"></p><h3 id="路由过滤器的种类"><a href="#路由过滤器的种类" class="headerlink" title="路由过滤器的种类"></a>路由过滤器的种类</h3><p>Spring提供了31种不同的路由过滤器工厂。例如：</p><div class="table-container"><table><thead><tr><th><strong>名称</strong></th><th><strong>说明</strong></th></tr></thead><tbody><tr><td>AddRequestHeader</td><td>给当前请求添加一个请求头</td></tr><tr><td>RemoveRequestHeader</td><td>移除请求中的一个请求头</td></tr><tr><td>AddResponseHeader</td><td>给响应结果中添加一个响应头</td></tr><tr><td>RemoveResponseHeader</td><td>从响应结果中移除有一个响应头</td></tr><tr><td>RequestRateLimiter</td><td>限制请求的流量</td></tr></tbody></table></div><p>更多详情前往官网：<a href="https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/#gatewayfilter-factories">gatewayfilter-factories</a></p><h3 id="请求头过滤器"><a href="#请求头过滤器" class="headerlink" title="请求头过滤器"></a>请求头过滤器</h3><p>下面我们以AddRequestHeader 为例来讲解。</p><blockquote><p><strong>需求</strong>：给所有进入userservice的请求添加一个请求头：Truth=itcast is freaking awesome!</p></blockquote><p>只需要修改gateway服务的application.yml文件，添加路由过滤即可：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">user-service</span> </span><br><span class="line">        <span class="attr">uri:</span> <span class="string">lb://userservice</span> </span><br><span class="line">        <span class="attr">predicates:</span> </span><br><span class="line">          <span class="bullet">-</span> <span class="string">Path=/user/**</span> </span><br><span class="line">        <span class="attr">filters:</span> <span class="comment"># 过滤器</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">AddRequestHeader=Truth,</span> <span class="string">hello</span> <span class="string">world!</span> <span class="comment"># 添加请求头</span></span><br></pre></td></tr></table></figure><p>当前过滤器写在userservice路由下，因此仅仅对访问userservice的请求有效。</p><p>修改userservice的接口，打印请求头</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> User <span class="title function_">queryById</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Long id,</span></span><br><span class="line"><span class="params">                      <span class="meta">@RequestHeader(value = &quot;Truth&quot;, required = false)</span> String truth)</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;truth = &quot;</span> + truth);</span><br><span class="line">    <span class="keyword">return</span> userService.queryById(id);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>重启项目后访问<a href="http://localhost:10010/user/1查看控制台打印：">http://localhost:10010/user/1查看控制台打印：</a></p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301272102155.png" alt="image-20230127210251803"></p><h3 id="默认过滤器"><a href="#默认过滤器" class="headerlink" title="默认过滤器"></a>默认过滤器</h3><p>如果要对所有的路由都生效，则可以将过滤器工厂写到default下。格式如下：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">userservice</span> </span><br><span class="line">        <span class="attr">uri:</span> <span class="string">lb://userservice</span> </span><br><span class="line">        <span class="attr">predicates:</span> </span><br><span class="line">          <span class="bullet">-</span> <span class="string">Path=/user/**</span></span><br><span class="line">      <span class="attr">default-filters:</span> <span class="comment"># 默认过滤项</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">AddRequestHeader=Truth,</span> <span class="string">Itcast</span> <span class="string">is</span> <span class="string">freaking</span> <span class="string">awesome!</span>  </span><br></pre></td></tr></table></figure><blockquote><p>总结：</p><p>过滤器的作用是什么？</p><p>① 对路由的请求或响应做加工处理，比如添加请求头</p><p>② 配置在路由下的过滤器只对当前路由的请求生效</p><p>defaultFilters的作用是什么？</p><p>① 对所有路由都生效的过滤器</p></blockquote><h2 id="全局过滤器"><a href="#全局过滤器" class="headerlink" title="全局过滤器"></a>全局过滤器</h2><h3 id="全局过滤器作用"><a href="#全局过滤器作用" class="headerlink" title="全局过滤器作用"></a>全局过滤器作用</h3><p>全局过滤器的作用也是处理一切进入网关的请求和微服务响应，与GatewayFilter的作用一样。</p><p>区别在于GatewayFilter通过配置定义，处理逻辑是固定的；而GlobalFilter的逻辑需要自己写代码实现。</p><p>定义方式是实现GlobalFilter接口。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">GlobalFilter</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  处理当前请求，有必要的话通过&#123;<span class="doctag">@link</span> GatewayFilterChain&#125;将请求交给下一个过滤器处理</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> exchange 请求上下文，里面可以获取Request、Response等信息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> chain 用来把请求委托给下一个过滤器 </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> &#123;<span class="doctag">@code</span> Mono&lt;Void&gt;&#125; 返回标示当前过滤器业务结束</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    Mono&lt;Void&gt; <span class="title function_">filter</span><span class="params">(ServerWebExchange exchange, GatewayFilterChain chain)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在filter中编写自定义逻辑，可以实现下列功能：</p><ul><li>登录状态判断</li><li>权限校验</li><li>请求限流等</li></ul><h3 id="自定义全局过滤器"><a href="#自定义全局过滤器" class="headerlink" title="自定义全局过滤器"></a>自定义全局过滤器</h3><p>需求：定义全局过滤器，拦截请求，判断请求的参数是否满足下面条件：</p><ul><li><p>参数中是否有authorization，</p></li><li><p>authorization参数值是否为admin</p></li></ul><p>如果同时满足则放行，否则拦截。实现：</p><p>在gateway中定义一个过滤器：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Order(-1)</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AuthorizeFilter</span> <span class="keyword">implements</span> <span class="title class_">GlobalFilter</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Mono&lt;Void&gt; <span class="title function_">filter</span><span class="params">(ServerWebExchange exchange, GatewayFilterChain chain)</span> &#123;</span><br><span class="line">        <span class="comment">// 1.获取请求参数</span></span><br><span class="line">        MultiValueMap&lt;String, String&gt; params = exchange.getRequest().getQueryParams();</span><br><span class="line">        <span class="comment">// 2.获取authorization参数</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">auth</span> <span class="operator">=</span> params.getFirst(<span class="string">&quot;authorization&quot;</span>);</span><br><span class="line">        <span class="comment">// 3.校验</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&quot;admin&quot;</span>.equals(auth)) &#123;</span><br><span class="line">            <span class="comment">// 放行</span></span><br><span class="line">            <span class="keyword">return</span> chain.filter(exchange);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 4.拦截</span></span><br><span class="line">        <span class="comment">// 4.1.禁止访问，设置状态码</span></span><br><span class="line">        exchange.getResponse().setStatusCode(HttpStatus.FORBIDDEN);</span><br><span class="line">        <span class="comment">// 4.2.结束处理</span></span><br><span class="line">        <span class="keyword">return</span> exchange.getResponse().setComplete();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="过滤器执行顺序"><a href="#过滤器执行顺序" class="headerlink" title="过滤器执行顺序"></a>过滤器执行顺序</h3><p>请求进入网关会碰到三类过滤器：当前路由的过滤器、DefaultFilter、GlobalFilter</p><p>请求路由后，会将当前路由过滤器和DefaultFilter、GlobalFilter，合并到一个过滤器链（集合）中，排序后依次执行每个过滤器：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301272217354.png" alt="image-20210714214228409"></p><blockquote><p>排序的规则：</p><ul><li>每一个过滤器都必须指定一个int类型的order值，<strong>order值越小，优先级越高，执行顺序越靠前</strong>。</li><li>GlobalFilter通过实现Ordered接口，或者添加@Order注解来指定order值，由我们自己指定</li><li>路由过滤器和defaultFilter的order由Spring指定，默认是按照声明顺序从1递增。</li><li>当过滤器的order值一样时，会按照 defaultFilter &gt; 路由过滤器 &gt; GlobalFilter的顺序执行。</li></ul></blockquote><p>详细内容，可以查看源码：</p><p><code>org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator#getFilters()</code>方法是先加载defaultFilters，然后再加载某个route的filters，然后合并。</p><p><code>org.springframework.cloud.gateway.handler.FilteringWebHandler#handle()</code>方法会加载全局过滤器，与前面的过滤器合并后根据order排序，组织过滤器链</p><h2 id="跨域问题"><a href="#跨域问题" class="headerlink" title="跨域问题"></a>跨域问题</h2><h3 id="什么是跨域"><a href="#什么是跨域" class="headerlink" title="什么是跨域"></a>什么是跨域</h3><p>跨域：域名不一致就是跨域，主要包括：</p><ul><li><p>域名不同： www.taobao.com 和 www.taobao.org 和 www.jd.com</p></li><li><p>域名相同，端口不同：localhost:8080和localhost8081</p></li></ul><p>跨域问题：浏览器禁止请求的发起者与服务端发生跨域ajax请求，请求被浏览器拦截的问题</p><p>解决方案：CORS：<a href="https://www.ruanyifeng.com/blog/2016/04/cors.html">https://www.ruanyifeng.com/blog/2016/04/cors.html</a></p><h3 id="解决跨域"><a href="#解决跨域" class="headerlink" title="解决跨域"></a>解决跨域</h3><p>在gateway服务的application.yml文件中，添加下面的配置：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="comment"># 。。。</span></span><br><span class="line">      <span class="attr">globalcors:</span> <span class="comment"># 全局的跨域处理</span></span><br><span class="line">        <span class="attr">add-to-simple-url-handler-mapping:</span> <span class="literal">true</span> <span class="comment"># 解决options请求被拦截问题</span></span><br><span class="line">        <span class="attr">corsConfigurations:</span></span><br><span class="line">          <span class="string">&#x27;[/**]&#x27;</span><span class="string">:</span></span><br><span class="line">            <span class="attr">allowedOrigins:</span> <span class="comment"># 允许哪些网站的跨域请求 </span></span><br><span class="line">              <span class="bullet">-</span> <span class="string">&quot;http://localhost:8090&quot;</span></span><br><span class="line">            <span class="attr">allowedMethods:</span> <span class="comment"># 允许的跨域ajax的请求方式</span></span><br><span class="line">              <span class="bullet">-</span> <span class="string">&quot;GET&quot;</span></span><br><span class="line">              <span class="bullet">-</span> <span class="string">&quot;POST&quot;</span></span><br><span class="line">              <span class="bullet">-</span> <span class="string">&quot;DELETE&quot;</span></span><br><span class="line">              <span class="bullet">-</span> <span class="string">&quot;PUT&quot;</span></span><br><span class="line">              <span class="bullet">-</span> <span class="string">&quot;OPTIONS&quot;</span></span><br><span class="line">            <span class="attr">allowedHeaders:</span> <span class="string">&quot;*&quot;</span> <span class="comment"># 允许在请求中携带的头信息</span></span><br><span class="line">            <span class="attr">allowCredentials:</span> <span class="literal">true</span> <span class="comment"># 是否允许携带cookie</span></span><br><span class="line">            <span class="attr">maxAge:</span> <span class="number">360000</span> <span class="comment"># 这次跨域检测的有效期</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringCloud </tag>
            
            <tag> nacos </tag>
            
            <tag> GateWay </tag>
            
            <tag> CORS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>原神角色卡服务器自建</title>
      <link href="/posts/yscard.html"/>
      <url>/posts/yscard.html</url>
      
        <content type="html"><![CDATA[<h1 id="原神角色卡服务器自建"><a href="#原神角色卡服务器自建" class="headerlink" title="原神角色卡服务器自建"></a>原神角色卡服务器自建</h1><p>此文引用<a href="https://github.com/journey-ad">journey-ad</a>的开源项目<a href="https://genshin-card.getloli.com/">原神玩家信息卡片生成工具</a>。实现效果：</p><p>展示信息包含昵称、uid、宝箱数、深渊……</p><p><img src="https://genshin-card.himiku.com/detail/rand/76907318.png" alt="genshin-card"></p><blockquote><p><code>注意</code>：由于自建服务器部署需要备案才能访问，所以本文提到的链接都是基于服务器ip的http链接而非域名。<br>目前其他博主的可用链接：<code>https://genshin-card.himiku.com</code></p></blockquote><h2 id="下载源码"><a href="#下载源码" class="headerlink" title="下载源码"></a>下载源码</h2><p>原作者仓库（被封）：<a href="https://github.com/journey-ad/genshin-impact-card">https://github.com/journey-ad/genshin-impact-card</a></p><p>我的备份仓库：<a href="https://github.com/roydonGuo/genshin-card">https://github.com/roydonGuo/genshin-card</a></p><h2 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h2><p>有一台云服务器、有<code>Linux</code>使用经验、熟悉<code>node</code>、<code>nginx</code>、宝塔……</p><h2 id="配置安装"><a href="#配置安装" class="headerlink" title="配置安装"></a>配置安装</h2><h3 id="安装NODEJS和NPM"><a href="#安装NODEJS和NPM" class="headerlink" title="安装NODEJS和NPM"></a>安装NODEJS和NPM</h3><p>卸载原有NODEJS和NPM</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum remove -y nodejs npm</span><br></pre></td></tr></table></figure><p>安装NODEJS和NPM</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -sL https://rpm.nodesource.com/setup_10.x | bash -</span><br></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install nodejs -y</span><br></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo npm install -g npm</span><br></pre></td></tr></table></figure><h3 id="安装YARN"><a href="#安装YARN" class="headerlink" title="安装YARN"></a>安装YARN</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl --silent --location https://dl.yarnpkg.com/rpm/yarn.repo | sudo <span class="built_in">tee</span> /etc/yum.repos.d/yarn.repo</span><br></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo rpm --import https://dl.yarnpkg.com/rpm/pubkey.gpg</span><br></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install yarn</span><br></pre></td></tr></table></figure><p>查看版本</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn --version</span><br></pre></td></tr></table></figure><h3 id="cookie获取"><a href="#cookie获取" class="headerlink" title="cookie获取"></a>cookie获取</h3><p>获取米游社Cookie，打开<a href="https://bbs.mihoyo.com/ys/">https://bbs.mihoyo.com/ys/</a>，登录后<code>F12</code>打开控制台，随便找到一个请求，查看标头的cookie，一整个全复制下来。</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301141536019.png" alt="image-20230114151211911"></p><h3 id="源码配置"><a href="#源码配置" class="headerlink" title="源码配置"></a>源码配置</h3><p>源码可以选择克隆我拉取的项目，随便放在一个文件夹前提是保证你自己知道此文件夹。</p><p>例如我放在了根目录的<code>genshin-card</code>文件夹。</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301141536578.png" alt="image-20230114150638152"></p><p>ssh打开此文件夹安装依赖包：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn install</span><br></pre></td></tr></table></figure><p>在<code>genshin-card</code>文件夹新建一个记事本txt，输入以下内容：把cookie换成你的。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">export</span> COOKIE=<span class="string">&quot;你的cookid&quot;</span> &amp;&amp; yarn serve</span><br></pre></td></tr></table></figure><p>保存后修改文件后缀名为<code>.sh</code></p><h3 id="守护进程"><a href="#守护进程" class="headerlink" title="守护进程"></a>守护进程</h3><p>宝塔安装<code>Supervisor</code>管理器。添加守护进程：</p><p>启动命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash genshincard.sh</span><br></pre></td></tr></table></figure><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301141536654.png" alt="image-20230114151842184"></p><p>默认端口号3000，浏览器访问：</p><p><code>http://&#123;你的服务器ip&#125;:3000/detail/rand/&#123;你的米游社id&#125;.png</code></p><p>出现下方卡片就算成功了。</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301141536531.png" alt="image-20230114152123072"></p><p>查看日志：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301141536292.png" alt="image-20230114152326872"></p>]]></content>
      
      
      <categories>
          
          <category> Genshin </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Genshin </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringCloud之nacos</title>
      <link href="/posts/nacos.html"/>
      <url>/posts/nacos.html</url>
      
        <content type="html"><![CDATA[<h1 id="Nacos注册中心"><a href="#Nacos注册中心" class="headerlink" title="Nacos注册中心"></a>Nacos注册中心</h1><p>国内公司一般都推崇阿里巴巴的技术，比如注册中心，SpringCloudAlibaba也推出了一个名为Nacos的注册中心。</p><h2 id="认识Nacos"><a href="#认识Nacos" class="headerlink" title="认识Nacos"></a>认识Nacos</h2><p><a href="https://nacos.io/">Nacos</a>是阿里巴巴的产品，现在是<a href="https://spring.io/projects/spring-cloud">SpringCloud</a>中的一个组件。相比<a href="https://github.com/Netflix/eureka">Eureka</a>功能更加丰富，在国内受欢迎程度较高。</p><p>官方指导文档：<a href="https://nacos.io/zh-cn/docs/quick-start.html">https://nacos.io/zh-cn/docs/quick-start.html</a>。</p><p>版本选择：<a href="https://github.com/alibaba/spring-cloud-alibaba/wiki/版本说明">https://github.com/alibaba/spring-cloud-alibaba/wiki/版本说明</a>。</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301131224049.png" alt="image-20230112234113025"></p><h2 id="安装Nacos"><a href="#安装Nacos" class="headerlink" title="安装Nacos"></a>安装Nacos</h2><h3 id="Windows安装"><a href="#Windows安装" class="headerlink" title="Windows安装"></a>Windows安装</h3><p>开发阶段采用单机安装即可。</p><p>在Nacos的GitHub页面，提供有下载链接，可以下载编译好的Nacos服务端或者源代码：</p><p>GitHub主页：<a href="https://github.com/alibaba/nacos">https://github.com/alibaba/nacos</a></p><p>GitHub的Release下载页：<a href="https://github.com/alibaba/nacos/releases">https://github.com/alibaba/nacos/releases</a></p><p>本demo采用1.4.1.版本的Nacos：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301131224029.png" alt="image-20230112234548105"></p><p>将这个包解压到任意非中文目录下：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301131224395.png" alt="image-20230112235013166"></p><p>Nacos的默认端口是8848，如果你电脑上的其它进程占用了8848端口，请先尝试关闭该进程。</p><p><strong>如果无法关闭占用8848端口的进程</strong>，也可以进入nacos的conf目录，修改配置文件中的端口：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301131224540.png" alt="image-20230112235128366"></p><p>修改其中的内容：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301131224791.png" alt="image-20230112235303594"></p><p>启动非常简单，进入bin目录，然后执行命令即可：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">startup.cmd -m standalone</span><br></pre></td></tr></table></figure><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301131224217.png" alt="image-20230112235439600"></p><p>在浏览器输入地址：<a href="http://127.0.0.1:8848/nacos访问。">http://127.0.0.1:8848/nacos访问。</a></p><p>默认的账号和密码都是nacos。</p><h3 id="Linux安装"><a href="#Linux安装" class="headerlink" title="Linux安装"></a>Linux安装</h3><p>Linux或者Mac安装方式与Windows类似。</p><p>Nacos依赖于JDK运行，索引Linux上也需要安装JDK才行。</p><p>上传安装包，如图，选择tar.gz：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301131224629.png" alt="image-20230112234548105"></p><p>上传到Linux服务器的某个目录，例如<code>/usr/local/src</code>目录下：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301131224695.png" alt="image-20210402163715580"></p><p>命令解压缩安装包：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -xvf nacos-server-1.4.1.tar.gz</span><br></pre></td></tr></table></figure><p>然后删除安装包：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rm</span> -rf nacos-server-1.4.1.tar.gz</span><br></pre></td></tr></table></figure><p>目录中最终样式：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301131224367.png" alt="image-20210402163858429"></p><p>目录内部：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301131224812.png" alt="image-20210402164414827"></p><p>端口配置与windows中类似</p><p>在nacos/bin目录中，输入命令启动Nacos：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh startup.sh -m standalone</span><br></pre></td></tr></table></figure><h2 id="nacos服务注册"><a href="#nacos服务注册" class="headerlink" title="nacos服务注册"></a>nacos服务注册</h2><p>Nacos是SpringCloudAlibaba的组件，而SpringCloudAlibaba也遵循SpringCloud中定义的服务注册、服务发现规范。因此使用Nacos和使用Eureka对于微服务来说，并没有太大区别。</p><p>主要差异在于：</p><ul><li>依赖不同</li><li>服务地址不同</li></ul><h3 id="引入依赖"><a href="#引入依赖" class="headerlink" title="引入依赖"></a>引入依赖</h3><p>在cloud-demo父工程的pom文件中的<code>&lt;dependencyManagement&gt;</code>中引入SpringCloudAlibaba的依赖：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-alibaba-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.6.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>然后在<code>user-service</code>和<code>order-service</code>中的pom文件中引入nacos-discovery依赖：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p><strong>注意</strong>：不要忘了注释掉eureka的依赖。</p></blockquote><h3 id="配置nacos地址"><a href="#配置nacos地址" class="headerlink" title="配置nacos地址"></a>配置nacos地址</h3><p>在user-service和order-service的application.yml中添加nacos地址：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">server-addr:</span> <span class="string">localhost:8848</span></span><br></pre></td></tr></table></figure><blockquote><p><strong>注意</strong>：不要忘了注释掉eureka的地址</p></blockquote><p><strong>重启</strong>微服务后，登录nacos管理页面，可以看到微服务信息：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301132151664.png" alt="image-20230113215142839"></p><h2 id="服务分级存储模型"><a href="#服务分级存储模型" class="headerlink" title="服务分级存储模型"></a>服务分级存储模型</h2><p>一个<strong>服务</strong>可以有多个<strong>实例</strong>，例如我们的user-service，可以有:</p><ul><li>127.0.0.1:8081</li><li>127.0.0.1:8082</li><li>127.0.0.1:8083</li></ul><p>假如这些实例分布于全国各地的不同机房，例如：</p><ul><li>127.0.0.1:8081，在上海机房</li><li>127.0.0.1:8082，在上海机房</li><li>127.0.0.1:8083，在杭州机房</li></ul><p>Nacos就将同一机房内的实例 划分为一个<strong>集群</strong>。</p><p>也就是说，user-service是服务，一个服务可以包含多个集群，如杭州、上海，每个集群下可以有多个实例，形成分级模型，如图：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301132154668.png" alt="image-20210713232522531"></p><p>微服务互相访问时，应该尽可能访问同集群实例，因为本地访问速度更快。当本集群内不可用时，才访问其它集群。例如：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301132154739.png" alt="image-20210713232658928"></p><p>杭州机房内的order-service应该优先访问同机房的user-service。</p><h3 id="给user-service配置集群"><a href="#给user-service配置集群" class="headerlink" title="给user-service配置集群"></a>给user-service配置集群</h3><p>修改user-service的application.yml文件，添加集群配置：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">server-addr:</span> <span class="string">localhost:8848</span></span><br><span class="line">      <span class="attr">discovery:</span></span><br><span class="line">        <span class="attr">cluster-name:</span> <span class="string">HZ</span> <span class="comment"># 集群名称</span></span><br></pre></td></tr></table></figure><p><strong>重启</strong>两个user-service实例。</p><p>我们再次复制一个user-service启动配置，添加属性：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-Dserver.port=8083 -Dspring.cloud.nacos.discovery.cluster-name=SH</span><br></pre></td></tr></table></figure><p>启动UserApplication3后再次查看nacos控制台：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301132159362.png" alt="image-20230113215955173"></p><h3 id="同集群优先的负载均衡"><a href="#同集群优先的负载均衡" class="headerlink" title="同集群优先的负载均衡"></a>同集群优先的负载均衡</h3><p>默认的<code>ZoneAvoidanceRule</code>并不能实现根据同集群优先来实现负载均衡。</p><p>因此Nacos中提供了一个<code>NacosRule</code>的实现，可以优先从同集群中随机挑选实例。</p><p>1）给order-service配置集群信息</p><p>修改order-service的application.yml文件，添加集群配置：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">server-addr:</span> <span class="string">localhost:8848</span></span><br><span class="line">      <span class="attr">discovery:</span></span><br><span class="line">        <span class="attr">cluster-name:</span> <span class="string">HZ</span> <span class="comment"># 集群名称</span></span><br></pre></td></tr></table></figure><p>2）修改负载均衡规则</p><p>修改order-service的application.yml文件，修改负载均衡规则：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">userservice:</span></span><br><span class="line">  <span class="attr">ribbon:</span></span><br><span class="line">    <span class="attr">NFLoadBalancerRuleClassName:</span> <span class="string">com.alibaba.cloud.nacos.ribbon.NacosRule</span> <span class="comment"># 负载均衡规则 </span></span><br></pre></td></tr></table></figure><p>当本地集群无user-service健康实例会访问别的集群，此时order-service会跨集群访问但会提示警告信息，方便运维人员排查错误：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301132212706.png" alt="image-20230113221227537"></p><h2 id="权重配置"><a href="#权重配置" class="headerlink" title="权重配置"></a>权重配置</h2><p>实际部署中会出现这样的场景：</p><p>服务器设备性能有差异，部分实例所在机器性能较好，另一些较差，我们希望性能好的机器承担更多的用户请求。但默认情况下NacosRule是同集群内随机挑选，不会考虑机器的性能问题。</p><p>因此，Nacos提供了权重配置来控制访问频率，权重越大则访问频率越高。</p><p>在nacos控制台，找到user-service的实例列表，点击编辑，即可修改权重（默认权重为1，数值越小访问概率越小）：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301132216625.png" alt="image-20230113221647250"></p><blockquote><p><strong>注意</strong>：如果权重修改为0，则该实例永远不会被访问</p></blockquote><h2 id="环境隔离"><a href="#环境隔离" class="headerlink" title="环境隔离"></a>环境隔离</h2><p>Nacos提供了namespace来实现环境隔离功能。</p><ul><li>nacos中可以有多个namespace</li><li>namespace下可以有group、service等</li><li>不同namespace之间相互隔离，例如不同namespace的服务互相不可见</li></ul><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301132219723.png" alt="image-20210714000101516"></p><h3 id="创建namespace"><a href="#创建namespace" class="headerlink" title="创建namespace"></a>创建namespace</h3><p>默认情况下，所有service、data、group都在同一个namespace，名为public：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301132222415.png" alt="image-20210714000414781"></p><p>我们可以点击页面新增按钮，添加一个namespace，命名空间ID留空会使用uuid自动生成：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301132223721.png" alt="image-20230113222306524"></p><p>就能在页面看到一个新的namespace：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301132223197.png" alt="image-20230113222344811"></p><h3 id="给微服务配置namespace"><a href="#给微服务配置namespace" class="headerlink" title="给微服务配置namespace"></a>给微服务配置namespace</h3><p>给微服务配置namespace只能通过修改配置来实现。</p><p>例如，修改order-service的application.yml文件：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">server-addr:</span> <span class="string">localhost:8848</span></span><br><span class="line">      <span class="attr">discovery:</span></span><br><span class="line">        <span class="attr">cluster-name:</span> <span class="string">HZ</span></span><br><span class="line">        <span class="attr">namespace:</span> <span class="string">1e5db315-08c5-4ebd-a733-7c25bdaad8c3</span> <span class="comment"># 命名空间，填ID</span></span><br></pre></td></tr></table></figure><p><strong>重启</strong>order-service后，访问控制台，可以看到下面的结果：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301132232633.png" alt="image-20230113222729845"></p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301132227957.png" alt="image-20230113222758402"></p><p>此时访问order-service，因为namespace不同，会导致找不到userservice实例，控制台会报错：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">01</span>-<span class="number">13</span> <span class="number">22</span>:<span class="number">28</span>:<span class="number">39</span>:<span class="number">346</span> ERROR <span class="number">13372</span> --- [nio-<span class="number">8080</span>-exec-<span class="number">2</span>] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() <span class="keyword">for</span> servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.IllegalStateException: No instances available <span class="keyword">for</span> userservice] with root cause</span><br></pre></td></tr></table></figure><h2 id="Nacos与Eureka的区别"><a href="#Nacos与Eureka的区别" class="headerlink" title="Nacos与Eureka的区别"></a>Nacos与Eureka的区别</h2><p>Nacos的服务实例分为两种l类型：</p><ul><li><p>临时实例：如果实例宕机超过一定时间，会从服务列表剔除，默认的类型。</p></li><li><p>非临时实例：如果实例宕机，不会从服务列表剔除，也可以叫永久实例。</p></li></ul><p>配置一个服务实例为永久实例：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">discovery:</span></span><br><span class="line">        <span class="attr">ephemeral:</span> <span class="literal">false</span> <span class="comment"># 设置为非临时实例</span></span><br></pre></td></tr></table></figure><p>Nacos和Eureka整体结构类似，服务注册、服务拉取、心跳等待，但是也存在一些差异：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301132233356.png" alt="image-20210714001728017"></p><ul><li><p>Nacos与eureka的共同点</p><ul><li>都支持服务注册和服务拉取</li><li>都支持服务提供者心跳方式做健康检测</li></ul></li><li><p>Nacos与Eureka的区别</p><ul><li>Nacos支持服务端主动检测提供者状态：临时实例采用心跳模式，非临时实例采用主动检测模式</li><li>临时实例心跳不正常会被剔除，非临时实例则不会被剔除</li><li>Nacos支持服务列表变更的消息推送模式，服务列表更新更及时</li><li>Nacos集群默认采用AP方式，当集群中存在非临时实例时，采用CP模式；Eureka采用AP方式</li></ul></li></ul><h1 id="Nacos配置管理"><a href="#Nacos配置管理" class="headerlink" title="Nacos配置管理"></a>Nacos配置管理</h1><p>Nacos除了可以做注册中心，同样可以做配置管理来使用。</p><h2 id="统一配置管理"><a href="#统一配置管理" class="headerlink" title="统一配置管理"></a>统一配置管理</h2><p>当微服务部署的实例越来越多，达到数十、数百时，逐个修改微服务配置就会让人抓狂，而且很容易出错。我们需要一种统一配置管理方案，可以集中管理所有实例的配置。</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301142050286.png" alt="image-20210714164426792"></p><p>Nacos一方面可以将配置集中管理，另一方可以在配置变更时，及时通知微服务，实现配置的热更新。</p><h3 id="在nacos中添加配置文件"><a href="#在nacos中添加配置文件" class="headerlink" title="在nacos中添加配置文件"></a>在nacos中添加配置文件</h3><p>如何在nacos中管理配置呢？</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301142052104.png" alt="image-20230114205243785"></p><p>然后在弹出的表单中，填写配置信息：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301142102066.png" alt="image-20210714164856664"></p><blockquote><p>注意：项目的核心配置，需要热更新的配置才有放到nacos管理的必要。基本不会变更的一些配置还是保存在微服务本地比较好。</p></blockquote><h3 id="从微服务拉取配置"><a href="#从微服务拉取配置" class="headerlink" title="从微服务拉取配置"></a>从微服务拉取配置</h3><p>微服务要拉取nacos中管理的配置，并且与本地的application.yml配置合并，才能完成项目启动。</p><p>但如果尚未读取application.yml，又如何得知nacos地址呢？</p><p>因此spring引入了一种新的配置文件：bootstrap.yaml文件，会在application.yml之前被读取，流程如下：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301142105811.png" alt="img"></p><p>1）引入nacos-config依赖</p><p>首先，在user-service服务中，引入nacos-config的客户端依赖：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--nacos配置管理依赖--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-config<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>2）添加bootstrap.yaml</p><p>然后，在user-service中添加一个bootstrap.yml文件，内容如下：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">userservice</span> <span class="comment"># 服务名称</span></span><br><span class="line">  <span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">dev</span> <span class="comment">#开发环境，这里是dev </span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">server-addr:</span> <span class="string">localhost:8848</span> <span class="comment"># Nacos地址</span></span><br><span class="line">      <span class="attr">config:</span></span><br><span class="line">        <span class="attr">file-extension:</span> <span class="string">yaml</span> <span class="comment"># 文件后缀名</span></span><br></pre></td></tr></table></figure><p>添加完成就可以把application.yml中的相似匹配删除：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8081</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/cloud-user?useSSL=false</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">qwer1234</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="comment">#  application:</span></span><br><span class="line"><span class="comment">#    name: userservice</span></span><br><span class="line"><span class="comment">#  cloud:</span></span><br><span class="line"><span class="comment">#    nacos:</span></span><br><span class="line"><span class="comment">#      server-addr: localhost:8848 # nacos服务地址</span></span><br><span class="line"><span class="comment">#      discovery:</span></span><br><span class="line"><span class="comment">#        cluster-name: HZ # 集群</span></span><br><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">  <span class="attr">type-aliases-package:</span> <span class="string">com.roydon.order.entity</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">map-underscore-to-camel-case:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">level:</span></span><br><span class="line">    <span class="attr">com.roydon:</span> <span class="string">debug</span></span><br><span class="line">  <span class="attr">pattern:</span></span><br><span class="line">    <span class="attr">dateformat:</span> <span class="string">MM-dd</span> <span class="string">HH:mm:ss:SSS</span></span><br></pre></td></tr></table></figure><p>这里会根据spring.cloud.nacos.server-addr获取nacos地址，再根据</p><p><code>$&#123;spring.application.name&#125;-$&#123;spring.profiles.active&#125;.$&#123;spring.cloud.nacos.config.file-extension&#125;</code>作为文件id，来读取配置。</p><p>本例中，就是去读取<code>userservice-dev.yaml</code>：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301142112745.png" alt="image-20210714170845901"></p><p>3）读取nacos配置</p><p>在user-service中的UserController中添加业务逻辑，读取pattern.dateformat配置：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;pattern.dateformat&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String dateformat;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@GetMapping(&quot;now&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">now</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> LocalDateTime.now().format(DateTimeFormatter.ofPattern(dateformat));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ...略</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在页面访问，可以看到效果：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301142122243.png" alt="image-20230114211936962"></p><p>修改nacos配置文件，把日期格式改为如下所示：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">pattern:</span></span><br><span class="line">  <span class="attr">dateformat:</span> <span class="string">MM-dd</span> <span class="string">HH:mm</span></span><br></pre></td></tr></table></figure><p>发布后重启userserice服务：</p><p><img src="https://cdn.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301142122526.png" alt="image-20230114212159333"></p><h2 id="配置热更新"><a href="#配置热更新" class="headerlink" title="配置热更新"></a>配置热更新</h2><p>我们最终的目的，是修改nacos中的配置后，微服务中无需重启即可让配置生效，也就是<strong>配置热更新</strong>。</p><p>要实现配置热更新，可以使用两种方式：</p><h3 id="方式一"><a href="#方式一" class="headerlink" title="方式一"></a>方式一</h3><p>在@Value注入的变量所在类上添加注解<code>@RefreshScope</code>：</p><p><img src="https://cdn.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301142123560.png" alt="image-20230114212347163"></p><h3 id="方式二"><a href="#方式二" class="headerlink" title="方式二"></a>方式二</h3><p>使用<code>@ConfigurationProperties</code>注解代替@Value注解。</p><p>在user-service服务config包中，添加一个类，读取patterrn.dateformat属性：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;pattern&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PatternProperties</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String dateformat;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在UserController中使用这个类代替@Value：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;user&quot;)</span></span><br><span class="line"><span class="comment">//@RefreshScope</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    @Value(&quot;$&#123;pattern.dateformat&#125;&quot;)</span></span><br><span class="line"><span class="comment">//    private String dateformat;</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> PatternProperties patternProperties;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;now&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">now</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//        return LocalDateTime.now().format(DateTimeFormatter.ofPattern(dateformat));</span></span><br><span class="line">        <span class="keyword">return</span> LocalDateTime</span><br><span class="line">            .now()</span><br><span class="line">            .format(DateTimeFormatter.ofPattern(patternProperties.getDateformat()));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="配置共享"><a href="#配置共享" class="headerlink" title="配置共享"></a>配置共享</h2><p>其实微服务启动时，会去nacos读取多个配置文件，例如：</p><ul><li><p><code>[spring.application.name]-[spring.profiles.active].yaml</code>，例如：userservice-dev.yaml</p></li><li><p><code>[spring.application.name].yaml</code>，例如：userservice.yaml</p></li></ul><p>而<code>[spring.application.name].yaml</code>不包含环境，因此可以被多个环境共享。</p><p>下面我们通过案例来测试配置共享</p><h3 id="1）添加一个环境共享配置"><a href="#1）添加一个环境共享配置" class="headerlink" title="1）添加一个环境共享配置"></a>1）添加一个环境共享配置</h3><p>我们在nacos中添加一个userservice.yaml文件：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301142138404.png" alt="image-20230114213758972"></p><h3 id="2）在user-service中读取共享配置"><a href="#2）在user-service中读取共享配置" class="headerlink" title="2）在user-service中读取共享配置"></a>2）在user-service中读取共享配置</h3><p>在user-service服务中，修改PatternProperties类，读取新添加的属性：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;pattern&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PatternProperties</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String dateformat;</span><br><span class="line">    <span class="keyword">private</span> String envShare; <span class="comment">// 共享配置读取</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在user-service服务中，添加一个接口：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;share&quot;)</span></span><br><span class="line"><span class="keyword">public</span> PatternProperties <span class="title function_">share</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> patternProperties;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3）运行两个UserApplication，使用不同的profile"><a href="#3）运行两个UserApplication，使用不同的profile" class="headerlink" title="3）运行两个UserApplication，使用不同的profile"></a>3）运行两个UserApplication，使用不同的profile</h3><p>修改UserApplication2这个启动项，改变其profile值：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301142142189.png" alt="image-20230114214220471"></p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301142143505.png" alt="image-20230114214354269"></p><p>这样，UserApplication(8081)使用的profile是dev，UserApplication2(8082)使用的profile是test。</p><p>启动UserApplication和UserApplication2：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301142146112.png" alt="image-20230114214559833"></p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301142145308.png" alt="image-20230114214533006"></p><p>可以看出来，不管是dev，还是test环境，都读取到了envSharedValue这个属性的值。</p><h3 id="4）配置共享的优先级"><a href="#4）配置共享的优先级" class="headerlink" title="4）配置共享的优先级"></a>4）配置共享的优先级</h3><p>当nacos、服务本地同时出现相同属性时，优先级有高低之分：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301142147099.png" alt="image-20210714174623557"></p><h2 id="搭建Nacos集群"><a href="#搭建Nacos集群" class="headerlink" title="搭建Nacos集群"></a>搭建Nacos集群</h2><p>Nacos生产环境下一定要部署为集群状态，详情见：</p><h1 id="Feign远程调用"><a href="#Feign远程调用" class="headerlink" title="Feign远程调用"></a>Feign远程调用</h1><p>先来看我们以前利用RestTemplate发起远程调用的代码：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301142226582.png" alt="image-20230114222642403"></p><p>存在下面的问题：</p><p>•代码可读性差，编程体验不统一</p><p>•参数复杂URL难以维护</p><p>Feign是一个声明式的http客户端，官方地址：<a href="https://github.com/OpenFeign/feign">https://github.com/OpenFeign/feign</a></p><p>其作用就是帮助我们优雅的实现http请求的发送，解决上面提到的问题。</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301142227318.png" alt="image-20210714174918088"></p><h2 id="Feign替代RestTemplate"><a href="#Feign替代RestTemplate" class="headerlink" title="Feign替代RestTemplate"></a>Feign替代RestTemplate</h2><p>Fegin的使用步骤如下：</p><h3 id="1）引入依赖"><a href="#1）引入依赖" class="headerlink" title="1）引入依赖"></a>1）引入依赖</h3><p>我们在order-service服务的pom文件中引入feign的依赖：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-openfeign<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2）添加注解"><a href="#2）添加注解" class="headerlink" title="2）添加注解"></a>2）添加注解</h3><p>在order-service的启动类添加注解<code>@EnableFeignClients</code>开启Feign的功能：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301142228241.png" alt="image-20230114222856819"></p><h3 id="3）编写Feign的客户端"><a href="#3）编写Feign的客户端" class="headerlink" title="3）编写Feign的客户端"></a>3）编写Feign的客户端</h3><p>在order-service中新建一个接口，内容如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FeignClient(&quot;userservice&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserClient</span> &#123;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;/user/&#123;id&#125;&quot;)</span></span><br><span class="line">    User <span class="title function_">findById</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Long id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这个客户端主要是基于SpringMVC的注解来声明远程调用的信息，比如：</p><ul><li>服务名称：userservice</li><li>请求方式：GET</li><li>请求路径：/user/{id}</li><li>请求参数：Long id</li><li>返回值类型：User</li></ul><p>这样，Feign就可以帮助我们发送http请求，无需自己使用RestTemplate来发送了。</p><h3 id="4）测试"><a href="#4）测试" class="headerlink" title="4）测试"></a>4）测试</h3><p>修改order-service中的OrderService类中的queryOrderById方法，使用Feign客户端代替RestTemplate：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OrderService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> OrderMapper orderMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> UserClient userClient;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Order <span class="title function_">queryOrderById</span><span class="params">(Long orderId)</span> &#123;</span><br><span class="line">        <span class="comment">// 1.查询订单</span></span><br><span class="line">        <span class="type">Order</span> <span class="variable">order</span> <span class="operator">=</span> orderMapper.findById(orderId);</span><br><span class="line">        <span class="comment">// 2.使用Feign进行远程调用</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userClient.findById(order.getUserId());</span><br><span class="line">        <span class="comment">// 3.封装user到order</span></span><br><span class="line">        order.setUser(user);</span><br><span class="line">        <span class="comment">// 4.返回</span></span><br><span class="line">        <span class="keyword">return</span> order;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    @Resource</span></span><br><span class="line"><span class="comment">//    private RestTemplate restTemplate;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//    public Order queryOrderById(Long orderId) &#123;</span></span><br><span class="line"><span class="comment">//        // 1.查询订单</span></span><br><span class="line"><span class="comment">//        Order order = orderMapper.findById(orderId);</span></span><br><span class="line"><span class="comment">//        // 2.利用Bean注册的RestTemplate发起http请求，查询用户</span></span><br><span class="line"><span class="comment">////        String url = &quot;http://localhost:8081/user/&quot; + order.getUserId();</span></span><br><span class="line"><span class="comment">//        // 替换eureka中userservice服务</span></span><br><span class="line"><span class="comment">//        String url = &quot;http://userservice/user/&quot; + order.getUserId();</span></span><br><span class="line"><span class="comment">//        User user = restTemplate.getForObject(url, User.class);</span></span><br><span class="line"><span class="comment">//        // 3.封装user到order</span></span><br><span class="line"><span class="comment">//        order.setUser(user);</span></span><br><span class="line"><span class="comment">//        // 4.返回</span></span><br><span class="line"><span class="comment">//        return order;</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5）总结"><a href="#5）总结" class="headerlink" title="5）总结"></a>5）总结</h3><p>使用Feign的步骤：</p><p>① 引入依赖</p><p>② 添加@EnableFeignClients注解</p><p>③ 编写FeignClient接口</p><p>④ 使用FeignClient中定义的方法代替RestTemplate</p><h2 id="自定义配置"><a href="#自定义配置" class="headerlink" title="自定义配置"></a>自定义配置</h2><p>Feign可以支持很多的自定义配置，如下表所示：</p><div class="table-container"><table><thead><tr><th>类型</th><th>作用</th><th>说明</th></tr></thead><tbody><tr><td><strong>feign.Logger.Level</strong></td><td>修改日志级别</td><td>包含四种不同的级别：NONE、BASIC、HEADERS、FULL</td></tr><tr><td>feign.codec.Decoder</td><td>响应结果的解析器</td><td>http远程调用的结果做解析，例如解析json字符串为java对象</td></tr><tr><td>feign.codec.Encoder</td><td>请求参数编码</td><td>将请求参数编码，便于通过http请求发送</td></tr><tr><td>feign.Contract</td><td>支持的注解格式</td><td>默认是SpringMVC的注解</td></tr><tr><td>feign.Retryer</td><td>失败重试机制</td><td>请求失败的重试机制，默认是没有，不过会使用Ribbon的重试</td></tr></tbody></table></div><p>一般情况下，默认值就能满足我们使用，如果要自定义时，只需要创建自定义的@Bean覆盖默认Bean即可。</p><p>下面以日志为例来演示如何自定义配置。</p><h3 id="1）配置文件方式"><a href="#1）配置文件方式" class="headerlink" title="1）配置文件方式"></a>1）配置文件方式</h3><p>基于配置文件修改feign的日志级别可以针对单个服务：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">feign:</span>  </span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">config:</span> </span><br><span class="line">      <span class="attr">userservice:</span> <span class="comment"># 针对某个微服务的配置</span></span><br><span class="line">        <span class="attr">loggerLevel:</span> <span class="string">FULL</span> <span class="comment">#  日志级别 </span></span><br></pre></td></tr></table></figure><p>也可以针对所有服务：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">feign:</span>  </span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">config:</span> </span><br><span class="line">      <span class="attr">default:</span> <span class="comment"># 这里用default就是全局配置，如果是写服务名称，则是针对某个微服务的配置</span></span><br><span class="line">        <span class="attr">loggerLevel:</span> <span class="string">FULL</span> <span class="comment">#  日志级别 </span></span><br></pre></td></tr></table></figure><p>而日志的级别分为四种：</p><ul><li>NONE：不记录任何日志信息，这是默认值。</li><li>BASIC：仅记录请求的方法，URL以及响应状态码和执行时间</li><li>HEADERS：在BASIC的基础上，额外记录了请求和响应的头信息</li><li>FULL：记录所有请求和响应的明细，包括头信息、请求体、元数据。</li></ul><h3 id="2）Java代码方式"><a href="#2）Java代码方式" class="headerlink" title="2）Java代码方式"></a>2）Java代码方式</h3><p>也可以基于Java代码来修改日志级别，先声明一个类，然后声明一个Logger.Level的对象：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DefaultFeignConfiguration</span>  &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Logger.Level <span class="title function_">feignLogLevel</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Logger.Level.BASIC; <span class="comment">// 日志级别为BASIC</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果要<strong>全局生效</strong>，将其放到启动类的@EnableFeignClients这个注解中：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableFeignClients(defaultConfiguration = DefaultFeignConfiguration .class)</span> </span><br></pre></td></tr></table></figure><p>如果是<strong>局部生效</strong>，则把它放到对应的@FeignClient这个注解中：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FeignClient(value = &quot;userservice&quot;, configuration = DefaultFeignConfiguration .class)</span> </span><br></pre></td></tr></table></figure><h2 id="Feign使用优化"><a href="#Feign使用优化" class="headerlink" title="Feign使用优化"></a>Feign使用优化</h2><p>Feign底层发起http请求，依赖于其它的框架。其底层客户端实现包括：</p><p>•URLConnection：默认实现，不支持连接池</p><p>•Apache HttpClient ：支持连接池</p><p>•OKHttp：支持连接池</p><p>因此提高Feign的性能主要手段就是使用<strong>连接池</strong>代替默认的URLConnection。</p><p>这里我们用Apache的HttpClient来演示。</p><p>1）引入依赖</p><p>在order-service的pom文件中引入Apache的HttpClient依赖：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--httpClient的依赖 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.github.openfeign<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>feign-httpclient<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>2）配置连接池</p><p>在order-service的application.yml中添加配置：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">feign:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">config:</span></span><br><span class="line">      <span class="attr">default:</span> <span class="comment"># default全局的配置</span></span><br><span class="line">        <span class="attr">loggerLevel:</span> <span class="string">BASIC</span> <span class="comment"># 日志级别，BASIC就是基本的请求和响应信息</span></span><br><span class="line">  <span class="attr">httpclient:</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">true</span> <span class="comment"># 开启feign对HttpClient的支持</span></span><br><span class="line">    <span class="attr">max-connections:</span> <span class="number">200</span> <span class="comment"># 最大的连接数</span></span><br><span class="line">    <span class="attr">max-connections-per-route:</span> <span class="number">50</span> <span class="comment"># 每个路径的最大连接数</span></span><br></pre></td></tr></table></figure><p>总结，Feign的优化：</p><p>1.日志级别尽量用basic</p><p>2.使用HttpClient或OKHttp代替URLConnection</p><p>①  引入feign-httpClient依赖</p><p>②  配置文件开启httpClient功能，设置连接池参数</p><h2 id="最佳实践"><a href="#最佳实践" class="headerlink" title="最佳实践"></a>最佳实践</h2><p>所谓最佳实践，就是使用过程中总结的经验，最好的一种使用方式。</p><p>观察可以发现，Feign的客户端与服务提供者的controller代码非常相似：</p><p>feign客户端：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FeignClient(value = &quot;userservice&quot;, configuration = DefaultFeignConfiguration.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserClient</span> &#123;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;/user/&#123;id&#125;&quot;)</span></span><br><span class="line">    User <span class="title function_">findById</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Long id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>UserController：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> User <span class="title function_">queryById</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Long id)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> userService.queryById(id);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>有没有一种办法简化这种重复的代码编写呢？</p><h3 id="继承方式"><a href="#继承方式" class="headerlink" title="继承方式"></a>继承方式</h3><p>一样的代码可以通过继承来共享：</p><p>1）定义一个API接口，利用定义方法，并基于SpringMVC注解做声明。</p><p>2）Feign客户端和Controller都集成改接口</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301271703680.png" alt="image-20210714190640857"></p><blockquote><p>优点：</p><ul><li>简单。</li><li>实现了代码共享。</li></ul><p>缺点：</p><ul><li><p>服务提供方、服务消费方<strong>紧耦合</strong>，不利于业务更迭。</p></li><li><p>参数列表中的注解映射并不会继承，因此Controller中必须再次声明方法、参数列表、注解。</p></li></ul></blockquote><h3 id="抽取方式"><a href="#抽取方式" class="headerlink" title="抽取方式"></a>抽取方式</h3><p>将Feign的Client抽取为独立模块，并且把接口有关的entity、默认的Feign配置都放到这个模块中，提供给所有消费者使用。</p><p>例如，将UserClient、User、Feign的默认配置都抽取到一个feign-api包中，所有微服务引用该依赖包，即可直接使用。</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301271707046.png" alt="image-20210714214041796"></p><h3 id="基于抽取的最佳实践"><a href="#基于抽取的最佳实践" class="headerlink" title="基于抽取的最佳实践"></a>基于抽取的最佳实践</h3><h4 id="1）抽取"><a href="#1）抽取" class="headerlink" title="1）抽取"></a>1）抽取</h4><p>新创建一个module，命名为feign-api。</p><p>在feign-api中然后引入feign的starter依赖</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-openfeign<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>然后，order-service中编写的UserClient、User、DefaultFeignConfiguration都复制到feign-api项目中</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301271714258.png" alt="image-20230127171441842"></p><h4 id="2）在order-service中使用feign-api"><a href="#2）在order-service中使用feign-api" class="headerlink" title="2）在order-service中使用feign-api"></a>2）在order-service中使用feign-api</h4><p>首先，删除order-service中的UserClient、User、DefaultFeignConfiguration等类或接口。</p><p>在order-service的pom文件中中引入feign-api的依赖：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--feign-api--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.roydon<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>feign-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>修改order-service中的所有与上述三个组件有关的导包部分，改成导入feign-api中的包</p><h4 id="3）解决扫描包问题"><a href="#3）解决扫描包问题" class="headerlink" title="3）解决扫描包问题"></a>3）解决扫描包问题</h4><p>UserClient现在在<code>com.roydon.feign.clients</code>包下，而order-service的<code>@EnableFeignClients</code>注解是在<code>com.roydon.order</code>包下，不在同一个包，无法扫描到UserClient。</p><p>方式一：</p><p>指定Feign应该扫描的包：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableFeignClients(basePackages = &quot;com.roydon.feign.clients&quot;)</span></span><br></pre></td></tr></table></figure><p>方式二：</p><p>指定需要加载的Client接口：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableFeignClients(clients = &#123;UserClient.class&#125;)</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringCloud </tag>
            
            <tag> nacos </tag>
            
            <tag> Feign </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringCloud之eureka</title>
      <link href="/posts/eureka.html"/>
      <url>/posts/eureka.html</url>
      
        <content type="html"><![CDATA[<h1 id="认识微服务"><a href="#认识微服务" class="headerlink" title="认识微服务"></a>认识微服务</h1><p>随着互联网行业的发展，对服务的要求也越来越高，服务架构也从单体架构逐渐演变为现在流行的微服务架构。这些架构之间有怎样的差别呢？</p><h2 id="单体架构"><a href="#单体架构" class="headerlink" title="单体架构"></a>单体架构</h2><p><strong>单体架构</strong>：将业务的所有功能集中在一个项目中开发，打成一个包部署。</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301122235744.png" alt="image-20210713202807818"></p><p>单体架构的优缺点如下：</p><p><strong>优点：</strong></p><ul><li>架构简单</li><li>部署成本低</li></ul><p><strong>缺点：</strong></p><ul><li>耦合度高（维护困难、升级困难）</li></ul><h2 id="分布式架构"><a href="#分布式架构" class="headerlink" title="分布式架构"></a>分布式架构</h2><p><strong>分布式架构</strong>：根据业务功能对系统做拆分，每个业务功能模块作为独立项目开发，称为一个服务。</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301121851217.png" alt="image-20210713203124797"></p><p>分布式架构的优缺点：</p><p><strong>优点：</strong></p><ul><li>降低服务耦合</li><li>有利于服务升级和拓展</li></ul><p><strong>缺点：</strong></p><ul><li>服务调用关系错综复杂</li></ul><p>分布式架构虽然降低了服务耦合，但是服务拆分时也有很多问题需要思考：</p><ul><li>服务拆分的粒度如何界定？</li><li>服务之间如何调用？</li><li>服务的调用关系如何管理？</li></ul><p>人们需要制定一套行之有效的标准来约束分布式架构。</p><h2 id="微服务"><a href="#微服务" class="headerlink" title="微服务"></a>微服务</h2><p>微服务的架构特征：</p><ul><li>单一职责：微服务拆分粒度更小，每一个服务都对应唯一的业务能力，做到单一职责</li><li>自治：团队独立、技术独立、数据独立，独立部署和交付</li><li>面向服务：服务提供统一标准的接口，与语言和技术无关</li><li>隔离性强：服务调用做好隔离、容错、降级，避免出现级联问题</li></ul><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301122318902.png" alt="image-20210713203753373"></p><p>微服务的上述特性其实是在给分布式架构制定一个标准，进一步降低服务之间的耦合度，提供服务的独立性和灵活性。做到高内聚，低耦合。</p><p>因此，可以认为<strong>微服务</strong>是一种经过良好架构设计的<strong>分布式架构方案</strong> 。</p><p>但方案该怎么落地？选用什么样的技术栈？全球的互联网公司都在积极尝试自己的微服务落地方案。</p><p>其中在Java领域最引人注目的就是SpringCloud提供的方案了。</p><h2 id="SpringCloud"><a href="#SpringCloud" class="headerlink" title="SpringCloud"></a>SpringCloud</h2><p>SpringCloud是目前国内使用最广泛的微服务框架。官网地址：<a href="https://spring.io/projects/spring-cloud。">https://spring.io/projects/spring-cloud。</a></p><p>SpringCloud集成了各种微服务功能组件，并基于SpringBoot实现了这些组件的自动装配，从而提供了良好的开箱即用体验。</p><p>其中常见的组件包括：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301121852853.png" alt="image-20210713204155887"></p><p>另外，SpringCloud底层是依赖于SpringBoot的，并且有版本的兼容关系，如下：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301122318164.png" alt="image-20210713205003790"></p><h1 id="服务拆分和远程调用"><a href="#服务拆分和远程调用" class="headerlink" title="服务拆分和远程调用"></a>服务拆分和远程调用</h1><p>任何分布式架构都离不开服务的拆分，微服务也是一样。</p><h2 id="服务拆分原则"><a href="#服务拆分原则" class="headerlink" title="服务拆分原则"></a>服务拆分原则</h2><p>这里我总结了微服务拆分时的几个原则：</p><ul><li>不同微服务，不要重复开发相同业务</li><li>微服务数据独立，不要访问其它微服务的数据库</li><li>微服务可以将自己的业务暴露为接口，供其它微服务调用</li></ul><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301121854404.png" alt="image-20210713210800950"></p><h2 id="服务拆分示例"><a href="#服务拆分示例" class="headerlink" title="服务拆分示例"></a>服务拆分示例</h2><p>前往github获取spring-cloud-demo工程<a href="https://github.com/roydonGuo/Spring-Cloud-Demo">https://github.com/roydonGuo/Spring-Cloud-Demo</a>。</p><p>spring-cloud-demo：父工程，管理依赖</p><ul><li>order-service：订单微服务，负责订单相关业务</li><li>user-service：用户微服务，负责用户相关业务</li></ul><p>要求：</p><ul><li>订单微服务和用户微服务都必须有各自的数据库，相互独立</li><li>订单服务和用户服务都对外暴露Restful的接口</li><li>订单服务如果需要查询用户信息，只能调用用户服务的Restful接口，不能查询用户数据库</li></ul><p>首先，将github工程中提供的<code>cloud-order.sql</code>和<code>cloud-user.sql</code>导入到mysql中：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301122318451.png" alt="image-20230112191730526"></p><p>cloud-user表中初始数据如下：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301121918846.png" alt="image-20230112191836830"></p><p>cloud-order表中初始数据如下：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301122318925.png" alt="image-20230112191815176"></p><p>cloud-order表中持有cloud-user表中的id字段。</p><p>启动后查看service中的服务。若无service栏，可<code>alt+F8</code>启用。</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301121921813.png" alt="image-20230112192142285"></p><h2 id="实现远程调用案例"><a href="#实现远程调用案例" class="headerlink" title="实现远程调用案例"></a>实现远程调用案例</h2><p>在order-service服务中，有一个根据id查询订单的接口：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301121924412.png" alt="image-20230112192421957"></p><p>根据id查询订单，返回值是Order对象，如图：其中的user为null</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301121926642.png" alt="image-20230112192639336"></p><p>在user-service中有一个根据id查询用户的接口：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301122318061.png" alt="image-20230112192757187"></p><p>查询的结果如图：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301121928549.png" alt="image-20230112192825376"></p><h3 id="案例需求："><a href="#案例需求：" class="headerlink" title="案例需求："></a>案例需求：</h3><p>修改order-service中的根据id查询订单业务，要求在查询订单的同时，根据订单中包含的userId查询出用户信息，一起返回。</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301121929477.png" alt="image-20210713213312278"></p><p>因此，我们需要在order-service中 向user-service发起一个http的请求，调用<a href="http://localhost:8081/user/{userId}这个接口。">http://localhost:8081/user/{userId}这个接口。</a></p><p>大概的步骤是这样的：</p><ul><li>注册一个RestTemplate的实例到Spring容器</li><li>修改order-service服务中的OrderService类中的queryOrderById方法，根据Order对象中的userId查询User</li><li>将查询的User填充到Order对象，一起返回</li></ul><h3 id="注册RestTemplate"><a href="#注册RestTemplate" class="headerlink" title="注册RestTemplate"></a>注册RestTemplate</h3><p>在项目中，当我们需要远程调用一个 HTTP 接口时，我们经常会用到 RestTemplate 这个类。这个类是 Spring 框架提供的一个工具类。</p><p>首先，我们在order-service服务中的OrderApplication启动类中，注册RestTemplate实例：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@MapperScan(&quot;com.roydon.order.mapper&quot;)</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OrderApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(OrderApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> RestTemplate <span class="title function_">restTemplate</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">RestTemplate</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="实现远程调用"><a href="#实现远程调用" class="headerlink" title="实现远程调用"></a>实现远程调用</h3><p>修改order-service服务中业务层的queryOrderById方法：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OrderService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> OrderMapper orderMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> RestTemplate restTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Order <span class="title function_">queryOrderById</span><span class="params">(Long orderId)</span> &#123;</span><br><span class="line">        <span class="comment">// 1.查询订单</span></span><br><span class="line">        <span class="type">Order</span> <span class="variable">order</span> <span class="operator">=</span> orderMapper.findById(orderId);</span><br><span class="line">        <span class="comment">// 2.利用Bean注册的RestTemplate发起http请求，查询用户</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;http://localhost:8081/user/&quot;</span> + order.getUserId();</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> restTemplate.getForObject(url, User.class);</span><br><span class="line">        <span class="comment">// 3.封装user到order</span></span><br><span class="line">        order.setUser(user);</span><br><span class="line">        <span class="comment">// 4.返回</span></span><br><span class="line">        <span class="keyword">return</span> order;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>重启服务调用查询订单接口：user实体成功封装进order实体。</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301121945269.png" alt="image-20230112194502094"></p><h2 id="提供者与消费者"><a href="#提供者与消费者" class="headerlink" title="提供者与消费者"></a>提供者与消费者</h2><p>在服务调用关系中，会有两个不同的角色：</p><p><strong>服务提供者</strong>：一次业务中，被其它微服务调用的服务。（提供接口给其它微服务）</p><p><strong>服务消费者</strong>：一次业务中，调用其它微服务的服务。（调用其它微服务提供的接口）</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301122318219.png" alt="image-20210713214404481"></p><p>但是，服务提供者与服务消费者的角色并不是绝对的，而是相对于业务而言。</p><p>如果服务A调用了服务B，而服务B又调用了服务C，服务B的角色是什么？</p><ul><li>对于A调用B的业务而言：A是服务消费者，B是服务提供者。</li><li>对于B调用C的业务而言：B是服务消费者，C是服务提供者。</li></ul><p>因此，服务B既可以是服务提供者，也可以是服务消费者。</p><h1 id="Eureka注册中心"><a href="#Eureka注册中心" class="headerlink" title="Eureka注册中心"></a>Eureka注册中心</h1><p>假如我们的服务提供者user-service部署了多个实例，如图：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301121946550.png" alt="image-20210713214925388"></p><p>思考几个问题：</p><ul><li>order-service在发起远程调用的时候，该如何得知user-service实例的ip地址和端口？</li><li>有多个user-service实例地址，order-service调用时该如何选择？</li><li>order-service如何得知某个user-service实例是否依然健康，是不是已经宕机？</li></ul><h2 id="Eureka的结构和作用"><a href="#Eureka的结构和作用" class="headerlink" title="Eureka的结构和作用"></a>Eureka的结构和作用</h2><p>这些问题都需要利用SpringCloud中的注册中心来解决，其中最广为人知的注册中心就是Eureka，其结构如下：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301121947598.png" alt="image-20210713220104956"></p><p>回答之前的各个问题。</p><p>问题1：order-service如何得知user-service实例地址？</p><p>获取地址信息的流程如下：</p><ul><li>user-service服务实例启动后，将自己的信息注册到eureka-server（Eureka服务端）。这个叫服务注册。</li><li>eureka-server保存服务名称到服务实例地址列表的映射关系。</li><li>order-service根据服务名称，拉取实例地址列表。这个叫服务发现或服务拉取。</li></ul><p>问题2：order-service如何从多个user-service实例中选择具体的实例？</p><ul><li>order-service从实例列表中利用负载均衡算法选中一个实例地址。</li><li>向该实例地址发起远程调用。</li></ul><p>问题3：order-service如何得知某个user-service实例是否依然健康，是不是已经宕机？</p><ul><li>user-service会每隔一段时间（默认30秒）向eureka-server发起请求，报告自己状态，称为心跳。</li><li>当超过一定时间没有发送心跳时，eureka-server会认为微服务实例故障，将该实例从服务列表中剔除。</li><li>order-service拉取服务时，就能将故障实例排除了。</li></ul><blockquote><p><code>注意</code>：一个微服务，既可以是服务提供者，又可以是服务消费者，因此eureka将服务注册、服务发现等功能统一封装到了eureka-client端</p></blockquote><p>因此，接下来我们动手实践的步骤包括：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301121950139.png" alt="image-20210713220509769"></p><h2 id="搭建eureka-server"><a href="#搭建eureka-server" class="headerlink" title="搭建eureka-server"></a>搭建eureka-server</h2><p>首先注册中心服务端：eureka-server，这必须是一个独立的微服务</p><h3 id="创建eureka-server服务"><a href="#创建eureka-server服务" class="headerlink" title="创建eureka-server服务"></a>创建eureka-server服务</h3><p>在cloud-demo父工程下，创建一个子模块：eureka-server</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301121952285.png" alt="image-20230112195243600"></p><h3 id="引入eureka依赖"><a href="#引入eureka依赖" class="headerlink" title="引入eureka依赖"></a>引入eureka依赖</h3><p>引入SpringCloud为eureka提供的starter依赖：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- eureka 服务端 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="编写启动类"><a href="#编写启动类" class="headerlink" title="编写启动类"></a>编写启动类</h3><p>给eureka-server服务编写启动类添加<code>@EnableEurekaServer</code>注解开启eureka的注册中心功能：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableEurekaServer</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EurekaApplication</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(EurekaApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="编写配置文件"><a href="#编写配置文件" class="headerlink" title="编写配置文件"></a>编写配置文件</h3><p>编写一个application.yml文件，内容如下：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">10086</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 服务注册信息</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">eurekaserver</span> <span class="comment"># eureka 服务名称</span></span><br><span class="line"></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">service-url:</span> <span class="comment"># eureka 地址信息</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://127.0.0.1:10086/eureka</span></span><br></pre></td></tr></table></figure><h3 id="启动服务"><a href="#启动服务" class="headerlink" title="启动服务"></a>启动服务</h3><p>启动微服务，然后在浏览器访问：<a href="http://127.0.0.1:10086。看到下面结果就是成功了：">http://127.0.0.1:10086。看到下面结果就是成功了：</a></p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301121958983.png" alt="image-20230112195813553"></p><h2 id="服务注册"><a href="#服务注册" class="headerlink" title="服务注册"></a>服务注册</h2><p>下面，我们将user-service注册到eureka-server中去。</p><h3 id="引入依赖"><a href="#引入依赖" class="headerlink" title="引入依赖"></a>引入依赖</h3><p>在user-service的pom文件中，引入下面的eureka-client依赖：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- eureka-client --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h3><p>在user-service中，修改application.yml文件，添加服务名称、eureka地址：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8081</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/cloud-user?useSSL=false</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">qwer1234</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="string">+</span>  <span class="attr">application:</span></span><br><span class="line"><span class="string">+</span>    <span class="attr">name:</span> <span class="string">userservice</span></span><br><span class="line"></span><br><span class="line"><span class="string">+eureka:</span></span><br><span class="line"><span class="string">+</span>  <span class="attr">client:</span></span><br><span class="line"><span class="string">+</span>    <span class="attr">service-url:</span></span><br><span class="line"><span class="string">+</span>      <span class="attr">defaultZone:</span> <span class="string">http://127.0.0.1:10086/eureka</span></span><br><span class="line"></span><br><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">  <span class="attr">type-aliases-package:</span> <span class="string">com.roydon.order.entity</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">map-underscore-to-camel-case:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">level:</span></span><br><span class="line">    <span class="attr">com.roydon:</span> <span class="string">debug</span></span><br><span class="line">  <span class="attr">pattern:</span></span><br><span class="line">    <span class="attr">dateformat:</span> <span class="string">MM-dd</span> <span class="string">HH:mm:ss:SSS</span></span><br></pre></td></tr></table></figure><h3 id="启动多个user-service实例"><a href="#启动多个user-service实例" class="headerlink" title="启动多个user-service实例"></a>启动多个user-service实例</h3><p>为了演示一个服务有多个实例的场景，我们添加一个SpringBoot的启动配置，再启动一个user-service。</p><p>首先，右键复制原来的user-service启动配置：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301122018090.png" alt="image-20230112201807676"></p><p>然后，在弹出的窗口中，填写信息：<code>-Dserver.port=8082</code></p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301122319817.png" alt="image-20230112202148688"></p><p>现在，SpringBoot窗口会出现两个user-service启动配置：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301122020030.png" alt="image-20230112201959662"></p><p>不过，第一个是8081端口，第二个是8082端口。</p><p>启动两个user-service实例：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301122022039.png" alt="image-20230112202232854"></p><p>查看eureka-server管理页面：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301122028516.png" alt="image-20230112202822207"></p><h2 id="服务发现"><a href="#服务发现" class="headerlink" title="服务发现"></a>服务发现</h2><p>下面，我们将order-service的逻辑修改：向eureka-server拉取user-service的信息，实现服务发现。</p><h3 id="引入依赖-1"><a href="#引入依赖-1" class="headerlink" title="引入依赖"></a>引入依赖</h3><p>之前说过，服务发现、服务注册统一都封装在eureka-client依赖，因此这一步与服务注册时一致。</p><p>在order-service的pom文件中，引入下面的eureka-client依赖：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- eureka-client --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="配置文件-1"><a href="#配置文件-1" class="headerlink" title="配置文件"></a>配置文件</h3><p>服务发现也需要知道eureka地址，因此第二步与服务注册一致，都是配置eureka信息：</p><p>在order-service中，修改application.yml文件，添加服务名称、eureka地址：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8080</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/cloud-order?useSSL=false</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">qwer1234</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="string">+</span>  <span class="attr">application:</span></span><br><span class="line"><span class="string">+</span>    <span class="attr">name:</span> <span class="string">orderservice</span></span><br><span class="line"></span><br><span class="line"><span class="string">+eureka:</span></span><br><span class="line"><span class="string">+</span>  <span class="attr">client:</span></span><br><span class="line"><span class="string">+</span>    <span class="attr">service-url:</span></span><br><span class="line"><span class="string">+</span>      <span class="attr">defaultZone:</span> <span class="string">http://127.0.0.1:10086/eureka</span></span><br><span class="line"></span><br><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">  <span class="attr">type-aliases-package:</span> <span class="string">com.roydon.order.entity</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">map-underscore-to-camel-case:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">level:</span></span><br><span class="line">    <span class="attr">com.roydon:</span> <span class="string">debug</span></span><br><span class="line">  <span class="attr">pattern:</span></span><br><span class="line">    <span class="attr">dateformat:</span> <span class="string">MM-dd</span> <span class="string">HH:mm:ss:SSS</span></span><br></pre></td></tr></table></figure><h3 id="服务拉取和负载均衡"><a href="#服务拉取和负载均衡" class="headerlink" title="服务拉取和负载均衡"></a>服务拉取和负载均衡</h3><p>最后，我们要去eureka-server中拉取user-service服务的实例列表，并且实现负载均衡。</p><p>在order-service的启动类中，给RestTemplate这个Bean添加一个<code>@LoadBalanced</code>注解：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@MapperScan(&quot;com.roydon.order.mapper&quot;)</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OrderApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(OrderApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@LoadBalanced</span></span><br><span class="line">    <span class="keyword">public</span> RestTemplate <span class="title function_">restTemplate</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">RestTemplate</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>修改order-service服务中业务层的queryOrderById方法。修改访问的url路径，用服务名代替ip、端口：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OrderService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> OrderMapper orderMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> RestTemplate restTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Order <span class="title function_">queryOrderById</span><span class="params">(Long orderId)</span> &#123;</span><br><span class="line">        <span class="comment">// 1.查询订单</span></span><br><span class="line">        <span class="type">Order</span> <span class="variable">order</span> <span class="operator">=</span> orderMapper.findById(orderId);</span><br><span class="line">        <span class="comment">// 2.利用Bean注册的RestTemplate发起http请求，查询用户</span></span><br><span class="line"><span class="comment">//        String url = &quot;http://localhost:8081/user/&quot; + order.getUserId();</span></span><br><span class="line">        <span class="comment">// 替换eureka中userservice服务</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;http://userservice/user/&quot;</span> + order.getUserId();</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> restTemplate.getForObject(url, User.class);</span><br><span class="line">        <span class="comment">// 3.封装user到order</span></span><br><span class="line">        order.setUser(user);</span><br><span class="line">        <span class="comment">// 4.返回</span></span><br><span class="line">        <span class="keyword">return</span> order;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>spring会自动帮助我们从eureka-server端，根据userservice这个服务名称，获取实例列表，而后完成负载均衡。重启订单服务访问接口，服务正常运行。</p><h1 id="Ribbon负载均衡"><a href="#Ribbon负载均衡" class="headerlink" title="Ribbon负载均衡"></a>Ribbon负载均衡</h1><p>既然添加了@LoadBalanced注解即可实现负载均衡功能，那么原理是什么呢？</p><h2 id="负载均衡原理"><a href="#负载均衡原理" class="headerlink" title="负载均衡原理"></a>负载均衡原理</h2><p>SpringCloud底层其实是利用了一个名为Ribbon的组件，来实现负载均衡功能的。</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301122037499.png" alt="image-20210713224517686"></p><p>那么我们发出的请求明明是<a href="http://userservice/user/1，怎么变成了http://localhost:8081的呢？">http://userservice/user/1，怎么变成了http://localhost:8081的呢？</a></p><h2 id="源码跟踪"><a href="#源码跟踪" class="headerlink" title="源码跟踪"></a>源码跟踪</h2><p>为什么我们只输入了service名称就可以访问了呢？之前还要获取ip和端口。</p><p>显然有人帮我们根据service名称，获取到了服务实例的ip和端口。它就是<code>LoadBalancerInterceptor</code>，如其名，就是一个拦截器，这个类会对RestTemplate的请求进行拦截，然后从Eureka根据服务id获取服务列表，随后利用负载均衡算法得到真实的服务地址信息，替换服务id。</p><p>我们进行源码跟踪：</p><h3 id="LoadBalancerIntercepor"><a href="#LoadBalancerIntercepor" class="headerlink" title="LoadBalancerIntercepor"></a>LoadBalancerIntercepor</h3><p>在拦截器打断点再次发起请求：<a href="http://localhost:8080/order/101。查看请求过程：">http://localhost:8080/order/101。查看请求过程：</a></p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301122114435.png" alt="image-20230112211427090"></p><p>可以看到这里的intercept方法，拦截了用户的HttpRequest请求，然后做了几件事：</p><ul><li><code>request.getURI()</code>：获取请求uri，本例中就是 <a href="http://userservice/user/1。">http://userservice/user/1。</a></li><li><code>originalUri.getHost()</code>：获取uri路径的主机名，其实就是服务id，<code>userservice</code>。</li><li><code>this.loadBalancer.execute()</code>：处理服务id，和用户请求。</li></ul><p>这里的<code>this.loadBalancer</code>是<code>LoadBalancerClient</code>类型，我们继续跟入。</p><h3 id="LoadBalancerClient"><a href="#LoadBalancerClient" class="headerlink" title="LoadBalancerClient"></a>LoadBalancerClient</h3><p>继续跟入execute方法：RibbonLoadBalancerClient</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301122138505.png" alt="image-20230112213856237"></p><p><code>getServer(loadBalancer)</code>利用内置的负载均衡算法，从server服务列表中选择一个。</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301122149772.png" alt="image-20230112214913521"></p><p>代码是这样的：</p><ul><li><code>getLoadBalancer(serviceId)</code>：根据服务id获取ILoadBalancer，而ILoadBalancer会拿着服务id去eureka中获取服务列表并保存起来。</li><li><code>getServer(loadBalancer)</code>：利用内置的负载均衡算法，从server服务列表中选择一个。</li></ul><p>放行后，再次访问并跟踪，发现获取的服务是8082：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301122203394.png" alt="image-20230112220350024"></p><p>实现了负载均衡。</p><h3 id="负载均衡策略IRule"><a href="#负载均衡策略IRule" class="headerlink" title="负载均衡策略IRule"></a>负载均衡策略IRule</h3><p>在刚才的代码中，可以看到获取服务使通过一个<code>getServer()</code>方法来做负载均衡:</p><p>继续跟踪源码chooseServer方法，发现这么一段代码：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301122159186.png" alt="image-20230112215923666"></p><p>我们看看这个rule是谁：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301122206471.png" alt="image-20230112220631851"></p><p>这里的rule默认值是一个<code>RoundRobinRule</code>，看类的介绍：</p><p> <img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301122207291.png" alt="image-20230112220753672"></p><p>就是轮询的意思。</p><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>SpringCloudRibbon的底层采用了一个拦截器，拦截了RestTemplate发出的请求，对地址做了修改。用一幅图来总结一下：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301122319237.png" alt="image-20210713224724673"></p><p>基本流程如下：</p><ul><li>拦截我们的RestTemplate请求<a href="http://userservice/user/1">http://userservice/user/1</a></li><li>RibbonLoadBalancerClient会从请求url中获取服务名称，也就是user-service</li><li>DynamicServerListLoadBalancer根据user-service到eureka拉取服务列表</li><li>eureka返回列表，localhost:8081、localhost:8082</li><li>IRule利用内置负载均衡规则，从列表中选择一个，例如localhost:8081</li><li>RibbonLoadBalancerClient修改请求地址，用localhost:8081替代userservice，得到<a href="http://localhost:8081/user/1，发起真实请求">http://localhost:8081/user/1，发起真实请求</a></li></ul><h2 id="负载均衡策略"><a href="#负载均衡策略" class="headerlink" title="负载均衡策略"></a>负载均衡策略</h2><h3 id="负载均衡策略-1"><a href="#负载均衡策略-1" class="headerlink" title="负载均衡策略"></a>负载均衡策略</h3><p>负载均衡的规则都定义在IRule接口中，而IRule有很多不同的实现类：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301122209875.png" alt="image-20230112220911626"></p><p>默认的实现就是ZoneAvoidanceRule，是一种轮询方案。</p><p>不同规则的含义如下：</p><div class="table-container"><table><thead><tr><th><strong>内置负载均衡规则类</strong></th><th><strong>规则描述</strong></th></tr></thead><tbody><tr><td>RoundRobinRule</td><td>简单轮询服务列表来选择服务器。它是Ribbon默认的负载均衡规则。</td></tr><tr><td>AvailabilityFilteringRule</td><td>对以下两种服务器进行忽略：   （1）在默认情况下，这台服务器如果3次连接失败，这台服务器就会被设置为“短路”状态。短路状态将持续30秒，如果再次连接失败，短路的持续时间就会几何级地增加。  （2）并发数过高的服务器。如果一个服务器的并发连接数过高，配置了AvailabilityFilteringRule规则的客户端也会将其忽略。并发连接数的上限，可以由客户端的<clientName>.<clientConfigNameSpace>.ActiveConnectionsLimit属性进行配置。</td></tr><tr><td>WeightedResponseTimeRule</td><td>为每一个服务器赋予一个权重值。服务器响应时间越长，这个服务器的权重就越小。这个规则会随机选择服务器，这个权重值会影响服务器的选择。</td></tr><tr><td><strong>ZoneAvoidanceRule</strong></td><td>以区域可用的服务器为基础进行服务器的选择。使用Zone对服务器进行分类，这个Zone可以理解为一个机房、一个机架等。而后再对Zone内的多个服务做轮询。</td></tr><tr><td>BestAvailableRule</td><td>忽略那些短路的服务器，并选择并发数较低的服务器。</td></tr><tr><td>RandomRule</td><td>随机选择一个可用的服务器。</td></tr><tr><td>RetryRule</td><td>重试机制的选择逻</td></tr></tbody></table></div><h3 id="自定义负载均衡策略"><a href="#自定义负载均衡策略" class="headerlink" title="自定义负载均衡策略"></a>自定义负载均衡策略</h3><p>通过定义IRule实现可以修改负载均衡规则，有两种方式：</p><ol><li>代码方式：在order-service中的OrderApplication类中，定义一个新的IRule：</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@MapperScan(&quot;com.roydon.order.mapper&quot;)</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OrderApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(OrderApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@LoadBalanced</span></span><br><span class="line">    <span class="keyword">public</span> RestTemplate <span class="title function_">restTemplate</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">RestTemplate</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> IRule <span class="title function_">randomRule</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 随机策略，每次请求获取的服务是随机的。</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">RandomRule</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>此方法缺陷是全局策略，不能指定服务的策略，例如以后再引入一个服务那么新服务规则还是RandomRule。</p><ol><li>配置文件方式：在order-service的application.yml文件中，添加新的配置也可以修改规则：</li></ol><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8080</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/cloud-order?useSSL=false</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">qwer1234</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">orderservice</span></span><br><span class="line"></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">service-url:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://127.0.0.1:10086/eureka</span></span><br><span class="line"></span><br><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">  <span class="attr">type-aliases-package:</span> <span class="string">com.roydon.order.entity</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">map-underscore-to-camel-case:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">level:</span></span><br><span class="line">    <span class="attr">com.roydon:</span> <span class="string">debug</span></span><br><span class="line">  <span class="attr">pattern:</span></span><br><span class="line">    <span class="attr">dateformat:</span> <span class="string">MM-dd</span> <span class="string">HH:mm:ss:SSS</span></span><br><span class="line"></span><br><span class="line"><span class="string">+userservice:</span> <span class="comment"># 给某个微服务配置负载均衡规则，这里是userservice服务</span></span><br><span class="line"><span class="string">+</span>  <span class="attr">ribbon:</span></span><br><span class="line"><span class="string">+</span>    <span class="attr">NFLoadBalancerRuleClassName:</span> <span class="string">com.netflix.loadbalancer.RandomRule</span> <span class="comment"># 负载均衡规则类名</span></span><br></pre></td></tr></table></figure><blockquote><p><strong>注意</strong>，一般用默认的负载均衡规则，不做修改。</p></blockquote><p>多请求几次查看随机规则是否生效：</p><p>服务8081：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301122219745.png" alt="image-20230112221911729"></p><p>服务8082：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202301122219551.png" alt="image-20230112221933339"></p><h2 id="饥饿加载"><a href="#饥饿加载" class="headerlink" title="饥饿加载"></a>饥饿加载</h2><p>Ribbon默认是采用懒加载，即第一次访问时才会去创建LoadBalanceClient，请求时间会很长。</p><p>而饥饿加载则会在项目启动时创建，降低第一次访问的耗时，通过下面配置开启饥饿加载：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8080</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/cloud-order?useSSL=false</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">qwer1234</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">orderservice</span></span><br><span class="line"></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">service-url:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://127.0.0.1:10086/eureka</span></span><br><span class="line"></span><br><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">  <span class="attr">type-aliases-package:</span> <span class="string">com.roydon.order.entity</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">map-underscore-to-camel-case:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">level:</span></span><br><span class="line">    <span class="attr">com.roydon:</span> <span class="string">debug</span></span><br><span class="line">  <span class="attr">pattern:</span></span><br><span class="line">    <span class="attr">dateformat:</span> <span class="string">MM-dd</span> <span class="string">HH:mm:ss:SSS</span></span><br><span class="line"></span><br><span class="line"><span class="attr">userservice:</span> <span class="comment"># 给某个微服务配置负载均衡规则，这里是userservice服务</span></span><br><span class="line">  <span class="attr">ribbon:</span></span><br><span class="line">    <span class="attr">NFLoadBalancerRuleClassName:</span> <span class="string">com.netflix.loadbalancer.RandomRule</span> <span class="comment"># 负载均衡规则</span></span><br><span class="line">    </span><br><span class="line"><span class="string">+ribbon:</span></span><br><span class="line"><span class="string">+</span>  <span class="attr">eager-load:</span></span><br><span class="line"><span class="string">+</span>    <span class="attr">enabled:</span> <span class="literal">true</span> <span class="comment"># 开启饥饿加载</span></span><br><span class="line"><span class="string">+</span>    <span class="attr">clients:</span> <span class="string">userservice</span> <span class="comment"># 指定服务</span></span><br></pre></td></tr></table></figure><p>若指定多个服务：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">ribbon:</span></span><br><span class="line">  <span class="attr">eager-load:</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">true</span> <span class="comment"># 开启饥饿加载</span></span><br><span class="line">    <span class="attr">clients:</span> <span class="comment"># 指定服务</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">userservice</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">XXX</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringCloud </tag>
            
            <tag> eureka </tag>
            
            <tag> Ribbon </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>智子商城项目开发文档</title>
      <link href="/posts/zhizi.html"/>
      <url>/posts/zhizi.html</url>
      
        <content type="html"><![CDATA[<h1 id="ZutShop"><a href="#ZutShop" class="headerlink" title="ZutShop"></a>ZutShop</h1><p>Junior practical training project</p><blockquote><p>本人大三做的实训项目，前后端分离，包含后台管理。</p><p>后端地址：<a href="https://github.com/roydonGuo/ZutShop">https://github.com/roydonGuo/ZutShop</a></p><p>前端使用Vue，前端项目地址：<a href="https://github.com/roydonGuo/ZutShop-Vue">https://github.com/roydonGuo/ZutShop-Vue</a></p></blockquote><hr><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202212251930999.png" alt="zhiziLogo"></p><h1 id="0-项目介绍"><a href="#0-项目介绍" class="headerlink" title="0. 项目介绍"></a>0. 项目介绍</h1><p>项目名称：智子商城。类似于购物车系统、订单系统。前后端分离。</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202212251952985.png" alt="image-20221225195256378"></p><p>分析项目：</p><p>当开发某一个项目时，分许该项目中需要处理哪些数据？</p><p>例如：用户，收货地址，商品类别，商品，收藏，购物车，订单。。。。</p><p>处理数据的先后顺序：先处理基础数据，在处理相关数据，</p><p>例如需要先处理商品数据，才可以处理订单数据</p><p>处理以上数据的先后顺序：用户&gt;收获地址&gt;商品类别&gt;商品&gt;收藏&gt;购物车&gt;订单</p><p>当确定了数据处理顺序之后应该分析每个数据对应的功能有哪些</p><p>例如用户数据：注册，登录，修改密码，修改资料，上传头像。。。。</p><p>确定开发功能的开发顺序，遵循增&gt;查&gt;删&gt;改</p><p>用户数据功能的开发顺序：注册&gt;登录&gt;修改密码&gt;修改资料&gt;上传头像。。。。</p><p>确定每一个功能的开发步骤：创建数据表&gt;创建实体类&gt;持久层&gt;业务层&gt;控制器层&gt;前端页面</p><h1 id="1-数据库创建"><a href="#1-数据库创建" class="headerlink" title="1. 数据库创建"></a>1. 数据库创建</h1><p>关于项项目的数据表问题：</p><ol><li>根据虚拟的前端页面和业务需求创建出各种数据表</li><li>画出各种数据表之间的关系图</li><li>每个表中的每个字段都应该有其作用否则将直接去掉</li></ol><p>针对本项目，数据库设计如下：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202212222146413.png" alt="image-20221222214609270"></p><p>sql文件在项目resources中。</p><h1 id="2-项目准备"><a href="#2-项目准备" class="headerlink" title="2. 项目准备"></a>2. 项目准备</h1><p>本项目使用springboot框架进行后台开发，前端使用Vue开发，axios进行前后端交互。所以，涉及到的技术栈有：</p><ul><li>springboot</li><li>springSecurity</li><li>maven</li><li>redis</li><li>mybatis-plus</li><li>Vue，axios</li></ul><h2 id="2-1-创建maven项目"><a href="#2-1-创建maven项目" class="headerlink" title="2.1 创建maven项目"></a>2.1 创建maven项目</h2><p>父工程管理依赖：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- SpringBoot的依赖配置--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--fastjson依赖--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.33<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--jwt依赖--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.jsonwebtoken<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jjwt<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.9.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--mybatisPlus依赖--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger-ui<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br></pre></td></tr></table></figure><p>子工程<code>Zut-Framework</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--lombok--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--junit--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--redis依赖--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--SpringSecurity启动器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-security<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.14<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--fastjson依赖--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--jwt依赖--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.jsonwebtoken<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jjwt<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--mybatisPlus依赖--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--mysql数据库驱动--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--AOP--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-aop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger-ui<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><p>子工程<code>Zut-Shopping</code>依赖于子工程<code>Zut-FrameWork</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>edu.zut<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>Zut-Framework<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="2-2-Zut-Shopping"><a href="#2-2-Zut-Shopping" class="headerlink" title="2.2 Zut-Shopping"></a>2.2 Zut-Shopping</h2><p><code>Zut-Shopping</code>为业务控制层，需要一个启动类：</p><p>并添加mapper包扫描和开启swagger</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;edu.zut.mapper&quot;)</span></span><br><span class="line"><span class="meta">@EnableSwagger2</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ShopApplication</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(ShopApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>配置文件：</p><p>配置服务端口号7777，数据库信息，配置redis和MP。</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">7777</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/zut-shop?characterEncoding=utf-8&amp;serverTimezone=Asia/Shanghai</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">qwer1234</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br></pre></td></tr></table></figure><h2 id="2-3-Zut-Framework"><a href="#2-3-Zut-Framework" class="headerlink" title="2.3 Zut-Framework"></a>2.3 Zut-Framework</h2><p><code>Zut-Framework</code>负责业务接口的实现。</p><p>新建User实体类：</p><p>IDEA有插件<code>easycode</code>快速生成MP代码，或者使用官方提供的代码生成器。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SuppressWarnings(&quot;serial&quot;)</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@TableName(&quot;t_user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="comment">//用户id@TableId</span></span><br><span class="line">    <span class="keyword">private</span> Integer uid;</span><br><span class="line">    <span class="comment">//用户名</span></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;用户名&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="comment">//密码</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="comment">//性别,0-女,1-男</span></span><br><span class="line">    <span class="keyword">private</span> Integer gender;</span><br><span class="line">    <span class="comment">//电话</span></span><br><span class="line">    <span class="keyword">private</span> String phone;</span><br><span class="line">    <span class="comment">//邮箱</span></span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">    <span class="comment">//头像</span></span><br><span class="line">    <span class="keyword">private</span> String avatar;</span><br><span class="line">    <span class="comment">//是否删除,0-未删除,1-已删除</span></span><br><span class="line">    <span class="keyword">private</span> Integer isDelete;</span><br><span class="line">    <span class="comment">//创建执行人</span></span><br><span class="line">    <span class="keyword">private</span> Integer createdUser;</span><br><span class="line">    <span class="comment">//创建时间</span></span><br><span class="line">    <span class="keyword">private</span> Date createdTime;</span><br><span class="line">    <span class="comment">//修改执行人</span></span><br><span class="line">    <span class="keyword">private</span> Integer modifiedUser;</span><br><span class="line">    <span class="comment">//修改时间</span></span><br><span class="line">    <span class="keyword">private</span> Date modifiedTime;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>UserMapper接口:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Author: roydon - 2022/12/12</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;User&gt; &#123;&#125;</span><br></pre></td></tr></table></figure><p>Service层UserService：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserService</span> <span class="keyword">extends</span> <span class="title class_">IService</span>&lt;User&gt; &#123;&#125;</span><br></pre></td></tr></table></figure><p>UserService的实现类UserServiceImpl</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Service(&quot;userService&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;UserMapper, User&gt; <span class="keyword">implements</span> <span class="title class_">UserService</span> &#123;&#125;</span><br></pre></td></tr></table></figure><p>新建数据相应类ResponseResult，表示后端响应给前端的数据。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@JsonInclude(JsonInclude.Include.NON_NULL)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResponseResult</span>&lt;T&gt; <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer code;</span><br><span class="line">    <span class="keyword">private</span> String msg;</span><br><span class="line">    <span class="keyword">private</span> T data;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ResponseResult</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = AppHttpCodeEnum.SUCCESS.getCode();</span><br><span class="line">        <span class="built_in">this</span>.msg = AppHttpCodeEnum.SUCCESS.getMsg();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ResponseResult</span><span class="params">(Integer code, T data)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">        <span class="built_in">this</span>.data = data;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ResponseResult</span><span class="params">(Integer code, String msg, T data)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">        <span class="built_in">this</span>.msg = msg;</span><br><span class="line">        <span class="built_in">this</span>.data = data;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ResponseResult</span><span class="params">(Integer code, String msg)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">        <span class="built_in">this</span>.msg = msg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> ResponseResult <span class="title function_">errorResult</span><span class="params">(<span class="type">int</span> code, String msg)</span> &#123;</span><br><span class="line">        <span class="type">ResponseResult</span> <span class="variable">result</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ResponseResult</span>();</span><br><span class="line">        <span class="keyword">return</span> result.error(code, msg);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> ResponseResult <span class="title function_">okResult</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">ResponseResult</span> <span class="variable">result</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ResponseResult</span>();</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> ResponseResult <span class="title function_">okResult</span><span class="params">(<span class="type">int</span> code, String msg)</span> &#123;</span><br><span class="line">        <span class="type">ResponseResult</span> <span class="variable">result</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ResponseResult</span>();</span><br><span class="line">        <span class="keyword">return</span> result.ok(code, <span class="literal">null</span>, msg);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> ResponseResult <span class="title function_">okResult</span><span class="params">(Object data)</span> &#123;</span><br><span class="line">        <span class="type">ResponseResult</span> <span class="variable">result</span> <span class="operator">=</span> setAppHttpCodeEnum(AppHttpCodeEnum.SUCCESS, AppHttpCodeEnum.SUCCESS.getMsg());</span><br><span class="line">        <span class="keyword">if</span> (data != <span class="literal">null</span>) &#123;</span><br><span class="line">            result.setData(data);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> ResponseResult <span class="title function_">errorResult</span><span class="params">(AppHttpCodeEnum enums)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> setAppHttpCodeEnum(enums, enums.getMsg());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> ResponseResult <span class="title function_">errorResult</span><span class="params">(AppHttpCodeEnum enums, String msg)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> setAppHttpCodeEnum(enums, msg);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> ResponseResult <span class="title function_">setAppHttpCodeEnum</span><span class="params">(AppHttpCodeEnum enums)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> okResult(enums.getCode(), enums.getMsg());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> ResponseResult <span class="title function_">setAppHttpCodeEnum</span><span class="params">(AppHttpCodeEnum enums, String msg)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> okResult(enums.getCode(), msg);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> ResponseResult&lt;?&gt; error(Integer code, String msg) &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">        <span class="built_in">this</span>.msg = msg;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> ResponseResult&lt;?&gt; ok(Integer code, T data) &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">        <span class="built_in">this</span>.data = data;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> ResponseResult&lt;?&gt; ok(Integer code, T data, String msg) &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">        <span class="built_in">this</span>.data = data;</span><br><span class="line">        <span class="built_in">this</span>.msg = msg;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> ResponseResult&lt;?&gt; ok(T data) &#123;</span><br><span class="line">        <span class="built_in">this</span>.data = data;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getCode</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCode</span><span class="params">(Integer code)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getMsg</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> msg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setMsg</span><span class="params">(String msg)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.msg = msg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> T <span class="title function_">getData</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> data;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setData</span><span class="params">(T data)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.data = data;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>新建一个枚举类，封装响应码对应响应信息。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">AppHttpCodeEnum</span> &#123;</span><br><span class="line">    <span class="comment">// 成功</span></span><br><span class="line">    SUCCESS(<span class="number">200</span>, <span class="string">&quot;操作成功&quot;</span>),</span><br><span class="line">    <span class="comment">// 登录</span></span><br><span class="line">    NEED_LOGIN(<span class="number">401</span>, <span class="string">&quot;需要登录后操作&quot;</span>),</span><br><span class="line">    NO_OPERATOR_AUTH(<span class="number">403</span>, <span class="string">&quot;无权限操作&quot;</span>),</span><br><span class="line">    USER_IS_DELETED(<span class="number">404</span>, <span class="string">&quot;用户已被删除&quot;</span>),</span><br><span class="line">    SYSTEM_ERROR(<span class="number">500</span>, <span class="string">&quot;出现错误&quot;</span>),</span><br><span class="line">    USERNAME_EXIST(<span class="number">501</span>, <span class="string">&quot;用户名已存在&quot;</span>),</span><br><span class="line">    PHONENUMBER_EXIST(<span class="number">502</span>, <span class="string">&quot;手机号已存在&quot;</span>),</span><br><span class="line">    EMAIL_EXIST(<span class="number">503</span>, <span class="string">&quot;邮箱已存在&quot;</span>),</span><br><span class="line">    REQUIRE_USERNAME(<span class="number">504</span>, <span class="string">&quot;必需填写用户名&quot;</span>),</span><br><span class="line">    CONTENT_NOT_NULL(<span class="number">506</span>, <span class="string">&quot;评论内容不能为空&quot;</span>),</span><br><span class="line">    FILE_TYPE_ERROR(<span class="number">507</span>, <span class="string">&quot;文件类型错误，请上传png文件&quot;</span>),</span><br><span class="line">    USERNAME_NOT_NULL(<span class="number">508</span>, <span class="string">&quot;用户名不能为空&quot;</span>),</span><br><span class="line">    NICKNAME_NOT_NULL(<span class="number">509</span>, <span class="string">&quot;昵称不能为空&quot;</span>),</span><br><span class="line">    PASSWORD_NOT_NULL(<span class="number">510</span>, <span class="string">&quot;密码不能为空&quot;</span>),</span><br><span class="line">    PASSWORD_NOT_MATCH(<span class="number">513</span>, <span class="string">&quot;原密码错误&quot;</span>),</span><br><span class="line">    EMAIL_NOT_NULL(<span class="number">511</span>, <span class="string">&quot;邮箱不能为空&quot;</span>),</span><br><span class="line">    NICKNAME_EXIST(<span class="number">512</span>, <span class="string">&quot;昵称已存在&quot;</span>),</span><br><span class="line">    LOGIN_ERROR(<span class="number">505</span>, <span class="string">&quot;用户名或密码错误&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> code;</span><br><span class="line">    String msg;</span><br><span class="line"></span><br><span class="line">    AppHttpCodeEnum(<span class="type">int</span> code, String errorMessage) &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">        <span class="built_in">this</span>.msg = errorMessage;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCode</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getMsg</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> msg;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>跟redis的key相关字符串的封装：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RedisConstants</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String LOGIN_USER_KEY=<span class="string">&quot;login:user:&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>一些需要用到的常量的封装：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SystemConstants</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 正常状态</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">NORMAL</span> <span class="operator">=</span> <span class="string">&quot;0&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">ADMAIN</span> <span class="operator">=</span> <span class="string">&quot;1&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 用户是否为删除状态</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Integer</span> <span class="variable">IS_DELETED</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Integer</span> <span class="variable">IS_ALIVE</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2-4-MP配置"><a href="#2-4-MP配置" class="headerlink" title="2.4 MP配置"></a>2.4 MP配置</h2><p>配置MP分页器。这个功能也许用不到，针对数据多的时候分页查询会减小很多额外的性能消耗。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MybatisPlusConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> MybatisPlusInterceptor <span class="title function_">mybatisPlusInterceptor</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">MybatisPlusInterceptor</span> <span class="variable">mybatisPlusInterceptor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MybatisPlusInterceptor</span>();</span><br><span class="line">        mybatisPlusInterceptor.addInnerInterceptor(<span class="keyword">new</span> <span class="title class_">PaginationInnerInterceptor</span>());</span><br><span class="line">        <span class="keyword">return</span> mybatisPlusInterceptor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>分析数据表t_user可知，当我们在crud时，同时需要修改创建时间、修改时间、修改人、创建人等字段。</p><p>例如下面场景：修改用户密码后，实现类中还需要单独设置修改人、获取系统时间对修改时间字段进行设置。麻烦不说，写起来十分别扭不美观。所以，解决方法MP已经为我们想到了，只需要实现<code>MetaObjectHandler</code>接口即可。每当调用MP提供的相应方法，下面实现类对应的方法就会执行。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyMetaObjectHandler</span> <span class="keyword">implements</span> <span class="title class_">MetaObjectHandler</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insertFill</span><span class="params">(MetaObject metaObject)</span> &#123;</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">userId</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            userId = SecurityUtils.getUserId();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            userId = -<span class="number">1</span>;<span class="comment">//表示是自己创建</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">this</span>.setFieldValByName(<span class="string">&quot;createdTime&quot;</span>, <span class="keyword">new</span> <span class="title class_">Date</span>(), metaObject);</span><br><span class="line">        <span class="built_in">this</span>.setFieldValByName(<span class="string">&quot;createdUser&quot;</span>,userId , metaObject);</span><br><span class="line">        <span class="built_in">this</span>.setFieldValByName(<span class="string">&quot;modifiedTime&quot;</span>, <span class="keyword">new</span> <span class="title class_">Date</span>(), metaObject);</span><br><span class="line">        <span class="built_in">this</span>.setFieldValByName(<span class="string">&quot;modifiedUser&quot;</span>, userId, metaObject);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateFill</span><span class="params">(MetaObject metaObject)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.setFieldValByName(<span class="string">&quot;modifiedTime&quot;</span>, <span class="keyword">new</span> <span class="title class_">Date</span>(), metaObject);</span><br><span class="line">        <span class="built_in">this</span>.setFieldValByName(<span class="string">&quot;modifiedUser&quot;</span>, SecurityUtils.getUserId(), metaObject);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>同时，User实体类要添加<code>@TableField</code>注解，添加规则</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SuppressWarnings(&quot;serial&quot;)</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@TableName(&quot;t_user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="comment">//用户id@TableId</span></span><br><span class="line">    <span class="keyword">private</span> Integer uid;</span><br><span class="line">    <span class="comment">//用户名</span></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;用户名&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="comment">//密码</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="comment">//性别,0-女,1-男</span></span><br><span class="line">    <span class="keyword">private</span> Integer gender;</span><br><span class="line">    <span class="comment">//电话</span></span><br><span class="line">    <span class="keyword">private</span> String phone;</span><br><span class="line">    <span class="comment">//邮箱</span></span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">    <span class="comment">//头像</span></span><br><span class="line">    <span class="keyword">private</span> String avatar;</span><br><span class="line">    <span class="comment">//是否删除,0-未删除,1-已删除</span></span><br><span class="line">    <span class="keyword">private</span> Integer isDelete;</span><br><span class="line">    <span class="comment">//创建执行人</span></span><br><span class="line">    <span class="meta">@TableField(fill = FieldFill.INSERT)</span><span class="comment">//插入时触发handler</span></span><br><span class="line">    <span class="keyword">private</span> Integer createdUser;</span><br><span class="line">    <span class="comment">//创建时间</span></span><br><span class="line">    <span class="meta">@TableField(fill = FieldFill.INSERT)</span></span><br><span class="line">    <span class="keyword">private</span> Date createdTime;</span><br><span class="line">    <span class="comment">//修改执行人</span></span><br><span class="line">    <span class="meta">@TableField(fill = FieldFill.INSERT_UPDATE)</span><span class="comment">//更新时触发handler</span></span><br><span class="line">    <span class="keyword">private</span> Integer modifiedUser;</span><br><span class="line">    <span class="comment">//修改时间</span></span><br><span class="line">    <span class="meta">@TableField(fill = FieldFill.INSERT_UPDATE)</span></span><br><span class="line">    <span class="keyword">private</span> Date modifiedTime;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>配置文件添加MP配置：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">7777</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/zut-shop?characterEncoding=utf-8&amp;serverTimezone=Asia/Shanghai</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">qwer1234</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span> <span class="comment">#sql打印</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="attr">logic-delete-field:</span> <span class="string">delFlag</span></span><br><span class="line">      <span class="attr">logic-delete-value:</span> <span class="number">1</span></span><br><span class="line">      <span class="attr">logic-not-delete-value:</span> <span class="number">0</span></span><br><span class="line">      <span class="attr">id-type:</span> <span class="string">auto</span></span><br></pre></td></tr></table></figure><blockquote><p><code>注意：</code>MP配置好后最好在测试类中测试能否拿到数据库数据。</p></blockquote><h2 id="2-5-Redis配置"><a href="#2-5-Redis配置" class="headerlink" title="2.5 Redis配置"></a>2.5 Redis配置</h2><p>需要用到ali的fastjson序列化器在redis存值的时候进行序列化，保证是转义后的中文字符。</p><p><code>FastJsonRedisSerializer</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Redis使用FastJson序列化</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FastJsonRedisSerializer</span>&lt;T&gt; <span class="keyword">implements</span> <span class="title class_">RedisSerializer</span>&lt;T&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Charset</span> <span class="variable">DEFAULT_CHARSET</span> <span class="operator">=</span> StandardCharsets.UTF_8;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Class&lt;T&gt; clazz;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        ParserConfig.getGlobalInstance().setAutoTypeSupport(<span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">FastJsonRedisSerializer</span><span class="params">(Class&lt;T&gt; clazz)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">        <span class="built_in">this</span>.clazz = clazz;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">byte</span>[] serialize(T t) <span class="keyword">throws</span> SerializationException &#123;</span><br><span class="line">        <span class="keyword">if</span> (t == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">0</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> JSON.toJSONString(t, SerializerFeature.WriteClassName).getBytes(DEFAULT_CHARSET);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> T <span class="title function_">deserialize</span><span class="params">(<span class="type">byte</span>[] bytes)</span> <span class="keyword">throws</span> SerializationException &#123;</span><br><span class="line">        <span class="keyword">if</span> (bytes == <span class="literal">null</span> || bytes.length &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(bytes, DEFAULT_CHARSET);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> JSON.parseObject(str, clazz);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> JavaType <span class="title function_">getJavaType</span><span class="params">(Class&lt;?&gt; clazz)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> TypeFactory.defaultInstance().constructType(clazz);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>RedisConfig</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RedisConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@SuppressWarnings(value = &#123;&quot;unchecked&quot;, &quot;rawtypes&quot;&#125;)</span></span><br><span class="line">    <span class="keyword">public</span> RedisTemplate&lt;Object, Object&gt; <span class="title function_">redisTemplate</span><span class="params">(RedisConnectionFactory connectionFactory)</span> &#123;</span><br><span class="line">        RedisTemplate&lt;Object, Object&gt; template = <span class="keyword">new</span> <span class="title class_">RedisTemplate</span>&lt;&gt;();</span><br><span class="line">        template.setConnectionFactory(connectionFactory);</span><br><span class="line"></span><br><span class="line">        <span class="type">FastJsonRedisSerializer</span> <span class="variable">serializer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FastJsonRedisSerializer</span>(Object.class);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 使用StringRedisSerializer来序列化和反序列化redis的key值</span></span><br><span class="line">        template.setKeySerializer(<span class="keyword">new</span> <span class="title class_">StringRedisSerializer</span>());</span><br><span class="line">        template.setValueSerializer(serializer);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Hash的key也采用StringRedisSerializer的序列化方式</span></span><br><span class="line">        template.setHashKeySerializer(<span class="keyword">new</span> <span class="title class_">StringRedisSerializer</span>());</span><br><span class="line">        template.setHashValueSerializer(serializer);</span><br><span class="line"></span><br><span class="line">        template.afterPropertiesSet();</span><br><span class="line">        <span class="keyword">return</span> template;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>redis操作封装工具类，来自ruoyi：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SuppressWarnings(value = &#123;&quot;unchecked&quot;, &quot;rawtypes&quot;&#125;)</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RedisCache</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">public</span> RedisTemplate redisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 缓存基本的对象，Integer、String、实体类等</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   缓存的键值</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value 缓存的值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt; <span class="keyword">void</span> <span class="title function_">setCacheObject</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> T value)</span> &#123;</span><br><span class="line">        redisTemplate.opsForValue().set(key, value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 缓存基本的对象，Integer、String、实体类等</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key      缓存的键值</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value    缓存的值</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> timeout  时间</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> timeUnit 时间颗粒度</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt; <span class="keyword">void</span> <span class="title function_">setCacheObject</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> T value, <span class="keyword">final</span> Integer timeout, <span class="keyword">final</span> TimeUnit timeUnit)</span> &#123;</span><br><span class="line">        redisTemplate.opsForValue().set(key, value, timeout, timeUnit);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置有效时间</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key     Redis键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> timeout 超时时间</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> true=设置成功；false=设置失败</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">expire</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> <span class="type">long</span> timeout)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> expire(key, timeout, TimeUnit.SECONDS);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置有效时间</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key     Redis键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> timeout 超时时间</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> unit    时间单位</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> true=设置成功；false=设置失败</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">expire</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> <span class="type">long</span> timeout, <span class="keyword">final</span> TimeUnit unit)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.expire(key, timeout, unit);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获得缓存的基本对象。</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key 缓存键值</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 缓存键值对应的数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt; T <span class="title function_">getCacheObject</span><span class="params">(<span class="keyword">final</span> String key)</span> &#123;</span><br><span class="line">        ValueOperations&lt;String, T&gt; operation = redisTemplate.opsForValue();</span><br><span class="line">        <span class="keyword">return</span> operation.get(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 删除单个对象</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">deleteObject</span><span class="params">(<span class="keyword">final</span> String key)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.delete(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 删除集合对象</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> collection 多个对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">deleteObject</span><span class="params">(<span class="keyword">final</span> Collection collection)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.delete(collection);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 缓存List数据</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key      缓存的键值</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> dataList 待缓存的List数据</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 缓存的对象</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt; <span class="type">long</span> <span class="title function_">setCacheList</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> List&lt;T&gt; dataList)</span> &#123;</span><br><span class="line">        <span class="type">Long</span> <span class="variable">count</span> <span class="operator">=</span> redisTemplate.opsForList().rightPushAll(key, dataList);</span><br><span class="line">        <span class="keyword">return</span> count == <span class="literal">null</span> ? <span class="number">0</span> : count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获得缓存的list对象</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key 缓存的键值</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 缓存键值对应的数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt; List&lt;T&gt; <span class="title function_">getCacheList</span><span class="params">(<span class="keyword">final</span> String key)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForList().range(key, <span class="number">0</span>, -<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 缓存Set</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key     缓存键值</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> dataSet 缓存的数据</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 缓存数据的对象</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt; BoundSetOperations&lt;String, T&gt; <span class="title function_">setCacheSet</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Set&lt;T&gt; dataSet)</span> &#123;</span><br><span class="line">        BoundSetOperations&lt;String, T&gt; setOperation = redisTemplate.boundSetOps(key);</span><br><span class="line">        Iterator&lt;T&gt; it = dataSet.iterator();</span><br><span class="line">        <span class="keyword">while</span> (it.hasNext()) &#123;</span><br><span class="line">            setOperation.add(it.next());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> setOperation;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获得缓存的set</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt; Set&lt;T&gt; <span class="title function_">getCacheSet</span><span class="params">(<span class="keyword">final</span> String key)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForSet().members(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 缓存Map</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> dataMap</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt; <span class="keyword">void</span> <span class="title function_">setCacheMap</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Map&lt;String, T&gt; dataMap)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (dataMap != <span class="literal">null</span>) &#123;</span><br><span class="line">            redisTemplate.opsForHash().putAll(key, dataMap);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获得缓存的Map</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt; Map&lt;String, T&gt; <span class="title function_">getCacheMap</span><span class="params">(<span class="keyword">final</span> String key)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForHash().entries(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据map的key对值进行自增操作</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> hKey</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> v</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">incrementCacheMapValue</span><span class="params">(String key, String hKey, <span class="type">long</span> v)</span> &#123;</span><br><span class="line">        redisTemplate.boundHashOps(key).increment(hKey, v);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 往Hash中存入数据</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   Redis键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> hKey  Hash键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value 值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt; <span class="keyword">void</span> <span class="title function_">setCacheMapValue</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> String hKey, <span class="keyword">final</span> T value)</span> &#123;</span><br><span class="line">        redisTemplate.opsForHash().put(key, hKey, value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取Hash中的数据</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key  Redis键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> hKey Hash键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> Hash中的对象</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt; T <span class="title function_">getCacheMapValue</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> String hKey)</span> &#123;</span><br><span class="line">        HashOperations&lt;String, String, T&gt; opsForHash = redisTemplate.opsForHash();</span><br><span class="line">        <span class="keyword">return</span> opsForHash.get(key, hKey);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 删除Hash中的数据</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> hkey</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delCacheMapValue</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> String hkey)</span> &#123;</span><br><span class="line">        <span class="type">HashOperations</span> <span class="variable">hashOperations</span> <span class="operator">=</span> redisTemplate.opsForHash();</span><br><span class="line">        hashOperations.delete(key, hkey);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取多个Hash中的数据</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   Redis键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> hKeys Hash键集合</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> Hash对象集合</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt; List&lt;T&gt; <span class="title function_">getMultiCacheMapValue</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Collection&lt;Object&gt; hKeys)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForHash().multiGet(key, hKeys);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获得缓存的基本对象列表</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> pattern 字符串前缀</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 对象列表</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Collection&lt;String&gt; <span class="title function_">keys</span><span class="params">(<span class="keyword">final</span> String pattern)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.keys(pattern);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>配置文件添加redis配置：我的redis没有设置密码，省略密码配置</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">7777</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/zut-shop?characterEncoding=utf-8&amp;serverTimezone=Asia/Shanghai</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">qwer1234</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">  <span class="attr">redis:</span></span><br><span class="line">    <span class="attr">host:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">6379</span></span><br><span class="line">    <span class="attr">database:</span> <span class="number">7</span></span><br><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="attr">logic-delete-field:</span> <span class="string">delFlag</span></span><br><span class="line">      <span class="attr">logic-delete-value:</span> <span class="number">1</span></span><br><span class="line">      <span class="attr">logic-not-delete-value:</span> <span class="number">0</span></span><br><span class="line">      <span class="attr">id-type:</span> <span class="string">auto</span></span><br></pre></td></tr></table></figure><h2 id="2-6-Swagger配置"><a href="#2-6-Swagger配置" class="headerlink" title="2.6 Swagger配置"></a>2.6 Swagger配置</h2><p>配Swagger置写在<code>shopping</code>模块</p><ul><li>RequestHandlerSelectors.basePackage(“edu.zut.controller”)中填写控制层的包</li><li>ApiInfo可以根据自己需要自行配置</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SwaggerConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Docket <span class="title function_">customDocket</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Docket</span>(DocumentationType.SWAGGER_2)</span><br><span class="line">                .apiInfo(apiInfo())</span><br><span class="line">                .select()</span><br><span class="line">                .apis(RequestHandlerSelectors.basePackage(<span class="string">&quot;edu.zut.controller&quot;</span>))</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> ApiInfo <span class="title function_">apiInfo</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Contact</span> <span class="variable">contact</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Contact</span>(<span class="string">&quot;roydon&quot;</span>, <span class="string">&quot;https://www.roydon.top&quot;</span>, <span class="string">&quot;3133010060@qq.com&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ApiInfoBuilder</span>()</span><br><span class="line">                .title(<span class="string">&quot;zut-shop&quot;</span>)</span><br><span class="line">                .description(<span class="string">&quot;智子商城&quot;</span>)</span><br><span class="line">                .contact(contact)   <span class="comment">// 联系方式</span></span><br><span class="line">                .version(<span class="string">&quot;1.0.0&quot;</span>)  <span class="comment">// 版本</span></span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>启动类添加注解<code>@EnableSwagger2</code>启动Swagger</p><p>项目启动访问<code>http://localhost:7777/swagger-ui.html</code>即可</p><p>具体使用可参考官方网站，或前往：<a href="http://c.biancheng.net/view/5532.html">http://c.biancheng.net/view/5532.html</a></p><p><img src="https://raw.githubusercontent.com/roydonGuo/Typora-Pic/main/md-pic202212211735392.png" alt="image-20221213205613086"></p><h2 id="2-7-SpringSecurity配置"><a href="#2-7-SpringSecurity配置" class="headerlink" title="2.7 SpringSecurity配置"></a>2.7 SpringSecurity配置</h2><p><code>Shopping</code>模块中新建类SecurityConfig</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SecurityConfig</span> <span class="keyword">extends</span> <span class="title class_">WebSecurityConfigurerAdapter</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> PasswordEncoder <span class="title function_">passwordEncoder</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">BCryptPasswordEncoder</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        http</span><br><span class="line">                .cors()</span><br><span class="line">                .and()</span><br><span class="line">                <span class="comment">//关闭csrf</span></span><br><span class="line">                .csrf().disable()</span><br><span class="line">                <span class="comment">//不通过Session获取SecurityContext</span></span><br><span class="line">                .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS)</span><br><span class="line">                .and()</span><br><span class="line">                .authorizeRequests()</span><br><span class="line">                <span class="comment">// 对于登录接口 允许匿名访问 anonymous</span></span><br><span class="line">                .antMatchers(<span class="string">&quot;/user/login&quot;</span>).anonymous()</span><br><span class="line">                .anyRequest().authenticated();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * AuthenticationManager注册进容器</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> AuthenticationManager <span class="title function_">authenticationManagerBean</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.authenticationManagerBean();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>配置中注入好Security使用的加密工具BCryptPasswordEncoder后在测试类中测试密码加密功能是否正常。</p><p>此处引入spring容器管理的bean，重新new BCryptPasswordEncoder密码会匹配不上。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Resource</span></span><br><span class="line"><span class="keyword">private</span> PasswordEncoder passwordEncoder;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">pwdTest</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">pwd</span> <span class="operator">=</span> passwordEncoder.encode(<span class="string">&quot;123456&quot;</span>);</span><br><span class="line">    System.out.println(pwd);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>比较原始密码与加密密码，结果返回Boolean类型</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">boolean</span> <span class="variable">matches</span> <span class="operator">=</span> passwordEncoder.matches(<span class="string">&quot;123456&quot;</span>,user.getPassword()); <span class="comment">//true</span></span><br></pre></td></tr></table></figure><h1 id="3-用户业务"><a href="#3-用户业务" class="headerlink" title="3. 用户业务"></a>3. 用户业务</h1><h2 id="3-1-登录登出接口"><a href="#3-1-登录登出接口" class="headerlink" title="3.1 登录登出接口"></a>3.1 登录登出接口</h2><h3 id="3-1-1登录"><a href="#3-1-1登录" class="headerlink" title="3.1.1登录"></a>3.1.1登录</h3><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202212251953767.png" alt="image-20221225195346780"></p><p>controller</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> LoginService loginService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/login&quot;)</span></span><br><span class="line">    <span class="meta">@ApiOperation(value = &quot;用户登录&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseResult <span class="title function_">login</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!StringUtils.hasText(user.getUsername()))&#123;</span><br><span class="line">            <span class="comment">//提示 必须要传用户名</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">SystemException</span>(AppHttpCodeEnum.REQUIRE_USERNAME);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> loginService.login(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>LoginService</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">LoginService</span> &#123;</span><br><span class="line">    ResponseResult <span class="title function_">login</span><span class="params">(User user)</span>;</span><br><span class="line">    ResponseResult <span class="title function_">logout</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>LoginUser实体类，封装进User和用户的权限，权限本系统不需要，直接跳过返回null</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginUser</span> <span class="keyword">implements</span> <span class="title class_">UserDetails</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> User user;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Collection&lt;? <span class="keyword">extends</span> <span class="title class_">GrantedAuthority</span>&gt; getAuthorities() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getPassword</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> user.getPassword();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getUsername</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> user.getUsername();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isAccountNonExpired</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isAccountNonLocked</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isCredentialsNonExpired</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEnabled</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>实现<code>UserDetailsService</code>接口，重写<code>loadUserByUsername()</code>方法。暂且不需要角色权限。返回LoginUser对象</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDetailsServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserDetailsService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="meta">@Transactional</span></span><br><span class="line">    <span class="keyword">public</span> UserDetails <span class="title function_">loadUserByUsername</span><span class="params">(String username)</span> <span class="keyword">throws</span> UsernameNotFoundException &#123;</span><br><span class="line">        LambdaQueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">// 方法引用</span></span><br><span class="line">        queryWrapper.eq(StringUtils.isNotEmpty(username),User::getUsername,username);</span><br><span class="line"></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userMapper.selectOne(queryWrapper);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (Objects.isNull(user)) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UsernameNotFoundException</span>(<span class="string">&quot;用户名或密码错误&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//判断用户是否被删除</span></span><br><span class="line">        <span class="keyword">if</span> (Objects.equals(user.getIsDelete(), IS_DELETED)) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">SystemException</span>(AppHttpCodeEnum.USER_IS_DELETED);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        log.info(<span class="string">&quot;数据库登录用户：&#123;&#125;&quot;</span>,user);</span><br><span class="line">        <span class="comment">//TODO 查询角色权限</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">LoginUser</span>(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>service实现类：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">LoginService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> AuthenticationManager authenticationManager;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> RedisCache redisCache;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 登录</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> user</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> ResponseResult.okResult(userLoginVo)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> ResponseResult <span class="title function_">login</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        <span class="comment">//判断用户名是否为空</span></span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(user.getUsername())) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">SystemException</span>(AppHttpCodeEnum.REQUIRE_USERNAME);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">UsernamePasswordAuthenticationToken</span> <span class="variable">authenticationToken</span> <span class="operator">=</span></span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">UsernamePasswordAuthenticationToken</span>(user.getUsername(), user.getPassword());</span><br><span class="line">        <span class="type">Authentication</span> <span class="variable">authentication</span> <span class="operator">=</span> authenticationManager.authenticate(authenticationToken);</span><br><span class="line">        <span class="comment">//判断是否认证通过</span></span><br><span class="line">        <span class="keyword">if</span> (Objects.isNull(authentication)) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;用户名或密码错误&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 认证成功，从Authentication获取LoginUser</span></span><br><span class="line">        <span class="type">LoginUser</span> <span class="variable">loginUser</span> <span class="operator">=</span> (LoginUser) authentication.getPrincipal();</span><br><span class="line"></span><br><span class="line">        log.info(<span class="string">&quot;loginUser:&#123;&#125;&quot;</span>, loginUser);</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">userId</span> <span class="operator">=</span> loginUser.getUser().getUid().toString();</span><br><span class="line">        <span class="comment">// 生成token</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">jwt</span> <span class="operator">=</span> JwtUtil.createJWT(userId);</span><br><span class="line">        <span class="comment">// 存入redis</span></span><br><span class="line">        redisCache.setCacheObject(LOGIN_USER_KEY + userId, loginUser);</span><br><span class="line"></span><br><span class="line">        <span class="type">UserInfoVo</span> <span class="variable">userInfoVo</span> <span class="operator">=</span> BeanCopyUtils.copyBean(loginUser.getUser(), UserInfoVo.class);</span><br><span class="line">        <span class="type">UserLoginVo</span> <span class="variable">userLoginVo</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserLoginVo</span>(jwt, userInfoVo);</span><br><span class="line"></span><br><span class="line">        log.info(<span class="string">&quot;用户以登陆==&gt;&#123;&#125;&quot;</span>, userLoginVo);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ResponseResult.okResult(userLoginVo);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>封装的前后端交互实体<code>UserInfoVo</code>，把重要的信息隐藏起来。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@Accessors(chain = true)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserInfoVo</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 主键</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Integer uid;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 用户名</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 手机号</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String phone;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 头像</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String avatar;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer gender;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>相应给前端token实体类<code>UserLoginVo</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserLoginVo</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String token;</span><br><span class="line">    <span class="keyword">private</span> UserInfoVo userInfo;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>自定义异常：前文枚举类已经定义过，就是此处构造方法参数AppHttpCodeEnum，当服务需要往外抛出错误时，指定响应码和对应响应信息，threw new SystemException()，把枚举AppHttpCodeEnum传递进去即可。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SystemException</span> <span class="keyword">extends</span> <span class="title class_">RuntimeException</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> code;</span><br><span class="line">    <span class="keyword">private</span> String msg;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCode</span><span class="params">()</span> &#123;<span class="keyword">return</span> code;&#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getMsg</span><span class="params">()</span> &#123;<span class="keyword">return</span> msg;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">SystemException</span><span class="params">(AppHttpCodeEnum httpCodeEnum)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(httpCodeEnum.getMsg());</span><br><span class="line">        <span class="built_in">this</span>.code = httpCodeEnum.getCode();</span><br><span class="line">        <span class="built_in">this</span>.msg = httpCodeEnum.getMsg();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>全局异常捕获handler：</p><p><code>@RestControllerAdvice</code>这个注解继承了多个注解，包括Compont注解，作用之一就是可以自定义异常信息。当捕获到异常响应给且前端。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@RestControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GlobalExceptionHandler</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExceptionHandler(SystemException.class)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseResult <span class="title function_">systemExceptionHandle</span><span class="params">(SystemException se)</span> &#123;</span><br><span class="line">        log.info(<span class="string">&quot;最喜欢异常了==&gt;&#123;&#125;&quot;</span>, se);</span><br><span class="line">        <span class="keyword">return</span> ResponseResult.errorResult(se.getCode(), se.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExceptionHandler(Exception.class)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseResult <span class="title function_">exceptionHandle</span><span class="params">(Exception e)</span> &#123;</span><br><span class="line">        log.info(<span class="string">&quot;最喜欢异常了==&gt;&#123;&#125;&quot;</span>, e);</span><br><span class="line">        <span class="keyword">return</span> ResponseResult.errorResult(AppHttpCodeEnum.SYSTEM_ERROR.getCode(), e.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>jwt认证过滤器：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JwtAuthenticationTokenFilter</span> <span class="keyword">extends</span> <span class="title class_">OncePerRequestFilter</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> RedisCache redisCache;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doFilterInternal</span><span class="params">(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//获取请求头中的token</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">token</span> <span class="operator">=</span> request.getHeader(<span class="string">&quot;token&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(token)) &#123;</span><br><span class="line">            filterChain.doFilter(request, response);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//解析获取userid</span></span><br><span class="line">        <span class="type">Claims</span> <span class="variable">claims</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            claims = JwtUtil.parseJWT(token);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="comment">// token超时，或token非法</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line"><span class="comment">//            ResponseResult responseResult = ResponseResult.errorResult(AppHttpCodeEnum.NEED_LOGIN);</span></span><br><span class="line"><span class="comment">//            WebUtils.renderString(response, JSON.toJSONString(responseResult));</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">String</span> <span class="variable">userId</span> <span class="operator">=</span> claims.getSubject();</span><br><span class="line">        <span class="comment">//从redis中获取用户信息</span></span><br><span class="line">        <span class="type">LoginUser</span> <span class="variable">loginUser</span> <span class="operator">=</span> redisCache.getCacheObject(LOGIN_USER_KEY + userId);</span><br><span class="line">        <span class="comment">//如果redis获取不到</span></span><br><span class="line">        <span class="keyword">if</span> (Objects.isNull(loginUser)) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;用户未登录&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//存入SecurityContextHolder</span></span><br><span class="line">        <span class="comment">//TODO 获取权限信息封装到 Authentication 中</span></span><br><span class="line">        <span class="type">UsernamePasswordAuthenticationToken</span> <span class="variable">authenticationToken</span> <span class="operator">=</span></span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">UsernamePasswordAuthenticationToken</span>(loginUser, <span class="literal">null</span>, <span class="literal">null</span>);</span><br><span class="line">        SecurityContextHolder.getContext().setAuthentication(authenticationToken);</span><br><span class="line">        filterChain.doFilter(request, response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>配置类添加jwt过滤器规则</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableGlobalMethodSecurity(prePostEnabled = true)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SecurityConfig</span> <span class="keyword">extends</span> <span class="title class_">WebSecurityConfigurerAdapter</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> PasswordEncoder <span class="title function_">passwordEncoder</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">BCryptPasswordEncoder</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> JwtAuthenticationTokenFilter jwtAuthenticationTokenFilter;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        http.csrf().disable();<span class="comment">// 关闭csrf</span></span><br><span class="line">        http</span><br><span class="line">                <span class="comment">//不通过Session获取SecurityContext</span></span><br><span class="line">                .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS)</span><br><span class="line">                .and()</span><br><span class="line">                .authorizeRequests()</span><br><span class="line">                <span class="comment">// 对于登录接口、注册接口 允许匿名访问</span></span><br><span class="line">                .antMatchers(<span class="string">&quot;/user/login&quot;</span>).anonymous()</span><br><span class="line">                <span class="comment">//注销接口需要认证才能访问</span></span><br><span class="line">                .antMatchers(<span class="string">&quot;/user/logout&quot;</span>).authenticated()</span><br><span class="line">                <span class="comment">// 除上面外的所有请求全部不需要认证即可访问</span></span><br><span class="line">                .anyRequest().permitAll();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// jwt过滤器</span></span><br><span class="line">        http.addFilterBefore(jwtAuthenticationTokenFilter, UsernamePasswordAuthenticationFilter.class);</span><br><span class="line">        <span class="comment">//关闭默认的注销功能</span></span><br><span class="line">        http.logout().disable();</span><br><span class="line">        <span class="comment">//允许跨域</span></span><br><span class="line">        http.cors();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> AuthenticationManager <span class="title function_">authenticationManagerBean</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.authenticationManagerBean();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Apifox测试登录接口：</p><p><img src="https://raw.githubusercontent.com/roydonGuo/Typora-Pic/main/md-pic202212211736425.png" alt="image-20221213214122124"></p><p>redis也成功存入数据</p><p><img src="https://raw.githubusercontent.com/roydonGuo/Typora-Pic/main/md-pic202212211736944.png" alt="image-20221213214223209"></p><h3 id="3-1-2-登出"><a href="#3-1-2-登出" class="headerlink" title="3.1.2 登出"></a>3.1.2 登出</h3><p>即用户登陆后选择退出登录。鼠标移动到头像弹出。</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202212251954606.png" alt="image-20221225195412568"></p><p>controller接口</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/logout&quot;)</span></span><br><span class="line"><span class="meta">@ApiOperation(value = &quot;退出登录&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResponseResult <span class="title function_">logout</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> loginService.logout();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>实现类重写登出方法</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 退出登录</span></span><br><span class="line"><span class="comment"> * 1.获取用户信息 SecurityContextHolder.getContext().getAuthentication();</span></span><br><span class="line"><span class="comment"> * 2.通过用户 id 清除 redis</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> ResponseResult(CODE_200, &quot; 退出成功 &quot;);</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> ResponseResult <span class="title function_">logout</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">Authentication</span> <span class="variable">authentication</span> <span class="operator">=</span> SecurityContextHolder.getContext().getAuthentication();</span><br><span class="line">    <span class="type">LoginUser</span> <span class="variable">loginUser</span> <span class="operator">=</span> (LoginUser) authentication.getPrincipal();</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">uid</span> <span class="operator">=</span> loginUser.getUser().getUid();</span><br><span class="line">    redisCache.deleteObject(LOGIN_USER_KEY + uid);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ResponseResult</span>(CODE_200, <span class="string">&quot;退出成功&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-2-注册用户"><a href="#3-2-注册用户" class="headerlink" title="3.2 注册用户"></a>3.2 注册用户</h2><p>前端页面：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202212251955906.png" alt="image-20221225195518826"></p><h3 id="3-2-1-需求分析"><a href="#3-2-1-需求分析" class="headerlink" title="3.2.1 需求分析"></a>3.2.1 需求分析</h3><p>前端发送ajax请求，确认密码由前端进行判断，前端只传给后端用户名、密码两个字段的json串。</p><ul><li><p>前端传入数据格式：(json){ ‘username’: username, ‘password’: password }</p></li><li><p>请求地址：<code>/uesr/register</code></p></li></ul><h3 id="3-2-2-后端实现"><a href="#3-2-2-后端实现" class="headerlink" title="3.2.2 后端实现"></a>3.2.2 后端实现</h3><p>①. UserController写一个注册接口</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/register&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseResult <span class="title function_">register</span><span class="params">(<span class="meta">@RequestBody</span> UserDto userDto)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> ResponseResult.okResult(userService.register(userDto));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>②. 前端传入对象封装</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@ApiModel(description = &quot;前端dto&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDto</span> &#123;</span><br><span class="line">    <span class="comment">//用户名</span></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="comment">//原密码</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="comment">//新密码</span></span><br><span class="line">    <span class="keyword">private</span> String newPassword;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>③. 实现类重写接口中注册方法</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Service(&quot;userService&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;UserMapper, User&gt; <span class="keyword">implements</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> RedisCache redisCache;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> PasswordEncoder passwordEncoder;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> ResponseResult <span class="title function_">register</span><span class="params">(UserDto userDto)</span> &#123;</span><br><span class="line">        <span class="comment">//非空判断</span></span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(userDto.getUsername())) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">SystemException</span>(AppHttpCodeEnum.USERNAME_NOT_NULL);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(userDto.getPassword())) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">SystemException</span>(AppHttpCodeEnum.PASSWORD_NOT_NULL);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//数据库中是否存在此用户名</span></span><br><span class="line">        <span class="keyword">if</span> (userNameExist(userDto.getUsername())) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">SystemException</span>(AppHttpCodeEnum.USERNAME_EXIST);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//密码加密</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">encodePassword</span> <span class="operator">=</span> passwordEncoder.encode(userDto.getPassword());</span><br><span class="line">        userDto.setPassword(encodePassword);</span><br><span class="line">        save(BeanCopyUtils.copyBean(userDto,User.class));</span><br><span class="line">        <span class="keyword">return</span> ResponseResult.okResult();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">userNameExist</span><span class="params">(String userName)</span> &#123;</span><br><span class="line">        LambdaQueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;&gt;();</span><br><span class="line">        queryWrapper.eq(User::getUsername, userName);</span><br><span class="line">        <span class="keyword">return</span> count(queryWrapper) &gt; <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>④. 对象拷贝工具封装</p><p>因为前端传过来的是UserDto，但执行sql需要用到数据表对应实体：User，所以封装一个对象拷贝工具转一下对象后再进行crud操作。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 对象、集合拷贝工具类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BeanCopyUtils</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">BeanCopyUtils</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;V&gt; V <span class="title function_">copyBean</span><span class="params">(Object source, Class&lt;V&gt; clazz)</span> &#123;</span><br><span class="line">        <span class="comment">//创建目标对象</span></span><br><span class="line">        <span class="type">V</span> <span class="variable">result</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            result = clazz.newInstance();</span><br><span class="line">            BeanUtils.copyProperties(source, result);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;O, V&gt; List&lt;V&gt; <span class="title function_">copyBeanList</span><span class="params">(List&lt;O&gt; list, Class&lt;V&gt; clazz)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> list.stream().map(o -&gt; copyBean(o, clazz)).collect(Collectors.toList());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-3-修改密码"><a href="#3-3-修改密码" class="headerlink" title="3.3 修改密码"></a>3.3 修改密码</h2><p>前端页面：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202212251957548.png" alt="image-20221225195703165"></p><h3 id="3-3-1-需求分析"><a href="#3-3-1-需求分析" class="headerlink" title="3.3.1 需求分析"></a>3.3.1 需求分析</h3><p>前端提供表单，表单内容包括用户名，原密码和新密码。在前端还会进行确认新密码的校验工作。当然，校验只放在前端即可。</p><p><img src="https://raw.githubusercontent.com/roydonGuo/Typora-Pic/main/md-pic202212211738518.png" alt="image-20221221173833197"></p><ul><li>前端传入数据格式：</li></ul><blockquote><p>{</p><p>​    “username”: “roydon”,</p><p>​    “password”: “123456”,</p><p>​    “confirmPassword”: “111111”</p><p>}</p></blockquote><p>发现前端传入数据与后端的<code>User</code>实体类字段数量相差甚远，甚至还有后端没有的字段。这就需要后端设计一个新的用于前后端进行数据传输的对象（DTO）命名为<code>UserDto</code>。</p><ul><li>请求地址：<code>post(&quot;/user/password&quot;)</code></li></ul><h3 id="3-3-2-后端实现"><a href="#3-3-2-后端实现" class="headerlink" title="3.3.2 后端实现"></a>3.3.2 后端实现</h3><p>①新建<code>UserDto</code>实体类用来接收前端传入的数据，他屏蔽了大量的用户隐私信息。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@ApiModel(description = &quot;注册用户dto&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDto</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//用户名</span></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="comment">//原密码</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="comment">//新密码</span></span><br><span class="line">    <span class="keyword">private</span> String newPassword;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>②控制层<code>UserController</code>编写一个接口</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 修改密码</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> userDto</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;/password&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResponseResult <span class="title function_">update</span><span class="params">(<span class="meta">@RequestBody</span> UserDto userDto)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> ResponseResult.okResult(userService.updatePwd(userDto));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>③业务层实现修改密码方法</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ResponseResult <span class="title function_">updatePwd</span><span class="params">(UserDto userDto)</span>;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> ResponseResult <span class="title function_">updatePwd</span><span class="params">(UserDto userDto)</span> &#123;</span><br><span class="line">    <span class="comment">//非空判断</span></span><br><span class="line">    <span class="keyword">if</span> (StringUtils.isEmpty(userDto.getPassword())) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">SystemException</span>(AppHttpCodeEnum.PASSWORD_NOT_NULL);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//取出登录用户的id</span></span><br><span class="line">    <span class="type">Integer</span> <span class="variable">userId</span> <span class="operator">=</span><span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        userId = SecurityUtils.getUserId();</span><br><span class="line">    &#125;<span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        <span class="comment">//未登录</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">SystemException</span>(NEED_LOGIN);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(Objects.isNull(userId))&#123;</span><br><span class="line">        <span class="comment">//没有携带token</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">SystemException</span>(AppHttpCodeEnum.NO_OPERATOR_AUTH);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//查询用户</span></span><br><span class="line">    LambdaQueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;&gt;();</span><br><span class="line">    queryWrapper.eq(User::getUid, userId);</span><br><span class="line">    <span class="type">User</span> <span class="variable">one</span> <span class="operator">=</span> getOne(queryWrapper);</span><br><span class="line">    <span class="comment">//判断输入密码是否与数据库相同</span></span><br><span class="line">    <span class="type">boolean</span> <span class="variable">matches</span> <span class="operator">=</span> passwordEncoder.matches(userDto.getPassword(),one.getPassword());</span><br><span class="line">    <span class="keyword">if</span> (!matches) &#123;</span><br><span class="line">        <span class="comment">//不存在用户</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">SystemException</span>(AppHttpCodeEnum.PASSWORD_NOT_MATCH);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//从redis中获取用户信息</span></span><br><span class="line">    <span class="type">LoginUser</span> <span class="variable">loginUser</span> <span class="operator">=</span> redisCache.getCacheObject(LOGIN_USER_KEY + userId);</span><br><span class="line">    <span class="comment">//如果redis获取不到</span></span><br><span class="line">    <span class="keyword">if</span> (Objects.isNull(loginUser)) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;用户未登录&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//新密码加密</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">encodePassword</span> <span class="operator">=</span> passwordEncoder.encode(userDto.getNewPassword());</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> loginUser.getUser();</span><br><span class="line">    user.setPassword(encodePassword);</span><br><span class="line">    log.info(<span class="string">&quot;修改后的用户：&#123;&#125;&quot;</span>,user);</span><br><span class="line">    redisCache.setCacheObject(LOGIN_USER_KEY + userId,<span class="keyword">new</span> <span class="title class_">LoginUser</span>(user) );</span><br><span class="line">    <span class="keyword">return</span> ResponseResult.okResult(update(user,queryWrapper));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-4-更新用户信息"><a href="#3-4-更新用户信息" class="headerlink" title="3.4 更新用户信息"></a>3.4 更新用户信息</h2><h3 id="3-4-1-需求分析"><a href="#3-4-1-需求分析" class="headerlink" title="3.4.1 需求分析"></a>3.4.1 需求分析</h3><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202212251958240.png" alt="image-20221225195817867"></p><p>提供一个表单，即是展示用户信息的页面，也可直接进行修改，以及头像的上传。</p><ul><li>前端接口：<code>post(&quot;/user/update&quot;)</code></li></ul><h3 id="3-4-2-后端实现"><a href="#3-4-2-后端实现" class="headerlink" title="3.4.2 后端实现"></a>3.4.2 后端实现</h3><p>①控制层</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 更新用户信息</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> user</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;/update&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResponseResult <span class="title function_">updateUser</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> ResponseResult.okResult(userService.updateUserInfo(user));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>②业务层</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ResponseResult <span class="title function_">updateUserInfo</span><span class="params">(User user)</span>;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> ResponseResult <span class="title function_">updateUserInfo</span><span class="params">(User user)</span> &#123;</span><br><span class="line">    LambdaQueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;&gt;();</span><br><span class="line">    queryWrapper.eq(User::getUid,user.getUid());</span><br><span class="line">    redisCache.setCacheObject(LOGIN_USER_KEY + user.getUid(), <span class="keyword">new</span> <span class="title class_">LoginUser</span>(user));</span><br><span class="line">    <span class="keyword">return</span> ResponseResult.okResult(update(user,queryWrapper));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-5-头像上传"><a href="#3-5-头像上传" class="headerlink" title="3.5 头像上传"></a>3.5 头像上传</h2><h3 id="3-5-1-需求分析"><a href="#3-5-1-需求分析" class="headerlink" title="3.5.1 需求分析"></a>3.5.1 需求分析</h3><p>紧接着上面修改用户信息步骤，此次需求为修改用户头像。</p><ul><li>前端接口：<code>http://localhost:7777/file/upload</code></li></ul><h3 id="3-5-2-后端实现"><a href="#3-5-2-后端实现" class="headerlink" title="3.5.2 后端实现"></a>3.5.2 后端实现</h3><p>①头像存储使用七牛云的对象存储服务，前往官网<a href="https://portal.qiniu.com/kodo/bucket">https://portal.qiniu.com/kodo/bucket</a>。</p><p>注册完用户并登录，打开控制台选择存储空间：</p><p><img src="https://raw.githubusercontent.com/roydonGuo/Typora-Pic/main/md-pic202212211803427.png" alt="image-20221221180315679"></p><p>选择新建空间，访问权限最好设置为公开，名称随意：</p><p><img src="https://raw.githubusercontent.com/roydonGuo/Typora-Pic/main/md-pic202212211804134.png" alt="image-20221221180406779"></p><p>创建好存储空间，七牛云会给此空间提供一个为期三十天的测试域名，也就是说，你上传了图片，可以根据·此测试域名和图片名称访问此网络图片。</p><p>点开右上角个人头像创建密钥。</p><p><img src="https://raw.githubusercontent.com/roydonGuo/Typora-Pic/main/md-pic202212211809654.png" alt="image-20221221180918673"></p><p>②项目引入依赖，在Framework工程引入依赖</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--七牛云存储--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.qiniu<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>qiniu-java-sdk<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>[7.7.0, 7.7.99]<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.google.code.gson<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>gson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>添加配置</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">oss:</span> <span class="comment">#七牛云对象存储</span></span><br><span class="line">  <span class="attr">accessKey:</span> <span class="string">5QiJ****************WX-_O3i</span></span><br><span class="line">  <span class="attr">secretKey:</span> <span class="string">S6t****************FTkFWx51</span></span><br><span class="line">  <span class="attr">bucket:</span> <span class="string">zut-shop-avatar</span> <span class="comment"># 空间名称</span></span><br></pre></td></tr></table></figure><p>③控制层<code>FileController</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/upload&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResponseResult <span class="title function_">uploadFile</span><span class="params">(<span class="meta">@RequestParam</span> MultipartFile file)</span> &#123;</span><br><span class="line">    <span class="comment">//头像上传</span></span><br><span class="line">    <span class="keyword">return</span> ResponseResult.okResult(fileService.uploadImg(file));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>④业务层</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ResponseResult <span class="title function_">uploadImg</span><span class="params">(MultipartFile file)</span>;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="comment">//@ConfigurationProperties(prefix = &quot;oss&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">FileService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> ResponseResult <span class="title function_">uploadImg</span><span class="params">(MultipartFile file)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">originalFilename</span> <span class="operator">=</span> file.getOriginalFilename();</span><br><span class="line">        <span class="comment">//对原始文件名进行判断</span></span><br><span class="line"><span class="comment">//        if(!originalFilename.endsWith(&quot;.png&quot;))&#123;</span></span><br><span class="line"><span class="comment">//            throw new SystemException(AppHttpCodeEnum.FILE_TYPE_ERROR);</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line">        <span class="comment">//上传文件到OSS</span></span><br><span class="line">        <span class="keyword">assert</span> originalFilename != <span class="literal">null</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">filePath</span> <span class="operator">=</span> PathUtils.generateFilePath(originalFilename);</span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> uploadOss(file, filePath);</span><br><span class="line"></span><br><span class="line">        log.info(<span class="string">&quot;图片上传地址：&#123;&#125;&quot;</span>, url);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ResponseResult.okResult(url);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;oss.accessKey&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String accessKey;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;oss.secretKey&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String secretKey;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;oss.bucket&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String bucket;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String <span class="title function_">uploadOss</span><span class="params">(MultipartFile imgFile, String filePath)</span> &#123;</span><br><span class="line">        <span class="comment">//构造一个带指定 Region 对象的配置类</span></span><br><span class="line">        <span class="type">Configuration</span> <span class="variable">cfg</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Configuration</span>(Region.autoRegion());</span><br><span class="line">        <span class="comment">//...其他参数参考类注释</span></span><br><span class="line">        <span class="type">UploadManager</span> <span class="variable">uploadManager</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UploadManager</span>(cfg);</span><br><span class="line">        <span class="comment">//默认不指定key的情况下，以文件内容的hash值作为文件名</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> filePath;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> imgFile.getInputStream();</span><br><span class="line">            <span class="type">Auth</span> <span class="variable">auth</span> <span class="operator">=</span> Auth.create(accessKey, secretKey);</span><br><span class="line">            <span class="type">String</span> <span class="variable">upToken</span> <span class="operator">=</span> auth.uploadToken(bucket);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="type">Response</span> <span class="variable">response</span> <span class="operator">=</span> uploadManager.put(inputStream, key, upToken, <span class="literal">null</span>, <span class="literal">null</span>);</span><br><span class="line">                <span class="comment">//解析上传成功的结果</span></span><br><span class="line">                <span class="type">DefaultPutRet</span> <span class="variable">putRet</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Gson</span>().fromJson(response.bodyString(), DefaultPutRet.class);</span><br><span class="line">                System.out.println(putRet.key);</span><br><span class="line">                System.out.println(putRet.hash);</span><br><span class="line">                <span class="keyword">return</span> <span class="string">&quot;http://rm*******d-bkt.clouddn.com/&quot;</span> + key;<span class="comment">//换成你自己的测试域名</span></span><br><span class="line">            &#125; <span class="keyword">catch</span> (QiniuException ex) &#123;</span><br><span class="line">                <span class="type">Response</span> <span class="variable">r</span> <span class="operator">=</span> ex.response;</span><br><span class="line">                System.err.println(r.toString());</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    System.err.println(r.bodyString());</span><br><span class="line">                &#125; <span class="keyword">catch</span> (QiniuException ex2) &#123;</span><br><span class="line">                    <span class="comment">//ignore</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception ex) &#123;</span><br><span class="line">            <span class="comment">//ignore</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;www&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="4-收货地址管理"><a href="#4-收货地址管理" class="headerlink" title="4. 收货地址管理"></a>4. 收货地址管理</h1><h2 id="4-1-增加收货地址"><a href="#4-1-增加收货地址" class="headerlink" title="4.1 增加收货地址"></a>4.1 增加收货地址</h2><h3 id="4-1-1-需求分析"><a href="#4-1-1-需求分析" class="headerlink" title="4.1.1 需求分析"></a>4.1.1 需求分析</h3><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202212251959652.png" alt="image-20221225195948753"></p><ul><li><p>前端传入：<code>Address</code>实体</p></li><li><p>请求方式：<code>post(&quot;/address/add&quot;)</code></p></li></ul><h3 id="4-1-2-后端实现"><a href="#4-1-2-后端实现" class="headerlink" title="4.1.2 后端实现"></a>4.1.2 后端实现</h3><p>①控制层</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 新增收货地址</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> address</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;/add&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResponseResult <span class="title function_">addAddress</span><span class="params">(<span class="meta">@RequestBody</span> Address address)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> ResponseResult.okResult(addressService.addAddress(address));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>②业务层</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> ResponseResult <span class="title function_">addAddress</span><span class="params">(Address address)</span> &#123;</span><br><span class="line">    <span class="comment">//取出登录用户的id</span></span><br><span class="line">    <span class="type">Integer</span> <span class="variable">userId</span> <span class="operator">=</span>  SecurityUtils.getUserId();</span><br><span class="line">    LambdaQueryWrapper&lt;Address&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;&gt;();</span><br><span class="line">    queryWrapper.eq(Address::getUid, userId);</span><br><span class="line">    <span class="comment">//如果新增为第一条地址数据，则设为默认</span></span><br><span class="line">    <span class="keyword">if</span> (count(queryWrapper) &lt; <span class="number">1</span>) &#123;</span><br><span class="line">        address.setIsDefault(IS_DEFAULT);</span><br><span class="line">    &#125;</span><br><span class="line">    address.setUid(SecurityUtils.getUserId());</span><br><span class="line">    save(address);</span><br><span class="line">    <span class="keyword">return</span> ResponseResult.okResult();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-2-查询收货地址"><a href="#4-2-查询收货地址" class="headerlink" title="4.2 查询收货地址"></a>4.2 查询收货地址</h2><h3 id="4-2-1-需求分析"><a href="#4-2-1-需求分析" class="headerlink" title="4.2.1 需求分析"></a>4.2.1 需求分析</h3><ul><li>前端传入分页参数：@RequestParam Integer pageNum, @RequestParam Integer pageSize</li><li>请求地址：<code>get(&quot;/address/page&quot;)</code></li></ul><h3 id="4-2-2-后端实现"><a href="#4-2-2-后端实现" class="headerlink" title="4.2.2 后端实现"></a>4.2.2 后端实现</h3><p>① 控制层</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 分页查询用户收货地址数据</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> pageNum</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> pageSize</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">GetMapping(<span class="string">&quot;/page&quot;</span>)</span><br><span class="line">ublic ResponseResult <span class="title function_">selectAllAddress</span><span class="params">(<span class="meta">@RequestParam</span> Integer pageNum, <span class="meta">@RequestParam</span> Integer pageSize)</span> &#123;</span><br><span class="line">   <span class="keyword">return</span> ResponseResult.okResult(addressService.userAddressList(pageNum, pageSize));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>② 业务层，前期已经配置好MP分页插件。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> ResponseResult <span class="title function_">userAddressList</span><span class="params">(Integer pageNum, Integer pageSize)</span> &#123;</span><br><span class="line">    <span class="comment">//取出登录用户的id</span></span><br><span class="line">    <span class="type">Integer</span> <span class="variable">userId</span> <span class="operator">=</span> SecurityUtils.getUserId();</span><br><span class="line">    <span class="keyword">if</span> (Objects.isNull(userId)) &#123;</span><br><span class="line">        <span class="comment">//没有携带token</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">SystemException</span>(AppHttpCodeEnum.NO_OPERATOR_AUTH);</span><br><span class="line">    &#125;</span><br><span class="line">    LambdaQueryWrapper&lt;Address&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;&gt;();</span><br><span class="line">    queryWrapper.eq(Address::getUid, userId);</span><br><span class="line"></span><br><span class="line">    Page&lt;Address&gt; page = page(<span class="keyword">new</span> <span class="title class_">Page</span>&lt;&gt;(pageNum, pageSize), queryWrapper);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> ResponseResult.okResult(page);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-3-编辑收货地址"><a href="#4-3-编辑收货地址" class="headerlink" title="4.3 编辑收货地址"></a>4.3 编辑收货地址</h2><h3 id="4-3-1-需求分析"><a href="#4-3-1-需求分析" class="headerlink" title="4.3.1 需求分析"></a>4.3.1 需求分析</h3><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202212252000973.png" alt="image-20221225200029514"></p><ul><li>前端传入<code>Address</code>实体</li><li>请求地址：<code>post(&quot;/address/update&quot;)</code></li></ul><h3 id="4-3-2-后端实现"><a href="#4-3-2-后端实现" class="headerlink" title="4.3.2 后端实现"></a>4.3.2 后端实现</h3><p>①控制层</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * 更新地址</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> address</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> <span class="meta">@PostMapping(&quot;/update&quot;)</span></span><br><span class="line"> <span class="keyword">public</span> ResponseResult <span class="title function_">update</span><span class="params">(<span class="meta">@RequestBody</span> Address address)</span> &#123;</span><br><span class="line">     <span class="keyword">return</span> ResponseResult.okResult(addressService.updateAddress(address));</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>②业务层</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> ResponseResult <span class="title function_">updateAddress</span><span class="params">(Address address)</span> &#123;</span><br><span class="line">    LambdaQueryWrapper&lt;Address&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;&gt;();</span><br><span class="line">    queryWrapper.eq(Address::getAid, address.getAid());</span><br><span class="line">    update(address, queryWrapper);</span><br><span class="line">    <span class="keyword">return</span> ResponseResult.okResult();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-4-删除收货地址"><a href="#4-4-删除收货地址" class="headerlink" title="4.4 删除收货地址"></a>4.4 删除收货地址</h2><h3 id="4-4-1-需求分析"><a href="#4-4-1-需求分析" class="headerlink" title="4.4.1 需求分析"></a>4.4.1 需求分析</h3><p>前端传入地址id，后端根据地址id删除</p><ul><li>请求地址：<code>delete(&quot;/address/&#123;aid&#125;&quot;)</code></li></ul><h3 id="4-4-2-后端实现"><a href="#4-4-2-后端实现" class="headerlink" title="4.4.2 后端实现"></a>4.4.2 后端实现</h3><p>①控制层直接调用构造器删除</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 删除地址数据</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> aid</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@DeleteMapping(&quot;/&#123;aid&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResponseResult <span class="title function_">delete</span><span class="params">(<span class="meta">@PathVariable</span> Integer aid)</span> &#123;</span><br><span class="line">    LambdaQueryWrapper&lt;Address&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;&gt;();</span><br><span class="line">    queryWrapper.eq(Address::getAid, aid);</span><br><span class="line">    <span class="keyword">return</span> ResponseResult.okResult(addressService.remove(queryWrapper));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-5-收货地址设为默认"><a href="#4-5-收货地址设为默认" class="headerlink" title="4.5 收货地址设为默认"></a>4.5 收货地址设为默认</h2><h3 id="4-5-1-需求分析"><a href="#4-5-1-需求分析" class="headerlink" title="4.5.1 需求分析"></a>4.5.1 需求分析</h3><p>当购买商品准备结算时，会有选择收货地址选项，设置默认收货地址下次购物直接忽略选择地址这一选项方便用户操作，优化用户体验。</p><ul><li>前端传入数据格式为<code>Address实体类</code></li><li>请求接口：<code>post(&quot;/address/setDefault&quot;)</code></li></ul><h3 id="4-5-2-后端实现"><a href="#4-5-2-后端实现" class="headerlink" title="4.5.2 后端实现"></a>4.5.2 后端实现</h3><p>①控制层</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 设为默认</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> address</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;/setDefault&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResponseResult <span class="title function_">setDefault</span><span class="params">(<span class="meta">@RequestBody</span> Address address)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> ResponseResult.okResult(addressService.setDefaultAddress(address));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>②业务层</p><p>此处需要多次操作数据库，加个<code>@Transactional</code>注解，自动回滚事务，保证数据库执行此方法的前后一致性。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="meta">@Transactional</span></span><br><span class="line"><span class="keyword">public</span> ResponseResult <span class="title function_">setDefaultAddress</span><span class="params">(Address address)</span> &#123;</span><br><span class="line">    LambdaQueryWrapper&lt;Address&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;&gt;();</span><br><span class="line">    <span class="comment">//地址默认改为非默认</span></span><br><span class="line">    <span class="keyword">if</span> (address.getIsDefault().equals(NOT_DEFAULT)) &#123;</span><br><span class="line">        address.setIsDefault(NOT_DEFAULT);</span><br><span class="line">        queryWrapper.eq(Address::getAid, address.getAid());</span><br><span class="line">        update(address, queryWrapper);</span><br><span class="line">        <span class="keyword">return</span> ResponseResult.okResult();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//先全部改为默认状态</span></span><br><span class="line">    queryWrapper.eq(Address::getUid, SecurityUtils.getUserId());</span><br><span class="line">    <span class="comment">//用户的全部地址数据</span></span><br><span class="line">    List&lt;Address&gt; addressList = list(queryWrapper);</span><br><span class="line">    <span class="comment">//过滤出默认地址,理论为一个</span></span><br><span class="line">    List&lt;Address&gt; collect = addressList.stream().filter(a -&gt;</span><br><span class="line">            a.getIsDefault().equals(IS_DEFAULT)</span><br><span class="line">    ).collect(Collectors.toList());</span><br><span class="line">    collect.forEach(a -&gt; &#123;</span><br><span class="line">        a.setIsDefault(NOT_DEFAULT);</span><br><span class="line">        queryWrapper.eq(Address::getAid, a.getAid());</span><br><span class="line">        update(a, queryWrapper);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">//最后将选择修改的非默认地址改为默认</span></span><br><span class="line">    LambdaQueryWrapper&lt;Address&gt; queryWrapper2 = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;&gt;();</span><br><span class="line">    queryWrapper2.eq(Address::getAid, address.getAid());</span><br><span class="line">    address.setIsDefault(IS_DEFAULT);</span><br><span class="line">    update(address, queryWrapper2);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> ResponseResult.okResult();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="5-首页完善"><a href="#5-首页完善" class="headerlink" title="5. 首页完善"></a>5. 首页完善</h1><h2 id="5-1-添加今日热销栏"><a href="#5-1-添加今日热销栏" class="headerlink" title="5.1 添加今日热销栏"></a>5.1 添加今日热销栏</h2><h3 id="5-1-1-需求分析"><a href="#5-1-1-需求分析" class="headerlink" title="5.1.1 需求分析"></a>5.1.1 需求分析</h3><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202212252001034.png" alt="image-20221225200120607"></p><ul><li>前端负责渲染，后端只需根据商品表的修改时间字段进行查找，并制定查找条数。</li></ul><h3 id="5-1-2-后端实现"><a href="#5-1-2-后端实现" class="headerlink" title="5.1.2 后端实现"></a>5.1.2 后端实现</h3><p>①控制层</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 今日热销</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> pageNum</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> pageSize</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/today&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResponseResult <span class="title function_">todayGood</span><span class="params">(<span class="meta">@RequestParam</span> Integer pageNum,</span></span><br><span class="line"><span class="params">                                <span class="meta">@RequestParam</span> Integer pageSize)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> ResponseResult.okResult(goodsService.todayGoodList(pageNum, pageSize));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>②业务层</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> Page&lt;Goods&gt; <span class="title function_">todayGoodList</span><span class="params">(Integer pageNum, Integer pageSize)</span> &#123;</span><br><span class="line">    <span class="comment">//查询redis</span></span><br><span class="line">    Page&lt;Goods&gt; todayGoodsList = redisCache.getCacheObject(TODAY_GOODS_KEY + pageNum);</span><br><span class="line">    <span class="keyword">if</span> (todayGoodsList == <span class="literal">null</span>) &#123;</span><br><span class="line">        LambdaQueryWrapper&lt;Goods&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">//按创建时间倒序排序</span></span><br><span class="line">        queryWrapper.orderByDesc(Goods::getCreatedTime);</span><br><span class="line">        Page&lt;Goods&gt; goodsPage = page(<span class="keyword">new</span> <span class="title class_">Page</span>&lt;&gt;(pageNum, pageSize), queryWrapper);</span><br><span class="line">        <span class="comment">//TODO 存入redis</span></span><br><span class="line">        redisCache.setCacheObject(TODAY_GOODS_KEY + pageNum, goodsPage, TODAY_GOODS_TTL, TimeUnit.MINUTES);</span><br><span class="line">        <span class="keyword">return</span> goodsPage;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> todayGoodsList;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="5-2-商品展示页"><a href="#5-2-商品展示页" class="headerlink" title="5.2 商品展示页"></a>5.2 商品展示页</h2><h3 id="5-2-1-需求分析"><a href="#5-2-1-需求分析" class="headerlink" title="5.2.1 需求分析"></a>5.2.1 需求分析</h3><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202212252001722.png" alt="image-20221225200142140"></p><p>分页查询出商品及和，前端负责渲染</p><h3 id="5-2-2-后端实现"><a href="#5-2-2-后端实现" class="headerlink" title="5.2.2 后端实现"></a>5.2.2 后端实现</h3><p>①控制层</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 分页查询所有商品【暂行方案】</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> pageNum</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> pageSize</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/list&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResponseResult <span class="title function_">selectAll</span><span class="params">(<span class="meta">@RequestParam</span> Integer pageNum, <span class="meta">@RequestParam</span> Integer pageSize)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> ResponseResult.okResult(goodsService.goodList(pageNum, pageSize));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>②业务层</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> ResponseResult <span class="title function_">goodList</span><span class="params">(Integer pageNum, Integer pageSize)</span> &#123;</span><br><span class="line">    LambdaQueryWrapper&lt;Goods&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;&gt;();</span><br><span class="line">    <span class="comment">//按优先级排序</span></span><br><span class="line">    queryWrapper.orderByDesc(Goods::getPriority);</span><br><span class="line">    Page&lt;Goods&gt; page = page(<span class="keyword">new</span> <span class="title class_">Page</span>&lt;&gt;(pageNum, pageSize));</span><br><span class="line">    <span class="keyword">return</span> ResponseResult.okResult(page);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="5-3-商品搜索"><a href="#5-3-商品搜索" class="headerlink" title="5.3 商品搜索"></a>5.3 商品搜索</h2><h3 id="5-3-1-需求分析"><a href="#5-3-1-需求分析" class="headerlink" title="5.3.1 需求分析"></a>5.3.1 需求分析</h3><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202212252002286.png" alt="image-20221225200217850"></p><p>前端在输入框输入商品名称，后端根据输入名称进行模糊查询并返回商品集合。例如上图输入“华硕”搜索结果。</p><h3 id="5-3-2-后端实现"><a href="#5-3-2-后端实现" class="headerlink" title="5.3.2 后端实现"></a>5.3.2 后端实现</h3><p>①控制层</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 根据商品名模糊搜索,并分页</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> title 商品名</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> ResponseResult</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/search&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResponseResult <span class="title function_">searchGood</span><span class="params">(<span class="meta">@RequestParam</span> Integer pageNum,</span></span><br><span class="line"><span class="params">                                 <span class="meta">@RequestParam</span> Integer pageSize,</span></span><br><span class="line"><span class="params">                                 <span class="meta">@RequestParam</span> String title)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> ResponseResult.okResult(goodsService.searchGoodListByTitle(pageNum, pageSize, title));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>②业务层</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> Page&lt;Goods&gt; <span class="title function_">searchGoodListByTitle</span><span class="params">(Integer pageNum, Integer pageSize, String title)</span> &#123;</span><br><span class="line">    LambdaQueryWrapper&lt;Goods&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;&gt;();</span><br><span class="line">    queryWrapper.like(Goods::getTitle, title);</span><br><span class="line">    <span class="comment">//按优先级排序</span></span><br><span class="line">    queryWrapper.orderByDesc(Goods::getPriority);</span><br><span class="line">    Page&lt;Goods&gt; goodsPage = page(<span class="keyword">new</span> <span class="title class_">Page</span>&lt;&gt;(pageNum, pageSize), queryWrapper);</span><br><span class="line">    <span class="keyword">return</span> goodsPage;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="5-4-商品收藏"><a href="#5-4-商品收藏" class="headerlink" title="5.4 商品收藏"></a>5.4 商品收藏</h2><h3 id="5-4-1-需求分析"><a href="#5-4-1-需求分析" class="headerlink" title="5.4.1 需求分析"></a>5.4.1 需求分析</h3><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202212252003694.png" alt="image-20221225200310363"></p><p>点击商品页加入收藏按钮添加到我的收藏中。</p><h3 id="5-4-2-后端实现"><a href="#5-4-2-后端实现" class="headerlink" title="5.4.2 后端实现"></a>5.4.2 后端实现</h3><p>①控制层</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 添加商品收藏</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> gid</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;/add&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResponseResult <span class="title function_">add</span><span class="params">(<span class="meta">@RequestBody</span> Integer gid)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> ResponseResult.okResult(favoritesService.addFavorites(gid));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>②业务层</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">addFavorites</span><span class="params">(Integer gid)</span> &#123;</span><br><span class="line">    <span class="comment">//取出登录用户的id</span></span><br><span class="line">    <span class="type">Integer</span> <span class="variable">userId</span> <span class="operator">=</span> SecurityUtils.getUserId();</span><br><span class="line">    <span class="type">Favorites</span> <span class="variable">favorites</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Favorites</span>();</span><br><span class="line">    favorites.setGid(gid);</span><br><span class="line">    favorites.setUid(userId);</span><br><span class="line">    <span class="type">boolean</span> <span class="variable">saveOrUpdate</span> <span class="operator">=</span> saveOrUpdate(favorites);</span><br><span class="line">    <span class="keyword">return</span> saveOrUpdate;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="6-订单管理"><a href="#6-订单管理" class="headerlink" title="6. 订单管理"></a>6. 订单管理</h1><h2 id="6-1-查询订单列表"><a href="#6-1-查询订单列表" class="headerlink" title="6.1 查询订单列表"></a>6.1 查询订单列表</h2><h3 id="6-1-1-需求分析"><a href="#6-1-1-需求分析" class="headerlink" title="6.1.1 需求分析"></a>6.1.1 需求分析</h3><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202212252003609.png" alt="image-20221225200336242"></p><p>查询出用户的所有订单，并根据订单的oid关联查询订单包含的商品集合。</p><p>此时需要一个实体类封装传输数据既包含订单信息，也包含订单商品集合信息。</p><h3 id="6-1-2-后端实现"><a href="#6-1-2-后端实现" class="headerlink" title="6.1.2 后端实现"></a>6.1.2 后端实现</h3><p>①新建<code>OrderGoodVo</code>实体类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OrderGoodVo</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer oid;</span><br><span class="line">    <span class="comment">//归属于那个用户</span></span><br><span class="line">    <span class="keyword">private</span> Integer uid;</span><br><span class="line">    <span class="comment">//收货人</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="comment">//下单时间</span></span><br><span class="line">    <span class="keyword">private</span> Date orderTime;</span><br><span class="line">    <span class="comment">//是否发货</span></span><br><span class="line">    <span class="keyword">private</span> Integer status;</span><br><span class="line">    <span class="comment">//集合</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;OrderItem&gt; orderItemList;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>②控制层</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 分页查询当前登录用户的所有订单</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> pageNum pageNum</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> pageSize pageSize</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> ResponseResult</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/list&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResponseResult <span class="title function_">selectAll</span><span class="params">(<span class="meta">@RequestParam</span> Integer pageNum, <span class="meta">@RequestParam</span> Integer pageSize)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> ResponseResult.okResult(orderService.userOrderList(pageNum, pageSize));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>③业务层</p><p>前端需要分页展示，所以还得封装<code>Page&lt;OrderGoodVo&gt;</code>分页对象</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> ResponseResult <span class="title function_">userOrderList</span><span class="params">(Integer pageNum, Integer pageSize)</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//取出登录用户的id</span></span><br><span class="line">    <span class="type">Integer</span> <span class="variable">userId</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        userId = SecurityUtils.getUserId();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        <span class="comment">//未登录</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">SystemException</span>(NEED_LOGIN);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (Objects.isNull(userId)) &#123;</span><br><span class="line">        <span class="comment">//没有携带token</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">SystemException</span>(AppHttpCodeEnum.NO_OPERATOR_AUTH);</span><br><span class="line">    &#125;</span><br><span class="line">    LambdaQueryWrapper&lt;Order&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;&gt;();</span><br><span class="line">    queryWrapper.eq(Order::getUid, userId);</span><br><span class="line">    Page&lt;Order&gt; pageOrder = <span class="keyword">new</span> <span class="title class_">Page</span>&lt;&gt;(pageNum, pageSize);</span><br><span class="line"></span><br><span class="line">    Page&lt;Order&gt; page = page(pageOrder, queryWrapper);</span><br><span class="line"></span><br><span class="line">    List&lt;Order&gt; orderList = page.getRecords();</span><br><span class="line">    <span class="comment">//TODO 将订单包含的商品order_item封装进order</span></span><br><span class="line">    List&lt;OrderGoodVo&gt; orderGoodVoList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    orderList.forEach(o -&gt; &#123;</span><br><span class="line">        <span class="comment">//订单od</span></span><br><span class="line">        <span class="type">Integer</span> <span class="variable">oid</span> <span class="operator">=</span> o.getOid();</span><br><span class="line">        <span class="comment">//根据订单id查询order_item集合</span></span><br><span class="line">        LambdaQueryWrapper&lt;OrderItem&gt; queryWrapper2 = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;&gt;();</span><br><span class="line">        queryWrapper2.eq(OrderItem::getOid, oid);</span><br><span class="line">        List&lt;OrderItem&gt; orderItemList = orderItemService.list(queryWrapper2);</span><br><span class="line">        <span class="type">OrderGoodVo</span> <span class="variable">orderGoodVo</span> <span class="operator">=</span> BeanCopyUtils.copyBean(o, OrderGoodVo.class);</span><br><span class="line">        orderGoodVo.setOrderItemList(orderItemList);</span><br><span class="line">        orderGoodVoList.add(orderGoodVo);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    Page&lt;OrderGoodVo&gt; orderGoodVoPage = <span class="keyword">new</span> <span class="title class_">Page</span>&lt;&gt;();</span><br><span class="line">    orderGoodVoPage.setCurrent(page.getCurrent());</span><br><span class="line">    orderGoodVoPage.setPages(page.getPages());</span><br><span class="line">    orderGoodVoPage.setSize(page.getSize());</span><br><span class="line">    orderGoodVoPage.setTotal(page.getTotal());</span><br><span class="line">    orderGoodVoPage.setRecords(orderGoodVoList);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> ResponseResult.okResult(orderGoodVoPage);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="6-2-查询订单商品详情"><a href="#6-2-查询订单商品详情" class="headerlink" title="6.2 查询订单商品详情"></a>6.2 查询订单商品详情</h2><h3 id="6-2-1-需求分析"><a href="#6-2-1-需求分析" class="headerlink" title="6.2.1 需求分析"></a>6.2.1 需求分析</h3><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202212252004763.png" alt="image-20221225200419387"></p><p>点击订单商品的查看详情按钮，跳转到订单详情页面，前端根据订单商品的gid查询并显示。</p><h3 id="6-2-2-后端实现"><a href="#6-2-2-后端实现" class="headerlink" title="6.2.2 后端实现"></a>6.2.2 后端实现</h3><p>①业务层</p><p>在商品控制层编写</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 根据gid查询商品</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> gid</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;&#123;gid&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResponseResult <span class="title function_">getGoods</span><span class="params">(<span class="meta">@PathVariable</span> Integer gid)</span> &#123;</span><br><span class="line">    LambdaQueryWrapper&lt;Goods&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;&gt;();</span><br><span class="line">    queryWrapper.eq(Goods::getGid, gid);</span><br><span class="line">    <span class="keyword">return</span> ResponseResult.okResult(goodsService.getOne(queryWrapper));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="6-3-确认收货"><a href="#6-3-确认收货" class="headerlink" title="6.3 确认收货"></a>6.3 确认收货</h2><h3 id="6-3-1-需求分析"><a href="#6-3-1-需求分析" class="headerlink" title="6.3.1 需求分析"></a>6.3.1 需求分析</h3><p>当订单处于已支付状态，订单每个商品均显示确认收货按钮，用户点击后先删除订单关联的此商品，若订单没有再关联的商品则把订单删除或者设置状态为已签收。</p><h3 id="6-3-2-后端实现"><a href="#6-3-2-后端实现" class="headerlink" title="6.3.2 后端实现"></a>6.3.2 后端实现</h3><p>①控制层</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 订单中的商品已签收</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> orderItem</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;/receive&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResponseResult <span class="title function_">remove</span><span class="params">(<span class="meta">@RequestBody</span> OrderItem orderItem)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> ResponseResult.okResult(orderItemService.delOrderItem(orderItem));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>②业务层</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="meta">@Transactional</span></span><br><span class="line"><span class="keyword">public</span> ResponseResult <span class="title function_">delOrderItem</span><span class="params">(OrderItem orderItem)</span> &#123;</span><br><span class="line">    log.info(<span class="string">&quot;订单商品==&gt;&#123;&#125;&quot;</span>,orderItem);</span><br><span class="line">    LambdaQueryWrapper&lt;OrderItem&gt; orderItemLambdaQueryWrapper = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;&gt;();</span><br><span class="line">    orderItemLambdaQueryWrapper.eq(OrderItem::getGid, orderItem.getGid());</span><br><span class="line">    orderItemLambdaQueryWrapper.eq(OrderItem::getOid, orderItem.getOid());</span><br><span class="line">    orderItemLambdaQueryWrapper.eq(OrderItem::getCreatedUser, SecurityUtils.getUserId());</span><br><span class="line">    <span class="type">boolean</span> <span class="variable">remove</span> <span class="operator">=</span> remove(orderItemLambdaQueryWrapper);</span><br><span class="line">    <span class="comment">//删除了订单中的商品，判断订单是否还有商品，没有则删除</span></span><br><span class="line">    <span class="keyword">if</span> (remove) &#123;</span><br><span class="line">        LambdaQueryWrapper&lt;OrderItem&gt; wrapper = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;&gt;();</span><br><span class="line">        wrapper.eq(OrderItem::getOid, orderItem.getOid());</span><br><span class="line">        wrapper.eq(OrderItem::getCreatedUser, SecurityUtils.getUserId());</span><br><span class="line">        List&lt;OrderItem&gt; orderList = list(wrapper);</span><br><span class="line">        <span class="comment">//此订单已经没有商品</span></span><br><span class="line">        <span class="keyword">if</span> (orderList.size() == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">//删除订单</span></span><br><span class="line">            LambdaQueryWrapper&lt;Order&gt; orderLambdaQueryWrapper = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;&gt;();</span><br><span class="line">            orderLambdaQueryWrapper.eq(Order::getOid, orderItem.getOid());</span><br><span class="line">            orderLambdaQueryWrapper.eq(Order::getUid, SecurityUtils.getUserId());</span><br><span class="line">            <span class="type">boolean</span> <span class="variable">remove2</span> <span class="operator">=</span> orderService.remove(orderLambdaQueryWrapper);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ResponseResult.okResult();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="7-购物车管理"><a href="#7-购物车管理" class="headerlink" title="7. 购物车管理"></a>7. 购物车管理</h1><h2 id="7-1-添加购物车"><a href="#7-1-添加购物车" class="headerlink" title="7.1 添加购物车"></a>7.1 添加购物车</h2><h3 id="7-1-1-需求分析"><a href="#7-1-1-需求分析" class="headerlink" title="7.1.1 需求分析"></a>7.1.1 需求分析</h3><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202212252006374.png" alt="image-20221225200644888"></p><p>点击商品会跳转到商品详情页，当用户需要选择加入购物车时，同样可以选择加入购物车的数量。</p><p>如果购物车已经有了该商品，则在此数据的基础之上进行更新操作。</p><ul><li>前端传入数据格式：<code>&#123;gid: 100000391, num: 3&#125;</code></li><li>请求接口：<code>post(&quot;/cart/add&quot;)</code></li></ul><h3 id="7-1-2-后端实现"><a href="#7-1-2-后端实现" class="headerlink" title="7.1.2 后端实现"></a>7.1.2 后端实现</h3><p>①控制层</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 添加购物车</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> cart</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;/add&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResponseResult <span class="title function_">addCart</span><span class="params">(<span class="meta">@RequestBody</span> Cart cart)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> ResponseResult.okResult(cartService.addCartByUid(cart));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>②业务层</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> ResponseResult <span class="title function_">addCartByUid</span><span class="params">(Cart cart)</span> &#123;</span><br><span class="line">    <span class="comment">//取出登录用户的id</span></span><br><span class="line">    <span class="type">Integer</span> <span class="variable">userId</span> <span class="operator">=</span> SecurityUtils.getUserId();</span><br><span class="line">    cart.setUid(userId);</span><br><span class="line">    <span class="keyword">if</span>(cart.getNum()==<span class="number">0</span>||cart.getNum()==<span class="literal">null</span>)&#123;</span><br><span class="line">        cart.setNum(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//如果购物车有了此商品，就更新</span></span><br><span class="line">    LambdaQueryWrapper&lt;Cart&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;&gt;();</span><br><span class="line">    queryWrapper.eq(Cart::getUid, userId);</span><br><span class="line">    queryWrapper.eq(Cart::getGid, cart.getGid());</span><br><span class="line">    log.info(<span class="string">&quot;待加入购物车数据==&gt;&#123;&#125;&quot;</span>, cart);</span><br><span class="line">    saveOrUpdate(cart,queryWrapper);</span><br><span class="line">    <span class="keyword">return</span> ResponseResult.okResult();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="7-2-查询购物车"><a href="#7-2-查询购物车" class="headerlink" title="7.2 查询购物车"></a>7.2 查询购物车</h2><h3 id="7-2-1-需求分析"><a href="#7-2-1-需求分析" class="headerlink" title="7.2.1 需求分析"></a>7.2.1 需求分析</h3><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202212252007541.png" alt="image-20221225200719190"></p><p>跟据当前登录用户查询出其购物车数据即可。</p><ul><li>请求接口：<code>get(&quot;/cart/list&quot;)</code>，参数为用户<code>uid</code></li></ul><h3 id="7-2-2-后端实现"><a href="#7-2-2-后端实现" class="headerlink" title="7.2.2 后端实现"></a>7.2.2 后端实现</h3><p>①控制层</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 用户购物车数据</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> uid</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/list&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResponseResult <span class="title function_">userCart</span><span class="params">(<span class="meta">@RequestParam</span> Integer uid)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> ResponseResult.okResult(cartService.userCartGoodList(uid));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>②业务层</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> List&lt;CartGoodsVo&gt; <span class="title function_">userCartGoodList</span><span class="params">(Integer uid)</span> &#123;</span><br><span class="line">    <span class="comment">//先根据用户id查询购物车数据</span></span><br><span class="line">    LambdaQueryWrapper&lt;Cart&gt; cartLambdaQueryWrapper = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;&gt;();</span><br><span class="line">    cartLambdaQueryWrapper.eq(Cart::getUid, uid);</span><br><span class="line">    cartLambdaQueryWrapper.orderByDesc(Cart::getCreatedTime);</span><br><span class="line">    List&lt;Cart&gt; cartList = list(cartLambdaQueryWrapper);</span><br><span class="line">    <span class="comment">//封装VO</span></span><br><span class="line">    List&lt;CartGoodsVo&gt; cartGoodsVoList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    cartList.forEach(c -&gt; &#123;</span><br><span class="line">        <span class="type">CartGoodsVo</span> <span class="variable">cartGoodsVo</span> <span class="operator">=</span> BeanCopyUtils.copyBean(c, CartGoodsVo.class);</span><br><span class="line">        <span class="comment">//商品id</span></span><br><span class="line">        <span class="type">Integer</span> <span class="variable">gid</span> <span class="operator">=</span> c.getGid();</span><br><span class="line">        LambdaQueryWrapper&lt;Goods&gt; goodsLambdaQueryWrapper = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;&gt;();</span><br><span class="line">        goodsLambdaQueryWrapper.eq(Goods::getGid, gid);</span><br><span class="line">        <span class="comment">// TODO 待添加此商品是否被下架逻辑</span></span><br><span class="line">        <span class="type">Goods</span> <span class="variable">goods</span> <span class="operator">=</span> goodsService.getOne(goodsLambdaQueryWrapper);</span><br><span class="line">        cartGoodsVo.setGoods(goods);</span><br><span class="line">        cartGoodsVoList.add(cartGoodsVo);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> cartGoodsVoList;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="7-3-删除购物车商品"><a href="#7-3-删除购物车商品" class="headerlink" title="7.3 删除购物车商品"></a>7.3 删除购物车商品</h2><h3 id="7-3-1-需求分析"><a href="#7-3-1-需求分析" class="headerlink" title="7.3.1 需求分析"></a>7.3.1 需求分析</h3><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202212252009639.gif" alt="gif-110"></p><p>前端点击删除按钮，购物车数据就会删除。</p><ul><li>请求接口：<code>delete(&quot;/cart/&quot;)</code>，请求参数为购物车<code>cid</code></li></ul><h3 id="7-3-2-后端实现"><a href="#7-3-2-后端实现" class="headerlink" title="7.3.2 后端实现"></a>7.3.2 后端实现</h3><p>①控制层</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 根据购物车id删除购物车</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> cid</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@DeleteMapping(&quot;/&#123;cid&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResponseResult <span class="title function_">deleteCart</span><span class="params">(<span class="meta">@PathVariable</span> Integer cid)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> ResponseResult.okResult(cartService.removeCartGoodByCid(cid));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>②业务层</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">removeCartGoodByCid</span><span class="params">(Integer cid)</span> &#123;</span><br><span class="line">    LambdaQueryWrapper&lt;Cart&gt; cartLambdaQueryWrapper = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;&gt;();</span><br><span class="line">    cartLambdaQueryWrapper.eq(Cart::getCid, cid);</span><br><span class="line">    <span class="type">boolean</span> <span class="variable">remove</span> <span class="operator">=</span> remove(cartLambdaQueryWrapper);</span><br><span class="line">    <span class="keyword">return</span> remove;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="8-整合支付宝支付-沙箱"><a href="#8-整合支付宝支付-沙箱" class="headerlink" title="8. 整合支付宝支付(沙箱)"></a>8. 整合支付宝支付(沙箱)</h1><p>只是使用支付宝支付api进行交易模拟，需前往支付宝开发平台进行沙箱应用创建。</p><p>支付宝开发平台地址地址==&gt;<a href="https://open.alipay.com/develop/sandbox/app">https://open.alipay.com/develop/sandbox/app</a></p><p>使用到的依赖：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--lombok--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--mysql数据库驱动--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--alipay--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alipay.sdk<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>alipay-easysdk<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--mybatisPlus依赖--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.hutool<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hutool-all<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.8.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>需要的实体：<code>Alipay</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AliPay</span> &#123;</span><br><span class="line">    <span class="comment">//订单号</span></span><br><span class="line">    <span class="keyword">private</span> String traceNo;</span><br><span class="line">    <span class="comment">//金额</span></span><br><span class="line">    <span class="keyword">private</span> String totalAmount;</span><br><span class="line">    <span class="keyword">private</span> String subject;</span><br><span class="line"><span class="comment">//    private String alipayTraceNo;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>配置文件yml配置：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">alipay:</span></span><br><span class="line">  <span class="attr">appId:</span> <span class="number">202100</span><span class="string">*******</span></span><br><span class="line">  <span class="attr">appPrivateKey:</span> <span class="string">**************</span></span><br><span class="line">  <span class="attr">alipayPublicKey:</span> <span class="string">*********</span></span><br><span class="line">  <span class="attr">notifyUrl:</span> </span><br></pre></td></tr></table></figure><p>查看沙箱应用id、公钥和私钥补全配置。</p><p>alipay配置类用来加载配置信息：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;alipay&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AliPayConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">GATEWAY_URL</span> <span class="operator">=</span><span class="string">&quot;https://openapi.alipaydev.com/gateway.do&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">FORMAT</span> <span class="operator">=</span><span class="string">&quot;JSON&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">CHARSET</span> <span class="operator">=</span><span class="string">&quot;utf-8&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">SIGN_TYPE</span> <span class="operator">=</span><span class="string">&quot;RSA2&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String appId;</span><br><span class="line">    <span class="keyword">private</span> String appPrivateKey;</span><br><span class="line">    <span class="keyword">private</span> String alipayPublicKey;</span><br><span class="line">    <span class="keyword">private</span> String notifyUrl;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostConstruct</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 设置参数（全局只需设置一次）</span></span><br><span class="line">        <span class="type">Config</span> <span class="variable">config</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Config</span>();</span><br><span class="line">        config.protocol = <span class="string">&quot;https&quot;</span>;</span><br><span class="line">        config.gatewayHost = <span class="string">&quot;openapi.alipaydev.com&quot;</span>;</span><br><span class="line">        config.signType = SIGN_TYPE;</span><br><span class="line">        config.appId = <span class="built_in">this</span>.appId;</span><br><span class="line">        config.merchantPrivateKey = <span class="built_in">this</span>.appPrivateKey;</span><br><span class="line">        config.alipayPublicKey = <span class="built_in">this</span>.alipayPublicKey;</span><br><span class="line">        config.notifyUrl = <span class="built_in">this</span>.notifyUrl;</span><br><span class="line">        Factory.setOptions(config);</span><br><span class="line">        System.out.println(JSONUtil.toJsonStr(config));</span><br><span class="line">        log.info(<span class="string">&quot;=======支付宝SDK初始化成功=======&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>控制层写一个发起支付接口：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * http://localhost:7778/alipay/pay?subject=15689585674&amp;traceNo=1024253&amp;totalAmount=3333</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> aliPay</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/pay&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">pay</span><span class="params">(AliPay aliPay)</span> &#123;</span><br><span class="line">    AlipayTradePagePayResponse response;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//  发起API调用（以创建当面付收款二维码为例）</span></span><br><span class="line">        response = Factory.Payment.Page()</span><br><span class="line">                .pay(URLEncoder.encode(aliPay.getSubject(), <span class="string">&quot;UTF-8&quot;</span>), aliPay.getTraceNo(), aliPay.getTotalAmount(), <span class="string">&quot;&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        System.err.println(<span class="string">&quot;调用遭遇异常，原因：&quot;</span> + e.getMessage());</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e.getMessage(), e);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> response.getBody();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>打开谷歌浏览器无痕窗口访问写好的支付地址自动跳转到支付页面：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202212222021178.png" alt="image-20221222202104500"></p><p>此时就可以模拟支付款了，账号密码在支付宝开发平台皆可查到。</p><p>那支付成功后，就必然有一个回调，但支付宝平台是公网，我们本地项目它回调不过来，所以暂且需要把本地端口暴露到公网，使用内网穿透工具==&gt;<a href="https://natapp.cn/">https://natapp.cn/</a></p><p>注册登录可申请免费内网穿透，指定端口号后拿到官网给的密钥，下载内网穿透工具配置好密钥即可把端口暴露到公网上。这个公网就是填写配置类yml中notifyUrl的选项。</p><p>支付宝回调接口：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Resource</span></span><br><span class="line"><span class="keyword">private</span> OrderMapper orderMapper;</span><br><span class="line"></span><br><span class="line"><span class="meta">@PostMapping(&quot;/notify&quot;)</span>  <span class="comment">// 必须是POST接口</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">payNotify</span><span class="params">(HttpServletRequest request)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="keyword">if</span> (request.getParameter(<span class="string">&quot;trade_status&quot;</span>).equals(<span class="string">&quot;TRADE_SUCCESS&quot;</span>)) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;=========支付宝异步回调========&quot;</span>);</span><br><span class="line"></span><br><span class="line">        Map&lt;String, String&gt; params = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        Map&lt;String, String[]&gt; requestParams = request.getParameterMap();</span><br><span class="line">        <span class="keyword">for</span> (String name : requestParams.keySet()) &#123;</span><br><span class="line">            params.put(name, request.getParameter(name));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">tradeNo</span> <span class="operator">=</span> params.get(<span class="string">&quot;out_trade_no&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">payTime</span> <span class="operator">=</span> params.get(<span class="string">&quot;gmt_payment&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">alipayTradeNo</span> <span class="operator">=</span> params.get(<span class="string">&quot;trade_no&quot;</span>);</span><br><span class="line">        <span class="comment">// 支付宝验签</span></span><br><span class="line">        <span class="keyword">if</span> (Factory.Payment.Common().verifyNotify(params)) &#123;</span><br><span class="line">            <span class="comment">// 验签通过</span></span><br><span class="line">            System.out.println(<span class="string">&quot;交易名称: &quot;</span> + params.get(<span class="string">&quot;subject&quot;</span>));</span><br><span class="line">            System.out.println(<span class="string">&quot;交易状态: &quot;</span> + params.get(<span class="string">&quot;trade_status&quot;</span>));</span><br><span class="line">            System.out.println(<span class="string">&quot;支付宝交易凭证号: &quot;</span> + params.get(<span class="string">&quot;trade_no&quot;</span>));</span><br><span class="line">            System.out.println(<span class="string">&quot;商户订单号: &quot;</span> + params.get(<span class="string">&quot;out_trade_no&quot;</span>));</span><br><span class="line">            System.out.println(<span class="string">&quot;交易金额: &quot;</span> + params.get(<span class="string">&quot;total_amount&quot;</span>));</span><br><span class="line">            System.out.println(<span class="string">&quot;买家在支付宝唯一id: &quot;</span> + params.get(<span class="string">&quot;buyer_id&quot;</span>));</span><br><span class="line">            System.out.println(<span class="string">&quot;买家付款时间: &quot;</span> + params.get(<span class="string">&quot;gmt_payment&quot;</span>));</span><br><span class="line">            System.out.println(<span class="string">&quot;买家付款金额: &quot;</span> + params.get(<span class="string">&quot;buyer_pay_amount&quot;</span>));</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 更新订单未已支付[ORDER_PAID]</span></span><br><span class="line">            orderMapper.updateState(Integer.valueOf(tradeNo), <span class="number">1</span>, payTime, alipayTradeNo);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>支付成功后支付宝会调用本地此接口，这此接口支付宝会传进来很多参数，包含订单详情，支付宝流水号，支付款时间等等。</p><p>在此接口调用本地方法把订单状态改为已支付，即可完成此次支付操作。</p><h1 id="9-后台搭建"><a href="#9-后台搭建" class="headerlink" title="9. 后台搭建"></a>9. 后台搭建</h1><p>作为一个后台管理模块，需要一定的权限信息，只有给管理员方能访问后台接口，所以需要新建一张权限表。</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202212252011687.png" alt="image-20221225201148241"></p><p>对应的把用户与对应的权限进行关联，所以再新建一张表：</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202212252012498.png" alt="image-20221225201241145"></p><p>由于本项目使用了springSecurity框架，对于授权相对比较简单。</p><h2 id="9-1-用户登录"><a href="#9-1-用户登录" class="headerlink" title="9.1 用户登录"></a>9.1 用户登录</h2><h3 id="9-1-1-需求分析"><a href="#9-1-1-需求分析" class="headerlink" title="9.1.1 需求分析"></a>9.1.1 需求分析</h3><p>如下图若登录如何无管理员权限则提示错误。用户为系统管理员方可进入系统。</p><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202212221850516.png" alt="image-20221222185051162"></p><p>后台系统不提供用户注册功能，只提供管理员登录功能。当前端表单发起请求过程中，后端security根据当前登录用户查询其权限，并封装为<code>LoginUser</code>。</p><h3 id="9-1-2-后端实现"><a href="#9-1-2-后端实现" class="headerlink" title="9.1.2 后端实现"></a>9.1.2 后端实现</h3><p>①<code>UserDetailsService</code>的实现类添加对应判断权限方法：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">@Override</span></span><br><span class="line"><span class="meta">@Transactional</span></span><br><span class="line"><span class="keyword">public</span> UserDetails <span class="title function_">loadUserByUsername</span><span class="params">(String username)</span> <span class="keyword">throws</span> UsernameNotFoundException &#123;</span><br><span class="line">    LambdaQueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;&gt;();</span><br><span class="line">    <span class="comment">// 方法引用</span></span><br><span class="line">    queryWrapper.eq(StringUtils.isNotEmpty(username),User::getUsername,username);</span><br><span class="line"></span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userMapper.selectOne(queryWrapper);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (Objects.isNull(user)) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UsernameNotFoundException</span>(<span class="string">&quot;用户名或密码错误&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//判断用户是否被删除</span></span><br><span class="line">    <span class="keyword">if</span> (Objects.equals(user.getIsDelete(), IS_DELETED)) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">SystemException</span>(AppHttpCodeEnum.USER_IS_DELETED);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    log.info(<span class="string">&quot;数据库登录用户：&#123;&#125;&quot;</span>,user);</span><br><span class="line">    <span class="comment">//TODO 查询角色权限</span></span><br><span class="line">    List&lt;String&gt; permissions = userMapper.selectRoleByUid(user.getUid());</span><br><span class="line">    <span class="keyword">if</span> (!permissions.contains(ROLE_ADMIN))&#123;</span><br><span class="line">        <span class="comment">//非管理员</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">SystemException</span>(AppHttpCodeEnum.NO_OPERATOR_AUTH);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    log.info(<span class="string">&quot;当前登录用户：&#123;&#125;；拥有权限：&#123;&#125;&quot;</span>,user.getUsername(),permissions);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">LoginUser</span>(user,permissions);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果登录的用户不具有系统管理员<code>ROLE_ADMIN</code>权限，则返回前端403，信息为无权限操作。前端路由添加判断，若非管理员或未登录则页面必须跳转到登录接口。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 权限验证不通过给出提示</span></span><br><span class="line"><span class="keyword">if</span> (res.<span class="property">code</span> === <span class="number">401</span> || res.<span class="property">code</span> === <span class="number">403</span>) &#123;</span><br><span class="line">  <span class="title class_">ElementUI</span>.<span class="title class_">Message</span>(&#123;</span><br><span class="line">    <span class="attr">message</span>: res.<span class="property">msg</span>,</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;error&#x27;</span></span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="string">&quot;userInfo&quot;</span>);</span><br><span class="line">  <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="string">&quot;_t&quot;</span>);</span><br><span class="line">  <span class="comment">// window.location.reload();</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">replace</span>(<span class="string">&quot;/login&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>②如果登录的是管理员，则把权限封装进<code>LoginUser</code>，为了防止直接使用url访问会拿到数据。可以在配置中添加拦截器，添加鉴权拦截器。</p><p>LoginUser添加权限字段：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginUser</span> <span class="keyword">implements</span> <span class="title class_">UserDetails</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> User user;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; permissions;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">LoginUser</span><span class="params">(User user, List&lt;String&gt; permissions)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.user = user;</span><br><span class="line">        <span class="built_in">this</span>.permissions = permissions;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * authorities 不会被序列化到 redis</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@JSONField(serialize = false)</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;SimpleGrantedAuthority&gt; authorities;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 封装 permissions 权限信息</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Collection&lt;? <span class="keyword">extends</span> <span class="title class_">GrantedAuthority</span>&gt; getAuthorities() &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (authorities != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> authorities;</span><br><span class="line">        &#125;</span><br><span class="line">        authorities = permissions.stream()</span><br><span class="line">                .map(SimpleGrantedAuthority::<span class="keyword">new</span>)</span><br><span class="line">                .collect(Collectors.toList());</span><br><span class="line">        <span class="keyword">return</span> authorities;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getPassword</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> user.getPassword();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getUsername</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> user.getUsername();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isAccountNonExpired</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isAccountNonLocked</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isCredentialsNonExpired</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEnabled</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>配置拦截器：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    http.csrf().disable();<span class="comment">// 关闭csrf</span></span><br><span class="line">    http</span><br><span class="line">            <span class="comment">//不通过Session获取SecurityContext</span></span><br><span class="line">            .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS)</span><br><span class="line">            .and()</span><br><span class="line">            .authorizeRequests()</span><br><span class="line">            <span class="comment">// 对于登录接口、注册接口 允许匿名访问</span></span><br><span class="line">            .antMatchers(<span class="string">&quot;/user/login&quot;</span>).anonymous()</span><br><span class="line">            <span class="comment">//注销接口需要认证才能访问</span></span><br><span class="line">            .antMatchers(<span class="string">&quot;/user/logout&quot;</span>).authenticated()</span><br><span class="line">            <span class="comment">// 配置权限</span></span><br><span class="line">            .antMatchers(<span class="string">&quot;/user/*&quot;</span>).hasAuthority(<span class="string">&quot;ROLE_ADMIN&quot;</span>)</span><br><span class="line">            .antMatchers(<span class="string">&quot;/role/*&quot;</span>).hasAuthority(<span class="string">&quot;ROLE_ADMIN&quot;</span>)</span><br><span class="line">            .antMatchers(<span class="string">&quot;/goods/*&quot;</span>).hasAuthority(<span class="string">&quot;ROLE_ADMIN&quot;</span>)</span><br><span class="line">            <span class="comment">// 除上面外的所有请求全部需要鉴权认证</span></span><br><span class="line">            .anyRequest().authenticated();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 过滤器</span></span><br><span class="line">    http.addFilterBefore(jwtAuthenticationTokenFilter, UsernamePasswordAuthenticationFilter.class);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 配置异常处理器</span></span><br><span class="line">    http.exceptionHandling()</span><br><span class="line">            <span class="comment">// 认证失败处理</span></span><br><span class="line">            .authenticationEntryPoint(authenticationEntryPoint)</span><br><span class="line">            <span class="comment">// 授权失败</span></span><br><span class="line">            .accessDeniedHandler(accessDeniedHandler);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//关闭默认的注销功能</span></span><br><span class="line">    http.logout().disable();</span><br><span class="line">    <span class="comment">//允许跨域</span></span><br><span class="line">    http.cors();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>登录接口的业务层方法：</p><p>登陆成功后，缓存<code>LoginUser</code>到redis。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 登录</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> user</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> ResponseResult.okResult(userLoginVo)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> ResponseResult <span class="title function_">login</span><span class="params">(User user)</span> &#123;</span><br><span class="line">    <span class="comment">//判断用户名是否为空</span></span><br><span class="line">    <span class="keyword">if</span> (StringUtils.isEmpty(user.getUsername())) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">SystemException</span>(AppHttpCodeEnum.REQUIRE_USERNAME);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">UsernamePasswordAuthenticationToken</span> <span class="variable">authenticationToken</span> <span class="operator">=</span></span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">UsernamePasswordAuthenticationToken</span>(user.getUsername(), user.getPassword());</span><br><span class="line">    <span class="type">Authentication</span> <span class="variable">authentication</span> <span class="operator">=</span> authenticationManager.authenticate(authenticationToken);</span><br><span class="line">    <span class="comment">//判断是否认证通过</span></span><br><span class="line">    <span class="keyword">if</span> (Objects.isNull(authentication)) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;用户名或密码错误&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 认证成功，从Authentication获取LoginUser</span></span><br><span class="line">    <span class="type">LoginUser</span> <span class="variable">loginUser</span> <span class="operator">=</span> (LoginUser) authentication.getPrincipal();</span><br><span class="line"></span><br><span class="line">    log.info(<span class="string">&quot;loginUser:&#123;&#125;&quot;</span>, loginUser);</span><br><span class="line"></span><br><span class="line">    <span class="type">String</span> <span class="variable">userId</span> <span class="operator">=</span> loginUser.getUser().getUid().toString();</span><br><span class="line">    <span class="comment">// 生成token</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">jwt</span> <span class="operator">=</span> JwtUtil.createJWT(userId);</span><br><span class="line">    <span class="comment">// 存入redis</span></span><br><span class="line">    redisCache.setCacheObject(LOGIN_ADMIN_KEY + userId, loginUser);</span><br><span class="line"></span><br><span class="line">    <span class="type">UserInfoVo</span> <span class="variable">userInfoVo</span> <span class="operator">=</span> BeanCopyUtils.copyBean(loginUser.getUser(), UserInfoVo.class);</span><br><span class="line">    <span class="type">UserLoginVo</span> <span class="variable">userLoginVo</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserLoginVo</span>(jwt, userInfoVo);</span><br><span class="line"></span><br><span class="line">    log.info(<span class="string">&quot;用户以登陆==&gt;&#123;&#125;&quot;</span>, userLoginVo);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> ResponseResult.okResult(userLoginVo);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>登陆成功来到用户管理：本后台系统已上传至服务器，不方便提供url</p><p><img src="z-img/image-20221225201342255.png" alt="image-20221225201342255"></p><h2 id="9-2-用户管理"><a href="#9-2-用户管理" class="headerlink" title="9.2 用户管理"></a>9.2 用户管理</h2><h3 id="9-2-1-需求分析"><a href="#9-2-1-需求分析" class="headerlink" title="9.2.1 需求分析"></a>9.2.1 需求分析</h3><p>需要分页查询系统所有用户，并可进行模糊搜索。</p><p>然后就是添加用户、编辑用户、删除用户、批量删除用户功能。</p><h3 id="9-2-2-后端实现"><a href="#9-2-2-后端实现" class="headerlink" title="9.2.2 后端实现"></a>9.2.2 后端实现</h3><p>①以上全部接口需要管理员权限，前面配置类已配置过。接口一次性给出如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/username/&#123;username&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseResult <span class="title function_">userInfo</span><span class="params">(<span class="meta">@PathVariable</span> String username)</span> &#123;</span><br><span class="line">        LambdaQueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;&gt;();</span><br><span class="line">        queryWrapper.eq(User::getUsername, username);</span><br><span class="line">        <span class="keyword">return</span> ResponseResult.okResult(userService.getOne(queryWrapper));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据uid查询用户信息</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> uid</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/&#123;uid&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseResult <span class="title function_">findOne</span><span class="params">(<span class="meta">@PathVariable</span> Integer uid)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> ResponseResult.okResult(userService.getUserInfo(uid));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 新增或者更新</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> user</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/add&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseResult <span class="title function_">addUser</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> ResponseResult.okResult(userService.saveOrUpdateUser(user));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 更新用户信息</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> user</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/update&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseResult <span class="title function_">updateUser</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> ResponseResult.okResult(userService.updateUserInfo(user));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/page&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseResult <span class="title function_">findPage</span><span class="params">(<span class="meta">@RequestParam</span> Integer pageNum,</span></span><br><span class="line"><span class="params">                                   <span class="meta">@RequestParam</span> Integer pageSize,</span></span><br><span class="line"><span class="params">                                   <span class="meta">@RequestParam(defaultValue = &quot;&quot;)</span> String username,</span></span><br><span class="line"><span class="params">                                   <span class="meta">@RequestParam(defaultValue = &quot;&quot;)</span> String phone,</span></span><br><span class="line"><span class="params">                                   <span class="meta">@RequestParam(defaultValue = &quot;&quot;)</span> String email)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> ResponseResult.okResult(userService.userRolePage(pageNum,pageSize,username,phone,email));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 把用户设置为删除状态</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> uid</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/&#123;uid&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseResult <span class="title function_">setDeleted</span><span class="params">(<span class="meta">@PathVariable</span> Integer uid)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> ResponseResult.okResult(userService.setDeletedByUid(uid));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据用户id删除</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> uid</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/del/&#123;uid&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseResult <span class="title function_">deleteUser</span><span class="params">(<span class="meta">@PathVariable</span> Integer uid)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> ResponseResult.okResult(userService.removeById(uid));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 批量删除</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ids</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/del/batch&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseResult <span class="title function_">deleteBatch</span><span class="params">(<span class="meta">@RequestBody</span> List&lt;Integer&gt; ids)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> ResponseResult.okResult(userService.removeByIds(ids));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>②业务层</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Service(&quot;userService&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;UserMapper, User&gt; <span class="keyword">implements</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> RedisCache redisCache;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> UserInfoVo <span class="title function_">getUserInfo</span><span class="params">(Integer uid)</span> &#123;</span><br><span class="line">        <span class="comment">//根据用户id查询用户信息</span></span><br><span class="line">        LambdaQueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;&gt;();</span><br><span class="line">        queryWrapper.eq(ObjectUtils.isNotEmpty(uid), User::getUid, uid);</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> getOne(queryWrapper);</span><br><span class="line">        <span class="comment">//封装成UserInfoVo</span></span><br><span class="line">        <span class="type">UserInfoVo</span> <span class="variable">vo</span> <span class="operator">=</span> BeanCopyUtils.copyBean(user, UserInfoVo.class);</span><br><span class="line">        <span class="keyword">return</span> vo;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">updateUserInfo</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        LambdaQueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;&gt;();</span><br><span class="line">        queryWrapper.eq(User::getUid, user.getUid());</span><br><span class="line">        <span class="keyword">return</span> update(user, queryWrapper);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">setDeletedByUid</span><span class="params">(Integer uid)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userMapper.setDeletedByUid(uid);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> RoleMapper roleMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Page&lt;UserRoleVo&gt; <span class="title function_">userRolePage</span><span class="params">(Integer pageNum, Integer pageSize, String username, String phone, String email)</span> &#123;</span><br><span class="line"></span><br><span class="line">        LambdaQueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;&gt;();</span><br><span class="line">        queryWrapper.like(Strings.isNotEmpty(username), User::getUsername, username);</span><br><span class="line">        queryWrapper.like(Strings.isNotEmpty(phone), User::getUsername, phone);</span><br><span class="line">        queryWrapper.like(Strings.isNotEmpty(email), User::getUsername, email);</span><br><span class="line">        Page&lt;User&gt; userPage = page(<span class="keyword">new</span> <span class="title class_">Page</span>&lt;&gt;(pageNum, pageSize), queryWrapper);</span><br><span class="line"></span><br><span class="line">        List&lt;User&gt; userList = userPage.getRecords();</span><br><span class="line"></span><br><span class="line">        List&lt;UserRoleVo&gt; orderGoodVoList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">//封装用户权限</span></span><br><span class="line">        userList.forEach(u -&gt; &#123;</span><br><span class="line">            <span class="type">Integer</span> <span class="variable">uid</span> <span class="operator">=</span> u.getUid();</span><br><span class="line">            List&lt;Role&gt; userRoleList = roleMapper.getUserRoleList(uid);</span><br><span class="line">            <span class="type">UserRoleVo</span> <span class="variable">userRoleVo</span> <span class="operator">=</span> BeanCopyUtils.copyBean(u, UserRoleVo.class);</span><br><span class="line">            userRoleVo.setRoleList(userRoleList);</span><br><span class="line">            orderGoodVoList.add(userRoleVo);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        Page&lt;UserRoleVo&gt; userRoleVoPage = <span class="keyword">new</span> <span class="title class_">Page</span>&lt;&gt;();</span><br><span class="line">        userRoleVoPage.setCurrent(userPage.getCurrent());</span><br><span class="line">        userRoleVoPage.setPages(userPage.getPages());</span><br><span class="line">        userRoleVoPage.setSize(userPage.getSize());</span><br><span class="line">        userRoleVoPage.setTotal(userPage.getTotal());</span><br><span class="line"></span><br><span class="line">        userRoleVoPage.setRecords(orderGoodVoList);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> userRoleVoPage;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> PasswordEncoder passwordEncoder;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="meta">@Transactional</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">saveOrUpdateUser</span><span class="params">(User user)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//密码加密</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">encode</span> <span class="operator">=</span> passwordEncoder.encode(user.getPassword());</span><br><span class="line">        user.setPassword(encode);</span><br><span class="line">        userMapper.insertUser(user);</span><br><span class="line"></span><br><span class="line">        System.out.println(user);</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">uid</span> <span class="operator">=</span> user.getUid();</span><br><span class="line">        log.info(<span class="string">&quot;新增加的用户==&gt;&#123;&#125;&quot;</span>,uid);</span><br><span class="line">        <span class="comment">//增加普通权限</span></span><br><span class="line"><span class="comment">//        userMapper.insertUserRole(uid,2);</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="9-3-商品管理"><a href="#9-3-商品管理" class="headerlink" title="9.3 商品管理"></a>9.3 商品管理</h2><h3 id="9-3-1-需求分析"><a href="#9-3-1-需求分析" class="headerlink" title="9.3.1 需求分析"></a>9.3.1 需求分析</h3><p><img src="https://gcore.jsdelivr.net/gh/roydonGuo/Typora-Pic/md-pic202212252014950.png" alt="image-20221225201445466"></p><p>对数据库中商品表进行操作，包括基本CRUD。</p><h3 id="9-3-2-后端实现"><a href="#9-3-2-后端实现" class="headerlink" title="9.3.2 后端实现"></a>9.3.2 后端实现</h3><p>①控制层接口：</p><p>在控制层直接使用MP条件构造器进行操作简短省事整洁。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/goods&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GoodsController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> GoodsService goodsService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 分页查询所有商品</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> pageNum</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> pageSize</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/page&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseResult <span class="title function_">selectAll</span><span class="params">(<span class="meta">@RequestParam</span> Integer pageNum,</span></span><br><span class="line"><span class="params">                                    <span class="meta">@RequestParam</span> Integer pageSize,</span></span><br><span class="line"><span class="params">                                    <span class="meta">@RequestParam(defaultValue = &quot;&quot;)</span> String title)</span> &#123;</span><br><span class="line">        LambdaQueryWrapper&lt;Goods&gt; lambdaQueryWrapper = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;&gt;();</span><br><span class="line">        lambdaQueryWrapper.like(Goods::getTitle,title);</span><br><span class="line">        lambdaQueryWrapper.orderByDesc(Goods::getPriority);</span><br><span class="line">        <span class="keyword">return</span> ResponseResult.okResult(goodsService.page(<span class="keyword">new</span> <span class="title class_">Page</span>&lt;&gt;(pageNum, pageSize),lambdaQueryWrapper));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 新增或者更新</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> goods</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PostMapping</span></span><br><span class="line">    <span class="keyword">public</span> ResponseResult <span class="title function_">addUser</span><span class="params">(<span class="meta">@RequestBody</span> Goods goods)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> ResponseResult.okResult(goodsService.saveOrUpdate(goods));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据gid删除</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> gid</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/del/&#123;gid&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseResult <span class="title function_">deleteUser</span><span class="params">(<span class="meta">@PathVariable</span> Integer gid)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> ResponseResult.okResult(goodsService.removeById(gid));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 批量删除</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ids</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/del/batch&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseResult <span class="title function_">deleteBatch</span><span class="params">(<span class="meta">@RequestBody</span> List&lt;Integer&gt; ids)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> ResponseResult.okResult(goodsService.removeByIds(ids));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>开发暂时告一段落……</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mybatis-Plus </tag>
            
            <tag> Redis </tag>
            
            <tag> SpringSecurity </tag>
            
            <tag> Vue </tag>
            
            <tag> SpringBoot </tag>
            
            <tag> Axios </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringSecurity</title>
      <link href="/posts/7d2eec83.html"/>
      <url>/posts/7d2eec83.html</url>
      
        <content type="html"><![CDATA[<h1 id="0-简介"><a href="#0-简介" class="headerlink" title="0.简介"></a>0.简介</h1><p>​    <strong>Spring Security</strong> 是 Spring 家族中的一个安全管理框架。相比与另外一个安全框架<strong>Shiro</strong>，它提供了更丰富的功能，社区资源也比Shiro丰富。</p><p>​    一般来说中大型的项目都是使用<strong>SpringSecurity</strong> 来做安全框架。小项目有Shiro的比较多，因为相比与SpringSecurity，Shiro的上手更加的简单。</p><p>​     一般Web应用的需要进行<strong>认证</strong>和<strong>授权</strong>。</p><blockquote><p><strong>认证：验证当前访问系统的是不是本系统的用户，并且要确认具体是哪个用户</strong>。  </p><p><strong>授权：经过认证后判断当前用户是否有权限进行某个操作</strong>。</p></blockquote><p>而认证和授权也是SpringSecurity作为安全框架的核心功能。</p><h1 id="1-入门Demo"><a href="#1-入门Demo" class="headerlink" title="1.入门Demo"></a>1.入门Demo</h1><h2 id="1-1新建项目"><a href="#1-1新建项目" class="headerlink" title="1.1新建项目"></a>1.1新建项目</h2><p>  创建项目不用多说，创建maven或者spring项目都行。端口默认8080就行，配置文件先不用问，先来个小Demo，没什么好说的。</p><p>我这里项目名称叫<strong>SecurityDemo1</strong></p><p>① 设置父工程 添加依赖</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.6.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><p>② 启动类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SecurityDemo1Application</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(SecurityDemo1Application.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>③ 创建Controller</p><p>  写一个测试接口（/hello），用RestController返回一个字符串就行。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello World~&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>访问<a href="http://localhost:8080/hello，接口运行正常：">http://localhost:8080/hello，接口运行正常：</a></p><p><img src="https://bu.dusays.com/2022/12/04/638cafa5e6d3c.png" alt="image-20221204134632027"></p><h2 id="1-2-引入SpringSecurity"><a href="#1-2-引入SpringSecurity" class="headerlink" title="1.2 引入SpringSecurity"></a>1.2 引入SpringSecurity</h2><p>注意spring版本和security版本的兼容性问题就行了，最好是按照我给的版本进行测试。</p><p>目前推荐security版本最好是<strong>2.5.14</strong>。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-security<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>​    引入依赖后我们在尝试去访问之前的接口就会自动跳转到一个SpringSecurity的默认登陆页面。</p><p><img src="https://bu.dusays.com/2022/12/04/638cafbcc157f.png" alt="image-20221204135113453"></p><p>默认用户名是user,密码会输出在控制台。必须登陆之后才能对接口进行访问。</p><p><img src="https://bu.dusays.com/2022/12/04/638cafd12fbb1.png" alt="image-20221204135222813"></p><h1 id="2-认证"><a href="#2-认证" class="headerlink" title="2. 认证"></a>2. 认证</h1><h2 id="2-1-登陆校验流程"><a href="#2-1-登陆校验流程" class="headerlink" title="2.1 登陆校验流程"></a>2.1 登陆校验流程</h2><p><img src="https://bu.dusays.com/2022/12/04/638cb40e94a09.png" alt="image-20211214145824901"></p><p>SpringSecurity的原理其实就是一个过滤器链，内部包含了提供各种功能的过滤器。我们可以通过Debug查看当前系统中SpringSecurity过滤器链中有哪些过滤器及它们的顺序。</p><p><img src="https://bu.dusays.com/2022/12/04/638cafe4c7cb7.png" alt="image-20211214145824903"></p><p>这里我们可以看看入门Demo中的过滤器。</p><p><img src="https://bu.dusays.com/2022/12/04/638caff58e125.png" alt="image-20211214144425527"></p><p>ps：图中只展示了核心过滤器，其它的非核心过滤器并没有在图中展示。</p><blockquote><p><strong>UsernamePasswordAuthenticationFilter</strong>：负责处理登陆页面填写用户名密码后的登陆请求。入门Demo的认证工作主要由它负责。</p><p><strong>ExceptionTranslationFilter：</strong>处理过滤器链中抛出的任何AccessDeniedException和AuthenticationException。</p><p><strong>FilterSecurityInterceptor：</strong>负责权限校验的过滤器。</p></blockquote><h2 id="2-2认证流程"><a href="#2-2认证流程" class="headerlink" title="2.2认证流程"></a>2.2认证流程</h2><p><img src="https://bu.dusays.com/2022/12/04/638cb0066db9f.png" alt="image-20211214151515385"></p><blockquote><p>Authentication接口: 它的实现类，表示当前访问系统的用户，封装了用户相关信息。</p><p>AuthenticationManager接口：定义了认证Authentication的方法 </p><p>UserDetailsService接口：加载用户特定数据的核心接口。里面定义了一个根据用户名查询用户信息的方法。</p><p>UserDetails接口：提供核心用户信息。通过UserDetailsService根据用户名获取处理的用户信息要封装成UserDetails对象返回。然后将这些信息封装到Authentication对象中。</p></blockquote><h2 id="2-3项目演示"><a href="#2-3项目演示" class="headerlink" title="2.3项目演示"></a>2.3项目演示</h2><h3 id="2-3-1构建项目"><a href="#2-3-1构建项目" class="headerlink" title="2.3.1构建项目"></a>2.3.1构建项目</h3><p>更多详情前往github查看项目<a href="https://github.com/roydonGuo/Spring-Security/tree/dev/SecurityDemo3">SecurityDemo3</a>：</p><p>用到的数据库实体类sys_user即可，操作不是太多。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> NAMES utf8mb4;</span><br><span class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Table structure for sys_user</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `sys_user`;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `sys_user`  (</span><br><span class="line">  `id` <span class="type">bigint</span>(<span class="number">0</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;主键&#x27;</span>,</span><br><span class="line">  `user_name` <span class="type">varchar</span>(<span class="number">64</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_0900_ai_ci <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;NULL&#x27;</span> COMMENT <span class="string">&#x27;用户名&#x27;</span>,</span><br><span class="line">  `nick_name` <span class="type">varchar</span>(<span class="number">64</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_0900_ai_ci <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;NULL&#x27;</span> COMMENT <span class="string">&#x27;昵称&#x27;</span>,</span><br><span class="line">  `password` <span class="type">varchar</span>(<span class="number">64</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_0900_ai_ci <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;NULL&#x27;</span> COMMENT <span class="string">&#x27;密码&#x27;</span>,</span><br><span class="line">  `type` <span class="type">char</span>(<span class="number">1</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_0900_ai_ci <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;用户类型：0代表普通用户，1代表管理员&#x27;</span>,</span><br><span class="line">  `status` <span class="type">char</span>(<span class="number">1</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_0900_ai_ci <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;账号状态（0正常 1停用）&#x27;</span>,</span><br><span class="line">  `email` <span class="type">varchar</span>(<span class="number">64</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_0900_ai_ci <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;邮箱&#x27;</span>,</span><br><span class="line">  `phone_number` <span class="type">varchar</span>(<span class="number">32</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_0900_ai_ci <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;手机号&#x27;</span>,</span><br><span class="line">  `sex` <span class="type">char</span>(<span class="number">1</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_0900_ai_ci <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;用户性别（0男，1女，2未知）&#x27;</span>,</span><br><span class="line">  `avatar` <span class="type">varchar</span>(<span class="number">128</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_0900_ai_ci <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;头像&#x27;</span>,</span><br><span class="line">  `create_by` <span class="type">bigint</span>(<span class="number">0</span>) <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;创建人的用户id&#x27;</span>,</span><br><span class="line">  `create_time` datetime(<span class="number">0</span>) <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;创建时间&#x27;</span>,</span><br><span class="line">  `update_by` <span class="type">bigint</span>(<span class="number">0</span>) <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;更新人&#x27;</span>,</span><br><span class="line">  `update_time` datetime(<span class="number">0</span>) <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;更新时间&#x27;</span>,</span><br><span class="line">  `del_flag` <span class="type">int</span>(<span class="number">0</span>) <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span> COMMENT <span class="string">&#x27;删除标志（0代表未删除，1代表已删除）&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`) <span class="keyword">USING</span> BTREE</span><br><span class="line">) ENGINE <span class="operator">=</span> InnoDB AUTO_INCREMENT <span class="operator">=</span> <span class="number">22</span> <span class="type">CHARACTER</span> <span class="keyword">SET</span> <span class="operator">=</span> utf8mb4 <span class="keyword">COLLATE</span> <span class="operator">=</span> utf8mb4_0900_ai_ci COMMENT <span class="operator">=</span> <span class="string">&#x27;用户表&#x27;</span> ROW_FORMAT <span class="operator">=</span> <span class="keyword">Dynamic</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Records of sys_user</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `sys_user` <span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">&#x27;roydon&#x27;</span>, <span class="string">&#x27;roydon233&#x27;</span>, <span class="string">&#x27;$2a$10$.C5nLKwbb4VW3qSuqsaykuAj9mKa4XQaSfL.dOmmOr4L2fERgLgtG&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;3133010060@qq.com&#x27;</span>, <span class="string">&#x27;18888889999&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;http://rjh778l49.bkt.clouddn.com/2022/10/09/61d283c195064c2dbf9e02e9a609700a.jpg&#x27;</span>, <span class="keyword">NULL</span>, <span class="string">&#x27;2022-01-05 09:01:56&#x27;</span>, <span class="number">1</span>, <span class="string">&#x27;2022-01-30 15:37:03&#x27;</span>, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `sys_user` <span class="keyword">VALUES</span> (<span class="number">18</span>, <span class="string">&#x27;weixin&#x27;</span>, <span class="string">&#x27;weixin&#x27;</span>, <span class="string">&#x27;$2a$10$y3k3fnMZsBNihsVLXWfI8uMNueVXBI08k.LzWYaKsW8CW7xXy18wC&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;weixin@qq.com&#x27;</span>, <span class="keyword">NULL</span>, <span class="keyword">NULL</span>, <span class="string">&#x27;https://img1.imgtp.com/2022/09/01/w4nMeVBG.jpg&#x27;</span>, <span class="number">-1</span>, <span class="string">&#x27;2022-01-30 17:18:44&#x27;</span>, <span class="number">-1</span>, <span class="string">&#x27;2022-01-30 17:18:44&#x27;</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS <span class="operator">=</span> <span class="number">1</span>;</span><br></pre></td></tr></table></figure><p>引入必要的的依赖</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.6.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--mysql--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--redis--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--security--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-security<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--redis序列化器-fastjson--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.33<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--jwt--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.jsonwebtoken<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jjwt<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.9.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--mybatis-plus--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><p>配置文件</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8888</span> <span class="comment"># 端口</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/&#123;database&#125;?characterEncoding=utf-8&amp;serverTimezone=UTC</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"></span><br><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath*:/mapper/*.xml</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="comment"># 日志</span></span><br><span class="line">    <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="attr">logic-delete-field:</span> <span class="string">delFlag</span></span><br><span class="line">      <span class="attr">logic-delete-value:</span> <span class="number">1</span></span><br><span class="line">      <span class="attr">logic-not-delete-value:</span> <span class="number">0</span></span><br><span class="line">      <span class="attr">id-type:</span> <span class="string">auto</span></span><br></pre></td></tr></table></figure><p>创建数据表对应User实体类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@TableName(&quot;sys_user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span>  &#123;</span><br><span class="line">    <span class="meta">@TableId</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="comment">//用户名</span></span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line">    <span class="comment">//昵称</span></span><br><span class="line">    <span class="keyword">private</span> String nickName;</span><br><span class="line">    <span class="comment">//密码</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="comment">//用户类型：0代表普通用户，1代表管理员</span></span><br><span class="line">    <span class="keyword">private</span> String type;</span><br><span class="line">    <span class="comment">//账号状态（0正常 1停用）</span></span><br><span class="line">    <span class="keyword">private</span> String status;</span><br><span class="line">    <span class="comment">//邮箱</span></span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">    <span class="comment">//手机号</span></span><br><span class="line">    <span class="keyword">private</span> String phoneNumber;</span><br><span class="line">    <span class="comment">//用户性别（0男，1女，2未知）</span></span><br><span class="line">    <span class="keyword">private</span> String sex;</span><br><span class="line">    <span class="comment">//头像</span></span><br><span class="line">    <span class="keyword">private</span> String avatar;</span><br><span class="line">    <span class="comment">//创建人的用户id</span></span><br><span class="line">    <span class="keyword">private</span> Long createBy;</span><br><span class="line">    <span class="comment">//创建时间</span></span><br><span class="line">    <span class="keyword">private</span> Date createTime;</span><br><span class="line">    <span class="comment">//更新人</span></span><br><span class="line">    <span class="keyword">private</span> Long updateBy;</span><br><span class="line">    <span class="comment">//更新时间</span></span><br><span class="line">    <span class="keyword">private</span> Date updateTime;</span><br><span class="line">    <span class="comment">//删除标志（0代表未删除，1代表已删除）</span></span><br><span class="line">    <span class="keyword">private</span> Integer delFlag;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>接着是mapper接口</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;User&gt; &#123;&#125;</span><br></pre></td></tr></table></figure><p>接着是启动类，并加上mapper扫描</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.roydon.securitydemo3.mapper&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SecurityDemo3Application</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(SecurityDemo3Application.class, args);</span><br><span class="line">        log.info(<span class="string">&quot;项目启动中...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>测试MP是否能正常使用</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SecurityDemo3ApplicationTests</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testUserMapper</span><span class="params">()</span>&#123;System.out.println(userMapper.selectList(<span class="literal">null</span>));&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>工具类和一些必要配置在提供的项目中以及给出，本文不再过多赘述。</p><h3 id="2-3-2loadUser"><a href="#2-3-2loadUser" class="headerlink" title="2.3.2loadUser"></a>2.3.2loadUser</h3><p>创建一个类实现UserDetailsService接口，重写其中的loadUserByUsername方法。</p><p>这一步的目的在于根据登录用户名称查询出对应用户，并给此用户赋予相应权限（后续<strong>授权</strong>模块会完善，此处先TODO），之后封装成LoginUser，这个LoginUser实体类也是继承了security框架提供的UserDetails。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDetailsServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserDetailsService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> UserDetails <span class="title function_">loadUserByUsername</span><span class="params">(String username)</span> <span class="keyword">throws</span> UsernameNotFoundException &#123;</span><br><span class="line">        LambdaQueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;&gt;();</span><br><span class="line">        queryWrapper.eq(StringUtils.isNotEmpty(username), User::getUserName, username);</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userMapper.selectOne(queryWrapper);</span><br><span class="line"></span><br><span class="line">        log.info(<span class="string">&quot;查询到数据库用户为：&#123;&#125;&quot;</span>,user);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (Objects.isNull(user)) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UsernameNotFoundException</span>(<span class="string">&quot;用户名或密码错误&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// TODO 查询角色权限</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">LoginUser</span>(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>因为UserDetailsService方法的返回值是UserDetails类型，所以需要定义一个类，实现该接口，把用户信息和用户的权限（此处权限定义为null，后续<strong>授权</strong>模块会用到）封装在其中。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginUser</span> <span class="keyword">implements</span> <span class="title class_">UserDetails</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> User user;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">LoginUser</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.user = user;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Collection&lt;? <span class="keyword">extends</span> <span class="title class_">GrantedAuthority</span>&gt; getAuthorities() &#123;</span><br><span class="line">        <span class="comment">// 后续授权模块会用到。。。</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getPassword</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> user.getPassword();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getUsername</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> user.getUserName();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isAccountNonExpired</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isAccountNonLocked</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isCredentialsNonExpired</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEnabled</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-3-3SecurityConfig"><a href="#2-3-3SecurityConfig" class="headerlink" title="2.3.3SecurityConfig"></a>2.3.3SecurityConfig</h3><p>定义SpringSecurity的配置类，继承WebSecurityConfigurerAdapter。</p><p>实际项目中不会把密码明文存储在数据库中。一般使用SpringSecurity为我们提供的<strong>BCryptPasswordEncoder</strong>。</p><p>接下需要定义用户登陆接口，然后让SpringSecurity对这个接口放行,让用户访问这个接口的时候不用登录也能访问。</p><p>在接口中通过AuthenticationManager的authenticate方法来进行用户认证,所以需要在SecurityConfig中配置把AuthenticationManager注入容器。</p><p>认证成功的话要生成一个jwt，放入响应中返回。并且为了让用户下回请求时能通过jwt识别出具体的是哪个用户，我们需要把用户信息存入redis，可以把用户id作为key。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SecurityConfig</span> <span class="keyword">extends</span> <span class="title class_">WebSecurityConfigurerAdapter</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> PasswordEncoder <span class="title function_">passwordEncoder</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">BCryptPasswordEncoder</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> JwtAuthenticationTokenFilter jwtAuthenticationTokenFilter;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        http</span><br><span class="line">                .cors()</span><br><span class="line">                .and()</span><br><span class="line">                .csrf().disable()</span><br><span class="line">                .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS)</span><br><span class="line">                .and()</span><br><span class="line">                .authorizeRequests()</span><br><span class="line">                <span class="comment">// 对于登录接口 允许匿名访问 anonymous</span></span><br><span class="line">                .antMatchers(<span class="string">&quot;/user/login&quot;</span>).anonymous()</span><br><span class="line">                .anyRequest().authenticated();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> AuthenticationManager <span class="title function_">authenticationManagerBean</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.authenticationManagerBean();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-3-4登录接口"><a href="#2-3-4登录接口" class="headerlink" title="2.3.4登录接口"></a>2.3.4登录接口</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">LoginService</span> &#123;</span><br><span class="line"></span><br><span class="line">    ResponseResult <span class="title function_">login</span><span class="params">(User user)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> LoginServcie loginServcie;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/user/login&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseResult <span class="title function_">login</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> loginServcie.login(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>LoginService实现类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">LoginService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> AuthenticationManager authenticationManager;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> RedisCache redisCache;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 用户登录</span></span><br><span class="line"><span class="comment">     * 1.根据用户信息获取 Authentication</span></span><br><span class="line"><span class="comment">     * 2.根据用户 id 生成 jwt token</span></span><br><span class="line"><span class="comment">     * 3.存入 redis</span></span><br><span class="line"><span class="comment">     * 4.token 响应给前端</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> user 登录用户</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> ResponseResult(CODE_200, &quot; 登陆成功 &quot;, map)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> ResponseResult <span class="title function_">login</span><span class="params">(User user)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">UsernamePasswordAuthenticationToken</span> <span class="variable">authenticationToken</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UsernamePasswordAuthenticationToken</span>(user.getUserName(), user.getPassword());</span><br><span class="line">        <span class="type">Authentication</span> <span class="variable">authenticate</span> <span class="operator">=</span> authenticationManager.authenticate(authenticationToken);</span><br><span class="line">        log.info(<span class="string">&quot;Authentication认证信息：&#123;&#125;&quot;</span>, authenticate);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (Objects.isNull(authenticate)) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;用户名或密码错误&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//使用userid生成token</span></span><br><span class="line">        <span class="type">LoginUser</span> <span class="variable">loginUser</span> <span class="operator">=</span> (LoginUser) authenticate.getPrincipal();</span><br><span class="line">        <span class="type">String</span> <span class="variable">userId</span> <span class="operator">=</span> loginUser.getUser().getId().toString();</span><br><span class="line">        <span class="type">String</span> <span class="variable">jwt</span> <span class="operator">=</span> JwtUtil.createJWT(userId);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//authenticate存入redis</span></span><br><span class="line">        redisCache.setCacheObject(LOGIN_KEY + userId, loginUser);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//把token响应给前端</span></span><br><span class="line">        HashMap&lt;String, String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        map.put(<span class="string">&quot;token&quot;</span>, jwt);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ResponseResult</span>(CODE_200, <span class="string">&quot;登陆成功&quot;</span>, map);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>测试接口</p><p><img src="https://bu.dusays.com/2022/12/04/638cb0282009b.png" alt="image-20221204222224706"></p><h3 id="2-3-5认证过滤器"><a href="#2-3-5认证过滤器" class="headerlink" title="2.3.5认证过滤器"></a>2.3.5认证过滤器</h3><p>这个过滤器会去获取请求头中的token，对token进行解析取出其中的userid。使用userid去redis中获取对应的LoginUser对象。然后封装Authentication对象存入SecurityContextHolder。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JwtAuthenticationTokenFilter</span> <span class="keyword">extends</span> <span class="title class_">OncePerRequestFilter</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> RedisCache redisCache;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doFilterInternal</span><span class="params">(HttpServletRequest request, <span class="meta">@NotNull</span> HttpServletResponse response, <span class="meta">@NotNull</span> FilterChain filterChain)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//获取token</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">token</span> <span class="operator">=</span> request.getHeader(<span class="string">&quot;token&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (!StringUtils.hasText(token)) &#123;</span><br><span class="line">            <span class="comment">//无token，放行</span></span><br><span class="line">            filterChain.doFilter(request, response);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//解析token</span></span><br><span class="line">        String userid;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">Claims</span> <span class="variable">claims</span> <span class="operator">=</span> JwtUtil.parseJWT(token);</span><br><span class="line">            userid = claims.getSubject();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;token非法&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//从redis中获取用户信息</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">redisKey</span> <span class="operator">=</span> LOGIN_KEY + userid;</span><br><span class="line">        <span class="type">LoginUser</span> <span class="variable">loginUser</span> <span class="operator">=</span> redisCache.getCacheObject(redisKey);</span><br><span class="line">        <span class="keyword">if</span> (Objects.isNull(loginUser)) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;用户未登录&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//存入SecurityContextHolder</span></span><br><span class="line">        <span class="comment">//TODO 获取权限信息封装到 Authentication 中，此处存null</span></span><br><span class="line">        <span class="type">UsernamePasswordAuthenticationToken</span> <span class="variable">authenticationToken</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UsernamePasswordAuthenticationToken</span>(loginUser, <span class="literal">null</span>, <span class="literal">null</span>);</span><br><span class="line">        SecurityContextHolder.getContext().setAuthentication(authenticationToken);</span><br><span class="line">        <span class="comment">//放行</span></span><br><span class="line">        filterChain.doFilter(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>把token校验过滤器添加到过滤器链中</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SecurityConfig</span> <span class="keyword">extends</span> <span class="title class_">WebSecurityConfigurerAdapter</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> PasswordEncoder <span class="title function_">passwordEncoder</span><span class="params">()</span> &#123;<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">BCryptPasswordEncoder</span>(); &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> JwtAuthenticationTokenFilter jwtAuthenticationTokenFilter;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        http</span><br><span class="line">                .cors()</span><br><span class="line">                .and()</span><br><span class="line">                .csrf().disable()</span><br><span class="line">                .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS)</span><br><span class="line">                .and()</span><br><span class="line">                .authorizeRequests()</span><br><span class="line">                <span class="comment">// 对于登录接口 允许匿名访问 anonymous</span></span><br><span class="line">                .antMatchers(<span class="string">&quot;/user/login&quot;</span>).anonymous()</span><br><span class="line">                .anyRequest().authenticated();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//把token校验过滤器添加到过滤器链中</span></span><br><span class="line">        http.addFilterBefore(jwtAuthenticationTokenFilter, UsernamePasswordAuthenticationFilter.class);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> AuthenticationManager <span class="title function_">authenticationManagerBean</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.authenticationManagerBean();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-3-6退出登录"><a href="#2-3-6退出登录" class="headerlink" title="2.3.6退出登录"></a>2.3.6退出登录</h3><p>退出登陆接口只需要获取SecurityContextHolder中的认证信息，删除redis中对应的数据即可。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">LoginService</span> &#123;</span><br><span class="line"></span><br><span class="line">    ResponseResult <span class="title function_">login</span><span class="params">(User user)</span>;</span><br><span class="line"></span><br><span class="line">    ResponseResult <span class="title function_">logout</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> LoginService loginServcie;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/login&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseResult <span class="title function_">login</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> loginServcie.login(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/logout&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseResult <span class="title function_">logout</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> loginServcie.logout();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在实现类中实现退出登录方法</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 退出登录</span></span><br><span class="line"><span class="comment"> * 1.获取用户信息 SecurityContextHolder.getContext().getAuthentication();</span></span><br><span class="line"><span class="comment"> * 2.通过用户 id 清除 redis</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> ResponseResult(CODE_200, &quot; 退出成功 &quot;);</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> ResponseResult <span class="title function_">logout</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">Authentication</span> <span class="variable">authentication</span> <span class="operator">=</span> SecurityContextHolder.getContext().getAuthentication();</span><br><span class="line">    <span class="type">LoginUser</span> <span class="variable">loginUser</span> <span class="operator">=</span> (LoginUser) authentication.getPrincipal();</span><br><span class="line">    <span class="type">Long</span> <span class="variable">userid</span> <span class="operator">=</span> loginUser.getUser().getId();</span><br><span class="line">    redisCache.deleteObject(LOGIN_KEY + userid);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ResponseResult</span>(CODE_200, <span class="string">&quot;退出成功&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>测试退出登录接口，携带请求头token</p><p><img src="https://bu.dusays.com/2022/12/04/638cb03fac58b.png" alt="image-20221204222304747"></p><p>测试文档在线地址：<a href="https://www.apifox.cn/apidoc/shared-ca2af8d7-c7f0-4654-b35e-6ba16856700c">apifox</a></p><blockquote><p>ps：测试文档只是提供参考，具体测试你得运行在本地。</p></blockquote><h1 id="3-授权"><a href="#3-授权" class="headerlink" title="3.授权"></a>3.授权</h1><p>未完待续。。。</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringSecurity </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2023黑马Java程序员学习路线</title>
      <link href="/posts/1b88f555.html"/>
      <url>/posts/1b88f555.html</url>
      
        <content type="html"><![CDATA[<h1 id="学习路线图"><a href="#学习路线图" class="headerlink" title="学习路线图_"></a>学习路线图<a href="https://www.bilibili.com/read/cv9965357">_</a></h1><h2 id="入门"><a href="#入门" class="headerlink" title="入门"></a>入门</h2><p><a href="https://www.bilibili.com/video/BV1Cv411372m">Java SE基础</a> → <a href="https://www.bilibili.com/video/BV1Qf4y1T7Hx">Java Web(含数据库+H5+js+vue)</a></p><h2 id="中级"><a href="#中级" class="headerlink" title="中级"></a>中级</h2><p><a href="https://www.bilibili.com/video/BV1Ah411S7ZE">Maven</a> → <a href="https://www.bilibili.com/video/BV1MU4y1Y7h5">Git</a> → <a href="https://www.bilibili.com/video/BV1Fi4y1S7ix">SSM框架</a> → <a href="https://www.bilibili.com/video/BV1rE41197jR">MybatisPlus</a> → <a href="https://www.bilibili.com/video/BV15b4y1a7yG">Spring Boot</a>→ <a href="https://www.bilibili.com/video/BV1Bo4y117zV">《传智健康》项目实战</a> → <a href="https://www.bilibili.com/video/BV13a411q753">《瑞吉外卖》项目实战</a></p><h2 id="进阶"><a href="#进阶" class="headerlink" title="进阶"></a>进阶</h2><p><a href="https://www.bilibili.com/video/BV1LQ4y127n4">Spring Cloud(微服务开发,学这一套就够了)</a> 也可以按照以下技术点学：<br><a href="https://www.bilibili.com/video/BV1VE411q7dX">Dubbo</a> → <a href="https://www.bilibili.com/video/BV1M741137qY">Zookeeper</a> → <a href="https://www.bilibili.com/video/BV15k4y1k7Ep">RabbitMQ</a> → <a href="https://www.bilibili.com/video/BV1L4411y7mn">RocketMQ</a> → <a href="https://www.bilibili.com/video/BV1CJ411T7BK">Docker</a> → <a href="https://www.bilibili.com/video/BV1cr4y1671t">Redis</a> → <a href="https://www.bilibili.com/video/BV1bJ411x7mq">MongoDB</a> → <a href="https://www.bilibili.com/video/BV1Nt4y1m7qL">Elasticsearch</a> → <a href="https://www.bilibili.com/video/BV1Kr4y1i7ru">MySQL进阶</a></p><h2 id="项目"><a href="#项目" class="headerlink" title="项目"></a>项目</h2><p><a href="https://www.bilibili.com/video/BV18A411L7UX">《SaaSiHRM》企业服务</a> → <a href="https://www.bilibili.com/video/BV1sZ4y1F7PD">《好客租房》生活服务</a> → <a href="https://www.bilibili.com/video/BV1tw411f79E">权限管理一体化解决方案</a> → <a href="https://www.bilibili.com/video/BV1Jb4y1d7GY">短信网关平台</a></p><h2 id="面试"><a href="#面试" class="headerlink" title="面试"></a>面试</h2><p><a href="https://www.bilibili.com/video/BV15b4y117RJ">Java大厂面试专题课</a> → <a href="https://www.bilibili.com/video/BV1ue4y1R712">Java百度地图</a></p><hr><blockquote><p>以上技术，足以支撑找一份好的java开发工作。<br>工作后再提升，学习的技术：<br>JDK8-15新特性 → 编程强化 → 数据库强化 → 安全框架SpringSecurity → 报表技术 → 模板引擎VelocityTools → 工作流Activiti7……</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue2小视频demo</title>
      <link href="/posts/videoDemo.html"/>
      <url>/posts/videoDemo.html</url>
      
        <content type="html"><![CDATA[<p>关于我在酒店隔离闲来无事网上冲浪发现一个免费api后的一系列故事…<br>由于无聊，再加上发现了一个好东西，不能我自己一个人享受，得拿出来大家鉴赏鉴赏(doge)<br>就诞生了这个vue视频播放demo，没有使用组件，原生video元素。<br>不多说了，各位注意身体|</p><p>运行效果截图我就不放了，，</p><p>奉上源码：</p><blockquote><p><a href="https://github.com/roydonGuo/WebDemo/tree/dev/girl-video1">https://github.com/roydonGuo/WebDemo/tree/dev/girl-video1</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
            <tag> api </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringSecurity问题总结</title>
      <link href="/posts/34abbf19.html"/>
      <url>/posts/34abbf19.html</url>
      
        <content type="html"><![CDATA[<p>记一次spring+mp+redis项目整合<strong>security</strong>时遇到的离谱问题。<br>原先刚开始学习security权限框架，自以为学的还不错，就纯手打把seacurity整合进了自己项目，但是，自从配置security配置后，就开始了一路debug。。。</p><blockquote><p>先是csrf没有关，然后又是UserDetails的自定义实现类封装不进去。<br>然后又是Encoded password does not look like BCrypt。<br>然后又是一直403 forbidden。。</p></blockquote><h1 id="1-security配置"><a href="#1-security配置" class="headerlink" title="1.security配置"></a>1.security配置</h1><p>然后我又把security和redis单拉出来重新写了个demo，来回排查终于搞定了。<br>下面是这个小demo的config代码</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by Intellij IDEA</span></span><br><span class="line"><span class="comment"> * Author: yi cheng</span></span><br><span class="line"><span class="comment"> * Date: 2022/10/7</span></span><br><span class="line"><span class="comment"> * Time: 15:47</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SecurityConfig</span> <span class="keyword">extends</span> <span class="title class_">WebSecurityConfigurerAdapter</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> PasswordEncoder <span class="title function_">passwordEncoder</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">BCryptPasswordEncoder</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    @Resource</span></span><br><span class="line"><span class="comment">//    private JwtAuthenticationTokenFilter jwtAuthenticationTokenFilter;</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        http</span><br><span class="line">                .cors()</span><br><span class="line">                .and()</span><br><span class="line">                <span class="comment">//关闭csrf</span></span><br><span class="line">                .csrf().disable()</span><br><span class="line">                <span class="comment">//不通过Session获取SecurityContext</span></span><br><span class="line">                .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS)</span><br><span class="line">                .and()</span><br><span class="line">                .authorizeRequests()</span><br><span class="line">                <span class="comment">// 对于登录接口 允许匿名访问 anonymous</span></span><br><span class="line">                .antMatchers(<span class="string">&quot;/user/login&quot;</span>).anonymous()</span><br><span class="line">                .anyRequest().authenticated();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//把token校验过滤器添加到过滤器链中</span></span><br><span class="line"><span class="comment">//        http.addFilterBefore(jwtAuthenticationTokenFilter, UsernamePasswordAuthenticationFilter.class);</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * AuthenticationManager注册进容器</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> AuthenticationManager <span class="title function_">authenticationManagerBean</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.authenticationManagerBean();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>这里controller只定义了一个用户登录接口，所以放行login就行了。然后就是关闭<strong>csrf</strong>不用多说。</p><h1 id="2-UserDetailsService的loadUserByUsername-返回值封装"><a href="#2-UserDetailsService的loadUserByUsername-返回值封装" class="headerlink" title="2.UserDetailsService的loadUserByUsername()返回值封装"></a>2.UserDetailsService的loadUserByUsername()返回值封装</h1><p>封装UserDetails的自定义实现类LoginUser实现UserDetails，就是用户认证实体类<br>里面方法返回true或get方法返回username和password就行。</p><h1 id="3-Encoded-password-does-not-look-like-BCrypt"><a href="#3-Encoded-password-does-not-look-like-BCrypt" class="headerlink" title="3.Encoded password does not look like BCrypt"></a>3.Encoded password does not look like BCrypt</h1><p>这个错误具体原因是数据库加密后的密码加密方式与传入的匹配不了。<br>可以<code>使用spring容器中注入的密码加密bean重新生成加密密码存入数据库</code>。<br>上面config里已经把BCryptPasswordEncoder注入到了spring容器，所以在test里调用一下即可。我这里是粗心又new 了一个BCryptPasswordEncoder进行的密码加密当测试用的，没想到挂在了这一步。<br>然后执行UserDetailsService中的方法会认证不通过，导致无法封装LoginUser返回对象，这样你的login方法的authenticationManager也就拿不到LoginUser这个对象，而只是把用户名封装了进去，连user对象都不是，所以后续一系列什么判断，new Authentication，存到redis类的都不会执行下去，控制台也不报错，中给个下面图片Encoded password does not look like BCrypt提示，肉眼很难发现，所以加密一定用bean中的bcrypt。</p><blockquote><p>这个错不好发现，我的sql打印很多，要不是debug’实在没头绪我很难发现这有个错。<br><img src="https://img-blog.csdnimg.cn/dd48401bfd474022a092e4f40ccb09ee.png" alt="在这里插入图片描述"></p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Resource</span></span><br><span class="line"><span class="keyword">private</span> PasswordEncoder passwordEncoder;<span class="comment">//容器中的 BCrypt</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">pwdTest</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//  BCryptPasswordEncoder passwordEncoder = new BCryptPasswordEncoder();不要自己new</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">pwd</span> <span class="operator">=</span> passwordEncoder.encode(<span class="string">&quot;123456&quot;</span>);</span><br><span class="line">    System.out.println(pwd1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>此方法就能解决上图报错 password does not look like BCrypt<br>或者postman一直403 forbidden</p><p>demo的github地址<a href="https://github.com/roydonGuo/Spring-Security/tree/dev">github</a></p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringSecurity </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>harmony2.0-基础</title>
      <link href="/posts/harmony2.0.html"/>
      <url>/posts/harmony2.0.html</url>
      
        <content type="html"><![CDATA[<hr><div align=right style="width: 80px"><img src="https://img1.imgtp.com/2022/09/01/IVKUXjNX.gif"></div><h1 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h1><p>常见的事件有：单击、双击、长按、还有触摸事件 。我们可以给文本、按钮等等组件添加不同的事件。</p><h2 id="单击事件"><a href="#单击事件" class="headerlink" title="单击事件"></a>单击事件</h2><ul><li>接口名：ClickedListener</li></ul><p>四种实现方法(下面的其他事件类推)：</p><ol><li>自己编写实现类</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainAbilitySlice</span> <span class="keyword">extends</span> <span class="title class_">AbilitySlice</span> &#123;</span><br><span class="line"></span><br><span class="line">    Button btn1;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onStart</span><span class="params">(Intent intent)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onStart(intent);</span><br><span class="line">        <span class="built_in">super</span>.setUIContent(ResourceTable.Layout_ability_main);</span><br><span class="line"></span><br><span class="line">        btn1 = (Button) findComponentById(ResourceTable.Id_btn1);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1.自定义实现类</span></span><br><span class="line">        btn1.setClickedListener(<span class="keyword">new</span> <span class="title class_">MyListener</span>());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onActive</span><span class="params">()</span> &#123;<span class="built_in">super</span>.onActive();&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onForeground</span><span class="params">(Intent intent)</span> &#123;<span class="built_in">super</span>.onForeground(intent);&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 自定义实现类，里面重写点击方法</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyListener</span> <span class="keyword">implements</span> <span class="title class_">Component</span>.ClickedListener&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(Component component)</span> &#123;</span><br><span class="line">        <span class="type">Button</span> <span class="variable">btn1</span> <span class="operator">=</span> (Button) component;</span><br><span class="line"></span><br><span class="line">        btn1.setText(<span class="string">&quot;被点了&quot;</span>);</span><br><span class="line"></span><br><span class="line">        btn1.setClickable(<span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>实现 Component.ClickedListener 接口</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainAbilitySlice</span> <span class="keyword">extends</span> <span class="title class_">AbilitySlice</span> <span class="keyword">implements</span> <span class="title class_">Component</span>.ClickedListener &#123;</span><br><span class="line"></span><br><span class="line">    Button btn1;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onStart</span><span class="params">(Intent intent)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onStart(intent);</span><br><span class="line">        <span class="built_in">super</span>.setUIContent(ResourceTable.Layout_ability_main);</span><br><span class="line"></span><br><span class="line">        btn1 = (Button) findComponentById(ResourceTable.Id_btn1);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.实现接口</span></span><br><span class="line">        btn1.setClickedListener(<span class="built_in">this</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 重写点击方法</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(Component component)</span> &#123;</span><br><span class="line">        btn1.setText(<span class="string">&quot;被点了&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onActive</span><span class="params">()</span> &#123;<span class="built_in">super</span>.onActive();&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onForeground</span><span class="params">(Intent intent)</span> &#123;<span class="built_in">super</span>.onForeground(intent);&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>方法引用</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainAbilitySlice</span> <span class="keyword">extends</span> <span class="title class_">AbilitySlice</span> <span class="keyword">implements</span> <span class="title class_">Component</span>.ClickedListener &#123;</span><br><span class="line"></span><br><span class="line">    Button btn1;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onStart</span><span class="params">(Intent intent)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onStart(intent);</span><br><span class="line">        <span class="built_in">super</span>.setUIContent(ResourceTable.Layout_ability_main);</span><br><span class="line"></span><br><span class="line">        btn1 = (Button) findComponentById(ResourceTable.Id_btn1);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.方法引用</span></span><br><span class="line">        btn1.setClickedListener(<span class="built_in">this</span>::onClick);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(Component component)</span> &#123;</span><br><span class="line">        btn1.setText(<span class="string">&quot;被点了&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onActive</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onActive();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onForeground</span><span class="params">(Intent intent)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onForeground(intent);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>匿名内部类</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainAbilitySlice</span> <span class="keyword">extends</span> <span class="title class_">AbilitySlice</span>&#123;</span><br><span class="line"></span><br><span class="line">    Button btn1;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onStart</span><span class="params">(Intent intent)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onStart(intent);</span><br><span class="line">        <span class="built_in">super</span>.setUIContent(ResourceTable.Layout_ability_main);</span><br><span class="line"></span><br><span class="line">        btn1 = (Button) findComponentById(ResourceTable.Id_btn1);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4.匿名内部类</span></span><br><span class="line">        btn1.setClickedListener(<span class="keyword">new</span> <span class="title class_">Component</span>.ClickedListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(Component component)</span> &#123;</span><br><span class="line">                btn1.setText(<span class="string">&quot;被点了&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onActive</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onActive();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onForeground</span><span class="params">(Intent intent)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onForeground(intent);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="双击事件"><a href="#双击事件" class="headerlink" title="双击事件"></a>双击事件</h2><ul><li>接口名：DoubleClickedListener</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainAbilitySlice</span> <span class="keyword">extends</span> <span class="title class_">AbilitySlice</span>&#123;</span><br><span class="line"></span><br><span class="line">    Button btn1;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onStart</span><span class="params">(Intent intent)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onStart(intent);</span><br><span class="line">        <span class="built_in">super</span>.setUIContent(ResourceTable.Layout_ability_main);</span><br><span class="line"></span><br><span class="line">        btn1 = (Button) findComponentById(ResourceTable.Id_btn1);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 绑定双击事件</span></span><br><span class="line">        btn1.setDoubleClickedListener(<span class="keyword">new</span> <span class="title class_">Component</span>.DoubleClickedListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onDoubleClick</span><span class="params">(Component component)</span> &#123;</span><br><span class="line">                btn1.setText(<span class="string">&quot;被双击了&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onActive</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onActive();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onForeground</span><span class="params">(Intent intent)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onForeground(intent);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="长按事件"><a href="#长按事件" class="headerlink" title="长按事件"></a>长按事件</h2><ul><li>接口名：LongClickedListener</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainAbilitySlice</span> <span class="keyword">extends</span> <span class="title class_">AbilitySlice</span>&#123;</span><br><span class="line"></span><br><span class="line">    Button btn1;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onStart</span><span class="params">(Intent intent)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onStart(intent);</span><br><span class="line">        <span class="built_in">super</span>.setUIContent(ResourceTable.Layout_ability_main);</span><br><span class="line"></span><br><span class="line">        btn1 = (Button) findComponentById(ResourceTable.Id_btn1);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 绑定长按事件</span></span><br><span class="line">        btn1.setLongClickedListener(<span class="keyword">new</span> <span class="title class_">Component</span>.LongClickedListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onLongClicked</span><span class="params">(Component component)</span> &#123;</span><br><span class="line">                btn1.setText(<span class="string">&quot;被长按了&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onActive</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onActive();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onForeground</span><span class="params">(Intent intent)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onForeground(intent);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="滑动事件-触摸事件"><a href="#滑动事件-触摸事件" class="headerlink" title="滑动事件(触摸事件)"></a>滑动事件(触摸事件)</h2><ul><li>接口名：TouchEventListener</li></ul><p>滑动事件里面分为三个动作：按下不松，移动，抬起。 </p><ul><li>PRIMARY_POINT_DOWN：按下不松。 </li><li>POINT_MOVE：移动。 </li><li>PRIMARY_POINT_UP：抬起。</li></ul><blockquote><p>手机坐标： 手机左上角的点为原点。 （向右为X轴 | 向下为Y轴 | 垂直于屏幕向上为Z轴）</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.roydon.beautifyapp1.MainAbility;</span><br><span class="line"><span class="keyword">import</span> com.roydon.beautifyapp1.ResourceTable;</span><br><span class="line"><span class="keyword">import</span> ohos.aafwk.ability.AbilitySlice;</span><br><span class="line"><span class="keyword">import</span> ohos.aafwk.content.Intent;</span><br><span class="line"><span class="keyword">import</span> ohos.agp.components.Button;</span><br><span class="line"><span class="keyword">import</span> ohos.agp.components.Component;</span><br><span class="line"><span class="keyword">import</span> ohos.agp.components.DirectionalLayout;</span><br><span class="line"><span class="keyword">import</span> ohos.agp.window.dialog.ToastDialog;</span><br><span class="line"><span class="keyword">import</span> ohos.multimodalinput.event.MmiPoint;</span><br><span class="line"><span class="keyword">import</span> ohos.multimodalinput.event.TouchEvent;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainAbilitySlice</span> <span class="keyword">extends</span> <span class="title class_">AbilitySlice</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onStart</span><span class="params">(Intent intent)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onStart(intent);</span><br><span class="line">        <span class="built_in">super</span>.setUIContent(ResourceTable.Layout_ability_main);</span><br><span class="line"></span><br><span class="line">        <span class="type">DirectionalLayout</span> <span class="variable">dl</span> <span class="operator">=</span> (DirectionalLayout) findComponentById(ResourceTable.Id_dl);</span><br><span class="line"></span><br><span class="line">        dl.setTouchEventListener(<span class="keyword">new</span> <span class="title class_">Component</span>.TouchEventListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onTouchEvent</span><span class="params">(Component component, TouchEvent touchEvent)</span> &#123;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (touchEvent.getAction()==TouchEvent.PRIMARY_POINT_DOWN)&#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;按下&quot;</span>);</span><br><span class="line">                    <span class="comment">//因为给布局 DirectionalLayout 绑定的触摸事件，所以可以获取手指在屏幕按下的位置</span></span><br><span class="line">                    System.out.println(<span class="string">&quot;手指按下的坐标：&quot;</span>+touchEvent.getPointerPosition(<span class="number">0</span>));</span><br><span class="line">                    <span class="type">MmiPoint</span> <span class="variable">position</span> <span class="operator">=</span> touchEvent.getPointerPosition(<span class="number">0</span>);</span><br><span class="line">                    <span class="type">float</span> <span class="variable">pointX</span> <span class="operator">=</span> position.getX();<span class="comment">//按下点的横坐标</span></span><br><span class="line">                    <span class="type">float</span> <span class="variable">pointY</span> <span class="operator">=</span> position.getY();<span class="comment">//按下点的纵坐标</span></span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>(touchEvent.getAction()==TouchEvent.POINT_MOVE)&#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;移动&quot;</span>);</span><br><span class="line">                    <span class="comment">//移动时间同样有坐标方法，坐标随手指移动不断变化</span></span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>(touchEvent.getAction()==TouchEvent.PRIMARY_POINT_UP)&#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;松开&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;<span class="comment">//若返回true继续事件，false反之</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onActive</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onActive();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onForeground</span><span class="params">(Intent intent)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onForeground(intent);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1 id="常见组件"><a href="#常见组件" class="headerlink" title="常见组件"></a>常见组件</h1><p>屏幕展示出来的元素，都称之为组件。比如华为已经提供的：文本，图片，进度条，输入框等。 </p><p>组件的顶级父类：<code>Component</code></p><h2 id="组件分类"><a href="#组件分类" class="headerlink" title="组件分类"></a>组件分类</h2><ul><li>显示类组件 只负责数据展示的，无法跟用户交互，比如展示文本的组件，展示图片的组件。 </li><li>交互类组件 可以跟用户交互的，比如用户可以点击的按钮组件，用户可以输入的文本框组件。</li><li>布局类组件 布局其实也是一种比较特殊的组件。</li></ul><h2 id="显示类组件"><a href="#显示类组件" class="headerlink" title="显示类组件"></a>显示类组件</h2><p>文本Text、图片Image、CommonDialog普通弹框组件、ToastDialog信息提示组件、时钟Clock、定时器 TickTimer、进度条ProgressBar等。。。</p><h3 id="Text文本组件"><a href="#Text文本组件" class="headerlink" title="Text文本组件"></a>Text文本组件</h3><ul><li>作用：数据展示</li></ul><p>常用属性：</p><p><img src="C:\Users\31330\Pictures\Typora\image-20220924174446530.png" alt="image-20220924174446530"></p><p>长度单位：px，vp，fp。</p><p>如果不写单位，默认单位是px</p><p>vp（虚拟像素）长度单位。1vp=3px</p><p>fp字体大小单位。</p><p>跑马灯效果：</p><p><img src="C:\Users\31330\Pictures\Typora\0000000000011111111.20220906142929.59811137630758749773991720039327.gif" alt=""></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 跑马灯效果</span></span><br><span class="line">text.setTruncationMode(Text.TruncationMode.AUTO_SCROLLING);</span><br><span class="line"><span class="comment">// 始终处于自动滚动状态</span></span><br><span class="line">text.setAutoScrollingCount(Text.AUTO_SCROLLING_FOREVER);</span><br><span class="line"><span class="comment">// 启动跑马灯效果</span></span><br><span class="line">text.startAutoScrolling();</span><br></pre></td></tr></table></figure><hr><h3 id="Image图片组件"><a href="#Image图片组件" class="headerlink" title="Image图片组件"></a>Image图片组件</h3><ul><li>作用：显示图片</li></ul><p>图片存放路径再media文件夹下</p><p><img src="C:\Users\31330\Pictures\Typora\image-20220924175525053.png" alt="image-20220924175525053"></p><p>图片剪切显示： </p><ul><li>代码中：可以用setClipGravity方法 </li><li>xml文件中：可以用clip_alignment属性 <ul><li>上、下、左、右、居中 </li><li>表示分别按照上、下、左、右、中间部位进行剪切。 </li></ul></li></ul><p>图片缩放显示： </p><ul><li>代码中：可以用setScaleMode方法 </li><li>xml文件中：可以用scale_mode属性 <ul><li>inside：表示将原图按比例缩放到与Image相同或更小的尺寸，并居中显示。 有可能不会填充组件 </li><li>center：表示不缩放，按Image大小显示原图中间部分。 </li><li>stretch：表示将原图缩放到与Image大小一致。 拉伸。将组件填充。</li><li>clip_center：表示将原图按比例缩放到与Image相同或更大的尺寸，并居中显示。超过组件的部分被剪 切掉。 </li><li>zoom_center：表示原图按照比例缩放到与Image最窄边一致，并居中显示。 </li><li>zoom_end：表示原图按照比例缩放到与Image最窄边一致，并靠结束端显示。 </li><li>zoom_start：表示原图按照比例缩放到与Image最窄边一致，并靠起始端显示。</li></ul></li></ul><hr><h3 id="CommonDialog普通弹框组件"><a href="#CommonDialog普通弹框组件" class="headerlink" title="CommonDialog普通弹框组件"></a>CommonDialog普通弹框组件</h3><h4 id="使用默认布局的基本用法"><a href="#使用默认布局的基本用法" class="headerlink" title="使用默认布局的基本用法"></a>使用默认布局的基本用法</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//把普通弹框弹出来就可以了</span></span><br><span class="line"><span class="comment">//1.创建弹框的对象</span></span><br><span class="line"><span class="comment">//this:当前弹框是哪展示在当前的界面中的。</span></span><br><span class="line"><span class="type">CommonDialog</span> <span class="variable">cd</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CommonDialog</span>(<span class="built_in">this</span>);</span><br><span class="line"><span class="comment">//2.因为弹框里面是有默认布局的</span></span><br><span class="line"><span class="comment">//设置标题</span></span><br><span class="line">cd.setTitleText(<span class="string">&quot;系统定位服务已关闭&quot;</span>);</span><br><span class="line"><span class="comment">//设置内容</span></span><br><span class="line">cd.setContentText(<span class="string">&quot;请打开定位服务，以便司机师傅能够准确接您上车&quot;</span>);</span><br><span class="line"><span class="comment">//自动关闭</span></span><br><span class="line">cd.setAutoClosable(<span class="literal">true</span>);</span><br><span class="line"><span class="comment">//设置按钮</span></span><br><span class="line"><span class="comment">//参数一：按钮的索引 0 1 2</span></span><br><span class="line"><span class="comment">//参数二：按钮上的文字</span></span><br><span class="line"><span class="comment">//参数三：点击了按钮之后能做什么</span></span><br><span class="line">cd.setButton(<span class="number">0</span>, <span class="string">&quot;设置&quot;</span>, <span class="keyword">new</span> <span class="title class_">IDialog</span>.ClickedListener() &#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(IDialog iDialog, <span class="type">int</span> i)</span> &#123;</span><br><span class="line"><span class="comment">//写上点击了设置之后，要做的事情。</span></span><br><span class="line"><span class="comment">//如果点击之后我不需要做任何事情，在第三个参数中传递null就可以了。</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line">cd.setButton(<span class="number">1</span>, <span class="string">&quot;取消&quot;</span>, <span class="keyword">new</span> <span class="title class_">IDialog</span>.ClickedListener() &#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(IDialog iDialog, <span class="type">int</span> i)</span> &#123;</span><br><span class="line"><span class="comment">//销毁弹框</span></span><br><span class="line">cd.destroy();</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//把弹框显示出来</span></span><br><span class="line">cd.show();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="自定义弹框布局"><a href="#自定义弹框布局" class="headerlink" title="自定义弹框布局"></a>自定义弹框布局</h4><p>新建弹窗布局文件，文件名： message_dialog.xml。如果需要更复杂的弹框，只要丰富xml文件中的组件即可。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">DirectionalLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:ohos</span>=<span class="string">&quot;http://schemas.huawei.com/res/ohos&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">ohos:height</span>=<span class="string">&quot;match_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">ohos:width</span>=<span class="string">&quot;match_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">ohos:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Text</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:id</span>=<span class="string">&quot;$+id:message&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:height</span>=<span class="string">&quot;match_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:width</span>=<span class="string">&quot;match_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:text_size</span>=<span class="string">&quot;40fp&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:id</span>=<span class="string">&quot;$+id:submit&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:height</span>=<span class="string">&quot;match_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:width</span>=<span class="string">&quot;match_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:background_element</span>=<span class="string">&quot;#21a896&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:text</span>=<span class="string">&quot;确定&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:text_size</span>=<span class="string">&quot;40fp&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:id</span>=<span class="string">&quot;$+id:cancel&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:height</span>=<span class="string">&quot;match_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:width</span>=<span class="string">&quot;match_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:background_element</span>=<span class="string">&quot;#0021D9&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:text</span>=<span class="string">&quot;取消&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:text_size</span>=<span class="string">&quot;40fp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:top_margin</span>=<span class="string">&quot;10vp&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">DirectionalLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><p>java类：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.roydon.myapplication1.ResourceTable;</span><br><span class="line"><span class="keyword">import</span> ohos.aafwk.ability.AbilitySlice;</span><br><span class="line"><span class="keyword">import</span> ohos.aafwk.content.Intent;</span><br><span class="line"><span class="keyword">import</span> ohos.agp.components.*;</span><br><span class="line"><span class="keyword">import</span> ohos.agp.window.dialog.CommonDialog;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainAbilitySlice</span> <span class="keyword">extends</span> <span class="title class_">AbilitySlice</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onStart</span><span class="params">(Intent intent)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onStart(intent);</span><br><span class="line">        <span class="built_in">super</span>.setUIContent(ResourceTable.Layout_ability_main);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//创建一个弹框对象</span></span><br><span class="line">        <span class="type">CommonDialog</span> <span class="variable">cd</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CommonDialog</span>(<span class="built_in">this</span>);</span><br><span class="line">        cd.setCornerRadius(<span class="number">30</span>);<span class="comment">//设置弹窗圆角</span></span><br><span class="line">        <span class="comment">//把messagedislog的xml文件加载到内存当中。交给弹框并展示出来。</span></span><br><span class="line">        <span class="comment">//加载xml文件并获得一个布局对象</span></span><br><span class="line">        <span class="comment">//parse方法：加载一个xml文件，返回一个布局对象。</span></span><br><span class="line">        <span class="comment">//参数一：要加载的xml文件</span></span><br><span class="line">        <span class="comment">//参数二：该xml文件是否跟其他xml文件有关。如果无关是独立的，就写null就可以了</span></span><br><span class="line">        <span class="comment">//参数三：如果文件是独立的，那么直接写false</span></span><br><span class="line">        <span class="type">DirectionalLayout</span> <span class="variable">dl</span> <span class="operator">=</span> (DirectionalLayout) LayoutScatter.getInstance(<span class="built_in">this</span>).parse(ResourceTable.Layout_message_dialog, <span class="literal">null</span>, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Text</span> <span class="variable">title</span> <span class="operator">=</span> (Text) dl.findComponentById(ResourceTable.Id_message);</span><br><span class="line">        <span class="type">Button</span> <span class="variable">submit</span> <span class="operator">=</span> (Button) dl.findComponentById(ResourceTable.Id_submit);</span><br><span class="line">        <span class="type">Button</span> <span class="variable">cancel</span> <span class="operator">=</span> (Button) dl.findComponentById(ResourceTable.Id_cancel);</span><br><span class="line"></span><br><span class="line">        title.setText(<span class="string">&quot;msg&quot;</span>);</span><br><span class="line">        <span class="comment">//给两个按钮添加单击事件</span></span><br><span class="line">        submit.setClickedListener(<span class="keyword">new</span> <span class="title class_">Component</span>.ClickedListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(Component component)</span> &#123;</span><br><span class="line">                title.setText(<span class="string">&quot;点击了确定按钮&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        cancel.setClickedListener(<span class="keyword">new</span> <span class="title class_">Component</span>.ClickedListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(Component component)</span> &#123;</span><br><span class="line">                <span class="comment">//当点击了取消按钮之后，把弹框给关闭</span></span><br><span class="line">                cd.destroy();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">//此时布局对象跟弹框还没有任何关系.还需要把布局对象交给弹框才可以</span></span><br><span class="line">        cd.setContentCustomComponent(dl);</span><br><span class="line">        <span class="comment">//让弹框展示出来</span></span><br><span class="line">        cd.show();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onActive</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onActive();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onForeground</span><span class="params">(Intent intent)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onForeground(intent);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>封装成工具类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.roydon.myapplication1.ResourceTable;</span><br><span class="line"><span class="keyword">import</span> ohos.agp.components.*;</span><br><span class="line"><span class="keyword">import</span> ohos.agp.window.dialog.CommonDialog;</span><br><span class="line"><span class="keyword">import</span> ohos.app.Context;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyDialog</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">showDialog</span><span class="params">(Context context, String msg)</span> &#123;</span><br><span class="line">        <span class="type">CommonDialog</span> <span class="variable">cd</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CommonDialog</span>(context);</span><br><span class="line">        cd.setCornerRadius(<span class="number">30</span>);</span><br><span class="line">        <span class="type">DirectionalLayout</span> <span class="variable">dl</span> <span class="operator">=</span> (DirectionalLayout) LayoutScatter.getInstance(context).parse(ResourceTable.Layout_message_dialog, <span class="literal">null</span>, <span class="literal">false</span>);</span><br><span class="line">        <span class="type">Text</span> <span class="variable">title</span> <span class="operator">=</span> (Text) dl.findComponentById(ResourceTable.Id_message);</span><br><span class="line">        <span class="type">Button</span> <span class="variable">submit</span> <span class="operator">=</span> (Button) dl.findComponentById(ResourceTable.Id_submit);</span><br><span class="line">        <span class="type">Button</span> <span class="variable">cancel</span> <span class="operator">=</span> (Button) dl.findComponentById(ResourceTable.Id_cancel);</span><br><span class="line">        title.setText(msg);</span><br><span class="line">        submit.setClickedListener(<span class="keyword">new</span> <span class="title class_">Component</span>.ClickedListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(Component component)</span> &#123;</span><br><span class="line">                title.setText(<span class="string">&quot;点击了确定按钮&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        cancel.setClickedListener(<span class="keyword">new</span> <span class="title class_">Component</span>.ClickedListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(Component component)</span> &#123;</span><br><span class="line">                cd.destroy();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        cd.setContentCustomComponent(dl);</span><br><span class="line">        cd.show();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="ToastDialog信息提示组件"><a href="#ToastDialog信息提示组件" class="headerlink" title="ToastDialog信息提示组件"></a>ToastDialog信息提示组件</h3><p>也叫做吐司弹框。就是一个小提示而已。 ToastDialog是CommonDialog的子类，所以具备CommonDialog相关的特性。 也包含了标题，内容还有选择按钮。 一般来讲，吐司弹框我们只用中间的内容部分，因为他出现的意义就是为了提示信息的。</p><p>基本使用：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ToastDialog</span> <span class="variable">t</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ToastDialog</span>(<span class="built_in">this</span>);</span><br><span class="line">t.setText(<span class="string">&quot;要显示的内容&quot;</span>)</span><br><span class="line">t.setAlignment(LayoutAlignment.CENTER);</span><br><span class="line">t.show();</span><br></pre></td></tr></table></figure><p>相关设置：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ToastDialog</span> <span class="variable">toastDialog</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ToastDialog</span>(<span class="built_in">this</span>);</span><br><span class="line"><span class="comment">//设置的大小。如果不写，默认包裹内容</span></span><br><span class="line">toastDialog.setSize(DirectionalLayout.LayoutConfig.MATCH_CONTENT,</span><br><span class="line">DirectionalLayout.LayoutConfig.MATCH_CONTENT);</span><br><span class="line"><span class="comment">//设置持续时间。如果不写，默认2秒</span></span><br><span class="line">toastDialog.setDuration(<span class="number">2000</span>);</span><br><span class="line"><span class="comment">//设置自动关闭。如果不写，就是自动关闭</span></span><br><span class="line">toastDialog.setAutoClosable(<span class="literal">true</span>);</span><br><span class="line"><span class="comment">//设置位置。如果不写，默认居中</span></span><br><span class="line">toastDialog.setAlignment(LayoutAlignment.CENTER);</span><br><span class="line"><span class="comment">//设置提示信息内容</span></span><br><span class="line">toastDialog.setText(<span class="string">&quot;要显示的内容&quot;</span>);</span><br><span class="line"><span class="comment">//让吐司展示出来</span></span><br><span class="line">toastDialog.show();</span><br></pre></td></tr></table></figure><p>自定义布局和抽取工具类：</p><p>布局xml文件命名为mytoast.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">DirectionalLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:ohos</span>=<span class="string">&quot;http://schemas.huawei.com/res/ohos&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">ohos:height</span>=<span class="string">&quot;match_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">ohos:width</span>=<span class="string">&quot;match_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">ohos:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Text</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:id</span>=<span class="string">&quot;$+id:msg&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:height</span>=<span class="string">&quot;match_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:width</span>=<span class="string">&quot;match_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:text_size</span>=<span class="string">&quot;16fp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:text_color</span>=<span class="string">&quot;#FFFFFF&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:text_alignment</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:padding</span>=<span class="string">&quot;20vp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:margin</span>=<span class="string">&quot;30vp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:multiple_lines</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:background_element</span>=<span class="string">&quot;#FF5B3535&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">DirectionalLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><p>工具类：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.roydon.myapplication1.ResourceTable;</span><br><span class="line"><span class="keyword">import</span> ohos.agp.components.DirectionalLayout;</span><br><span class="line"><span class="keyword">import</span> ohos.agp.components.LayoutScatter;</span><br><span class="line"><span class="keyword">import</span> ohos.agp.utils.LayoutAlignment;</span><br><span class="line"><span class="keyword">import</span> ohos.agp.window.dialog.ToastDialog;</span><br><span class="line"><span class="keyword">import</span> ohos.app.Context;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyToast</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">showDialog</span><span class="params">(Context context, String msg)</span> &#123;</span><br><span class="line">        <span class="comment">//加载xml布局文件</span></span><br><span class="line">        <span class="type">DirectionalLayout</span> <span class="variable">dl</span> <span class="operator">=</span> (DirectionalLayout) LayoutScatter.getInstance(context).parse(ResourceTable.Layout_mytoast, <span class="literal">null</span>, <span class="literal">false</span>);</span><br><span class="line">        <span class="type">ToastDialog</span> <span class="variable">td</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ToastDialog</span>(context);</span><br><span class="line">        td.setSize(DirectionalLayout.LayoutConfig.MATCH_CONTENT, DirectionalLayout.LayoutConfig.MATCH_CONTENT);</span><br><span class="line">        td.setDuration(<span class="number">2000</span>);<span class="comment">//设置出现的时间</span></span><br><span class="line">        td.setAutoClosable(<span class="literal">true</span>);<span class="comment">//设置自动关闭</span></span><br><span class="line">        td.setAlignment(LayoutAlignment.BOTTOM);<span class="comment">//对其方式</span></span><br><span class="line">        td.setText(msg);</span><br><span class="line">        td.show();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Clock时钟组件"><a href="#Clock时钟组件" class="headerlink" title="Clock时钟组件"></a>Clock时钟组件</h3><p>是Text的子类，所以可以使用Text的一些属性。</p><p>常用属性：</p><p><img src="C:\Users\31330\Pictures\Typora\image-20220924182911591.png" alt="image-20220924182911591"></p><p>常用方法：</p><p><img src="C:\Users\31330\Pictures\Typora\image-20220924182926560.png" alt="image-20220924182926560"></p><p>指定12小时展示格式 clock.setFormatIn12HourMode(“yyyy年MM月dd日 hh:mm:ss a”);</p><p>指定24小时展示格式 clock.setFormatIn24HourMode(“yyyy年MM月dd日 HH:mm:ss”);</p><p>拓展：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//将字符串表示的时间（2021-01-01 11:11:11）转成毫秒值</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">dateToTimeStamp</span><span class="params">(String s)</span> <span class="keyword">throws</span> ParseException&#123;</span><br><span class="line"><span class="type">SimpleDateFormat</span> <span class="variable">simpleDateFormat</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>); </span><br><span class="line"><span class="type">Date</span> <span class="variable">date</span> <span class="operator">=</span> simpleDateFormat.parse(s); </span><br><span class="line"><span class="type">long</span> <span class="variable">ts</span> <span class="operator">=</span> date.getTime(); </span><br><span class="line"><span class="type">String</span> <span class="variable">res</span> <span class="operator">=</span> String.valueOf(ts); </span><br><span class="line"><span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//将时间的毫秒值转换为时间</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">timeStampToDate</span><span class="params">(String s)</span>&#123;</span><br><span class="line"><span class="type">SimpleDateFormat</span> <span class="variable">simpleDateFormat</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>); </span><br><span class="line"><span class="type">long</span> <span class="variable">lt</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Long</span>(s); </span><br><span class="line"><span class="type">Date</span> <span class="variable">date</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>(lt); </span><br><span class="line"><span class="type">String</span> <span class="variable">res</span> <span class="operator">=</span> simpleDateFormat.format(date);</span><br><span class="line"><span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="TickTimer定时器组件"><a href="#TickTimer定时器组件" class="headerlink" title="TickTimer定时器组件"></a>TickTimer定时器组件</h3><p>是Text的子类，所以可以使用Text的一些属性。</p><p><img src="C:\Users\31330\Pictures\Typora\image-20220924183532255.png" alt="image-20220924183532255"></p><p><img src="C:\Users\31330\Pictures\Typora\image-20220924183540014.png" alt="image-20220924183540014"></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">TickTimer</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:id</span>=<span class="string">&quot;$+id:my_tt&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:height</span>=<span class="string">&quot;60vp&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:width</span>=<span class="string">&quot;250vp&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:padding</span>=<span class="string">&quot;10vp&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:text_size</span>=<span class="string">&quot;20fp&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:text_color</span>=<span class="string">&quot;#ffffff&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:background_element</span>=<span class="string">&quot;#0000ff&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:text_alignment</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:layout_alignment</span>=<span class="string">&quot;horizontal_center&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:top_margin</span>=<span class="string">&quot;50vp&quot;</span> /&gt;</span></span><br><span class="line">//没有设置时间，默认是从1970年1月1日开始。</span><br></pre></td></tr></table></figure><hr><h3 id="ProgressBar进度条组件"><a href="#ProgressBar进度条组件" class="headerlink" title="ProgressBar进度条组件"></a>ProgressBar进度条组件</h3><p><img src="C:\Users\31330\Pictures\Typora\image-20220924183828504.png" alt="image-20220924183828504"></p><p><img src="C:\Users\31330\Pictures\Typora\image-20220924183839370.png" alt="image-20220924183839370"></p><p>.getProgress();//获取进度条里面原本的值</p><p>.setProgressValue(progress);//设置进度值</p><p>.setProgressHintText(progress + “%”);//修改提示文字进度</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ProgressBar</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:id</span>=<span class="string">&quot;$+id:pb&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:height</span>=<span class="string">&quot;match_content&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:width</span>=<span class="string">&quot;300vp&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:progress</span>=<span class="string">&quot;0&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:progress_hint_text</span>=<span class="string">&quot;0%&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:progress_hint_text_color</span>=<span class="string">&quot;#000000&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:progress_width</span>=<span class="string">&quot;50vp&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:progress_color</span>=<span class="string">&quot;#FF0000&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:max</span>=<span class="string">&quot;100&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:min</span>=<span class="string">&quot;0&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><hr><h3 id="RoundProgressBar"><a href="#RoundProgressBar" class="headerlink" title="RoundProgressBar"></a>RoundProgressBar</h3><p>是ProgressBar的子类，用法跟ProgressBar一模一样，只是显示的方式不一样。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">RoundProgressBar</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:height</span>=<span class="string">&quot;300vp&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:width</span>=<span class="string">&quot;300vp&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:progress_hint_text</span>=<span class="string">&quot;80%&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:progress_hint_text_size</span>=<span class="string">&quot;50vp&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:progress_hint_text_color</span>=<span class="string">&quot;#000000&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:progress</span>=<span class="string">&quot;80&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:progress_width</span>=<span class="string">&quot;20vp&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:progress_color</span>=<span class="string">&quot;#FF0000&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:max</span>=<span class="string">&quot;100&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:min</span>=<span class="string">&quot;0&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><hr><h2 id="交互类组件"><a href="#交互类组件" class="headerlink" title="交互类组件"></a>交互类组件</h2><h3 id="TextField文本输入框组件"><a href="#TextField文本输入框组件" class="headerlink" title="TextField文本输入框组件"></a>TextField文本输入框组件</h3><p>是Text的子类，用来进行用户输入数据的。</p><p><img src="C:\Users\31330\Pictures\Typora\image-20220924184518703.png" alt="image-20220924184518703"></p><p>将文本框中的密码变成明文：textField.setTextInputType(InputAttribute.PATTERN_NULL);</p><p>将文本框中的密码变回密文：textField.setTextInputType(InputAttribute.PATTERN_PASSWORD);</p><p>取消按钮设置位置：int x = r.nextInt(500); int y = r.nextInt(1000);cacel.setTranslation(x,y);</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">TextField</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:id</span>=<span class="string">&quot;$+id:text&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:height</span>=<span class="string">&quot;50vp&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:width</span>=<span class="string">&quot;319vp&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:background_element</span>=<span class="string">&quot;#FFFFFF&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:hint</span>=<span class="string">&quot;请输入信息&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:hint_color</span>=<span class="string">&quot;#999999&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:layout_alignment</span>=<span class="string">&quot;horizontal_center&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:text_alignment</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:text_size</span>=<span class="string">&quot;17fp&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:top_margin</span>=<span class="string">&quot;100vp&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><hr><h3 id="Checkbox多选框组件"><a href="#Checkbox多选框组件" class="headerlink" title="Checkbox多选框组件"></a>Checkbox多选框组件</h3><p>父类是AbsButton，而AbsButton的父类是Button。 当我们需要同时选择多个元素的时候就需要用到多选框组件。 </p><p>比如：发送图片的时候需要多选，注册的时候选择爱好也需要多选等。</p><p><img src="C:\Users\31330\Pictures\Typora\image-20220924185228886.png" alt="image-20220924185228886"></p><p><img src="C:\Users\31330\Pictures\Typora\image-20220924185541682.png" alt="image-20220924185541682"></p><p>可以给多选框添加一个状态监听事件 checkbox.setCheckedStateChangedListener(this);</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainAbilitySlice</span> <span class="keyword">extends</span> <span class="title class_">AbilitySlice</span> <span class="keyword">implements</span> <span class="title class_">AbsButton</span>.CheckedStateChangedListener</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//当多选框的状态被改变之后，就会调用这个方法</span></span><br><span class="line"><span class="comment">//参数一：absButton就表示状态被改变的那个多选框</span></span><br><span class="line"><span class="comment">//参数二：表示当前多选框的状态，true选中 false 未选中</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCheckedChanged</span><span class="params">(AbsButton absButton, <span class="type">boolean</span> b)</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(b)&#123;</span><br><span class="line">ToastUtils.showDialog(<span class="built_in">this</span>,<span class="string">&quot;被选中&quot;</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">ToastUtils.showDialog(<span class="built_in">this</span>,<span class="string">&quot;未被选中&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="RadioButton单选框组件"><a href="#RadioButton单选框组件" class="headerlink" title="RadioButton单选框组件"></a>RadioButton单选框组件</h3><p>父类是AbsButton，而AbsButton的父类是Button。在使用的时候需要用到单选按钮的按钮组。 RadioContainer，在一组内多选按钮只能选择其中一个。</p><p>当需要监听单选框的状态时，不要用AbsButton里面的CheckedStateChangedListener。而是给按钮组 RadioContainer添加事件。用RadioContainer里面的CheckedStateChangedListener。</p><p>按钮组RadioContainer常见方法：.setMarkChangedListener () //添加状态监听事件，可以监听按钮组里面单选按钮的状态是否改变</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainAbilitySlice</span> <span class="keyword">extends</span> <span class="title class_">AbilitySlice</span> <span class="keyword">implements</span> <span class="title class_">RadioContainer</span>.CheckedStateChangedListener</span><br></pre></td></tr></table></figure><p><img src="C:\Users\31330\Pictures\Typora\image-20220924190522553.png" alt="image-20220924190522553"></p><p><img src="C:\Users\31330\Pictures\Typora\image-20220924190530758.png" alt="image-20220924190530758"></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">RadioContainer</span></span></span><br><span class="line"><span class="tag">    <span class="attr">ohos:id</span>=<span class="string">&quot;$+id:rc&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">ohos:height</span>=<span class="string">&quot;match_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">ohos:width</span>=<span class="string">&quot;match_content&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">RadioButton</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:id</span>=<span class="string">&quot;$+id:boy&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:height</span>=<span class="string">&quot;match_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:width</span>=<span class="string">&quot;match_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:background_element</span>=<span class="string">&quot;#21a8fd&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:marked</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:text</span>=<span class="string">&quot;男&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:text_alignment</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:text_size</span>=<span class="string">&quot;30fp&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">RadioButton</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:id</span>=<span class="string">&quot;$+id:girl&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:height</span>=<span class="string">&quot;match_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:width</span>=<span class="string">&quot;match_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:background_element</span>=<span class="string">&quot;#21a8fd&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:marked</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:text</span>=<span class="string">&quot;女&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:text_alignment</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:text_size</span>=<span class="string">&quot;30fp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:top_margin</span>=<span class="string">&quot;10vp&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">RadioContainer</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RadioContainer</span> <span class="variable">rc</span> <span class="operator">=</span> (RadioContainer) findComponentById(ResourceTable.Id_rc);</span><br><span class="line">rc.setMarkChangedListener(<span class="built_in">this</span>);</span><br><span class="line"><span class="comment">//当按钮组里面的按钮状态发生改变的时候，就会触发下面的方法</span></span><br><span class="line"><span class="comment">//参数一：单选框按钮组的对象</span></span><br><span class="line"><span class="comment">//参数二：索引，表示当前状态改变的是该按钮组中第几个按钮</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCheckedChanged</span><span class="params">(RadioContainer radioContainer, <span class="type">int</span> i)</span> &#123;</span><br><span class="line"><span class="type">RadioButton</span> <span class="variable">rb</span> <span class="operator">=</span> (RadioButton) radioContainer.getComponentAt(i);</span><br><span class="line"><span class="type">String</span> <span class="variable">text</span> <span class="operator">=</span> rb.getText();</span><br><span class="line"><span class="keyword">if</span>(rb.isChecked())&#123;</span><br><span class="line">ToastUtils.showDialog(<span class="built_in">this</span>,text + <span class="string">&quot;被选中了&quot;</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">ToastUtils.showDialog(<span class="built_in">this</span>,text + <span class="string">&quot;被取消选中了&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="Switch组件"><a href="#Switch组件" class="headerlink" title="Switch组件"></a>Switch组件</h3><blockquote><p>滑道背景 ohos:track_element=”#FF0000” </p><p>滑块颜色 ohos:thumb_element=”#07C160”</p></blockquote><p><img src="C:\Users\31330\Pictures\Typora\image-20220924192225391.png" alt="image-20220924192225391"></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Switch</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:id</span>=<span class="string">&quot;$+id:choose&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:height</span>=<span class="string">&quot;40vp&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:width</span>=<span class="string">&quot;100vp&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:text_state_on</span>=<span class="string">&quot;开&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:text_state_off</span>=<span class="string">&quot;关&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:text_size</span>=<span class="string">&quot;20vp&quot;</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br></pre></td></tr></table></figure><p>监听状态改变：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainAbilitySlice</span> <span class="keyword">extends</span> <span class="title class_">AbilitySlice</span> <span class="keyword">implements</span> <span class="title class_">AbsButton</span>.CheckedStateChangedListener</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Switch</span> <span class="variable">choose</span> <span class="operator">=</span> (Switch) findComponentById(ResourceTable.Id_choose);</span><br><span class="line">choose.setCheckedStateChangedListener(<span class="built_in">this</span>);</span><br><span class="line"><span class="comment">//当开关组件状态发生改变的时候，那么就会调用这个方法</span></span><br><span class="line"><span class="comment">//参数一：表示状态改变的那个开关组件</span></span><br><span class="line"><span class="comment">//参数二：表示组件当前的状态</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCheckedChanged</span><span class="params">(AbsButton absButton, <span class="type">boolean</span> b)</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(b)&#123;</span><br><span class="line"><span class="comment">//ToastUtils.showDialog(this,&quot;开关开启了&quot;);</span></span><br><span class="line"><span class="comment">//可以打开某个设置</span></span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="comment">//ToastUtils.showDialog(this,&quot;开关关闭了&quot;);</span></span><br><span class="line"><span class="comment">//可以关闭某个设置</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="Slider滑块组件"><a href="#Slider滑块组件" class="headerlink" title="Slider滑块组件"></a>Slider滑块组件</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Slider</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:height</span>=<span class="string">&quot;50vp&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:width</span>=<span class="string">&quot;300vp&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">进度颜色</span>，<span class="attr">左边的</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:progress_color</span>=<span class="string">&quot;#FF0000&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">滑块颜色</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:thumb_element</span>=<span class="string">&quot;#00FF00&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">未完成进度颜色</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:background_instruct_element</span>=<span class="string">&quot;#0000FF&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">次一级的进度值</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:vice_progress</span>=<span class="string">&quot;80&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">次一级的进度颜色</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:vice_progress_element</span>=<span class="string">&quot;#923456&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">是否允许用户操作滑块</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:enabled</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">max</span> = <span class="string">&quot;100&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">min</span> = <span class="string">&quot;0&quot;</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br></pre></td></tr></table></figure><p><img src="C:\Users\31330\Pictures\Typora\image-20220924192533960.png" alt="image-20220924192533960"></p><p>事件：ValueChangedListener（值改变事件）</p><p>接口中的方法：</p><p>①：onProgressUpdated（参数一，参数二，参数三） 当滑块组件中的值改变的时候，调用该方法。 </p><blockquote><p>参数一：滑块对象 </p><p>参数二：当前进度值 </p><p>参数三：当前滑块组件是否可以调节进度</p></blockquote><p>②：onTouchStart 按上滑块的时候触发 </p><p>③：onTouchend 离开滑块的时候触发</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainAbilitySlice</span> <span class="keyword">extends</span> <span class="title class_">AbilitySlice</span> <span class="keyword">implements</span> <span class="title class_">Slider</span>.ValueChangedListener</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Slider</span> <span class="variable">slider</span> <span class="operator">=</span> (Slider) findComponentById(ResourceTable.Id_slider);</span><br><span class="line">slider.setValueChangedListener(<span class="built_in">this</span>);</span><br><span class="line"><span class="comment">//当滑块组件中的进度值改变的时候，就会调用这个方法</span></span><br><span class="line"><span class="comment">//参数一：滑块组件对象</span></span><br><span class="line"><span class="comment">//参数二：当前的进度值</span></span><br><span class="line"><span class="comment">//参数三：当前滑块是否可以被滑动</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onProgressUpdated</span><span class="params">(Slider slider, <span class="type">int</span> i, <span class="type">boolean</span> b)</span> &#123;</span><br><span class="line">ToastUtils.showDialog(<span class="built_in">this</span>,<span class="string">&quot;当前的进度值为：&quot;</span> + i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//当用户用鼠标或者用手指</span></span><br><span class="line"><span class="comment">//按下滑块不松的时候，会调用该方法</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onTouchStart</span><span class="params">(Slider slider)</span> &#123;</span><br><span class="line">ToastUtils.showDialog(<span class="built_in">this</span>,<span class="string">&quot;按下不松&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//松开滑块的时候，会调用该方法。</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onTouchEnd</span><span class="params">(Slider slider)</span> &#123;</span><br><span class="line">ToastUtils.showDialog(<span class="built_in">this</span>,<span class="string">&quot;松开&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="ListContainer"><a href="#ListContainer" class="headerlink" title="ListContainer"></a>ListContainer</h3><p>ListContainer是一个列表容器类组件。在这里的每一行，我们都可以看做是一个item。如下图所示，包裹了所有 item的红色的容器，就是ListContainer</p><blockquote><p>注意细节： </p><p>① 每一行其实就是一个独立的item。</p><p> ② 在屏幕的上面和下面，还有很多没有展示出来的item。 当我们用手指往上滑动的时候，就可以到下面的item。 当我们用手指往下滑动的时候，就可以到上面的item。 只不过划出屏幕的item会被销毁，而没有划入屏幕的item 还没有创建出来。 </p><p>③ 如果item过多，在内存会有垃圾。这个问题下面学习。</p></blockquote><p><img src="C:\Users\31330\Pictures\Typora\image-20220924193634671.png" alt="image-20220924193634671"></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ListContainer</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:id</span>=<span class="string">&quot;$+id:listcontainer&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:layout_alignment</span>=<span class="string">&quot;horizontal_center&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><p>实现步骤： </p><ol><li>给item去指定一个布局xml文件 </li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">DirectionalLayout</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:ohos</span>=<span class="string">&quot;http://schemas.huawei.com/res/ohos&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:height</span>=<span class="string">&quot;match_content&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:width</span>=<span class="string">&quot;match_content&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:orientation</span>=<span class="string">&quot;horizontal&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Text</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:id</span>=<span class="string">&quot;$+id:text&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:height</span>=<span class="string">&quot;match_content&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:width</span>=<span class="string">&quot;match_content&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:text</span>=<span class="string">&quot;00:00&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:text_size</span>=<span class="string">&quot;20fp&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">DirectionalLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><ol><li>书写一个javabean类表示item </li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Item</span> &#123;</span><br><span class="line"><span class="comment">//记录的值就是赋值给item里面的text</span></span><br><span class="line"><span class="keyword">private</span> String text;</span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Item</span><span class="params">()</span> &#123;&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Item</span><span class="params">(String text)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.text = text;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getText</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> text;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setText</span><span class="params">(String text)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.text = text;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>写一个适配器类去管理item </li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.roydon.listcontainerdemo1.ResourceTable;</span><br><span class="line"><span class="keyword">import</span> com.roydon.listcontainerdemo1.bean.Item;</span><br><span class="line"><span class="keyword">import</span> ohos.aafwk.ability.AbilitySlice;</span><br><span class="line"><span class="keyword">import</span> ohos.agp.components.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ItemProvider</span> <span class="keyword">extends</span> <span class="title class_">BaseItemProvider</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> ArrayList&lt;Item&gt; list;</span><br><span class="line">    <span class="keyword">private</span> AbilitySlice as;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ItemProvider</span><span class="params">(ArrayList&lt;Item&gt; list, AbilitySlice as)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.list = list;</span><br><span class="line">        <span class="built_in">this</span>.as = as;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> ArrayList&lt;Item&gt; <span class="title function_">getList</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setList</span><span class="params">(ArrayList&lt;Item&gt; list)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.list = list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> AbilitySlice <span class="title function_">getAs</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> as;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAs</span><span class="params">(AbilitySlice as)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.as = as;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCount</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> list.size();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getItem</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (list != <span class="literal">null</span> &amp;&amp; i &gt;= <span class="number">0</span> &amp;&amp; i &lt; list.size()) &#123;</span><br><span class="line">            <span class="keyword">return</span> list.get(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">getItemId</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Component <span class="title function_">getComponent</span><span class="params">(<span class="type">int</span> i, Component component, ComponentContainer componentContainer)</span> &#123;</span><br><span class="line">        DirectionalLayout dl;</span><br><span class="line">        <span class="keyword">if</span> (component != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="comment">// 优化</span></span><br><span class="line">            dl = (DirectionalLayout) component;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            dl = (DirectionalLayout) LayoutScatter.getInstance(as).parse(ResourceTable.Layout_list_item, <span class="literal">null</span>, <span class="literal">false</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">Text</span> <span class="variable">text</span> <span class="operator">=</span> (Text) dl.findComponentById(ResourceTable.Id_text);</span><br><span class="line">        text.setText(list.get(i).getText());</span><br><span class="line">        <span class="keyword">return</span> dl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>将适配器交给ListContainer</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.roydon.listcontainerdemo1.ResourceTable;</span><br><span class="line"><span class="keyword">import</span> com.roydon.listcontainerdemo1.bean.Item;</span><br><span class="line"><span class="keyword">import</span> com.roydon.listcontainerdemo1.provider.ItemProvider;</span><br><span class="line"><span class="keyword">import</span> ohos.aafwk.ability.AbilitySlice;</span><br><span class="line"><span class="keyword">import</span> ohos.aafwk.content.Intent;</span><br><span class="line"><span class="keyword">import</span> ohos.agp.components.ListContainer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainAbilitySlice</span> <span class="keyword">extends</span> <span class="title class_">AbilitySlice</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onStart</span><span class="params">(Intent intent)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onStart(intent);</span><br><span class="line">        <span class="built_in">super</span>.setUIContent(ResourceTable.Layout_ability_main);</span><br><span class="line"></span><br><span class="line">        <span class="type">ListContainer</span> <span class="variable">listContainer</span> <span class="operator">=</span> (ListContainer) findComponentById(ResourceTable.Id_listContainer);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//1.数据传给item视图</span></span><br><span class="line">        <span class="type">ItemProvider</span> <span class="variable">itemProvider</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ItemProvider</span>(getData(), <span class="built_in">this</span>);</span><br><span class="line">        <span class="comment">//2.item视图传到ListContainer</span></span><br><span class="line">        listContainer.setItemProvider(itemProvider);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onActive</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onActive();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onForeground</span><span class="params">(Intent intent)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onForeground(intent);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> ArrayList&lt;Item&gt; <span class="title function_">getData</span><span class="params">()</span> &#123;</span><br><span class="line">        ArrayList&lt;Item&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">50</span>; i++) &#123;</span><br><span class="line">            list.add(<span class="keyword">new</span> <span class="title class_">Item</span>(<span class="string">&quot;item--&gt;&quot;</span> + i));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p>案例：微信消息</p><h3 id="Picker"><a href="#Picker" class="headerlink" title="Picker"></a>Picker</h3><p>picker是滑动选择器组件。在一些app中选择地址的时候会用到，但是一般是三个picker选择器组合在一起使用。 如图所示：</p><p><img src="C:\Users\31330\Pictures\Typora\image-20220924202616824.png" alt="image-20220924202616824"></p><p>案例：选择今天星期几</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Picker</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:id</span>=<span class="string">&quot;$+id:picker&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:height</span>=<span class="string">&quot;match_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:width</span>=<span class="string">&quot;100vp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:max_value</span>=<span class="string">&quot;6&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:min_value</span>=<span class="string">&quot;0&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:normal_text_color</span>=<span class="string">&quot;#21a8fd&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:normal_text_size</span>=<span class="string">&quot;20fp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:selected_text_color</span>=<span class="string">&quot;#FF0000&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:selected_text_size</span>=<span class="string">&quot;20fp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:shader_color</span>=<span class="string">&quot;pink&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:value</span>=<span class="string">&quot;0&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Picker</span> <span class="variable">picker</span> <span class="operator">=</span> (Picker) findComponentById(ResourceTable.Id_picker);</span><br><span class="line"><span class="comment">//把要展示的内容全部放在集合中</span></span><br><span class="line">ArrayList&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">list.add(<span class="string">&quot;星期一&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;星期二&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;星期三&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;星期四&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;星期五&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;星期六&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;星期日&quot;</span>);</span><br><span class="line"><span class="comment">//设置内容</span></span><br><span class="line">picker.setFormatter(list::get)</span><br></pre></td></tr></table></figure><p>Picker联动时</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainAbilitySlice</span> <span class="keyword">extends</span> <span class="title class_">AbilitySlice</span> <span class="keyword">implements</span> <span class="title class_">Picker</span>.ValueChangedListener</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//参数一：表示当前数据变动的那个滑动选择器对象</span></span><br><span class="line"><span class="comment">//参数二：表示旧值 (原来选中的值)</span></span><br><span class="line"><span class="comment">//参数三：表示新值（现在选中的值）</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onValueChanged</span><span class="params">(Picker picker, <span class="type">int</span> oldValue, <span class="type">int</span> newValue)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (picker == province) &#123;</span><br><span class="line">     <span class="type">Province</span> <span class="variable">chooseProvince</span> <span class="operator">=</span> provinceList.get(newValue);<span class="comment">//获取当前省份</span></span><br><span class="line">        </span><br><span class="line">        city.setMaxValue(chooseProvince.getList().size() - <span class="number">1</span>);</span><br><span class="line">        city.setFormatter(i -&gt; chooseProvince.getList().get(i));</span><br><span class="line">        city.setValue(<span class="number">0</span>);<span class="comment">//当前面更换省份的时候，中间的城市需要从第一个开始展示</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>案例：省市区三级联动</p><hr><h3 id="DatePicker和TimePicker"><a href="#DatePicker和TimePicker" class="headerlink" title="DatePicker和TimePicker"></a>DatePicker和TimePicker</h3><p> DatePicker和TimePicker都是时间选择器。</p><blockquote><p>DatePicker：表示年月日 </p><p>TimePicker：表示时分秒</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">DatePicker</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:id</span>=<span class="string">&quot;$+id:datepicker&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:height</span>=<span class="string">&quot;match_content&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:width</span>=<span class="string">&quot;300vp&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:normal_text_size</span>=<span class="string">&quot;20fp&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:selected_text_size</span>=<span class="string">&quot;20fp&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">TimePicker</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:id</span>=<span class="string">&quot;$+id:timepicker&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:height</span>=<span class="string">&quot;match_content&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:width</span>=<span class="string">&quot;300vp&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:normal_text_size</span>=<span class="string">&quot;20fp&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">ohos:selected_text_size</span>=<span class="string">&quot;20fp&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><p>DatePicker监听：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainAbilitySlice</span> <span class="keyword">extends</span> <span class="title class_">AbilitySlice</span> <span class="keyword">implements</span> <span class="title class_">DatePicker</span>.ValueChangedListener</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">DatePicker</span> <span class="variable">datePicker</span> <span class="operator">=</span> (DatePicker) findComponentById(ResourceTable.Id_datepicker);</span><br><span class="line">datePicker.setValueChangedListener(<span class="built_in">this</span>);</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onValueChanged</span><span class="params">(DatePicker datePicker, <span class="type">int</span> year, <span class="type">int</span> month, <span class="type">int</span> day)</span> &#123;</span><br><span class="line">text.setText(year + <span class="string">&quot;年&quot;</span> + month + <span class="string">&quot;月&quot;</span> + day + <span class="string">&quot;日&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>TimePicker监听：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">TimePicker</span> <span class="variable">timePicker</span> <span class="operator">=</span> (TimePicker) findComponentById(ResourceTable.Id_timepicker);</span><br><span class="line">timePicker.setTimeChangedListener(<span class="keyword">new</span> <span class="title class_">TimePicker</span>.TimeChangedListener() &#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onTimeChanged</span><span class="params">(TimePicker timePicker, <span class="type">int</span> hour, <span class="type">int</span> minutes, <span class="type">int</span> second)</span> &#123;</span><br><span class="line">text.setText(<span class="string">&quot;时间为:&quot;</span> + hour + minutes + second);</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><hr><h1 id="美化组件"><a href="#美化组件" class="headerlink" title="美化组件"></a>美化组件</h1><ul><li><p>美化外形 </p><ul><li>组件外形（方形，圆角，胶囊形，圆形）</li><li>组件边框（颜色，粗细） 背景颜色（有色号就行）</li><li>背景渐变（线形或者辐射形） </li></ul></li><li><p>美化状态 </p><p>组件在不同状态时显示不同的样式。 </p><p>暂时掌握三中状态： </p><ul><li>默认状态 （所有组件都有默认状态）</li><li>按下状态 （组件按下不松时的状态） </li><li>选中状态 （开关组件，多选按钮，单选按钮的开启状态）</li></ul></li></ul><h2 id="shape标签"><a href="#shape标签" class="headerlink" title="shape标签"></a>shape标签</h2><p>在graphic包中新建xml，根标签为：shape就可以自定义组件的形状。</p><p>根标签：shape</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">shape</span> <span class="attr">xmlns:ohos</span>=<span class="string">&quot;http://schemas.huawei.com/res/ohos&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">ohos:shape</span>=<span class="string">&quot;rectangle&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">solid</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:color</span>=<span class="string">&quot;#FFFFFF&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">corners</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ohos:radius</span>=<span class="string">&quot;15vp&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>根标签包含一个属性：shape —&gt; ohos:shape=”rectangle”</p><p>常用值： 1. rectangle：长方形 2. oval：椭圆 </p><p>根标签包含五个子标签：</p><p>① stroke：绘制边框 </p><ul><li>属性： <ul><li>宽度，颜色 </li></ul></li></ul><p>② corners：圆角 </p><ul><li><p>属性： </p><ul><li><p>radius半径 (主要)</p></li><li><p>left_top_x、left_top_y 左上</p></li><li><p>right_top_x、right_top_y 右上 </p></li><li>left_bottom_x、left_bottom_y 左下 </li><li>right_bottom_x、right_bottom_y 右下 </li></ul></li></ul><p>③ solid：背景填充 </p><ul><li>属性： <ul><li>color 只能指定一个颜色 </li><li>colors 可以指定多个颜色，渐变。 </li></ul></li></ul><p>④ bounds：边框 可以单独设置上下左右的边框。 </p><p>⑤ gradient：渐变 </p><ul><li>属性： <ul><li>shader_type：类型 —- radial（辐射） linear（线性）</li></ul></li></ul></blockquote><hr><h2 id="state-container标签"><a href="#state-container标签" class="headerlink" title="state-container标签"></a>state-container标签</h2><p>在graphic包中新建xml，根标签为：state-container ，就可以在不同状态下美化组件</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">state-container</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:ohos</span>=<span class="string">&quot;http://schemas.huawei.com/res/ohos&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    /按下</span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">ohos:state</span>=<span class="string">&quot;component_state_pressed&quot;</span> <span class="attr">ohos:element</span>=<span class="string">&quot;#000000&quot;</span>/&gt;</span></span><br><span class="line">    //打开状态</span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">ohos:state</span>=<span class="string">&quot;component_state_checked&quot;</span> <span class="attr">ohos:element</span>=<span class="string">&quot;#FF0000&quot;</span>/&gt;</span></span><br><span class="line">    //默认状态：要写在最下面</span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">ohos:state</span>=<span class="string">&quot;component_state_empty&quot;</span> <span class="attr">ohos:element</span>=<span class="string">&quot;#21a8f6&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">state-container</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>默认状态： component_state_empty （必须要写在最下面）</li><li>按下不松的状态： component_state_pressed </li><li>打开状态： component_state_checked</li></ul><blockquote><p>element中可以写指定的色号，也可以指定根标签为shape的xml文件，也可以指定固定的图片。</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> HUAWEI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HarmonyOS2.0 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mybatis-Plus之mapper Crud</title>
      <link href="/posts/Mybatis-Plus.html"/>
      <url>/posts/Mybatis-Plus.html</url>
      
        <content type="html"><![CDATA[<h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><ul><li><p>官网：<a href="https://baomidou.com">https://baomidou.com</a></p></li><li><p>研发团队：苞米豆</p></li><li><p>github地址：<a href="https://github.com/baomidou/mybatis-plus">https://github.com/baomidou/mybatis-plus</a></p></li></ul><hr><p><a href="https://github.com/baomidou/mybatis-plus">MyBatis-Plus</a>（简称 MP）是一个 <a href="https://www.mybatis.org/mybatis-3/">MyBatis</a>的增强工具，在 MyBatis 的基础上只做增强不做改变，为简化开发、提高效率而生。</p><p><img src="https://img-blog.csdnimg.cn/dd133a90fdfb4f089d79ca0f1efbf3d3.png#pic_center" alt="1"></p><p>小蓝鸟代表Mybatis，小红鸟代表MP，就像魂斗罗两兄弟，基友搭配，效率翻倍。</p><h2 id="特性（来自官网）"><a href="#特性（来自官网）" class="headerlink" title="特性（来自官网）"></a>特性（来自官网）</h2><ul><li><strong>无侵入</strong>：只做增强不做改变，引入它不会对现有工程产生影响，如丝般顺滑</li><li><strong>损耗小</strong>：启动即会自动注入基本 CURD，性能基本无损耗，直接面向对象操作</li><li><strong>强大的 CRUD 操作</strong>：内置通用 Mapper、通用 Service，仅仅通过少量配置即可实现单表大部分 CRUD 操作，更有强大的条件构造器，满足各类使用需求</li><li><strong>支持 Lambda 形式调用</strong>：通过 Lambda 表达式，方便的编写各类查询条件，无需再担心字段写错</li><li><strong>支持主键自动生成</strong>：支持多达 4 种主键策略（内含分布式唯一 ID 生成器 - Sequence），可自由配置，完美解决主键问题</li><li><strong>支持 ActiveRecord 模式</strong>：支持 ActiveRecord 形式调用，实体类只需继承 Model 类即可进行强大的 CRUD 操作</li><li><strong>支持自定义全局通用操作</strong>：支持全局通用方法注入（ Write once, use anywhere ）</li><li><strong>内置代码生成器</strong>：采用代码或者 Maven 插件可快速生成 Mapper 、 Model 、 Service 、 Controller 层代码，支持模板引擎，更有超多自定义配置等您来使用</li><li><strong>内置分页插件</strong>：基于 MyBatis 物理分页，开发者无需关心具体操作，配置好插件之后，写分页等同于普通 List 查询</li><li><strong>分页插件支持多种数据库</strong>：支持 MySQL、MariaDB、Oracle、DB2、H2、HSQL、SQLite、Postgre、SQLServer 等多种数据库</li><li><strong>内置性能分析插件</strong>：可输出 SQL 语句以及其执行时间，建议开发测试时启用该功能，能快速揪出慢查询</li><li><strong>内置全局拦截插件</strong>：提供全表 delete 、 update 操作智能分析阻断，也可自定义拦截规则，预防误操作</li></ul><h2 id="支持的数据库"><a href="#支持的数据库" class="headerlink" title="支持的数据库"></a>支持的数据库</h2><p>常用的如MySQL，Oracle，DB2，SQLite等等。</p><h2 id="框架结构"><a href="#框架结构" class="headerlink" title="框架结构"></a>框架结构</h2><p><img src="https://img-blog.csdnimg.cn/62119f84515e41acb6bfdefd8cec15e3.jpeg#pic_center" alt="2"></p><h1 id="mapper-CRUD接口"><a href="#mapper-CRUD接口" class="headerlink" title="mapper CRUD接口"></a>mapper CRUD接口</h1><h2 id="引入MP依赖"><a href="#引入MP依赖" class="headerlink" title="引入MP依赖"></a>引入<code>MP</code>依赖</h2><p>新建springboot项目，引入依赖：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>roydon.xyz<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>Mybatis-Plus-Demo<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>Mybatis-Plus-Demo<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>Mybatis-Plus-Demo<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--mysql--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--lombok--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--mybatis-plus--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--ali数据库连接池--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">excludes</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">exclude</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">exclude</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">excludes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="yml配置文件"><a href="#yml配置文件" class="headerlink" title="yml配置文件"></a>yml配置文件</h2><p>yml配置：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">9090</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://127.0.0.1:3306/mybatis-plus-first?serverTimezone=GMT%2b8</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">qwer1234</span></span><br><span class="line"></span><br><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="attr">id-type:</span> <span class="string">auto</span> <span class="comment"># id自增长配置，不用再每个实体每个主键单独配置。</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span> <span class="comment">#sql日志打印</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath:mapper/*.xml</span>  <span class="comment">#自定义方法映射的sqlmapper文件路径</span></span><br><span class="line">  <span class="attr">type-aliases-package:</span> <span class="string">roydon.xyz.mybatisplusdemo.entity</span></span><br></pre></td></tr></table></figure><h2 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h2><p>新建数据库文件：</p><p><img src="https://img-blog.csdnimg.cn/7577d4e1b49b43ca9c32534f4c3fd4d9.png#pic_center" alt="在这里插入图片描述"></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `tb_user` (</span><br><span class="line">  `id` <span class="type">bigint</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;主键ID&#x27;</span>,</span><br><span class="line">  `user_name` <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;用户名&#x27;</span>,</span><br><span class="line">  `password` <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;密码&#x27;</span>,</span><br><span class="line">  `name` <span class="type">varchar</span>(<span class="number">30</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;姓名&#x27;</span>,</span><br><span class="line">  `age` <span class="type">int</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;年龄&#x27;</span>,</span><br><span class="line">  `email` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;邮箱&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB AUTO_INCREMENT<span class="operator">=</span><span class="number">6</span> <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8;</span><br></pre></td></tr></table></figure><p>导入数据：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `tb_user` (`id`, `user_name`, `password`, `name`, `age`, `email`) <span class="keyword">VALUES</span></span><br><span class="line">(<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;zhangsan&#x27;</span>, <span class="string">&#x27;123456&#x27;</span>, <span class="string">&#x27;张三&#x27;</span>, <span class="string">&#x27;18&#x27;</span>, <span class="string">&#x27;test1@itcast.cn&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `tb_user` (`id`, `user_name`, `password`, `name`, `age`, `email`) <span class="keyword">VALUES</span></span><br><span class="line">(<span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;lisi&#x27;</span>, <span class="string">&#x27;123456&#x27;</span>, <span class="string">&#x27;李四&#x27;</span>, <span class="string">&#x27;20&#x27;</span>, <span class="string">&#x27;test2@itcast.cn&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `tb_user` (`id`, `user_name`, `password`, `name`, `age`, `email`) <span class="keyword">VALUES</span></span><br><span class="line">(<span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;wangwu&#x27;</span>, <span class="string">&#x27;123456&#x27;</span>, <span class="string">&#x27;王五&#x27;</span>, <span class="string">&#x27;28&#x27;</span>, <span class="string">&#x27;test3@itcast.cn&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `tb_user` (`id`, `user_name`, `password`, `name`, `age`, `email`) <span class="keyword">VALUES</span></span><br><span class="line">(<span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;zhaoliu&#x27;</span>, <span class="string">&#x27;123456&#x27;</span>, <span class="string">&#x27;赵六&#x27;</span>, <span class="string">&#x27;21&#x27;</span>, <span class="string">&#x27;test4@itcast.cn&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `tb_user` (`id`, `user_name`, `password`, `name`, `age`, `email`) <span class="keyword">VALUES</span></span><br><span class="line">(<span class="string">&#x27;5&#x27;</span>, <span class="string">&#x27;sunqi&#x27;</span>, <span class="string">&#x27;123456&#x27;</span>, <span class="string">&#x27;孙七&#x27;</span>, <span class="string">&#x27;24&#x27;</span>, <span class="string">&#x27;test5@itcast.cn&#x27;</span>);</span><br></pre></td></tr></table></figure><h2 id="实体类User"><a href="#实体类User" class="headerlink" title="实体类User"></a>实体类User</h2><p>项目新建实体类<code>User</code>：</p><p><img src="https://img-blog.csdnimg.cn/286b82e16e0a44d0aa80031cc1abdba9.png#pic_center" alt="在这里插入图片描述"></p><p>注意下方注解用法：</p><ul><li>@Data<br>@AllArgsConstructor<br>@NoArgsConstructor // 简化set，get</li><li>@TableName(“tb_user”) // 指定表名</li><li>@TableField // 下方已给出作用</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> roydon.xyz.mybatisplusdemo.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.IdType;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableField;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableId;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableName;</span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by Intellij IDEA</span></span><br><span class="line"><span class="comment"> * Author: yi cheng</span></span><br><span class="line"><span class="comment"> * Date: 2022/9/21</span></span><br><span class="line"><span class="comment"> * Time: 20:14</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@TableName(&quot;tb_user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// @TableId(type = IdType.AUTO) // 主键自增长</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@TableField(select = false)</span> <span class="comment">// 忽略查询，查询结果无此字段</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@TableField(value = &quot;name&quot;)</span> <span class="comment">// 指定数据库字段</span></span><br><span class="line">    <span class="keyword">private</span> String nickName;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@TableField(exist = false)</span> <span class="comment">// 数据库是否存在此字段，关联查询时用到</span></span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="UserMapper"><a href="#UserMapper" class="headerlink" title="UserMapper"></a>UserMapper</h2><p>新建<code>UserMapper</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> roydon.xyz.mybatisplusdemo.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;</span><br><span class="line"><span class="keyword">import</span> roydon.xyz.mybatisplusdemo.entity.User;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by Intellij IDEA</span></span><br><span class="line"><span class="comment"> * Author: yi cheng</span></span><br><span class="line"><span class="comment"> * Date: 2022/9/21</span></span><br><span class="line"><span class="comment"> * Time: 20:18</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="comment">// 通过继承BaseMapper就可以获取到各种各样的单表操作</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;User&gt; &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 可自定义方法，sql语句需写在resources对应的mapper下</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>通过继承BaseMapper就可以获取到各种各样的单表操作，如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Source code recreated from a .class file by IntelliJ IDEA</span></span><br><span class="line"><span class="comment">// (powered by FernFlower decompiler)</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> com.baomidou.mybatisplus.core.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.conditions.Wrapper;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.metadata.IPage;</span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Param;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BaseMapper</span>&lt;T&gt; <span class="keyword">extends</span> <span class="title class_">Mapper</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="type">int</span> <span class="title function_">insert</span><span class="params">(T entity)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">deleteById</span><span class="params">(Serializable id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">deleteByMap</span><span class="params">(<span class="meta">@Param(&quot;cm&quot;)</span> Map&lt;String, Object&gt; columnMap)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">delete</span><span class="params">(<span class="meta">@Param(&quot;ew&quot;)</span> Wrapper&lt;T&gt; wrapper)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">deleteBatchIds</span><span class="params">(<span class="meta">@Param(&quot;coll&quot;)</span> Collection&lt;? extends Serializable&gt; idList)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">updateById</span><span class="params">(<span class="meta">@Param(&quot;et&quot;)</span> T entity)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">update</span><span class="params">(<span class="meta">@Param(&quot;et&quot;)</span> T entity, <span class="meta">@Param(&quot;ew&quot;)</span> Wrapper&lt;T&gt; updateWrapper)</span>;</span><br><span class="line"></span><br><span class="line">    T <span class="title function_">selectById</span><span class="params">(Serializable id)</span>;</span><br><span class="line"></span><br><span class="line">    List&lt;T&gt; <span class="title function_">selectBatchIds</span><span class="params">(<span class="meta">@Param(&quot;coll&quot;)</span> Collection&lt;? extends Serializable&gt; idList)</span>;</span><br><span class="line"></span><br><span class="line">    List&lt;T&gt; <span class="title function_">selectByMap</span><span class="params">(<span class="meta">@Param(&quot;cm&quot;)</span> Map&lt;String, Object&gt; columnMap)</span>;</span><br><span class="line"></span><br><span class="line">    T <span class="title function_">selectOne</span><span class="params">(<span class="meta">@Param(&quot;ew&quot;)</span> Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"></span><br><span class="line">    Integer <span class="title function_">selectCount</span><span class="params">(<span class="meta">@Param(&quot;ew&quot;)</span> Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"></span><br><span class="line">    List&lt;T&gt; <span class="title function_">selectList</span><span class="params">(<span class="meta">@Param(&quot;ew&quot;)</span> Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"></span><br><span class="line">    List&lt;Map&lt;String, Object&gt;&gt; <span class="title function_">selectMaps</span><span class="params">(<span class="meta">@Param(&quot;ew&quot;)</span> Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"></span><br><span class="line">    List&lt;Object&gt; <span class="title function_">selectObjs</span><span class="params">(<span class="meta">@Param(&quot;ew&quot;)</span> Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"></span><br><span class="line">    IPage&lt;T&gt; <span class="title function_">selectPage</span><span class="params">(IPage&lt;T&gt; page, <span class="meta">@Param(&quot;ew&quot;)</span> Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"></span><br><span class="line">    IPage&lt;Map&lt;String, Object&gt;&gt; <span class="title function_">selectMapsPage</span><span class="params">(IPage&lt;T&gt; page, <span class="meta">@Param(&quot;ew&quot;)</span> Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="UserMapper-xml"><a href="#UserMapper-xml" class="headerlink" title="UserMapper.xml"></a>UserMapper.xml</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--namespace：命名空间，指向的就是对应接口的全限定名--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;roydon.xyz.mybatisplusdemo.mapper.UserMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;user&quot;</span>&gt;</span></span><br><span class="line">        select *</span><br><span class="line">        from tb_user</span><br><span class="line">        where id = #&#123;id&#125;;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="MybatisPlusConfig"><a href="#MybatisPlusConfig" class="headerlink" title="MybatisPlusConfig"></a>MybatisPlusConfig</h2><p>新建<code>MP</code>配置文件</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> roydon.xyz.mybatisplusdemo.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.PaginationInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.spring.annotation.MapperScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by Intellij IDEA</span></span><br><span class="line"><span class="comment"> * Author: yi cheng</span></span><br><span class="line"><span class="comment"> * Date: 2022/9/21</span></span><br><span class="line"><span class="comment"> * Time: 20:49</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;roydon/xyz/mybatisplusdemo/mapper&quot;)</span> <span class="comment">// 扫描mapper包</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MybatisPlusConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * page分页插件，分页查询使用</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> PaginationInterceptor <span class="title function_">paginationInterceptor</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">PaginationInterceptor</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Test"><a href="#Test" class="headerlink" title="Test"></a>Test</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> roydon.xyz.mybatisplusdemo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.conditions.update.UpdateWrapper;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.metadata.IPage;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.pagination.Page;</span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.Test;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line"><span class="keyword">import</span> roydon.xyz.mybatisplusdemo.entity.User;</span><br><span class="line"><span class="keyword">import</span> roydon.xyz.mybatisplusdemo.mapper.UserMapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MybatisPlusDemoApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * select---------------------------------------------------------------</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectById</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 根据 ID 查询</span></span><br><span class="line">        userMapper.selectById(<span class="number">2L</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectOne</span><span class="params">()</span> &#123;</span><br><span class="line">        QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">        wrapper.eq(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;张三&quot;</span>); <span class="comment">//查询条件</span></span><br><span class="line">        <span class="comment">// 根据 entity 条件，查询一条记录。查询的数据超过一条时，会抛出异常(例如：wrapper.eq(&quot;password&quot;, &quot;123456&quot;);)</span></span><br><span class="line">        userMapper.selectOne(wrapper);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testSelectBatchIds</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 查询（根据ID 批量查询），返回 List&lt;User&gt; 集合，若ID 不存在像100L，那么只会查出存在的ID</span></span><br><span class="line">        userMapper.selectBatchIds(Arrays.asList(<span class="number">1L</span>, <span class="number">2L</span>, <span class="number">3L</span>));</span><br><span class="line"><span class="comment">//        userMapper.selectBatchIds(Arrays.asList(1L, 2L, 3L,100L)); // 只会查出1，2，3</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectList</span><span class="params">()</span> &#123;</span><br><span class="line">        QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">//设置查询条件</span></span><br><span class="line">        wrapper.like(<span class="string">&quot;email&quot;</span>, <span class="string">&quot;itcast&quot;</span>);</span><br><span class="line">        userMapper.selectList(wrapper);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectByMap</span><span class="params">()</span> &#123;</span><br><span class="line">        Map&lt;String, Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        map.put(<span class="string">&quot;user_name&quot;</span>, <span class="string">&quot;zhangsan&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;password&quot;</span>, <span class="string">&quot;123456&quot;</span>);</span><br><span class="line">        <span class="comment">// 查询（根据 columnMap 条件）</span></span><br><span class="line">        userMapper.selectByMap(map);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectPage</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">        IPage&lt;User&gt; page = <span class="keyword">new</span> <span class="title class_">Page</span>&lt;&gt;(<span class="number">0</span>, <span class="number">2</span>); <span class="comment">// 第一页，两条数据</span></span><br><span class="line"></span><br><span class="line">        QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">        queryWrapper.like(<span class="string">&quot;password&quot;</span>, <span class="string">&quot;123456&quot;</span>);</span><br><span class="line"></span><br><span class="line">        userMapper.selectPage(page, queryWrapper);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;数据总条数&quot;</span> + page.getTotal());</span><br><span class="line">        System.out.println(<span class="string">&quot;数据总页数&quot;</span> + page.getPages());</span><br><span class="line">        System.out.println(<span class="string">&quot;当前页数&quot;</span> + page.getCurrent()); <span class="comment">// getRecords为数据list</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectCount</span><span class="params">()</span> &#123;</span><br><span class="line">        QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">        wrapper.gt(<span class="string">&quot;age&quot;</span>, <span class="number">20</span>); <span class="comment">// 条件：年龄大于20岁的用户</span></span><br><span class="line">        <span class="comment">// 根据 Wrapper 条件，查询总记录数，返回整数类型</span></span><br><span class="line">        userMapper.selectCount(wrapper);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * update---------------------------------------------------------</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testUpdateById</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 根据 ID 修改，返回整型，表示影响的行数</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        user.setId(<span class="number">1L</span>); <span class="comment">//条件，根据id更新</span></span><br><span class="line">        user.setAge(<span class="number">19</span>); <span class="comment">//更新的字段</span></span><br><span class="line">        user.setPassword(<span class="string">&quot;666666&quot;</span>);</span><br><span class="line"></span><br><span class="line">        userMapper.updateById(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testUpdate</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        user.setAge(<span class="number">20</span>); <span class="comment">//更新的字段</span></span><br><span class="line">        user.setPassword(<span class="string">&quot;8888888&quot;</span>);</span><br><span class="line"></span><br><span class="line">        QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">        wrapper.eq(<span class="string">&quot;user_name&quot;</span>, <span class="string">&quot;zhangsan&quot;</span>); <span class="comment">//匹配 user_name = zhangsan 的用户数据</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 根据 whereWrapper 条件，更新记录</span></span><br><span class="line">        userMapper.update(user, wrapper);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testUpdate2</span><span class="params">()</span> &#123;</span><br><span class="line">        UpdateWrapper&lt;User&gt; updateWrapper = <span class="keyword">new</span> <span class="title class_">UpdateWrapper</span>&lt;&gt;();</span><br><span class="line">        updateWrapper.set(<span class="string">&quot;age&quot;</span>, <span class="number">21</span>).set(<span class="string">&quot;password&quot;</span>, <span class="string">&quot;999999&quot;</span>) <span class="comment">//更新的字段</span></span><br><span class="line">                .eq(<span class="string">&quot;user_name&quot;</span>, <span class="string">&quot;zhangsan&quot;</span>); <span class="comment">//更新的条件</span></span><br><span class="line">        userMapper.update(<span class="literal">null</span>, updateWrapper);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * insert--------------------------------------------------------</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testInsert</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        user.setUserName(<span class="string">&quot;baomidou&quot;</span>);</span><br><span class="line">        user.setNickName(<span class="string">&quot;苞米豆&quot;</span>);</span><br><span class="line">        user.setPassword(<span class="string">&quot;123456&quot;</span>);</span><br><span class="line">        user.setAge(<span class="number">30</span>);</span><br><span class="line">        user.setEmail(<span class="string">&quot;insert@itcast.cn&quot;</span>);</span><br><span class="line">        user.setAddress(<span class="string">&quot;北京&quot;</span>);</span><br><span class="line">        userMapper.insert(user); <span class="comment">//result数据库受影响的行数</span></span><br><span class="line">        <span class="comment">//获取自增长后的id值, 自增长后的id值会回填到user对象中</span></span><br><span class="line">        System.out.println(<span class="string">&quot;id =&gt; &quot;</span> + user.getId());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * delete---------------------------------------------------------</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testDelete</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//用法一：</span></span><br><span class="line"><span class="comment">//        QueryWrapper&lt;User&gt; wrapper = new QueryWrapper&lt;&gt;();</span></span><br><span class="line"><span class="comment">//        wrapper.eq(&quot;user_name&quot;, &quot;baomidou&quot;)</span></span><br><span class="line"><span class="comment">//                .eq(&quot;password&quot;, &quot;123456&quot;);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//用法二：</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        user.setUserName(<span class="string">&quot;baomidou&quot;</span>);</span><br><span class="line">        user.setPassword(<span class="string">&quot;123456&quot;</span>);</span><br><span class="line"></span><br><span class="line">        QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;(user);</span><br><span class="line">        <span class="comment">// 根据包装条件做删除</span></span><br><span class="line">        userMapper.delete(wrapper);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testDeleteById</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 根据id删除数据</span></span><br><span class="line">        userMapper.deleteById(<span class="number">5L</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testDeleteByMap</span><span class="params">()</span> &#123;</span><br><span class="line">        Map&lt;String, Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        map.put(<span class="string">&quot;user_name&quot;</span>, <span class="string">&quot;lisi&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;password&quot;</span>, <span class="string">&quot;123456&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 根据map删除数据，多条件之间是and关系</span></span><br><span class="line">        userMapper.deleteByMap(map);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testDeleteBatchIds</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 根据id批量删除数据</span></span><br><span class="line">        userMapper.deleteBatchIds(Arrays.asList(<span class="number">3L</span>, <span class="number">4L</span>));</span><br><span class="line"><span class="comment">//        userMapper.deleteBatchIds(Arrays.asList(3L, 4L,100L));</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 自定义方法</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">selById</span><span class="params">()</span> &#123;</span><br><span class="line">        userMapper.getById(<span class="number">1L</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 自定义的方法</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="comment">//    @Test</span></span><br><span class="line"><span class="comment">//    public void testFindById()&#123;</span></span><br><span class="line"><span class="comment">//        User user = this.userMapper.findById(2L);</span></span><br><span class="line"><span class="comment">//        System.out.println(user);</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testAllEq</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">        Map&lt;String, Object&gt; params = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        params.put(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;李四&quot;</span>);</span><br><span class="line">        params.put(<span class="string">&quot;age&quot;</span>, <span class="string">&quot;20&quot;</span>);</span><br><span class="line">        params.put(<span class="string">&quot;password&quot;</span>, <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">        QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">//SELECT id,user_name,name,age,email AS mail FROM tb_user WHERE password IS NULL AND name = ? AND age = ?</span></span><br><span class="line"><span class="comment">//        wrapper.allEq(params);</span></span><br><span class="line">        <span class="comment">//SELECT id,user_name,name,age,email AS mail FROM tb_user WHERE name = ? AND age = ?</span></span><br><span class="line"><span class="comment">//        wrapper.allEq(params, false);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//SELECT id,user_name,name,age,email AS mail FROM tb_user WHERE age = ?</span></span><br><span class="line"><span class="comment">//        wrapper.allEq((k, v) -&gt; (k.equals(&quot;age&quot;) || k.equals(&quot;id&quot;)) , params);</span></span><br><span class="line">        <span class="comment">//SELECT id,user_name,name,age,email AS mail FROM tb_user WHERE name = ? AND age = ?</span></span><br><span class="line">        wrapper.allEq((k, v) -&gt; (k.equals(<span class="string">&quot;age&quot;</span>) || k.equals(<span class="string">&quot;id&quot;</span>) || k.equals(<span class="string">&quot;name&quot;</span>)), params);</span><br><span class="line">        userMapper.selectList(wrapper);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testEq</span><span class="params">()</span> &#123;</span><br><span class="line">        QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">//SELECT id,user_name,password,name,age,email FROM tb_user WHERE password = ? AND age &gt;= ? AND name IN (?,?,?)</span></span><br><span class="line">        wrapper.eq(<span class="string">&quot;password&quot;</span>, <span class="string">&quot;123456&quot;</span>)</span><br><span class="line">                .ge(<span class="string">&quot;age&quot;</span>, <span class="number">20</span>)</span><br><span class="line">                .in(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;李四&quot;</span>, <span class="string">&quot;王五&quot;</span>, <span class="string">&quot;赵六&quot;</span>);</span><br><span class="line">        userMapper.selectList(wrapper);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testLike</span><span class="params">()</span> &#123;</span><br><span class="line">        QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">// SELECT id,user_name,name,age,email AS mail FROM tb_user WHERE name LIKE ?</span></span><br><span class="line">        <span class="comment">// 参数：%五(String)</span></span><br><span class="line">        wrapper.likeLeft(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;五&quot;</span>);</span><br><span class="line">        userMapper.selectList(wrapper);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testOrderByAgeDesc</span><span class="params">()</span> &#123;</span><br><span class="line">        QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">//按照年龄倒序排序</span></span><br><span class="line">        <span class="comment">// SELECT id,user_name,name,age,email AS mail FROM tb_user ORDER BY age DESC</span></span><br><span class="line">        wrapper.orderByDesc(<span class="string">&quot;age&quot;</span>);</span><br><span class="line">        userMapper.selectList(wrapper);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testOr</span><span class="params">()</span> &#123;</span><br><span class="line">        QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">// SELECT id,user_name,name,age,email AS mail FROM tb_user WHERE name = ? OR age = ?</span></span><br><span class="line">        wrapper.eq(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;王五&quot;</span>).or().eq(<span class="string">&quot;age&quot;</span>, <span class="number">21</span>);</span><br><span class="line">        userMapper.selectList(wrapper);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelect</span><span class="params">()</span> &#123;</span><br><span class="line">        QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">//SELECT id,name,age FROM tb_user WHERE name = ? OR age = ?</span></span><br><span class="line">        wrapper.eq(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;王五&quot;</span>)</span><br><span class="line">                .or()</span><br><span class="line">                .eq(<span class="string">&quot;age&quot;</span>, <span class="number">21</span>)</span><br><span class="line">                .select(<span class="string">&quot;id&quot;</span>, <span class="string">&quot;name&quot;</span>, <span class="string">&quot;age&quot;</span>); <span class="comment">//指定查询的字段</span></span><br><span class="line">userMapper.selectList(wrapper);</span><br><span class="line">       </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="条件构造器"><a href="#条件构造器" class="headerlink" title="条件构造器"></a>条件构造器</h1><p>指路—&gt;官方文档：<a href="https://baomidou.com/pages/10c804/#abstractwrapper">https://baomidou.com/pages/10c804/#abstractwrapper</a></p><h2 id="allEq"><a href="#allEq" class="headerlink" title="allEq"></a>allEq</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">allEq(Map&lt;R, V&gt; params)</span><br><span class="line">allEq(Map&lt;R, V&gt; params, <span class="type">boolean</span> null2IsNull)</span><br><span class="line">allEq(<span class="type">boolean</span> condition, Map&lt;R, V&gt; params, <span class="type">boolean</span> null2IsNull)</span><br></pre></td></tr></table></figure><ul><li>全部<a href="https://baomidou.com/pages/10c804/#eq">eq</a>(或个别<a href="https://baomidou.com/pages/10c804/#isnull">isNull</a>)</li></ul><blockquote><p>个别参数说明:</p><p><code>params</code> : <code>key</code>为数据库字段名,<code>value</code>为字段值<br><code>null2IsNull</code> : 为<code>true</code>则在<code>map</code>的<code>value</code>为<code>null</code>时调用 <a href="https://baomidou.com/pages/10c804/#isnull">isNull</a> 方法,为<code>false</code>时则忽略<code>value</code>为<code>null</code>的</p></blockquote><ul><li>例1: <code>allEq(&#123;id:1,name:&quot;老王&quot;,age:null&#125;)</code>—-&gt;<code>id = 1 and name = &#39;老王&#39; and age is null</code></li><li>例2: <code>allEq(&#123;id:1,name:&quot;老王&quot;,age:null&#125;, false)</code>—-&gt;<code>id = 1 and name = &#39;老王&#39;</code></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">allEq(BiPredicate&lt;R, V&gt; filter, Map&lt;R, V&gt; params)</span><br><span class="line">allEq(BiPredicate&lt;R, V&gt; filter, Map&lt;R, V&gt; params, <span class="type">boolean</span> null2IsNull)</span><br><span class="line">allEq(<span class="type">boolean</span> condition, BiPredicate&lt;R, V&gt; filter, Map&lt;R, V&gt; params, <span class="type">boolean</span> null2IsNull) </span><br></pre></td></tr></table></figure><blockquote><p>个别参数说明:</p><p><code>filter</code> : 过滤函数,是否允许字段传入比对条件中<br><code>params</code> 与 <code>null2IsNull</code> : 同上</p></blockquote><ul><li>例1: <code>allEq((k,v) -&gt; k.indexOf(&quot;a&quot;) &gt;= 0, &#123;id:1,name:&quot;老王&quot;,age:null&#125;)</code>—-&gt;<code>name = &#39;老王&#39; and age is null</code></li><li>例2: <code>allEq((k,v) -&gt; k.indexOf(&quot;a&quot;) &gt;= 0, &#123;id:1,name:&quot;老王&quot;,age:null&#125;, false)</code>—-&gt;<code>name = &#39;老王&#39;</code></li></ul><hr><h2 id="基本比较操作"><a href="#基本比较操作" class="headerlink" title="基本比较操作"></a>基本比较操作</h2><ul><li><p>eq</p><blockquote><p>等于 = </p></blockquote></li><li><p>ne </p><blockquote><p>不等于 &lt;&gt; </p></blockquote></li><li><p>gt </p><blockquote><p>大于 &gt; </p></blockquote></li><li><p>ge </p><blockquote><p>大于等于 &gt;=</p></blockquote></li><li><p>lt </p><blockquote><p>小于 &lt; </p></blockquote></li><li><p>le </p><blockquote><p>小于等于 &lt;= </p></blockquote></li><li><p>between </p><blockquote><p>BETWEEN 值1 AND 值2 </p></blockquote></li><li><p>notBetween </p><blockquote><p>NOT BETWEEN 值1 AND 值2 </p></blockquote></li><li><p>in </p><blockquote><p>字段 IN (value.get(0), value.get(1), …)</p></blockquote></li><li><p>notIn </p><blockquote><p>字段 NOT IN (v0, v1, …)</p></blockquote></li></ul><h2 id="模糊查询"><a href="#模糊查询" class="headerlink" title="模糊查询"></a>模糊查询</h2><ul><li>like </li></ul><blockquote><p>LIKE ‘%值%’ </p><p>例: like(“name”, “王”) —-&gt; name like ‘%王%’ </p></blockquote><ul><li><p>notLike </p><blockquote><p>NOT LIKE ‘%值%’</p><p>例: notLike(“name”, “王”) —-&gt; name not like ‘%王%’ </p></blockquote></li><li><p>likeLeft </p><blockquote><p>LIKE ‘%值’ </p><p>例: likeLeft(“name”, “王”) —-&gt; name like ‘%王’ </p></blockquote></li><li><p>likeRight </p><blockquote><p>LIKE ‘值%’ </p><p>例: likeRight(“name”, “王”) —-&gt; name like ‘王%’</p></blockquote></li></ul><h2 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h2><ul><li>orderBy</li></ul><blockquote><p>例: orderBy(true, true, “id”, “name”) —-&gt; order by id ASC,name ASC</p></blockquote><ul><li>orderByAsc</li></ul><blockquote><p>例: orderByAsc(“id”, “name”) —-&gt; order by id ASC,name ASC</p></blockquote><ul><li>orderByDesc</li></ul><blockquote><p>例: orderByDesc(“id”, “name”) —-&gt; order by id DESC,name DES</p></blockquote><h2 id="逻辑查询"><a href="#逻辑查询" class="headerlink" title="逻辑查询"></a>逻辑查询</h2><ul><li>or</li></ul><blockquote><p>拼接 OR </p><p>主动调用 or 表示紧接着下一个方法不是用 and 连接!(不调用 or 则默认为使用 and 连接)</p></blockquote><ul><li>and</li></ul><blockquote><p>AND 嵌套 </p><p>例: and(i -&gt; i.eq(“name”, “李白”).ne(“status”, “活着”)) —-&gt; and (name = ‘李白’ and status &lt;&gt; ‘活着’)</p></blockquote><h2 id="select"><a href="#select" class="headerlink" title="select"></a>select</h2><p>在MP查询中，默认查询所有的字段，如果有需要也可以通过select方法进行指定字段。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelect</span><span class="params">()</span> &#123;</span><br><span class="line">    QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">    <span class="comment">//SELECT id,name,age FROM tb_user WHERE name = ? OR age = ?</span></span><br><span class="line">    wrapper.eq(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;王五&quot;</span>)</span><br><span class="line">            .or()</span><br><span class="line">            .eq(<span class="string">&quot;age&quot;</span>, <span class="number">21</span>)</span><br><span class="line">            .select(<span class="string">&quot;id&quot;</span>, <span class="string">&quot;name&quot;</span>, <span class="string">&quot;age&quot;</span>); <span class="comment">//指定查询的字段</span></span><br><span class="line">    userMapper.selectList(wrapper);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1 id="代码生成器（新）"><a href="#代码生成器（新）" class="headerlink" title="代码生成器（新）"></a>代码生成器（新）</h1><p>Github—&gt;<a href="https://github.com/roydonGuo/Mybatis-Plus-Generator">https://github.com/roydonGuo/Mybatis-Plus-Generator</a></p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mybatis </tag>
            
            <tag> Mybatis-Plus </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java面试-基础篇</title>
      <link href="/posts/b0faee08.html"/>
      <url>/posts/b0faee08.html</url>
      
        <content type="html"><![CDATA[<blockquote><p><strong><em>基础篇要点分为三部分：1.算法、2.数据结构、3.基础设计模式(单例模式)</em></strong></p></blockquote><h1 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h1><p><strong>算法要求：</strong></p><blockquote><p>不但要掌握各个算法的含义，代码逻辑，更要能通过自己理解的角度对代码有一个清楚的认识，能使用自己的语言口述算法。</p></blockquote><h2 id="二分查找"><a href="#二分查找" class="headerlink" title="二分查找"></a>二分查找</h2><p><strong>算法描述：</strong></p><ol><li><p>前提：有<strong>已排序</strong>数组 A</p></li><li><p>定义左边界 L、右边界 R，确定搜索范围，循环执行二分查找（3、4两步）</p></li><li><p>获取中间索引 M = Floor((L+R) /2)</p></li><li><p>中间索引的值  A[M] 与待搜索的值 T 进行比较</p><p>① A[M] == T 表示找到，返回中间索引</p><p>② A[M] &gt; T，中间值右侧的其它元素都大于 T，无需比较，中间索引左边去找，<strong>M - 1 设置为右边界</strong>，重新查找</p><p>③ A[M] &lt; T，中间值左侧的其它元素都小于 T，无需比较，中间索引右边去找，<strong>M + 1 设置为左边界</strong>，重新查找</p></li><li><p>当 L &gt; R 时，表示没有找到，应结束循环</p></li></ol><p><strong>算法实现：</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">binarySearch</span><span class="params">(<span class="type">int</span>[] a, <span class="type">int</span> t)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">l</span> <span class="operator">=</span> <span class="number">0</span>, r = a.length - <span class="number">1</span>, m;</span><br><span class="line">    <span class="keyword">while</span> (l &lt;= r) &#123;</span><br><span class="line">        m = (l + r) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span> (a[m] == t) &#123;</span><br><span class="line">            <span class="keyword">return</span> m;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (a[m] &gt; t) &#123;</span><br><span class="line">            r = m - <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            l = m + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>其它考法</strong></p><ol><li><p>有一个有序表为 1,5,8,11,19,22,31,35,40,45,48,49,50 当二分查找值为 48 的结点时，查找成功需要比较的次数 </p></li><li><p>使用二分法在序列 1,4,6,7,15,33,39,50,64,78,75,81,89,96 中查找元素 81 时，需要经过（   ）次比较</p></li><li><p>在拥有128个元素的数组中二分查找一个数，需要比较的次数最多不超过多少次</p></li></ol><p>对于前两个题目，记得一个简要判断口诀：<strong>奇数二分取中间，偶数二分取中间靠左。</strong>对于后一道题目，需要知道公式：</p><p><code>n = [log2(N)] + 1;</code>(其中 2 为底数 n 为查找次数，N 为元素个数)</p><h2 id="冒泡排序"><a href="#冒泡排序" class="headerlink" title="冒泡排序"></a>冒泡排序</h2><p><strong>算法描述</strong></p><ol><li>依次比较数组中相邻两个元素大小，若 a[j] &gt; a[j+1]，则交换两个元素，两两都比较一遍称为一轮冒泡，结果是让最大的元素排至最后</li><li>重复以上步骤，直到整个数组有序</li></ol><p><img src="https://www.runoob.com/wp-content/uploads/2019/03/bubbleSort.gif" alt=""></p><p><strong>算法实现</strong></p><div class="tabs" id="$"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#$-1">java</button></li><li class="tab"><button type="button" data-href="#$-2">java优化</button></li><li class="tab"><button type="button" data-href="#$-3">C</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="$-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">bubble</span><span class="params">(<span class="type">int</span>[] a)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; a.length - <span class="number">1</span>; j++) &#123;</span><br><span class="line">        <span class="comment">// 一轮冒泡</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">swapped</span> <span class="operator">=</span> <span class="literal">false</span>; <span class="comment">// 是否发生了交换</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; a.length - <span class="number">1</span> - j; i++) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;比较次数&quot;</span> + i);</span><br><span class="line">            <span class="keyword">if</span> (a[i] &gt; a[i + <span class="number">1</span>]) &#123;</span><br><span class="line">                Utils.swap(a, i, i + <span class="number">1</span>);<span class="comment">// 交换位置，大的往后排</span></span><br><span class="line">                swapped = <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 第一轮冒泡下来，最大元素排到最后</span></span><br><span class="line">        System.out.println(<span class="string">&quot;第&quot;</span> + j + <span class="string">&quot;轮冒泡&quot;</span> + Arrays.toString(a));</span><br><span class="line">        <span class="keyword">if</span> (!swapped) &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="$-2"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">bubble_v2</span><span class="params">(<span class="type">int</span>[] a)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> a.length - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">last</span> <span class="operator">=</span> <span class="number">0</span>; <span class="comment">// 表示最后一次交换索引位置</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;比较次数&quot;</span> + i);</span><br><span class="line">            <span class="keyword">if</span> (a[i] &gt; a[i + <span class="number">1</span>]) &#123;</span><br><span class="line">                Utils.swap(a, i, i + <span class="number">1</span>);</span><br><span class="line">                last = i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        n = last;</span><br><span class="line">        System.out.println(<span class="string">&quot;第轮冒泡&quot;</span> + Arrays.toString(a));</span><br><span class="line">        <span class="keyword">if</span> (n == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="$-3"><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">bubble_sort</span><span class="params">(<span class="type">int</span> arr[], <span class="type">int</span> len)</span> &#123;</span><br><span class="line">    <span class="type">int</span> i, j, temp;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; len - <span class="number">1</span>; i++)&#123;</span><br><span class="line">        <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; len - <span class="number">1</span> - i; j++)&#123;</span><br><span class="line">            <span class="keyword">if</span> (arr[j] &gt; arr[j + <span class="number">1</span>]) &#123;</span><br><span class="line">                temp = arr[j];</span><br><span class="line">                arr[j] = arr[j + <span class="number">1</span>];</span><br><span class="line">                arr[j + <span class="number">1</span>] = temp;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="选择排序"><a href="#选择排序" class="headerlink" title="选择排序"></a>选择排序</h2><p><strong>算法描述</strong></p><ol><li><p>将数组分为两个子集，排序的和未排序的，每一轮从未排序的子集中选出最小的元素，放入排序子集。简单来说，就是从后排选出最小的放前排之后。（需要一个索引指向最小值）</p></li><li><p>重复以上步骤，直到整个数组有序</p></li></ol><p><img src="https://www.runoob.com/wp-content/uploads/2019/03/selectionSort.gif" alt=""></p><ul><li>优化点：为减少交换次数，每一轮可以先找最小的索引，在每轮最后再交换元素</li></ul><p><strong>算法实现</strong></p><div class="tabs" id="$"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#$-1">java</button></li><li class="tab"><button type="button" data-href="#$-2">C</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="$-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">selection</span><span class="params">(<span class="type">int</span>[] a)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; a.length - <span class="number">1</span>; i++) &#123;</span><br><span class="line">        <span class="comment">// i 代表每轮选择最小元素要交换到的目标索引</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">s</span> <span class="operator">=</span> i; <span class="comment">// 代表最小元素的索引</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> s + <span class="number">1</span>; j &lt; a.length; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (a[s] &gt; a[j]) s = j; <span class="comment">// j 元素比 s 元素还要小, 更新 s    </span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (s != i) &#123;</span><br><span class="line">            swap(a, s, i);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(Arrays.toString(a));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="$-2"><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">swap</span><span class="params">(<span class="type">int</span> *a,<span class="type">int</span> *b)</span>&#123;</span><br><span class="line">    <span class="type">int</span> temp = *a;</span><br><span class="line">    *a = *b;</span><br><span class="line">    *b = temp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">void</span> <span class="title function_">selection_sort</span><span class="params">(<span class="type">int</span> arr[], <span class="type">int</span> len)</span>&#123;</span><br><span class="line">    <span class="type">int</span> i,j;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span> ; i &lt; len - <span class="number">1</span> ; i++)&#123;</span><br><span class="line">        <span class="type">int</span> min = i;</span><br><span class="line">        <span class="keyword">for</span> (j = i + <span class="number">1</span>; j &lt; len; j++)&#123;</span><br><span class="line">            <span class="keyword">if</span> (arr[j] &lt; arr[min]) min = j;</span><br><span class="line">        &#125;</span><br><span class="line">        swap(&amp;arr[min], &amp;arr[i]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p><strong>与冒泡排序比较</strong></p><ol><li><p>二者平均时间复杂度都是 $O(n^2)$</p></li><li><p>选择排序一般要快于冒泡，因为其交换次数少</p></li><li><p>但如果集合有序度高，冒泡优于选择</p></li><li><p>冒泡属于稳定排序算法，而选择属于不稳定排序</p><ul><li>稳定排序指，按对象中不同字段进行多次排序，不会打乱同值元素的顺序</li><li>不稳定排序则反之</li></ul></li></ol><h2 id="插入排序"><a href="#插入排序" class="headerlink" title="插入排序"></a>插入排序</h2><p><strong>算法描述</strong></p><ol><li><p>将数组分为两个区域，排序区域（前面为已排序区域）和未排序区域（后面为待排序区域），每一轮从未排序区域中取出第一个元素，插入到排序区域（需保证顺序）</p></li><li><p>重复以上步骤，直到整个数组有序</p></li></ol><p><img src="https://www.runoob.com/wp-content/uploads/2019/03/insertionSort.gif" alt=""></p><p><strong>算法实现</strong></p><div class="tabs" id="$"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#$-1">java</button></li><li class="tab"><button type="button" data-href="#$-2">C</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="$-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 修改了代码与希尔排序一致</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(<span class="type">int</span>[] a)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; a.length; i++) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> a[i]; <span class="comment">// 代表待插入的元素值</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i; <span class="comment">// 已排序部分最后元素的索引</span></span><br><span class="line">        System.out.println(j);</span><br><span class="line">        <span class="keyword">while</span> (j &gt; <span class="number">0</span> &amp;&amp; t &lt; a[j - <span class="number">1</span>]) &#123;</span><br><span class="line">            a[j] = a[j - <span class="number">1</span>]; <span class="comment">// j-1 是上一元素索引，若 &gt; t，后移</span></span><br><span class="line">            j--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (j != i) a[j] = t; <span class="comment">// 找到比 t 小的了，就插入在 j 这个位置</span></span><br><span class="line">        System.out.println(Arrays.toString(a) + <span class="string">&quot; &quot;</span> + j);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="$-2"><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">insertion_sort</span><span class="params">(<span class="type">int</span> arr[], <span class="type">int</span> len)</span>&#123;</span><br><span class="line">    <span class="type">int</span> i,j,temp;</span><br><span class="line">    <span class="keyword">for</span> (i=<span class="number">1</span>;i&lt;len;i++)&#123;</span><br><span class="line">        temp = arr[i];</span><br><span class="line">        j=i<span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">while</span>((j&gt;=<span class="number">0</span>) &amp;&amp; (arr[j]&gt;temp)) &#123;</span><br><span class="line">            arr[j+<span class="number">1</span>] = arr[j];</span><br><span class="line">            j--;</span><br><span class="line">        &#125;</span><br><span class="line">        arr[j+<span class="number">1</span>] = temp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p><strong>与选择排序比较</strong></p><ol><li><p>二者平均时间复杂度都是 $O(n^2)$</p></li><li><p>大部分情况下，插入都略优于选择。小数据量排序，都会优先选择插入排序</p></li><li><p>有序集合插入的时间复杂度为 $O(n)$</p></li><li><p>插入属于稳定排序算法，而选择属于不稳定排序</p></li></ol><h2 id="希尔排序"><a href="#希尔排序" class="headerlink" title="希尔排序"></a>希尔排序</h2><p><strong>算法描述</strong></p><ol><li><p>首先选取一个间隙序列，如 (n/2，n/4 … 1)，n 为数组长度</p></li><li><p>每一轮将间隙相等的元素视为一组，对组内元素进行插入排序，目的有二</p><p>① 少量元素插入排序速度很快</p><p>② 让组内值较大的元素更快地移动到后方</p></li><li><p>当间隙逐渐减少，直至为 1 时，即可完成排序</p></li></ol><iframe src="//player.bilibili.com/player.html?aid=94596268&bvid=BV1rE411g7rW&cid=161489004&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe><p><strong>算法实现</strong></p><div class="tabs" id="$"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#$-1">java</button></li><li class="tab"><button type="button" data-href="#$-2">C</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="$-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">shell</span><span class="params">(<span class="type">int</span>[] a)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">gap</span> <span class="operator">=</span> a.length / <span class="number">2</span>; gap &gt; <span class="number">0</span>; gap /= <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> gap; i &lt; a.length; i++) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> a[i]; <span class="comment">// 代表待插入的元素值</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i;</span><br><span class="line">            <span class="keyword">while</span> (j &gt;= gap &amp;&amp; t &lt; a[j - gap]) &#123;</span><br><span class="line">                <span class="comment">// 每次与上一个间隙为 gap 的元素进行插入排序</span></span><br><span class="line">                a[j] = a[j - gap]; <span class="comment">// j-gap 是上一个元素索引，如果 &gt; t，后移</span></span><br><span class="line">                j -= gap;</span><br><span class="line">            &#125;</span><br><span class="line">            a[j] = t;</span><br><span class="line">            System.out.println(Arrays.toString(a) + <span class="string">&quot; gap:&quot;</span> + gap);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="$-2"><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">shell_sort</span><span class="params">(<span class="type">int</span> arr[], <span class="type">int</span> len)</span> &#123;</span><br><span class="line">    <span class="type">int</span> gap, i, j;</span><br><span class="line">    <span class="type">int</span> temp;</span><br><span class="line">    <span class="keyword">for</span> (gap = len &gt;&gt; <span class="number">1</span>; gap &gt; <span class="number">0</span>; gap &gt;&gt;= <span class="number">1</span>)&#123;</span><br><span class="line">        <span class="keyword">for</span> (i = gap; i &lt; len; i++) &#123;</span><br><span class="line">            temp = arr[i];</span><br><span class="line">            <span class="keyword">for</span> (j = i - gap; j &gt;= <span class="number">0</span> &amp;&amp; arr[j] &gt; temp; j -= gap)</span><br><span class="line">                arr[j + gap] = arr[j];</span><br><span class="line">            arr[j + gap] = temp;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="快速排序"><a href="#快速排序" class="headerlink" title="快速排序"></a>快速排序</h2><p><strong>算法描述</strong></p><ol><li>每一轮排序选择一个基准点（pivot）进行分区<ul><li>让小于基准点的元素的进入一个分区，大于基准点的元素的进入另一个分区</li><li>当分区完成时，基准点元素的位置就是其最终位置</li></ul></li><li>在子分区内重复以上过程，直至子分区元素个数少于等于 1，这体现的是分而治之的思想</li><li>从以上描述可以看出，一个关键在于分区算法，常见的有洛穆托分区方案、双边循环分区方案、霍尔分区方案</li></ol><p><img src="https://www.runoob.com/wp-content/uploads/2019/03/quickSort.gif" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> 面试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 算法 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LeetCode算法</title>
      <link href="/posts/LeetCode.html"/>
      <url>/posts/LeetCode.html</url>
      
        <content type="html"><![CDATA[<h1 id="14-最长公共前缀"><a href="#14-最长公共前缀" class="headerlink" title="14.最长公共前缀"></a>14.最长公共前缀</h1><p>编写一个函数来查找字符串数组中的最长公共前缀。<br>如果不存在公共前缀，返回空字符串 “”。</p><p><strong>示例 1</strong>：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入：strs = [<span class="string">&quot;flower&quot;</span>,<span class="string">&quot;flow&quot;</span>,<span class="string">&quot;flight&quot;</span>]</span><br><span class="line">输出：<span class="string">&quot;fl&quot;</span></span><br></pre></td></tr></table></figure><p><strong>示例 2</strong>：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">输入：strs = [<span class="string">&quot;dog&quot;</span>,<span class="string">&quot;racecar&quot;</span>,<span class="string">&quot;car&quot;</span>]</span><br><span class="line">输出：<span class="string">&quot;&quot;</span></span><br><span class="line">解释：输入不存在公共前缀。</span><br></pre></td></tr></table></figure><hr><div class="tabs" id="$"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#$-1">java</button></li><li class="tab"><button type="button" data-href="#$-2">思路</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="$-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">longestCommonPrefixSolution</span><span class="params">(String[] strs)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (strs == <span class="literal">null</span> || strs.length == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> strs[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; strs.length; i++) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span> (index &lt; Math.min(str.length(), strs[i].length()) &amp;&amp; str.charAt(index) == strs[i].charAt(index)) &#123;</span><br><span class="line">                index++;</span><br><span class="line">            &#125;</span><br><span class="line">            str = str.substring(<span class="number">0</span>, index);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> str;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="$-2"><p><img src="https://img1.imgtp.com/2022/09/04/Bj3ETknH.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><p>LeetCode地址—&gt;<a href="https://leetcode.cn/problems/longest-common-prefix/">14. 最长公共前缀</a></p><hr><h1 id="20-有效的括号"><a href="#20-有效的括号" class="headerlink" title="20.有效的括号"></a>20.有效的括号</h1><p>给定一个只包括 ‘(‘，’)’，’{‘，’}’，’[‘，’]’ 的字符串 s ，判断字符串是否有效。</p><p>有效字符串需满足：</p><blockquote><p>左括号必须用相同类型的右括号闭合。<br>左括号必须以正确的顺序闭合。<br>每个右括号都有一个对应的相同类型的左括号。</p></blockquote><p><strong>示例 1</strong>：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入：s = <span class="string">&quot;()&quot;</span></span><br><span class="line">输出：<span class="literal">true</span></span><br></pre></td></tr></table></figure><p><strong>示例 2</strong>：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入：s = <span class="string">&quot;()[]&#123;&#125;&quot;</span></span><br><span class="line">输出：<span class="literal">true</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入：s = <span class="string">&quot;(]&quot;</span></span><br><span class="line">输出：<span class="literal">false</span></span><br></pre></td></tr></table></figure><hr><div class="tabs" id="$"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#$-1">java</button></li><li class="tab"><button type="button" data-href="#$-2">思路</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="$-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isVaild</span><span class="params">(String s)</span> &#123;</span><br><span class="line">        <span class="comment">// 输入的 s 字符串长度为奇数或第一项是右括号直接 false</span></span><br><span class="line">        <span class="keyword">if</span> (s.length() % <span class="number">2</span> != <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        Stack&lt;Character&gt; stack = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">char</span> c : s.toCharArray()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (c == <span class="string">&#x27;(&#x27;</span>)</span><br><span class="line">                stack.push(<span class="string">&#x27;)&#x27;</span>);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (c == <span class="string">&#x27;&#123;&#x27;</span>)</span><br><span class="line">                stack.push(<span class="string">&#x27;&#125;&#x27;</span>);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (c == <span class="string">&#x27;[&#x27;</span>)</span><br><span class="line">                stack.push(<span class="string">&#x27;]&#x27;</span>);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (stack.empty() || c != stack.pop())</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> stack.empty();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="$-2"><p>巧法<br>forEach遍历每个字符;<br>如果存在左边括号;<br>则使用栈的方式存储对应的右边括号，成为待匹配的右括号，等待下一轮循环进来与 c 比较同时 pop();<br>（就巧在这次比较，如果 c 为右括号，执行<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (stack.empty() || c != stack.pop()) <span class="keyword">return</span> <span class="literal">false</span>;</span><br></pre></td></tr></table></figure><br>最后若栈为空，则一定是正确的括号</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><p>LeetCode地址—&gt;<a href="https://leetcode.cn/problems/valid-parentheses/">20. 有效的括号</a></p><hr><h1 id="21-合并两个有序链表"><a href="#21-合并两个有序链表" class="headerlink" title="21.合并两个有序链表"></a>21.合并两个有序链表</h1><blockquote><p>将两个升序链表合并为一个新的 <strong>升序</strong> 链表并返回。新链表是通过拼接给定的两个链表的所有节点组成的。</p></blockquote><p><strong>示例 1</strong>：<br><img src="https://assets.leetcode.com/uploads/2020/10/03/merge_ex1.jpg" alt=""></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入：l1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>], l2 = [<span class="number">1</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line">输出：[<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">4</span>]</span><br></pre></td></tr></table></figure><p><strong>示例 2</strong>：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入：l1 = [], l2 = []</span><br><span class="line">输出：[]</span><br></pre></td></tr></table></figure><p><strong>示例 3</strong>：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入：l1 = [], l2 = [<span class="number">0</span>]</span><br><span class="line">输出：[<span class="number">0</span>]</span><br></pre></td></tr></table></figure><hr><div class="tabs" id="$"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#$-1">C</button></li><li class="tab"><button type="button" data-href="#$-2">思路</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="$-1"><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> ListNode* <span class="title function_">mergeTwoLists</span><span class="params">(<span class="keyword">struct</span> ListNode* list1, <span class="keyword">struct</span> ListNode* list2)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(list1==<span class="literal">NULL</span>) <span class="keyword">return</span> list2;</span><br><span class="line">    <span class="keyword">if</span>(list2==<span class="literal">NULL</span>) <span class="keyword">return</span> list1;</span><br><span class="line">    <span class="keyword">if</span>(list1-&gt;val &lt; list2-&gt;val)&#123;</span><br><span class="line">        list1-&gt;next = mergeTwoLists(list1-&gt;next,list2);</span><br><span class="line">        <span class="keyword">return</span> list1;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        list2-&gt;next = mergeTwoLists(list1,list2-&gt;next);</span><br><span class="line">        <span class="keyword">return</span> list2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="$-2"><p>使用递归：<br>一直进行比较直到其中一个链表值为NULL，此为判断递归结束条件。<br>然后开始返回，是在原有链表的基础之上往后面拼接节点。<br>递归到最后一层才开始拼接链表。<br><img src="https://pic.leetcode-cn.com/86c8ce53d2a91f3d710fdba825333be582a15bd661e9f05a10278bf558fbf1ef-1.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><p>LeetCode地址—&gt;<a href="https://leetcode.cn/problems/merge-two-sorted-lists/">21.合并两个有序链表</a></p><hr><h1 id="26-删除有序数组中的重复项"><a href="#26-删除有序数组中的重复项" class="headerlink" title="26.删除有序数组中的重复项"></a>26.删除有序数组中的重复项</h1><p>给你一个 升序排列 的数组 nums ，请你 原地 删除重复出现的元素，使每个元素 只出现一次 ，返回删除后数组的新长度。元素的 相对顺序 应该保持 一致 。</p><p>由于在某些语言中不能改变数组的长度，所以必须将结果放在数组nums的第一部分。更规范地说，如果在删除重复项之后有 k 个元素，那么 nums 的前 k 个元素应该保存最终结果。</p><p>将最终结果插入 nums 的前 k 个位置后返回 k 。</p><p>不要使用额外的空间，你必须在 原地 修改输入数组 并在使用 O(1) 额外空间的条件下完成。</p><p><strong>示例 1</strong>：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">输入：nums = [<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>]</span><br><span class="line">输出：<span class="number">2</span>, nums = [<span class="number">1</span>,<span class="number">2</span>,_]</span><br><span class="line">解释：函数应该返回新的长度 <span class="number">2</span> ，并且原数组 nums 的前两个元素被修改为 <span class="number">1</span>, <span class="number">2</span> 。不需要考虑数组中超出新长度后面的元素。</span><br></pre></td></tr></table></figure><p><strong>示例 2</strong>：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">输入：nums = [<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line">输出：<span class="number">5</span>, nums = [<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line">解释：函数应该返回新的长度 <span class="number">5</span> ， 并且原数组 nums 的前五个元素被修改为 <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span> 。不需要考虑数组中超出新长度后面的元素。</span><br></pre></td></tr></table></figure><p>双指针算法思路：<br><div class="tabs" id="$"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#$-1">1</button></li><li class="tab"><button type="button" data-href="#$-2">2</button></li><li class="tab"><button type="button" data-href="#$-3">3</button></li><li class="tab"><button type="button" data-href="#$-4">4</button></li><li class="tab"><button type="button" data-href="#$-5">5</button></li><li class="tab"><button type="button" data-href="#$-6">6</button></li><li class="tab"><button type="button" data-href="#$-7">7</button></li><li class="tab"><button type="button" data-href="#$-8">8</button></li><li class="tab"><button type="button" data-href="#$-9">9</button></li><li class="tab"><button type="button" data-href="#$-10">10</button></li><li class="tab"><button type="button" data-href="#$-11">11</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="$-1"><p><img src="https://assets.leetcode-cn.com/solution-static/26/1.png"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="$-2"><p><img src="https://assets.leetcode-cn.com/solution-static/26/2.png"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="$-3"><p><img src="https://assets.leetcode-cn.com/solution-static/26/3.png"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="$-4"><p><img src="https://assets.leetcode-cn.com/solution-static/26/4.png"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="$-5"><p><img src="https://assets.leetcode-cn.com/solution-static/26/5.png"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="$-6"><p><img src="https://assets.leetcode-cn.com/solution-static/26/6.png"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="$-7"><p><img src="https://assets.leetcode-cn.com/solution-static/26/7.png"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="$-8"><p><img src="https://assets.leetcode-cn.com/solution-static/26/8.png"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="$-9"><p><img src="https://assets.leetcode-cn.com/solution-static/26/9.png"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="$-10"><p><img src="https://assets.leetcode-cn.com/solution-static/26/10.png"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="$-11"><p><img src="https://assets.leetcode-cn.com/solution-static/26/11.png"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></p><div class="tabs" id="$"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#$-1">java</button></li><li class="tab"><button type="button" data-href="#$-2">思路</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="$-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">removeDuplicates</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (nums == <span class="literal">null</span> || nums.length == <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">p</span> <span class="operator">=</span> <span class="number">0</span>, q = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (q &lt; nums.length) &#123;</span><br><span class="line">            <span class="keyword">if</span> (nums[p] != nums[q]) &#123;</span><br><span class="line">                nums[++p] = nums[q];</span><br><span class="line">            &#125;</span><br><span class="line">            q++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> p + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="$-2"><p>使用双指针；<br>q指向前面元素，p指向后面待比较元素。<br>每一次比较下来q都要自增，当两下标对应的元素不相等时，p会自增，并自增后的下标指向的元素赋值为q下标指向的元素。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><p>LeetCode地址—&gt;<a href="https://leetcode.cn/problems/remove-duplicates-from-sorted-array/">26.删除有序数组中的重复项</a></p><hr>]]></content>
      
      
      <categories>
          
          <category> LeetCode </category>
          
      </categories>
      
      
        <tags>
            
            <tag> LeetCode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数据结构与算法</title>
      <link href="/posts/4b0178e0.html"/>
      <url>/posts/4b0178e0.html</url>
      
        <content type="html"><![CDATA[<p>常见数据结构可参考下方视频(视频来自B站黑马程序员之Java SE)</p><iframe src="//player.bilibili.com/player.html?aid=250694651&bvid=BV1Cv411372m&cid=423438698&page=130" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe>]]></content>
      
      
      <categories>
          
          <category> DSA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 算法 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python入门</title>
      <link href="/posts/d9ef328.html"/>
      <url>/posts/d9ef328.html</url>
      
        <content type="html"><![CDATA[<h1 id="单行注释与多行注释"><a href="#单行注释与多行注释" class="headerlink" title="单行注释与多行注释"></a>单行注释与多行注释</h1><p>单行注释用<code>#</code>—&gt;一个井号，vacode快捷键<code>ctrl+/</code></p><p>多行注释用<code>&quot;&quot;&quot;</code>—&gt;三个双引号，vacode快捷键<code>ctrl+shift+/</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;hello python&#x27;</span>) <span class="comment">#现在这个是单行注释</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;这个是多行注释</span></span><br><span class="line"><span class="string">print(&#x27;hello python&#x27;)</span></span><br><span class="line"><span class="string">print(&#x27;hello python&#x27;)</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><hr><h1 id="输入输出"><a href="#输入输出" class="headerlink" title="输入输出"></a>输入输出</h1><h2 id="输入"><a href="#输入" class="headerlink" title="输入"></a>输入</h2><p>使用<code>input</code>函数可以获得用户输入在控制台窗口上输入的<strong>一行</strong>的<strong>字符串</strong>，使用<code>变量 = input()</code>的形式将其赋值给一个变量：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">str1 = <span class="built_in">input</span>()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;输入的是%s&quot;</span> % str1)</span><br></pre></td></tr></table></figure><p><img src="https://img1.imgtp.com/2022/09/03/esfHeB2O.png" alt="image-20220902234950887"></p><p>还可以在<code>input()</code>的括号内，加入一些提示信息：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">str1=<span class="built_in">input</span>(<span class="string">&quot;请输入:&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;输入的是%s&quot;</span> % str1)</span><br></pre></td></tr></table></figure><p><img src="https://img1.imgtp.com/2022/09/03/xsqVSg7s.gif" alt="gif1"></p><hr><h2 id="输出"><a href="#输出" class="headerlink" title="输出"></a>输出</h2><h3 id="print的函数"><a href="#print的函数" class="headerlink" title="print的函数"></a><code>print</code>的函数</h3><p>将要输出的内容放在<code>print()</code>的括号内，就可以输出：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;hello world&quot;</span>) <span class="comment">#单引号包裹也是可行的</span></span><br><span class="line"><span class="comment">#控制台打印：hello world</span></span><br></pre></td></tr></table></figure><p><code>print</code>函数可以同时输出多个内容，只需要将它一起放在<code>print</code>的括号内，并用逗号隔开：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;hello&quot;</span>,<span class="string">&quot;world&quot;</span>)</span><br><span class="line"><span class="comment">#控制台打印：hello world</span></span><br></pre></td></tr></table></figure><p>==注意==：此时同时输出的多个内容之间，会有<strong>空格</strong>隔开。</p><p>类似于 C/C++ 的<code>printf</code>，Python 的<code>print</code>也能实现格式化输出，方法是使用<code>%</code>操作符，它会将左边的字符串当做<strong>格式字符串</strong>，将右边的参数代入格式字符串：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;1 + 1 = %d&quot;</span> % <span class="number">2</span>) </span><br><span class="line"><span class="comment">#2会替换掉 %d 。控制台输出：1 + 1 = 2</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;hello %s&quot;</span> % <span class="string">&quot;world&quot;</span>)</span><br><span class="line"><span class="comment">#左边 %s 被替换成右边的 world 。控制台输出：hello world</span></span><br></pre></td></tr></table></figure><p>一般不用担心占位格式字符由于代码多肉眼难以区分和查看的问题，一般的编译器会带高亮提示。例如：博主用的 vsCode：</p><p>（我vsCode使用了主题，所以可能和大众的代码颜色不同）</p><p><img src="https://img1.imgtp.com/2022/09/03/S2PI6Bab.png" alt="image-20220903000459990"></p><p>如果要带入多个参数，则需要用<code>()</code>包裹代入的多个参数，参数与参数之间用逗号隔开。</p><p>==注意==：<strong>参数的顺序应该对应格式字符串中的顺序</strong>：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;%d + %d = %d&quot;</span> % (<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>))</span><br><span class="line"><span class="comment">#控制台打印：1 + 1 = 2</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;%s %s&quot;</span> % (<span class="string">&quot;world&quot;</span>,<span class="string">&quot;hello&quot;</span>))</span><br><span class="line"><span class="comment">#控制台打印：world hello</span></span><br></pre></td></tr></table></figure><h3 id="格式字符串（占位符）"><a href="#格式字符串（占位符）" class="headerlink" title="格式字符串（占位符）"></a>格式字符串（占位符）</h3><p>格式字符串中，不同<strong>占位符</strong>的含义：</p><div class="table-container"><table><thead><tr><th style="text-align:center">占位符</th><th>表示</th></tr></thead><tbody><tr><td style="text-align:center">%s</td><td>作为字符串</td></tr><tr><td style="text-align:center">%d</td><td>作为有符号十进制整数</td></tr><tr><td style="text-align:center">%u</td><td>作为无符号十进制整数</td></tr><tr><td style="text-align:center">%o</td><td>作为无符号八进制整数</td></tr><tr><td style="text-align:center">%x</td><td>作为无符号十六进制整数，a～f采用小写形式</td></tr><tr><td style="text-align:center">%X</td><td>作为无符号十六进制整数，A～F采用大写形式</td></tr><tr><td style="text-align:center">%f</td><td>作为浮点数</td></tr><tr><td style="text-align:center">%e，%E</td><td>作为浮点数，使用科学计数法</td></tr><tr><td style="text-align:center">%g，%G</td><td>作为浮点数，使用最低有效数位</td></tr></tbody></table></div><p><strong>注意:</strong> <code>print</code>函数输出数据后会换行，如果不想换行，需要指定<code>end=&quot;&quot;</code>：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;hello&quot;</span> , end=<span class="string">&quot;&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;world&quot;</span> , end=<span class="string">&quot;&quot;</span>)</span><br><span class="line"><span class="comment">#控制台输出helloworld</span></span><br></pre></td></tr></table></figure><h3 id="字符串转换"><a href="#字符串转换" class="headerlink" title="字符串转换"></a>字符串转换</h3><p><code>input</code>函数接收的是用户控制台输入的<strong>字符串</strong>，此时还不能作为整数或者小数进行数学运算，需要使用函数将字符串转换成想要的类型。</p><ul><li>转换成整数，使用<code>int()</code>函数：<code>num1 = int(str1)</code></li><li>转换成小数，使用<code>float()</code>函数：<code>f1 = float(str1)</code></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">str1 = <span class="built_in">input</span>()</span><br><span class="line">num1 = <span class="built_in">int</span>(str1)</span><br><span class="line">f1 = <span class="built_in">float</span>(str1)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;整数%d,小数%f&quot;</span> % (num1,f1))</span><br><span class="line"><span class="comment">#控制台输入：114514</span></span><br><span class="line"><span class="comment">#控制台输出：整数114514,小数114514.000000</span></span><br></pre></td></tr></table></figure><p>如果输入10，得到的输出是：<code>整数10,小数10.000000</code>。</p><hr><h1 id="Python字符串"><a href="#Python字符串" class="headerlink" title="Python字符串"></a>Python字符串</h1><p>Python 语言中，字符串是用两个双引号<code>&quot;example&quot;</code>或者单引号<code>&#39;example&#39;</code>括起来的零个或多个字符。</p><p>字符串是字符的序列，可以按照单个字符或字符片段进行索引，字符串包括两种序号体系：正向递增序号和反向递减序号。</p><p><img src="https://img1.imgtp.com/2022/09/08/i0bWcnyX.png" alt="image-20220908214625279"></p><p>Python 字符串也可以采用<code>[N:M]</code>区间格式获取指定字符串。</p><p>表示字符串中从<code>N</code>到<code>M</code>（不包含<code>M</code>，包左不包右）的子字符串，其中，<code>N</code>和<code>M</code>为字符串的索引序号，可以混合使用正向递增序号和反向递减序号。如果表示中<code>N</code>或者<code>M</code>索引缺失，则表示字符串把开始或结束索引值设为默认值。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt;name=<span class="string">&quot;Python语言程序设计&quot;</span></span><br><span class="line">&gt;&gt;&gt;name[<span class="number">0</span>]</span><br><span class="line"><span class="string">&#x27;P&#x27;</span></span><br><span class="line">&gt;&gt;&gt;<span class="built_in">print</span>(name[<span class="number">0</span>],name[<span class="number">7</span>],name[-<span class="number">1</span>])</span><br><span class="line">P 言 计</span><br><span class="line">&gt;&gt;&gt;<span class="built_in">print</span>(name[<span class="number">2</span>:-<span class="number">4</span>])</span><br><span class="line">thon语言</span><br><span class="line">&gt;&gt;&gt;<span class="built_in">print</span>(name[:<span class="number">6</span>])</span><br><span class="line">Python</span><br><span class="line">&gt;&gt;&gt;<span class="built_in">print</span>(name[<span class="number">6</span>:])</span><br><span class="line">语言程序设计</span><br><span class="line">&gt;&gt;&gt;<span class="built_in">print</span>(name[:])</span><br><span class="line">Python语言程序设计</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python环境配置——Miniconda</title>
      <link href="/posts/5753d50.html"/>
      <url>/posts/5753d50.html</url>
      
        <content type="html"><![CDATA[<p>Miniconda下载地址：<br><a href="https://docs.conda.io/en/latest/miniconda.html">https://docs.conda.io/en/latest/miniconda.html</a><br><img src="https://img-blog.csdnimg.cn/b653515dcb04455d822c345b343f4f28.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6LiP6L-H5bGx5rKz,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="在这里插入图片描述"><br>查看当前python版本：<br><img src="https://img-blog.csdnimg.cn/e8a70ba2ab924a5fa6dc9f224e2c6091.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6LiP6L-H5bGx5rKz,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="在这里插入图片描述"><br>下载python3.7版本（不用直接找官网下载配环境变量了）：<br><img src="https://img-blog.csdnimg.cn/122189c400514527be41ba9e1ef84a50.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6LiP6L-H5bGx5rKz,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="在这里插入图片描述"><br>激活新安装的3.7环境：<br><img src="https://img-blog.csdnimg.cn/5c6f1800dc89428c8b64900dba4e1cc9.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6LiP6L-H5bGx5rKz,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="在这里插入图片描述"><br>此时在vs code中可查看多版本环境<br><img src="https://img-blog.csdnimg.cn/d4f209be590c437a9d30ddabc3ee1576.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6LiP6L-H5bGx5rKz,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="在这里插入图片描述"></p>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>关于mybatis一对一查询，一对多查询遇到的错误</title>
      <link href="/posts/1e2b9fda.html"/>
      <url>/posts/1e2b9fda.html</url>
      
        <content type="html"><![CDATA[<blockquote><blockquote><p>springboot整合mybatis项目<br>博客系统<br>文章，相册，评论，标签，等表<br>IDEA为最新版2021.3.3，mysql数据库为最新版Navicat</p><h2 id="（或许有些字段不支持特定的命名）"><a href="#（或许有些字段不支持特定的命名）" class="headerlink" title="（或许有些字段不支持特定的命名）"></a>（或许有些字段不支持特定的命名）</h2><p>也是醉了，以前idea还是19版的，navicat也是老版本的时候mybatis关联查询mapper操作能正常运行，拿到相应字段，并封装，但最近写项目过程中遇到一个离谱的是，过了好久才发现，</p></blockquote></blockquote><p>当关联查询时，无论一对一<association>还是一对多<collection><br>除了需要注意javaType和ofType之外，还应该注意各表主键不能同一名称</p><p>实体类文章</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Article</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> Integer authorId;</span><br><span class="line">    <span class="keyword">private</span> String title;</span><br><span class="line">    <span class="keyword">private</span> String content;</span><br><span class="line">    <span class="keyword">private</span> Timestamp date;<span class="comment">//private LocalDate date;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Users user;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> List&lt;Comment&gt; commentList;</span><br><span class="line">    <span class="keyword">private</span> List&lt;ArticleTag&gt; articleTagList;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>接下来是对文章进行操作，要求查询全部文章，并关联查询==作者==，文章==标签==（一个文章多个标签）</p><p>先看一下我下面代码块的写法，注意一对一，一对多的各个实体查询时的id，都是拿的数据库的id字段，只有标签被我改为了tag_id</p><p><img src="https://img-blog.csdnimg.cn/e9e285869f624a8b9684451ddcaf1a62.png#pic_center" alt="在这里插入图片描述"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;select id=<span class="string">&quot;queryAllArticles&quot;</span> resultMap=<span class="string">&quot;ArticleList&quot;</span>&gt;</span><br><span class="line">        select a.*,u.*,t.*</span><br><span class="line">        from article a</span><br><span class="line">                 join users u on a.authorid = u.id</span><br><span class="line">                 left outer join article_tag t on a.id = t.article_id</span><br><span class="line"></span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">    &lt;resultMap id=<span class="string">&quot;ArticleList&quot;</span> type=<span class="string">&quot;article&quot;</span>&gt;</span><br><span class="line">        &lt;id column=<span class="string">&quot;id&quot;</span> property=<span class="string">&quot;id&quot;</span>/&gt;</span><br><span class="line">        &lt;result column=<span class="string">&quot;authorid&quot;</span> property=<span class="string">&quot;authorId&quot;</span>/&gt;</span><br><span class="line">        &lt;result column=<span class="string">&quot;title&quot;</span> property=<span class="string">&quot;title&quot;</span>/&gt;</span><br><span class="line">        &lt;result column=<span class="string">&quot;content&quot;</span> property=<span class="string">&quot;content&quot;</span>/&gt;</span><br><span class="line">        &lt;result column=<span class="string">&quot;date&quot;</span> property=<span class="string">&quot;date&quot;</span>/&gt;</span><br><span class="line">        &lt;association property=<span class="string">&quot;user&quot;</span> javaType=<span class="string">&quot;users&quot;</span>&gt;</span><br><span class="line">            &lt;id column=<span class="string">&quot;id&quot;</span> property=<span class="string">&quot;id&quot;</span>/&gt;</span><br><span class="line">            &lt;result column=<span class="string">&quot;pet_name&quot;</span> property=<span class="string">&quot;petName&quot;</span>/&gt;</span><br><span class="line">            &lt;result column=<span class="string">&quot;headportrait&quot;</span> property=<span class="string">&quot;headPortrait&quot;</span>/&gt;</span><br><span class="line">        &lt;/association&gt;</span><br><span class="line">        &lt;collection property=<span class="string">&quot;articleTagList&quot;</span> ofType=<span class="string">&quot;articleTag&quot;</span>&gt;</span><br><span class="line">            &lt;id column=<span class="string">&quot;tag_id&quot;</span> property=<span class="string">&quot;tagId&quot;</span>/&gt;</span><br><span class="line">            &lt;result column=<span class="string">&quot;article_id&quot;</span> property=<span class="string">&quot;articleId&quot;</span>/&gt;</span><br><span class="line">            &lt;result column=<span class="string">&quot;tag_content&quot;</span> property=<span class="string">&quot;tag&quot;</span>/&gt;</span><br><span class="line">        &lt;/collection&gt;</span><br><span class="line">    &lt;/resultMap&gt;</span><br></pre></td></tr></table></figure><p>如下图<br>所以当我测试的时候能正常根据id拿到每张表的同一主键名称id吗</p><blockquote><blockquote><p>并不能拿到<br>控制台仅仅正确输出了标签list中的tag_id，没错，细心点，我也是最后才发现，它nn的，上面输出的user（文章作者）他的id封装错了，他的id是这篇文章的id，所以，sql我自此所有==表的主键不都全命名为id==了，防止此处再烙下病根，而且数据库字段在命名时，我发现字段名字为describe和tag都查不到数据，本来想简简单单命名的数据库表，也得上心了拜拜了~~改bug去了🥲😭🥲😭✍️✍️<br>///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////<br><img src="https://img-blog.csdnimg.cn/92fcd7251c044c6592875d3f9ad4734c.png#pic_center" alt="1">看控制台输出/////////////////////////////////////////////////////////////////////////////////////////////////</p></blockquote></blockquote><p>我的用户表里就没有id为56的<img src="https://img-blog.csdnimg.cn/8c49b0e13a644f2bb58dd181a07dbfe8.png#pic_center" alt="user"><br><img src="https://img-blog.csdnimg.cn/65109a7771c44eafb01c12a1d9d50619.png#pic_center" alt="article"></p><p><img src="https://img-blog.csdnimg.cn/dc2666c4bd3b4d7797cb76249f0b8dd8.png#pic_center" alt="在这里插入图片描述"></p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mybatis </tag>
            
            <tag> springboot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>node.js</title>
      <link href="/posts/node.js.html"/>
      <url>/posts/node.js.html</url>
      
        <content type="html"><![CDATA[<div class="note pink icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p>notice：<br>    <mark class="hl-label pink">基础篇，具体讲解模块化部分内容，路由模块，写接口，数据库，JWT</mark> </p></div><p>前提·需要掌握</p><p><img src="https://img1.imgtp.com/2022/08/30/fRNUYiRe.png" alt="image-20220809172613764"></p><p><img src="https://img1.imgtp.com/2022/08/30/53tYZlGe.png" alt="image-20220809172800095"></p><p><img src="https://img1.imgtp.com/2022/08/30/YAvi2ZFf.png" alt="image-20220809173304478"></p><p>Node.js  is a JavaScript runtime built on Chrome’s V8 JavaScript engine.<br>Node.js 是一个基于 Chrome V8 引擎的 JavaScript 运行环境。</p><p>Node.js 的官网地址： <a href="https://nodejs.org/zh-cn/">https://nodejs.org/zh-cn/</a></p><p><img src="https://img1.imgtp.com/2022/08/30/xvMDcCOL.png" alt="image-20220809173543073"></p><ul><li>浏览器是 JavaScript 的前端运行环境。</li><li>Node.js 是 JavaScript 的后端运行环境。Node.js 中无法调用 DOM 和 BOM 等浏览器内置 API。</li></ul><p>使用 tab 键，能够快速补全路径<br>使用 esc 键，能够快速清空当前已输入的命令<br>输入 cls 命令，可以清空终端</p><h1 id="fs-文件系统模块"><a href="#fs-文件系统模块" class="headerlink" title="fs 文件系统模块"></a>fs 文件系统模块</h1><p>fs 模块是 Node.js 官方提供的、用来操作文件的模块。它提供了一系列的方法和属性，用来满足用户对文件的操作需求。<br>例如：</p><ul><li><strong>fs.readFile()</strong> 方法，用来读取指定文件中的内容</li><li><strong>fs.writeFile()</strong> 方法，用来向指定的文件中写入内容 </li></ul><p>如果要在 JavaScript 代码中，使用 fs 模块来操作文件，则需要使用如下的方式先导入它：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br></pre></td></tr></table></figure></p><h2 id="1-fs-readFile-的语法格式"><a href="#1-fs-readFile-的语法格式" class="headerlink" title="1. fs.readFile() 的语法格式"></a>1. fs.readFile() 的语法格式</h2><p>使用 fs.readFile() 方法，可以读取指定文件中的内容，语法格式如下：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fs.<span class="title function_">readFile</span>(path,[options,]callback)</span><br></pre></td></tr></table></figure></p><p>参数解读：</p><ul><li>参数1：必选参数，字符串，表示文件的路径。</li><li>参数2：可选参数，表示以什么编码格式来读取文件。</li><li>参数3：必选参数，文件读取完成后，通过回调函数拿到读取的结果。</li></ul><h2 id="2-fs-writeFile-的语法格式"><a href="#2-fs-writeFile-的语法格式" class="headerlink" title="2. fs.writeFile() 的语法格式"></a>2. fs.writeFile() 的语法格式</h2><p>使用 fs.writeFile() 方法，可以向指定的文件中写入内容，语法格式如下：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fs.<span class="title function_">writeFile</span>(file,data,[options,]callback)</span><br></pre></td></tr></table></figure></p><p>参数解读：</p><ul><li>参数1：必选参数，需要指定一个文件路径的字符串，表示文件的存放路径。</li><li>参数2：必选参数，表示要写入的内容。</li><li>参数3：可选参数，表示以什么格式写入文件内容，默认值是 utf8。</li><li>参数4：必选参数，文件写入完成后的回调函数。</li></ul><p>==路径动态拼接的问题==</p><p>在使用 fs 模块操作文件时，如果提供的操作路径是以 ./ 或 ../ 开头的相对路径时，很容易出现路径动态拼接错误的问题。<br>原因：代码在运行的时候，会以执行 node 命令时所处的目录，动态拼接出被操作文件的完整路径。<br>解决方案：在使用 fs 模块操作文件时，直接提供完整的路径，不要提供 ./ 或 ../ 开头的相对路径，从而防止路径动态拼接的问题。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 出现路径拼接错误的问题，是因为提供了 ./ 或 ../ 开头的相对路径</span></span><br><span class="line"><span class="comment">// 如果要解决这个问题，可以直接提供一个完整的文件存放路径就行</span></span><br><span class="line">fs.<span class="title function_">readFile</span>(<span class="string">&#x27;./files/1.txt&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>, <span class="keyword">function</span>(<span class="params">err, dataStr</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;读取文件失败！&#x27;</span> + err.<span class="property">message</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;读取文件成功！&#x27;</span> + dataStr)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 移植性非常差、不利于维护</span></span><br><span class="line">fs.<span class="title function_">readFile</span>(<span class="string">&#x27;C:\\Users\\31330\\Desktop\\nodejs\\code\\files\\1.txt&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>, <span class="keyword">function</span>(<span class="params">err, dataStr</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;读取文件失败！&#x27;</span> + err.<span class="property">message</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;读取文件成功！&#x27;</span> + dataStr)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// __dirname 表示当前文件所处的目录</span></span><br><span class="line"><span class="comment">// console.log(__dirname)</span></span><br><span class="line"></span><br><span class="line">fs.<span class="title function_">readFile</span>(__dirname + <span class="string">&#x27;/files/1.txt&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>, <span class="keyword">function</span>(<span class="params">err, dataStr</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;读取文件失败！&#x27;</span> + err.<span class="property">message</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;读取文件成功！&#x27;</span> + dataStr)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h1 id="path-路径模块"><a href="#path-路径模块" class="headerlink" title="path 路径模块"></a>path 路径模块</h1><p>path 模块是 Node.js 官方提供的、用来处理路径的模块。它提供了一系列的方法和属性，用来满足用户对路径的处理需求。<br>例如：</p><ul><li><strong>path.join() </strong>方法，用来将多个路径片段拼接成一个完整的路径字符串 </li><li><strong>path.basename()</strong> 方法，用来从路径字符串中，将文件名解析出来</li></ul><p>如果要在 JavaScript 代码中，使用 path 模块来处理路径，则需要使用如下的方式先导入它：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br></pre></td></tr></table></figure></p><h2 id="1-path-join-的语法格式"><a href="#1-path-join-的语法格式" class="headerlink" title="1. path.join() 的语法格式"></a>1. path.join() 的语法格式</h2><p>使用 path.join() 方法，可以把多个路径片段拼接为完整的路径字符串，语法格式如下：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">path.<span class="title function_">join</span>([...paths])</span><br></pre></td></tr></table></figure></p><p>参数解读：</p><ul><li>…paths <string> 路径片段的序列</li><li>返回值: <string></li></ul><p>使用 path.join() 方法，可以把多个路径片段拼接为完整的路径字符串：</p><blockquote><p>注意： ‘../‘  表示回退一层路径</p><p>涉及到路径拼接的操作，都要使用 path.join() 方法进行处理。不要直接使用 + 进行字符串的拼接。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 注意：  ../ 会抵消前面的路径</span></span><br><span class="line"><span class="keyword">const</span> pathStr = path.<span class="title function_">join</span>(<span class="string">&#x27;/a&#x27;</span>, <span class="string">&#x27;/b/c&#x27;</span>, <span class="string">&#x27;../../&#x27;</span>, <span class="string">&#x27;./d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(pathStr)  <span class="comment">// \a\b\d\e</span></span><br><span class="line"></span><br><span class="line">fs.<span class="title function_">readFile</span>(__dirname + <span class="string">&#x27;/files/1.txt&#x27;</span>)</span><br><span class="line"></span><br><span class="line">fs.<span class="title function_">readFile</span>(path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;./files/1.txt&#x27;</span>), <span class="string">&#x27;utf8&#x27;</span>, <span class="keyword">function</span>(<span class="params">err, dataStr</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(err.<span class="property">message</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(dataStr) <span class="comment">//当前文件所在目录\files\1.txt</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p></blockquote><h2 id="2-path-basename-的语法格式"><a href="#2-path-basename-的语法格式" class="headerlink" title="2. path.basename() 的语法格式"></a>2. path.basename() 的语法格式</h2><p>使用 path.basename() 方法，可以获取路径中的最后一部分，经常通过这个方法获取路径中的文件名，语法格式如下：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">path.<span class="title function_">basename</span>(path[,ext])</span><br></pre></td></tr></table></figure></p><p>参数解读：</p><ul><li>path <string> 必选参数，表示一个路径的字符串 </li><li>ext <string> 可选参数，表示文件扩展名</li><li>返回: <string> 表示路径中的最后一部分</li></ul><p>使用 path.basename() 方法，可以从一个文件路径中，获取到文件的名称部分：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fpath = <span class="string">&#x27;a/b/c/index.html&#x27;</span> <span class="comment">// 文件存放路径</span></span><br><span class="line"><span class="keyword">var</span> fullName = path.<span class="title function_">basename</span>(fpath)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fullName) <span class="comment">// 输出 index.html</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> nameWithoutExt = path.<span class="title function_">basename</span>(fpath,<span class="string">&#x27;.html&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fullName) <span class="comment">// 输出 index</span></span><br></pre></td></tr></table></figure></p><h2 id="3-path-extname-的语法格式"><a href="#3-path-extname-的语法格式" class="headerlink" title="3. path.extname() 的语法格式"></a>3. path.extname() 的语法格式</h2><p>使用 path.extname() 方法，可以获取路径中的扩展名部分，语法格式如下：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">path.<span class="title function_">extname</span>(path)</span><br></pre></td></tr></table></figure></p><p>参数解读：</p><ul><li>path <string>必选参数，表示一个路径的字符串</li><li>返回: <string> 返回得到的扩展名字符串</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fpath = <span class="string">&#x27;a/b/c/index.html&#x27;</span> <span class="comment">// 文件存放路径</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fext = path.<span class="title function_">extname</span>(fpath)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fullName) <span class="comment">// 输出 .html</span></span><br></pre></td></tr></table></figure><hr><h1 id="http-模块"><a href="#http-模块" class="headerlink" title="http 模块"></a>http 模块</h1><p>http 模块是 Node.js 官方提供的、用来创建 web 服务器的模块。</p><p>通过 http 模块提供的<code>http.createServer()</code>方法，就能方便的把一台电脑变成Web 服务器，从而对外提供 Web 资源服务。</p><h2 id="1-创建基本的-web-服务器"><a href="#1-创建基本的-web-服务器" class="headerlink" title="1.创建基本的 web 服务器"></a>1.创建基本的 web 服务器</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 导入 http 模块</span></span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>)</span><br><span class="line"><span class="comment">// 2. 创建 web 服务器实例</span></span><br><span class="line"><span class="keyword">const</span> server = http.<span class="title function_">createServer</span>()</span><br><span class="line"><span class="comment">// 3. 服务器实例绑定 request 事件，监听客户端的请求</span></span><br><span class="line">server.<span class="title function_">on</span>(<span class="string">&#x27;request&#x27;</span>, <span class="keyword">function</span> (<span class="params">req, res</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Someone visit our web server.&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 4. 启动服务器</span></span><br><span class="line">server.<span class="title function_">listen</span>(<span class="number">8080</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;  </span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;server running at http://127.0.0.1:8080&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="req-请求对象"><a href="#req-请求对象" class="headerlink" title="req 请求对象"></a>req 请求对象</h3><p>只要客户端访问了服务器监听的地址，服务器接收到了客户端的请求，就会调用通过 <code>server.on()</code> 为服务器绑定的 request 事件处理函数。</p><p>通过函数的 req 参数可以访问与==客户端==相关的数据或属性：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">server.<span class="title function_">on</span>(<span class="string">&#x27;request&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// req.url 是客户端请求的 URL 地址。req.method 是客户端请求的 method 类型</span></span><br><span class="line">  <span class="keyword">const</span> str = <span class="string">`Your request url is <span class="subst">$&#123;req.url&#125;</span>, and request method is <span class="subst">$&#123;req.method&#125;</span>`</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(str)</span><br><span class="line">  <span class="comment">// 输出结果：Your request url is /, and request method is GET</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="res-响应对象"><a href="#res-响应对象" class="headerlink" title="res 响应对象"></a>res 响应对象</h3><p>如果想访问与==服务器==相关的数据或属性：res.end()</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">server.<span class="title function_">on</span>(<span class="string">&#x27;request&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> str = <span class="string">`Your request url is <span class="subst">$&#123;req.url&#125;</span>, and request method is <span class="subst">$&#123;req.method&#125;</span>`</span></span><br><span class="line">  <span class="comment">// 调用 res.end() 方法，向客户端响应str。并结束这次请求的处理过程</span></span><br><span class="line">  res.<span class="title function_">end</span>(str)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>==注意==：当调用 res.end() 方法，向客户端发送中文内容的时候，会出现乱码问题，此时，需要手动设置内容的编码格式：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">server.<span class="title function_">on</span>(<span class="string">&#x27;request&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> str = <span class="string">`您请求的 URL 地址是 <span class="subst">$&#123;req.url&#125;</span>，请求的 method 类型为 <span class="subst">$&#123;req.method&#125;</span>`</span></span><br><span class="line">  <span class="comment">// 调用 res.setHeader() 方法，设置 Content-Type 响应头，解决中文乱码的问题</span></span><br><span class="line">  res.<span class="title function_">setHeader</span>(<span class="string">&#x27;Content-Type&#x27;</span>, <span class="string">&#x27;text/html; charset=utf-8&#x27;</span>)</span><br><span class="line">  res.<span class="title function_">end</span>(str)<span class="comment">// 模块化之后 end() 全部变 send()</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><hr><h1 id="模块化"><a href="#模块化" class="headerlink" title="模块化"></a>模块化</h1><h2 id="1-模块化的基本概念"><a href="#1-模块化的基本概念" class="headerlink" title="1. 模块化的基本概念"></a>1. 模块化的基本概念</h2><p>类似于电脑主机，你懂我意思吧。</p><p>Node.js 中根据模块来源的不同，将模块分为了 3 大类，分别是：</p><ul><li><strong>内置模块</strong>（内置模块是由 Node.js 官方提供的，例如 fs、path、http 等）</li><li><strong>自定义模块</strong>（用户创建的每个 .js 文件，都是自定义模块）</li><li><strong>第三方模块</strong>（由第三方开发出来的模块，并非官方提供的内置模块，也不是用户创建的自定义模块，使用前需要先下载）</li></ul><p><code>require()</code>方法，可以加载需要的内置模块、用户自定义模块、第三方模块进行使用。例如：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>)</span><br></pre></td></tr></table></figure><p>模块作用域:</p><p>和函数作用域类似，在自定义模块中定义的变量、方法等成员，只能在当前模块内被访问，这种模块级别的访问限制，叫做模块<br>作用域。可以有效防止变量污染。</p><p><img src="https://img1.imgtp.com/2022/08/30/q7IgY6zn.png" alt="image-20220829203007219"></p><p>向外共享模块作用域中的成员：</p><ol><li>==module 对象==</li></ol><p>在每个 .js 自定义模块中都有一个 module 对象，它里面存储了和当前模块有关的信息，打印如下：</p><p><img src="https://img1.imgtp.com/2022/08/30/SOQpq6Xx.png" alt="image-20220829203223692"></p><ol><li>==module.exports 对象==</li></ol><p>在自定义模块中，可以使用 module.exports 对象，将模块内的成员共享出去，供外界使用。外界用 require() 方法导入自定义模块时，得到的就是 module.exports 所指向的对象。</p><p>使用 require() 方法导入模块时，导入的结果，永远以 module.exports 指向的对象为准。</p><p><img src="https://img1.imgtp.com/2022/08/30/yWPn0DiK.png" alt="image-20220829203405008"></p><ol><li>==exports 对象==</li></ol><p>由于 module.exports 单词写起来比较复杂，为了简化向外共享成员的代码，Node 提供了 exports 对象。默认情况<br>下，exports 和 module.exports 指向同一个对象。最终共享的结果，还是以 module.exports 指向的对象为准。</p><p><img src="https://img1.imgtp.com/2022/08/30/AQzPMWgu.png" alt="image-20220829203530932"></p><p>==注意==：</p><p>时刻谨记，require() 模块时，得到的永远是 <strong>module.exports</strong> 指向的对象：</p><p>不建议同一个模块中同时使用 exports 和 module.exports</p><p><img src="https://img1.imgtp.com/2022/08/30/GmXSmpfB.png" alt="image-20220829203802578"></p><h2 id="2-npm与包"><a href="#2-npm与包" class="headerlink" title="2. npm与包"></a>2. npm与包</h2><p>Node.js 中的第三方模块又叫做包。<br>就像电脑和计算机指的是相同的东西，第三方模块和包指的是同一个概念，只不过叫法不同。</p><p>国外有一家 IT 公司，叫做 npm, Inc. 这家公司旗下有一个非常著名的网站： <a href="https://www.npmjs.com/">https://www.npmjs.com/</a> ，它是全球最<br>大的包共享平台，你可以从这个网站上搜索到任何你需要的包，只要你有足够的耐心！<br>到目前位置，全球约 1100 多万的开发人员，通过这个包共享平台，开发并共享了超过 120 多万个包 供我们使用。<br>npm, Inc. 公司提供了一个地址为 <a href="https://registry.npmjs.org/">https://registry.npmjs.org/</a> 的服务器，来对外共享所有的包，我们可以从这个服务<br>器上下载自己所需要的包。<br>注意：<br>⚫ 从 <a href="https://www.npmjs.com/">https://www.npmjs.com/</a> 网站上搜索自己所需要的包<br>⚫ 从 <a href="https://registry.npmjs.org/">https://registry.npmjs.org/</a> 服务器上下载自己需要的包</p><p>包管理工具的名字叫做 Node Package Manager（简称 npm 包管理工具），这个包管理工具随着 Node.js 的安<br>装包一起被安装到了用户的电脑上。</p><p> npm -v 命令，来查看自己电脑上所安装的 npm 包管理工具的版本号</p><p>安装第三方包：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i 包名</span><br></pre></td></tr></table></figure><p>上述命令默认安装最新版本包</p><p>如果需要安装指定版本的包，可以在包名之后通过 <code>@ 符号</code>指定具体的版本，例如：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i moment@2.22.2</span><br></pre></td></tr></table></figure><p>初次装包完成后，在项目文件夹下多一个叫做 ==node_modules== 的文件夹和 ==package-lock.json== 的配置文件。</p><ul><li>node_modules 文件夹用来存放所有已安装到项目中的包。require() 导入第三方包时，就是从这个目录中查找并加载包。</li><li>package-lock.json 配置文件用来记录 node_modules 目录下的每一个包的下载信息，例如包的名字、版本号、下载地址等。</li></ul><p>包管理配置文件:</p><p>npm 规定，在项目根目录中，必须提供一个叫做 ==package.json== 的包管理配置文件。用来记录与项目有关的一些配置<br>信息。信息存放在 dependencies  节点中。例如：</p><ul><li>项目的名称、版本号、描述等</li><li>项目中都用到了哪些包</li><li>哪些包只在开发期间会用到</li><li>那些包在开发和部署时都需要用到</li></ul><p>新建项目时进入文件夹使用如下命令即可自动生成 package.json 包管理配置文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init -y</span><br></pre></td></tr></table></figure><p>npm 包管理工具会自动把包的名称和版本号，记录到 package.json 中。</p><p>当我们拿到一个剔除了 node_modules 的项目之后，需要先把所有的包下载到项目中，才能将项目运行起来。<br>执行下面命令安装所有包。从 package.json 中读取按过的包</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i</span><br></pre></td></tr></table></figure><p>卸载包：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm uninstall 包名</span><br></pre></td></tr></table></figure><p>npm uninstall 命令执行成功后，会把卸载的包，自动从 package.json 的 dependencies 中移除掉。</p><p>只在项目开发阶段会用到，在项目上线之后不会用到的包安装命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i 包名 -D</span><br></pre></td></tr></table></figure><p>命令等价于===npm i 包名 —save-dev</p><p>这些包将被记录到 devDependencies 节点中。与之对应的，如果某些包在开发和项目上线之后都需要用到，则建议把这些包记录到 dependencies 节点中。</p><p>国外服务器，下包慢，切换镜像源到淘宝</p><ul><li>查看当前镜像源</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config get registry</span><br></pre></td></tr></table></figure><ul><li>切换为淘宝镜像源</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config <span class="built_in">set</span> registry=https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure><ul><li>检测镜像源是否下载成功</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config get registry</span><br></pre></td></tr></table></figure><p>为了更方便的切换下包的镜像源，我们可以安装 nrm 这个小工具，利用 nrm 提供的终端命令，可以快速查看和切换下<br>包的镜像源。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm i nrm -g</span><br><span class="line">nrm <span class="built_in">ls</span></span><br><span class="line">nrm use taobao</span><br></pre></td></tr></table></figure><hr><p>包的分类：</p><ul><li>项目包</li></ul><p>被安装到项目的 node_modules 目录中的包，都是项目包</p><p>项目包又分为两类，分别是：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm i 包名 -D  <span class="comment">#开发依赖包（被记录到 devDependencies 节点中的包，只在开发期间会用到）</span></span><br><span class="line">npm i 包名     <span class="comment">#核心依赖包（被记录到 dependencies 节点中的包，在开发期间和项目上线之后都会用到）</span></span><br></pre></td></tr></table></figure><ul><li>全局包</li></ul><p>全局包会被安装到 C:\Users\用户目录\AppData\Roaming\npm\node_modules 目录下。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm i 包名 -g <span class="comment">#全局安装包</span></span><br><span class="line">npm uninstall 包名    <span class="comment">#卸载全局安装包</span></span><br></pre></td></tr></table></figure><p>注：只有工具性质的包，才有全局安装的必要性。因为它们提供了好用的终端命令。</p><hr><h1 id="Express"><a href="#Express" class="headerlink" title="Express"></a>Express</h1><p>Express 是基于 Node.js 平台，基于http模块，快速、开放、极简的 Web 开发框架。<br>通俗的理解：Express 的作用和 Node.js 内置的 http 模块类似，是专门用来创建 Web 服务器的。<br>Express 的本质：就是一个 npm 上的第三方包，提供了快速创建 Web 服务器的便捷方法。<br>Express 的中文官网： <a href="http://www.expressjs.com.cn/">http://www.expressjs.com.cn/</a></p><p>安装：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i express@4.17.1</span><br></pre></td></tr></table></figure><h2 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 导入 express</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="comment">// 2. 创建 web 服务器</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>()</span><br><span class="line"><span class="comment">// --------------------</span></span><br><span class="line"><span class="comment">// 4. 监听客户端的 GET 和 POST 请求，并向客户端响应具体的内容</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/user&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 调用 express 提供的 res.send() 方法，向客户端响应一个 JSON 对象</span></span><br><span class="line">  res.<span class="title function_">send</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;zs&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span>, <span class="attr">gender</span>: <span class="string">&#x27;男&#x27;</span> &#125;)</span><br><span class="line">&#125;)</span><br><span class="line">app.<span class="title function_">post</span>(<span class="string">&#x27;/user&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 调用 express 提供的 res.send() 方法，向客户端响应一个 文本字符串</span></span><br><span class="line">  res.<span class="title function_">send</span>(<span class="string">&#x27;请求成功&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 通过 req.query 可以获取到客户端发送过来的 查询参数</span></span><br><span class="line">  <span class="comment">// 注意：默认情况下，req.query 是一个空对象</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(req.<span class="property">query</span>)</span><br><span class="line">  res.<span class="title function_">send</span>(req.<span class="property">query</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 注意：这里的 :id 是一个动态的参数</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/user/:ids/:username&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// req.params 是动态匹配到的 URL 参数，默认也是一个空对象</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(req.<span class="property">params</span>)</span><br><span class="line">  res.<span class="title function_">send</span>(req.<span class="property">params</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// --------------------</span></span><br><span class="line"><span class="comment">// 3. 启动 web 服务器</span></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">80</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;express server running at http://127.0.0.1&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p> 托管静态资源：</p><p><code>express.static()</code></p><p>express 提供了一个非常好用的函数，叫做 express.static()，通过它，我们可以非常方便地创建一个静态资源服务器，<br>例如，通过如下代码就可以将 public 目录下的图片、CSS 文件、JavaScript 文件对外开放访问了：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在这里，调用 express.static() 方法，快速的对外提供静态资源</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;/public&#x27;</span>, express.<span class="title function_">static</span>(<span class="string">&#x27;public&#x27;</span>))</span><br></pre></td></tr></table></figure><p>现在，你就可以通过带有 /public 前缀地址来访问 public 目录中的文件了：</p><blockquote><p><a href="http://localhost/public/images/kitten.jpg">http://localhost/public/images/kitten.jpg</a><br><a href="http://localhost/public/css/style.css">http://localhost/public/css/style.css</a><br><a href="http://localhost/public/js/app.js">http://localhost/public/js/app.js</a></p></blockquote><hr><blockquote><p>在编写调试 Node.js 项目的时候，如果修改了项目的代码，则需要频繁的手动 close 掉，然后再重新启动，非常繁琐。<br>现在，我们可以使用 nodemon（<a href="https://www.npmjs.com/package/nodemon）">https://www.npmjs.com/package/nodemon）</a> 这个工具，它能够监听项目文件<br>的变动，当代码被修改后，nodemon 会自动帮我们重启项目，极大方便了开发和调试。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -g nodemon</span><br></pre></td></tr></table></figure><p>node app.js 替换为 nodemon app.js</p></blockquote><hr><h2 id="Express-路由"><a href="#Express-路由" class="headerlink" title="Express 路由"></a>Express 路由</h2><p>广义上来讲，路由就是映射关系。</p><p>在 Express 中，路由指的是客户端的请求与服务器处理函数之间的映射关系。<br>Express 中的路由分 3 部分组成，分别是请求的类型、请求的 URL 地址、处理函数</p><p>Express 中的路由的例子：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>()</span><br><span class="line"><span class="comment">// 挂载路由</span></span><br><span class="line"><span class="comment">// 匹配 GET 请求，请求 URL 为 /</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">send</span>(<span class="string">&#x27;hello world.&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 匹配 POST 请求，请求 URL 为 /</span></span><br><span class="line">app.<span class="title function_">post</span>(<span class="string">&#x27;/&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">send</span>(<span class="string">&#x27;Post Request.&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 请求类型和请求的URL同时匹配成功，才会调用对应的处理函数</span></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">80</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;http://127.0.0.1&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>使用：</p><p>为了方便对路由进行模块化的管理，Express 不建议将路由直接挂载到 app 上，而是推荐将路由抽离为单独的模块。<br>将路由抽离为单独模块的步骤如下：<br>① 创建路由模块对应的 .js 文件<br>② 调用 express.Router() 函数创建路由对象<br>③ 向路由对象上挂载具体的路由<br>④ 使用 module.exports 向外共享路由对象<br>⑤ 使用 app.use() 函数注册路由模块</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>()</span><br><span class="line"><span class="comment">// 导入路由模块</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="built_in">require</span>(<span class="string">&#x27;./user_router&#x27;</span>)</span><br><span class="line"><span class="comment">// 5. 注册路由模块，并为路由模块添加前缀 /api</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;/api&#x27;</span>, router)</span><br><span class="line"><span class="comment">// 注意： app.use() 函数的作用，就是来注册全局中间件</span></span><br><span class="line"><span class="comment">// 请求地址变为了 http://127.0.0.1/api/......</span></span><br><span class="line"><span class="comment">// app.use(&#x27;/files&#x27;, express.static(&#x27;./files&#x27;))</span></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">80</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;http://127.0.0.1&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>创建的路由模块js文件（user_router.js）</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 创建 user_router.js，导入 express</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="comment">// 2. 创建路由对象</span></span><br><span class="line"><span class="keyword">const</span> router = express.<span class="title class_">Router</span>()</span><br><span class="line"><span class="comment">// 3. 挂载具体的路由</span></span><br><span class="line">router.<span class="title function_">get</span>(<span class="string">&#x27;/user/list&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">send</span>(<span class="string">&#x27;Get user list.by URL http://127.0.0.1/api/user/list&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line">router.<span class="title function_">post</span>(<span class="string">&#x27;/user/add&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">send</span>(<span class="string">&#x27;Add new user.&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 4. 向外导出路由对象</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = router</span><br></pre></td></tr></table></figure><hr><h2 id="Express-中间件"><a href="#Express-中间件" class="headerlink" title="Express 中间件"></a>Express 中间件</h2><p>中间件（Middleware ），特指业务流程的中间处理环节。</p><p><img src="https://img1.imgtp.com/2022/08/30/6qCivFo6.png" alt="image-20220829214331133"></p><p>当一个请求到达 Express 的服务器之后，可以连续调用多个中间件，从而对这次请求进行预处理。</p><p>Express 的中间件，本质上就是一个 function 处理函数，Express 中间件的格式如下：</p><p><img src="https://img1.imgtp.com/2022/08/30/kotwSQ0M.png" alt="image-20220829214506369"></p><p>中间件函数的形参列表中，必须包含 next 参数。而路由处理函数中只包含 req 和 res。</p><p>next 函数是实现多个中间件连续调用的关键，它表示把流转关系转交给下一个中间件或路由</p><p><img src="https://img1.imgtp.com/2022/08/30/JIacgRGt.png" alt="image-20220829214642281"></p><p>定义中间件函数：</p><p>中间件需要在路由之前定义，因为js从上到下读</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义一个最简单的中间件函数</span></span><br><span class="line"><span class="comment">// const mw = function (req, res, next) &#123;</span></span><br><span class="line"><span class="comment">//   console.log(&#x27;这是最简单的中间件函数&#x27;)</span></span><br><span class="line"><span class="comment">//   // 把流转关系，转交给下一个中间件或路由</span></span><br><span class="line"><span class="comment">//   next()</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// 将 mw 注册为全局生效的中间件</span></span><br><span class="line"><span class="comment">// app.use(mw)</span></span><br><span class="line"><span class="comment">// *************************</span></span><br><span class="line"><span class="comment">// 这是定义全局中间件的简化形式</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;这是最简单的中间件函数&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> time = <span class="title class_">Date</span>.<span class="title function_">now</span>()</span><br><span class="line">  <span class="comment">// 为 req 对象，挂载自定义属性，从而把时间共享给后面的所有路由。多个中间件之间，共享 req 和 res 对象</span></span><br><span class="line">  req.<span class="property">startTime</span> = time</span><br><span class="line">  <span class="title function_">next</span>()</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// *************************</span></span><br></pre></td></tr></table></figure><p>定义局部生效的中间件：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>()</span><br><span class="line"><span class="comment">// 1. 定义中间件函数</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">mw1</span> = (<span class="params">req, res, next</span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;调用了局部生效的中间件&#x27;</span>)</span><br><span class="line">  <span class="title function_">next</span>()</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 2. 创建路由，引入mw1中间件</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/&#x27;</span>, mw1, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">send</span>(<span class="string">&#x27;Home page.&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 同时使用多个局部中间件</span></span><br><span class="line"><span class="comment">// app.get(&#x27;/&#x27;, [mw1, mw2], (req, res) =&gt; &#123;res.send(&#x27;Home page.&#x27;)&#125;)</span></span><br><span class="line"><span class="comment">// 等价于 app.get(&#x27;/&#x27;, mw1, mw2, (req, res) =&gt; &#123;res.send(&#x27;Home page.&#x27;)&#125;)</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/user&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">send</span>(<span class="string">&#x27;User page.&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">80</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Express server running at http://127.0.0.1&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>为了方便大家理解和记忆中间件的使用，Express 官方把常见的中间件用法，分成了 5 大类，分别是：<br>① 应用级别的中间件<br>② 路由级别的中间件<br>③ 错误级别的中间件<br>④ Express 内置的中间件<br>⑤ 第三方的中间件</p><ol><li>应用级别的中间件</li></ol><p>通过 app.use() 或 app.get() 或 app.post() ，绑定到 app 实例上的中间件，叫做应用级别的中间件，代码已经给出：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 全局</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">next</span>()</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 局部</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/&#x27;</span>, mw1, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">send</span>(<span class="string">&#x27;Home page.&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ol><li>路由级别的中间件</li></ol><p>绑定到 express.Router() 实例上的中间件，叫做路由级别的中间件。它的用法和应用级别中间件没有任何区别。只不过，<strong>应用级别中间件是绑定到 app 实例上，路由级别中间件绑定到 router 实例上</strong>，代码示例如下：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">exoress</span>()</span><br><span class="line"><span class="keyword">const</span> router = express.<span class="title class_">Router</span>()</span><br><span class="line"><span class="comment">// 路由级别中间件,此处先不必深究</span></span><br><span class="line">router.<span class="title function_">use</span>(<span class="keyword">function</span>(<span class="params">req,res,next</span>)&#123;</span><br><span class="line"><span class="title function_">next</span>()</span><br><span class="line">&#125;)</span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;/&#x27;</span>,router)</span><br></pre></td></tr></table></figure><ol><li>错误级别的中间件</li></ol><p>错误级别中间件的作用：专门用来捕获整个项目中发生的异常错误，从而防止项目异常崩溃的问题。<br>格式：错误级别中间件的 function 处理函数中，必须有 4 个形参，形参顺序从前到后，分别是 (err, req, res, next)。</p><p>==注意==：错误级别的中间件，必须注册在所有路由之后！</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>()</span><br><span class="line"><span class="comment">// 1. 定义路由</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 1.1 人为的制造错误</span></span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;服务器内部发生了错误！&#x27;</span>)</span><br><span class="line">  res.<span class="title function_">send</span>(<span class="string">&#x27;Home page.&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 定义错误级别的中间件，捕获整个项目的异常错误，从而防止程序的崩溃</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">err, req, res, next</span>) =&gt;</span> &#123; <span class="comment">// 必须带4个参数，代码块中没有next()</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;发生了错误！&#x27;</span> + err.<span class="property">message</span>)</span><br><span class="line">  <span class="comment">// 发送异常给客户端</span></span><br><span class="line">  res.<span class="title function_">send</span>(<span class="string">&#x27;Error：&#x27;</span> + err.<span class="property">message</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">80</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Express server running at http://127.0.0.1&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ol><li>Express内置的中间件</li></ol><p>自 Express 4.16.0 版本开始，Express 内置了 3 个常用的中间件，极大的提高了 Express 项目的开发效率和体验：<br>① express.static 快速托管静态资源的内置中间件，例如： HTML 文件、图片、CSS 样式等（无兼容性）<br>② express.json 解析 JSON 格式的请求体数据（有兼容性，仅在 4.16.0+ 版本中可用）<br>③ express.urlencoded 解析 URL-encoded 格式的请求体数据（有兼容性，仅在 </p><p><img src="https://img1.imgtp.com/2022/08/30/jLQY3nCY.png" alt="image-20220829221153096"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 注意：除了错误级别的中间件，其他的中间件，必须在路由之前进行配置</span></span><br><span class="line"><span class="comment">// 解析表单中的 JSON 格式的数据</span></span><br><span class="line">app.<span class="title function_">use</span>(express.<span class="title function_">json</span>())</span><br><span class="line"><span class="comment">// 解析表单中的 url-encoded 格式的数据</span></span><br><span class="line">app.<span class="title function_">use</span>(express.<span class="title function_">urlencoded</span>(&#123; <span class="attr">extended</span>: <span class="literal">false</span> &#125;))</span><br><span class="line">app.<span class="title function_">post</span>(<span class="string">&#x27;/user&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 在服务器端，可以通过 req,body 来获取来接收客户端发送过来的请求体数据，包括 JSON 格式的表单数据和 url-encoded 格式的数据</span></span><br><span class="line">  <span class="comment">// 默认情况下，如果不配置解析表单数据的中间件，则 req.body 默认等于 undefined</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(req.<span class="property">body</span>)</span><br><span class="line">  res.<span class="title function_">send</span>(<span class="string">&#x27;ok&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ol><li>第三方的中间件</li></ol><p>。。。比如，老版本的 body-parser。功能同 express.urlencoded。后者就是基于前者封装的。</p><ol><li>自定义中间件</li></ol><p>例如：模拟 express.urlencoded 对请求体进行解析。实现步骤：<br>① 定义中间件 app.use((req, res, next) =&gt; {…})<br>② 监听 req 的 data 事件<br>③ 监听 req 的 end 事件<br>④ 使用 querystring 模块解析请求体数据<br>⑤ 将解析出来的数据对象挂载为 req.body<br>⑥ 将自定义中间件封装为模块</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>()</span><br><span class="line"><span class="comment">// 导入 Node.js 内置的 querystring 模块</span></span><br><span class="line"><span class="keyword">const</span> qs = <span class="built_in">require</span>(<span class="string">&#x27;querystring&#x27;</span>)</span><br><span class="line"><span class="comment">// 1. 解析表单数据的中间件</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// str 字符串存储请求体数据</span></span><br><span class="line">  <span class="keyword">let</span> str = <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="comment">// 2. 监听 req 的 data 事件</span></span><br><span class="line">  req.<span class="title function_">on</span>(<span class="string">&#x27;data&#x27;</span>, <span class="function">(<span class="params">chunk</span>) =&gt;</span> &#123;</span><br><span class="line">    str += chunk</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="comment">// 3. 监听 req 的 end 事件</span></span><br><span class="line">  req.<span class="title function_">on</span>(<span class="string">&#x27;end&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 4. 把字符串格式的请求体数据解析成对象格式</span></span><br><span class="line">    <span class="keyword">const</span> body = qs.<span class="title function_">parse</span>(str)</span><br><span class="line">    <span class="comment">// 5. 对象挂载到自定义属性body上</span></span><br><span class="line">    req.<span class="property">body</span> = body</span><br><span class="line">    <span class="comment">// 交由路由处理</span></span><br><span class="line">    <span class="title function_">next</span>()</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">post</span>(<span class="string">&#x27;/user&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">send</span>(req.<span class="property">body</span>)</span><br><span class="line">&#125;)</span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">80</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Express server running at http://127.0.0.1&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>==注==：关键字 const 定义常量。let 定义变量。</p><p>⑥ 将自定义中间件封装为模块</p><p>第一步：新建js文件，内容：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 导入 Node.js 内置的 querystring 模块</span></span><br><span class="line"><span class="keyword">const</span> qs = <span class="built_in">require</span>(<span class="string">&#x27;querystring&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">bodyParser</span> = (<span class="params">req, res, next</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">let</span> str = <span class="string">&#x27;&#x27;</span></span><br><span class="line">  req.<span class="title function_">on</span>(<span class="string">&#x27;data&#x27;</span>, <span class="function">(<span class="params">chunk</span>) =&gt;</span> &#123;str += chunk&#125;)</span><br><span class="line">  req.<span class="title function_">on</span>(<span class="string">&#x27;end&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> body = qs.<span class="title function_">parse</span>(str)</span><br><span class="line">    req.<span class="property">body</span> = body</span><br><span class="line">    <span class="title function_">next</span>()</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = bodyParser</span><br></pre></td></tr></table></figure><p>第二步：使用</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. 导入自己封装的中间件模块</span></span><br><span class="line"><span class="keyword">const</span> customBodyParser = <span class="built_in">require</span>(<span class="string">&#x27;./my-body-parser&#x27;</span>)</span><br><span class="line"><span class="comment">// 2. 将自定义的中间件函数，注册为全局可用的中间件</span></span><br><span class="line">app.<span class="title function_">use</span>(customBodyParser)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">post</span>(<span class="string">&#x27;/user&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">send</span>(req.<span class="property">body</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用 app.listen 方法，指定端口号并启动web服务器</span></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">80</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Express server running at http://127.0.0.1&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><hr><h2 id="Express-写接口"><a href="#Express-写接口" class="headerlink" title="Express 写接口"></a>Express 写接口</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 解析表单数据的中间件</span></span><br><span class="line">app.<span class="title function_">use</span>(express.<span class="title function_">urlencoded</span>(&#123; <span class="attr">extended</span>: <span class="literal">false</span> &#125;))</span><br><span class="line"></span><br><span class="line"><span class="comment">// 必须在配置 cors 中间件之前，配置 JSONP 的接口</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/api/jsonp&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 1. 得到函数的名称</span></span><br><span class="line">  <span class="keyword">const</span> funcName = req.<span class="property">query</span>.<span class="property">callback</span></span><br><span class="line">  <span class="comment">// 2. 定义要发送到客户端的数据对象</span></span><br><span class="line">  <span class="keyword">const</span> data = &#123; <span class="attr">name</span>: <span class="string">&#x27;zs&#x27;</span>, <span class="attr">age</span>: <span class="number">22</span> &#125;</span><br><span class="line">  <span class="comment">// 3. 拼接出一个函数的调用</span></span><br><span class="line">  <span class="keyword">const</span> scriptStr = <span class="string">`<span class="subst">$&#123;funcName&#125;</span>(<span class="subst">$&#123;<span class="built_in">JSON</span>.stringify(data)&#125;</span>)`</span></span><br><span class="line">  <span class="comment">// 4. 把拼接的字符串，响应给客户端</span></span><br><span class="line">  res.<span class="title function_">send</span>(scriptStr)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 一定要路由之前配置 cors 中间件，从而解决***接口跨域***</span></span><br><span class="line"><span class="keyword">const</span> cors = <span class="built_in">require</span>(<span class="string">&#x27;cors&#x27;</span>)</span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">cors</span>())</span><br><span class="line"></span><br><span class="line"><span class="comment">// 导入路由模块</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="built_in">require</span>(<span class="string">&#x27;./my-apiRouter&#x27;</span>)</span><br><span class="line"><span class="comment">// 把路由模块注册到 app 上</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;/api&#x27;</span>, router)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 启动服务器</span></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">80</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;express server running at http://127.0.0.1&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>路由模块 my-apiRouter.js：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> router = express.<span class="title class_">Router</span>()</span><br><span class="line"><span class="comment">// 挂载路由</span></span><br><span class="line">router.<span class="title function_">get</span>(<span class="string">&#x27;/get&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> query = req.<span class="property">query</span></span><br><span class="line">  res.<span class="title function_">send</span>(&#123;</span><br><span class="line">    <span class="attr">status</span>: <span class="number">0</span>, <span class="comment">// 0 表示处理成功，1 表示处理失败</span></span><br><span class="line">    <span class="attr">msg</span>: <span class="string">&#x27;GET 请求成功！&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: query, <span class="comment">// 需要响应给客户端的数据</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line">router.<span class="title function_">post</span>(<span class="string">&#x27;/post&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> body = req.<span class="property">body</span></span><br><span class="line">  res.<span class="title function_">send</span>(&#123;</span><br><span class="line">    <span class="attr">status</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">msg</span>: <span class="string">&#x27;POST 请求成功！&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: body,</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 定义 DELETE 接口</span></span><br><span class="line">router.<span class="title function_">delete</span>(<span class="string">&#x27;/delete&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">send</span>(&#123;</span><br><span class="line">    <span class="attr">status</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">msg</span>: <span class="string">&#x27;DELETE请求成功&#x27;</span>,</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = router</span><br></pre></td></tr></table></figure><p><strong>使用 cors 中间件解决跨域问题</strong><br>cors 是 Express 的一个第三方中间件。通过安装和配置 cors 中间件，可以很方便地解决跨域问题。<br>使用步骤分为如下 3 步：<br>① 运行 npm install cors 安装中间件<br>② 使用 const cors = require(‘cors’) 导入中间件<br>③ 在路由之前调用 app.use(cors()) 配置中间件</p><p>CORS （Cross-Origin Resource Sharing，跨域资源共享）由一系列 HTTP 响应头组成，这些 HTTP 响应头决定浏览器是否阻止前端 JS 代码跨域获取资源。<br>浏览器的同源安全策略默认会阻止网页“跨域”获取资源。但如果接口服务器配置了 CORS 相关的 HTTP 响应头就可以解除浏览器端的跨域访问限制。</p><p><img src="https://img1.imgtp.com/2022/08/30/pG0rU3f4.png" alt="image-20220830000028687"></p><p>CORS 主要在服务器端进行配置。客户端浏览器无须做任何额外的配置，即可请求开启了 CORS 的接口。CORS 在浏览器中有兼容性。只有支持 XMLHttpRequest Level2 的浏览器，才能正常访问开启了 CORS 的服务端接口.</p><hr><ol><li>CORS 响应头部 - <strong>Access-Control-Allow-Origin</strong></li></ol><p>响应头部中可以携带一个 Access-Control-Allow-Origin 字段，其语法如下:</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Access-Control-Allow-Origin: &lt;origin&gt; | *</span><br></pre></td></tr></table></figure><p>origin 参数的值指定了允许访问该资源的外域 URL。例如，下面的字段值将只允许来自 <a href="https://roydon.xyz">https://roydon.xyz</a> 的请求：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">res.<span class="title function_">setHeader</span>(<span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>,<span class="string">&#x27;https://roydon.xyz&#x27;</span>)</span><br></pre></td></tr></table></figure><p>如果指定了 Access-Control-Allow-Origin 字段的值为通配符 *，表示允许来自任何域的请求，示例代码如下：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">res.<span class="title function_">setHeader</span>(<span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>,<span class="string">&#x27;*&#x27;</span>)</span><br></pre></td></tr></table></figure><ol><li>CORS 响应头部 - <strong>Access-Control-Allow-Headers</strong></li></ol><p>默认情况下，CORS 仅支持客户端向服务器发送如下的 9 个请求头：</p><div class="table-container"><table><thead><tr><th>Accept、Accept-Language、Content-Language、DPR、Downlink、Save-Data、Viewport-Width、Width 、Content-Type（值仅限于 text/plain、multipart/form-data、application/x-www-form-urlencoded 三者之一）</th></tr></thead><tbody><tr><td></td></tr></tbody></table></div><p>如果客户端向服务器发送了额外的请求头信息，则需要在服务器端，通过 Access-Control-Allow-Headers 对额外的请求头进行声明，否则这次请求会失败！</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">res.<span class="title function_">serHeader</span>(<span class="string">&#x27;Access-Control-Allow-Headers&#x27;</span>,<span class="string">&#x27;Content-Type,X-Custom-Header&#x27;</span>)</span><br></pre></td></tr></table></figure><ol><li>CORS 响应头部 - <strong>Access-Control-Allow-Methods</strong></li></ol><p>默认情况下，CORS 仅支持客户端发起 GET、POST、HEAD 请求。如果客户端希望通过 PUT、DELETE 等方式请求服务器的资源，则需要在服务器端，通过 Access-Control-Alow-Methods来指明实际请求所允许使用的 HTTP 方法。<br>示例代码如下：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">res.<span class="title function_">serHeader</span>(<span class="string">&#x27;Access-Control-Allow-Methods&#x27;</span>,<span class="string">&#x27;GET,POST,DELETE,HEAD&#x27;</span>)</span><br><span class="line"><span class="comment">// 允许所有请求</span></span><br><span class="line">res.<span class="title function_">serHeader</span>(<span class="string">&#x27;Access-Control-Allow-Methods&#x27;</span>,<span class="string">&#x27;*&#x27;</span>)</span><br></pre></td></tr></table></figure><hr><p>CORS请求的分类<br>客户端在请求 CORS 接口时，根据请求方式和请求头的不同，可以将 CORS 的请求分为两大类，分别是：</p><ul><li>① 简单请求</li></ul><p>同时满足以下两大条件的请求，就属于简单请求：<br>① 请求方式：GET、POST、HEAD 三者之一<br>② HTTP 头部信息不超过以下几种字段：无自定义头部字段、Accept、Accept-Language、Content-Language、DPR、<br>Downlink、Save-Data、Viewport-Width、Width 、Content-Type（只有三个值application/x-www-form-<br>urlencoded、multipart/form-data、text/plain）</p><ul><li>② 预检请求</li></ul><p>只要符合以下任何一个条件的请求，都需要进行预检请求：<br>① 请求方式为 GET、POST、HEAD 之外的请求 Method 类型<br>② 请求头中包含自定义头部字段<br>③ 向服务器发送了 application/json 格式的数据<br>在浏览器与服务器正式通信之前，浏览器会先发送 OPTION 请求进行预检，以获知服务器是否允许该实际请求，所以这一<br>次的 OPTION 请求称为“预检请求”。服务器成功响应预检请求后，才会发送真正的请求，并且携带真实数据。</p><hr><h1 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h1><h2 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h2><p>组织、存储和管理数据的仓库。</p><p>除了文本类型的数据，图像、音乐、声音都是数据。</p><p>基本操作：增删查改。</p><p>推荐：    Mysql（关系型数据库</p><p>需要前提知识数据库（由于我做的是后端，了解数据库），此处不多赘述，直接进行node整合mysql。增删查改等Sql语句自行百度。</p><p>🥰🥰</p><h2 id="node整合mysql"><a href="#node整合mysql" class="headerlink" title="node整合mysql"></a>node整合mysql</h2><p>步骤：</p><p>① 安装操作 MySQL 数据库的第三方模块（mysql）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i mysql</span><br></pre></td></tr></table></figure><p>② 通过 mysql 模块连接到 MySQL 数据库</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 导入 mysql 模块</span></span><br><span class="line"><span class="keyword">const</span> mysql = <span class="built_in">require</span>(<span class="string">&#x27;mysql&#x27;</span>)</span><br><span class="line"><span class="comment">// 2. 建立与 MySQL 数据库的连接关系</span></span><br><span class="line"><span class="keyword">const</span> db = mysql.<span class="title function_">createPool</span>(&#123;</span><br><span class="line">  <span class="attr">host</span>: <span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="comment">// 数据库的 IP 地址</span></span><br><span class="line">  <span class="attr">user</span>: <span class="string">&#x27;root&#x27;</span>, <span class="comment">// 登录数据库的账号</span></span><br><span class="line">  <span class="attr">password</span>: <span class="string">&#x27;qwer1234&#x27;</span>, <span class="comment">// 登录数据库的密码</span></span><br><span class="line">  <span class="attr">database</span>: <span class="string">&#x27;db_1&#x27;</span>, <span class="comment">// 指定要操作哪个数据库</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>③ 通过 mysql 模块执行 SQL 语句<br>下面依次举例（查找、增加、修改、删除）四项：数据表为 users</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.查找</span></span><br><span class="line"><span class="keyword">const</span> sqlStr = <span class="string">&#x27;select * from users&#x27;</span></span><br><span class="line">db.<span class="title function_">query</span>(sqlStr, <span class="function">(<span class="params">err, results</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 查询数据失败</span></span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(err.<span class="property">message</span>)</span><br><span class="line">  <span class="comment">// 查询数据成功</span></span><br><span class="line">  <span class="comment">// 注意：如果执行的是 select 查询语句，则执行的结果是数组</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(results)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 2.增加</span></span><br><span class="line"><span class="comment">// 写法一：******************</span></span><br><span class="line"><span class="keyword">const</span> user = &#123; <span class="attr">username</span>: <span class="string">&#x27;guo&#x27;</span>, <span class="attr">password</span>: <span class="string">&#x27;123&#x27;</span> &#125;</span><br><span class="line"><span class="comment">// 定义待执行的 SQL 语句</span></span><br><span class="line"><span class="keyword">const</span> sqlStr = <span class="string">&#x27;insert into users (username, password) values (?, ?)&#x27;</span></span><br><span class="line"><span class="comment">// 执行 SQL 语句</span></span><br><span class="line">db.<span class="title function_">query</span>(sqlStr, [user.<span class="property">username</span>, user.<span class="property">password</span>], <span class="function">(<span class="params">err, results</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 执行 SQL 语句失败了</span></span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(err.<span class="property">message</span>)</span><br><span class="line">  <span class="comment">// 成功了</span></span><br><span class="line">  <span class="comment">// 注意：如果执行的是 insert into 插入语句，则 results 是一个对象</span></span><br><span class="line">  <span class="comment">// 可以通过 affectedRows 属性，来判断是否插入数据成功</span></span><br><span class="line">  <span class="keyword">if</span> (results.<span class="property">affectedRows</span> === <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;插入数据成功!&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 写法二：推荐**********************</span></span><br><span class="line"><span class="keyword">const</span> user = &#123; <span class="attr">username</span>: <span class="string">&#x27;roydon&#x27;</span>, <span class="attr">password</span>: <span class="string">&#x27;123456&#x27;</span> &#125;</span><br><span class="line"><span class="comment">// 插入的 SQL 语句，? 为占位符</span></span><br><span class="line"><span class="keyword">const</span> sqlStr = <span class="string">&#x27;insert into users set ?&#x27;</span></span><br><span class="line"><span class="comment">// 执行 SQL 语句</span></span><br><span class="line">db.<span class="title function_">query</span>(sqlStr, user, <span class="function">(<span class="params">err, results</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(err.<span class="property">message</span>)</span><br><span class="line">  <span class="keyword">if</span> (results.<span class="property">affectedRows</span> === <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;插入数据成功&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 3.修改(更新)</span></span><br><span class="line"><span class="comment">// 写法一：********************</span></span><br><span class="line"><span class="keyword">const</span> user = &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">username</span>: <span class="string">&#x27;aaa&#x27;</span>, <span class="attr">password</span>: <span class="string">&#x27;000&#x27;</span> &#125;</span><br><span class="line"><span class="comment">// 定义 SQL 语句</span></span><br><span class="line"><span class="keyword">const</span> sqlStr = <span class="string">&#x27;update users set username=?, password=? where id=?&#x27;</span></span><br><span class="line"><span class="comment">// 执行 SQL 语句</span></span><br><span class="line">db.<span class="title function_">query</span>(sqlStr, [user.<span class="property">username</span>, user.<span class="property">password</span>, user.<span class="property">id</span>], <span class="function">(<span class="params">err, results</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(err.<span class="property">message</span>)</span><br><span class="line">  <span class="comment">// 注意：执行了 update 语句之后，执行的结果，也是一个对象，可以通过 affectedRows 判断是否更新成功</span></span><br><span class="line">  <span class="keyword">if</span> (results.<span class="property">affectedRows</span> === <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;更新成功&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 写法二：(推荐)****************</span></span><br><span class="line"><span class="keyword">const</span> user = &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">username</span>: <span class="string">&#x27;bbb&#x27;</span>, <span class="attr">password</span>: <span class="string">&#x27;111&#x27;</span> &#125;</span><br><span class="line"><span class="comment">// 定义 SQL 语句</span></span><br><span class="line"><span class="keyword">const</span> sqlStr = <span class="string">&#x27;update users set ? where id=?&#x27;</span></span><br><span class="line"><span class="comment">// 执行 SQL 语句</span></span><br><span class="line">db.<span class="title function_">query</span>(sqlStr, [user, user.<span class="property">id</span>], <span class="function">(<span class="params">err, results</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(err.<span class="property">message</span>)</span><br><span class="line">  <span class="keyword">if</span> (results.<span class="property">affectedRows</span> === <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;更新数据成功&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 4.删除</span></span><br><span class="line"><span class="keyword">const</span> sqlStr = <span class="string">&#x27;delete from users where id=?&#x27;</span></span><br><span class="line">db.<span class="title function_">query</span>(sqlStr, <span class="number">2</span>, <span class="function">(<span class="params">err, results</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(err.<span class="property">message</span>)</span><br><span class="line">  <span class="comment">// 注意：执行 delete 语句之后，结果也是一个对象，也会包含 affectedRows 属性</span></span><br><span class="line">  <span class="keyword">if</span> (results.<span class="property">affectedRows</span> === <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;删除数据成功&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><hr><h1 id="前后端的身份认证"><a href="#前后端的身份认证" class="headerlink" title="前后端的身份认证"></a>前后端的身份认证</h1><p>目前主流的 Web 开发模式有两种，分别是：</p><ol><li>服务端渲染的传统 Web 开发模式</li></ol><p>服务端渲染的概念：服务器发送给客户端的 HTML 页面，是在服务器通过字符串的拼接，动态生成的。因此，客户端不<br>需要使用 Ajax 这样的技术额外请求页面的数据。</p><blockquote><p>服务端渲染的优缺点<br>优点：<br>① 前端耗时少。因为服务器端负责动态生成 HTML 内容，浏览器只需要直接渲染页面即可。尤其是移动端，更省电。<br>② 有利于SEO。因为服务器端响应的是完整的 HTML 页面内容，所以爬虫更容易爬取获得信息，更有利于 SEO。<br>缺点：<br>① 占用服务器端资源。即服务器端完成 HTML 页面内容的拼接，如果请求较多，会对服务器造成一定的访问压力。<br>② 不利于前后端分离，开发效率低。使用服务器端渲染，则无法进行分工合作，尤其对于前端复杂度高的项目，不利于<br>项目高效开发。</p></blockquote><ol><li>前后端分离的新型 Web 开发模式</li></ol><p>前后端分离的概念：前后端分离的开发模式，依赖于 Ajax 技术的广泛应用。简而言之，前后端分离的 Web 开发模式，<br>就是后端只负责提供 API 接口，前端使用 Ajax 调用接口把数据渲染到页面上的开发模式。</p><blockquote><p>前后端分离的优缺点<br>优点：<br>① 开发体验好。前端专注于 UI 页面的开发，后端专注于api 的开发，且前端有更多的选择性。<br>② 用户体验好。Ajax 技术的广泛应用，极大的提高了用户的体验，可以轻松实现页面的局部刷新。<br>③ 减轻了服务器端的渲染压力。因为页面最终是在每个用户的浏览器中生成的。<br>缺点：<br>① 不利于 SEO。因为完整的 HTML 页面需要在客户端动态拼接完成，所以爬虫对无法爬取页面的有效信息。（解决方<br>案：利用 Vue、React 等前端框架的 SSR （server side render）技术能够很好的解决 SEO 问题！）</p></blockquote><h2 id="身份认证："><a href="#身份认证：" class="headerlink" title="身份认证："></a>身份认证：</h2><p>身份认证（Authentication）又称“身份验证”、“鉴权”，是指通过一定的手段，完成对用户身份的确认。<br>确保是此用户登录。</p><p>对于服务端渲染和前后端分离这两种开发模式来说，分别有着不同的身份认证方案：<br><strong>服务端渲染推荐使用 Session 认证机制</strong>.</p><p>客户端第一次请求服务器的时候，服务器通过响应头的形式，向客户端发送一个身份认证的 Cookie，客户端会自动将 Cookie 保存在浏览器中。随后，当客户端浏览器每次请求服务器的时候，浏览器会自动将身份认证相关的 Cookie，通过请求头的形式发送给服务器，服务器即可验明客户端的身份。</p><p>Cookie 是存储在用户浏览器中的一段不超过 4 KB 的字符串。它由一个名称（Name）、一个值（Value）和其它几个用于控制 Cookie 有效期、安全性、使用范围的可选属性组成。不同域名下的 Cookie 各自独立，每当客户端发起请求时，会自动把当前域名下所有未过期的 Cookie 一同发送到服务器。<br>由于 Cookie 是存储在浏览器中的，而且浏览器也提供了读写 Cookie 的 API，因此 Cookie 很容易被伪造，不具有安全性。因此不建议服务器将重要的隐私数据，通过 Cookie 的形式发送给浏览器。</p><p>Session 的工作原理：</p><p><img src="https://img1.imgtp.com/2022/08/30/kUmHTFh8.png" alt=""></p><h2 id="Express-使用-Session-认证"><a href="#Express-使用-Session-认证" class="headerlink" title="Express 使用 Session 认证"></a>Express 使用 Session 认证</h2><ol><li>安装 express-session 插件</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i express-session</span><br></pre></td></tr></table></figure><ol><li><p>配置 express-session 中间件</p><p>通过 app.use() 来注册 session 中间件:</p></li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> session = <span class="built_in">require</span>(<span class="string">&#x27;express-session&#x27;</span>)</span><br><span class="line">app.<span class="title function_">use</span>(</span><br><span class="line">  <span class="title function_">session</span>(&#123;</span><br><span class="line">    <span class="attr">secret</span>: <span class="string">&#x27;roydon&#x27;</span>,<span class="comment">// 自定义字符穿</span></span><br><span class="line">    <span class="attr">resave</span>: <span class="literal">false</span>,<span class="comment">// 固定写法</span></span><br><span class="line">    <span class="attr">saveUninitialized</span>: <span class="literal">true</span>, <span class="comment">// 固定写法</span></span><br><span class="line">  &#125;)</span><br><span class="line">)</span><br></pre></td></tr></table></figure><ol><li>向 session 中存数据</li></ol><p>通过 req.session 来访问和使用 session 对象，从而存储用户的关键信息：</p><p>例如下面的登录接口：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">post</span>(<span class="string">&#x27;/api/login&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 判断用户提交的登录信息是否正确</span></span><br><span class="line">  <span class="keyword">if</span> (req.<span class="property">body</span>.<span class="property">username</span> !== <span class="string">&#x27;admin&#x27;</span> || req.<span class="property">body</span>.<span class="property">password</span> !== <span class="string">&#x27;000000&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> res.<span class="title function_">send</span>(&#123; <span class="attr">status</span>: <span class="number">1</span>, <span class="attr">msg</span>: <span class="string">&#x27;登录失败&#x27;</span> &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 将登录成功后的用户信息，保存到 Session 中</span></span><br><span class="line">  req.<span class="property">session</span>.<span class="property">user</span> = req.<span class="property">body</span> <span class="comment">// 用户的信息</span></span><br><span class="line">  req.<span class="property">session</span>.<span class="property">islogin</span> = <span class="literal">true</span> <span class="comment">// 用户的登录状态</span></span><br><span class="line"></span><br><span class="line">  res.<span class="title function_">send</span>(&#123; <span class="attr">status</span>: <span class="number">0</span>, <span class="attr">msg</span>: <span class="string">&#x27;登录成功&#x27;</span> &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ol><li>从 session 中取数据</li></ol><p>可以直接从 req.session 对象上获取之前存储的数据，示例代码如下：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/api/username&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 从 Session 中获取用户的名称，响应给客户端</span></span><br><span class="line">  <span class="keyword">if</span> (!req.<span class="property">session</span>.<span class="property">islogin</span>) &#123;</span><br><span class="line">    <span class="comment">// session 验证失败</span></span><br><span class="line">    <span class="keyword">return</span> res.<span class="title function_">send</span>(&#123; <span class="attr">status</span>: <span class="number">1</span>, <span class="attr">msg</span>: <span class="string">&#x27;fail&#x27;</span> &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  res.<span class="title function_">send</span>(&#123;</span><br><span class="line">    <span class="attr">status</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">msg</span>: <span class="string">&#x27;success&#x27;</span>,</span><br><span class="line">    <span class="attr">username</span>: req.<span class="property">session</span>.<span class="property">user</span>.<span class="property">username</span>,</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ol><li>清空 Session 信息：req.session.destroy()</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">post</span>(<span class="string">&#x27;/api/logout&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 清空 Session 信息</span></span><br><span class="line">  req.<span class="property">session</span>.<span class="title function_">destroy</span>()</span><br><span class="line">  res.<span class="title function_">send</span>(&#123;</span><br><span class="line">    <span class="attr">status</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">msg</span>: <span class="string">&#x27;退出登录成功&#x27;</span>,</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><blockquote><p>局限性：</p><p>Session 认证机制需要配合 Cookie 才能实现。由于 Cookie 默认不支持跨域访问，所以，当涉及到前端跨域请求后端接<br>口的时候，需要做很多额外的配置，才能实现跨域 Session 认证。<br>注意：<br>⚫ 当前端请求后端接口不存在跨域问题的时候，推荐使用 Session 身份认证机制。<br>⚫ 当前端需要跨域请求后端接口的时候，不推荐使用 Session 身份认证机制，推荐使用 JWT 认证机制。</p></blockquote><hr><h2 id="Express-使用-JWT"><a href="#Express-使用-JWT" class="headerlink" title="Express 使用 JWT"></a>Express 使用 JWT</h2><p>JWT（英文全称：JSON Web Token）是目前最流行的跨域认证解决方案</p><p>前后端分离推荐使用 JWT 认证机制</p><p>JWT 的工作原理：用户信息通过 Token 字符串的形式，保存在客户端浏览器中。服务器通过还原 Token 字符串的形式来认证用户的身份。</p><p><img src="https://img1.imgtp.com/2022/08/30/f6Q43c6D.png" alt=""></p><p>JWT 通常由三部分组成，分别是 Header（头部）、Payload（有效荷载）、Signature（签名）。<br>三者之间使用英文的“.”分隔，格式如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Header.Payload.Signature</span><br></pre></td></tr></table></figure><blockquote><p>Payload 部分是真正的用户信息，它是用户信息经过加密之后生成的字符串。<br>Header 和 Signature 是安全性相关的部分，只是为了保证 Token 的安全性。</p></blockquote><p>客户端收到服务器返回的 JWT 之后，通常会将它储存在 localStorage 或 sessionStorage 中。<br>此后，客户端每次与服务器通信，都要带上这个 JWT 的字符串，从而进行身份认证。推荐的做法是把 JWT 放在 HTTP <strong>请求头的 Authorization 字段</strong>中，格式如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Authorization: Bearer &lt;token&gt;</span><br></pre></td></tr></table></figure><p>Express 中使用 JWT：</p><ol><li><p>安装包，导入包</p><p>jsonwebtoken 用于生成 JWT 字符串。express-jwt 用于将 JWT 字符串解析还原成 JSON 对象</p></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i jsonwebtoken express-jwt</span><br></pre></td></tr></table></figure><ol><li>如下：（插件老版本写法如下）</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1.安装并导入 JWT 相关的两个包，分别是 jsonwebtoken 和 express-jwt</span></span><br><span class="line"><span class="keyword">const</span> jwt = <span class="built_in">require</span>(<span class="string">&#x27;jsonwebtoken&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> expressJWT = <span class="built_in">require</span>(<span class="string">&#x27;express-jwt&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 允许跨域资源共享</span></span><br><span class="line"><span class="keyword">const</span> cors = <span class="built_in">require</span>(<span class="string">&#x27;cors&#x27;</span>)</span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">cors</span>())</span><br><span class="line"></span><br><span class="line"><span class="comment">// 解析 post 表单数据的中间件</span></span><br><span class="line"><span class="keyword">const</span> bodyParser = <span class="built_in">require</span>(<span class="string">&#x27;body-parser&#x27;</span>)</span><br><span class="line">app.<span class="title function_">use</span>(bodyParser.<span class="title function_">urlencoded</span>(&#123; <span class="attr">extended</span>: <span class="literal">false</span> &#125;))</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.定义 secret 密钥，建议将密钥命名为 secretKey ，值自定义</span></span><br><span class="line"><span class="keyword">const</span> secretKey = <span class="string">&#x27;i am roydon&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 4.注册将 JWT 字符串解析还原成 JSON 对象的中间件</span></span><br><span class="line"><span class="comment">// 注意：只要配置成功了 express-jwt 这个中间件，就可以把解析出来的用户信息，挂载到 req.user 属性上</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">expressJWT</span>(&#123; <span class="attr">secret</span>: secretKey &#125;).<span class="title function_">unless</span>(&#123; <span class="attr">path</span>: [<span class="regexp">/^\/api\//</span>] &#125;))</span><br><span class="line"></span><br><span class="line"><span class="comment">// 登录接口</span></span><br><span class="line">app.<span class="title function_">post</span>(<span class="string">&#x27;/api/login&#x27;</span>, <span class="keyword">function</span> (<span class="params">req, res</span>) &#123;</span><br><span class="line">  <span class="comment">// 将 req.body 请求体中的数据，转存为 userinfo 常量</span></span><br><span class="line">  <span class="keyword">const</span> userinfo = req.<span class="property">body</span></span><br><span class="line">  <span class="comment">// 登录失败</span></span><br><span class="line">  <span class="keyword">if</span> (userinfo.<span class="property">username</span> !== <span class="string">&#x27;admin&#x27;</span> || userinfo.<span class="property">password</span> !== <span class="string">&#x27;000000&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> res.<span class="title function_">send</span>(&#123;</span><br><span class="line">      <span class="attr">status</span>: <span class="number">400</span>,</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&#x27;登录失败！&#x27;</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 登录成功</span></span><br><span class="line">  <span class="comment">// 3.在登录成功之后，调用 jwt.sign() 方法生成 JWT 字符串。并通过 token 属性发送给客户端</span></span><br><span class="line">  <span class="comment">// 参数1：用户的信息对象</span></span><br><span class="line">  <span class="comment">// 参数2：加密的秘钥</span></span><br><span class="line">  <span class="comment">// 参数3：配置对象，可以配置当前 token 的有效期</span></span><br><span class="line">  <span class="comment">// 记住：千万不要把密码加密到 token 字符中</span></span><br><span class="line">  <span class="keyword">const</span> tokenStr = jwt.<span class="title function_">sign</span>(&#123; <span class="attr">username</span>: userinfo.<span class="property">username</span> &#125;, secretKey, &#123; <span class="attr">expiresIn</span>: <span class="string">&#x27;30s&#x27;</span> &#125;)</span><br><span class="line">  res.<span class="title function_">send</span>(&#123;</span><br><span class="line">    <span class="attr">status</span>: <span class="number">200</span>,</span><br><span class="line">    <span class="attr">message</span>: <span class="string">&#x27;登录成功！&#x27;</span>,</span><br><span class="line">    <span class="attr">token</span>: tokenStr, <span class="comment">// 要发送给客户端的 token 字符串</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 这是一个有权限的 API 接口</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/admin/getinfo&#x27;</span>, <span class="keyword">function</span> (<span class="params">req, res</span>) &#123;</span><br><span class="line">  <span class="comment">// TODO_05：使用 req.user 获取用户信息，并使用 data 属性将用户信息发送给客户端</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(req.<span class="property">user</span>)</span><br><span class="line">  res.<span class="title function_">send</span>(&#123;</span><br><span class="line">    <span class="attr">status</span>: <span class="number">200</span>,</span><br><span class="line">    <span class="attr">message</span>: <span class="string">&#x27;获取用户信息成功！&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: req.<span class="property">user</span>, <span class="comment">// 要发送给客户端的用户信息</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// TODO_06：使用全局错误处理中间件，捕获解析 JWT 失败后产生的错误</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">err, req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 这次错误是由 token 解析失败导致的</span></span><br><span class="line">  <span class="keyword">if</span> (err.<span class="property">name</span> === <span class="string">&#x27;UnauthorizedError&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> res.<span class="title function_">send</span>(&#123;</span><br><span class="line">      <span class="attr">status</span>: <span class="number">401</span>,</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&#x27;无效的token&#x27;</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  res.<span class="title function_">send</span>(&#123;</span><br><span class="line">    <span class="attr">status</span>: <span class="number">500</span>,</span><br><span class="line">    <span class="attr">message</span>: <span class="string">&#x27;未知的错误&#x27;</span>,</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">8888</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Express server running at http://127.0.0.1:8888&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>插件新版本解析出来的信息好像会挂在到 req.auth 下。写法如下：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// TODO_01：安装并导入 JWT 相关的两个包，分别是 jsonwebtoken 和 express-jwt</span></span><br><span class="line"><span class="keyword">const</span> jwt = <span class="built_in">require</span>(<span class="string">&#x27;jsonwebtoken&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> &#123; <span class="attr">expressjwt</span>: expressjwt &#125; = <span class="built_in">require</span>(<span class="string">&#x27;express-jwt&#x27;</span>)</span><br><span class="line"><span class="comment">// 允许跨域资源共享</span></span><br><span class="line"><span class="keyword">const</span> cors = <span class="built_in">require</span>(<span class="string">&#x27;cors&#x27;</span>)</span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">cors</span>())</span><br><span class="line"></span><br><span class="line"><span class="comment">// 解析 post 表单数据的中间件</span></span><br><span class="line"><span class="keyword">const</span> bodyParser = <span class="built_in">require</span>(<span class="string">&#x27;body-parser&#x27;</span>)</span><br><span class="line">app.<span class="title function_">use</span>(bodyParser.<span class="title function_">urlencoded</span>(&#123; <span class="attr">extended</span>: <span class="literal">false</span> &#125;))</span><br><span class="line"></span><br><span class="line"><span class="comment">// TODO_02：定义 secret 密钥，建议将密钥命名为 secretKey</span></span><br><span class="line"><span class="keyword">const</span> secretKey = <span class="string">&#x27;i am roydon&#x27;</span></span><br><span class="line"><span class="comment">// TODO_04：注册将 JWT 字符串解析还原成 JSON 对象的中间件</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">expressjwt</span>(&#123; <span class="attr">secret</span>: secretKey, <span class="attr">algorithms</span>: [<span class="string">&#x27;HS256&#x27;</span>] &#125;).<span class="title function_">unless</span>(&#123; <span class="attr">path</span>: [<span class="regexp">/^\/api\//</span>] &#125;))</span><br><span class="line"><span class="comment">// 登录接口</span></span><br><span class="line">app.<span class="title function_">post</span>(<span class="string">&#x27;/api/login&#x27;</span>, <span class="keyword">function</span> (<span class="params">req, res</span>) &#123;</span><br><span class="line">  <span class="comment">// 将 req.body 请求体中的数据，转存为 userinfo 常量</span></span><br><span class="line">  <span class="keyword">const</span> userinfo = req.<span class="property">body</span></span><br><span class="line">  <span class="comment">// 登录失败</span></span><br><span class="line">  <span class="keyword">if</span> (userinfo.<span class="property">username</span> !== <span class="string">&#x27;roydon&#x27;</span> || userinfo.<span class="property">password</span> !== <span class="string">&#x27;roydon&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> res.<span class="title function_">send</span>(&#123;</span><br><span class="line">      <span class="attr">status</span>: <span class="number">400</span>,</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&#x27;登录失败！&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 登录成功</span></span><br><span class="line">  <span class="comment">// TODO_03：在登录成功之后，调用 jwt.sign() 方法生成 JWT 字符串。并通过 token 属性发送给客户端</span></span><br><span class="line">  <span class="keyword">const</span> tokenStr = jwt.<span class="title function_">sign</span>(&#123; <span class="attr">username</span>: userinfo.<span class="property">username</span> &#125;, secretKey, &#123; <span class="attr">expiresIn</span>: <span class="string">&#x27;60s&#x27;</span> &#125;)</span><br><span class="line">  res.<span class="title function_">send</span>(&#123;</span><br><span class="line">    <span class="attr">status</span>: <span class="number">200</span>,</span><br><span class="line">    <span class="attr">message</span>: <span class="string">&#x27;登录成功！&#x27;</span>,</span><br><span class="line">    <span class="attr">token</span>: tokenStr <span class="comment">// 要发送给客户端的 token 字符串</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 这是一个有权限的 API 接口</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/admin/getinfo&#x27;</span>, <span class="keyword">function</span> (<span class="params">req, res</span>) &#123;</span><br><span class="line">  <span class="comment">// TODO_05：使用 req.user 获取用户信息，并使用 data 属性将用户信息发送给客户端</span></span><br><span class="line">  <span class="comment">// 获取token头信息值+Bearer</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(req.<span class="property">auth</span>)</span><br><span class="line">  res.<span class="title function_">send</span>(&#123;</span><br><span class="line">    <span class="attr">status</span>: <span class="number">200</span>,</span><br><span class="line">    <span class="attr">message</span>: <span class="string">&#x27;获取用户信息成功！&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: req.<span class="property">auth</span> <span class="comment">// 要发送给客户端的用户信息</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// TODO_06：使用全局错误处理中间件，捕获解析 JWT 失败后产生的错误</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">err, req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (err.<span class="property">name</span> === <span class="string">&#x27;UnauthorizedError&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> res.<span class="title function_">send</span>(&#123;</span><br><span class="line">      <span class="attr">status</span>: <span class="number">401</span>,</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&#x27;无效的token&#x27;</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  res.<span class="title function_">send</span>(&#123;</span><br><span class="line">    <span class="attr">status</span>: <span class="number">500</span>,</span><br><span class="line">    <span class="attr">message</span>: <span class="string">&#x27;未知的错误&#x27;</span>,</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 调用 app.listen 方法，指定端口号并启动web服务器</span></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">8888</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Express server running at http://127.0.0.1:8888&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>访问登录端口 <a href="http://127.0.0.1:8888/api/login">http://127.0.0.1:8888/api/login</a> 发现生成了加密 token<br><img src="https://img1.imgtp.com/2022/08/30/Yz4ncrVg.png" alt=""></p><p>客户端每次在访问那些有权限接口的时候，都需要主动通过请求头中的 <strong>Authorization</strong> 字段，将 Token 字符串发送到服务器进行身份认证。</p><div class="table-container"><table><thead><tr><th style="text-align:center">Authorization</th><th style="text-align:left">Bearer+刚才上图生成的 token 字符串(中间空格隔开)</th></tr></thead><tbody><tr><td style="text-align:center"></td></tr></tbody></table></div><p>加上请求头访问 getinfo 端口，得到挂载的 req.auth<br><img src="https://img1.imgtp.com/2022/08/30/evOCZIwX.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jsonp </tag>
            
            <tag> cors </tag>
            
            <tag> Node.js </tag>
            
            <tag> session </tag>
            
            <tag> JWT </tag>
            
            <tag> 服务 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Minecraft——Forge1.16.5模组开发（36.2.20）——(3)第一个实体方块</title>
      <link href="/posts/mc-dev-3.html"/>
      <url>/posts/mc-dev-3.html</url>
      
        <content type="html"><![CDATA[<p>类似于方草块，我们可以自定义我们的实体方块，然后注册到Block组中，听起来很简单，需要继承minecraft提供的Block父类<br>下面演示一个黑曜石实体方块的例子，新建一个包代表新增的方块的例子注册和实例化都在此包下<br><img src="https://img-blog.csdnimg.cn/ac2d5cb9e95c4a979d6b20b8569fb474.png#pic_center" alt="在这里插入图片描述"><br>首先要注册我们的黑曜石方块，那么就需要先增加一个黑曜石实体类，然后再在此包下新建一个注册石块的类，因为黑曜石方块在mc中属于十块block<br><img src="https://img-blog.csdnimg.cn/476de2db391f47a6b712083785931e22.png#pic_center" alt="在这里插入图片描述"><br>然后时注册类，去注册此方块实体类<br><img src="https://img-blog.csdnimg.cn/fbeeb09ebbf94db29f70c06e7a8c9c7c.png#pic_center" alt="在这里插入图片描述"><img src="https://img-blog.csdnimg.cn/49cb0e9649d74994a065eb9f9795826a.png#pic_center" alt="在这里插入图片描述"></p><p>然后注册到mod总线中<br><img src="https://img-blog.csdnimg.cn/5226d2c48a8c47f3be0b28e30b07c132.png#pic_center" alt="在这里插入图片描述"></p><p>启动就能在方块栏最下面找到<img src="https://img-blog.csdnimg.cn/16061cfc328b4b53ba86f484ca5b0566.png#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/e33e99cec89d4a6d933a3f7d127450e0.png#pic_center" alt="在这里插入图片描述"><br>接着就是为方块添加材质贴图都是在resources包下添加</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">resources</span><br><span class="line">├── META-INF</span><br><span class="line">│   └── mods.toml</span><br><span class="line">├── assets</span><br><span class="line">│   └── boson</span><br><span class="line">│       ├── blockstates</span><br><span class="line">│       ├── lang</span><br><span class="line">│       ├── models</span><br><span class="line">│       │   ├── block</span><br><span class="line">│       │   └── item</span><br><span class="line">│       └── textures</span><br><span class="line">│           ├── block</span><br><span class="line">│           └── item</span><br><span class="line">└── pack.mcmeta</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/273551d34f324a1ba1bafacf01bd61bf.png#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/03f4f3d1835a4315aa6a262208269d41.png#pic_center" alt="在这里插入图片描述"><br>其中代码为</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;variants&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;model&quot;</span>: <span class="string">&quot;roydon:block/obsidian_block_model&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/cebf7c7945bf4234a39ab0a91114bb83.png#pic_center" alt="在这里插入图片描述"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;parent&quot;</span>: <span class="string">&quot;block/cube_all&quot;</span>,</span><br><span class="line">  <span class="string">&quot;textures&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;all&quot;</span>: <span class="string">&quot;roydon:block/obsidian_block_texture&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/8b8228e3e9564f4d806c73617fa14f71.png#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/9b853ec89a4d4d8b9294a2d124675954.png#pic_center" alt="在这里插入图片描述"><br>最后实现的样子<img src="https://img-blog.csdnimg.cn/be5327e0ff0e48c6aa9977b852f3ae3d.png#pic_center" alt="在这里插入图片描述"><br>本文是为了自己更方便理解逻辑，详细文档开发步骤可以前往文章首的开发链接<br><a href="https://boson.v2mcdev.com/block/modelandtextures.html">方块材质和素材</a></p>]]></content>
      
      
      <categories>
          
          <category> Minecraft </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Forge </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Minecraft——Forge1.16.5模组开发（36.2.20）——(2)Mod全局配置</title>
      <link href="/posts/mc-dev-2.html"/>
      <url>/posts/mc-dev-2.html</url>
      
        <content type="html"><![CDATA[<p>当我们配置好mod开发环境后，注意到官方演示mod类上有一段注解</p><blockquote><p>@Mod(“examplemod”)</p></blockquote><p>这个的意思就是你这个mod的id，完全可以自定义，当你自定义后，修改resouses包下面的mods.toml文件，需要把mod_id修改为自己的mod_id<br><img src="https://img-blog.csdnimg.cn/eac603f75a8a44fb85cd7b9ae3c559c2.png#pic_center" alt="修改modid"><br>这里可以别急着修改，因为我们要把官方的演示包给删掉，就是java包下的一些包都可以删掉，然后新建包，名称可以自己指定，此处是三级，主类在guo这个包下，即主类Guo就在此包下新建如下图<br><img src="https://img-blog.csdnimg.cn/ffeb670db84e4786a35106fcd94b1b66.png#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/5a34203dd799439e8265095c60ba11d0.png#pic_center" alt="在这里插入图片描述"><br>为方便后续使用modid可以封装一个工具类，就是类Guo下面的Utils类，里面声明了modid。<br><img src="https://img-blog.csdnimg.cn/409497594e614567baf14ee0a9136ea4.png#pic_center" alt="在这里插入图片描述">主类调用时直接引用即可<img src="https://img-blog.csdnimg.cn/b989973641d9454385cd91233076a383.png#pic_center" alt="在这里插入图片描述"></p>]]></content>
      
      
      <categories>
          
          <category> Minecraft </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Forge </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Minecraft——Forge1.16.5模组开发（36.2.20）——(1)开发环境搭建</title>
      <link href="/posts/mc-dev-1.html"/>
      <url>/posts/mc-dev-1.html</url>
      
        <content type="html"><![CDATA[<p>==声明==：本文旨在提升作者的代码逻辑记忆能力，加深思考mojang的代码底层逻辑，更新mojang由于版本迭代替换掉的方法名称和实体名称，部分转载自Forge官方开发文档，指路-&gt;<a href="https://boson.v2mcdev.com/introducation/intro.html">1.16.5开发</a>，源代码GitHub-&gt;<a href="https://github.com/FledgeXu/BosonSourceCode">BosonSourceCode</a><br>==同时==：各位也可前往GitHub查看minecraft中文开发文档，指路-&gt;<a href="https://github.com/Mouse0w0/MinecraftDeveloperGuide#user-content-forge-minecraft%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E5%8C%85%E7%A6%BB%E7%BA%BF%E5%8C%85">minecraft中文开发指南</a></p><p align="center"><font color="pink" size="4"><==为了更好的方块世界==></font></p><h1 id="1-java的安装"><a href="#1-java的安装" class="headerlink" title="1.java的安装"></a>1.java的安装</h1><p>本文由于按照官方操作文档进行开发1.16.5版本，故java版本为1.8，此处我的java的jdk版本为1.8_311，开发1.16.5的forge推荐使用java8；</p><p><hr/><br>//作者java版本：</p><p><div align=center ><img src="https://img-blog.csdnimg.cn/a8febe59994b4280a2cd6c05cadbd32d.png#pic_center/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6LiP6L-H5bGx5rKz,size_18,color_FFFFFF,t_70,g_se,x_16#pic_center=200*150)" width="80%" /></div> </p><hr/><h2 id="1-1java下载"><a href="#1-1java下载" class="headerlink" title="1.1java下载"></a>1.1java下载</h2><p><a href="https://www.aliyundrive.com/s/wq8Z9aEgweU">java8u311阿里云盘分享——提取码: py20</a><br>java下载好后创建文件夹，把安装路径在随便一个盘中，如下图作者的java放在了D盘，新建的文件夹目录如下，注意：jdk1.8.0_311也是自己新建的文件夹，到时候安装时选择安装路径就是把java的jdk安装在此文件夹下；<br>jdk的目录结构</p><blockquote><p>D：<br>├── JAVA<br>│   └── java<br>├── └── jdk1.8.0_311</p></blockquote><p><hr/><br>//安装目录：</p><p><div align=center ><img src="https://img-blog.csdnimg.cn/63d1674101cd482c9b72cc3570e1a2c4.png#pic_center/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6LiP6L-H5bGx5rKz,size_18,color_FFFFFF,t_70,g_se,x_16#pic_center=200*150)" width="80%" /></div> </p><p><hr/><br>作者这里已经安装过了，安装就跳过了，都是一直下一步选择安装路径时就选你新建的 jdk1.8.0_311这个文件下，安装完成jdk之后，会再弹出安装jre的页面，选择路径也是 jdk1.8.0_311，随后一直下一步完成。</p><h1 id="2-java环境变量的配置"><a href="#2-java环境变量的配置" class="headerlink" title="2.java环境变量的配置"></a>2.java环境变量的配置</h1><p><img src="https://img-blog.csdnimg.cn/c45fe6e8d1ef412fb97686e3d89f35b3.png#pic_center" alt="在这里插入图片描述"><br>变量名就如下图是</p><blockquote><p>JAVA_HOME</p></blockquote><p><img src="https://img-blog.csdnimg.cn/9f8e3f2f08434f6fb36b5843cfe97d5a.png#pic_center" alt="在这里插入图片描述"><br>随后在系统变量中找到path<br><img src="https://img-blog.csdnimg.cn/478cd5d1b11e44b58831b7d284a3cf29.png#pic_center" alt="在这里插入图片描述">点击下方编辑按钮</p><p>新建两个内容如下<img src="https://img-blog.csdnimg.cn/21b2156db1914306b1734720a4ff32f3.png#pic_center" alt="在这里插入图片描述">点击确定应用，到此Java就算是配好了。</p><h1 id="3-Java-IDE——IDEA的安装"><a href="#3-Java-IDE——IDEA的安装" class="headerlink" title="3.Java IDE——IDEA的安装"></a>3.Java IDE——IDEA的安装</h1><p>官网：<a href="https://www.jetbrains.com/zh-cn/idea/download/#section=windows">idea</a></p><p><img src="https://img-blog.csdnimg.cn/c221059c383d4880ad63813dcc789ae8.png#pic_center" alt="在这里插入图片描述"></p><h1 id="4-Forge1-16-5mdk下载"><a href="#4-Forge1-16-5mdk下载" class="headerlink" title="4.Forge1.16.5mdk下载"></a>4.Forge1.16.5mdk下载</h1><p>mdk即多媒体开发工具包，就像玩minecraft时想有更好的体验，其中一种方法是添加mod模组，而模组是jar后缀的java文件，mdk在编译完之后也是jar后缀的文件，所以我们就可以利用mdk提供的现成框架来自定义模组了。</p><p>Forge官网==&gt;<a href="https://files.minecraftforge.net/net/minecraftforge/forge/index_1.16.5.html">FORGE1.16.5</a><br>点击mdk进行下载，1.16.5的不同版本开发起来会有很大出入<br>例如新建物品要分类到自定义的物品栏中，就从老版本的group变为tab调用<br><img src="https://img-blog.csdnimg.cn/e0cb1f53689d4ff6834ff826dd7eced2.png#pic_center" alt="在这里插入图片描述"></p><p><img src="https://img-blog.csdnimg.cn/11ca14c0ab24472d8c2a5c915170afda.png#pic_center" alt="在这里插入图片描述"><br>下载好后解压就行，文件内容如图所示<br><img src="https://img-blog.csdnimg.cn/a6df938cf4134d4f98571054f2245b42.png#pic_center" alt="在这里插入图片描述"><br>我们接下来要做的事就是新建一个文件夹，作为项目文件夹，位置随意就行，新建一个文件夹后把上图解压出来的全部内容复制到你新建的文件夹中，（全部复制，一个不能少，建议ctrl+a，ctrl+c）<br><img src="https://img-blog.csdnimg.cn/10a743aae12442a287b077899400fab7.png#pic_center" alt="在这里插入图片描述"><br>仔细观察发现里面有一个txt后缀文件，名称为readme，就是官方提供的使用方法，用Nodepad打开<br><img src="https://img-blog.csdnimg.cn/c35d686949684883991e3e304113905e.png#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/5a13929ba92a4cff87680a1e0ff45145.png#pic_center" alt="在这里插入图片描述"><br>接下来按照readme提示的步骤走,从forge官网下载依赖包<br>然后就是漫长的等待；；；；<br><img src="https://img-blog.csdnimg.cn/cae8e94c1caf4ddb99934076bdfdec62.png#pic_center" alt="在这里插入图片描述">之后完成<br><img src="https://img-blog.csdnimg.cn/c89930fc51554dafa1faaf88f4a8eb52.png#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/c1335907554240438e2e60dc44cecaa9.png#pic_center" alt="在这里插入图片描述"></p><p>==运行成功==<br><img src="https://img-blog.csdnimg.cn/d32a9302484f40c8bab18558fe5f233b.png#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/0e0e9020d2114e2f842f69531d159f45.png#pic_center" alt="在这里插入图片描述"></p>]]></content>
      
      
      <categories>
          
          <category> Minecraft </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Forge </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Redis-安装与配置</title>
      <link href="/posts/306dd2fe.html"/>
      <url>/posts/306dd2fe.html</url>
      
        <content type="html"><![CDATA[<h1 id="1-Redis"><a href="#1-Redis" class="headerlink" title="1. Redis"></a>1. Redis</h1><h2 id="1-1-Redis的安装"><a href="#1-1-Redis的安装" class="headerlink" title="1.1. Redis的安装"></a>1.1. Redis的安装</h2><p>​        大多数企业都是基于Linux服务器来部署项目，而且Redis官方也没有提供Windows版本的安装包。本教程会在Linux下部署redis。</p><p>​        Linux版本为CentOS 7。</p><p>​        Redis的官方网站地址：<a href="https://redis.io/">https://redis.io/</a></p><h3 id="1-1-1-Windows安装"><a href="#1-1-1-Windows安装" class="headerlink" title="1.1.1. Windows安装"></a>1.1.1. Windows安装</h3><p>​        首先下载Redis压缩包，直接解压到指定目录即可，redis.conf配置文件</p><h3 id="1-1-2-Linux安装"><a href="#1-1-2-Linux安装" class="headerlink" title="1.1.2. Linux安装"></a>1.1.2. Linux安装</h3><p>​        首先去Redis官网 <a href="https://redis.io/download/">download</a>下载linux版本压缩包，官网只提供.<em>tar</em>.<em>gz</em>格式在linux环境下部署的压缩包。<br><img src="https://img-blog.csdnimg.cn/77d11908ba614dab83b9477610b264d1.png?size_19#pic_center =590x270" alt="在这里插入图片描述"></p><p>Redis是基于C语言编写的，因此首先需要安装Redis所需要的gcc依赖：<br>打开linux命令行界面输入下列命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y gcc tcl</span><br></pre></td></tr></table></figure><p>下载好的Redis安装包需要上传到虚拟机的指定目录，如此处我们上传的目录为根目录下的/JavaTools/Redis-5.0.14,可以使用==Xftp==上传。<br><img src="https://img-blog.csdnimg.cn/a973abec3ef646b7821005bb740b6eee.png#pic_center =600x400" alt="javatools"></p><blockquote><p>在根目录’/‘下创建JavTools文件夹<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="built_in">cd</span> /</span><br><span class="line">&gt;<span class="built_in">mkdir</span> JavTools</span><br></pre></td></tr></table></figure><br>后续操作可使用虚拟机连接工具Xftp</p></blockquote><p><img src="https://img-blog.csdnimg.cn/8b733e9506ed4985ae68a60b050bcd84.png?size_10#pic_center" alt="ftp"></p><blockquote><p>下载好的redis-5.0.14.tar.gz压缩包上传到Linux后解压缩</p><p>解压命令<code>tar -xzf redis-5.0.14.tar.gz</code></p><p>得到redis-5.0.14</p></blockquote><p>进入redis目录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> redis-5.0.14</span><br></pre></td></tr></table></figure><p>运行编译命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><blockquote><p>注意：</p><blockquote><p>可能会出现错误：jemalloc/jemalloc.h：没有那个文件或目录，执行如下命令即可： </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;make MALLOC=libc</span><br></pre></td></tr></table></figure></blockquote></blockquote><p>make install可将redis的相关运行文件复制一份放到==/usr/local/bin/==下，这样就可以在任意目录下执行redis的命令了</p><p><img src="https://img-blog.csdnimg.cn/5a0222b53a9249c49489afb03e339d31.png#pic_center" alt="usr/local"></p><ul><li>redis-cli：是redis提供的命令行客户端</li><li>redis-server：是redis的服务端启动脚本</li><li>redis-sentinel：是redis的哨兵启动脚本</li></ul><hr><h4 id="启动Redis"><a href="#启动Redis" class="headerlink" title="启动Redis"></a>启动Redis</h4><p>这样就可以启动Redis服务了，启动方式例如：</p><ul><li>默认启动</li><li>指定配置启动</li><li>开机自启</li></ul><hr><p>1.默认启动：</p><p>在任意目录下输入redis-server命令即可启动Redis</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-server</span><br></pre></td></tr></table></figure><p>启动成功<br><img src="https://img-blog.csdnimg.cn/af2fe54d6e0046b0b9042c728be8ee6f.png" alt="在这里插入图片描述"></p><p>这种属于<code>前台启动</code>，会阻塞整个会话窗口，窗口关闭或者按下<code>CTRL + C</code>则Redis停止。不推荐使用。</p><hr><p>2.指定配置文件启动：</p><p>需要将Redis以<strong>后台</strong>方式启动，需要修改redis.conf配置文件，就在解压的目录<code>/JavaTools/redis-5.0.14</code>下：</p><p>进入redis-5.0.14编辑redis.conf</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> redis-5.0.14</span><br></pre></td></tr></table></figure><p>先将配置文件备份一份：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span> redis.conf redis.conf.bck</span><br></pre></td></tr></table></figure><p>然后修改redis.conf文件中的一些配置：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi redis.conf</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 允许访问的地址，默认是127.0.0.1，会导致只能在本地访问。修改为0.0.0.0则可以在任意IP访问，生产环境不要设置为0.0.0.0</span></span><br><span class="line"><span class="built_in">bind</span> 0.0.0.0</span><br><span class="line"><span class="comment"># 守护进程，修改为yes后即可后台运行</span></span><br><span class="line">daemonize <span class="built_in">yes</span></span><br><span class="line"><span class="comment"># 密码，设置后访问Redis必须输入密码</span></span><br><span class="line">requirepass qwer1234</span><br></pre></td></tr></table></figure><p>详细步骤前往博客<a href="https://blog.csdn.net/m0_51390535/article/details/124965190?spm=1001.2014.3001.5502">Redis配置文件</a></p><p>Redis的其它常见配置(不要求)：</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 监听的端口</span></span><br><span class="line"><span class="attr">port</span> <span class="string">6379</span></span><br><span class="line"><span class="comment"># 工作目录，默认是当前目录，也就是运行redis-server时的命令，日志、持久化等文件会保存在这个目录</span></span><br><span class="line"><span class="attr">dir</span> <span class="string">.</span></span><br><span class="line"><span class="comment"># 数据库数量，设置为1，代表只使用1个库，默认有16个库，编号0~15</span></span><br><span class="line"><span class="attr">databases</span> <span class="string">1</span></span><br><span class="line"><span class="comment"># 设置redis能够使用的最大内存</span></span><br><span class="line"><span class="attr">maxmemory</span> <span class="string">512mb</span></span><br><span class="line"><span class="comment"># 日志文件，默认为空，不记录日志，可以指定日志文件名</span></span><br><span class="line"><span class="attr">logfile</span> <span class="string">&quot;redis.log&quot;</span></span><br></pre></td></tr></table></figure><p>用配置文件启动Redis：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-server redis.conf</span><br></pre></td></tr></table></figure><p>停止服务：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 利用redis-cli来执行 shutdown 命令，即可停止 Redis 服务，</span></span><br><span class="line"><span class="comment"># 因为之前配置了密码，因此需要通过 -u 来指定密码</span></span><br><span class="line">redis-cli -u qwer1234 shutdown</span><br></pre></td></tr></table></figure><hr><p>3.开机自启：</p><p>我们也可以通过配置来实现开机自启。</p><p>首先，新建一个系统服务文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/systemd/system/redis.service</span><br></pre></td></tr></table></figure><p>内容如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=redis-server</span><br><span class="line">After=network.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=forking</span><br><span class="line">ExecStart=/usr/local/bin/redis-server /usr/local/src/redis-6.2.6/redis.conf</span><br><span class="line">PrivateTmp=true</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure><p>然后重载系统服务：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl daemon-reload</span><br></pre></td></tr></table></figure><p>现在，我们可以用下面这组命令来操作redis了：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启动</span></span><br><span class="line">systemctl start redis</span><br><span class="line"><span class="comment"># 停止</span></span><br><span class="line">systemctl stop redis</span><br><span class="line"><span class="comment"># 重启</span></span><br><span class="line">systemctl restart redis</span><br><span class="line"><span class="comment"># 查看状态</span></span><br><span class="line">systemctl status redis</span><br></pre></td></tr></table></figure><p>执行下面的命令，可以让redis开机自启：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">enable</span> redis</span><br></pre></td></tr></table></figure><hr><h2 id="1-2-Redis客户端cli"><a href="#1-2-Redis客户端cli" class="headerlink" title="1.2.Redis客户端cli"></a>1.2.Redis客户端cli</h2><h3 id="1-2-1-Redis命令行客户端"><a href="#1-2-1-Redis命令行客户端" class="headerlink" title="1.2.1.Redis命令行客户端"></a>1.2.1.Redis命令行客户端</h3><p>Redis安装完成后就自带了命令行客户端：redis-cli，使用方式如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-cli [options] [commonds]</span><br></pre></td></tr></table></figure><p>其中常见的options有：</p><ul><li><code>-h 127.0.0.1</code>：指定要连接的redis节点的IP地址，默认是127.0.0.1</li><li><code>-p 6379</code>：指定要连接的redis节点的端口，默认是6379</li><li><code>-a qwer1234</code>：指定redis的访问密码 </li></ul><p>其中的commonds就是Redis的操作命令，例如：</p><ul><li><code>ping</code>：与redis服务端做心跳测试，服务端正常会返回<code>pong</code></li></ul><p>不指定commond时，会进入<code>redis-cli</code>的交互控制台：</p><p><img src="https://img-blog.csdnimg.cn/b1f36db50eef49d2a06b4c8bc6e75ff7.png#pic_center" alt="keys"></p><p>可以使用命令连接cli客户端</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-cli -h 本机地址 -p 6379</span><br></pre></td></tr></table></figure><p>配置文件设置有密码时，cli启动后需要输入密码</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">AUTH qwer1234 <span class="comment">#redis密码</span></span><br></pre></td></tr></table></figure><p>启动失败，尝试开放6379端口</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/sbin/iptables -I INPUT -p tcp --dport 6379 -j ACCEPT</span><br></pre></td></tr></table></figure><hr><p><strong>其他硬知识</strong></p><ul><li>查看redis进程是否存在<br><code>ps -ef |grep redis</code></li><li>检测6379端口是否在监听<br><code>netstat -lntp | grep 6379</code></li><li>停止redis，使用ctrl+c快捷键或者使用客户端 <code>redis-cli shutdown</code></li></ul>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>redis通用命令和类型</title>
      <link href="/posts/32fwef.html"/>
      <url>/posts/32fwef.html</url>
      
        <content type="html"><![CDATA[<h2 id="reids通用命令和类型"><a href="#reids通用命令和类型" class="headerlink" title="reids通用命令和类型"></a>reids通用命令和类型</h2><h3 id="redis的数据类型key-value"><a href="#redis的数据类型key-value" class="headerlink" title="redis的数据类型key-value"></a>redis的数据类型key-value</h3><p>redis不想数据库有table其中id不会混乱，但redis的key都存在一起，所以命名可以加上’ : ‘作为区分<br>例如，本人roydon有article和problem</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">roydon:article:<span class="built_in">id</span></span><br><span class="line">roydon:problem:<span class="built_in">id</span></span><br></pre></td></tr></table></figure><p>value若是Java对象，可序列化为json字符串后存储<br>例如，key为roydon:user:1对应value：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#123;&quot;id&quot;:1,&quot;name&quot;:&quot;roydon&quot;,&quot;age&quot;:20&#125;&#x27;</span></span><br></pre></td></tr></table></figure></p><p><img src="https://img-blog.csdnimg.cn/f50fc59decaf4476aeb8be979251af68.png#pic_center" alt="keys"><br><img src="https://img-blog.csdnimg.cn/10952f88c3f9419791cbac89c59eb73a.png#pic_center" alt="rdmuser"></p><p>命令添加<br><code>set (key) (value)</code><br>获取<br><code>get (key) (value)</code><br><img src="https://img-blog.csdnimg.cn/6cb0054362f54a42bc4c9d2bdd7fe423.png#pic_center" alt="getset"></p><h3 id="通用命令"><a href="#通用命令" class="headerlink" title="通用命令"></a>通用命令</h3><p>结合help (commend)查看具体用法</p><blockquote><blockquote><p>KEYS：查看符合模板的所有key，结合通配符，不建议生产使用<br>DEL：删除指定的key，也可以同时删除多个<br>EXISTS：判断key是否存在<br>EXPIRE：给key设置有效期，到期该key自动删除（integer） -2<br>TTL：查看一个key的剩余有效期</p></blockquote></blockquote><p><img src="https://img-blog.csdnimg.cn/8f682f19663941e38dcda6defaaeaa89.png#pic_center" alt="在这里插入图片描述"></p><h3 id="String类型的常用命令"><a href="#String类型的常用命令" class="headerlink" title="String类型的常用命令"></a>String类型的常用命令</h3><p>string类型，其value有三种//////////////////////////////////////</p><ul><li>string</li><li>int</li><li>float</li></ul><div class="table-container"><table><thead><tr><th>KEY</th><th>VALUE</th></tr></thead><tbody><tr><td>msg</td><td>hello world</td></tr><tr><td>num</td><td>100</td></tr><tr><td>pai</td><td>3.14</td></tr></tbody></table></div><hr><p>命令———help+comment查看</p><blockquote><p>1.SET<br>2.GET<br>3.MSET：批量添加<br>4.MGET：批量获取，后面添加多个key得到多的对应value<br>5.INCR:int的key自增1<br>6.INCRBY：指定增加或减少，key后指定数子，负数为减<br>7.INCRBYFLOAT：float自增，必须指定，指定值为float数<br>8.SETNX：添加string类型键值对，key若存在不执行。<br>同<code>set `key` `value` nx</code><br>9.SETEX：添加string类型键值对，并指定有效期</p></blockquote><h3 id="Hash类型"><a href="#Hash类型" class="headerlink" title="Hash类型"></a>Hash类型</h3><p>也叫散列，value是一个无序字典，类似于java中的HashMap结构<br>Hash将每个字段独立存储，可以针对单个字段做CRUD<br><img src="https://img-blog.csdnimg.cn/aeea20ac3c264108b06aeab80a5961c6.png#pic_center" alt="在这里插入图片描述">可对单个field操作</p><p><img src="https://img-blog.csdnimg.cn/5c3ad00d259445e7a0e43b9dd8ae98b3.jpeg#pic_center" alt="hsak"></p><h3 id="List类型"><a href="#List类型" class="headerlink" title="List类型"></a>List类型</h3><p>类似Java中LinkedList，双向链表，反正向检索<br><img src="https://img-blog.csdnimg.cn/f7888347fd2540df804f761624f93b21.jpeg#pic_center" alt="在这里插入图片描述"></p><h3 id="Set类型"><a href="#Set类型" class="headerlink" title="Set类型"></a>Set类型</h3><p>与Java中HashSet类似，可以看作一个value为null的HashMap</p><ul><li>无序</li><li>元素不可重复</li><li>查找快</li><li>支持交集，并集，差集等功能</li></ul><p><img src="https://img-blog.csdnimg.cn/60089ae5030244d790bc389890adafeb.jpeg#pic_center" alt="在这里插入图片描述"></p><h3 id="SortedSet类型"><a href="#SortedSet类型" class="headerlink" title="SortedSet类型"></a>SortedSet类型</h3><p>是一个开排序的set集合，类似Java中TreeSet，但底层数据结构差别很大。SortedSet中每个元素都带有一个score属性，可以基于score属性对元素排序</p><ul><li>可排序</li><li>元素不重复</li><li>查询速度快<br>//////////////////适用场景：排行榜<br><img src="https://img-blog.csdnimg.cn/110fd39f22b3426697196f80bb1fb84b.jpeg#pic_center" alt="sortset"></li></ul>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>redis缓存击穿</title>
      <link href="/posts/2f323f.html"/>
      <url>/posts/2f323f.html</url>
      
        <content type="html"><![CDATA[<h2 id="场景"><a href="#场景" class="headerlink" title="场景"></a>场景</h2><p>也是热点key问题，就是一个高并发访问并且缓存重建较为复杂的key突然失效了，这里的key失效可以理解为某电商平台在节日大促，同时段大量请求访问一个商品，这个商品key会存在一个固定TTL，若TTL到时了，key消失，仍有大量请求访问该商品，这个key的重建业务复杂，耗时又高。于是，请求都来到数据库拿数据，瞬间给数据库造成了巨大的压力。</p><h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><h3 id="互斥锁"><a href="#互斥锁" class="headerlink" title="互斥锁"></a>互斥锁</h3><p>在发起请求未命中redis缓存时，表示此信息不存在，或过期，尝试获取锁。<br>若没拿到锁，表示此数据正在被更新，线程进行休眠再递归重新从缓存获取数据。<br>若拿到了锁，根据id查数据库，将数据信息写入redis并释放互斥锁，返回数据。<br><img src="https://img-blog.csdnimg.cn/44ba912cd87f4cdc9881504c42c2db61.jpeg#pic_center" alt="互斥锁"><br><em>ps：图片来自B站黑马程序员</em></p><blockquote><blockquote><p>redis中有命令<code>setnx key value</code>表示key不存在就set，存在就无法赋值，这就可以应用到锁中<br><img src="https://img-blog.csdnimg.cn/ef70f2d1e0fe4378bd22be29fe38968c.png#pic_center" alt="在这里插入图片描述"></p></blockquote></blockquote><p><img src="https://img-blog.csdnimg.cn/e360a4c6584c4a8f858591c57da0681a.png#pic_center" alt="nx"></p><p>对应方法setIfAbsent()，再设置过期时间，避免死锁</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">tryLock</span><span class="params">(String key)</span> &#123;<span class="comment">//获取锁</span></span><br><span class="line">        <span class="type">Boolean</span> <span class="variable">flag</span> <span class="operator">=</span> stringRedisTemplate</span><br><span class="line">        .opsForValue()</span><br><span class="line">        .setIfAbsent(key, <span class="string">&quot;1&quot;</span>, LOCK_SHOP_TTL, TimeUnit.SECONDS);</span><br><span class="line">        <span class="comment">//锁的存在时间，几秒就行</span></span><br><span class="line">        <span class="keyword">return</span> BooleanUtil.isTrue(flag);<span class="comment">//flag可能为null，进行拆箱封箱</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>模拟：封装在了queryWithMutex()中，开始店铺信息不存在redis中，当请求需要获取店铺信息时，redis没命中，那么获取锁，<br>进行缓存写入操作，成功后释放锁并返回数据。然后其他请求就能从redis中拿到数据了。<br><em>ps：其中有部分缓存穿透操作，请前往<a href="https://blog.csdn.net/m0_51390535/article/details/124992782?spm=1001.2014.3001.5501">redis缓存穿透</a></em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> StringRedisTemplate stringRedisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">queryById</span><span class="params">(Long id)</span> &#123;</span><br><span class="line">        <span class="comment">//缓存穿透</span></span><br><span class="line"><span class="comment">//        Shop shop = queryWithPassThrough(id);</span></span><br><span class="line">        <span class="comment">//互斥锁解决缓存击穿</span></span><br><span class="line">        <span class="type">Shop</span> <span class="variable">shop</span> <span class="operator">=</span> queryWithMutex(id);</span><br><span class="line">        <span class="keyword">if</span> (shop == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> Result.fail(<span class="string">&quot;店铺不存在&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Result.ok(shop);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Shop <span class="title function_">queryWithMutex</span><span class="params">(Long id)</span> &#123;</span><br><span class="line">        <span class="comment">//从redis查询商铺缓存</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> CACHE_SHOP_KEY + id;<span class="comment">//缓存的key</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">shopJson</span> <span class="operator">=</span> stringRedisTemplate.opsForValue().get(key);</span><br><span class="line">        <span class="keyword">if</span> (StrUtil.isNotBlank(shopJson)) &#123;</span><br><span class="line">            <span class="comment">//存在直接返回</span></span><br><span class="line">            <span class="keyword">return</span> JSONUtil.toBean(shopJson, Shop.class);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//判断命中的是否为空值</span></span><br><span class="line">        <span class="keyword">if</span> (shopJson != <span class="literal">null</span>) &#123;<span class="comment">//shopJson==&quot;&quot;</span></span><br><span class="line">            <span class="comment">//返回一个错误信息</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//4.redis中不存在,实现缓存重建</span></span><br><span class="line">        <span class="comment">//4.1获取互斥锁</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">lockKey</span> <span class="operator">=</span> LOCK_SHOP_KEY + id;</span><br><span class="line">        <span class="type">Shop</span> <span class="variable">shop</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">boolean</span> <span class="variable">isLock</span> <span class="operator">=</span> tryLock(lockKey);</span><br><span class="line">            <span class="comment">//4.2判断是否获取成功</span></span><br><span class="line">            <span class="keyword">if</span> (!isLock) &#123;<span class="comment">//获取🔒失败</span></span><br><span class="line">                <span class="comment">//4.3失败，休眠小时间后重试查询操作（递归）</span></span><br><span class="line">                Thread.sleep(<span class="number">50</span>);</span><br><span class="line">                <span class="keyword">return</span> queryWithMutex(id);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//4.4成功，根据id查询数据库</span></span><br><span class="line">            shop = getById(id);</span><br><span class="line">            Thread.sleep(<span class="number">200</span>);<span class="comment">//模拟数据库不在本机，查询数据库会有延时</span></span><br><span class="line">            <span class="keyword">if</span> (shop == <span class="literal">null</span>) &#123;<span class="comment">//数据库没有数据，缓存设空</span></span><br><span class="line">                <span class="comment">//将null写入redis(缓存穿透策略)</span></span><br><span class="line">                stringRedisTemplate.opsForValue().set(key, <span class="string">&quot;&quot;</span>, CACHE_NULL_TTL, TimeUnit.MINUTES);</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//数据库中存在，存入redis</span></span><br><span class="line">            stringRedisTemplate.opsForValue().set(key, JSONUtil.toJsonStr(shop), CACHE_SHOP_TTL, TimeUnit.MINUTES);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">//7.释放互斥锁</span></span><br><span class="line">            unLock(lockKey);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> shop;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">tryLock</span><span class="params">(String key)</span> &#123;<span class="comment">//获取锁</span></span><br><span class="line">        <span class="type">Boolean</span> <span class="variable">flag</span> <span class="operator">=</span> stringRedisTemplate.opsForValue().setIfAbsent(key, <span class="string">&quot;1&quot;</span>, LOCK_SHOP_TTL, TimeUnit.SECONDS);<span class="comment">//时间很短</span></span><br><span class="line">        <span class="keyword">return</span> BooleanUtil.isTrue(flag);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">unLock</span><span class="params">(String key)</span> &#123;<span class="comment">//释放锁</span></span><br><span class="line">        stringRedisTemplate.delete(key);<span class="comment">//就是删除缓存的锁</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>锁最终需要被释放，所以try的finally需要释放锁。<br>理论预期，只会进行一次数据库查询，需要在高并发条件模拟大量请求到来，只有一个线程获取锁，写缓存，其他请求递归查询，等待，直到写入缓存成功，理论全部请求会通过，只是耗时问题）</p><blockquote><p>redis无缓存，大量请求到来，数据库查询次数一次，并存入redis，释放锁<br><img src="https://img-blog.csdnimg.cn/b9c13b3ef2ac4f54a21165b31971fa2f.png#pic_center" alt="在这里插入图片描述"></p></blockquote><h3 id="逻辑过期"><a href="#逻辑过期" class="headerlink" title="逻辑过期"></a>逻辑过期</h3>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>redis缓存穿透</title>
      <link href="/posts/321rrew.html"/>
      <url>/posts/321rrew.html</url>
      
        <content type="html"><![CDATA[<p>ps:想只读有效信息，见<code>红字</code></p><h2 id="正常情况"><a href="#正常情况" class="headerlink" title="正常情况"></a>正常情况</h2><p>当在高并发，高性能，降低数据库压力的情况下，首先会选择redis作为缓存机制，当有大量请求需要查询数据库时，为了降低数据库的压力，并提高请求查询性能（redis基于内存，读取速度快），会将数据库的信息缓存到redis中，这样就形成了很好的分层结构，请求可以直接查询redis中缓存的信息，然后返回，就不需要经过数据库，减小了数据库的压力，同时，可以迅速查询到信息，岂不美哉。<br><code>先从缓存取数据，娶不到从数据库取，取到了就返回并添加缓存或更新缓存，取不到就返回空。</code></p><blockquote><p>==正常请求操作==<br><img src="https://img-blog.csdnimg.cn/4bd2df7706884e2283d71236e19440ac.png#pic_center" alt="common"></p><blockquote><p>第4步，当从数据库拿到数据时，一并添加到redis缓存，下次若是相同请求，直接访问redis并返回，大大提升了性能和可用性，持久性。</p></blockquote></blockquote><h2 id="非正常情况"><a href="#非正常情况" class="headerlink" title="非正常情况"></a>非正常情况</h2><p>但有利就有弊，如果请求的数据是数据库中没有的，同样redis中也不会出现此数据缓存，这样当某短时间大量无效请求（数据库无对应数据）访问时，由于redis中没有此数据缓存，请求就给到了数据库，那么压力就来到了数据库这边，可想而知，其中会浪费掉多少性能，若是有心怀**之人故意为之，后果可想而知。所以，这就需要一个很好的解决方案，当大量无效请求（数据库并没有此数据）来访问时，就会导致缓存穿透。<br><code>缓存和数据库都娶不到数据，若大量无效请求发起，数据库负载压力过大</code></p><blockquote><p>==非正常操作（在大量无益请求的场景下）==<br><img src="https://img-blog.csdnimg.cn/4feedc5528b843ca9e126e7a42bae330.png#pic_center" alt="unnormal"></p><blockquote><p>第4步变为直接返回null，那么请求一多，全都访问数据库，好嘛，要是网站被攻击了，那数据库就白想活着~</p></blockquote></blockquote><h2 id="解决方案✍️✍️"><a href="#解决方案✍️✍️" class="headerlink" title="解决方案✍️✍️"></a>解决方案✍️✍️</h2><h3 id="1-redis缓存设空-“”"><a href="#1-redis缓存设空-“”" class="headerlink" title="1.redis缓存设空(“”)"></a>1.redis缓存设空(“”)</h3><p><code>redis设置key-null，TTL设置短时间</code><br>那么就又要考虑了，当一个请求访问时，我们两层都没有相应数据，数据库操作后接着对redis设一个空的键值，那么当我过了段时间又增加了一条数据，正好就是这个请求需要的，当第一步走到redis时直接就死掉了，那么可太不划算了。<br>所以在缓存设空时尽量TTL一个短时间，防住短时间大量请求即可，谁也不会闲的干这事。<br><img src="https://img-blog.csdnimg.cn/b78f9bd4a5084922b7378642f5f1063f.png#pic_center" alt="redis=null"><br>那么我们接下来模拟一下具体场景<br>下面是操作流程代码块</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">queryById</span><span class="params">(Long id)</span> &#123;</span><br><span class="line">    <span class="comment">//从redis查询商铺缓存</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> <span class="string">&quot;cache:shop&quot;</span>+id;</span><br><span class="line">    <span class="comment">//根据key拿到数据json块</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">shopJson</span> <span class="operator">=</span> stringRedisTemplate.opsForValue().get(key);</span><br><span class="line">    <span class="keyword">if</span> (StrUtil.isNotBlank(shopJson)) &#123;</span><br><span class="line">        <span class="comment">//存在，转化为对应实体类直接返回</span></span><br><span class="line">        <span class="type">Shop</span> <span class="variable">shop</span> <span class="operator">=</span> JSONUtil.toBean(shopJson, Shop.class);</span><br><span class="line">        <span class="keyword">return</span> Result.ok(shop);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//判断命中的是否为空值，下下面代码存入的value为&quot;&quot;空</span></span><br><span class="line">    <span class="keyword">if</span> (shopJson!=<span class="literal">null</span>) &#123;<span class="comment">//等效于shopJson==&quot;&quot;</span></span><br><span class="line">        <span class="comment">//返回一个错误信息</span></span><br><span class="line">        <span class="keyword">return</span> Result.fail(<span class="string">&quot;店铺不存在&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//不存在根据id查数据库</span></span><br><span class="line">    <span class="type">Shop</span> <span class="variable">shop</span> <span class="operator">=</span> getById(id);</span><br><span class="line">    <span class="keyword">if</span> (shop == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="comment">//数据库中不存在，将null写入redis，并设置TTL</span></span><br><span class="line">        stringRedisTemplate.opsForValue()</span><br><span class="line">        .set(key,<span class="string">&quot;&quot;</span>,<span class="number">2</span>, TimeUnit.MINUTES);</span><br><span class="line">        <span class="keyword">return</span> Result.fail(<span class="string">&quot;店铺不存在&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//存在，存入redis</span></span><br><span class="line">    stringRedisTemplate.opsForValue().set(key,JSONUtil.toJsonStr(shop),<span class="number">60</span>, TimeUnit.MINUTES);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> Result.ok(shop);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>一条请求，这里是根据id来查询，此时设置id为0，数据库并不存在这条数据。观察到，返回了不存在json信息<img src="https://img-blog.csdnimg.cn/c2f58b31c7cf42529a4cf1865f1d67ec.png#pic_center" alt="在这里插入图片描述"><br>而且redis是没有缓存的，所以执行了相应数据库的sql操作，数据库并没有id为0的数据，所以下一步就是增加redis空缓存<br><img src="https://img-blog.csdnimg.cn/24212e0790a64c12a529d90621ce679a.png#pic_center" alt="123">此时，redis增加了一个key表示店铺id为0的空缓存，右上角TTL还剩·114秒（设置的为2分钟）<img src="https://img-blog.csdnimg.cn/1469247c024b4719877c49fd273623a3.png#pic_center" alt="在这里插入图片描述"><br>这样就能在短时间在缓存层面拦截大量无意义请求。</p><h3 id="2-布隆过滤"><a href="#2-布隆过滤" class="headerlink" title="2.布隆过滤"></a>2.布隆过滤</h3><p>利用hash算法计算数据库数据得到byte数组，当请求来访问先经过布隆过滤器，根据此数组0和1判断数据是否存在，存在就放行到redis否则拒绝。</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>计算机网络（谢希仁第八版）第一章：概述</title>
      <link href="/posts/7165c5d8.html"/>
      <url>/posts/7165c5d8.html</url>
      
        <content type="html"><![CDATA[<h2 id="1-计算机网络在信息时代的作用"><a href="#1-计算机网络在信息时代的作用" class="headerlink" title="1.计算机网络在信息时代的作用"></a><strong>1.计算机网络在信息时代的作用</strong></h2><p><strong>三网</strong>：<code>电信网络，有线电视网络，计算机网络。</code></p><p><strong>三网融合</strong>：由于涉及多方面的利益和行政管辖权的问题，目前没有实现。</p><p><strong>Internet</strong>（译名：因特网，目前使用最广泛的译名为：==互联网==（不是互连网<strong>internet</strong>））采用<strong>TCP/IP协议族</strong>作为通信规则，其前身为美国的ARPANET。</p><p>*互联网的两个特点：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> ***连通性***</span><br><span class="line"><span class="number">2.</span> ***共享***</span><br></pre></td></tr></table></figure><h2 id="2-互联网概述"><a href="#2-互联网概述" class="headerlink" title="2.互联网概述"></a>2.互联网概述</h2><blockquote><p>互联网概述：将地理位置不同的具有独立功能的多台计算机及其外部设备，通过通信线路连接起来，在网络操作系统，网络管理软件及网络通信协议的管理和协调下，实现资源共享和信息传递的计算机系统。</p></blockquote><p><strong>计算机网络（网络</strong>）：由若干<strong>节点</strong>（node可以是计算机，集线器，交换机或路由器等）和连接这些节点的<strong>链路</strong>（link）组成。<br><strong>互连网（internet）</strong>：网络的网络，由许多计算机网络通过路由器相互连接起来，构成的覆盖范围更大的计算机网络。<br><img src="https://img-blog.csdnimg.cn/595e22506daf4889a706851ae901f14a.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6LiP6L-H5bGx5rKz,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="在这里插入图片描述"><br><strong>互联网基础结构发展的三个阶段</strong>：</p><ol><li>第一阶段（1969—1990）：<br>单个的分组交换网络ARPANET（不是互连网）向互连网发展，1983年TCP/IP协议成为ARPANET上的标准协议，使得所有使用此协议的计算机都能利用互连网相互通信。因此1983年也是互联网的诞生时间。1990年ARPANET关闭。</li><li>第二阶段（1985—1993）：<br>建成了<strong>三级结构的互联网</strong>。1985年起，美国国家科学基金会NSF（National Science Foundation）就围绕六个大型计算机中心建设计算机网络，即国家科学基金网NSFNET。它是一个三级计算机网络，分为<strong>主干网、地区网和校园网（或企业网）</strong>。这种三级计算机网络覆盖了全美国主要的大学和研究所，并且成为互联网中的主要组成部分。<br><strong>三级结构：</strong><br><img src="https://img-blog.csdnimg.cn/b6ca353827f04b04a0950002c3edd2b5.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6LiP6L-H5bGx5rKz,size_18,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="在这里插入图片描述"></li><li>第三阶段（1993—now）：<br>逐渐形成了<strong>全球范围的多层次ISP结构的互联网</strong><br>1993年开始，美国政府资助的NSFNET逐渐被若干个<strong>商用的互联网主干网</strong>替代，政府机构不再负责互联网的运营。<br>这样就出现了一个新的名词：<strong>互联网服务提供者ISP（InternetService Provider）</strong>。在许多情况下，ISP就是一个进行商业活动的公司，因此ISP又常译为<strong>互联网服务提供商</strong>。<br>例如，中国电信、中国联通和中国移动等公司都是我国最有名的ISP。<br><strong>多层次的ISP：主干ISP、地区ISP和本地ISP</strong>。<img src="https://img-blog.csdnimg.cn/c9a31065911c4ac984f92dda8c1aa748.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6LiP6L-H5bGx5rKz,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="在这里插入图片描述"><br>20世纪90年代，欧洲原子核研究组织CERN开发==万维网WWW==（==World Wide Web==）成为互联网指数级增长的主要驱动力。<img src="https://img-blog.csdnimg.cn/3bfa3b6c58ce419b8b486b45ce2565f2.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6LiP6L-H5bGx5rKz,size_15,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="在这里插入图片描述"><h2 id="3-互联网的组成"><a href="#3-互联网的组成" class="headerlink" title="3.互联网的组成"></a>3.互联网的组成</h2></li></ol><ul><li>==边缘部分==：主机</li><li>==核心部分==：网络和路由器<br><img src="https://img-blog.csdnimg.cn/0a5b90c5bc3046e9a690545763d04376.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6LiP6L-H5bGx5rKz,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="在这里插入图片描述"><br>边缘部分的通信方式：</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#客户—服务器方式（CS方式）  Client/Server</span><br><span class="line">#对等方式（P2P方式）       Peer-to-Peer</span><br></pre></td></tr></table></figure><p>核心部分：</p><ol><li>电路交换：效率低</li><li>分组交换：高效，灵活，可靠</li><li>报文交换：最慢（基本不用了）</li></ol><h2 id="4-计算机在我国的发展"><a href="#4-计算机在我国的发展" class="headerlink" title="4.计算机在我国的发展"></a><strong>4.计算机在我国的发展</strong></h2><p>“了解即可”</p><h2 id="5-计算机网络的类别"><a href="#5-计算机网络的类别" class="headerlink" title="5.计算机网络的类别"></a>5.计算机网络的类别</h2><ol><li>按作用范围分：</li></ol><blockquote><pre><code>          1.广域网WAN          2.城域网MAN          3.局域网LAN          4.个人区域网PAN</code></pre></blockquote><ol><li>按网络的使用者分<blockquote><pre><code>          1.公用网          2.专用网</code></pre></blockquote></li></ol><h2 id="6-计算机网络的性能"><a href="#6-计算机网络的性能" class="headerlink" title="6.计算机网络的性能"></a>6.计算机网络的性能</h2><p><strong>性能指标</strong>：<br>==<strong>1.速率：</strong>==<br>数据的传送速率，它也称为<strong>数据率</strong>（data rate）或<strong>比特率</strong>（bit rate）。<br>单位：bit/s（比特每秒）（或b/s，有时也写为bps，即bit per second）。<br>==<strong>2.带宽：</strong>==（两种含义）<br> （1）.频域：某个信号具有的频带宽度。单位：Hz，赫（千赫、兆赫、吉赫）<br> （2）.时域：网络中某通道传送数据的能力，表示在单位时间内网络中的某信道所能通过的“最高数据率”。单位：bit/s（比特每秒）<br>对比=&gt;本质相同，带宽越宽，最高数据率越高。<br>==<strong>3.吞吐量：</strong>==<br>单位时间内通过某个网络（或信道、接口）的实际的数据量。<br>受网络<strong>带宽</strong>或<strong>额定速率</strong>限制<br>==<strong>4.时延：</strong>==<br>指数据从网络的一端传送到另一端所需的时间。<br>（1）、==发送时延==：<br><img src="https://img-blog.csdnimg.cn/dbb322d06c7f411ab44af2bd2c6c679d.png#pic_center" alt="在这里插入图片描述"></p><p>（2）、==传播时延==：<br><img src="https://img-blog.csdnimg.cn/13e7c6f9fd7b4c29aaf7e2a9b0f1c9a7.png#pic_center" alt="在这里插入图片描述"><br>电磁波在自由空间的传播速率是光速3.0×10^5^km/s。在铜线电缆中的传播速率约为2.3×10^5^km/s，在光纤中的传播速率约为2.0×10^5^km/s<br>（3）、==处理时延==：主机或路由器在收到分组时要花费一定的时间进行处理。<br>（4）、==排队时延==：分组在经过网络传输时，要经过许多路由器。分组在进入路由器后要先在输入队列中排队等待处理。在路由器确定了转发接口后，还要在输出队列中排队等待转发。</p><blockquote><p>总时延=发送时延+传播时延+处理时延+排队时延<br>—&gt;小时延优于大时延<br>—&gt;低速率小时延优于高速率大时延</p></blockquote><p>时延产生的地方：<br><img src="https://img-blog.csdnimg.cn/ecad3ba56dfc468bafed989e8e4b349a.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6LiP6L-H5bGx5rKz,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="在这里插入图片描述"><br>==<strong>5.时延带宽积：</strong>==<br>=传播时延<em>带宽。单位：bit<br>==<strong>6.往返时间RTT：</strong>==<br>表示从发送方发送完数据到发送方收到来自接收方的确认总经历的时间。<br><img src="https://img-blog.csdnimg.cn/a3e9e5d94188477e956f7c360163c7c5.png#pic_center" alt="在这里插入图片描述"><br>有效数据率&lt;发送速率<br><img src="https://img-blog.csdnimg.cn/16fbfe3c81144b74bbb1663fc2c31d3d.png#pic_center" alt="在这里插入图片描述"><br>==<strong>7.利用率：</strong>==（并非越高越好）<br>（1）信道利用率指出某信道有百分之几的时间是被利用的（有数据通过）。完全空闲的信道的利用率是0。<br>（2）网络利用率是全网络的信道利用率的加权平均值。<br><img src="https://img-blog.csdnimg.cn/a25427bbecf241e1ae12898c7f5fe1f9.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6LiP6L-H5bGx5rKz,size_17,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="在这里插入图片描述"><br>D0表示网络空闲时的时延，D表示网络当前的时延<br><img src="https://img-blog.csdnimg.cn/d9bbda81c3684847885d884ae9a37107.png#pic_center" alt="在这里插入图片描述"><br><em>*计算机的非性能指标：</em></em></p><ul><li>费用</li><li>质量</li><li>标准化</li><li>可靠性</li><li>可扩展性和可升级性</li><li>易于管理和维护</li></ul><h2 id="7-计算机网络体系结构"><a href="#7-计算机网络体系结构" class="headerlink" title="7.计算机网络体系结构"></a>7.计算机网络体系结构</h2><p>协议三要素：</p><blockquote><p><strong>1.语法</strong><br><strong>2.语义</strong><br><strong>3.同步</strong></p><p>协议两种形式：<br>文字描述：—&gt;人<br>程序代码：—&gt;计算机</p></blockquote><p><img src="https://img-blog.csdnimg.cn/4fb4a923e23e42e7af6e9553b9f8c4c2.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6LiP6L-H5bGx5rKz,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="在这里插入图片描述"><br>本书学习的是五层结构</p><p>====================================本书索引<br><a href="https://blog.csdn.net/m0_51390535/article/details/121278340">计算机网络（谢希仁第八版）第一章：概述</a><br><a href="https://blog.csdn.net/m0_51390535/article/details/121593321">计算机网络（谢希仁第八版）第二章：物理层</a><br><a href="https://blog.csdn.net/m0_51390535/article/details/121734353">计算机网络（谢希仁第八版）第三章：数据链路层</a><br><a href="https://blog.csdn.net/m0_51390535/article/details/122018224">计算机网络（谢希仁第八版）第四章：网络层</a></p>]]></content>
      
      
      <categories>
          
          <category> 计算机网络 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机网络 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>计算机网络（谢希仁第八版）第三章：数据链路层</title>
      <link href="/posts/87a073f0.html"/>
      <url>/posts/87a073f0.html</url>
      
        <content type="html"><![CDATA[<p>本章最重要的内容：<br>（1）数据链路层的==点对点信道==和==广播信道==的特点，以及这两种信道所使用的协议（==PPP协议==以及==CSMA/CD协议==）的特点。<br>（2）数据链路层的三个基本问题：==封装成帧、透明传输和差错检测==。<br>（3）以太网==MAC层的硬件地址==。<br>（4）<strong>适配器、转发器、集线器、网桥、以太网交换机</strong>的作用以及使用场合。<br>（5）数据链路的两层：</p><blockquote><p>LLC：逻辑链路控制子层（Logical Link Control）与传输媒体无关<br>MAC：媒体接入控制子层（Medium Access Control）与传输媒体有关</p></blockquote><p>（6）此层的协议数据单元==&gt;==帧(Frame)==。<br>两台主机通过互联网进行通信时数据链路层所处的地位如下图：<br><img src="https://img-blog.csdnimg.cn/68ded820d351474fa38e7330231de693.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6LiP6L-H5bGx5rKz,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="在这里插入图片描述"></p><h2 id="1-数据链路层的几个共同问题（使用点对点信道的数据链路层）"><a href="#1-数据链路层的几个共同问题（使用点对点信道的数据链路层）" class="headerlink" title="1.数据链路层的几个共同问题（使用点对点信道的数据链路层）"></a>1.数据链路层的几个共同问题（使用点对点信道的数据链路层）</h2><h4 id="1-1-数据链路和帧"><a href="#1-1-数据链路和帧" class="headerlink" title="1.1.数据链路和帧"></a>1.1.数据链路和帧</h4><blockquote><p>链路：物理链路<br>数据链路：逻辑链路=链路+通信协议</p></blockquote><h4 id="1-2-三个基本问题"><a href="#1-2-三个基本问题" class="headerlink" title="1.2.三个基本问题"></a>1.2.三个基本问题</h4><p>==封装成帧、透明传输、差错检测==<br>1．封装成帧<br>帧的数据部分长度上限——最大传送单元MTU（Maximum Transfer Unit）长度==&gt;46~1500<br>帧定界符（SOH和EOT）<br><img src="https://img-blog.csdnimg.cn/630f79491644490a8c7d9ca7301f00d0.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_90,text_Q1NETiBA6LiP6L-H5bGx5rKz,size_15,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="在这里插入图片描述"><br>2．透明传输<br>某一个实际存在的事物看起来却好像不存在一样<br>若数据报中出现控制字符会被误判，所以：<br><img src="https://img-blog.csdnimg.cn/5256db467d5a44309c204a10e440a6d8.png#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/e3beeade43444920b1b2b62ab7c59cce.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6LiP6L-H5bGx5rKz,size_29,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="在这里插入图片描述"><br>3．差错检测<br>传输错误的比特占所传输比特总数的比率称为误码率BER（Bit ErrorRate）<br>==循环冗余检验CRC==（Cyclic Redundancy Check）<br>—&gt;产生—&gt;<br>==帧检验序列FCS==（Frame Check Sequence）</p><blockquote><p>CRC是检错方法，FCS是添加在数据后面的冗余码</p></blockquote><p><img src="https://img-blog.csdnimg.cn/bd7ae814db3e4040a9e11d5d93f439aa.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6LiP6L-H5bGx5rKz,size_15,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="在这里插入图片描述"><br>在接收端对收到的每一帧经过CRC检验后，有以下两种情况：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>）若余数R＝<span class="number">0</span>，表帧没有差错，就接受（accept）。👌</span><br><span class="line"><span class="number">2</span>）若余数R≠<span class="number">0</span>，则判定这个帧有差错（但无法确定究竟是哪一位或哪几位出现了差错），就丢弃。🙏</span><br></pre></td></tr></table></figure><p>循环冗余检验CRC差错检测，只能做到对帧的无差错接受==实现无比特差错==，==不能做到可靠传输==。要做到可靠，还要解决帧丢失、帧重复或帧失序。</p><blockquote><p>1）对于通信质量良好的有线传输链路，数据链路层协议不使用确认和重传机制，即不要求数据链路层向上提供可靠传输的服务。如果在数据链路层传输数据时出现了差错并且需要进行改正，那么改正差错的任务就由上层协议（例如，运输层的TCP协议）来完成。<br>2）对于通信质量较差的无线传输链路，数据链路层协议使用确认和重传机制，数据链路层向上提供可靠传输的服务（见第9章）。</p></blockquote><p>可靠传输协议将在第5章运输层中讨论。本章介绍的数据链路层协议都不是可靠传输的协议。</p><h2 id="2-点对点-协议PPP（Point-to-Point-Protocol）"><a href="#2-点对点-协议PPP（Point-to-Point-Protocol）" class="headerlink" title="2.==点对点==协议PPP（Point-to-Point Protocol）"></a>2.==点对点==协议PPP（Point-to-Point Protocol）</h2><h4 id="2-1-PPP协议的组成"><a href="#2-1-PPP协议的组成" class="headerlink" title="2.1.PPP协议的组成"></a>2.1.PPP协议的组成</h4><p>PPP协议有三个组成部分：<br>（1）<strong>一个将IP数据报封装到串行链路的方法</strong>。PPP既支持异步链路（无奇偶检验的8比特数据），也支持面向比特的同步链路。IP数据报在PPP帧中就是其信息部分。这个信息部分的长度受最大传送单元MTU的限制。<br>（2）<strong>一个用来建立、配置和测试数据链路连接的链路控制协议LCP（LinkControl Protocol）</strong>。通信的双方可协商一些选项。在RFC 1661中定义了11种类型的LCP分组。<br>（3）<strong>一套网络控制协议NCP（Network Control Protocol）</strong>，其中的每一个协议支持不同的网络层协议，如IP、OSI的网络层、DECnet，以及AppleTalk等。</p><h4 id="2-2-PPP协议的帧格式"><a href="#2-2-PPP协议的帧格式" class="headerlink" title="2.2.PPP协议的帧格式"></a>2.2.PPP协议的帧格式</h4><p><img src="https://img-blog.csdnimg.cn/e12f64fca3ca493d8f8d7d2c1192c883.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6LiP6L-H5bGx5rKz,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="在这里插入图片描述"><br> （1）字节填充：</p><p> （2）零比特填充：<br>五个连续的1后加0.<br>例：0111110101—&gt;011111==0==01001<br><img src="https://img-blog.csdnimg.cn/be93aaf9c86f4c19bb900efe798b4eef.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6LiP6L-H5bGx5rKz,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="在这里插入图片描述"></p><h2 id="3-使用广播信道的数据链路层"><a href="#3-使用广播信道的数据链路层" class="headerlink" title="3.使用广播信道的数据链路层"></a>3.使用广播信道的数据链路层</h2><h4 id="3-1-局域网三种拓扑结构"><a href="#3-1-局域网三种拓扑结构" class="headerlink" title="3.1.局域网三种拓扑结构"></a>3.1.局域网三种拓扑结构</h4><p><img src="https://img-blog.csdnimg.cn/c04d332f553648159776dae0ff973a86.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6LiP6L-H5bGx5rKz,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="在这里插入图片描述"></p><p>以太网使用无连接，不编号，不用回复确认，尽最大努力的交付，是不可靠服务。</p><h4 id="3-2-计算机联网工具——适配器（adapter）"><a href="#3-2-计算机联网工具——适配器（adapter）" class="headerlink" title="3.2.计算机联网工具——适配器（adapter）"></a>3.2.计算机联网工具——适配器（adapter）</h4><p>适配器本来是在主机箱内插入的一块网络接口板（或者是在笔记本电脑中插入一块PCMCIA卡——个人计算机存储器卡接口适配器）。这种接口板又称为<strong>网络接口卡NIC</strong>（Network Interface Card）或简称为“==网卡==”。适配器上面装有<strong>处理器和存储器</strong>（包括RAM和ROM）。==适配器和局域网之间的通信是通过电缆或双绞线以<strong>串行</strong>传输方式进行的，而适配器和计算机之间的通信则是通过计算机主板上的I/O总线以<strong>并行</strong>传输方式进行的==。因此，适配器的一个重要功能就是要进行数据串行传输和并行传输的转换。<br><img src="https://img-blog.csdnimg.cn/25e9380c0f2d4b418890714efbf72819.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6LiP6L-H5bGx5rKz,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="在这里插入图片描述"></p><h4 id="3-3-CSMA-CD协议"><a href="#3-3-CSMA-CD协议" class="headerlink" title="3.3.CSMA/CD协议"></a>3.3.CSMA/CD协议</h4><p>why use it ?：总线上在同一时间只能允许一台计算机发送数据。<br><img src="https://img-blog.csdnimg.cn/11d1302f39e2455e8b4d714a510641f8.png" alt="在这里插入图片描述"><img src="https://img-blog.csdnimg.cn/9ee2249b8bd64e72b8264ea98b942064.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6LiP6L-H5bGx5rKz,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"><br>电磁波在1km电缆的传播时延约为5µs，帧间最小间隔：9.6µs（用来处理缓存，为接收下一帧做准备）<br><img src="https://img-blog.csdnimg.cn/808bc3236b05405785fc2e1fcd9b8d07.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6LiP6L-H5bGx5rKz,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="在这里插入图片描述"><br>上图重要时刻：</p><blockquote><p>在t＝0时，A发送数据。B检测到信道为空闲。<br>在t＝τ−δ时（这里τ&gt;δ&gt;0），A发送的数据还没有到达B时，由于B检测到信道是空闲的，因此B发送数据。<br>经过时间δ/2后，即在t＝τ−δ/2时，A发送的数据和B发送的数据发生了碰撞。但这时A和B都不知道发生了碰撞。<br>在t＝τ时，B检测到发生了碰撞，于是停止发送数据。<br>在t＝2τ−δ时，A也检测到发生了碰撞，因而也停止发送数据。<br>A和B发送数据均失败，它们都要推迟一段时间再重新发送。</p></blockquote><p>以太网的端到端往返时间2τ称为<strong>争用期</strong>（contention period），它是一个很重要的参数。争用期又称为碰撞窗口（collision window）。</p><p>1.对于10Mbit/s以太网，争用期内可发送512bit，即64字节（最短有效帧长），争用期2τ为51.2µs<br>所以，以太网端到端时延必须小于争用期的一半即25.6µs<br>2.对于100Mbit/s的以太网，争用期为5.12µs，帧间最小间隔：0.96µs<br><strong>若发生碰撞：</strong><br><strong>截断二进制指数退避</strong>（truncated binary exponentialbackoff）算法来确定碰撞后重传的时机。<br>从离散的整数集合［0，1，…，（2k−1）］中随机取出一个数，记为r。重传应推后的时间就是r倍的争用期。<br><img src="https://img-blog.csdnimg.cn/582c1bbf2b59457c900c704ec595df88.png#pic_center" alt="在这里插入图片描述"><br>当重传次数不超过10时，参数k等于重传次数；但<strong>当重传次数超过10时，k就不再增大而一直等于10</strong>。当重传达==16==次仍不能成功时（这表明同时打算发送数据的站太多，以致连续发生冲突），则丢弃该帧，并向高层报告。<br><em>强化碰撞：<br>当发送数据的站一旦发现发生了碰撞时，除了立即停止发送数据外，还要再继续发送<em>*32比特或48比特</em></em>的人为干扰信号（jamming signal），以便让所有用户都知道现在已经发生了碰撞。<br>对于10Mbit/s以太网，发送32（或48）比特只需要3.2（或4.8）µs。</p><h4 id="3-4-使用集线器的星型拓扑"><a href="#3-4-使用集线器的星型拓扑" class="headerlink" title="3.4.使用集线器的星型拓扑"></a>3.4.使用集线器的星型拓扑</h4><p>星形以太网10BASE-T</p><ol><li>10表示速率10Mbit/s</li><li>BASE表示基带信号</li><li>T表示双绞线</li></ol><p>使用集线器的以太网在逻辑上仍是一个总线网，各站共享逻辑上的总线，使用的还是CSMA/CD协议。<br>集线器工作在<strong>物理层</strong>。每个端口只<strong>简单的转发比特</strong>，<strong>不进行碰撞检测</strong>。</p><h4 id="3-5-以太网的信道利用率"><a href="#3-5-以太网的信道利用率" class="headerlink" title="3.5.以太网的信道利用率"></a>3.5.以太网的信道利用率</h4><p><img src="https://img-blog.csdnimg.cn/dbe8911906594690aef5ad820f532d54.png#pic_center" alt="在这里插入图片描述"><br>以太网单程端到端时延τ与帧的发送时间T0之比：<br><img src="https://img-blog.csdnimg.cn/8ebc24b6afcd473992a9f2f9bba54d50.png#pic_center" alt="在这里插入图片描述"><br>因此，要提高以太网利用率参数a的值应当尽可能小，即当数据率一定时，<strong>以太网连线的长度受到限制</strong>（否则τ会太大），同时<strong>以太网帧长不能太短</strong>（否则T0的值会太小，使a值太大）。</p><h4 id="3-6-以太网的MAC层"><a href="#3-6-以太网的MAC层" class="headerlink" title="3.6.以太网的MAC层"></a>3.6.以太网的MAC层</h4><p>在局域网中，<strong>硬件地址</strong>又称为<strong>物理地址</strong>或<strong>MAC地址</strong>。用来唯一标识计算机，标识系统（identificationsystem）<br>查找MAC命令：<strong>ipconfig /all</strong></p><ul><li>IPv4：32位（4字节）</li><li>MAC：48位</li><li>IPv6：128位</li></ul><p>IEEE规定地址字段第一字节的最低位为<strong>I/G</strong>（Individual/Group）<strong>位</strong></p><ul><li>单站地址：I/G=0</li><li>组地址：I/G=1，用于多播</li><li>广播地址：只作为目的地址使用</li></ul><p>==MAC帧格式==</p><blockquote><p> DIX Ethernet V2：世界第一个局域网产品（以太网）规约<br> IEEE 802.3：第一个IEEE以太网标准</p></blockquote><p>以太网V2的MAC帧格式：<br><img src="https://img-blog.csdnimg.cn/6022f0c9414b4ac289ea542767441c06.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6LiP6L-H5bGx5rKz,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="在这里插入图片描述"><br>当数据字段的长度小于46字节时，MAC子层就会在数据字段的后面加入一个整数字节的填充字段，以保证以太网的MAC帧长不小于64字节。<br>MAC帧的FCS字段的检验范围不包括前同步码和帧开始定界符。<br><strong>有效的MAC帧长度为64～1518字节之间。</strong></p><h2 id="4-拓展的以太网"><a href="#4-拓展的以太网" class="headerlink" title="4.拓展的以太网"></a>4.拓展的以太网</h2><ul><li>物理层：集线器【半双工】</li><li>数据链路层：交换机（网桥）【全双工，自学习算法】</li></ul><p>物理层集线器缺点：<br>一个更大的碰撞域（冲突域），使得吞吐量减少。<br><img src="https://img-blog.csdnimg.cn/96a37774b8da4c21ada5ed24e941562a.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6LiP6L-H5bGx5rKz,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="在这里插入图片描述"><br>数据链路层交换机：多端口网桥，多速率端口，全双工，独立占用媒体，无碰撞传输数据，每个端口和连接端口的主机构成独立碰撞域，具有N个端口的以太网交换机碰撞域有N个。</p><p>传统10Mbit/s共享式以太网，若有十个用户，则每个用户占有的带宽为1Mbit/s，若用以太网交换机来连接这些主机，则总带宽为个主机带宽之和为100Mbit/s。</p><p>==从总线以太网到星形以太网<br>传统的电话网是星形结构，<strong>总线以太网使用CSMA/CD协议</strong>，以半双工方式工作。但<strong>以太网交换机不使用共享总线，没有碰撞问题，因此不使用CSMA/CD协议，而是以全双工方式工作</strong>。既然连以太网的重要协议CSMA/CD都不使用了（相关的“争用期”也没有了），为什么还叫做以太网呢？原因就是它的帧结构未改变，仍然采用以太网的帧结构。</p><p>====================================本书索引<br><a href="https://blog.csdn.net/m0_51390535/article/details/121278340">计算机网络（谢希仁第八版）第一章：概述</a><br><a href="https://blog.csdn.net/m0_51390535/article/details/121593321">计算机网络（谢希仁第八版）第二章：物理层</a><br><a href="https://blog.csdn.net/m0_51390535/article/details/121734353">计算机网络（谢希仁第八版）第三章：数据链路层</a><br><a href="https://blog.csdn.net/m0_51390535/article/details/122018224">计算机网络（谢希仁第八版）第四章：网络层</a></p>]]></content>
      
      
      <categories>
          
          <category> 计算机网络 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机网络 </tag>
            
            <tag> 数据链路层 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>计算机网络（谢希仁第八版）第二章：物理层</title>
      <link href="/posts/48c18324.html"/>
      <url>/posts/48c18324.html</url>
      
        <content type="html"><![CDATA[<h2 id="1-物理层基本概念"><a href="#1-物理层基本概念" class="headerlink" title="1.物理层基本概念"></a>1.物理层基本概念</h2><p><del>物理层协议又被称为<strong>规程</strong></del><br>物理层协议数据单元==&gt;==比特流==<br>特性（了解）：</p><blockquote><p>（1）机械特性：指明接口所用接线器的形状和尺寸、引脚数目和排列、固定和锁定装置等。<br>（2）电气特性：指明在接口电缆的各条线上出现的电压的范围。<br>（3）功能特性：指明某条线上出现的某一电平的电压的意义。<br>（4）过程特性：指明对于不同功能的各种可能事件的出现顺序。</p></blockquote><p>数据在计算机内部采用<strong>并行传输</strong>，在通信线路（传输媒体）采用<strong>串行传输</strong></p><h2 id="2-数据通信的基础知识"><a href="#2-数据通信的基础知识" class="headerlink" title="2.数据通信的基础知识"></a>2.数据通信的基础知识</h2><h4 id="1-通信模型："><a href="#1-通信模型：" class="headerlink" title="1.通信模型："></a>1.通信模型：</h4><p>==源系统—&gt;传输系统—&gt;目的系统==</p><p><img src="https://img-blog.csdnimg.cn/0e4c239de461450da0f77ae6a349e4da.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6LiP6L-H5bGx5rKz,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="在这里插入图片描述"></p><ul><li>消息：文字、图像等，数据是运送消息的实体，是有意义的符号序列。</li><li>信号：数据的电气或电磁表现。<blockquote><p>模拟信号（analogous signal）：（连续）<img src="https://img-blog.csdnimg.cn/f85767ecfdd944bd8b27e8669b8afc15.png#pic_center =200x30" alt="在这里插入图片描述"><br>数字信号（digital signal）：（离散）<br><img src="https://img-blog.csdnimg.cn/336d86687533455d8fd5a7c9fad4dc3e.png#pic_center =200x30" alt="在这里插入图片描述"></p></blockquote></li></ul><p><strong>码元</strong>：在使用时间域（或简称为时域）的波形表示数字信号时，代表不同离散数值的基本波形就称为码元。在使用二进制编码时，只有两种不同的码元，一种代表0状态而另一种代表1状态。</p><h4 id="2-信道"><a href="#2-信道" class="headerlink" title="2.信道"></a>2.信道</h4><blockquote><p>（1）单向通信（单工通信）：只能有一个方向的通信而没有反方向的交互。无线电广播或有线电广播以及电视广播就属于这种类型。<br>（2）双向交替通信（半双工通信）：通信的双方都可以发送信息，但不能双方同时发送（当然也就不能同时接收）。这种通信方式是一方发送另一方接收，过一段时间后可以再反过来。<br>（3）双向同时通信（全双工通信）：通信的双方可以同时发送和接收信息。</p></blockquote><p>（1）、常用编码方式：<br><img src="https://img-blog.csdnimg.cn/1a047f1d3e7c459aaa18f1f1f7c13ce4.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6LiP6L-H5bGx5rKz,size_10,color_FFFFFF,t_50,g_se,x_16#pic_center" alt="常用编码方式"></p><ul><li>不归零制：正电平代表1，负电平代表0。</li><li>归零制：正脉冲代表1，负脉冲代表0。</li><li>曼彻斯特编码；位周期中心的向上跳变代表0，位周期中心的向下跳变代表1。也可反过来定义。</li><li><p>差分曼彻斯特编码：在每一位的中心处始终都有跳变。位开始边界有跳变表0，位开始边界没有跳变表1。</p><p>（2）、基本的带通调制方法<br><img src="https://img-blog.csdnimg.cn/b7e5db4673a44cd19b97bf56fa62ca72.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6LiP6L-H5bGx5rKz,size_10,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="基本带同调制方法"></p></li><li><p>调幅（AM）：载波的振幅随基带数字信号而变化。例如，0或1分别对应于无载波或有载波输出。</p></li><li>调频（FM）：载波的频率随基带数字信号而变化。例如，0或1分别对应于频率f1或f2。</li><li><p>调相（PM）：载波的初始相位随基带数字信号而变化。例如，0或1分别对应于相位0度或180度。</p><h4 id="3-信道的极限容量"><a href="#3-信道的极限容量" class="headerlink" title="3.信道的极限容量"></a>3.信道的极限容量</h4><p>==信噪比==：信号的平均功率和噪声的平均功率之比，记为S/N<br>单位为分贝时：<br><img src="https://img-blog.csdnimg.cn/f86da21e60ef4baa82c7e0e99b4f6d58.png#pic_center" alt="在这里插入图片描述"><br>==奈氏准则==：<br>在<strong>理想</strong>低通（无噪声，带宽受限）条件下，为了避免码间串扰，极限码元传输速率为2W Baud。</p><pre><code>   公式：理想低通信道下的极限数据传输率=2W（b/s）     </code></pre></li><li><p>W为信道带宽（Hz）。</p></li></ul><p>==香农公式==：<br>信道的极限信息传输速率</p><p><img src="https://img-blog.csdnimg.cn/b368ace80d164f3f8d8368cd52f3ba15.png#pic_center" alt="在这里插入图片描述"></p><ul><li>W为信道的带宽（以Hz为单位），S为信道内所传信号的平均功率，N为信道内部的高斯噪声功率。<h2 id="3-物理层下面的传输媒体"><a href="#3-物理层下面的传输媒体" class="headerlink" title="3.物理层下面的传输媒体"></a>3.物理层下面的传输媒体</h2><h4 id="1-导引型传输媒体（有线）"><a href="#1-导引型传输媒体（有线）" class="headerlink" title="1.导引型传输媒体（有线）"></a>1.导引型传输媒体（有线）</h4></li></ul><p>==双绞线==：<br>广泛用于局域网内</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; 屏蔽双绞线STP（Shielded Twisted Pair）</span><br><span class="line">&gt; 无屏蔽双绞线UTP（Unshielded Twisted Pair）</span><br></pre></td></tr></table></figure><p>==同轴电缆==：<br>主要用在有线电视网的居民小区<br>==光缆（光纤）==：<br>远距离传输</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">（<span class="number">1</span>）传输损耗小，中继距离长，对远距离传输特别经济。</span><br><span class="line">（<span class="number">2</span>）抗雷电和电磁干扰性能好。</span><br><span class="line">（<span class="number">3</span>）无串音干扰，保密性好，不易被窃听或截取数据。</span><br><span class="line">（<span class="number">4</span>）体积小，重量轻。</span><br></pre></td></tr></table></figure><h4 id="2-非导引型传输媒体（无线）"><a href="#2-非导引型传输媒体（无线）" class="headerlink" title="2.非导引型传输媒体（无线）"></a>2.非导引型传输媒体（无线）</h4><p>移动通信</p><h2 id="4-信道复用技术"><a href="#4-信道复用技术" class="headerlink" title="4.信道复用技术"></a>4.信道复用技术</h2><h4 id="1-频分复用、时分复用和统计时分复用"><a href="#1-频分复用、时分复用和统计时分复用" class="headerlink" title="1.频分复用、时分复用和统计时分复用"></a>1.频分复用、时分复用和统计时分复用</h4><p><strong>复用器和分用器</strong>：=&gt;<br><img src="https://img-blog.csdnimg.cn/278371ce15004748a77f464ffbe6c64c.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6LiP6L-H5bGx5rKz,size_18,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="在这里插入图片描述"><br>==频分复用==<strong>FDM</strong>（Frequency Division Multiplexing）最简单，如下图（a）用户在分配到一定的频带后，在通信过程中自始至终都占用这个频带。频分复用的所有用户在同样的时间占用不同的带宽资源（这里的“带宽”是频率带宽而不是数据的发送速率）。<img src="https://img-blog.csdnimg.cn/95e80cd2e1a542ca895acd3d887d8500.png#pic_center" alt="在这里插入图片描述"><br>==时分复用==<strong>TDM</strong>（Time Division Multiplexing）是将时间划分为一段段等长的时分复用帧（TDM帧）。每一个时分复用的用户在每一个TDM帧中占用固定序号的时隙。如下图（b）。<img src="https://img-blog.csdnimg.cn/98e801f8470244239781b335f77585ef.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6LiP6L-H5bGx5rKz,size_19,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="在这里插入图片描述"><br>【—&gt;】但时分复用面临着信道资源浪费的问题：<img src="https://img-blog.csdnimg.cn/a4ae072e701740d1a9869c09b70a67a6.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6LiP6L-H5bGx5rKz,size_18,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="在这里插入图片描述"><br>于是就有了现在的==统计时分复用==<strong>STDM</strong>（Statistic TDM）是一种改进的时分复用，它能明显地提高信道的利用率。如下图的<strong>动态分配时隙</strong>，每一个STDM帧中的时隙数<strong>小于</strong>连接在集中器上的用户数。<em>各用户有了数据就随时发往集中器的输入缓存，然后集中器按顺序依次扫描输入缓存，把缓存中的输入数据放入STDM帧中。对没有数据的缓存就跳过去。当一个帧的数据放满了，就发送出去。</em><br><img src="https://img-blog.csdnimg.cn/8f11637129484167909a3d95982de61a.png#pic_center" alt="在这里插入图片描述"></p><blockquote><p>此TDM帧和STDM帧是在物理层传送的比特流中所划分的帧非数据链路层的“帧”</p><h4 id="2-波分复用和码分复用"><a href="#2-波分复用和码分复用" class="headerlink" title="2.波分复用和码分复用"></a>2.波分复用和码分复用</h4><p>==波分复用==<strong>WDM</strong>（Wavelength Division Multiplexing）就是光的频分复用，即使用一根光纤来同时传输多个频率很接近的光载波信号。随着技术发展，一根光纤上复用的光载波信号的路数越来越多，就出现了密集波分复用DWDM（Dense Wavelength Division Multiplexing）<br><img src="https://img-blog.csdnimg.cn/614527eb1a374217948f8d58e2347888.png#pic_center" alt="在这里插入图片描述"><br>==码分复用==<strong>CDM</strong>（Code Division Multiplexing），实际上，人们更常用的名词是&lt;<strong>码分多址</strong>&gt;<strong>CDMA</strong>（Code Division Multiple Access）<br>两个不同站的码片序列正交，就是向量S和T的规格化内积（inner product）都是==0==，向量S和各站码片反码的向量的内积也是==0==：<br><img src="https://img-blog.csdnimg.cn/2b2d7831e7ca4f1ca1a50b21f802d700.png#pic_center" alt="在这里插入图片描述"><br>任何一个码片向量和该码片向量自己的规格化内积都是==1==：<br><img src="https://img-blog.csdnimg.cn/a631d3950611425b87e6807f31f599af.png#pic_center" alt="在这里插入图片描述"><br>码片向量和该码片反码的向量的规格化内积值是–1。从上式可以看出，因为求和的各项都变成了–1。<br>==&gt;当两个码片向量内积的结果<br>= -1，发送0<br>=  0， 不发送<br>=  1， 发送1</p></blockquote><h2 id="5-数字传输系统"><a href="#5-数字传输系统" class="headerlink" title="5.数字传输系统"></a>5.数字传输系统</h2><p>pass</p><h2 id="6-宽带接入技术"><a href="#6-宽带接入技术" class="headerlink" title="6.宽带接入技术"></a>6.宽带接入技术</h2><h4 id="1-ADSL技术"><a href="#1-ADSL技术" class="headerlink" title="1.ADSL技术"></a>1.ADSL技术</h4><p><strong>非对称数字用户线ADSL</strong>（Asymmetric Digital Subscriber Line）</p><h4 id="2-光纤同轴混合网（HFC网）"><a href="#2-光纤同轴混合网（HFC网）" class="headerlink" title="2.光纤同轴混合网（HFC网）"></a>2.光纤同轴混合网（HFC网）</h4><h4 id="3-FTTx技术"><a href="#3-FTTx技术" class="headerlink" title="3.FTTx技术"></a>3.FTTx技术</h4><p>光纤到户FTTH（Fiber To The Home）<br>多种宽带光纤接入方式，称为FTTx，表示Fiber ToThe…。这里字母x可代表不同的光纤接入地点。</p><p>====================================本书索引<br><a href="https://blog.csdn.net/m0_51390535/article/details/121278340">计算机网络（谢希仁第八版）第一章：概述</a><br><a href="https://blog.csdn.net/m0_51390535/article/details/121593321">计算机网络（谢希仁第八版）第二章：物理层</a><br><a href="https://blog.csdn.net/m0_51390535/article/details/121734353">计算机网络（谢希仁第八版）第三章：数据链路层</a><br><a href="https://blog.csdn.net/m0_51390535/article/details/122018224">计算机网络（谢希仁第八版）第四章：网络层</a></p>]]></content>
      
      
      <categories>
          
          <category> 计算机网络 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机网络 </tag>
            
            <tag> 物理层 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>计算机网络（谢希仁第八版）第四章：网络层</title>
      <link href="/posts/6f615cb.html"/>
      <url>/posts/6f615cb.html</url>
      
        <content type="html"><![CDATA[<p>网络层协议数据单元：==分组（IP数据报）==</p><hr/><h2 id="1-网络层提供的两种服务"><a href="#1-网络层提供的两种服务" class="headerlink" title="1.网络层提供的两种服务"></a>1.网络层提供的两种服务</h2><blockquote><p>有连接，可靠的==虚电路服务==<br>无连接，尽最大努力的==数据报服务==</p></blockquote><p>TCP/IP体系的网络层提供的是数据报服务。</p><p>网络层向上只提供<strong>简单灵活</strong>的、<strong>无连接</strong>的、<strong>尽最大努力交付</strong>的<strong>数据报服务</strong>。不提供服务质量的承诺。</p><p>*OSI体系的支持者曾极力主张在网络层使用可靠传输的虚电路服务，也曾推出过网络层虚电路服务的著名标准——ITU-T的X.25建议书。但现在X.25早已成为历史了。</p><div align=center><img src="https://img-blog.csdnimg.cn/2611b147a61e4bba8351fc09f0d42304.jpg?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6LiP6L-H5bGx5rKz,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center=200*150)" width="80%" /></div> <hr/>## 2.网际协议IP网际协议IP是TCP/IP体系中两个最主要的协议之一。本章只讲IPv4。与IP协议配套使用的还有三个协议： - **地址解析协议ARP**（Address Resolution Protocol）  IP-->MAC *逆地址解析协议RARP（Reverse Address ResolutionProtocol已淘汰） - **网际控制报文协议ICMP**（Internet Control Message Protocol） - **网际组管理协议IGMP**（Internet Group Management Protocol）<div align=center><img src="https://img-blog.csdnimg.cn/84e722f6521a4531bf6aa5b69968cf78.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6LiP6L-H5bGx5rKz,size_14,color_FFFFFF,t_70,g_se,x_16#pic_center" width="50%" /></div> <h4 id="2-1-虚拟互连网络"><a href="#2-1-虚拟互连网络" class="headerlink" title="2.1.虚拟互连网络"></a>2.1.虚拟互连网络</h4><p>中间设备：</p><ol><li>物理层使用的中间设备叫做<strong>转发器</strong>（repeater）</li><li>数据链路层使用的中间设备叫做<strong>网桥或桥接器</strong>（bridge）</li><li>网络层使用的中间设备叫做<strong>路由器</strong>（router）</li><li>在网络层以上使用的中间设备叫做<strong>网关</strong>（gateway）。用网关连接两个不兼容的系统需要在高层进行协议的转换</li></ol><p>各个主机通过中间设备互连起来，并使用IP协议构成了虚拟互联网络。</p><h4 id="2-2-分类的IP地址"><a href="#2-2-分类的IP地址" class="headerlink" title="2.2.分类的IP地址"></a>2.2.分类的IP地址</h4><p>IP地址就是给互联网上的每一台主机（或路由器）的每一个接口分配一个在全世界范围内是唯一的<strong>32位</strong>的标识符。</p><p>IP地址的编址方法共经过了三个历史阶段。</p><ol><li>分类的IP地址</li><li>子网的划分</li><li>构成（构造）超网（无分类编址）</li></ol><p>分类的IP地址（两级）：</p><div align=center><img src="https://img-blog.csdnimg.cn/e3a2694a176b4ef2b20d36a6e4acfa5d.png#pic_center" width="50%" /></div> <br>**点分十进制记法**（dotted decimal notation）：32位的IP地址每8位插入一个空格（但在机器中并没有这样的空格）。为了便于书写，可用其等效的十进制数字表示，并且在这些数字之间加上一个点。<div align=center><img src="https://img-blog.csdnimg.cn/7b4621b7ad3a4c87b949ea375409ffd3.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6LiP6L-H5bGx5rKz,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" width="70%" /></div> <p>A类、B类和C类地址都是单播地址（一对一通信）<br>D类地址用于多播（一对多通信）<br>E类地址保留为以后用</p><div align=center><img src="https://img-blog.csdnimg.cn/eddc3f332fae4ea98df961abf2ccd8ad.png#pic_center" width="90%" /></div> <blockquote><p>A类地址网络号数量126（2^7-2）,全0为”<strong>本网络</strong>“，127（01111111）保留作本地软件<strong>环回测试</strong>。<br>B类地址网络号数量16383（2^14-1），减1是因为不存在全零的情况。<br>C类地址网络号数量2097151（2^21-1），减1是因为不存在全零的情况。</p></blockquote><table><tr><th>类型</th><th>范围</th></tr><tr><td>A</td><td>1.0.0.1~126.255.255.254（127作为环回测试地址）</td></tr><tr><td>B</td><td>128.0.0.1~191.255.255.254（主机号不能为全0，故从.0.0.1开始）</td></tr><tr><td>C</td><td>192.0.0.1~223.255.255.254（主机号不能为全1，故只表示到254）</td></tr></table><p>（考大题时让写代码块大多都要省略全0全1主机号的情况）</p><hr/><h2 id="3-IP地址与硬件地址"><a href="#3-IP地址与硬件地址" class="headerlink" title="3.IP地址与硬件地址"></a>3.IP地址与硬件地址</h2><p>区别:</p><blockquote><p>物理地址是数据链路层和物理层使用的地址<br> IP地址是网络层和以上各层使用的地址，是一种逻辑地址。</p></blockquote><div align=center><img width="450px" src="https://img-blog.csdnimg.cn/ac4cf6bb212d4ac8874f94a871e8d12c.png#pic_center" /></div> <p align="center"><font color="pink" size="4"><==鸽着了==></font></p>]]></content>
      
      
      <categories>
          
          <category> 计算机网络 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机网络 </tag>
            
            <tag> 网络层 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>安卓天气预报app(一)——解析Json数据、数据类封装</title>
      <link href="/posts/001.html"/>
      <url>/posts/001.html</url>
      
        <content type="html"><![CDATA[<!-- description: 文章描述swiper_index: 1 #置顶轮播图顺序，非负整数，数字越大越靠前 --><blockquote><p>📌<a href="https://blog.csdn.net/m0_51390535/article/details/125302624?spm=1001.2014.3001.5502">简易的安卓天气app(一)——解析Json数据、数据类封装</a><br>✅<a href="https://blog.csdn.net/m0_51390535/article/details/125350399?spm=1001.2014.3001.5502">简易的安卓天气app(二)——适配器、每小时数据展示</a><br>✅<a href="https://blog.csdn.net/m0_51390535/article/details/125362820?spm=1001.2014.3001.5502">简易的安卓天气app(三)——城市管理、数据库操作</a><br>✅<a href="https://blog.csdn.net/m0_51390535/article/details/125397512?spm=1001.2014.3001.5502">简易的安卓天气app(四)——搜索城市、完善页面</a></p></blockquote><h1 id="简述"><a href="#简述" class="headerlink" title="简述"></a>简述</h1><p>不罗嗦那么多没用的；；；<br>既然是简易的天气app，那么本demo就没有那麽多复杂的交互，页面跳转，只包括了针对api获取和解析数据放到app主页面，由于配置定位服务太繁琐，本次测试没有使用定位功能。<br>项目只包含一个主要activity_main.xml，两个封装的实体用来存数据<br>用到的天气api可前往官网注册账号获取：<a href="https://tianqiapi.com/">天气api</a></p><p>例如我这里注册好了我的账号，进入主页面得到下图的appid和appsecret<br><img src="https://img-blog.csdnimg.cn/deb89dde23494444bf43c31a4f82866b.png#pic_center" alt="appid">然后把这两个东西复制粘贴到下面的api中</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//里面的括号中的两个参数值换成你的，包括括号</span></span><br><span class="line">https:<span class="comment">//tianqiapi.com/api?version=v1&amp;appid=（你的appid）&amp;appsecret=（你的appsecret）</span></span><br></pre></td></tr></table></figure><p>==注意==：<br>&gt;</p><blockquote><p>慎用此接口，每天有免费使用==上限==（如果你不想充钱）<br>地址栏搜索默认是当前所在城市，若是指定城市url后面加上&amp;city=城市名，就行</p></blockquote><p>接着，访问此url结果如图，一长串的json数据<br><img src="https://img-blog.csdnimg.cn/4206ae96e1ae433ba6f966d5bac22d5a.png" alt="json数据">如果你的浏览器支持转为json格式，那么会得到更清晰的数据格式，方便后续对其进行封装，也可百度在线json格式化工具，复制原始数据进去，得到格式化jsn数据<br><img src="https://img-blog.csdnimg.cn/5118219aef8742d2a0c06e77833695f0.png" alt="json格式1">观察上图json数据，里面的嵌套关系决定了我们封装一个实体类肯定不能拿到全部信息，因为上图data，是一个json数组（JsonArray），里面包含了今天加上未来六天共七天的天气数据（JsonObject），所以data要单独封装成一个实体叫做DayWeatherBean，用来接受每天的数据。</p><h1 id="项目结构"><a href="#项目结构" class="headerlink" title="项目结构"></a>项目结构</h1><p><img src="https://img-blog.csdnimg.cn/7ca26d0558a14b31afd0bd0f3c3ed1f7.png#pic_center" alt="项目结构"></p><h1 id="api请求工具包"><a href="#api请求工具包" class="headerlink" title="api请求工具包"></a>api请求工具包</h1><p>那么既然是请求api解析数据，自然离不开HttpUrlConnection，如果学的不是HttpUrlConnection请自行根据更改。<br>首先封装一个工具包，表示根据指定地址网络请求得到数据，得到的是string字符串，实是json数据</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.net.HttpURLConnection;</span><br><span class="line"><span class="keyword">import</span> java.net.URL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">NetworkUtil</span> &#123;</span><br><span class="line">    <span class="comment">// 一天测试次数有限，慎用</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">URL_WEATHER</span> <span class="operator">=</span> <span class="string">&quot;https://tianqiapi.com/api?version=v1&amp;appid=（你的appid）&amp;appsecret=（你的appsecret）&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getWeather</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="type">HttpURLConnection</span> <span class="variable">connection</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">InputStreamReader</span> <span class="variable">inputStreamReader</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">bufferedReader</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="comment">// 连接网络</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">URL</span> <span class="variable">urL</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">URL</span>(URL_WEATHER);</span><br><span class="line">            connection = (HttpURLConnection) urL.openConnection();</span><br><span class="line">            connection.setRequestMethod(<span class="string">&quot;GET&quot;</span>);</span><br><span class="line">            connection.setConnectTimeout(<span class="number">5000</span>);</span><br><span class="line">            connection.setReadTimeout(<span class="number">5000</span>);</span><br><span class="line">            <span class="comment">// 从连接中读取数据(二进制)</span></span><br><span class="line">            <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> connection.getInputStream();</span><br><span class="line">            inputStreamReader = <span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(inputStream);</span><br><span class="line">            <span class="comment">// 二进制流送入缓冲区</span></span><br><span class="line">            bufferedReader = <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(inputStreamReader);</span><br><span class="line">            <span class="comment">// 容器</span></span><br><span class="line">            <span class="type">StringBuilder</span> <span class="variable">stringBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">            <span class="type">String</span> <span class="variable">line</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">            <span class="keyword">while</span> ((line = bufferedReader.readLine()) != <span class="literal">null</span>) &#123;</span><br><span class="line">                stringBuilder.append(line);</span><br><span class="line">            &#125;</span><br><span class="line">            result = stringBuilder.toString();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (connection != <span class="literal">null</span>) &#123;</span><br><span class="line">                connection.disconnect();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (inputStreamReader != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    inputStreamReader.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (bufferedReader != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    bufferedReader.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>既然是网络请求，注意<br>&gt;</p><blockquote><p>AndroidManifest中别忘了加<br><code>&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;</code></p></blockquote><p><img src="https://img-blog.csdnimg.cn/7b0089edd3554de2a6e80bd649413596.png#pic_center" alt="andxml"></p><h1 id="布局文件"><a href="#布局文件" class="headerlink" title="布局文件"></a>布局文件</h1><p>接着就是布局，随意，怎么好看怎么来，无非就是接受几个数据传给TextView</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:alpha</span>=<span class="string">&quot;0.8&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:background</span>=<span class="string">&quot;@mipmap/bg&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:gravity</span>=<span class="string">&quot;center_horizontal&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.MainActivity&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;郑州&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;25sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">&quot;@color/white&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_city&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/iv_weather&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;125dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;95dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:src</span>=<span class="string">&quot;@drawable/weather_yin&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_weather&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;阴转多云&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">&quot;@color/white&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;20sp&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_week&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;星期二&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">&quot;@color/white&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;16sp&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_tem&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;31°C&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">&quot;@color/white&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;100sp&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_tem_low_high&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;25°C/33°C&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">&quot;@color/white&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;20sp&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_time&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;更新时间:2022-06-15 08:22:23&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">&quot;@color/white&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;17sp&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginRight</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:alpha</span>=<span class="string">&quot;0.7&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;@drawable/blackground&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;120dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;105dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;65dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:src</span>=<span class="string">&quot;@drawable/fengli&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_win&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;南风3~4级&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textColor</span>=<span class="string">&quot;@color/white&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textSize</span>=<span class="string">&quot;16sp&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginRight</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">            <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_air&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;空气:43 | 优\n空气好，适宜外出&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textColor</span>=<span class="string">&quot;@color/white&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textSize</span>=<span class="string">&quot;18sp&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><p>效果图（上图有个阴转多云图，下方有源码，可自行了解，此次只拿数据传数据，不包括图片）<br><img src="https://img-blog.csdnimg.cn/85a041d1a2ec420b820c8312065f7ee3.png" alt="效果图"></p><h1 id="实体类"><a href="#实体类" class="headerlink" title="实体类"></a>实体类</h1><p>两个实体类<br><img src="https://img-blog.csdnimg.cn/301636c3f29848c2832ed7b602a3d1a7.png" alt="在这里插入图片描述"><br>一个WeatherBean是最上层json封装，一个是DayWeatherBean封装的data（前面已经解答过）</p><h3 id="WeatherBean"><a href="#WeatherBean" class="headerlink" title="WeatherBean"></a>WeatherBean</h3><p>没什么好说的，就下面几个属性，学爬虫的应该更了解<br><img src="https://img-blog.csdnimg.cn/df333535c12445beb4161f79b22f6b0d.png#pic_center" alt="在这里插入图片描述"><br>其他的属性String就行，挑重要信息拿，data就是··<code>List&lt;DayWeatherBean&gt;</code></p><p>此处命名不规范问题，由于使用的是Gson包封装，所以有一个实现类可用<br><code>public class WeatherBean implements Serializable</code><br>每个属性再加上序列化注解指定原始数据，就可解决，自行补充<br><img src="https://img-blog.csdnimg.cn/faf54d35eb6d4eb6baf93ed8d3838eb1.png" alt="在这里插入图片描述"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * TextView tv_city,tv_time,tv_weather,tv_week,tv_tem,tv_tem_low_high,tv_win,tv_air;7个</span></span><br><span class="line"><span class="comment"> * ImageView iv_weather;//天气图标</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WeatherBean</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String cityid;</span><br><span class="line">    <span class="keyword">private</span> String city;<span class="comment">//城市名称</span></span><br><span class="line">    <span class="keyword">private</span> String update_time;<span class="comment">//更新时间</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;DayWeatherBean&gt; data;<span class="comment">//获取今日天气，get[0]</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//toString()，get，set自行设置</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="DayWeatherBean"><a href="#DayWeatherBean" class="headerlink" title="DayWeatherBean"></a>DayWeatherBean</h3><p>接着根据api中data中的属性名选择性封装DayWeatherBean </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * TextView tv_city,tv_time,tv_weather,tv_week,tv_tem,tv_tem_low_high,tv_win,tv_air;7个</span></span><br><span class="line"><span class="comment"> * ImageView iv_weather;//天气图标</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DayWeatherBean</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String wea;<span class="comment">//天气</span></span><br><span class="line">    <span class="keyword">private</span> String wea_img;<span class="comment">//天气图标</span></span><br><span class="line">    <span class="keyword">private</span> String week;<span class="comment">//周几</span></span><br><span class="line">    <span class="keyword">private</span> String tem;<span class="comment">//温度</span></span><br><span class="line">    <span class="comment">//tv_tem_low_high=tem2+tem1拼接一起</span></span><br><span class="line">    <span class="keyword">private</span> String tem2;<span class="comment">//低温</span></span><br><span class="line">    <span class="keyword">private</span> String tem1;<span class="comment">//高温</span></span><br><span class="line">    <span class="comment">//tv_win=win+win_speed</span></span><br><span class="line">    <span class="keyword">private</span> String[] win;<span class="comment">//风力</span></span><br><span class="line">    <span class="keyword">private</span> String win_speed;<span class="comment">//风力等级</span></span><br><span class="line">    <span class="comment">//tv_air=air+air_level+air_tips拼接一起</span></span><br><span class="line">    <span class="keyword">private</span> String air;<span class="comment">//</span></span><br><span class="line">    <span class="keyword">private</span> String air_level;<span class="comment">//</span></span><br><span class="line">    <span class="keyword">private</span> String air_tips;<span class="comment">//</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//toString()，get，set自行设置</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="MainActivity"><a href="#MainActivity" class="headerlink" title="MainActivity"></a>MainActivity</h1><p>使用handler来异步处理<br>首先开辟一个子线程，拿到网页数据传给handler</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">getWeather</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 开启子线程，请求网络</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="comment">// 请求网络</span></span><br><span class="line">                <span class="type">String</span> <span class="variable">weatherJson</span> <span class="operator">=</span> NetworkUtil.getWeather();</span><br><span class="line">                <span class="comment">// 使用handler将数据传递给主线程</span></span><br><span class="line">                <span class="type">Message</span> <span class="variable">message</span> <span class="operator">=</span> Message.obtain();</span><br><span class="line">                message.what = <span class="number">0</span>;</span><br><span class="line">                message.obj = weatherJson;</span><br><span class="line">                mHandler.sendMessage(message);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).start();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>使用Gson序列化工具前别忘记添加依赖包<br><code>implementation &#39;com.google.code.gson:gson:2.8.5&#39;</code><br><img src="https://img-blog.csdnimg.cn/b58c484be7ec41bfbe0fba35d3ac0367.png#pic_center" alt="在这里插入图片描述"><br>添加代码后别忘了构建一下，右上角点一下<br><img src="https://img-blog.csdnimg.cn/15c9d1e722454264a9de1a3f116b064c.png#pic_center" alt="在这里插入图片描述"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="type">Handler</span> <span class="variable">mHandler</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Handler</span>(Looper.myLooper()) &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">handleMessage</span><span class="params">(<span class="meta">@NonNull</span> Message msg)</span> &#123;</span><br><span class="line">            <span class="built_in">super</span>.handleMessage(msg);</span><br><span class="line">            <span class="keyword">if</span> (msg.what == <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">weather</span> <span class="operator">=</span> (String) msg.obj;</span><br><span class="line">                Log.d(<span class="string">&quot;Main&quot;</span>, <span class="string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;原始数据--weather---&quot;</span> + weather);</span><br><span class="line">                <span class="keyword">if</span> (TextUtils.isEmpty(weather)) &#123;</span><br><span class="line">                    Toast.makeText(MainActivity.<span class="built_in">this</span>, <span class="string">&quot;天气数据为空！&quot;</span>, Toast.LENGTH_LONG).show();</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="type">Gson</span> <span class="variable">gson</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Gson</span>();<span class="comment">//Gson序列化工具，JsonObject也行，方法不同</span></span><br><span class="line">                <span class="type">WeatherBean</span> <span class="variable">weatherBean</span> <span class="operator">=</span> gson.fromJson(weather, WeatherBean.class);</span><br><span class="line">                <span class="keyword">if</span> (weatherBean != <span class="literal">null</span>) &#123;</span><br><span class="line">                    Log.d(<span class="string">&quot;Main&quot;</span>, <span class="string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;封装数据--weather---&quot;</span> + weatherBean.toString());</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                tvCity.setText(weatherBean.getCity());</span><br><span class="line">                tvTime.setText(weatherBean.getUpdate_time());</span><br><span class="line">                <span class="comment">/**</span></span><br><span class="line"><span class="comment">                 * 当天天气</span></span><br><span class="line"><span class="comment">                 */</span></span><br><span class="line">                dayWeather = weatherBean.getData().get(<span class="number">0</span>);</span><br><span class="line">                tvWeather.setText(dayWeather.getWea());</span><br><span class="line">                tvTem.setText(dayWeather.getTem());</span><br><span class="line">                tvTemLowHigh.setText(dayWeather.getTem2()+<span class="string">&quot;/&quot;</span>+dayWeather.getTem1());</span><br><span class="line">                tvWeek.setText(dayWeather.getWeek());</span><br><span class="line">                tvWin.setText(dayWeather.getWin()[<span class="number">0</span>]+dayWeather.getWin_speed());</span><br><span class="line">                tvAir.setText(<span class="string">&quot;空气:&quot;</span>+dayWeather.getAir()+<span class="string">&quot; | &quot;</span>+dayWeather.getAir_level()+<span class="string">&quot;\n&quot;</span>+dayWeather.getAir_tips());</span><br><span class="line">                ivWeather.setImageResource(WeatherImgUtil.getImgResOfWeather(dayWeather.getWea_img()));</span><br><span class="line">               <span class="comment">//此工具和图片源码中给出</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br></pre></td></tr></table></figure><p>查看是否获取到数据<br><img src="https://img-blog.csdnimg.cn/77f9e039eabe4cc29498596600de4b65.png" alt="在这里插入图片描述"></p><p>==源码自取==：<a href="https://gitee.com/guo-yc/weather-frocast">gitee</a></p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Android </tag>
            
            <tag> APP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>安卓天气预报app(三)——城市管理、数据库操作</title>
      <link href="/posts/003.html"/>
      <url>/posts/003.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>✅<a href="https://blog.csdn.net/m0_51390535/article/details/125302624?spm=1001.2014.3001.5502">简易的安卓天气app(一)——解析Json数据、数据类封装</a><br>✅<a href="https://blog.csdn.net/m0_51390535/article/details/125350399?spm=1001.2014.3001.5502">简易的安卓天气app(二)——适配器、每小时数据展示</a><br>📌<a href="https://blog.csdn.net/m0_51390535/article/details/125362820?spm=1001.2014.3001.5502">简易的安卓天气app(三)——城市管理、数据库操作</a><br>✅<a href="https://blog.csdn.net/m0_51390535/article/details/125397512?spm=1001.2014.3001.5502">简易的安卓天气app(四)——搜索城市、完善页面</a></p></blockquote><h1 id="需求🏷️"><a href="#需求🏷️" class="headerlink" title="需求🏷️"></a>需求🏷️</h1><p>当我们查看天气时，我们都拥有自己的手机，都知道现在的智能手机已经可以根据定位来自动查询所在位置的天气信息，这个依靠的就是手机的定位功能，此处的项目纯属练手，不会涉及定位操作，那一大堆步骤我直接放弃，所以这个功能我们可以偷鸡摸，，，不对，投机取巧从天气api接口想办法搞到。（源码见页尾✨）</p><blockquote><p>本项目用到的天气api接口<a href="https://tianqiapi.com/">天气api</a><br><code>详细操作内容见第一篇--&gt;</code>🧿<a href="https://blog.csdn.net/m0_51390535/article/details/125302624?spm=1001.2014.3001.5501">简易的安卓天气app（一）——解析Json数据</a><code>&lt;--</code></p></blockquote><p>此接口当我们默认不拼接参数，直接访问会得到当前位置的温度Json数据，这不就弥补了我们在定位方面的缺陷了吗，那么很好，当我们加上参数之后（此api根据城市查询的参数需＋<code>&amp;city=(城市名称)</code>）那么，当我们只加了参数却没有加参数值（&amp;city=）他还是会根据当前位置进行定位，简直是太妙了。<br>所以接下来就是进行安卓SQLite数据库的一些操作，把当前位置信息保存到数据库中（城市名，城市温度，更新时间）<br>待实现效果：<br><img src="https://img-blog.csdnimg.cn/fcafcd55adc74eb6b531003e1493e9e1.gif#pic_center" alt="gif"></p><p>数据库成功插入当前位置数据信息（之前测试插入过几条的测试对照用数据）：<br>位置商丘的信息成功插入，插入之后，后续要进行的操作就是实时更新数据库<br><img src="https://img-blog.csdnimg.cn/b3caa833fa254387928af6c19121b459.png" alt="mancity"></p><h1 id="涉及内容"><a href="#涉及内容" class="headerlink" title="涉及内容"></a>涉及内容</h1><ul><li>SQLite数据库操作，创建数据库，新建表，增删查改操作</li><li>适配器adapter添加点击事件</li><li>页面传值跳转<h1 id="项目结构"><a href="#项目结构" class="headerlink" title="项目结构"></a>项目结构</h1><img src="https://img-blog.csdnimg.cn/aca91ce40f824349a2d1f561f9a08502.png#pic_center" alt="3"><br>其他内容暂不涉及，本文章只包含城市管理，添加城市到数据库等的一系列操作，前面基础内容移步到页首地址<h1 id="界面设计"><a href="#界面设计" class="headerlink" title="界面设计"></a>界面设计</h1>城市管理的界面设计city_manager.xml<br><img src="https://img-blog.csdnimg.cn/ffed26d4e54947b585218a5ed1775cf5.png#pic_center" alt="city_manager"><br>city_manager.xml界面布局源码：</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:background</span>=<span class="string">&quot;@mipmap/bg&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/iv_add&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;35dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;30dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:src</span>=<span class="string">&quot;@drawable/add&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;城市管理&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_weight</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textColor</span>=<span class="string">&quot;@color/purple_200&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;20dp&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/iv_more&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;35dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;30dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginRight</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:src</span>=<span class="string">&quot;@drawable/more&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">View</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;390dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;8px&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginBottom</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:alpha</span>=<span class="string">&quot;0.6&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;@color/white&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">androidx.recyclerview.widget.RecyclerView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/city_manager&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><p>added_city.xml页面表示要展示的一个个城市数据：<br><img src="https://img-blog.csdnimg.cn/7f1380d0d3484d8b884f6593ca496b12.png#pic_center" alt="city"></p><p>源码：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;55dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:textSize</span>=<span class="string">&quot;20sp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;40dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_marginRight</span>=<span class="string">&quot;40dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:background</span>=<span class="string">&quot;@drawable/blackground&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:gravity</span>=<span class="string">&quot;center_vertical&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:paddingLeft</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;220dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/city_city&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;22dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textColor</span>=<span class="string">&quot;@color/white&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;西安&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;16°C&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;24dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textColor</span>=<span class="string">&quot;@color/white&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/city_tem&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><p>最终从数据库拿到信息呈现出的效果：<br><img src="https://img-blog.csdnimg.cn/53fa076739ea4862be407a915ab8a872.png#pic_center" alt="result"></p><h1 id="适配器AddCityAdapter"><a href="#适配器AddCityAdapter" class="headerlink" title="适配器AddCityAdapter"></a>适配器AddCityAdapter</h1><p>界面布局设计完成接下来就是适配器AddCityAdapter<br><code>public class AddCityAdapter extends RecyclerView.Adapter&lt;AddCityAdapter.AddViewHolder&gt;</code></p><p>适配器就是决定在此城市管理页面的RecyclerView中展示哪个页面，跟之前一样，前几篇文章都有篇幅概括，基本的一些操作就是，<br>添加一个构造方法，</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> Context mContext;</span><br><span class="line">   <span class="keyword">private</span> List&lt;CityBean&gt; mCityBeans;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="title function_">AddCityAdapter</span><span class="params">(Context context, List&lt;CityBean&gt; cityBeans)</span> &#123;</span><br><span class="line">       mContext = context;</span><br><span class="line">       <span class="built_in">this</span>.mCityBeans = cityBeans;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>创建一个类<code>class AddViewHolder extends RecyclerView.ViewHolder</code>来绑定控件，此时在城市管理页面要求点击某个城市，需要传值到MainActivity，并获取指定点击城市的天气信息<br>所以适配器中添加一个点击事件，首先在适配器中添加接口</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">OnItemClickListener</span> &#123;</span><br><span class="line"></span><br><span class="line">       <span class="comment">/**</span></span><br><span class="line"><span class="comment">        * 当RecyclerView某个被点击的时候回调</span></span><br><span class="line"><span class="comment">        * <span class="doctag">@param</span> view 点击item的视图</span></span><br><span class="line"><span class="comment">        * <span class="doctag">@param</span> position 点击得到的数据，参数自定义</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">       <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onItemClick</span><span class="params">(View view, <span class="type">int</span> position)</span>;</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> OnItemClickListener onItemClickListener;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setOnItemClickListener</span><span class="params">(OnItemClickListener onItemClickListener)</span> &#123;</span><br><span class="line">       <span class="built_in">this</span>.onItemClickListener = onItemClickListener;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>然后在适配器中的类<strong>AddViewHolder</strong>中绑定点击事件</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">AddViewHolder</span> <span class="keyword">extends</span> <span class="title class_">RecyclerView</span>.ViewHolder &#123;</span><br><span class="line"></span><br><span class="line">       TextView cityCity,cityTem;<span class="comment">//城市名，温度</span></span><br><span class="line"></span><br><span class="line">       <span class="keyword">public</span> <span class="title function_">AddViewHolder</span><span class="params">(<span class="meta">@NonNull</span> View itemView)</span> &#123;</span><br><span class="line">           <span class="built_in">super</span>(itemView);</span><br><span class="line">           <span class="comment">//绑定控件</span></span><br><span class="line">           cityCity=itemView.findViewById(R.id.city_city);</span><br><span class="line">           cityTem = itemView.findViewById(R.id.city_tem);</span><br><span class="line">           <span class="comment">//绑定点击事件</span></span><br><span class="line">           itemView.setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123;</span><br><span class="line">               <span class="meta">@Override</span></span><br><span class="line">               <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View view)</span> &#123;</span><br><span class="line">                   <span class="keyword">if</span> (onItemClickListener!=<span class="literal">null</span>) &#123;</span><br><span class="line">                       onItemClickListener.onItemClick(view,getLayoutPosition());</span><br><span class="line">                   &#125;</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>然后就是一如既往的重写三个方法</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@NonNull</span></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> AddViewHolder <span class="title function_">onCreateViewHolder</span><span class="params">(<span class="meta">@NonNull</span> ViewGroup parent, <span class="type">int</span> viewType)</span> &#123;</span><br><span class="line">   <span class="comment">//绑定控件，哪个页面展示在RecyclerView中，R.layout.added_city</span></span><br><span class="line">       <span class="type">View</span> <span class="variable">view</span> <span class="operator">=</span> LayoutInflater.from(mContext).inflate(R.layout.added_city, parent, <span class="literal">false</span>);</span><br><span class="line">       <span class="type">AddViewHolder</span> <span class="variable">cityViewHolder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AddViewHolder</span>(view);</span><br><span class="line">       <span class="keyword">return</span> cityViewHolder;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onBindViewHolder</span><span class="params">(<span class="meta">@NonNull</span> AddViewHolder holder, <span class="type">int</span> position)</span> &#123;</span><br><span class="line">       <span class="type">CityBean</span> <span class="variable">cityBean</span> <span class="operator">=</span> mCityBeans.get(position);</span><br><span class="line">       <span class="comment">//控件传值</span></span><br><span class="line">       holder.cityCity.setText(cityBean.getName());</span><br><span class="line">       holder.cityTem.setText(cityBean.getTem());</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getItemCount</span><span class="params">()</span> &#123;</span><br><span class="line">       <span class="keyword">return</span> (mCityBeans == <span class="literal">null</span>) ? <span class="number">0</span> : mCityBeans.size();</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>适配器AddCityAdapter源码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AddCityAdapter</span> <span class="keyword">extends</span> <span class="title class_">RecyclerView</span>.Adapter&lt;AddCityAdapter.AddViewHolder&gt;&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Context mContext;</span><br><span class="line">    <span class="keyword">private</span> List&lt;CityBean&gt; mCityBeans;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">AddCityAdapter</span><span class="params">(Context context, List&lt;CityBean&gt; cityBeans)</span> &#123;</span><br><span class="line">        mContext = context;</span><br><span class="line">        <span class="built_in">this</span>.mCityBeans = cityBeans;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@NonNull</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> AddViewHolder <span class="title function_">onCreateViewHolder</span><span class="params">(<span class="meta">@NonNull</span> ViewGroup parent, <span class="type">int</span> viewType)</span> &#123;</span><br><span class="line">        <span class="type">View</span> <span class="variable">view</span> <span class="operator">=</span> LayoutInflater.from(mContext).inflate(R.layout.added_city, parent, <span class="literal">false</span>);</span><br><span class="line">        <span class="type">AddViewHolder</span> <span class="variable">cityViewHolder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AddViewHolder</span>(view);</span><br><span class="line">        <span class="keyword">return</span> cityViewHolder;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onBindViewHolder</span><span class="params">(<span class="meta">@NonNull</span> AddViewHolder holder, <span class="type">int</span> position)</span> &#123;</span><br><span class="line">        <span class="type">CityBean</span> <span class="variable">cityBean</span> <span class="operator">=</span> mCityBeans.get(position);</span><br><span class="line"></span><br><span class="line">        holder.cityCity.setText(cityBean.getName());</span><br><span class="line">        holder.cityTem.setText(cityBean.getTem());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getItemCount</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (mCityBeans == <span class="literal">null</span>) ? <span class="number">0</span> : mCityBeans.size();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">AddViewHolder</span> <span class="keyword">extends</span> <span class="title class_">RecyclerView</span>.ViewHolder &#123;</span><br><span class="line"></span><br><span class="line">        TextView cityCity,cityTem;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">AddViewHolder</span><span class="params">(<span class="meta">@NonNull</span> View itemView)</span> &#123;</span><br><span class="line">            <span class="built_in">super</span>(itemView);</span><br><span class="line"></span><br><span class="line">            cityCity=itemView.findViewById(R.id.city_city);</span><br><span class="line">            cityTem = itemView.findViewById(R.id.city_tem);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//绑定点击事件</span></span><br><span class="line">            itemView.setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View view)</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (onItemClickListener!=<span class="literal">null</span>) &#123;</span><br><span class="line">                        onItemClickListener.onItemClick(view,getLayoutPosition());</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 点击响应事件</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">OnItemClickListener</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 当RecyclerView某个被点击的时候回调</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> view 点击item的视图</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> position 点击得到的数据</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onItemClick</span><span class="params">(View view, <span class="type">int</span> position)</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> OnItemClickListener onItemClickListener;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setOnItemClickListener</span><span class="params">(OnItemClickListener onItemClickListener)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.onItemClickListener = onItemClickListener;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="操作数据库"><a href="#操作数据库" class="headerlink" title="操作数据库"></a>操作数据库</h1><p>然后进行数据库工具的构建，要操作数据库，一般的方法得需要实体类吧，接着就是城市实体类的封装，当获取当前定位天气信息时，把此数据类保存到数据库<br>所以先构建城市实体类CityBean</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CityBean</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;<span class="comment">//城市名称</span></span><br><span class="line">    <span class="keyword">private</span> String[] area;<span class="comment">//县/区</span></span><br><span class="line">    <span class="keyword">private</span> String tem;<span class="comment">//温度</span></span><br><span class="line">    <span class="keyword">private</span> String updateTime;<span class="comment">//更新时间</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//构造方法自定义，主要看数据库操作和new时传值</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">CityBean</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">CityBean</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">CityBean</span><span class="params">(String name, String tem, String updateTime)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.tem = tem;</span><br><span class="line">        <span class="built_in">this</span>.updateTime = updateTime;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//get和set、toString注释</span></span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/a498a4b6b70248e7b9769bb4f37d3423.png" alt="db"></p><p>接着就是数据库的CityDatabaseConfig，有数据库名，表名的信息，以防操作数据库写错名称，故写在此配置下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CityDatabaseConfig</span> &#123;</span><br><span class="line">    <span class="comment">//数据库的名字</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">DATABASE_NAME</span> <span class="operator">=</span> <span class="string">&quot;cityDb&quot;</span>;</span><br><span class="line">    <span class="comment">//表名</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">TABLE_NAME</span> <span class="operator">=</span> <span class="string">&quot;city_weather&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>然后是<code>CityDbHelper</code>继承自<strong>SQLiteOpenHelper</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CityDbHelper</span> <span class="keyword">extends</span> <span class="title class_">SQLiteOpenHelper</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">CityDbHelper</span><span class="params">(Context context)</span> &#123;</span><br><span class="line">    <span class="comment">//创建数据库CityDatabaseConfig.DATABASE_NAME</span></span><br><span class="line">        <span class="built_in">super</span>(context, CityDatabaseConfig.DATABASE_NAME, <span class="literal">null</span>, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(SQLiteDatabase db)</span> &#123;</span><br><span class="line">    <span class="comment">//创建表，字段(cityName text,tem text,updateTime text)</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;create table if not exists &quot;</span>+CityDatabaseConfig.TABLE_NAME+<span class="string">&quot;(cityName text,tem text,updateTime text)&quot;</span>;</span><br><span class="line">        db.execSQL(sql);</span><br><span class="line">        Log.i(CityDatabaseConfig.DATABASE_NAME,<span class="string">&quot;created success!!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onUpgrade</span><span class="params">(SQLiteDatabase db, <span class="type">int</span> oldVersion, <span class="type">int</span> newVersion)</span> &#123;</span><br><span class="line"></span><br><span class="line">        Log.i(CityDatabaseConfig.DATABASE_NAME,<span class="string">&quot;updated success!!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>接着是数据库一些操作的工具，里面写一些能用到的方法，自行扩展即可</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DBUtils</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Context context;</span><br><span class="line">    <span class="keyword">private</span> CityDbHelper helper;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 单例模式</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> context</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">DBUtils</span><span class="params">(Context context)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.context = context;</span><br><span class="line">        helper = <span class="keyword">new</span> <span class="title class_">CityDbHelper</span>(context) &#123;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 向表中插入</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">insertData</span><span class="params">(String cityName,String tem,String updateTime)</span> &#123;</span><br><span class="line">        <span class="type">SQLiteDatabase</span> <span class="variable">db</span> <span class="operator">=</span> helper.getReadableDatabase();</span><br><span class="line">        <span class="type">ContentValues</span> <span class="variable">values</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ContentValues</span>();</span><br><span class="line"></span><br><span class="line">        values.put(<span class="string">&quot;cityName&quot;</span>, cityName);</span><br><span class="line">        values.put(<span class="string">&quot;tem&quot;</span>, tem);</span><br><span class="line">        values.put(<span class="string">&quot;updateTime&quot;</span>, updateTime);</span><br><span class="line">        <span class="type">long</span> <span class="variable">insert</span> <span class="operator">=</span> db.insert(CityDatabaseConfig.TABLE_NAME, <span class="literal">null</span>, values);</span><br><span class="line">        <span class="keyword">if</span> (insert &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//根据城市名称更新数据</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">updateByName</span><span class="params">(String cityName,String tem,String updateTime)</span>&#123;</span><br><span class="line">        <span class="type">SQLiteDatabase</span> <span class="variable">db</span> <span class="operator">=</span> helper.getReadableDatabase();</span><br><span class="line">        <span class="type">ContentValues</span> <span class="variable">values</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ContentValues</span>();</span><br><span class="line"></span><br><span class="line">        values.put(<span class="string">&quot;cityName&quot;</span>, cityName);</span><br><span class="line">        values.put(<span class="string">&quot;tem&quot;</span>, tem);</span><br><span class="line">        values.put(<span class="string">&quot;updateTime&quot;</span>, updateTime);</span><br><span class="line">        <span class="type">long</span> <span class="variable">update</span> <span class="operator">=</span> db.update(CityDatabaseConfig.TABLE_NAME,values,<span class="string">&quot;cityName=?&quot;</span>, <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;cityName&#125;);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (update&gt;<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查询全部的信息</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;CityBean&gt; <span class="title function_">getAllCity</span><span class="params">()</span> &#123;</span><br><span class="line">        List&lt;CityBean&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="type">SQLiteDatabase</span> <span class="variable">db</span> <span class="operator">=</span> helper.getReadableDatabase();</span><br><span class="line">        <span class="type">Cursor</span> <span class="variable">cursor</span> <span class="operator">=</span> db.rawQuery(<span class="string">&quot;select * from &quot;</span> + CityDatabaseConfig.TABLE_NAME, <span class="literal">null</span>);</span><br><span class="line">        <span class="keyword">if</span> (cursor != <span class="literal">null</span> &amp;&amp; cursor.getCount() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">while</span> (cursor.moveToNext()) &#123;</span><br><span class="line"></span><br><span class="line">                <span class="type">String</span> <span class="variable">cityName</span> <span class="operator">=</span> cursor.getString(<span class="number">0</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">tem</span> <span class="operator">=</span> cursor.getString(<span class="number">1</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">updateTime</span> <span class="operator">=</span> cursor.getString(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">                <span class="type">CityBean</span> <span class="variable">cityBean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CityBean</span>(cityName,tem,updateTime);</span><br><span class="line">                list.add(cityBean);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据城市名查询一条信息</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> CityBean <span class="title function_">getCityByName</span><span class="params">(String cityName)</span> &#123;</span><br><span class="line">        <span class="type">CityBean</span> <span class="variable">cityBean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CityBean</span>();</span><br><span class="line">        <span class="type">SQLiteDatabase</span> <span class="variable">db</span> <span class="operator">=</span> helper.getReadableDatabase();</span><br><span class="line">        <span class="type">Cursor</span> <span class="variable">cursor</span> <span class="operator">=</span> db.rawQuery(<span class="string">&quot;select * from &quot;</span> + CityDatabaseConfig.TABLE_NAME + <span class="string">&quot; where cityName=?&quot;</span>, <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;cityName&#125;);</span><br><span class="line">        <span class="keyword">if</span> (cursor != <span class="literal">null</span> &amp;&amp; cursor.getCount() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">while</span> (cursor.moveToFirst()) &#123;</span><br><span class="line"></span><br><span class="line">                <span class="type">String</span> <span class="variable">cityNameResult</span> <span class="operator">=</span> cursor.getString(<span class="number">0</span>);</span><br><span class="line">                cityBean.setName(cityName);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> cityBean;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据城市名删除一条数据</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> cityName</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">delCityByName</span><span class="params">(String cityName)</span>&#123;</span><br><span class="line">        <span class="type">SQLiteDatabase</span> <span class="variable">db</span> <span class="operator">=</span> helper.getReadableDatabase();</span><br><span class="line"></span><br><span class="line">        <span class="type">long</span> <span class="variable">delRow</span> <span class="operator">=</span> db.delete(CityDatabaseConfig.TABLE_NAME, <span class="string">&quot;cityName=?&quot;</span>, <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;cityName&#125;);</span><br><span class="line">        <span class="keyword">if</span> (delRow &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="跳转页面，展示数据"><a href="#跳转页面，展示数据" class="headerlink" title="跳转页面，展示数据"></a>跳转页面，展示数据</h1><p>一些基本的方法写好后就是MainActivity.java文件，用Intent跳转到城市管理界面，注意先引入数据库操作工具</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">DBUtils</span> <span class="variable">dbUtils</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DBUtils</span>(MainActivity.<span class="built_in">this</span>);</span><br></pre></td></tr></table></figure><p>设置右上角图标的点击事件，此小圆点图标绑定为<strong>ivMore</strong><br><img src="https://img-blog.csdnimg.cn/389c3e6a59894b55b698d6fa9cdccb00.png" alt="tub"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">ivMore.setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View view)</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="literal">null</span> == dbUtils.getCityByName(tvCity.getText().toString()).getName()) &#123;</span><br><span class="line">                    <span class="comment">//数据库不存在此城市就插入</span></span><br><span class="line">                    dbUtils.insertData(tvCity.getText().toString(),tvTem.getText().toString(),tvTime.getText().toString());</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">//存在就更新</span></span><br><span class="line">                    dbUtils.updateByName(tvCity.getText().toString(),tvTem.getText().toString(),tvTime.getText().toString());</span><br><span class="line"><span class="comment">//                dbUtils.insertData(&quot;北京&quot;,&quot;30°C&quot;,&quot;2022-06-19 21:23:35&quot;);测试用</span></span><br><span class="line"><span class="comment">//                dbUtils.delCityByName(&quot;商丘&quot;);测试用</span></span><br><span class="line">                    List&lt;CityBean&gt; list = dbUtils.getAllCity();</span><br><span class="line">                    Log.d(<span class="string">&quot;getAllCity&quot;</span>, <span class="string">&quot;allList&lt;CityBean&gt;&gt;&gt;&gt;》》》&quot;</span> + list.toString());</span><br><span class="line"></span><br><span class="line">                    ToastUtil.showShortToast(MainActivity.<span class="built_in">this</span>, <span class="string">&quot;当前位置:&quot;</span> + tvCity.getText());</span><br><span class="line">                    <span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(MainActivity.<span class="built_in">this</span>, CityManagerActivity.class);</span><br><span class="line">                    Log.d(<span class="string">&quot;getNowCity&quot;</span>, <span class="string">&quot;nowCity&lt;CityBean&gt;&gt;&gt;&gt;》》》&quot;</span> + tvCity.getText());</span><br><span class="line"><span class="comment">//                要求跳转页面传值回来，requestCode：200;</span></span><br><span class="line">                    startActivityForResult(intent, <span class="number">200</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure><p>跳转到城市管理页面，添加activity.java文件，命名<strong>CityManagerActivity</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CityManagerActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> AddCityAdapter addCityAdapter;<span class="comment">//适配器</span></span><br><span class="line">    <span class="keyword">private</span> RecyclerView rvAddedCity;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> List&lt;CityBean&gt; cityDbBeanList;</span><br><span class="line">    DBUtils dbUtils= <span class="keyword">new</span> <span class="title class_">DBUtils</span>(CityManagerActivity.<span class="built_in">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.city_manager);</span><br><span class="line"></span><br><span class="line">        initView();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initView</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">        rvAddedCity = findViewById(R.id.city_manager);</span><br><span class="line"></span><br><span class="line">        cityDbBeanList = dbUtils.getAllCity();</span><br><span class="line">        Log.d(<span class="string">&quot;cityList&quot;</span>,<span class="string">&quot;&gt;&gt;&gt;&gt;&gt;数据库中的数据》》》》》》&quot;</span>+cityDbBeanList);</span><br><span class="line">        addCityAdapter = <span class="keyword">new</span> <span class="title class_">AddCityAdapter</span>(CityManagerActivity.<span class="built_in">this</span>,cityDbBeanList);</span><br><span class="line">        rvAddedCity.setAdapter(addCityAdapter);</span><br><span class="line">        <span class="type">LinearLayoutManager</span> <span class="variable">layoutManager</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">LinearLayoutManager</span>(<span class="built_in">this</span>, LinearLayoutManager.VERTICAL, <span class="literal">false</span>);</span><br><span class="line">        rvAddedCity.setLayoutManager(layoutManager);</span><br><span class="line"><span class="comment">//设置点击事件</span></span><br><span class="line">        addCityAdapter.setOnItemClickListener(<span class="keyword">new</span> <span class="title class_">AddCityAdapter</span>.OnItemClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onItemClick</span><span class="params">(View view, <span class="type">int</span> position)</span> &#123;</span><br><span class="line"><span class="comment">//                ToastUtil.showShotToast(CityManagerActivity.this, cityDbBeanList.get(position).getName());</span></span><br><span class="line">                <span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(CityManagerActivity.<span class="built_in">this</span>,MainActivity.class);</span><br><span class="line">                intent.putExtra(<span class="string">&quot;selectedCity&quot;</span>,cityDbBeanList.get(position).getName());</span><br><span class="line"><span class="comment">//返回MainActivity页面并传值setResult(200,intent);设置resultCode：200;</span></span><br><span class="line">                setResult(<span class="number">200</span>,intent);</span><br><span class="line">                finish();</span><br><span class="line"></span><br><span class="line"><span class="comment">//                ToastUtil.showShotToast(CityManagerActivity.this,&quot;finish&quot;);</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后既然是要求页面返回传值，MainActivity就要重写方法<code>onActivityResult</code>接受传来的值</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onActivityResult</span><span class="params">(<span class="type">int</span> requestCode, <span class="type">int</span> resultCode, <span class="meta">@Nullable</span> Intent data)</span> &#123;</span><br><span class="line">       <span class="built_in">super</span>.onActivityResult(requestCode, resultCode, data);</span><br><span class="line">       <span class="keyword">if</span> (requestCode == <span class="number">200</span> &amp;&amp; resultCode == <span class="number">200</span>) &#123;</span><br><span class="line">       <span class="comment">//getString拿到传来的值</span></span><br><span class="line">           <span class="type">String</span> <span class="variable">dt</span> <span class="operator">=</span> data.getExtras().getString(<span class="string">&quot;selectedCity&quot;</span>);</span><br><span class="line">           tvCity.setText(dt);</span><br><span class="line">           nowCity=dt;</span><br><span class="line">           <span class="comment">//重新从api根据传来的城市名称获取天气</span></span><br><span class="line">           getWeather(nowCity);</span><br><span class="line">           ToastUtil.showLongToast(<span class="built_in">this</span>,dt+<span class="string">&quot;天气更新😘~&quot;</span>);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>自此一部分功能就实现了，跳转城市管理页面，展示城市，指定城市展示天气信息，</p><blockquote><p>数据库操作实现了：</p><ol><li>拿到数据库所有城市信息、</li><li>插入一条数据、</li><li>根据城市名称更新数据、</li><li>删除一条数据待完成，，自行拓展，只要工具类删除方法写对，无非就是添加个事件调用删除方法</li></ol></blockquote><p>更精细化的搜索城市，主动根据搜索到的城市添加城市到数据库，后篇文章会逐渐完善，此篇文章主要是数据库的一些操作和适配器添加点击事件，订阅此栏可同步获取项目搭建过程😘😘</p><p>==源码地址==：<a href="https://gitee.com/guo-yc/weather-forcast3">Gitee</a></p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Android </tag>
            
            <tag> APP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>安卓天气预报app(二)——适配器、每小时数据展示</title>
      <link href="/posts/002.html"/>
      <url>/posts/002.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>✅<a href="https://blog.csdn.net/m0_51390535/article/details/125302624?spm=1001.2014.3001.5502">简易的安卓天气app(一)——解析Json数据、数据类封装</a><br>📌<a href="https://blog.csdn.net/m0_51390535/article/details/125350399?spm=1001.2014.3001.5502">简易的安卓天气app(二)——适配器、每小时数据展示</a><br>✅<a href="https://blog.csdn.net/m0_51390535/article/details/125362820?spm=1001.2014.3001.5502">简易的安卓天气app(三)——城市管理、数据库操作</a><br>✅<a href="https://blog.csdn.net/m0_51390535/article/details/125397512?spm=1001.2014.3001.5502">简易的安卓天气app(四)——搜索城市、完善页面</a></p></blockquote><h1 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h1><p>拒绝画饼，先讲需求，项目结构，整体思路，第一章我们只是封装了两个数据类<strong>WeatherBean</strong>和<strong>DayWeatherBean</strong>(此类存的是下图的data数据，是个JsonArray，里面包了JsonObject，7个表示7天，由于只需拿到当天数据，所以第0项就是当天详细天气)，用来存放城市的当天天气，如果我们想要展示更精美的页面呢，或者说是展示更多的数据，比如，我们这里用<strong>RecyclerView</strong>展示<strong>一天中每个小时的天气</strong>，实现效果（若是想从当前时刻开始，获取小时温度，可自行实现，源码见页尾）<br><img src="https://img-blog.csdnimg.cn/b206a7486dc14e92ba1dac95905a8678.gif#pic_center" alt="0"></p><h1 id="涉及内容"><a href="#涉及内容" class="headerlink" title="涉及内容"></a>涉及内容</h1><ul><li>获取网络数据</li><li>数据实体类的封装</li><li>异步获取网络数据</li><li>Gson工具类解析Json</li><li>界面设计RecyclerView</li><li>适配器adatper</li></ul><h1 id="项目结构"><a href="#项目结构" class="headerlink" title="项目结构"></a>项目结构</h1><p><img src="https://img-blog.csdnimg.cn/aa45b625a5454d309733372b67e9efac.png#pic_center" alt="结构"></p><h1 id="界面设计"><a href="#界面设计" class="headerlink" title="界面设计"></a>界面设计</h1><p>既然用到了RecyclerView，那么就离不开adapter，RecyclerView负责准备一个框框，adapter负责把什么数据传到框内，顾名思义适配器<br>详细讲解C一下，第一篇就是，讲的非常全面，附加地址<a href="https://blog.csdn.net/huweiliyi/article/details/105779329?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522165555298516782388035800%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=165555298516782388035800&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-1-105779329-null-null.142%5Ev17%5Econtrol,157%5Ev15%5Enew_3&amp;utm_term=RecyclerView&amp;spm=1018.2226.3001.4187">Android RecyclerView最全使用详解</a><br>布局效果<br><img src="https://img-blog.csdnimg.cn/53e6d0a745bf404eb288034eae75a453.png#pic_center" alt="4">需要添加的RecyclerView</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_marginRight</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;100dp&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">androidx.recyclerview.widget.RecyclerView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/rlv_hour_weather&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;@drawable/blackground&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:alpha</span>=<span class="string">&quot;0.75&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><p>id自定义名字，主要时在MainActivity里新增private RecyclerView rlvHourWeather;并findByView注册拿到之后就可以添加适配器了，想要哪个小页面传到这个RecyclerView中，，<br>每小时天气小界面：<br><img src="https://img-blog.csdnimg.cn/7c62edf1ad634674b6b43db3c06deefb.png#pic_center" alt="7"></p><p><img src="https://img-blog.csdnimg.cn/8e17ef01125440e89339bb8c66205398.png#pic_center" alt="6"></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;60dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;100dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:gravity</span>=<span class="string">&quot;center_horizontal&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:background</span>=<span class="string">&quot;@mipmap/bg&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_hours&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;8:00&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">&quot;@color/white&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;18sp&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/iv_weather&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;45dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;45dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:src</span>=<span class="string">&quot;@drawable/weather_yin&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_tem&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">&quot;@color/white&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;19sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">tools:text</span>=<span class="string">&quot;31&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="网络Json数据解析"><a href="#网络Json数据解析" class="headerlink" title="网络Json数据解析"></a>网络Json数据解析</h1><p>第一篇我们已经从天气api接口拿到了json并成功解析，还封装了两个实体类<br>下面四从api拿到的数据，里面的json数据格式化之后的形式，首先为了下面的讲解代码流畅性，这次先从解析此api接口的json数据入手<br><img src="https://img-blog.csdnimg.cn/c9802c3c42444b64b962dd41f98a9f55.png" alt="1">首先百度前往一个在线Json解析网站<br><a href="https://www.json.cn/">https://www.json.cn/</a><br>或者是在Idea里新建个json后缀的文件，复制粘贴进去，格式化后就得到一层一层封装起来的json数据<br>或者前往客户端Android Studio寻找一个插件如下图第一个GsonFormat，详细用法自行C一下</p><p><img src="https://img-blog.csdnimg.cn/46d93107fc504f80860bcd3c3dc3520c.png" alt="在这里插入图片描述">这里讲解就去了在线Json解析网站<br><a href="https://www.json.cn/">https://www.json.cn/</a><br>复制粘贴进去Json数据，转义和格式化后得到，<code>ps（自用的火狐浏览器挺好的，自带Json转换功能）</code><br><img src="https://img-blog.csdnimg.cn/1448bc05cd1843eb9288e3acb2cffaf8.png#pic_center" alt="在这里插入图片描述">第一篇文章已经写明，用到了<strong>第三方库Google的Gson工具</strong>，自动封装，两行代码完事，使用详情见第一篇文章，需要导包<br><img src="https://img-blog.csdnimg.cn/0fbb1b0730134f69bf60db0f7c994e38.png" alt="3"><br>想仔细学习，自己用JsonObject，JsonArray封装的，这篇文章不会讲太多，后面的文章会用到仔细封装，<code>ps|小窍门（观察&quot;[]&quot;和&quot;&#123;&#125;&quot;你就会发现规律）</code><br>我们要得到每小时的数据，就要找一个对象，里面封装的是每小时的天气，就是说data数据0下标当天天气里还有一个对象，包了每个小时共24小时的详细数据，下面图片是解析</p><p><img src="https://img-blog.csdnimg.cn/f45808fa1faa43c4a7261e17916e2050.png#pic_center" alt="4">所以，从此hours数据的结构得知有需要封装一个数据类，还是包在当日天气DayWeatherBean下的一个List。</p><h1 id="每小时数据实体类封装"><a href="#每小时数据实体类封装" class="headerlink" title="每小时数据实体类封装"></a>每小时数据实体类封装</h1><p>此处这个数据类就叫做HoursWearBean，那么先修改当日天气DayWeatherBean，添加一个<br><code>private List&lt;HoursWeatherBean&gt; hoursWeatherBeanList;</code>属性，由于Gson会根据Json数据的属性名进行封装，所以就需要实现一个序列化接口<code>implements Serializable</code>，并添加注解<br><img src="https://img-blog.csdnimg.cn/429e13e02e17461faeb9de4545bc1abc.png" alt="5"><br>这样变量名就可以随便命名了<br>若是不想实现，就老老实实用<code>private List&lt;HoursWeatherBean&gt; hours;</code>，里面的变量名用hours命名之后就会发现可能报错，嘿嘿，每个小时数据里也有个hours<br>防止出错，属性可以都用一下注解，然后Get、Set修改一下，<br>接着就是每小时详细数据类的封装<br>HoursWeatherBean：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.google.gson.annotations.SerializedName;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HoursWeatherBean</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">    <span class="meta">@SerializedName(&quot;hours&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String hours;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SerializedName(&quot;wea_img&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String weaImg;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SerializedName(&quot;tem&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String tem;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getHours</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> hours;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setHours</span><span class="params">(String hours)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.hours = hours;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getWeaImg</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> weaImg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setWeaImg</span><span class="params">(String weaImg)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.weaImg = weaImg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getTem</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> tem;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setTem</span><span class="params">(String tem)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.tem = tem;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;HoursWeatherBean&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;hours=&#x27;&quot;</span> + hours + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, weaImg=&#x27;&quot;</span> + weaImg + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, tem=&#x27;&quot;</span> + tem + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="适配器HourWeatherAdapter"><a href="#适配器HourWeatherAdapter" class="headerlink" title="适配器HourWeatherAdapter"></a>适配器HourWeatherAdapter</h1><ol><li>继承自RecyclerView.Adapter，构造HourWeatherAdapter</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> Context mContext;</span><br><span class="line"><span class="keyword">private</span> List&lt;HoursWeatherBean&gt; mHoursWeatherBeans;<span class="comment">//写Activity时传进来的List，需要展示的数据集合</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">HourWeatherAdapter</span><span class="params">(Context context, List&lt;HoursWeatherBean&gt; hoursWeatherBeans)</span> &#123;</span><br><span class="line">    mContext = context;</span><br><span class="line">    <span class="built_in">this</span>.mHoursWeatherBeans = hoursWeatherBeans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>新建class类<strong>HourViewHolder</strong></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">HourViewHolder</span> <span class="keyword">extends</span> <span class="title class_">RecyclerView</span>.ViewHolder &#123;</span><br><span class="line"></span><br><span class="line">    TextView tvHours, tvTem;</span><br><span class="line">    ImageView ivWeather;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">HourViewHolder</span><span class="params">(<span class="meta">@NonNull</span> View itemView)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(itemView);</span><br><span class="line">        <span class="comment">//绑定小页面的组件</span></span><br><span class="line">        tvHours = itemView.findViewById(R.id.tv_hours);</span><br><span class="line">        tvTem = itemView.findViewById(R.id.tv_tem);</span><br><span class="line">        ivWeather = itemView.findViewById(R.id.iv_weather);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/e313fe8d4dd54dc2a8490171f6cfb8d5.png" alt="8"></p><ol><li>然后重写三个方法</li></ol><p>点击错误提示，快速重写三个方法</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@NonNull</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> HourViewHolder <span class="title function_">onCreateViewHolder</span><span class="params">(<span class="meta">@NonNull</span> ViewGroup parent, <span class="type">int</span> viewType)</span> &#123;</span><br><span class="line"><span class="comment">//绑定View，每小时数据的小页面</span></span><br><span class="line">    <span class="type">View</span> <span class="variable">view</span> <span class="operator">=</span> LayoutInflater.from(mContext).inflate(R.layout.hour_item_layout, parent, <span class="literal">false</span>);</span><br><span class="line">    <span class="type">HourViewHolder</span> <span class="variable">hourViewHolder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HourViewHolder</span>(view);</span><br><span class="line">    <span class="keyword">return</span> hourViewHolder;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onBindViewHolder</span><span class="params">(<span class="meta">@NonNull</span> HourViewHolder holder, <span class="type">int</span> position)</span> &#123;</span><br><span class="line">    <span class="type">HoursWeatherBean</span> <span class="variable">hoursweatherBean</span> <span class="operator">=</span> mHoursWeatherBeans.get(position);</span><br><span class="line">    <span class="comment">//根据位置position传值</span></span><br><span class="line">    holder.tvTem.setText(hoursweatherBean.getTem()+<span class="string">&quot;℃&quot;</span>);</span><br><span class="line">    holder.tvHours.setText(hoursweatherBean.getHours().substring(<span class="number">0</span>,<span class="number">2</span>)+<span class="string">&quot;:00&quot;</span>);</span><br><span class="line">    holder.ivWeather.setImageResource(WeatherImgUtil.getImgResOfWeather(hoursweatherBean.getWeaImg()));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getItemCount</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (mHoursWeatherBeans == <span class="literal">null</span>) ? <span class="number">0</span> : mHoursWeatherBeans.size();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="MainActivity-java"><a href="#MainActivity-java" class="headerlink" title="MainActivity.java"></a>MainActivity.java</h1><p>接着就是拿到Json数据，封装称为数据类，我代码中直接Gson封装成WeatherBean，里面封装有List<DayWeatherBean>，而DayWeatherBean中又有List<HoursWeatherBean>，一层一层包着，<br>当数据异步封装好后，<br>添加属性</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> HourWeatherAdapter mHourAdapter;<span class="comment">//适配器</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> RecyclerView rlvHourWeather;<span class="comment">//RecyclerView </span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 每小时温度</span></span><br><span class="line"><span class="comment"> * dayWeather.getHoursWeatherBeanList()==&gt;24小时数据List</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">mHourAdapter = <span class="keyword">new</span> <span class="title class_">HourWeatherAdapter</span>(<span class="built_in">this</span>, dayWeather.getHoursWeatherBeanList());</span><br><span class="line">rlvHourWeather.setAdapter(mHourAdapter);</span><br><span class="line"><span class="comment">//数据水平布局</span></span><br><span class="line"><span class="type">LinearLayoutManager</span> <span class="variable">layoutManager</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">LinearLayoutManager</span>(<span class="built_in">this</span>, LinearLayoutManager.HORIZONTAL, <span class="literal">false</span>);</span><br><span class="line">rlvHourWeather.setLayoutManager(layoutManager);</span><br></pre></td></tr></table></figure><p>到此处就能完美展示每小时数据了，步骤在目录中，就是先设计界面，封装数据类，适配器，activity。代码行数有点小多，末尾附带源码<br>==源码地址==：</p><ul><li>gitee：<a href="https://gitee.com/guo-yc/weather-forcast2">WeatherForcast2</a></li><li>阿里云盘：<a href="https://www.aliyundrive.com/s/YT4GNZ8ipsY">WeatherForcast2</a>提取码：a82t</li></ul>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Android </tag>
            
            <tag> APP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>安卓天气预报app(四)——搜索城市、完善页面</title>
      <link href="/posts/004.html"/>
      <url>/posts/004.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>✅<a href="https://blog.csdn.net/m0_51390535/article/details/125302624?spm=1001.2014.3001.5502">简易的安卓天气app(一)——解析Json数据、数据类封装</a><br>✅<a href="https://blog.csdn.net/m0_51390535/article/details/125350399?spm=1001.2014.3001.5502">简易的安卓天气app(二)——适配器、每小时数据展示</a><br>✅<a href="https://blog.csdn.net/m0_51390535/article/details/125362820?spm=1001.2014.3001.5502">简易的安卓天气app(三)——城市管理、数据库操作</a><br>📌<a href="https://blog.csdn.net/m0_51390535/article/details/125397512?spm=1001.2014.3001.5502">简易的安卓天气app(四)——搜索城市、完善页面</a></p></blockquote><h1 id="需求🏷️"><a href="#需求🏷️" class="headerlink" title="需求🏷️"></a>需求🏷️</h1><p>前三篇重要的功能已经实现的差不多了，完成了api获取数据，封装数据，展示数据，和一些数据库操作，接着就是按照自己的意愿，搜索城市，查看此城市天气，并决定将此城市加入数据库操作，方法是尽可能地简化的，本次项目共涉及三个页面之间的跳转，逻辑清晰，条理明朗，后续更多复杂化操作，和更多重复性操作有待探索，本质上都是已有代码的延申。<br>先获取到全国各个城市的信息，展示在搜索城市页面，方便查找。<br>实现步骤：</p><ol><li>AutoCompleteTextView输入提示文本框</li><li>实现读取全部城市展示</li><li>搜索框搜索指定城市</li></ol><p>实现效果：<br><img src="https://img-blog.csdnimg.cn/1daeeee9ec194ef8bc751f68fdfc5b8a.gif#pic_center" alt="gif"></p><h1 id="涉及内容"><a href="#涉及内容" class="headerlink" title="涉及内容"></a>涉及内容</h1><ul><li>AutoCompleteTextView输入提示文本框</li><li>文件读取，Json数据封装，RecyclerView数据展示</li><li>根据城市名称刷新天气</li></ul><h1 id="项目结构"><a href="#项目结构" class="headerlink" title="项目结构"></a>项目结构</h1><p><img src="https://img-blog.csdnimg.cn/ba7f393616774876bfecf8394e4a7cdd.png#pic_center" alt="2">此文为项目开发第四篇文章，故前面文章已经讲完一部分内容，想了解详细步骤移步页首，每一篇文章都已经给出独立源码，可自行根据需要模拟；；</p><h1 id="界面设计"><a href="#界面设计" class="headerlink" title="界面设计"></a>界面设计</h1><p>搜索页面设计：<br><img src="https://img-blog.csdnimg.cn/2d3bd218d46a424bbc488527b9d79ed3.png#pic_center" alt="4">大概就是三层的线性布局：<br>第一层TextView接受主页面传进来的当前天气的城市名称。<br>第二层就是一个搜索框，使用到的是AutoCompleteTextView，带有提示信息的输入框，EditView也可以，右边搜索图标设置点击监听事件。<br>第三层就是一个RecyclerView展示全部城市名称，也可以设置点击事件监听，或者输入框输入，此处作为提示出现，都是可行方案</p><p>搜索城市页面输入框代码：<br>输入框AutoCompleteTextView此次用到的属性：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">android:completionThreshold=&quot;1&quot; //输入一个字符就给出提示</span><br><span class="line">android:dropDownHorizontalOffset：//提示菜单与文本起始的水平间距</span><br><span class="line">android:dropDownHeight：//设置提示框的高度，太小可能会遮盖部分提示，不过可以上下滚动显示</span><br><span class="line">android:dropDownWidth：//设置提示框的宽度，太小可能会遮盖部分提示</span><br><span class="line">android:imeOptions=&quot;actionSearch&quot; //键盘点击搜索事件</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">       <span class="attr">android:layout_width</span>=<span class="string">&quot;380dp&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">android:layout_height</span>=<span class="string">&quot;40dp&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">android:gravity</span>=<span class="string">&quot;center_vertical&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">android:background</span>=<span class="string">&quot;@drawable/blackground&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">           <span class="attr">android:layout_width</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">           <span class="attr">android:layout_height</span>=<span class="string">&quot;30dp&quot;</span></span></span><br><span class="line"><span class="tag">           <span class="attr">android:layout_marginRight</span>=<span class="string">&quot;12dp&quot;</span></span></span><br><span class="line"><span class="tag">           <span class="attr">android:layout_weight</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">           <span class="attr">android:gravity</span>=<span class="string">&quot;center_vertical&quot;</span></span></span><br><span class="line"><span class="tag">           <span class="attr">android:paddingLeft</span>=<span class="string">&quot;12dp&quot;</span></span></span><br><span class="line"><span class="tag">           <span class="attr">android:paddingRight</span>=<span class="string">&quot;12dp&quot;</span>&gt;</span></span><br><span class="line">           <span class="comment">&lt;!--输入框--&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">AutoCompleteTextView</span></span></span><br><span class="line"><span class="tag">               <span class="attr">android:id</span>=<span class="string">&quot;@+id/edit_query&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">android:layout_weight</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">android:background</span>=<span class="string">&quot;@null&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">android:completionThreshold</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">android:dropDownHorizontalOffset</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">android:dropDownWidth</span>=<span class="string">&quot;200dp&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">android:hint</span>=<span class="string">&quot;请输入城市名称&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">android:imeOptions</span>=<span class="string">&quot;actionSearch&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">android:paddingLeft</span>=<span class="string">&quot;8dp&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">android:paddingRight</span>=<span class="string">&quot;4dp&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">android:textColor</span>=<span class="string">&quot;@color/white&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">android:singleLine</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">android:textSize</span>=<span class="string">&quot;18sp&quot;</span> /&gt;</span></span><br><span class="line">           <span class="comment">&lt;!--搜索图标--&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">               <span class="attr">android:layout_width</span>=<span class="string">&quot;26dp&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">android:layout_height</span>=<span class="string">&quot;26dp&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">android:id</span>=<span class="string">&quot;@+id/iv_search&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">android:src</span>=<span class="string">&quot;@mipmap/icon_search&quot;</span> /&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><p>输入城市显示提示文本：<br><img src="https://img-blog.csdnimg.cn/b6ced96ab0884a2ca50f0a0685e8d9cb.png#pic_center" alt="5"></p><h1 id="省、城市数据类封装"><a href="#省、城市数据类封装" class="headerlink" title="省、城市数据类封装"></a>省、城市数据类封装</h1><p>既然需求中需要输入一个字就给出相关城市提示信息，那么就要有全部城市数据，才能以此为根据提示城市名称，由于获取全国全部城市的API太难找，而且免费版的还有使用上限，所以此处直接根据文件读取，并封装。前几篇文章由于网络请求api封装用到的是Gson第三方工具，也提到了使用JsonObject等封装，所以此文会使用JsonArray，JsonObject来进行Json数据封装。<br>给出的City.txt文件放在main文件夹下的assets文件夹(res同级)下<img src="https://img-blog.csdnimg.cn/8f5ce60f799e4b57870edc23d49bcb69.png#pic_center" alt="6">里面给出的就是全国省份，各省下辖市，以及市下的区和县。<br>例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">[&#123;</span><br><span class="line"><span class="string">&quot;pname&quot;</span>: <span class="string">&quot;北京市&quot;</span>,</span><br><span class="line"><span class="string">&quot;city&quot;</span>: [&#123;</span><br><span class="line"><span class="string">&quot;name&quot;</span>: <span class="string">&quot;北京市&quot;</span>,</span><br><span class="line"><span class="string">&quot;area&quot;</span>: [</span><br><span class="line"><span class="string">&quot;东城区&quot;</span>,</span><br><span class="line"><span class="string">&quot;西城区&quot;</span>,</span><br><span class="line">.........</span><br><span class="line">]</span><br><span class="line">&#125;]</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line"><span class="string">&quot;pname&quot;</span>: <span class="string">&quot;天津市&quot;</span>,</span><br><span class="line"><span class="string">&quot;city&quot;</span>: [&#123;</span><br><span class="line"><span class="string">&quot;name&quot;</span>: <span class="string">&quot;天津市&quot;</span>,</span><br><span class="line"><span class="string">&quot;area&quot;</span>: [</span><br><span class="line"><span class="string">&quot;和平区&quot;</span>,</span><br><span class="line"><span class="string">&quot;河东区&quot;</span>,</span><br><span class="line">.........</span><br><span class="line">]</span><br><span class="line">&#125;]</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line"><span class="string">&quot;pname&quot;</span>: <span class="string">&quot;河北省&quot;</span>,</span><br><span class="line"><span class="string">&quot;city&quot;</span>: [&#123;</span><br><span class="line"><span class="string">&quot;name&quot;</span>: <span class="string">&quot;石家庄市&quot;</span>,</span><br><span class="line"><span class="string">&quot;area&quot;</span>: [</span><br><span class="line"><span class="string">&quot;长安区&quot;</span>,</span><br><span class="line"><span class="string">&quot;桥西区&quot;</span>,</span><br><span class="line">.........</span><br><span class="line">]</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line"><span class="string">&quot;name&quot;</span>: <span class="string">&quot;唐山市&quot;</span>,</span><br><span class="line"><span class="string">&quot;area&quot;</span>: [</span><br><span class="line"><span class="string">&quot;路北区&quot;</span>,</span><br><span class="line"><span class="string">&quot;路南区&quot;</span>,</span><br><span class="line">.........</span><br><span class="line">]</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line"><span class="string">&quot;name&quot;</span>: <span class="string">&quot;秦皇岛市&quot;</span>,</span><br><span class="line"><span class="string">&quot;area&quot;</span>: [</span><br><span class="line"><span class="string">&quot;海港区&quot;</span>,</span><br><span class="line"><span class="string">&quot;山海关区&quot;</span>,</span><br><span class="line">.........</span><br><span class="line">]</span><br><span class="line">&#125;,</span><br><span class="line">.........</span><br></pre></td></tr></table></figure><blockquote><p>前往下面地址自取(永久有效):<br>1.百度网盘：<a href="https://pan.baidu.com/s/1y8Gy4YDKTPZGJ05mY2ShVw?pwd=mnmp">City.txt</a></p><ul><li>提取码：mnmp</li></ul><p>2.阿里云盘：<a href="https://www.aliyundrive.com/s/2UkVwXQuw5u">City.txt</a></p><ul><li>提取码:<strong>su08</strong></li></ul></blockquote><p>前往<a href="https://www.json.cn/">json在线解析网站</a>观察此文件结构</p><ol><li>先观察省，此处就以北京和天津为例，前面文章也提到了观察法，先是一个中括号”[“括住了全部省份，每个省份都是一个Object对象(大括号”{“阔了起来)。</li><li>再观察市，每个省里面的city属性名表示此省下辖的市，也是”[“包裹起来，表示是个数组，里面包含了省下全部市的信息(包括name市名称，area数组：区/县)，这里就解析到各个城市，因为套法一样。<br><img src="https://img-blog.csdnimg.cn/cde53d3528ff4c8e8487ee40dec07d23.png#pic_center" alt="6">接着就是封装（连带着省份也一起封装吧），需要两个数据类，因为只封装到各个省下的城市。<br><img src="https://img-blog.csdnimg.cn/b0b4a12d7a9f420eabe6f3d5b9aaa989.png" alt="7"><br>ProvinceBean封装省份名称pname和市city，市是集合List</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProvinceBean</span> &#123;<span class="comment">//省</span></span><br><span class="line">    <span class="keyword">private</span> String pname;</span><br><span class="line">    <span class="keyword">private</span> List&lt;CityBean&gt; city;</span><br><span class="line"><span class="comment">//set、get、toString、构造。。。。。。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>CityBean封装市名称name和区/县area，县是数组String[]</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CityBean</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String[] area;<span class="comment">//县/区</span></span><br><span class="line">    <span class="keyword">private</span> String tem;<span class="comment">//方便数据库操作</span></span><br><span class="line">    <span class="keyword">private</span> String updateTime;<span class="comment">//方便数据库操作</span></span><br><span class="line">    <span class="comment">//set、get、toString、构造。。。。。。</span></span><br></pre></td></tr></table></figure><h1 id="Json数据解析"><a href="#Json数据解析" class="headerlink" title="Json数据解析"></a>Json数据解析</h1><p>接着就是从文件City.txt读取信息<br>下面是读取方法</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> getResources().getAssets().open(<span class="string">&quot;City.txt&quot;</span>);</span><br><span class="line"><span class="type">BufferedReader</span> <span class="variable">bufferedReader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(inputStream));</span><br><span class="line"><span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line"><span class="type">String</span> <span class="variable">lines</span> <span class="operator">=</span> bufferedReader.readLine();</span><br><span class="line"><span class="keyword">while</span> (lines != <span class="literal">null</span>) &#123;</span><br><span class="line">sb.append(lines);</span><br><span class="line">lines = bufferedReader.readLine();</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">String</span> <span class="variable">resultCity</span> <span class="operator">=</span> sb.toString();</span><br><span class="line">Log.d(<span class="string">&quot;SelectCity&quot;</span>, <span class="string">&quot;resultCity&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&quot;</span> + resultCity);</span><br></pre></td></tr></table></figure><p>控制台显示(原txt有空格和换行，这样的格式很正常)：<img src="https://img-blog.csdnimg.cn/5eac5c344a7044ddbfd165e69e3b3ff9.png" alt="7">然后得到了一个字符串resultCity ，接着就是根据resultCity 进行数据封装</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">JSONArray ja= <span class="keyword">new</span> <span class="title class_">JSONArray</span>(resultCity);</span><br><span class="line"><span class="comment">//获取省，封装</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; ja.length(); i++) &#123;<span class="comment">//这个长度就是省的个数</span></span><br><span class="line"><span class="type">JSONObject</span> <span class="variable">provinceJsonObject</span> <span class="operator">=</span> ja.getJSONObject(i);</span><br><span class="line"><span class="type">String</span> <span class="variable">provinceName</span> <span class="operator">=</span> provinceJsonObject.getString(<span class="string">&quot;pname&quot;</span>);</span><br><span class="line"><span class="type">ProvinceBean</span> <span class="variable">provinceBean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ProvinceBean</span>();</span><br><span class="line">provinceBean.setPname(provinceName);</span><br><span class="line">mProvinceBeanList.add(provinceBean);</span><br><span class="line"><span class="comment">//添加市,也可以用省里封装的List&lt;CityBean&gt;，直接set，以后不免用到CityBean，就1并封装了</span></span><br><span class="line"><span class="type">JSONArray</span> <span class="variable">cityArray</span> <span class="operator">=</span> provinceJsonObject.getJSONArray(<span class="string">&quot;city&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; cityArray.length(); j++) &#123;</span><br><span class="line"><span class="type">JSONObject</span> <span class="variable">cityObj</span> <span class="operator">=</span> cityArray.getJSONObject(j);</span><br><span class="line"><span class="type">String</span> <span class="variable">cityName</span> <span class="operator">=</span> cityObj.getString(<span class="string">&quot;name&quot;</span>);</span><br><span class="line"><span class="type">CityBean</span> <span class="variable">cityBean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CityBean</span>();</span><br><span class="line">cityBean.setName(cityName);</span><br><span class="line">mCityBeanList.add(cityBean);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 添加区/县待拓展。。。。。。。。。</span></span><br><span class="line">&#125;</span><br><span class="line">Log.d(<span class="string">&quot;SelectCity&quot;</span>, <span class="string">&quot;mCityBeanList&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&quot;</span> + mCityBeanList.toString());</span><br></pre></td></tr></table></figure><p>到此省和市的数据就已经封装好了，可以查看控制台，发现area=null，因为用不到此数据，就没有对area进行封装，需要封装直接cityBean.set完事，没有难度。</p><p>数据解析封装好，就是设置适配器，既然用到RecyclerView展示城市，那么城市的适配器就得写，毕竟封装好的城市数据不是String数组，是一个集合，为了规范(凑复杂度)直接写适配器吧（<em>List转成String数组就可以不用写适配器，直接用ArrayAdapter</em>）。</p><p><strong>CityAdapter</strong>适配器：</p><p>前面文章提到过，略过过了就，，</p><blockquote><p>指路==&gt;适配器写法：<br><a href="https://blog.csdn.net/m0_51390535/article/details/125350399?spm=1001.2014.3001.5502">简易的安卓天气app(二)——适配器、每小时数据展示</a><br>根据目录<code>适配器HourWeatherAdapter</code>索引</p></blockquote><p>/<strong>**也可以在此适配器添加点击事件，拿到天气，此方法<a href="https://blog.csdn.net/m0_51390535/article/details/125362820?spm=1001.2014.3001.5502">前面文章</a>(根据目录<code>适配器AddCityAdapter</code>索引)也提到过，此处略过</strong>/</p><h1 id="SelectCityActivity-java"><a href="#SelectCityActivity-java" class="headerlink" title="SelectCityActivity.java"></a>SelectCityActivity.java</h1><h2 id="搜索框"><a href="#搜索框" class="headerlink" title="搜索框"></a>搜索框</h2><p>搜索城市页面首先我们来设计搜索框输入文字提示框，首先，我们已经在xml布局中运用了<strong>AutoCompleteTextView</strong>，会自动根据输入的一个字匹配传入的值，有就显示提示，如下，这个弹出提示框其实是可以自定义样式的，这里就用默认了。后续会更新，适配器也是安卓提供的ArrayAdapter，传入的是全国所有市的String[]数组。<br><img src="https://img-blog.csdnimg.cn/48d810a0a0ef41ed9db33808387b3ab6.png" alt="8"><br>现在，先在SelectCityActivity.java中定义AutoCompleteTextView；<br><code>private AutoCompleteTextView query;</code><br>然后绑定组件</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">query = (AutoCompleteTextView) findViewById(R.id.edit_query);</span><br></pre></td></tr></table></figure><p>接着就是设置一个<strong>ArrayAdapter</strong>适配器，里面设置样式为<strong>android.R.layout.simple_list_item_1</strong>安卓提供的样式，就是简单的白框，    然后传入城市的数组；<br>在此之前，这个城市数组还得定义好，前面Json数据解析我们已经知道，从City.txt文件已经拿到了全部城市，并成功传值给<strong>mCityBeanList</strong>；<br><img src="https://img-blog.csdnimg.cn/5eac5c344a7044ddbfd165e69e3b3ff9.png" alt="72">然后我们把这个List转成String数组，放在适配器ArrayAdapter中；</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">String[] cityArray = <span class="keyword">new</span> <span class="title class_">String</span>[mCityBeanList.size()];</span><br><span class="line">       <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; mCityBeanList.size(); i++) &#123;</span><br><span class="line">       <span class="comment">//城市名称定义为一个数组</span></span><br><span class="line">           cityArray[i] = mCityBeanList.get(i).getName().substring(<span class="number">0</span>, mCityBeanList.get(i).getName().length() - <span class="number">1</span>);</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure><p>这里带了substring方法，主要是由于我们的天气api查询城市时传入的城市名称不能带市，只能北京，天津，上海，不可北京市，上海市。<br>然后适配器就可以传参了，如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">adapter = <span class="keyword">new</span> <span class="title class_">ArrayAdapter</span>&lt;String&gt;(<span class="built_in">this</span>, android.R.layout.simple_list_item_1, cityArray);</span><br><span class="line">query.setAdapter(adapter);<span class="comment">//</span></span><br></pre></td></tr></table></figure><p>然后添加输入框右面的搜索图标的点击事件，输入框的城市名就传到了主页并显示天气</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">ivSearch = (ImageView) findViewById(R.id.iv_search);</span><br><span class="line">        ivSearch.setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View view)</span> &#123;</span><br><span class="line">            <span class="comment">//拿到输入框的值</span></span><br><span class="line">                <span class="type">String</span> <span class="variable">cityName</span> <span class="operator">=</span> query.getText().toString();</span><br><span class="line"><span class="comment">//                ToastUtil.showLongToast(SelectCityActivity.this, cityName);</span></span><br><span class="line">                <span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(SelectCityActivity.<span class="built_in">this</span>, MainActivity.class);</span><br><span class="line">                intent.putExtra(<span class="string">&quot;inputCity&quot;</span>, cityName);</span><br><span class="line">                setResult(<span class="number">200</span>, intent);</span><br><span class="line">                finish();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure><h2 id="城市显示"><a href="#城市显示" class="headerlink" title="城市显示"></a>城市显示</h2><p>用到RecyclerView，只要把此类中已经封装好的全部城市集合传进去就行了，前面文章已经讲述过RecyclerView的用法，同时，也可以实现点击item跳转到主页获取天气的操作，前面文章也已经提到，不想过多赘述了；</p><blockquote><p>若是嫌弃城市列表太多，都显示在一个页面还得滑动屏幕一个个找；<br>那么，二级RecyclerView不妨考虑一下：先显示全部省，点击省时，弹出市；<br>亦或者Spinner、两个RecyclerView联动，等等方法；==（源码已给，自行探索）==</p><p><img src="https://img-blog.csdnimg.cn/489029a861bd49dbb423e75933e6b950.gif#pic_center" alt="9">&gt;实现上图的效果，用到了左右两个RecyclerView，点击左面，就对应显示有点数据，把数据解析那一步改改就行，省和市完整封装在一起，省不止要serPname了，还要把此省的全部市封装一下provinceBean.setCity(mCityBeanList);<br>下面是封装部分的源码，都是ArrayList，查询速度快。<br>为了保证搜索框还有提示功能，重新定义actureCityBeanList，传入集合actureCityBeanList转的数组；；</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="type">JSONArray</span> <span class="variable">Data</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JSONArray</span>(resultCity);</span><br><span class="line">            <span class="comment">//获取省，封装</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; Data.length(); i++) &#123;</span><br><span class="line">                <span class="type">JSONObject</span> <span class="variable">provinceJsonObject</span> <span class="operator">=</span> Data.getJSONObject(i);</span><br><span class="line">                <span class="type">String</span> <span class="variable">provinceName</span> <span class="operator">=</span> provinceJsonObject.getString(<span class="string">&quot;pname&quot;</span>);</span><br><span class="line">                <span class="type">ProvinceBean</span> <span class="variable">provinceBean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ProvinceBean</span>();</span><br><span class="line">                provinceBean.setPname(provinceName);</span><br><span class="line">                mCityBeanList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">                <span class="comment">//添加市</span></span><br><span class="line">                <span class="keyword">final</span> <span class="type">JSONArray</span> <span class="variable">cityArray</span> <span class="operator">=</span> provinceJsonObject.getJSONArray(<span class="string">&quot;city&quot;</span>);</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; cityArray.length(); j++) &#123;</span><br><span class="line">                    <span class="type">JSONObject</span> <span class="variable">cityObj</span> <span class="operator">=</span> cityArray.getJSONObject(j);</span><br><span class="line">                    <span class="type">String</span> <span class="variable">cityName</span> <span class="operator">=</span> cityObj.getString(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">                    <span class="type">CityBean</span> <span class="variable">cityBean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CityBean</span>();</span><br><span class="line">                    cityBean.setName(cityName);</span><br><span class="line"><span class="comment">//                    mCityNameList.add(cityName);</span></span><br><span class="line">                    mCityBeanList.add(cityBean);</span><br><span class="line">                    actureCityBeanList.add(cityBean);</span><br><span class="line">                &#125;</span><br><span class="line">                provinceBean.setCity(mCityBeanList);</span><br><span class="line">                mProvinceBeanList.add(provinceBean);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 添加县待拓展。。。。。。。。。</span></span><br><span class="line">            &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Android </tag>
            
            <tag> APP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ajax</title>
      <link href="/posts/ajax.html"/>
      <url>/posts/ajax.html</url>
      
        <content type="html"><![CDATA[<p>PostMan下载地址：<a href="https://www.postman.com/downloads/">https://www.postman.com/downloads/</a><br><img src="https://img-blog.csdnimg.cn/ab90c6b429464c0da2122a27af0b6795.png#pic_center" alt="在这里插入图片描述"></p><p>或中文版工具apifox：<a href="https://www.apifox.cn/">https://www.apifox.cn/</a></p><p>中文版工具apifox帮助地址：<a href="https://www.apifox.cn/help/">帮助中心 | Apifox 使用文档</a><br><img src="https://img-blog.csdnimg.cn/fb2838a425c24056bf05522c8f8f9a82.png#pic_center" alt="在这里插入图片描述"></p><h2 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h2><p>全称是 Asynchronous Javascript And XML（异步 JavaScript 和 XML）。<br>在网页中利用 XMLHttpRequest 对象和服务器进行数据交互的方式，就是Ajax。<br>1、<code>$.get()</code></p><p>功能单一，发起 get 请求，从服务器拿数据。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$.<span class="title function_">get</span>(url, [data], [callback])</span><br><span class="line"><span class="comment">//参数一：urlstring类型要请求的资源地址</span></span><br><span class="line"><span class="comment">//参数二：dataobject类型请求资源期间要携带的参数</span></span><br><span class="line"><span class="comment">//参数三：callback请求成功时的回调函数</span></span><br></pre></td></tr></table></figure><p>2、<code>$.post()</code></p><p>功能单一，发起 post 请求，向服务器提交数据。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$.<span class="title function_">post</span>(url, [data], [callback]);</span><br><span class="line"><span class="comment">//参数一：urlstring类型提交数据的地址</span></span><br><span class="line"><span class="comment">//参数二：dataobject类型要提交的数据</span></span><br><span class="line"><span class="comment">//参数三：callback数据提交成功时的回调函数</span></span><br></pre></td></tr></table></figure><p>3、<code>$.ajax()</code></p><p>功能更多</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">   <span class="attr">type</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// 请求的方式 GET 或 POST</span></span><br><span class="line">   <span class="attr">url</span>: <span class="string">&#x27;&#x27;</span>,  <span class="comment">// 请求的URL</span></span><br><span class="line">   <span class="attr">data</span>: &#123; &#125;,<span class="comment">// 请求要携带的数据</span></span><br><span class="line">   <span class="attr">success</span>: <span class="keyword">function</span>(<span class="params">res</span>) &#123; &#125; <span class="comment">// 请求成功之后的回调函数</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>获取表单数据:</p><p>jQuery 提供的 <strong>serialize()</strong> 函数，可以一次性获取表单中所有数据。使用 serialize()时，必须每个表单元素添加 name 属性。</p><p>例如：表单如下</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;form id=<span class="string">&quot;form1&quot;</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> /&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> /&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span>提交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure><p><strong>serialize()</strong> 函数获取数据：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&#x27;#form1&#x27;</span>).<span class="title function_">serialize</span>()</span><br><span class="line"><span class="comment">// 数据：</span></span><br><span class="line"><span class="comment">// name=值&amp;password=值</span></span><br></pre></td></tr></table></figure></p><h2 id="模板引擎"><a href="#模板引擎" class="headerlink" title="模板引擎"></a>模板引擎</h2><p><strong>art-template模板引擎</strong>：</p><p>网址：<a href="http://aui.github.io/art-template/zh-cn/index.html"> http://aui.github.io/art-template/zh-cn/index.html</a></p><p>下载js文件：<a href="http://aui.github.io/art-template/zh-cn/docs/installation.html">http://aui.github.io/art-template/zh-cn/docs/installation.html</a></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>模板引擎<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 1. 导入模板引擎template-web.js文件 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./lib/template-web.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./lib/jquery.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;container&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- 2. 定义模板，在script中定义的HTML需要指定html解析type=&quot;text/html&quot; --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/html&quot;</span> <span class="attr">id</span>=<span class="string">&quot;example&quot;</span>&gt;</span><span class="language-handlebars"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">  <span class="comment">&lt;!-- </span></span><span class="template-variable">&#123;&#123;&#125;&#125;</span><span class="language-xml"><span class="comment">表示占位符，是要传入的数据 --&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span></span><span class="template-variable">&#123;&#123;<span class="name">name</span>&#125;&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">  </span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 3. 取出数据</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> data = &#123; <span class="attr">name</span>: <span class="string">&#x27;roydon&#x27;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 4. 调用模板引擎提供的 template 函数（第一个参数表示模板的id，第二个参数是数据）</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> temp = <span class="title function_">template</span>(<span class="string">&#x27;example&#x27;</span>, data)</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 5. 渲染HTML</span></span></span><br><span class="line"><span class="language-javascript">    $(<span class="string">&#x27;#container&#x27;</span>).<span class="title function_">html</span>(temp)</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>art-template标准语法</strong>：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;value&#125;&#125;</span><br><span class="line">&#123;&#123;obj.key&#125;&#125;//对象属性的输出</span><br><span class="line">&#123;&#123;obj[&#x27;key&#x27;]&#125;&#125;//对象属性的输出</span><br><span class="line">&#123;&#123;a ? b : c&#125;&#125;//三元表达式</span><br><span class="line">&#123;&#123;a || b&#125;&#125;//逻辑</span><br><span class="line">&#123;&#123;a + b&#125;&#125;//运算</span><br><span class="line">//若数据值包含HTML结构需要完整输出且被渲染，则：</span><br><span class="line">&#123;&#123;@ value &#125;&#125;</span><br></pre></td></tr></table></figure><p>条件输出：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;if condition&#125;&#125; 按需输出的内容 &#123;&#123;/if&#125;&#125;</span><br><span class="line">&#123;&#123;if condition1&#125;&#125; 按需输出的内容 &#123;&#123;else if condition2&#125;&#125; 按需输出的内容 &#123;&#123;/if&#125;&#125;</span><br></pre></td></tr></table></figure><p>循环输出：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;each arr&#125;&#125;</span><br><span class="line">    &#123;&#123;$index&#125;&#125; &#123;&#123;$value&#125;&#125;</span><br><span class="line">&#123;&#123;/each&#125;&#125;</span><br></pre></td></tr></table></figure><p>例如输出数组：{ arr: [‘1’, ‘2’, ‘3’] }</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">  &#123;&#123;each arr&#125;&#125;</span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>索引:&#123;&#123;$index&#125;&#125;值:&#123;&#123;$value&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  &#123;&#123;/each&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure><p>过滤器：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;value | filterName&#125;&#125;</span><br><span class="line">//定义过滤器，过滤器名称filterName</span><br><span class="line">template.defaults.imports.filterName = function(value)&#123;</span><br><span class="line">    /*return处理的结果*/</span><br><span class="line">    /*必须有return*/</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>正则与字符串操作</strong>：<br><strong>exec()</strong> 函数用于检索字符串中的正则表达式的匹配。<br>如果字符串中有匹配的值，则返回该匹配值，否则返回 null。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">var</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&#x27;hello&#x27;</span></span><br><span class="line"><span class="type">var</span> <span class="variable">pattern</span> <span class="operator">=</span> /o/                         </span><br><span class="line"><span class="comment">// 输出的结果[&quot;o&quot;, index: 4, input: &quot;hello&quot;, groups: undefined]</span></span><br><span class="line">console.log(pattern.exec(str)) </span><br></pre></td></tr></table></figure><p>正则表达式中 ( ) 包起来的内容表示一个分组，可以通过分组来提取自己想要的内容，示例代码如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">var</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&#x27;&lt;div&gt;我是&#123;&#123;name&#125;&#125;&lt;/div&gt;&#x27;</span></span><br><span class="line"><span class="type">var</span> <span class="variable">pattern</span> <span class="operator">=</span> /&#123;&#123;([a-zA-Z]+)&#125;&#125;/</span><br><span class="line"></span><br><span class="line"><span class="type">var</span> <span class="variable">patternResult</span> <span class="operator">=</span> pattern.exec(str)</span><br><span class="line">console.log(patternResult)</span><br><span class="line"><span class="comment">// 得到 name 相关的分组信息</span></span><br><span class="line"><span class="comment">// [&quot;&#123;&#123;name&#125;&#125;&quot;, &quot;name&quot;, index: 7, input: &quot;&lt;div&gt;我是&#123;&#123;name&#125;&#125;&lt;/div&gt;&quot;, groups: undefined]</span></span><br></pre></td></tr></table></figure><p><strong>replace()</strong>函数用于在字符串中<strong>用一些字符替换另一些字符</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">var</span> <span class="variable">result</span> <span class="operator">=</span> <span class="string">&#x27;123456&#x27;</span>.replace(<span class="string">&#x27;123&#x27;</span>, <span class="string">&#x27;abc&#x27;</span>) <span class="comment">// 得到的 result 的值为字符串 &#x27;abc456&#x27;</span></span><br></pre></td></tr></table></figure><p>用while循环替换：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">var</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&#x27;&lt;div&gt;&#123;&#123;name&#125;&#125;今年&#123;&#123; age &#125;&#125;岁了&lt;/div&gt;&#x27;</span></span><br><span class="line"><span class="type">var</span> <span class="variable">pattern</span> <span class="operator">=</span> /&#123;&#123;\s*([a-zA-Z]+)\s*&#125;&#125;/</span><br><span class="line"><span class="type">var</span> <span class="variable">patternResult</span> <span class="operator">=</span> <span class="literal">null</span></span><br><span class="line"><span class="title function_">while</span><span class="params">(patternResult = pattern.exec(str)</span>) &#123;</span><br><span class="line">   str = str.replace(patternResult[<span class="number">0</span>], patternResult[<span class="number">1</span>])</span><br><span class="line">&#125;</span><br><span class="line">console.log(str) <span class="comment">// 输出 &lt;div&gt;name今年age岁了&lt;/div&gt;</span></span><br></pre></td></tr></table></figure><p>替换为数据中的值：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">var</span> <span class="variable">data</span> <span class="operator">=</span> &#123; name: <span class="string">&#x27;张三&#x27;</span>, age: <span class="number">20</span> &#125;</span><br><span class="line"><span class="type">var</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&#x27;&lt;div&gt;&#123;&#123;name&#125;&#125;今年&#123;&#123; age &#125;&#125;岁了&lt;/div&gt;&#x27;</span></span><br><span class="line"><span class="type">var</span> <span class="variable">pattern</span> <span class="operator">=</span> /&#123;&#123;\s*([a-zA-Z]+)\s*&#125;&#125;/</span><br><span class="line"></span><br><span class="line"><span class="type">var</span> <span class="variable">patternResult</span> <span class="operator">=</span> <span class="literal">null</span></span><br><span class="line"><span class="title function_">while</span> <span class="params">((patternResult = pattern.exec(str)</span>)) &#123;</span><br><span class="line">   str = str.replace(patternResult[<span class="number">0</span>], data[patternResult[<span class="number">1</span>]])</span><br><span class="line">&#125;</span><br><span class="line">console.log(str)</span><br></pre></td></tr></table></figure><p>自定义模板引擎，封装template函数：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function <span class="title function_">template</span><span class="params">(id, data)</span> &#123;</span><br><span class="line">  <span class="type">var</span> <span class="variable">str</span> <span class="operator">=</span> document.getElementById(id).innerHTML</span><br><span class="line">  <span class="type">var</span> <span class="variable">pattern</span> <span class="operator">=</span> /&#123;&#123;\s*([a-zA-Z]+)\s*&#125;&#125;/</span><br><span class="line">  <span class="type">var</span> <span class="variable">pattResult</span> <span class="operator">=</span> <span class="literal">null</span></span><br><span class="line">  <span class="title function_">while</span> <span class="params">(pattResult = pattern.exec(str)</span>) &#123;</span><br><span class="line">    str = str.replace(pattResult[<span class="number">0</span>], data[pattResult[<span class="number">1</span>]])</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> str</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="XMLHttpRequest"><a href="#XMLHttpRequest" class="headerlink" title="XMLHttpRequest"></a>XMLHttpRequest</h2><p>XMLHttpRequest（简称 xhr）是浏览器提供的 Javascript 对象，可以请求服务器上的数据资源。jQuery 中的 Ajax 函数，就是基于 xhr 对象封装出来的。<br>使用xhr发起GET请求：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 创建 XHR 对象</span></span><br><span class="line"><span class="type">var</span> <span class="variable">xhr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>()</span><br><span class="line"><span class="comment">// 2. 调用 open 函数</span></span><br><span class="line">xhr.open(<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;http://www.liulongbin.top:3006/api/getbooks&#x27;</span>)</span><br><span class="line"><span class="comment">// 3. 调用 send 函数，发起 Ajax 请求</span></span><br><span class="line">xhr.send()</span><br><span class="line"><span class="comment">// 4. 监听 onreadystatechange 事件</span></span><br><span class="line">xhr.onreadystatechange = function () &#123;</span><br><span class="line">    <span class="comment">//监听 xhr 对象的请求状态 readyState ；与服务器响应的状态 status</span></span><br><span class="line">  <span class="keyword">if</span> (xhr.readyState === <span class="number">4</span> &amp;&amp; xhr.status === <span class="number">200</span>) &#123;</span><br><span class="line">    <span class="comment">// 获取服务器响应的数据xhr.responseText(json格式的字符串)</span></span><br><span class="line">    console.log(xhr.responseText)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用xhr发起POST请求：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 创建 xhr 对象</span></span><br><span class="line"><span class="type">var</span> <span class="variable">xhr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>()</span><br><span class="line"><span class="comment">// 2. 调用 open 函数</span></span><br><span class="line">xhr.open(<span class="string">&#x27;POST&#x27;</span>, <span class="string">&#x27;http://www.liulongbin.top:3006/api/addbook&#x27;</span>)</span><br><span class="line"><span class="comment">// 3. 设置 Content-Type 属性</span></span><br><span class="line">xhr.setRequestHeader(<span class="string">&#x27;Content-Type&#x27;</span>, <span class="string">&#x27;application/x-www-form-urlencoded&#x27;</span>)</span><br><span class="line"><span class="comment">// 4. 调用 send 函数,同时将数据以查询字符串的形式，提交给服务器</span></span><br><span class="line">xhr.send(<span class="string">&#x27;bookname=水浒传&amp;author=施耐庵&amp;publisher=上海图书出版社&#x27;</span>)</span><br><span class="line"><span class="comment">// 5. 监听事件 onreadystatechange</span></span><br><span class="line">xhr.onreadystatechange = function () &#123;</span><br><span class="line">  <span class="keyword">if</span> (xhr.readyState === <span class="number">4</span> &amp;&amp; xhr.status === <span class="number">200</span>) &#123;</span><br><span class="line">    console.log(xhr.responseText)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>JSON和JS对象的互转:</strong></p><ol><li>JSON 字符串转换为 JS 对象，使用 JSON.parse() 方法：</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="string">&#x27;&#123;&quot;a&quot;: &quot;Hello&quot;, &quot;b&quot;: &quot;World&quot;&#125;&#x27;</span>)</span><br><span class="line"><span class="comment">//结果是 &#123;a: &#x27;Hello&#x27;, b: &#x27;World&#x27;&#125;</span></span><br></pre></td></tr></table></figure><ol><li>JS 对象转换为 JSON 字符串，使用 JSON.stringify() 方法：</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> json = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123;<span class="attr">a</span>: <span class="string">&#x27;Hello&#x27;</span>, <span class="attr">b</span>: <span class="string">&#x27;World&#x27;</span>&#125;)</span><br><span class="line"><span class="comment">//结果是 &#x27;&#123;&quot;a&quot;: &quot;Hello&quot;, &quot;b&quot;: &quot;World&quot;&#125;&#x27;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JQuery </tag>
            
            <tag> Ajax </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jQuery</title>
      <link href="/posts/jQuery.html"/>
      <url>/posts/jQuery.html</url>
      
        <content type="html"><![CDATA[<p align="center"><font color="pink" size="6">jQuery</font></p><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>js库：即library，封装好的函数。里面有很多预先封装好的方法。</p><p>jQuery就是为了更方便快速操作DOM，里面封装了很多方法，后续用jQuery对象调用这些方法即可。</p><p>学习jQuery就是学习调用里面封装的函数，其优化了DOM操作、事件处理、动画设计和Ajax交互。基本兼容了主流浏览器。链式编程、隐式迭代、支持插件拓展开发，轻量、免费、开源。</p><p>其宗旨就是：写得少，做的多。</p><p><img src="https://img-blog.csdnimg.cn/485abb865256441eb4a1b1d6a468249f.png#pic_center" alt="1"></p><p>下载地址：<a href="https://jquery.com/">https://jquery.com/</a></p><p><img src="https://img-blog.csdnimg.cn/86932f1c848348f0a5f30813bc4173de.png#pic_center" alt="2"></p><p>推荐下载3.X版本。<br><img src="https://img-blog.csdnimg.cn/a3c157049c4f48a8b1d21337c348824a.png#pic_center" alt="3"></p><p><img src="https://img-blog.csdnimg.cn/6ad396156dc24a3c8593757dbe5922fa.png#pic_center" alt="4"></p><p>点击后直接鼠标右键<strong>另存页面为…</strong>即可，最后将下载下来的文件引入项目中。</p><h2 id="jQuery的基本使用"><a href="#jQuery的基本使用" class="headerlink" title="jQuery的基本使用"></a>jQuery的基本使用</h2><h3 id="入口函数"><a href="#入口函数" class="headerlink" title="入口函数"></a>入口函数</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        <span class="comment">// $(&#x27;div&#x27;).hide();</span></span><br><span class="line">        <span class="comment">// 1.等着页面DOM加载完毕再去执行js代码</span></span><br><span class="line">        <span class="comment">// $(document).ready(function() &#123;</span></span><br><span class="line">        <span class="comment">//     $(&#x27;div&#x27;).hide();</span></span><br><span class="line">        <span class="comment">// &#125;)</span></span><br><span class="line">        <span class="comment">// 2.等着页面DOM加载完毕再去执行js代码</span></span><br><span class="line">        $(function() &#123;</span><br><span class="line">            $(<span class="string">&#x27;div&#x27;</span>).hide();</span><br><span class="line">        &#125;)</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">    &lt;div&gt;<span class="number">114514</span>&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(function() &#123;</span><br><span class="line">     ......<span class="comment">//DOM加载完成的入口(推荐)</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(document).ready(function() &#123;</span><br><span class="line">    ......<span class="comment">//DOM加载完成的入口</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></blockquote><p><img src="https://img-blog.csdnimg.cn/20082eab7b284554b30fb223edaf9c13.png#pic_center" alt="在这里插入图片描述"></p><h3 id="jQuery的顶级对象："><a href="#jQuery的顶级对象：" class="headerlink" title="jQuery的顶级对象：$"></a>jQuery的顶级对象：<strong><code>$</code></strong></h3><p><script type="math/tex">`是jQuery 别称，在代码中`</script>和jQuery和等价，为了方便都是<code>$</code>。</p><p><script type="math/tex">`是jQuery的顶级对象，相当于原生js中的window，元素通过`</script>包装成jQuery对象，调用jQuery属性和方法。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="comment">// 1. $ 是jQuery的别称（别名）</span></span><br><span class="line">    <span class="comment">// $(function() &#123;</span></span><br><span class="line">    <span class="comment">//     alert(11)</span></span><br><span class="line">    <span class="comment">// &#125;);</span></span><br><span class="line">    <span class="comment">//jQuery和$二者可互换，方便起见一般都是$</span></span><br><span class="line">    jQuery(function() &#123;</span><br><span class="line">        <span class="comment">// alert(11)</span></span><br><span class="line">        <span class="comment">// $(&#x27;div&#x27;).hide();hide为jQuery封装的方法；</span></span><br><span class="line">        jQuery(<span class="string">&#x27;div&#x27;</span>).hide();</span><br><span class="line">    &#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>jQuery对象和DOM对象</p><p>用原生js获取来的对象是DOM对象，用jQuery方法获取过来的对象是jQuery对象。</p><p>jQuery 对DOM的原生方法进行了封装，jQuery 对象只能使用 jQuery 方法，DOM 对象则使用原生的 JavaScirpt 属性和方法。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="comment">//DOM对象，用原生js获取</span></span><br><span class="line">    <span class="type">var</span> <span class="variable">div</span> <span class="operator">=</span> document.querySelector(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line">    console.dir(div);</span><br><span class="line">    <span class="comment">// $(&#x27;div&#x27;)是一个jQuery 对象</span></span><br><span class="line">    $(<span class="string">&#x27;div&#x27;</span>); </span><br><span class="line">    console.dir($(<span class="string">&#x27;div&#x27;</span>));</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>控制台输出：</p><p><img src="https://img-blog.csdnimg.cn/ee21a53f44434e45a518904ab3a98425.png#pic_center" alt="5"></p><blockquote><p>jQuery 对象只能使用 jQuery 属性和方法。例如：</p><p>衔接上述代码：<code>div.style.display=&#39;none&#39;;</code>//是原生js方法，DOM对象可调用</p><p>但：$(‘div’).style.display=’none’;//这句代码就是错的，jQuery 对象只能使用jQuery 封装的方法。</p><p>所以，jQuery 只是对js常用属性和方法进行了封装。<br>DOM使用原生js方法和属性，jQuery 使用jQuery 属性和方法。</p></blockquote><h3 id="jQuery-对象和DOM对象相互转换"><a href="#jQuery-对象和DOM对象相互转换" class="headerlink" title="jQuery 对象和DOM对象相互转换"></a>jQuery 对象和DOM对象相互转换</h3><p>jQuery 转化为DOM(两种方法，index是索引号)：</p><ol><li>$(‘div’)[index]</li><li>$(‘div’).get(index)</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="type">var</span> <span class="variable">div</span> <span class="operator">=</span> document.querySelector(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line">    $(<span class="string">&#x27;div&#x27;</span>)[<span class="number">0</span>].hide()</span><br><span class="line">    $(<span class="string">&#x27;div&#x27;</span>).get(<span class="number">0</span>).hide()</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>DOM转化为<em>jQuery</em>：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//直接获取元素即可</span></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>);</span><br></pre></td></tr></table></figure><hr><h2 id="jQuery常用API"><a href="#jQuery常用API" class="headerlink" title="jQuery常用API"></a>jQuery常用API</h2><h3 id="jQuery选择器"><a href="#jQuery选择器" class="headerlink" title="jQuery选择器"></a>jQuery选择器</h3><ol><li>jQuery 基础选择器</li></ol><p>原生 JS 获取元素方式很多，很杂，而且兼容性情况不一致，因此 jQuery 给我们做了封装，使获取元素统一标准。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(“选择器”) <span class="comment">//里面选择器直接写 CSS 选择器即可，但是要加引号</span></span><br></pre></td></tr></table></figure><p>获取方式与原生js无异：</p><p><img src="https://img-blog.csdnimg.cn/8ac7e1dc9a96449aa19061ba3a575b6a.png#pic_center" alt="6"></p><ol><li>jQuery 层级选择器</li></ol><p><img src="https://img-blog.csdnimg.cn/0b7508b3160842cc9f83ec290b732587.png#pic_center" alt="7"></p><p>jQuery设置样式的方法：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&#x27;div&#x27;</span>).css(<span class="string">&#x27;属性&#x27;</span>, <span class="string">&#x27;值&#x27;</span>)</span><br></pre></td></tr></table></figure><p>for instance：(Set the color for all the LI under UL)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;ul li&quot;</span>).css(<span class="string">&quot;color&quot;</span>, <span class="string">&quot;red&quot;</span>);</span><br></pre></td></tr></table></figure><p>隐式迭代：遍历内部 DOM 元素（伪数组形式存储）的过程。</p><p>例如：给UL里的很多LI都设置成红色字体</p><p>直接$(“ul li”).css(“color”, “red”);//隐式迭代自动遍历每一个LI。</p><ol><li>jQuery 筛选选择器</li></ol><p><img src="https://img-blog.csdnimg.cn/2132dbd722a4404c926dd7a3ff0e20a4.png#pic_center" alt="8"></p><p>for instance：(Get the first LI under UL)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;ul li:first&quot;</span>).css(<span class="string">&quot;color&quot;</span>, <span class="string">&quot;red&quot;</span>);</span><br></pre></td></tr></table></figure><p><strong>jQuery 筛选方法</strong></p><p><img src="https://img-blog.csdnimg.cn/c2eaa6160e404e0c9b94db8348a2f7e1.png#pic_center" alt="9"></p><p>重点记住：</p><p><code>parent()//找亲爸</code> </p><p><code>children()//找亲儿子</code></p><p><code>find()//找后代</code> </p><p><code>siblings()//找兄弟</code>  </p><p><code>eq()</code></p><hr><h3 id="jQuery-样式操作"><a href="#jQuery-样式操作" class="headerlink" title="jQuery 样式操作"></a>jQuery 样式操作</h3><ol><li>操作CSS方法</li></ol><p>jQuery 可以使用 css 方法来修改简单元素样式。</p><blockquote><ul><li>参数只写属性名，则是返回属性值</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;$(<span class="built_in">this</span>).css(<span class="string">&#x27;&#x27;</span>color<span class="string">&#x27;&#x27;</span>);</span><br></pre></td></tr></table></figure><ul><li>参数是<strong>属性名，属性值，逗号分隔</strong>，是设置一组样式，属性必须加引号，值如果是数字可以不用跟单位和引号</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;$(<span class="built_in">this</span>).css(<span class="string">&#x27;&#x27;</span>color<span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;&#x27;</span>red<span class="string">&#x27;&#x27;</span>);</span><br></pre></td></tr></table></figure><ul><li>参数可以是对象形式，方便设置多组样式。属性名和属性值用冒号隔开， 属性可以不用加引号(对象写法，可以不带引号)</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;$(<span class="built_in">this</span>).css(&#123;</span><br><span class="line">   <span class="string">&quot;width&quot;</span>: <span class="string">&quot;400px&quot;</span>,</span><br><span class="line">   height: <span class="number">400</span>,</span><br><span class="line">   <span class="string">&quot;color&quot;</span>:<span class="string">&quot;white&quot;</span>,</span><br><span class="line">   <span class="string">&quot;font-size&quot;</span>:<span class="string">&quot;20px&quot;</span></span><br><span class="line">&gt;&#125;);</span><br></pre></td></tr></table></figure></blockquote><ol><li>设置类样式方法</li></ol><p>作用等同于以前的 classList，可以操作类样式， 注意操作类里面的参数不要加点。</p><blockquote><ul><li>添加类</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(“div”).addClass(<span class="string">&#x27;&#x27;</span>example<span class="string">&#x27;&#x27;</span>);</span><br></pre></td></tr></table></figure><ul><li>移除类</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(“div”).removeClass(<span class="string">&#x27;&#x27;</span>example<span class="string">&#x27;&#x27;</span>);</span><br></pre></td></tr></table></figure><ul><li>切换类</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(“div”).toggleClass(<span class="string">&#x27;&#x27;</span>example<span class="string">&#x27;&#x27;</span>);</span><br></pre></td></tr></table></figure><p>==Attention:类操作与className区别==</p><p>原生 JS 中 className 会覆盖元素原先里面的类名。<br>jQuery 里面类操作只是对指定类进行操作，不影响原先的类名。</p></blockquote><hr><h3 id="jQuery-效果"><a href="#jQuery-效果" class="headerlink" title="jQuery 效果"></a>jQuery 效果</h3><p>可在API文档中查询具体用法：<a href="https://jquery.cuishifeng.cn/">https://jquery.cuishifeng.cn/</a></p><p>jQuery 封装了很多动画效果，例如：</p><p><img src="https://img-blog.csdnimg.cn/66e1b47c7fa0434fa5b968f6aa82c8fc.png#pic_center" alt="9"></p><h4 id="1-显示隐藏效果"><a href="#1-显示隐藏效果" class="headerlink" title="1.显示隐藏效果"></a>1.显示隐藏效果</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>显示</span><br><span class="line"><span class="comment">//（1）speed:字符串(“slow”,“normal”, or “fast”)或表示动画时长的毫秒数值(如：1000)。</span></span><br><span class="line"><span class="comment">//（2）easing:(Optional)用来指定切换效果，默认是“swing”，可用参数“linear”。</span></span><br><span class="line"><span class="comment">//（3）fn:回调函数，在动画完成时执行的函数，每个元素执行一次。</span></span><br><span class="line">show([speed,[easing],[fn]]);<span class="comment">//中括号表示可以省略此参数，无动画直接显示</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2.</span>隐藏</span><br><span class="line"><span class="comment">//（1）speed:字符串(“slow”,“normal”, or “fast”)或表示动画时长的毫秒数值(如：1000)。</span></span><br><span class="line"><span class="comment">//（2）easing:(Optional) 用来指定切换效果，默认是“swing”，可用参数“linear”。</span></span><br><span class="line"><span class="comment">//（3）fn:回调函数，在动画完成时执行的函数，每个元素执行一次</span></span><br><span class="line">hide([speed,[easing],[fn]]);<span class="comment">//中括号表示可以省略此参数，无动画直接显示</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3.</span>切换显示和隐藏</span><br><span class="line">toggle([speed,[easing],[fn]];</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/5ef40760677b4016983d09775e6b0279.gif#pic_center" alt="10"></p><h4 id="2-滑动效果"><a href="#2-滑动效果" class="headerlink" title="2.滑动效果"></a>2.滑动效果</h4><p>参数意思与显示隐藏参数一致</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>下滑</span><br><span class="line"><span class="title function_">slideDown</span>([speed,[easing],[fn]];</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2.</span>上滑</span><br><span class="line"><span class="title function_">slideUp</span>([speed,[easing],[fn]];</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3.</span>滑动切换</span><br><span class="line"><span class="title function_">slideToggle</span>([speed,[easing],[fn]];</span><br></pre></td></tr></table></figure><p>==<strong>事件切换</strong>==</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//（1）over:鼠标移到元素上要触发的函数（相当于mouseenter）</span></span><br><span class="line"><span class="comment">//（2）out:鼠标移出元素要触发的函数（相当于mouseleave）</span></span><br><span class="line"><span class="comment">//（3）如果只写一个函数，则鼠标经过和离开都会触发它</span></span><br><span class="line">hover([over,]out);</span><br></pre></td></tr></table></figure><p>for instance:(The drop-down menu of the navigation bar).</p><p>实现效果：</p><p><img src="https://img-blog.csdnimg.cn/c266c4784fda44c6bd928cb522e7b391.gif#pic_center" alt="11"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        * &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">li</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">list-style-type</span>: none;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">a</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-decoration</span>: none;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">14px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.nav</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">0</span> auto;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">40px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid red;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.nav</span>&gt;<span class="selector-tag">li</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">80px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">41px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.nav</span> <span class="selector-tag">li</span> <span class="selector-tag">a</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: block;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">line-height</span>: <span class="number">41px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#333</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.nav</span>&gt;<span class="selector-tag">li</span>&gt;<span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#eee</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.nav</span> <span class="selector-tag">ul</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: none;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: <span class="number">41px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-left</span>: <span class="number">1px</span> solid red;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-right</span>: <span class="number">1px</span> solid red;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.nav</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid red;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.nav</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#FFF5DA</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;nav&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>导航一<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>私信<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>评论<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>@我<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>导航二<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>私信<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>评论<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>@我<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>导航三<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>私信<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>评论<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>@我<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>导航四<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>私信<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>评论<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>@我<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        $(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            ......</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>jQuery部分有多种写法：</p><blockquote><ol><li>上滑和下滑分别用鼠标离开和经过来实现</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//鼠标经过，下滑</span></span><br><span class="line">$(<span class="string">&quot;.nav&gt;li&quot;</span>).<span class="title function_">mouseover</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    $(<span class="variable language_">this</span>).<span class="title function_">children</span>(<span class="string">&quot;ul&quot;</span>).<span class="title function_">slideDown</span>(<span class="number">200</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//鼠标离开，上滑</span></span><br><span class="line">$(<span class="string">&quot;.nav&gt;li&quot;</span>).<span class="title function_">mouseout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    $(<span class="variable language_">this</span>).<span class="title function_">children</span>(<span class="string">&quot;ul&quot;</span>).<span class="title function_">slideUp</span>(<span class="number">200</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ol><li>用上面说的事件切换来写</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//事件切换 hover 就是鼠标经过和离开的复合写法，两个函数对应经过和离开。</span></span><br><span class="line">$(<span class="string">&quot;.nav&gt;li&quot;</span>).<span class="title function_">hover</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    $(<span class="variable language_">this</span>).<span class="title function_">children</span>(<span class="string">&quot;ul&quot;</span>).<span class="title function_">slideDown</span>(<span class="number">200</span>);</span><br><span class="line">&#125;, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    $(<span class="variable language_">this</span>).<span class="title function_">children</span>(<span class="string">&quot;ul&quot;</span>).<span class="title function_">slideUp</span>(<span class="number">200</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>简化事件切换写法：只写一个函数，鼠标经过和鼠标离开都会触发这个函数</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;.nav&gt;li&quot;</span>).<span class="title function_">hover</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    $(<span class="variable language_">this</span>).<span class="title function_">children</span>(<span class="string">&quot;ul&quot;</span>).<span class="title function_">slideToggle</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></blockquote><p>上述写法的bug：快速经过离开，导航动画等一个结束，另一个才开始</p><p><img src="https://img-blog.csdnimg.cn/054202732575445999153f2cc7800490.gif#pic_center" alt="12"></p><p>待解决：动画队列（动画或者效果一旦触发就会执行，如果多次触发，就造成多个动画或者效果排队执行。）</p><p>解决方法：<strong>停止排队</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//(1)stop()方法用于停止动画或效果。</span></span><br><span class="line"><span class="comment">//(2)注意:stop()写到动画或者效果的前面，相当于停止结束上一次的动画。只执行最新的一次。</span></span><br><span class="line"><span class="title function_">stop</span>();</span><br></pre></td></tr></table></figure><p>完整代码：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;.nav&gt;li&quot;</span>).<span class="title function_">hover</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// stop 方法必须写到动画的前面，结束上一次的动画</span></span><br><span class="line">    $(<span class="variable language_">this</span>).<span class="title function_">children</span>(<span class="string">&quot;ul&quot;</span>).<span class="title function_">stop</span>().<span class="title function_">slideToggle</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="3-淡入淡出效果"><a href="#3-淡入淡出效果" class="headerlink" title="3.淡入淡出效果"></a>3.淡入淡出效果</h4><p>就是透明度从0增加到1的变化。</p><p>//参数与上述一致</p><p>（1）speed：字符串(“slow”,“normal”, or “fast”)或表示动画时长的毫秒数值(如：1000)。<br>（2）easing：(Optional) 用来指定切换效果，默认是“swing”，可用参数“linear”。<br>（3）fn:  回调函数，在动画完成时执行的函数，每个元素执行一次。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>淡入</span><br><span class="line">fadeIn([speed,[easing],[fn]];</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2.</span>淡出</span><br><span class="line">fadeOut([speed,[easing],[fn]];</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3.</span>淡入淡出切换</span><br><span class="line">fadeToggle([speed,[easing],[fn]];</span><br></pre></td></tr></table></figure><p><strong>渐进方式调整到指定的不透明度</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//opacity 透明度，取值0~1</span></span><br><span class="line">fadeTo([[speed],opacity,[easing],[fn]];</span><br></pre></td></tr></table></figure><h4 id="4-自定义动画-animate"><a href="#4-自定义动画-animate" class="headerlink" title="4.自定义动画 animate"></a>4.自定义动画 animate</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//params: 想要更改的样式属性，以对象形式传递。属性名可以不用带引号，如果是复合属性则需要采</span></span><br><span class="line">取驼峰命名法 borderLeft。其余参数都可以省略。</span><br><span class="line">animate(params,[speed],[easing],[fn];</span><br></pre></td></tr></table></figure><h3 id="jQuery-属性操作"><a href="#jQuery-属性操作" class="headerlink" title="jQuery 属性操作"></a>jQuery 属性操作</h3><h4 id="设置或获取元素固有属性值"><a href="#设置或获取元素固有属性值" class="headerlink" title="设置或获取元素固有属性值"></a>设置或获取元素固有属性值</h4><p>元素固有属性就是元素本身自带的属性，比如 <code>a</code> 元素里面的 href ，比如 <code>input</code> 元素里面的 type。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>获取</span><br><span class="line">prop(<span class="string">&#x27;属性&#x27;</span>);</span><br><span class="line"><span class="number">2.</span>设置</span><br><span class="line">prop(<span class="string">&#x27;属性&#x27;</span>, <span class="string">&#x27;属性值&#x27;</span>);</span><br></pre></td></tr></table></figure><h4 id="设置或获取元素自定义属性值"><a href="#设置或获取元素自定义属性值" class="headerlink" title="设置或获取元素自定义属性值"></a>设置或获取元素自定义属性值</h4><p>用户自己给元素添加的属性，我们称为自定义属性。 比如给 div 添加 index =“1”。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>获取</span><br><span class="line">attr(<span class="string">&#x27;属性&#x27;</span>);  <span class="comment">// 类似原生 getAttribute()</span></span><br><span class="line"><span class="number">2.</span>设置</span><br><span class="line">attr(<span class="string">&#x27;属性&#x27;</span>, <span class="string">&#x27;属性值&#x27;</span>);   <span class="comment">// 类似原生 setAttribute()</span></span><br></pre></td></tr></table></figure><p><strong>数据缓存data()</strong></p><p>data() 方法可以在指定的元素上存取数据，并不会修改 DOM 元素结构。本质上是存放在元素缓存中，一旦页面刷新，之前存放的数据都将被移除。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>存入数据</span><br><span class="line">data(<span class="string">&#x27;name&#x27;</span>,<span class="string">&#x27;value&#x27;</span>);   <span class="comment">// 向被选元素附加数据</span></span><br><span class="line"><span class="comment">//例如：$(&#x27;span&#x27;).data(&#x27;uname&#x27;,&#x27;roydon&#x27;);</span></span><br><span class="line"><span class="number">2.</span>获取数据</span><br><span class="line">date(<span class="string">&#x27;name&#x27;</span>);  <span class="comment">//得到数字型数据，获取H5自定义属性data-index时，直接写index即可</span></span><br></pre></td></tr></table></figure><hr><h3 id="jQuery-内容文本值"><a href="#jQuery-内容文本值" class="headerlink" title="jQuery 内容文本值"></a>jQuery 内容文本值</h3><p>主要针对元素的内容还有表单的值操作。</p><ol><li>普通元素内容 html()（ 相当于原生innerHTML)</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>获取元素内容</span><br><span class="line">html()</span><br><span class="line"><span class="number">2.</span>设置元素内容</span><br><span class="line">html(<span class="string">&quot;内容&quot;</span>)</span><br></pre></td></tr></table></figure><ol><li>普通元素文本内容 text()   (相当与原生 innerText)</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>获取</span><br><span class="line">text()</span><br><span class="line"><span class="number">2.</span>设置</span><br><span class="line">text(<span class="string">&quot;文本内容&quot;</span>)</span><br></pre></td></tr></table></figure><ol><li>表单的值 val()（ 相当于原生value)</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>获取</span><br><span class="line">val()</span><br><span class="line"><span class="number">2.</span>设置</span><br><span class="line">val(<span class="string">&quot;内容&quot;</span>)</span><br></pre></td></tr></table></figure><p>保留两位小数：<code>toFixed(2);</code></p><hr><h3 id="jQuery-元素操作"><a href="#jQuery-元素操作" class="headerlink" title="jQuery 元素操作"></a>jQuery 元素操作</h3><h4 id="遍历元素"><a href="#遍历元素" class="headerlink" title="遍历元素"></a>遍历元素</h4><p>jQuery 隐式迭代只能对同一类元素进行相同操作。</p><p>遍历元素可以做到给每个元素添加不同操作。</p><p><strong>语法1：</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//index 元素索引号</span></span><br><span class="line"><span class="comment">//domEle 是每个DOM元素对象（非jquery对象）；所以要想使用jquery方法，需要将这个dom元素转换为jquery对象 $(domEle)</span></span><br><span class="line">$(<span class="string">&quot;div&quot;</span>).<span class="title function_">each</span>(<span class="keyword">function</span> (<span class="params">index, domEle</span>) &#123;</span><br><span class="line">    ......</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>例如：统计三个div内容的和</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>HTML5<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        $(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> sum = <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&#x27;div&#x27;</span>).<span class="title function_">each</span>(<span class="keyword">function</span> (<span class="params">index, domEle</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(index);</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(domEle);</span></span><br><span class="line"><span class="language-javascript">                sum += <span class="built_in">parseInt</span>($(domEle).<span class="title function_">text</span>());</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(sum);</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>3<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>5<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>结果：</p><p><img src="https://img-blog.csdnimg.cn/a6bfc2c5cf2e431e88bcd47168c1a421.png#pic_center" alt="在这里插入图片描述"></p><p><strong>语法2：</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//$.each()方法可用于遍历任何对象。主要用于数据处理，比如数组，对象</span></span><br><span class="line"><span class="comment">//index 元素索引号;element 遍历内容(元素)</span></span><br><span class="line">$.<span class="title function_">each</span>(object，<span class="keyword">function</span> (<span class="params">index, element</span>) &#123;</span><br><span class="line">    ......</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>例如：遍历对象 {name: “roydon”,age: 20}</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> user = &#123; <span class="attr">name</span>: <span class="string">&quot;roydon&quot;</span>, <span class="attr">age</span>: <span class="number">20</span> &#125;;</span><br><span class="line">    $.<span class="title function_">each</span>(user, <span class="keyword">function</span> (<span class="params">i, ele</span>) &#123;</span><br><span class="line">    <span class="comment">//i 为属性名；ele 为属性值。遍历数组时i 为下标；ele 为值</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(i + <span class="string">&quot; : &quot;</span> + ele);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>结果：</p><p><img src="https://img-blog.csdnimg.cn/caa4ecf22f08403f93978f4cea101c6a.png#pic_center" alt="在这里插入图片描述"></p><hr><h4 id="创建元素"><a href="#创建元素" class="headerlink" title="创建元素"></a>创建元素</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;&lt;li&gt;&lt;/li&gt;&quot;</span>); </span><br></pre></td></tr></table></figure><p>此时只是创建了，并没有添加到页面元素中</p><hr><h4 id="添加元素"><a href="#添加元素" class="headerlink" title="添加元素"></a>添加元素</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>内部添加（添加过后与原元素程父子关系</span><br><span class="line">element.<span class="title function_">append</span>(<span class="string">&#x27;&#x27;</span>内容<span class="string">&#x27;&#x27;</span>);<span class="comment">//把内容放入匹配元素内部最后面，类似原生 appendChild。</span></span><br><span class="line">element.<span class="title function_">prepend</span>(<span class="string">&#x27;&#x27;</span>内容<span class="string">&#x27;&#x27;</span>);<span class="comment">//把内容放入匹配元素内部最前面。</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2.</span>外部添加（添加过后与原元素程兄弟关系</span><br><span class="line">element.<span class="title function_">after</span>(<span class="string">&#x27;&#x27;</span>内容<span class="string">&#x27;&#x27;</span>);<span class="comment">//把内容放入目标元素后面</span></span><br><span class="line">element.<span class="title function_">before</span>(<span class="string">&#x27;&#x27;</span>内容<span class="string">&#x27;&#x27;</span>);<span class="comment">//把内容放入目标元素前面</span></span><br></pre></td></tr></table></figure><hr><h4 id="删除元素"><a href="#删除元素" class="headerlink" title="删除元素"></a>删除元素</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">element.<span class="title function_">remove</span>();<span class="comment">//删除匹配的元素（本身）</span></span><br><span class="line">element.<span class="title function_">empty</span>();<span class="comment">//删除匹配的元素集合中所有的子节点</span></span><br><span class="line">element.<span class="title function_">html</span>(<span class="string">&#x27;&#x27;</span>);<span class="comment">//清空匹配的元素内容，也可设置内容</span></span><br></pre></td></tr></table></figure><p>例如：元素如下：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure><p>1.$(“ul”).remove();  结果：ul连同li全部被删除</p><p>2.$(“ul”).empty();  结果：清空ul里所有的li；.html(‘’’’);与其类似</p><hr><h3 id="jQuery-尺寸、位置操作"><a href="#jQuery-尺寸、位置操作" class="headerlink" title="jQuery 尺寸、位置操作"></a>jQuery 尺寸、位置操作</h3><h4 id="jQuery-尺寸"><a href="#jQuery-尺寸" class="headerlink" title="jQuery 尺寸"></a>jQuery 尺寸</h4><p><img src="https://img-blog.csdnimg.cn/453bb3f16ce24d11a5c73f2bf394ea34.png#pic_center" alt="15"></p><p>参数为空时是取值，参数不为空是设置宽高；</p><p>例如：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;div&quot;</span>).width();<span class="comment">//获取div宽度</span></span><br><span class="line">$(<span class="string">&quot;div&quot;</span>).width(<span class="number">300</span>);<span class="comment">//设置宽300</span></span><br></pre></td></tr></table></figure><h4 id="jQuery-位置"><a href="#jQuery-位置" class="headerlink" title="jQuery 位置"></a>jQuery 位置</h4><p>位置主要有三个： offset()、position()、scrollTop()/scrollLeft()</p><p>1.offset() 设置或获取元素偏移</p><ul><li>offset() 相对于文档的偏移坐标，跟父级没有关系。</li><li>该方法有2个属性 left、top 。offset().top  获取距离文档顶部的距离，offset().left 获取距离文档左侧的距离。</li><li>可以设置元素的偏移：offset({ top: 50, left: 50 });</li></ul><p>2.position() 获取元素偏移</p><ul><li>position() 返回被选元素相对于带有定位的父级偏移坐标，如果父级都没有定位，则以文档为准。</li><li>该方法有2个属性 left、top。position().top 获取距离定位父级顶部的距离，position().left 获取距离定位父级左侧的距离。</li><li>该方法只能获取。</li></ul><p>3.scrollTop()/scrollLeft() 设置或获取元素被卷去的头部和左侧</p><ul><li><p>类似于一个小盒子放大图片，图片会显示不全，不全的部分就是scrollTop()/scrollLeft()</p></li><li><p>加参数表示设置</p></li></ul><hr><h2 id="jQuery-事件"><a href="#jQuery-事件" class="headerlink" title="jQuery 事件"></a>jQuery 事件</h2><hr><h3 id="jQuery-事件注册"><a href="#jQuery-事件注册" class="headerlink" title="jQuery 事件注册"></a>jQuery 事件注册</h3><p>事件和原生基本一致。</p><p>比如mouseover、mouseout、blur、focus、change、keydown、keyup、resize、scroll(页面滚动) 等</p><p><strong>语法：</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">element.事件(<span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;)</span><br><span class="line">例如：</span><br><span class="line">$(“div”).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">//事件处理程序</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><hr><h3 id="jQuery-事件处理"><a href="#jQuery-事件处理" class="headerlink" title="jQuery 事件处理"></a>jQuery 事件处理</h3><p>1.事件处理 <strong>on()</strong> 绑定事件在匹配元素上绑定<strong>一个或多个事件</strong>的事件处理函数。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. events: 一个或多个用空格分隔的事件类型，如&quot;click&quot;或&quot;mouseover&quot; 。</span></span><br><span class="line"><span class="comment">//2. selector: 元素的子元素选择器。</span></span><br><span class="line"><span class="comment">//3. fn:回调函数 即绑定在元素身上的侦听函数。</span></span><br><span class="line">element.<span class="title function_">on</span>(events,[selector],fn);</span><br></pre></td></tr></table></figure><p>🔸当on()绑定多个事件：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$(“div”).<span class="title function_">on</span>(&#123;</span><br><span class="line">    <span class="attr">mouseover</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;, <span class="comment">//事件1</span></span><br><span class="line">    <span class="attr">mouseout</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;,  <span class="comment">//事件2</span></span><br><span class="line">    <span class="attr">click</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;      <span class="comment">//事件3</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//若mouseover事件和mouseout事件响应程序相同，则空格隔开写一起</span></span><br><span class="line"><span class="comment">//$(“div”).on(“mouseover mouseout”, function() &#123;</span></span><br><span class="line"><span class="comment">//    ......</span></span><br><span class="line"><span class="comment">//&#125;);</span></span><br></pre></td></tr></table></figure><p>🔸事件委派：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//li的处理事件委派给父ul，里面每个li都有了click</span></span><br><span class="line">$(<span class="string">&#x27;ul&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="string">&#x27;li&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&#x27;hello world!&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><blockquote><p>注意：事件委派现在大多采用⬆️这种写法：<br>优势在于当动态创建元素时，可以动态自动为其绑定事件</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">例如：ol里添加li并动态绑定事件</span><br><span class="line">$(<span class="string">&quot;ol&quot;</span>).<span class="title function_">on</span>(<span class="string">&quot;click&quot;</span>, <span class="string">&quot;li&quot;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&#x27;hello world!&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">var</span> li = $(<span class="string">&quot;&lt;li&gt;后来创建的li&lt;/li&gt;&quot;</span>);</span><br><span class="line">$(<span class="string">&quot;ol&quot;</span>).<span class="title function_">append</span>(li);</span><br></pre></td></tr></table></figure><p>2.事件处理 <strong>off()</strong> 解绑事件可以移除通过 on() 方法添加的事件处理程序。</p><p>当只想让事件触发一次，就会用到解绑事件。（也可以把绑定事件的on()改为one()表示事件只触发一次）</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;p&quot;</span>).<span class="title function_">off</span>(); <span class="comment">// 解绑p元素所有事件处理程序</span></span><br><span class="line">$(<span class="string">&quot;p&quot;</span>).<span class="title function_">off</span>( <span class="string">&quot;click&quot;</span>);  <span class="comment">// 解绑p元素上面的点击事件</span></span><br><span class="line">$(<span class="string">&quot;ul&quot;</span>).<span class="title function_">off</span>(<span class="string">&quot;click&quot;</span>, <span class="string">&quot;li&quot;</span>);  <span class="comment">// 解绑事件委托</span></span><br></pre></td></tr></table></figure><p>3.自动触发事件 <strong>trigger()</strong> </p><p>有些事件希望自动触发, 比如轮播图自动播放功能跟点击右侧按钮一致。可以利用定时器自动触发右侧按钮点击事件，不必鼠标点击触发。</p><p>例如，div自动触发点击事件：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    $(<span class="string">&quot;div&quot;</span>).<span class="title function_">on</span>(<span class="string">&quot;click&quot;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        $(<span class="variable language_">this</span>).<span class="title function_">css</span>(<span class="string">&quot;background&quot;</span>,<span class="string">&quot;red&quot;</span>)</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">// 自动触发点击事件</span></span><br><span class="line">    <span class="comment">// 方法一： 元素.事件()</span></span><br><span class="line">    <span class="comment">// $(&quot;div&quot;).click();会触发元素的默认行为</span></span><br><span class="line">    <span class="comment">// 方法二： 元素.trigger(&quot;事件&quot;)</span></span><br><span class="line">    <span class="comment">// $(&quot;div&quot;).trigger(&quot;click&quot;);会触发元素的默认行为</span></span><br><span class="line">    <span class="comment">// 方法三： 元素.triggerHandler(&quot;事件&quot;) 就是不会触发元素的默认行为</span></span><br><span class="line">    $(<span class="string">&quot;div&quot;</span>).<span class="title function_">triggerHandler</span>(<span class="string">&quot;click&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><hr><h3 id="jQuery-事件对象"><a href="#jQuery-事件对象" class="headerlink" title="jQuery 事件对象"></a>jQuery 事件对象</h3><p>事件被触发，就会有事件对象event的产生。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">element.<span class="title function_">on</span>(events,[selector],<span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="comment">//阻止默认行为：event.preventDefault()  或者 return false;</span></span><br><span class="line">    <span class="comment">//阻止冒泡： event.stopPropagation()</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><hr><h2 id="jQuery-其它方法"><a href="#jQuery-其它方法" class="headerlink" title="jQuery 其它方法"></a>jQuery 其它方法</h2>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScirpt </tag>
            
            <tag> JQuery </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScript</title>
      <link href="/posts/JavaScript.html"/>
      <url>/posts/JavaScript.html</url>
      
        <content type="html"><![CDATA[<h1 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript"></a>JavaScript</h1><h2 id="基础认识"><a href="#基础认识" class="headerlink" title="基础认识"></a>基础认识</h2><p><img src="https://img-blog.csdnimg.cn/d33a5381b9734f34a3fac3cb24724228.png#pic_center" alt="1"><br>弹出提示对话框：alert(“弹出对话框”)</p><p>解释型语言，一行一行解释。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">alert</span>(<span class="string">&quot;弹出对话框&quot;</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/210f70efa3b2460cad32060bd87555ae.png#pic_center" alt="在这里插入图片描述"></p><p>认识js</p><p>发明人：布兰登·艾奇(Brendan Eich，1961年~)</p><blockquote><p>1995年利用十天完成JS设计<br>网景公司最初命名为LiveScript，后来与Sun合作改名JavaScript</p></blockquote><p>运行在客户端浏览器上。</p><p>js的作用：</p><p><img src="https://img-blog.csdnimg.cn/9c27c1a23c774f7f94eac5c2469ac6cf.png#pic_center" alt="在这里插入图片描述"></p><p>js的组成：</p><p><img src="https://img-blog.csdnimg.cn/ff3083711b6741b1acb0acd007f05c87.png#pic_center" alt="在这里插入图片描述"></p><p>注释：<br><img src="https://img-blog.csdnimg.cn/d001b5db17a649bf94d0ff1c656af56b.png#pic_center" alt="在这里插入图片描述"></p><p><img src="https://img-blog.csdnimg.cn/cb36371839f249069cce48b304194794.png#pic_center" alt="在这里插入图片描述"></p><p>js的输入输出：</p><p><img src="https://img-blog.csdnimg.cn/c204ff86816c426a9159d55be1e8266b.png#pic_center" alt="在这里插入图片描述"></p><p><code>prompt取值是字符型的</code></p><h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var age;//声明一个名称为age的变量，赋值var age=18;</span><br></pre></td></tr></table></figure><p>只声明不赋值值为<code>undefined</code></p><p><img src="https://img-blog.csdnimg.cn/5bc6c109bade492abab7411af244d848.png#pic_center" alt="在这里插入图片描述"></p><h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><p>数据类型可变</p><p>简单（基本）数据类型<br><img src="https://img-blog.csdnimg.cn/bdde58dd0a7446088432ba657f397b66.png#pic_center" alt="在这里插入图片描述">判断变量是否为数字型的方法:<br><img src="https://img-blog.csdnimg.cn/a57ebedbba48458a8b9cfd672abaaf43.png#pic_center" alt="在这里插入图片描述"></p><p>获取字符串String长度</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">str.length</span><br></pre></td></tr></table></figure><p>转义符<br><img src="https://img-blog.csdnimg.cn/0029af44e3264b68a861326c602e80bc.png#pic_center" alt="在这里插入图片描述"></p><p><strong>undefined和null</strong></p><p><img src="https://img-blog.csdnimg.cn/87e803920e8444399ca6dd24f605d513.png#pic_center" alt="在这里插入图片描述"></p><p>判断变量类型<code>typeof 变量名</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> str = <span class="string">&#x27;roydon&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">alert</span>(<span class="keyword">typeof</span> str) <span class="comment">//string</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/32bb26f379af423898301967dced0856.png#pic_center" alt="在这里插入图片描述"><br>这里的null类型为object，现在不考虑，后面会讲。</p><p><strong>数据类型转换</strong></p><p>1.转换成string</p><p><img src="https://img-blog.csdnimg.cn/81834a155e74423796b4cab851101a66.png#pic_center" alt="在这里插入图片描述"></p><p>2.转换成数字型number</p><p><img src="https://img-blog.csdnimg.cn/31d3c177b1db47ab8154ad8fffddac29.png#pic_center" alt="在这里插入图片描述"></p><p>隐式转换</p><p><img src="https://img-blog.csdnimg.cn/14c9fb219c86450eb5443492c784bfbd.png#pic_center" alt="在这里插入图片描述"></p><blockquote><p><code>NaN</code>：not a number不是一个数字</p><p><img src="https://img-blog.csdnimg.cn/8287b108163144f29f17f1f6f983c2e6.png#pic_center" alt="在这里插入图片描述"></p></blockquote><p>3.转换成布尔型boolean</p><blockquote><p>Boolean函数。例如：Boolean(‘true’);<br><img src="https://img-blog.csdnimg.cn/f6232cc8e4df4c7abcedef30a674183f.png#pic_center" alt="在这里插入图片描述"></p></blockquote><p><img src="https://img-blog.csdnimg.cn/91929a33c9ea489e8af012794f6ad39c.png#pic_center" alt="在这里插入图片描述"></p><h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var arr = new Array(2，3，4);//==&gt;arr[2,3,4]，若参数为一个，表示数组长度，元素为空</span><br></pre></td></tr></table></figure><p>或者，利用字面量创建数组</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var arr = [&#x27;小明&#x27;,&#x27;小红&#x27;,&#x27;小强&#x27;];</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/0ab05ca42a304b9da54c996c5267bd3e.png#pic_center" alt="在这里插入图片描述"></p><p>数组遍历：length拿数组长度</p><p><img src="https://img-blog.csdnimg.cn/9d982e31da724cc185cb77ca75bc4fa9.png#pic_center" alt="在这里插入图片描述"></p><p>数组排序：</p><p><img src="https://img-blog.csdnimg.cn/f0102ec025a4478fb5a9e45f4a260808.png#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/827096c875a749e5b714d4e084fa424c.png#pic_center" alt="在这里插入图片描述"></p><blockquote><p>上图数组排序得到的结果：<br>1.arr [ ‘blue’, ‘red’, ‘pink’ ] ;<br>2.arr1 [1,4, 7, 13 ,77];<br>==<code>sort()</code>函数默认只对一位数的数字排序生效，若要排序多位数数字，需要添加function方法。==<br><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/sort">解析链接：Array.prototype.sort()</a><br>默认sort()排序结果：（位数大于一的数字出现结果不正确)<br><img src="https://img-blog.csdnimg.cn/6915b97bdb374ce89be687f58267dc86.png" alt="在这里插入图片描述"></p></blockquote><p>检测是否为数组：<code>instanceof</code>和<code>Array.isArray()</code></p><p><img src="https://img-blog.csdnimg.cn/9b63893d4c5f44f8b1e68a519ebd7c5b.png#pic_center" alt="在这里插入图片描述"></p><p>数组操作：添加或删除</p><p><img src="https://img-blog.csdnimg.cn/025c457ba1fd427a9977a7cd0cf6eeea.png#pic_center" alt="在这里插入图片描述"></p><p>1.添加</p><p><img src="https://img-blog.csdnimg.cn/52eec5b0ef8842988b3d42a21ba4d5e1.png#pic_center" alt="在这里插入图片描述">push();<br><img src="https://img-blog.csdnimg.cn/7e2c8822fdaa4301a5d0477221bb55e6.png" alt="在这里插入图片描述"></p><p>2.删除</p><p><img src="https://img-blog.csdnimg.cn/6ce4198e82d54b7e8c97d29d8f19e84c.png#pic_center" alt="在这里插入图片描述"></p><p>数组索引方法：</p><p><img src="https://img-blog.csdnimg.cn/1da53cdb46634c1f9abb4818bbcf4e04.png#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/ccaf995b15c54aa5a5b9e52d8a2dda38.png#pic_center" alt="在这里插入图片描述"></p><p><img src="https://img-blog.csdnimg.cn/28f01a5149eb4740b7c9602b8cca0945.png#pic_center" alt="在这里插入图片描述"></p><p><img src="https://img-blog.csdnimg.cn/2971f2c905384c0f96e09d965b299ba9.png#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/d680ad61b5664f1b91e7b992eed98d65.png#pic_center" alt="在这里插入图片描述"></p><p><img src="https://img-blog.csdnimg.cn/7be2aea4829844f9931199423d62d39d.png#pic_center" alt="在这里插入图片描述"></p><h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><p>声明和调用：<code>function</code></p><p><img src="https://img-blog.csdnimg.cn/0b781822894e48978123b88302496371.png#pic_center" alt="在这里插入图片描述"></p><blockquote><p>第一行<strong>function getSum</strong>后面括号中的<strong>num1</strong>和<strong>num2</strong>是形参。<br>最后两行调用传入的两个参数叫实参。</p></blockquote><p>两种声明方式：</p><p><img src="https://img-blog.csdnimg.cn/414cadb2ed01447ba0c9a3f1eba9b96e.png#pic_center" alt="在这里插入图片描述"></p><p>return：</p><p><img src="https://img-blog.csdnimg.cn/43f034b229ac4ad1b79dc550628fd4f0.png#pic_center" alt="在这里插入图片描述"></p><p>arguments</p><p>内置对象，存储传递来的所有实参，保存的形式是数组（伪数组）</p><p><img src="https://img-blog.csdnimg.cn/8b086e40125c4f348ef6c6158e961270.png#pic_center" alt="在这里插入图片描述"></p><p>作用域：</p><p>全局和局部</p><p>就近</p><h2 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h2><p>对象的创建3法</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">       <span class="comment">//创建对象的3种方法</span></span></span><br><span class="line"><span class="language-javascript">       <span class="comment">//var person=&#123;&#125; //创建了一个空对象</span></span></span><br><span class="line"><span class="language-javascript">       <span class="comment">//方法1=============</span></span></span><br><span class="line"><span class="language-javascript">       <span class="keyword">var</span> person = &#123;</span></span><br><span class="line"><span class="language-javascript">           <span class="attr">pname</span>: <span class="string">&#x27;roydon&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">           <span class="attr">age</span>: <span class="number">18</span>,</span></span><br><span class="line"><span class="language-javascript">           <span class="attr">gender</span>: <span class="string">&#x27;man&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">           <span class="attr">getAge</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;<span class="comment">//方法</span></span></span><br><span class="line"><span class="language-javascript">               <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">age</span>);</span></span><br><span class="line"><span class="language-javascript">           &#125;</span></span><br><span class="line"><span class="language-javascript">       &#125;</span></span><br><span class="line"><span class="language-javascript">       <span class="comment">//获取属性的两种方法</span></span></span><br><span class="line"><span class="language-javascript">       <span class="comment">//1.</span></span></span><br><span class="line"><span class="language-javascript">       <span class="variable language_">console</span>.<span class="title function_">log</span>(person.<span class="property">pname</span>);</span></span><br><span class="line"><span class="language-javascript">       <span class="comment">//2.</span></span></span><br><span class="line"><span class="language-javascript">       <span class="variable language_">console</span>.<span class="title function_">log</span>(person[<span class="string">&#x27;age&#x27;</span>]);</span></span><br><span class="line"><span class="language-javascript">       person.<span class="title function_">getAge</span>();<span class="comment">//既然是方法，就要带()</span></span></span><br><span class="line"><span class="language-javascript">       <span class="comment">//方法2=============</span></span></span><br><span class="line"><span class="language-javascript">       <span class="keyword">var</span> person1 = <span class="keyword">new</span> <span class="title class_">Object</span>();</span></span><br><span class="line"><span class="language-javascript">       person1.<span class="property">pname</span> = <span class="string">&#x27;yicheng&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">       person1.<span class="property">age</span> = <span class="number">19</span>;</span></span><br><span class="line"><span class="language-javascript">       person1.<span class="property">gender</span> = <span class="string">&#x27;man&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">       person1.<span class="property">getAge</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">           <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">age</span>);</span></span><br><span class="line"><span class="language-javascript">       &#125;</span></span><br><span class="line"><span class="language-javascript">       <span class="comment">//获取属性两种方法同上</span></span></span><br><span class="line"><span class="language-javascript">       <span class="variable language_">console</span>.<span class="title function_">log</span>(person1);</span></span><br><span class="line"><span class="language-javascript">       person1.<span class="title function_">getAge</span>();</span></span><br><span class="line"><span class="language-javascript">       <span class="comment">//方法3==============构造函数法,首字母大写</span></span></span><br><span class="line"><span class="language-javascript">       <span class="keyword">function</span> <span class="title function_">Person3</span>(<span class="params">pname, age</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">           <span class="variable language_">this</span>.<span class="property">pname</span> = pname;</span></span><br><span class="line"><span class="language-javascript">           <span class="variable language_">this</span>.<span class="property">age</span> = age;</span></span><br><span class="line"><span class="language-javascript">           <span class="variable language_">this</span>.<span class="property">getAge</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">               <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">age</span>);</span></span><br><span class="line"><span class="language-javascript">           &#125;</span></span><br><span class="line"><span class="language-javascript">       &#125;</span></span><br><span class="line"><span class="language-javascript">       <span class="keyword">var</span> person3 = <span class="keyword">new</span> <span class="title class_">Person3</span>(<span class="string">&#x27;jack&#x27;</span>,<span class="number">20</span>);</span></span><br><span class="line"><span class="language-javascript">       person3.<span class="title function_">getAge</span>();</span></span><br><span class="line"><span class="language-javascript">   </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>遍历forin：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//遍历</span><br><span class="line">for (const key in person3) &#123;</span><br><span class="line">if (Object.hasOwnProperty.call(person3, key)) &#123;</span><br><span class="line">const name = key;//属性名</span><br><span class="line">        console.log(name);</span><br><span class="line">        const element = person3[key];//值</span><br><span class="line">        console.log(element);</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/435b1e89d7b24328a648779092f62b04.png#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/8c1a634e63764b14b7fa829a521395b3.png#pic_center" alt="在这里插入图片描述"></p><p>日期Date对象：<br><img src="https://img-blog.csdnimg.cn/fc9b822aa2e84b80b41b13c38d38af32.png#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/5d89f7470a344763a664790c03d62333.png#pic_center" alt="在这里插入图片描述"><img src="https://img-blog.csdnimg.cn/54e4c08aff084f6986e28e6705ea98cf.png#pic_center" alt="在这里插入图片描述"></p><p>获取时间戳：</p><p><img src="https://img-blog.csdnimg.cn/9492127b916d4b149e5a5335bbe01308.png#pic_center" alt="在这里插入图片描述">为啥时是从1970年开始，自行百度。</p><p>时间戳转换成时分秒：</p><p><img src="https://img-blog.csdnimg.cn/bb14e26d3e1349a39c52306a7f9005f3.png#pic_center" alt="在这里插入图片描述"></p><p>倒计时案例：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">       <span class="comment">// 定义一个函数参数为倒计时结束时间</span></span></span><br><span class="line"><span class="language-javascript">       <span class="keyword">function</span> <span class="title function_">countDown</span>(<span class="params">time</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">           <span class="keyword">var</span> nowTime = +<span class="keyword">new</span> <span class="title class_">Date</span>();<span class="comment">//当前时间戳（毫秒数</span></span></span><br><span class="line"><span class="language-javascript">           <span class="keyword">var</span> inputTime = +<span class="keyword">new</span> <span class="title class_">Date</span>(time);<span class="comment">//输入时间的时间戳</span></span></span><br><span class="line"><span class="language-javascript">           <span class="keyword">var</span> times = (inputTime - nowTime) / <span class="number">1000</span>;</span></span><br><span class="line"><span class="language-javascript">           <span class="keyword">var</span> d = <span class="built_in">parseInt</span>(times / <span class="number">60</span> / <span class="number">60</span> / <span class="number">24</span>);<span class="comment">//天</span></span></span><br><span class="line"><span class="language-javascript">           d = d &lt; <span class="number">10</span> ? <span class="string">&#x27;0&#x27;</span> + d : d;<span class="comment">//个位数转成01，02，03形式</span></span></span><br><span class="line"><span class="language-javascript">           <span class="keyword">var</span> h = <span class="built_in">parseInt</span>(times / <span class="number">60</span> / <span class="number">60</span> % <span class="number">24</span>);<span class="comment">//时</span></span></span><br><span class="line"><span class="language-javascript">           h = h &lt; <span class="number">10</span> ? <span class="string">&#x27;0&#x27;</span> + h : h;</span></span><br><span class="line"><span class="language-javascript">           <span class="keyword">var</span> m = <span class="built_in">parseInt</span>(times / <span class="number">60</span> % <span class="number">60</span>);<span class="comment">//分</span></span></span><br><span class="line"><span class="language-javascript">           m = m &lt; <span class="number">10</span> ? <span class="string">&#x27;0&#x27;</span> + m : m;</span></span><br><span class="line"><span class="language-javascript">           <span class="keyword">var</span> s = <span class="built_in">parseInt</span>(times % <span class="number">60</span>);<span class="comment">//秒</span></span></span><br><span class="line"><span class="language-javascript">           s = s &lt; <span class="number">10</span> ? <span class="string">&#x27;0&#x27;</span> + s : s;</span></span><br><span class="line"><span class="language-javascript">           <span class="keyword">return</span> d + <span class="string">&#x27;天&#x27;</span> + h + <span class="string">&#x27;时&#x27;</span> + m + <span class="string">&#x27;分&#x27;</span> + s + <span class="string">&#x27;秒&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">       &#125;</span></span><br><span class="line"><span class="language-javascript">       <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">countDown</span>(<span class="string">&#x27;2022-7-8 20:00:00&#x27;</span>));</span></span><br><span class="line"><span class="language-javascript">       <span class="keyword">var</span> date = <span class="keyword">new</span> <span class="title class_">Date</span>();</span></span><br><span class="line"><span class="language-javascript">       <span class="variable language_">console</span>.<span class="title function_">log</span>(date);</span></span><br><span class="line"><span class="language-javascript">   </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>下面是模拟：<br><img src="https://img-blog.csdnimg.cn/bfa7d32024c245a9809fe96328717f00.gif#pic_center" alt="在这里插入图片描述"></p><h2 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h2><p>字符串基本操作</p><p><img src="https://img-blog.csdnimg.cn/f7cb7f572da44a5fa0223da8db82817a.png#pic_center" alt="在这里插入图片描述"></p><p><img src="https://img-blog.csdnimg.cn/fc8f3e5685a64322a4b2748644d5de2c.png#pic_center" alt="在这里插入图片描述"></p><p><img src="https://img-blog.csdnimg.cn/041a2f74361e4c46ad028372a5097dc0.png#pic_center" alt="在这里插入图片描述"><img src="https://img-blog.csdnimg.cn/fba820bfcd2f4ab1937d924e732d8939.png#pic_center" alt="在这里插入图片描述"></p><h1 id="Web-API"><a href="#Web-API" class="headerlink" title="Web API"></a>Web API</h1><p>应用程序编程接口</p><p><img src="https://img-blog.csdnimg.cn/6e4a6bded0be43ca9f0972714743411a.png#pic_center" alt="在这里插入图片描述"></p><h2 id="DOM"><a href="#DOM" class="headerlink" title="DOM"></a>DOM</h2><p><img src="https://img-blog.csdnimg.cn/799f22aa23434e3b90e558d075514b3c.png#pic_center" alt="在这里插入图片描述"></p><p>dom树：</p><p><img src="https://img-blog.csdnimg.cn/8205ade485154ab890558a32b2c53728.png#pic_center" alt="在这里插入图片描述"></p><p>每一个元素可以看作一个对象</p><h3 id="获取页面元素"><a href="#获取页面元素" class="headerlink" title="获取页面元素"></a>获取页面元素</h3><p><img src="https://img-blog.csdnimg.cn/9ed6688b80f7423080175e6166d11abb.png#pic_center" alt="在这里插入图片描述"></p><ol><li>根据ID获取（返回的是一个匹配到ID的DOM Element对象）</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">document.getElementById();</span><br></pre></td></tr></table></figure><p>可以使用<code>console.dir();</code>查看</p><ol><li>通过标签名获取（返回的是一个指定标签的集合）</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">element.getElementByTagName();</span><br></pre></td></tr></table></figure><ol><li>通过类名获取<br><img src="https://img-blog.csdnimg.cn/0be550ae3a2a4fae8a0e4ed7870ef415.png#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/40b440fd41b94dd58d6b58c273371e6d.png#pic_center" alt="在这里插入图片描述"></li></ol><h3 id="事件基础"><a href="#事件基础" class="headerlink" title="事件基础"></a>事件基础</h3><p>例如，点击一个按钮，弹出对话框</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span>&gt;</span></span><br><span class="line">    点我</span><br><span class="line"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><p>事件分为三部分：事件源、事件类型、事件处理程序。也叫事件三要素</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.事件源=事件被触发的对象（按钮）</span></span><br><span class="line"><span class="type">var</span> <span class="variable">btn</span> <span class="operator">=</span> document.getElementById(<span class="string">&#x27;btn&#x27;</span>);</span><br><span class="line"><span class="comment">//2.事件类型=如何触发，例如：点击，鼠标悬停，按键按下</span></span><br><span class="line"><span class="comment">//3.事件处理程序=函数赋值</span></span><br><span class="line">btn.onclick=function()&#123;</span><br><span class="line">alert(<span class="string">&#x27;点了我&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="操作元素"><a href="#操作元素" class="headerlink" title="操作元素"></a>操作元素</h3><ol><li>改变元素内容</li></ol><p><img src="https://img-blog.csdnimg.cn/94c88391714f48e8b6b71c0adc70bada.png#pic_center" alt="在这里插入图片描述"></p><p><img src="https://img-blog.csdnimg.cn/ed0bce2fd16e4abab9647b86a969ff49.png#pic_center" alt="在这里插入图片描述"></p><p><img src="https://img-blog.csdnimg.cn/8444dd7e2693464ebf6fdeaeee18d069.png#pic_center" alt="在这里插入图片描述"></p><p>同时，亦可获取标签，innerText获取内容（去空格和换行），</p><p>innerHtml获取元素加内容，（保留空格和换行）</p><p><strong>案例：密码框显示，隐藏密码</strong></p><p>html</p><p><img src="https://img-blog.csdnimg.cn/faef02e9627642dabc3a56214b15b8d9.png#pic_center" alt="在这里插入图片描述"></p><p>css<br><img src="https://img-blog.csdnimg.cn/55b7d39e6f9d4f92a799f7fef6d0d80f.png#pic_center" alt="在这里插入图片描述"></p><p>js</p><p><img src="https://img-blog.csdnimg.cn/bd00e9441a474a009ba09828f67ad01b.png#pic_center" alt="在这里插入图片描述"></p><hr><h3 id="DOM核心重点"><a href="#DOM核心重点" class="headerlink" title="DOM核心重点"></a>DOM核心重点</h3><p>获取过来的DOM元素是一个对象所以称为<strong>文档对象模型</strong></p><p><img src="https://img-blog.csdnimg.cn/9af5b9396ede48e18c845361379484c8.png#pic_center" alt="在这里插入图片描述"><br>DOM操作：<br>&gt;</p><blockquote><ol><li>创建</li></ol><ul><li><code>document.write</code></li><li><code>innerHTML</code></li><li><code>createElement</code></li></ul><ol><li>增</li></ol><ul><li><code>appendChild</code></li><li><code>insertBefore</code></li></ul><ol><li>删</li></ol><ul><li><code>removeChild</code></li></ul><ol><li>改(主要修改DOM元素的属性、内容、表单的值等)</li></ol><ul><li>修改元素属性：src、href、title等</li><li>修改普通元素内容：innerHTML、innerText</li><li>修改元素样式：style、className</li><li>修改表单元素：value、type、disabled等</li></ul><ol><li>查(获取DOM元素)</li></ol><ul><li>DOM提供的API方法：<strong>querySelector()</strong>、<strong>querySelectorAll()</strong>。(H5新方法，推荐)</li><li>利用节点操作获取元素：父(<strong>parentNode</strong>)、子(<strong>children</strong>)、兄弟(<strong>previousElementSibling、nextElementSibling</strong>)。</li></ul><ol><li>属性操作(可自定义属性)</li></ol><ul><li><code>setAttribute()</code>：设置DOM的属性值</li><li><code>getAttribute()</code>：得到DOM的属性值</li><li><code>removeAttribute()</code>移除属性</li></ul><ol><li>事件操作<br><img src="https://img-blog.csdnimg.cn/2f5299c045da4ff3b70635e19221f390.png" alt="12"></li></ol></blockquote><hr><h3 id="事件高级"><a href="#事件高级" class="headerlink" title="事件高级"></a>事件高级</h3><h4 id="1-注册事件（绑定事件）"><a href="#1-注册事件（绑定事件）" class="headerlink" title="1.注册事件（绑定事件）"></a>1.注册事件（绑定事件）</h4><p>注册事件两种方法：传统方式、方法监听注册方式</p><p><img src="https://img-blog.csdnimg.cn/47dea400b4e34db4ae8d8d7cbcf86dfc.png#pic_center" alt="在这里插入图片描述"><br><code>addEventListener()</code>事件监听方式</p><p><img src="https://img-blog.csdnimg.cn/4c7f0e396117441b890d22d22e6eeaf4.png#pic_center" alt="在这里插入图片描述"></p><h4 id="2-删除事件（解绑事件）"><a href="#2-删除事件（解绑事件）" class="headerlink" title="2.删除事件（解绑事件）"></a>2.删除事件（解绑事件）</h4><p>传统解绑方法：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">var</span> <span class="variable">divs</span> <span class="operator">=</span> document.querySelectorAll(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line">    divs[<span class="number">0</span>].onclick = function() &#123;</span><br><span class="line">        alert(<span class="number">11</span>);</span><br><span class="line">        <span class="comment">// 1. 传统方式删除事件</span></span><br><span class="line">        divs[<span class="number">0</span>].onclick = <span class="literal">null</span>;</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure><p>方法监听注册解绑方式：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 2. removeEventListener 删除事件</span></span><br><span class="line">    divs[<span class="number">1</span>].addEventListener(<span class="string">&#x27;click&#x27;</span>, fn) <span class="comment">// 里面的fn 不需要调用加小括号</span></span><br><span class="line">    function <span class="title function_">fn</span><span class="params">()</span> &#123;</span><br><span class="line">        alert(<span class="number">22</span>);</span><br><span class="line">        divs[<span class="number">1</span>].removeEventListener(<span class="string">&#x27;click&#x27;</span>, fn);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="3-DOM事件流"><a href="#3-DOM事件流" class="headerlink" title="3.DOM事件流"></a>3.DOM事件流</h4><p><img src="https://img-blog.csdnimg.cn/e4d7c92d2db342108b32962c6665fe45.png#pic_center" alt="在这里插入图片描述"></p><p><img src="https://img-blog.csdnimg.cn/3500fa66143341448cc60974b12243e3.png#pic_center" alt="在这里插入图片描述"></p><h4 id="4-事件对象event"><a href="#4-事件对象event" class="headerlink" title="4.事件对象event"></a>4.事件对象event</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 事件对象</span></span><br><span class="line"><span class="type">var</span> <span class="variable">div</span> <span class="operator">=</span> document.querySelector(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line">div.onclick = function(e) &#123;</span><br><span class="line">     console.log(e);</span><br><span class="line">    &#125;</span><br><span class="line">     <span class="comment">// 1. event 就是一个事件对象 写到我们侦听函数的 小括号里面 当形参来看</span></span><br><span class="line">     <span class="comment">// 2. 事件对象只有有了事件才会存在，它是系统给我们自动创建的，不需要我们传递参数</span></span><br><span class="line">     <span class="comment">// 3. 事件对象 是 我们事件的一系列相关数据的集合 跟事件相关的 比如鼠标点击里面就包含了鼠标的相关信息，鼠标坐标啊，如果是键盘事件里面就包含的键盘事件的信息 比如 判断用户按下了那个键</span></span><br><span class="line">     <span class="comment">// 4. 这个事件对象我们可以自己命名 比如 event 、 evt、 e</span></span><br></pre></td></tr></table></figure><p>常见属性和方法：<br>ie以si，下列方法结合实际记忆</p><p><img src="https://img-blog.csdnimg.cn/1307fd551d98435e88a8f16889c6516b.png#pic_center" alt="在这里插入图片描述"></p><h4 id="5-阻止事件冒泡"><a href="#5-阻止事件冒泡" class="headerlink" title="5.阻止事件冒泡"></a>5.阻止事件冒泡</h4><p><code>e.stopPropagation();</code> // stop 停止  Propagation 传播<br>下列代码为例，当点击父盒子中的son盒子时，不阻止事件冒泡，会发生弹出三个提示框(son、father和document)，阻止事件冒泡后，父亲元素不在冒泡弹出框。只弹出son提示框。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 常见事件对象的属性和方法</span></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 阻止冒泡  dom 推荐的标准 stopPropagation() </span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">var</span> son = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.son&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">  son.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">     <span class="title function_">alert</span>(<span class="string">&#x27;son&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">     e.<span class="title function_">stopPropagation</span>(); <span class="comment">// stop 停止  Propagation 传播</span></span></span><br><span class="line"><span class="language-javascript">  &#125;, <span class="literal">false</span>);</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">var</span> father = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.father&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">  father.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">alert</span>(<span class="string">&#x27;father&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">  &#125;, <span class="literal">false</span>);</span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">alert</span>(<span class="string">&#x27;document&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">  &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="6-事件委托"><a href="#6-事件委托" class="headerlink" title="6.事件委托"></a>6.事件委托</h4><p><img src="https://img-blog.csdnimg.cn/cb4b50b50d3243bcadf209af54bec205.png#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/f71572ab3e0f4f7fa195aca0300ff63a.png#pic_center" alt="在这里插入图片描述"></p><h4 id="7-鼠标事件"><a href="#7-鼠标事件" class="headerlink" title="7.鼠标事件"></a>7.鼠标事件</h4><p>常用：<br><img src="https://img-blog.csdnimg.cn/0ace545427f54d359863f88bf6726aa0.png#pic_center" alt="在这里插入图片描述"></p><p><img src="https://img-blog.csdnimg.cn/01dbfed084224cb8b80bd9943f7e83a8.png#pic_center" alt="在这里插入图片描述"><br><code>e.preventDefault();</code>阻止默认事件；阻止默认右键显示菜单操作；</p><p><img src="https://img-blog.csdnimg.cn/b7c347a4844445c28e761883fb04904b.png#pic_center" alt="在这里插入图片描述"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    // 1. contextmenu 禁用右键菜单</span><br><span class="line">    document.addEventListener(&#x27;contextmenu&#x27;, function(e) &#123;</span><br><span class="line">        e.preventDefault();</span><br><span class="line">    &#125;)</span><br><span class="line">    // 2. 禁止选中文字 selectstart</span><br><span class="line">    document.addEventListener(&#x27;selectstart&#x27;, function(e) &#123;</span><br><span class="line">        e.preventDefault();</span><br><span class="line">     &#125;)</span><br><span class="line"> &lt;/script&gt;</span><br></pre></td></tr></table></figure><p><strong>鼠标事件对象</strong>：<br>MouseEvent   —&gt;   clientX、pageX、screenX</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 鼠标事件对象 MouseEvent</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 1. client 鼠标在可视区的x和y坐标</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">clientX</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">clientY</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;---------------------&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 2. page 鼠标在页面文档的x和y坐标</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">pageX</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">pageY</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;---------------------&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 3. screen 鼠标在电脑屏幕的x和y坐标</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">screenX</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">screenY</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="8-键盘事件"><a href="#8-键盘事件" class="headerlink" title="8.键盘事件"></a>8.键盘事件</h4><p><img src="https://img-blog.csdnimg.cn/6ff7b610b44e4a21af29538c422ac1f3.png#pic_center" alt="在这里插入图片描述">例如，网站的搜索框一般会设置一个快捷键，当我们点击<strong>s</strong>键时，利用ASCII码判断按下的键是否为<strong>s</strong>若是则给搜索框一个焦点。<br><img src="https://img-blog.csdnimg.cn/b04f4ff70b5c4056a9a72050e178c459.gif#pic_center" alt="在这里插入图片描述"><br>源码：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        *&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">input</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: block;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">100px</span> auto;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">25px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid orange;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 核心思路： 检测用户是否按下了s 键，如果按下s 键，就把光标定位到搜索框里面</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 使用键盘事件对象里面的keyCode 判断用户按下的是否是s键</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 搜索框获得焦点： 使用 js 里面的 focus() 方法</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> search = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;input&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;keyup&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (e.<span class="property">keyCode</span> === <span class="number">83</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                search.<span class="title function_">focus</span>();</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><h2 id="BOM"><a href="#BOM" class="headerlink" title="BOM"></a>BOM</h2><p><img src="https://img-blog.csdnimg.cn/fa5b1f7ea9d44819b92ecfc2aacc6360.png#pic_center" alt="在这里插入图片描述"><img src="https://img-blog.csdnimg.cn/9e757bf86aa34fec966bb742b2b4413d.png" alt="在这里插入图片描述"></p><p><img src="https://img-blog.csdnimg.cn/a451192d08ee4900a82d2f73401deccd.png#pic_center" alt="在这里插入图片描述"></p><h3 id="window对象常见事件"><a href="#window对象常见事件" class="headerlink" title="window对象常见事件"></a>window对象常见事件</h3><h4 id="1-窗口加载事件"><a href="#1-窗口加载事件" class="headerlink" title="1.窗口加载事件"></a>1.窗口加载事件</h4><p><img src="https://img-blog.csdnimg.cn/21ab4f7305524801ada4cc5152fe2221.png#pic_center" alt="在这里插入图片描述"></p><p><img src="https://img-blog.csdnimg.cn/01932c000fb6487895dcc6b32307a528.png#pic_center" alt="在这里插入图片描述"></p><p><img src="https://img-blog.csdnimg.cn/e06d023e246d4c8ab78d37a73ee9c029.png#pic_center" alt="在这里插入图片描述"></p><p>// load 等页面内容全部加载完毕，包含页面dom元素 图片 flash  css 等等</p><p> // DOMContentLoaded 是DOM 加载完毕，不包含图片 falsh css 等就可以执行 加载速度比 load更快一些</p><h4 id="2-调整窗口大小事件"><a href="#2-调整窗口大小事件" class="headerlink" title="2.调整窗口大小事件"></a>2.调整窗口大小事件</h4><p><img src="https://img-blog.csdnimg.cn/5fdc9b48ab554d98a67dc5332734af25.png#pic_center" alt="在这里插入图片描述"></p><h3 id="定时器"><a href="#定时器" class="headerlink" title="定时器"></a>定时器</h3><p><img src="https://img-blog.csdnimg.cn/d64f5701bf9741929d819409a7b8e01c.png#pic_center" alt="在这里插入图片描述"></p><h4 id="1-setTimeout-定时器"><a href="#1-setTimeout-定时器" class="headerlink" title="1.setTimeout()定时器"></a>1.<code>setTimeout()</code>定时器</h4><p><img src="https://img-blog.csdnimg.cn/760b139a7fa44707b3386f63b045f0eb.png#pic_center" alt="在这里插入图片描述"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 1. setTimeout </span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 语法规范：  window.setTimeout(调用函数, 延时时间);</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 1. 这个window在调用的时候可以省略</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 2. 这个延时时间单位是毫秒 但是可以省略，如果省略默认的是0</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 3. 这个调用函数可以直接写函数 还可以写 函数名 还有一个写法 &#x27;函数名()&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 4. 页面中可能有很多的定时器，我们经常给定时器加标识符 （名字)</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// setTimeout(function() &#123;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//     console.log(&#x27;时间到了&#x27;);</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// &#125;, 2000);</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">callback</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;爆炸了&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> timer1 = <span class="built_in">setTimeout</span>(callback, <span class="number">3000</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> timer2 = <span class="built_in">setTimeout</span>(callback, <span class="number">5000</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// setTimeout(&#x27;callback()&#x27;, 3000); // 我们不提倡这个写法</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/c497adbcf6754b969ab289fd25da31fc.png#pic_center" alt="在这里插入图片描述"></p><p>停止<code>setTimeout()</code>定时器</p><p><img src="https://img-blog.csdnimg.cn/a9cf3d7b86c44893a691cc2c77d516e6.png#pic_center" alt="在这里插入图片描述"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>点击停止定时器<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> btn = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;button&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//先给定时器一个名称，根据名称指定停止</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> timer = <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;爆炸了&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;, <span class="number">5000</span>);</span></span><br><span class="line"><span class="language-javascript">    btn.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="built_in">clearTimeout</span>(timer);</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="2-setInterval-定时器"><a href="#2-setInterval-定时器" class="headerlink" title="2.setInterval()定时器"></a>2.<code>setInterval()</code>定时器</h4><p><img src="https://img-blog.csdnimg.cn/ee38a79113b04531837c58bbf95cedd2.png#pic_center" alt="在这里插入图片描述"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 1. setInterval </span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 语法规范：  window.setInterval(调用函数, 延时时间);</span></span></span><br><span class="line"><span class="language-javascript">    <span class="built_in">setInterval</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;继续输出&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;, <span class="number">1000</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 2. setTimeout  延时时间到了，就去调用这个回调函数，只调用一次 就结束了这个定时器</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 3. setInterval  每隔这个延时时间，就去调用这个回调函数，会调用很多次，重复调用这个函数</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="JS执行队列"><a href="#JS执行队列" class="headerlink" title="JS执行队列"></a>JS执行队列</h3><p><img src="https://img-blog.csdnimg.cn/d8daa1ffa79144ffa4080ef6f8cf02d3.png#pic_center" alt="在这里插入图片描述"></p><p><img src="https://img-blog.csdnimg.cn/86716ed034f749538315b5984379d0b7.png#pic_center" alt="在这里插入图片描述"></p><p>异步：<br><img src="https://img-blog.csdnimg.cn/0b82b536715b4ff688b41fc7676e3217.png#pic_center" alt="在这里插入图片描述"></p><h3 id="location对象"><a href="#location对象" class="headerlink" title="location对象"></a>location对象</h3><p>URL</p><p><img src="https://img-blog.csdnimg.cn/eaf8254b84ce44d7bb3e499dd65833ff.png#pic_center" alt="在这里插入图片描述"></p><p><img src="https://img-blog.csdnimg.cn/db1b388768ec4203a7915ab5218b6986.png#pic_center" alt="在这里插入图片描述">search得到的是网址主机问号？(包含)之后的数据，是string字符串</p><p>例如：<a href="https://editor.csdn.net/md/?articleId=1256752823244">https://editor.csdn.net/md/?articleId=1256752823244</a><br>location.search得到的是?articleId=1256752823244<br>可以用substr(1)方法去掉问号<br><img src="https://img-blog.csdnimg.cn/e258309605f547afaf024724fc66cc1d.png#pic_center" alt="在这里插入图片描述"></p><h3 id="navigator对象"><a href="#navigator对象" class="headerlink" title="navigator对象"></a>navigator对象</h3><p><img src="https://img-blog.csdnimg.cn/704703392ceb4c57b9e7574cc0c85378.png#pic_center" alt="在这里插入图片描述"></p><h3 id="history对象"><a href="#history对象" class="headerlink" title="history对象"></a>history对象</h3><p><img src="https://img-blog.csdnimg.cn/f947400924204f9dabe399927dbde1fd.png#pic_center" alt="在这里插入图片描述"></p><h2 id="PC端网页特效"><a href="#PC端网页特效" class="headerlink" title="PC端网页特效"></a>PC端网页特效</h2><p>丰富网页</p><h3 id="元素偏移量offset"><a href="#元素偏移量offset" class="headerlink" title="元素偏移量offset"></a>元素偏移量offset</h3><p><img src="https://img-blog.csdnimg.cn/a3a40b52b7c34a3e87dad066a9973636.png#pic_center" alt="在这里插入图片描述"></p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSS3</title>
      <link href="/posts/CSS3.html"/>
      <url>/posts/CSS3.html</url>
      
        <content type="html"><![CDATA[<h2 id="CSS基础认识"><a href="#CSS基础认识" class="headerlink" title="CSS基础认识"></a>CSS基础认识</h2><h3 id="基础认识"><a href="#基础认识" class="headerlink" title="基础认识"></a><strong>基础认识</strong></h3><p>中文名称：</p><ul><li>CSS：层叠样式表（Cascading style sheets）</li></ul><p>作用：</p><ul><li>给页面中的HTML标签设置样式。</li></ul><p><img src="https://img-blog.csdnimg.cn/58a67ab4414745c1805f83470693e3d2.png#pic_center" alt="在这里插入图片描述"></p><p>语法规范：</p><ul><li>css写在style标签中，style标签一般写在head标签里面，title标签下面</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- CSS位置 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="comment">/* 写在style标签中 */</span></span></span><br><span class="line"><span class="language-css">        <span class="comment">/* 选择器 */</span></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">p</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: pink;</span></span><br><span class="line"><span class="language-css">            <span class="comment">/* CSS属性 key：value */</span></span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: aqua;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">18px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="comment">/* 字体默认大小：16px */</span></span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>我是字体<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>实现效果：</p><p><img src="https://img-blog.csdnimg.cn/089740bf774d4eab9ee1552c320b9746.png#pic_center" alt="在这里插入图片描述"></p><hr><h3 id="css引入方式"><a href="#css引入方式" class="headerlink" title="css引入方式"></a>css引入方式</h3><p>➢ 内嵌式：CSS 写在style标签中，如上述方法</p><p>➢ 行内式：CSS 写在标签的style属性中</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;color: pink;&quot;</span>&gt;</span>我是字体<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><p>➢ 外联式：CSS 写在一个单独的.css文件中</p><p><img src="https://img-blog.csdnimg.cn/cf8284a7385547da819bc65e0be8b704.png#pic_center" alt="在这里插入图片描述"></p><hr><h3 id="选择器"><a href="#选择器" class="headerlink" title="选择器"></a><strong>选择器</strong></h3><h4 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h4><p>使用基础选择器在 HTML 中选择元素</p><ol><li>标签选择器 。选择的是一类标签，多个。</li></ol><p><code>标签名+&#123;CSS&#125;</code><br><img src="https://img-blog.csdnimg.cn/2965276b58be4e4ba3ba228ed6402fe1.png#pic_center" alt="在这里插入图片描述"></p><ol><li>类选择器。一个标签可以有多个类名(空格隔开)，多个标签可以用同一个类名。类选择器用的最多。</li></ol><p><code>.类名+&#123;CSS&#125;</code><br><img src="https://img-blog.csdnimg.cn/de9f09721aa04641a4d48a5d46c6efe7.png#pic_center" alt="在这里插入图片描述"></p><ol><li>id选择器。一个标签上只能有一个id属性值，一个id选择器只能选中一个标签。id一般配合js使用。</li></ol><p><code>#id+&#123;CSS&#125;</code><br><img src="https://img-blog.csdnimg.cn/3afecb02846e43c4b63de5d524d184c2.png#pic_center" alt="在这里插入图片描述"></p><ol><li>通配符选择器。在极特殊情况下才会用到。找到页面中所有的标签，设置样式。</li></ol><p><code>*+&#123;CSS&#125;</code><br><img src="https://img-blog.csdnimg.cn/907498e5db604c9d9c69bd5b0303e4f1.png#pic_center" alt="在这里插入图片描述"></p><p>效果·：</p><p><img src="https://img-blog.csdnimg.cn/7bd9da5aa65647f4996984bc02eb3f2e.png#pic_center" alt="在这里插入图片描述"></p><h4 id="进阶"><a href="#进阶" class="headerlink" title="进阶"></a>进阶</h4><p>后代选择器：选择父元素 后代中 满足条件的元素(<code>空格隔开</code>)</p><ul><li>选择器1<code> </code>选择器2+{}</li></ul><p>儿子选择器：选择父元素 子代中 满足条件的元素</p><ul><li>选择器1 &gt; 选择器2+{}</li></ul><p>并集选择器：同时选择多组标签，设置相同的样式</p><ul><li>选择器1 , 选择器2+{}</li></ul><p>交集选择器：选中页面中 同时满足 多个选择器的标签(<code>紧挨</code>)</p><ul><li>选择器1选择器2+{}</li></ul><p>hover伪类选择器：选中鼠标悬停在元素上的状态，设置样式</p><ul><li>选择器: hover +{}</li></ul><p>总结：</p><p><img src="https://img-blog.csdnimg.cn/a21c6b3ba50242a7a06776434b1f54be.png#pic_center" alt="在这里插入图片描述"></p><p>Emmet语法(vscode快捷写法):<br><img src="https://img-blog.csdnimg.cn/0e06229c7868494e98ccf560802abb76.png#pic_center" alt="在这里插入图片描述"></p><hr><h3 id="字体和文本样式"><a href="#字体和文本样式" class="headerlink" title="字体和文本样式"></a><strong>字体和文本样式</strong></h3><ol><li><p>字体样式</p><ul><li>字体大小：font-size</li></ul><blockquote><p>值：数字 + px</p><p>谷歌浏览器默认文字大小是16px</p></blockquote><ul><li>字体粗细：font-weight</li></ul><blockquote><p>值：</p><p>(1)、normal(正常)；bold(加粗)；（&lt;==常用）</p><p>(2)、纯数字：100~900的整百数；</p></blockquote><ul><li>字体样式：font-style</li></ul><blockquote><p>值：normal(正常)；italic(倾斜·)；</p></blockquote><ul><li>字体类型：font-family<br><img src="https://img-blog.csdnimg.cn/c872e86f00c1482a86b3d0867134dd68.png#pic_center" alt="在这里插入图片描述"></li></ul></li></ol><blockquote><p>值：”Microsoft YaHei”、微软雅黑、黑体、宋体、楷体等……</p><p>字体系列：sans-serif、serif、monospace等……</p><p>从左往右按照顺序查找，如果电脑中未安装该字体，则显示下一个字体，如果都不支持，此时会根据操作系统，显示最后字体系列的默认字体。</p></blockquote><ul><li><p>字体类型：font属性连写</p><blockquote><p>font（复合属性·）</p><p>连写方法·：font : style weight size family;</p><p>注意点：如果需要同时设置单独和连写形式 </p><p>• 要么把单独的样式写在连写的下面，要么写在连写的里面</p></blockquote></li></ul><ol><li>文本样式</li></ol><ul><li>文本缩进：text-indent:2em;//两字符</li><li>文本水平对齐方式：text-align</li></ul><p><img src="https://img-blog.csdnimg.cn/37a552c6a541494b82439576dc543eba.png#pic_center" alt="在这里插入图片描述"></p><ul><li>文本修饰：text-decoration</li></ul><blockquote><p>underline:：下划线</p><p>line-througt：删除线</p><p>overline：上划线</p><p>none：无修饰线，例如去掉超链接下划线</p></blockquote><ol><li>line-height行高</li></ol><blockquote><p>值：</p><p>(1)、数字px</p><p>(2)、倍数(根据当前文字大小)</p><p>line-height : 1 可以取消上下间距</p><p>注意：连写时size和line-height用’/‘隔开</p><p><img src="https://img-blog.csdnimg.cn/3e76fe62205a465fbc7c6d004c39461b.png#pic_center" alt="在这里插入图片描述"></p></blockquote><p>颜色：</p><p>文字颜色：color</p><p>背景颜色：background-color</p><p><img src="https://img-blog.csdnimg.cn/4a33fb45247947f9b5c240c8634c5bc8.png#pic_center" alt="在这里插入图片描述"></p><p>大盒子居中：<code>margin: 0 auto</code></p><hr><h3 id="背景相关属性"><a href="#背景相关属性" class="headerlink" title="背景相关属性"></a><strong>背景相关属性</strong></h3><ol><li>背景颜色（默认是透明：rgba(0,0,0,0)、transparent ）</li></ol><ul><li><code>background-color</code></li></ul><ol><li>背景图片（默认是在水平和垂直方向平铺）</li></ol><ul><li><code>background-image: url(&#39;图片路径&#39;)</code></li></ul><ol><li>背景平铺</li></ol><ul><li><code>background-repeat:</code><br><img src="https://img-blog.csdnimg.cn/9f1800885e094317b23197ebdf4e28b1.png#pic_center" alt="在这里插入图片描述"></li></ul><ol><li>背景位置</li></ol><ul><li><code>background-position: 水平位置  垂直位置;</code></li></ul><p><img src="https://img-blog.csdnimg.cn/727719325186477fa946e64fe25bbe1a.png#pic_center" alt="在这里插入图片描述"></p><ol><li>背景相关属性连写</li></ol><ul><li>推荐：<code>background：color image repeat position</code></li><li>例如：<code>background: url(./img/tb.gif) no-repeat left center;</code></li></ul><hr><h3 id="元素显示模式"><a href="#元素显示模式" class="headerlink" title="元素显示模式"></a><strong>元素显示模式</strong></h3><p>1、 块级元素block</p><blockquote><p>独占一行（一行只能显示一个）</p><p>宽度默认是父元素的宽度，高度默认由内容撑开 </p><p>可以设置宽高</p></blockquote><p>➢ 代表标签： <strong>div</strong>、<strong>p</strong>、<strong>h系列</strong>、ul、li、dl、dt、dd、form、header、nav、footer……</p><p>2、行内元素inline</p><blockquote><p>一行可以显示多个 </p><p>宽度和高度默认由内容撑开 </p><p>不可以设置宽高</p></blockquote><p>➢ 代表标签：<strong>a</strong>、<strong>span</strong> 、b、u、i、s、strong、ins、em、del……</p><p>3、行内块元素inline-block</p><blockquote><p>一行可以显示多个 </p><p>可以设置宽高</p></blockquote><p>➢ 代表标签：<strong>input</strong>、<strong>textarea</strong>、button、select……</p><p>4、元素显示模式转换</p><p><img src="https://img-blog.csdnimg.cn/96e30a14ebf44fe4951ed79767406a10.png#pic_center" alt="在这里插入图片描述"></p><p><img src="https://img-blog.csdnimg.cn/e3170b3272044304ade64302c5893f85.png#pic_center" alt="在这里插入图片描述"></p><hr><h3 id="CSS特性"><a href="#CSS特性" class="headerlink" title="CSS特性"></a>CSS特性</h3><ol><li>继承性 2. 层叠性</li></ol><p>控制文字的都能继承</p><p>优先级：</p><p><img src="https://img-blog.csdnimg.cn/93f50ab745264ce494c2fc96632732b9.png#pic_center" alt="在这里插入图片描述"></p><p>权重：（行内，id，类，标签）</p><hr><h2 id="盒子模型"><a href="#盒子模型" class="headerlink" title="盒子模型"></a>盒子模型</h2><ol><li>内容区域的宽度和高度 3. 边框（ border ） 4. 内边距（ padding ） 5. 外边距（margin）</li></ol><p>页面中的每一个标签，都可看做是一个 “盒子”，通过盒子的视角更方便的进行布局.浏览器在渲染（显示）网页时，会将网页中的元素看做是一个个的矩形区域，我们也形象的称之为 盒子。</p><p>➢ CSS 中规定每个盒子分别由：内容区域（content）、内边距区域（padding）、边框区域（border）、外边距区域（ margin）构成，这就是 盒子模型</p><hr><h3 id="组成"><a href="#组成" class="headerlink" title="组成"></a>组成</h3><p>1.内容区域：content </p><p>2.边框区域：border </p><p>3.内边距区域：padding </p><p>4.外边距区域：margin</p><p>width 和 height 属性默认设置是盒子 内容区域 的大小</p><hr><h3 id="边框（-border-）"><a href="#边框（-border-）" class="headerlink" title="边框（ border ）"></a>边框（ border ）</h3><p><img src="https://img-blog.csdnimg.cn/cf90c4c9fade4c03ba7caf3fa6f7f5af.png#pic_center" alt="在这里插入图片描述"></p><p>一般直接属性连写：如：<code>border : 10px solid red;</code></p><p>当只给盒子的某个方向单独设置边框：<code>border - 方位名词 : 10px solid red</code></p><p><img src="https://img-blog.csdnimg.cn/944fe26e9ab44da799990224db0e6e66.png#pic_center" alt="在这里插入图片描述"></p><p>例如，下面代码设置盒子模型：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">div</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: pink;</span></span><br><span class="line"><span class="language-css">            <span class="comment">/* 边框线border */</span></span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">10px</span> solid orange;</span></span><br><span class="line"><span class="language-css">            <span class="comment">/* 内边框padding */</span></span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="comment">/* 外边框margin */</span></span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>Hello World<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>Hello CSS<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>效果：</p><p><img src="https://img-blog.csdnimg.cn/36c6114116864de2be41ecc2c290d1c8.gif#pic_center" alt="在这里插入图片描述"></p><p><img src="https://img-blog.csdnimg.cn/6f276db888684a5187da0c36b0cda155.png#pic_center" alt="在这里插入图片描述"></p><hr><h3 id="内边距（-padding-）"><a href="#内边距（-padding-）" class="headerlink" title="内边距（ padding ）"></a>内边距（ padding ）</h3><p>设置 边框 与 内容区域 之间的距离</p><p><img src="https://img-blog.csdnimg.cn/2e4bc0749185485a9a5a0d900280e109.png#pic_center" alt="在这里插入图片描述"></p><p>➢ 给盒子设置四周 20px 的内边距</p><p> • padding : 20px ; </p><p>➢ 给盒子设置上下20px、左右30px的内边距</p><p> • padding : 20px 30px ; </p><p>➢ 给盒子设置左侧50px的内边距</p><p>• padding-left : 50px ;</p><p><img src="https://img-blog.csdnimg.cn/c235e8b662194e1da0f502e12ca8a760.png#pic_center" alt="在这里插入图片描述"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/* 固定盒子尺寸 */</span><br><span class="line">box-sizing: border-box;</span><br></pre></td></tr></table></figure><hr><h3 id="外边距（margin）"><a href="#外边距（margin）" class="headerlink" title="外边距（margin）"></a>外边距（margin）</h3><p>清除内外边框：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">margin: 0;</span><br><span class="line">padding: 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> 外边距折叠现象：</p><p>垂直布局的块级元素，上下margin会合并</p><p><code>塌陷现象(子的margin顶开了父)解决</code>：</p><ol><li>给父元素设置border-top 或者 padding-top（分隔父子元素的margin-top）</li><li>给父元素设置<code>overflow：hidden</code></li><li>转换成行内块元素</li><li>设置浮动</li></ol><p>行内元素加margin和padding只有水平生效</p><hr><h3 id="附加：父盒子中小盒子居中方法（多种）："><a href="#附加：父盒子中小盒子居中方法（多种）：" class="headerlink" title="附加：父盒子中小盒子居中方法（多种）："></a>附加：父盒子中小盒子居中方法（多种）：</h3><p>基础 HTML 界面：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>HTML5<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        * &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">box-sizing</span>: border-box;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.father</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">500px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">500px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: pink;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">0</span> auto;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.son</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: aqua;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: pink;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;father&quot;</span>&gt;</span>父盒子</span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;son&quot;</span>&gt;</span>俺是子盒子<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="C:\Users\31330\Pictures\Typora\image-20220917232355358.png" alt="image-20220917232355358"></p><h4 id="1-利用position-absolute与transform"><a href="#1-利用position-absolute与transform" class="headerlink" title="1.利用position:absolute与transform"></a>1.利用position:absolute与transform</h4><p>这里需要记住的是transform中translate使用百分比时相对的是自己的长宽，不是父盒子的。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.father</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.son</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateX</span>(-<span class="number">50%</span>) <span class="built_in">translateY</span>(-<span class="number">50%</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-利用flex布局"><a href="#2-利用flex布局" class="headerlink" title="2.利用flex布局"></a>2.利用flex布局</h4><p>flex布局，设置水平与竖直方向的内容居中。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.father</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.son</span> &#123;&#125;</span><br></pre></td></tr></table></figure><h4 id="3-position-absolute-配合定位与margin：auto"><a href="#3-position-absolute-配合定位与margin：auto" class="headerlink" title="3.position:absolute 配合定位与margin：auto"></a>3.position:absolute 配合定位与margin：auto</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.father</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.son</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">margin</span>: auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-display-table-cell"><a href="#4-display-table-cell" class="headerlink" title="4. display:table-cell"></a>4. display:table-cell</h4><p>display:table-cell；与vertical-align:middle 的作用是让子盒子在数值方向上居中</p><p>margin:auto;则让子盒子在水平方向居中，若只想让盒子在某个方向居中，去掉另一个就可以了。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.father</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: table-cell;</span><br><span class="line">    <span class="attribute">vertical-align</span>: middle;</span><br><span class="line">    <span class="comment">/* 父盒子margin居中会消失 */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.son</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="5-position-absolute-与负margin配合"><a href="#5-position-absolute-与负margin配合" class="headerlink" title="5.position:absolute 与负margin配合"></a>5.position:absolute 与负margin配合</h4><p>这种方法只适合子盒子长宽固定的情况；</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.father</span> &#123;</span><br><span class="line"><span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.son</span> &#123;</span><br><span class="line"><span class="attribute">position</span>: absolute;</span><br><span class="line"><span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line"><span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line"><span class="attribute">margin-top</span>: -<span class="number">100px</span>;</span><br><span class="line"><span class="attribute">margin-left</span>: -<span class="number">100px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="6-display-inline-block"><a href="#6-display-inline-block" class="headerlink" title="6.display:inline-block"></a>6.display:inline-block</h4><p>text-align:center 让子盒子水平居中，</p><p>line-height:500px 与 子盒子的vertical-align:middel共同作用使子盒子垂直居中。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.father</span> &#123;</span><br><span class="line"><span class="attribute">line-height</span>: <span class="number">500px</span>;</span><br><span class="line"><span class="attribute">text-align</span>:center;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.son</span> &#123;</span><br><span class="line"><span class="attribute">display</span>:inline-block;</span><br><span class="line"><span class="attribute">vertical-align</span>:middle;</span><br><span class="line"><span class="attribute">line-height</span>:<span class="number">1rem</span>;</span><br><span class="line"><span class="attribute">color</span>:black;</span><br><span class="line">    <span class="comment">/* 子盒子中内容会水平居中，父盒子有内容子盒子居中效果消失 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="浮动"><a href="#浮动" class="headerlink" title="浮动"></a>浮动</h2><p>为什么使用浮动？</p><p>当我们运行下面代码：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">div</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: inline-block;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.left</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: aqua;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.right</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: pink;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span>left<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span>right<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>我们希望得到的是两个行内块div，而且这两个div没有设置间距，但上面代码的效果却带了间距：</p><p><img src="https://img-blog.csdnimg.cn/14f42f8c514b491ea328e221291402d3.png#pic_center" alt="在这里插入图片描述"></p><p>这是由于浏览器解析行内或行内块标签时，若标签换行，那么效果也出现一个换行的距离。</p><p><img src="https://img-blog.csdnimg.cn/e0f56b6d52594ca88451ffe5053e2f44.png#pic_center" alt="在这里插入图片描述"></p><p>但是若不换行，全部标签放一行，大大降低了代码的可读性和难度。所以就引入了浮动。</p><hr><h3 id="结构伪类选择器"><a href="#结构伪类选择器" class="headerlink" title="结构伪类选择器"></a>结构伪类选择器</h3><p>根据元素在HTML中的结构关系查找元素,查找某父级选择器中的子元素.</p><p><img src="https://img-blog.csdnimg.cn/701c2ed7ab8d4781b9f7f4e206cd8dc2.png#pic_center" alt="在这里插入图片描述"></p><p><img src="https://img-blog.csdnimg.cn/c00ea4e4c6ed49f0984edbff50f169c3.png#pic_center" alt="在这里插入图片描述"></p><p>小括号里的n可以为数学公式，例如：</p><p>n为0、1、2、3……</p><p><img src="https://img-blog.csdnimg.cn/1c161ebf84204ffda0992d30c8f03113.png#pic_center" alt="在这里插入图片描述"></p><hr><h3 id="伪元素"><a href="#伪元素" class="headerlink" title="伪元素"></a>伪元素</h3><p>伪标签，由CSS创建</p><p><img src="https://img-blog.csdnimg.cn/3715ffeb69d74030bb8b2e628f01d8bd.png#pic_center" alt="在这里插入图片描述"></p><ul><li>必须设置content属性才能生效、伪元素默认是行内元素</li></ul><p>例如：</p><p><img src="https://img-blog.csdnimg.cn/b8c9d12c5bdf4b1b9b127c0cf5ca30a5.png#pic_center" alt="在这里插入图片描述"></p><hr><h3 id="标准流"><a href="#标准流" class="headerlink" title="标准流"></a>标准流</h3><p>➢ 标准流：又称文档流，是浏览器在渲染显示网页内容时默认采用的一套排版规则，规定了应该以何种方式排列元素。</p><p>➢ 常见标准流排版规则： </p><ol><li>块级元素：从上往下，垂直布局，独占一行 </li><li>行内元素 或 行内块元素：从左往右，水平布局，空间不够自动折行</li></ol><hr><h3 id="浮动-1"><a href="#浮动-1" class="headerlink" title="浮动"></a>浮动</h3><p>例如word里的图片环绕文字四周。</p><p>float: left;让图片在左侧浮动</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">img</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">80px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.img2</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;img1&quot;</span> <span class="attr">src</span>=<span class="string">&quot;./img/csdn_head.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span>图片浮动例如word里的图片环绕文字四周......</span><br><span class="line">    <span class="tag">&lt;<span class="name">hr</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;img2&quot;</span> <span class="attr">src</span>=<span class="string">&quot;./img/csdn_head.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span>图片浮动例如word里的图片环绕文字四......</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>效果：</p><p><img src="https://img-blog.csdnimg.cn/6230354771b5437ca666335b6eac4c33.png#pic_center" alt="在这里插入图片描述"></p><p>现在运用到前端中，就需要让两个div一个在左端，一个在右端</p><p>特点：类似于图层的概念，脱离了标准流，像两张卡片，叠放在一起，不会影响原标签，一行可以有多个，可以设置宽高(行内块)</p><p>下一个浮动会挨着上一个浮动</p><p>浮动标签的<code>margin: 0 auto;</code>居中失效，但可外面嵌套div实现</p><hr><h3 id="清除浮动"><a href="#清除浮动" class="headerlink" title="清除浮动"></a>清除浮动</h3><p>作用：清除浮动带来的影响</p><p>场景：父盒子不方便设置高度，子孩子有多少内容展示多少，父盒子高度变化不固定。</p><blockquote><p>解决</p><ol><li>给父元素设置高度（脱裤子放屁，来回麻烦）</li><li>(额外标签法)：在父元素最后加个块级元素，给块级元素设置<code>clear:both</code>==&gt;缺点：麻烦</li><li>(单伪元素清除法)：在2的基础上，用伪元素替代额外标签，添加到父标签class中即可</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.clearfix::after&#123;</span><br><span class="line">content: &#x27;&#x27;;</span><br><span class="line">display: block;/*伪元素标签行内转块*/</span><br><span class="line">clear: both;</span><br><span class="line">/*下面两行是补充，为了一些浏览器的兼容性可以不写*/</span><br><span class="line">/*height: 0;*/</span><br><span class="line">/*visibility: hidden;*/</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>双伪元素(强👍)</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.clearfix::before,/*解决外边框塌陷*/</span><br><span class="line">.clearfix::after&#123;</span><br><span class="line">content: &#x27;&#x27;;</span><br><span class="line">display: table;</span><br><span class="line">&#125;</span><br><span class="line">.clearfix::after&#123;</span><br><span class="line">clear: both;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>给父设置<code>overflow: hidden;</code></li></ol></blockquote><hr><h2 id="定位"><a href="#定位" class="headerlink" title="定位"></a>定位</h2><h3 id="基本介绍"><a href="#基本介绍" class="headerlink" title="基本介绍"></a>基本介绍</h3><p><strong>网页常见的布局方式</strong>：</p><p>1.标准流</p><blockquote><ul><li>块级元素独占一行 ==&gt; 垂直布局。例如：h系列，p，div……</li><li><img src="https://img-blog.csdnimg.cn/5e99a6755b43475d9b3e27d21945d612.png#pic_center" alt="在这里插入图片描述"></li></ul></blockquote><p>&gt;</p><blockquote><ul><li>行内元素/行内块元素一行显示多个 ==&gt; 水平布局。例如：a，input，span……</li><li><img src="https://img-blog.csdnimg.cn/f1ab8f265e11484ab193d55029924e44.png#pic_center" alt="在这里插入图片描述"></li></ul></blockquote><p>2.浮动</p><blockquote><p>可以让原本垂直布局的 块级元素变成水平布局,子元素嵌入进父元素上方，父元素内容环绕浮动子元素，上方有介绍，类似于图层的概念或微软word中图片环绕文字四周概念。</p></blockquote><p>3.定位</p><blockquote><p>让元素摆放在网页的==任意位置==。一般用于盒子之间的叠层情况。</p></blockquote><p>使用场景：</p><ul><li><p>解决盒子之间的层叠问题，定位之后的元素层级最高，可以层叠在其他盒子上面。</p></li><li><p>可以让盒子始终固定在屏幕中的某个位置</p></li></ul><p>例如，完成下图的效果(盒子之间有叠层问题)需要什么步骤？</p><p><img src="https://img-blog.csdnimg.cn/c6f016c18d4c4c928fff6acf4f16fd80.png#pic_center" alt="在这里插入图片描述"></p><blockquote><p>1.设置定位：</p><ul><li>静态定位：static</li><li>相对定位：relative</li><li>绝对定位：absolute</li><li>固定定位：fixed</li></ul><p>2.设置偏移量：水平+垂直就近各取一个<br><img src="https://img-blog.csdnimg.cn/5b0f62f11159448b8df9be9fb72fc757.png#pic_center" alt="在这里插入图片描述"></p></blockquote><hr><h3 id="静态定位"><a href="#静态定位" class="headerlink" title="静态定位"></a>静态定位</h3><p><code>position:static;</code></p><p>默认就是静态定位，就是之前认为的标准流。不能通过方位属性进行移动。</p><hr><h3 id="相对定位"><a href="#相对定位" class="headerlink" title="相对定位"></a>相对定位</h3><p><code>position:relative;</code></p><p>配合方位属性，相对于<strong>自己原来位置</strong>进行移动。适用于小范围移动。移动后原来位置还存在。</p><p>例如，执行下面代码：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.div1</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: pink;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.div2</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="built_in">rgb</span>(<span class="number">80</span>, <span class="number">226</span>, <span class="number">197</span>);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">bottom</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;div1&quot;</span>&gt;</span>俺是div块级元素<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;div2&quot;</span>&gt;</span>俺是div块级元素<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>原来的div还在那占着位置<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>得到的效果：</p><p><img src="https://img-blog.csdnimg.cn/994f692dbbd446aaadefadce6f0d38aa.png#pic_center" alt="在这里插入图片描述"></p><p>剖析：</p><p><img src="https://img-blog.csdnimg.cn/2c0993c23d09422dbf586fa8edd44afd.png#pic_center" alt="在这里插入图片描述"></p><blockquote><p>注意：</p><p>添加了相对定位position:relative;后，当left和right都有，只有left会生效，当top和bottom都有，只有top会生效。</p><p>属性值可以为负数。</p><p>(后来者居上；div1添加<code>z-index: 1;</code>会让第一个块盖住第二个块)</p></blockquote><hr><h3 id="绝对定位"><a href="#绝对定位" class="headerlink" title="绝对定位"></a>绝对定位</h3><p><code>position:absolute;</code></p><p>需要找父级(子绝对定位，父相对定位。—&gt;子绝父相)：</p><ul><li>1.若父级(/爷级…..)有定位属性，根据父级为参照进行定位</li><li>2.若父级无定位属性，根据浏览器窗口进行定位</li></ul><p>且具备了行内块特点，可设置宽高。</p><p>在页面中不占位置—&gt;已经脱标。变成了行内块</p><blockquote><p>注意：</p><p>绝对定位后的盒子不能使用<code>margin: 0 auto;</code>进行居中；但可以用如下方法：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">position: absolute;<span class="comment">//绝对定位</span></span><br><span class="line"><span class="comment">/*水平居中*/</span></span><br><span class="line">left: <span class="number">50</span>%;</span><br><span class="line">margin-left: -(盒子宽度/<span class="number">2</span>);<span class="comment">/*负的盒子宽度的一半*/</span></span><br><span class="line"><span class="comment">/*垂直居中同理*/</span></span><br><span class="line">top: <span class="number">50</span>%;</span><br><span class="line">margin-top: -(盒子高度/<span class="number">2</span>);<span class="comment">/*负的盒子高度的一半*/</span></span><br></pre></td></tr></table></figure><p>上面的方法仔细观察没办法满足盒子宽高为奇数的情况，如宽401px，像素不能设置成小数，所以可以用下面方法：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">position: absolute;<span class="comment">//绝对定位</span></span><br><span class="line">left: <span class="number">50</span>%;</span><br><span class="line">top: <span class="number">50</span>%;</span><br><span class="line"><span class="comment">/*位移：自己宽度高度的一半*/</span></span><br><span class="line">transform: translate(-<span class="number">50</span>%,-<span class="number">50</span>%);</span><br></pre></td></tr></table></figure></blockquote><h3 id="固定定位"><a href="#固定定位" class="headerlink" title="固定定位"></a>固定定位</h3><p><code>position:fixed;</code></p><p>相对于浏览器进行定位移动，配合四个方位属性使用。脱标(在页面中不占位置)。</p><p>例如：某些网页的导航固定在头部</p><hr><h2 id="装饰"><a href="#装饰" class="headerlink" title="装饰"></a>装饰</h2><h3 id="垂直对齐"><a href="#垂直对齐" class="headerlink" title="垂直对齐"></a>垂直对齐</h3><p>小时候用英语本练英语时，都知道单词书写规范如下：</p><p><img src="https://img-blog.csdnimg.cn/8ce8652a2342460d84ee779d3d11f41a.png#pic_center" alt="在这里插入图片描述"></p><p>所以前端也是按照这样，处理<strong>行内块</strong>和<strong>行内</strong>元素时按照文字特点解析，以基线为基准对齐。</p><p><img src="https://img-blog.csdnimg.cn/a0ded6fb3de045df9de0317ef6a06670.png#pic_center" alt="在这里插入图片描述"></p><p><img src="https://img-blog.csdnimg.cn/27cf1672f2ac4a85873a3ec9e749a2f0.png#pic_center" alt="在这里插入图片描述"></p><p><a href="https://www.bilibili.com/video/BV1Kg411T7t9?p=159">几种案例1</a></p><p><a href="https://www.bilibili.com/video/BV1Kg411T7t9?p=160">几种案例2</a></p><hr><h3 id="光标类型"><a href="#光标类型" class="headerlink" title="光标类型"></a>光标类型</h3><p>即鼠标光标在元素上时显示的样式。</p><p><img src="https://img-blog.csdnimg.cn/c425f8594fd04d298b546ad71eb1b346.png#pic_center" alt="在这里插入图片描述"></p><hr><h3 id="边框圆角"><a href="#边框圆角" class="headerlink" title="边框圆角"></a>边框圆角</h3><p>属性名：<code>border-radius</code></p><p>属性值：数字+px、百分比</p><p><img src="https://img-blog.csdnimg.cn/bb62b645498c416ab4913ab0e42c04f5.png#pic_center" alt="在这里插入图片描述"></p><blockquote><p>原理：<br><img src="https://img-blog.csdnimg.cn/e7f65a4db3184b998587200f7402fa71.png#pic_center" alt="在这里插入图片描述"></p></blockquote><p>&gt;</p><blockquote><p>赋值规则：从左上角开始赋值，然后顺时针赋值，没有赋值的看对角！</p><p>如：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/*只给左上、右上、右下进行了赋值*/</span><br><span class="line">border-radius: 40px 80px 120px;</span><br></pre></td></tr></table></figure><p>效果：<br><img src="https://img-blog.csdnimg.cn/3159bc99586c4e4c9e1995105339f1e3.png#pic_center" alt="在这里插入图片描述"></p></blockquote><p>案例：</p><p>1.画圆圈：（盒子必须是正方形，边框圆角为盒子宽高一半）</p><p>添加属性：<code>border-radius: 50%</code></p><p><img src="https://img-blog.csdnimg.cn/f6ee8d6a56ae4463ac73a2fc45f3c939.png#pic_center" alt="在这里插入图片描述"></p><p>源码：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        * &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.box</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">800px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="built_in">rgb</span>(<span class="number">247</span>, <span class="number">190</span>, <span class="number">190</span>);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">0</span> auto;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-top</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">0</span> <span class="number">150px</span> <span class="number">150px</span> <span class="number">0</span>;<span class="comment">/*box右侧贴紧圆*/</span></span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.every</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="built_in">rgb</span>(<span class="number">248</span>, <span class="number">110</span>, <span class="number">110</span>);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.box</span> <span class="selector-tag">div</span><span class="selector-pseudo">:nth-child</span>(<span class="number">1</span>) &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.box</span> <span class="selector-tag">div</span><span class="selector-pseudo">:last-child</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">float</span>: right;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.circle</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">50%</span></span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">h1</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: inline-block;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">80px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: aliceblue;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">line-height</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;every&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>==&gt;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;circle every&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>2.胶囊按钮：（盒子为长方形）</p><p><img src="https://img-blog.csdnimg.cn/25ab74c772cf4af6ab6d4eb9514cfd5b.gif#pic_center" alt="在这里插入图片描述"></p><p><code>border-radius: 40px 40px;/*切割圆角，高度一半*/</code></p><p>源码：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>胶囊按钮<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        * &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.jiaonang</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: block;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">80px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: absolute;<span class="comment">/*绝对定位，相对于浏览器*/</span></span></span><br><span class="line"><span class="language-css">            <span class="comment">/*下面三行是设置绝对定位的居中*/</span></span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>,-<span class="number">50%</span>);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: pink;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: none;<span class="comment">/*去除按钮原有的边框线*/</span></span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">40px</span> <span class="number">40px</span>;<span class="comment">/*切割圆角，高度一半*/</span></span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: blueviolet;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.jiaonang</span><span class="selector-pseudo">:hover</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">cursor</span>: pointer;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: aliceblue;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: blueviolet;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;jiaonang&quot;</span>&gt;</span>点我<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> btn = <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&#x27;jiaonang&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    btn[<span class="number">0</span>].<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">alert</span>(<span class="string">&#x27;点了我&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><h3 id="overflow溢出部分显示效果"><a href="#overflow溢出部分显示效果" class="headerlink" title="overflow溢出部分显示效果"></a>overflow溢出部分显示效果</h3><p>如下图，当盒子为固定高度，但里面的内容过多就会出现内容溢出情况。</p><p><img src="https://img-blog.csdnimg.cn/c3c4473c4a3740a6a5583068b1ba1b77.png#pic_center" alt="在这里插入图片描述"></p><p>解决：<code>overflow</code></p><p><img src="https://img-blog.csdnimg.cn/663313351e0246da968481c692ded68a.png#pic_center" alt="在这里插入图片描述"></p><p>案例：</p><p><img src="https://img-blog.csdnimg.cn/213de5ab1f7c47769d0f06cd435bb156.png#pic_center" alt="在这里插入图片描述"></p><hr><h3 id="元素本身隐藏"><a href="#元素本身隐藏" class="headerlink" title="元素本身隐藏"></a>元素本身隐藏</h3><p>场景：例如某些网站的导航，当鼠标悬停会出现元素</p><p><img src="https://img-blog.csdnimg.cn/bc1ea0dfde544d558e915e8c6c2dd806.gif#pic_center" alt="在这里插入图片描述"></p><p>常见属性：</p><blockquote><ul><li>1.<code>visibility：hidden</code>/<em>占位隐藏</em>/</li><li>2.<code>display：none</code>/<em>不占位隐藏</em>/（常用）</li></ul></blockquote><p>扩展标签：</p><p>元素整体透明度：opacity: +小数;</p><p>链接伪类选择器：</p><p><img src="https://img-blog.csdnimg.cn/445e0633a78f4fa6b6ef1a10ee638400.png#pic_center" alt="在这里插入图片描述"></p><p>焦点伪类选择器：（用于表单控件）</p><p><img src="https://img-blog.csdnimg.cn/171e6358eae24741a988e618df158ca0.png#pic_center" alt="在这里插入图片描述"></p><hr><hr><hr><hr>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTML5</title>
      <link href="/posts/HTML5.html"/>
      <url>/posts/HTML5.html</url>
      
        <content type="html"><![CDATA[<h1 id="一、基础认识"><a href="#一、基础认识" class="headerlink" title="一、基础认识"></a>一、基础认识</h1><p>浏览器：网页运行，显示平台、五大浏览器</p><p><img src="https://img-blog.csdnimg.cn/da2e72992a5440a9818bbf59ded2bf8a.png#pic_center" alt="在这里插入图片描述"></p><p>浏览器渲染引擎</p><p><img src="https://img-blog.csdnimg.cn/fba5618d57d643b39972dfec6470566f.png#pic_center" alt="在这里插入图片描述"></p><p>不同浏览器遵循一个Web标准</p><p><img src="https://img-blog.csdnimg.cn/1b401de747764ce3ac9002a840c983ff.png#pic_center" alt="在这里插入图片描述"></p><h1 id="二、HTML"><a href="#二、HTML" class="headerlink" title="二、HTML"></a>二、HTML</h1><p>(Hyper Text Markup Lanuage)==&gt;超文本标记语言</p><p>注释：</p><!--  --><p>标签：</p><ul><li><p>双标签：</p><p>eg：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">strong</span>&gt;</span>自体加粗<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><ul><li>单标签：不可包裹内容</li></ul><h2 id="排版标签"><a href="#排版标签" class="headerlink" title="排版标签"></a>排版标签</h2><p>标题标签：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>一级标题<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>二级标题<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">。。。。。</span><br><span class="line"><span class="tag">&lt;<span class="name">h6</span>&gt;</span>六级标题<span class="tag">&lt;/<span class="name">h6</span>&gt;</span></span><br></pre></td></tr></table></figure><p>段落标签：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>段落内容。。。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><p>若(。・・)ノvsCode段落标签中内容过多，可<code>ALT + Z</code>自动换行</p><p>换行标签：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br></pre></td></tr></table></figure><p>水平线标签：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="文本格式化标签"><a href="#文本格式化标签" class="headerlink" title="文本格式化标签"></a>文本格式化标签</h2><p><img src="https://img-blog.csdnimg.cn/39c2e328f27142bdab51149031943383.png#pic_center" alt="在这里插入图片描述"></p><h2 id="媒体标签"><a href="#媒体标签" class="headerlink" title="媒体标签"></a>媒体标签</h2><p>图片标签：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;路径&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;替换文本（src失效显示）&quot;</span> <span class="attr">title</span>=<span class="string">&quot;鼠标悬停提示文本&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p>更多属性：width、height（只设置一个会保持原图比例，两个都设置自定义图片比例）</p><blockquote><p>路径：</p><ol><li>相对路径：（当前文件）</li></ol><ul><li><p>同级文件：<img src="https://img-blog.csdnimg.cn/7a75edb601da4909b94dc6ad613de8c4.png#pic_center" alt="在这里插入图片描述"></p></li><li><p>引用下级文件：<img src="https://img-blog.csdnimg.cn/b0eac75407a74332a4364be40a158fa0.png#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/f6b096de06944cc2baf340dc0286048d.png#pic_center" alt="在这里插入图片描述">或<code>&lt;img src=&quot;./images/图片.jpg&quot;&gt;</code></p></li><li><p>引用上级文件：<code>&lt;img src=&quot;../目标文件.gif&quot;&gt;</code></p></li></ul><ol><li>绝对路径：</li></ol><p>目录下的绝对位置，可直接到达目标位置，通常==从盘符开始==的路径</p><p><img src="https://img-blog.csdnimg.cn/6877a19463d7490ea3720c49db0f1289.png#pic_center" alt="在这里插入图片描述"></p></blockquote><p>音频标签（双标签）：</p><p><img src="https://img-blog.csdnimg.cn/673fd4e81398406a98d7122f6f7b3e25.png#pic_center" alt="在这里插入图片描述"></p><p>常见属性：<br><img src="https://img-blog.csdnimg.cn/d3be733e7aaf405b8638a7f8cfe707cd.png#pic_center" alt="在这里插入图片描述"></p><p><img src="https://img-blog.csdnimg.cn/c0a37b2004d847088f66c13ce3a01583.png#pic_center" alt="在这里插入图片描述"></p><p>目前此标签支支持三种格式：==MP3、Wav、Ogg==</p><p>视频标签：（常见属性见音频标签）</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">video</span> <span class="attr">src</span>=<span class="string">&quot;&quot;</span> <span class="attr">controls</span>&gt;</span><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/ecb24a5d5e8848a1a28985a0a2335cf3.png#pic_center" alt="在这里插入图片描述"></p><p><img src="https://img-blog.csdnimg.cn/c426ec70fc76450eb52ba251a86a8a6e.png#pic_center" alt="在这里插入图片描述"></p><h2 id="连接标签"><a href="#连接标签" class="headerlink" title="连接标签"></a>连接标签</h2><p><img src="https://img-blog.csdnimg.cn/f15e613158d04fe0a80bdb6fab74abc5.png#pic_center" alt="在这里插入图片描述"></p><p>href=”#”表示空链接，还没有确定目标页面</p><p>属性：</p><ul><li>target：（打开网页的形式）</li></ul><p><img src="https://img-blog.csdnimg.cn/7e55eb2acd7c4e898ee9efe9d818ccd1.png#pic_center" alt="在这里插入图片描述"></p><p><img src="https://img-blog.csdnimg.cn/c1c1b90c77ae4ae7b7c89e2db1d156dc.png#pic_center" alt="在这里插入图片描述"></p><h2 id="列表标签"><a href="#列表标签" class="headerlink" title="列表标签"></a>列表标签</h2><p>无序(点)，有序(序号)，自定义列表</p><p><img src="https://img-blog.csdnimg.cn/66615d8a069c42a4a1f89eaf9c8af15f.png#pic_center" alt="在这里插入图片描述"></p><h3 id="无序列表"><a href="#无序列表" class="headerlink" title="无序列表"></a>无序列表</h3><p><img src="https://img-blog.csdnimg.cn/3868dbcbf9fb46fbbbf32f1a3f41531e.png#pic_center" alt="在这里插入图片描述"></p><h3 id="有序列表"><a href="#有序列表" class="headerlink" title="有序列表"></a>有序列表</h3><p><img src="https://img-blog.csdnimg.cn/232109ebbbfa4ecd9aac6de03ff9c308.png#pic_center" alt="在这里插入图片描述"></p><h3 id="自定义列表"><a href="#自定义列表" class="headerlink" title="自定义列表"></a>自定义列表</h3><p><img src="https://img-blog.csdnimg.cn/9c51d22c54c1452ca0632c555f7401cb.png#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/cb100e2355224b089e2de98d48752de7.png#pic_center" alt="在这里插入图片描述"></p><p><img src="https://img-blog.csdnimg.cn/b20ef47781264e388eac413a76eeed37.png#pic_center" alt="在这里插入图片描述"></p><h3 id="表格"><a href="#表格" class="headerlink" title="表格"></a>表格</h3><p><img src="https://img-blog.csdnimg.cn/ce5dcfdae3bd4b4b91e4fda0c77947d6.png#pic_center" alt="在这里插入图片描述"></p><p>标题标签<th>，caption表格大标题</p><p>常见属性：</p><p><img src="https://img-blog.csdnimg.cn/1284e314ea03454c8d5e45ef9478a6c4.png#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/08d4024e71de48e4b744c3f0f3ccccf8.png#pic_center" alt="在这里插入图片描述"></p><p><img src="https://img-blog.csdnimg.cn/0a80af9a27164fba8c4f49b71b68882f.png#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/6c5673b1f0dd47e1844f1ce5efcd4f7c.png#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/a32f77ef9d8f46578c537fdac9cd2bd1.png#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/f3cf44cf323a4c919ab0ea5057bda74c.png#pic_center" alt="在这里插入图片描述"></p><h2 id="表单标签"><a href="#表单标签" class="headerlink" title="表单标签"></a>表单标签</h2><p><img src="https://img-blog.csdnimg.cn/f9dbce3af58f4424b5ae979dd116b788.png#pic_center" alt="在这里插入图片描述"></p><h3 id="input"><a href="#input" class="headerlink" title="input"></a>input</h3><p><img src="https://img-blog.csdnimg.cn/2927d31fbff24502aff27f3449637875.png#pic_center" alt="在这里插入图片描述"></p><p>常用属性：</p><p><img src="https://img-blog.csdnimg.cn/495cb7b91b9d4b5b8370030799f0f15a.png#pic_center" alt="在这里插入图片描述"></p><p>单选功能：</p><p><img src="https://img-blog.csdnimg.cn/7a8385061d504c87b143abc517dfeced.png#pic_center" alt="在这里插入图片描述"></p><p>checked默认选中（也适用于多选）</p><p>文件上传功能：多文件上传属性：multiple</p><p>按钮功能：需要在同一域下<code>&lt;form&gt;&lt;/form&gt;</code><br><img src="https://img-blog.csdnimg.cn/d9f3cafa64c7437094117dd37ee83e0a.png#pic_center" alt="在这里插入图片描述"></p><p>按钮加value属性，显示按钮文字显示</p><h3 id="button"><a href="#button" class="headerlink" title="button"></a>button</h3><p>(双标签)</p><p><img src="https://img-blog.csdnimg.cn/80636e22f15e4ab7aeee17a7aa33e338.png#pic_center" alt="在这里插入图片描述"></p><h3 id="select"><a href="#select" class="headerlink" title="select"></a>select</h3><p>下拉菜单，selected默认选中<br><img src="https://img-blog.csdnimg.cn/47e52ed9bc3447848b27b6cdde58287f.png#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/f1f2a524622b49f5a2e37f17c519f956.png#pic_center" alt="在这里插入图片描述"></p><h3 id="textarea"><a href="#textarea" class="headerlink" title="textarea"></a>textarea</h3><p>文本域标签，（简介输入框）<br><img src="https://img-blog.csdnimg.cn/ff76e3e1e47d4a17a1e3239e7fdd68d2.png#pic_center" alt="在这里插入图片描述"></p><p>实际开发会使用CSS</p><h3 id="label"><a href="#label" class="headerlink" title="label"></a>label</h3><p>场景：不止点按钮触发，点按钮对应的文字也会触发<br><img src="https://img-blog.csdnimg.cn/d89600bdf66748909bb92f630c1162d2.png#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/553acd7ce3674a85a89c705ff62d8853.png#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/e8216efb2cac4e998c49205aab75ac39.png#pic_center" alt="在这里插入图片描述"></p><h2 id="语义化标签"><a href="#语义化标签" class="headerlink" title="语义化标签"></a>语义化标签</h2><h3 id="无语义布局标签"><a href="#无语义布局标签" class="headerlink" title="无语义布局标签"></a>无语义布局标签</h3><p><img src="https://img-blog.csdnimg.cn/fd4d4c3729824ef7905b7ff9a6749e2d.png#pic_center" alt="在这里插入图片描述"></p><h3 id="有语义布局标签"><a href="#有语义布局标签" class="headerlink" title="有语义布局标签"></a>有语义布局标签</h3><p>html5新版本加入，和<code>&lt;div&gt;</code>一致<br><img src="https://img-blog.csdnimg.cn/2bdd7306db0f4854acb4056f62b6b66a.png#pic_center" alt="在这里插入图片描述"><img src="https://img-blog.csdnimg.cn/8422842bd9dd44c1950eda708abeddee.png#pic_center" alt="在这里插入图片描述"></p><h2 id="字符实体"><a href="#字符实体" class="headerlink" title="字符实体"></a>字符实体</h2><p><img src="https://img-blog.csdnimg.cn/b933b4ca88eb4be58b5149c7a49973f9.png#pic_center" alt="在这里插入图片描述"></p><hr><p><a href="https://www.bilibili.com/video/BV1Kg411T7t9?p=43&amp;spm_id_from=pageDriver&amp;vd_source=616a9dd528080cf576646147166fe033">表格案例</a></p><p><a href="https://www.bilibili.com/video/BV1Kg411T7t9?p=44&amp;spm_id_from=pageDriver&amp;vd_source=616a9dd528080cf576646147166fe033">表单案例</a></p><hr><h1 id=""><a href="#" class="headerlink" title=" "></a> </h1>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HTML </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello Hexo</title>
      <link href="/posts/Hello.html"/>
      <url>/posts/Hello.html</url>
      
        <content type="html"><![CDATA[<!-- Front-mattertitle:date:updated:type:comments:description:keywords:top_img:mathjax:katex:aside:aplayer:highlight_shrink: --><!-- <video id="video-bg" autoplay muted loop style="width: 100%">    <source  src="http://go.plvideo.cn/front/video/view?vid=19e11a1d968a647fb6cc921805131113_1"></video> --><h3 id="创建文章"><a href="#创建文章" class="headerlink" title="创建文章"></a>创建文章</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new <span class="string">&quot;post name&quot;</span></span><br></pre></td></tr></table></figure><h3 id="创建页面"><a href="#创建页面" class="headerlink" title="创建页面"></a>创建页面</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page <span class="string">&quot;page name&quot;</span></span><br></pre></td></tr></table></figure><h2 id="本地查看hexo"><a href="#本地查看hexo" class="headerlink" title="本地查看hexo"></a>本地查看hexo</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean &amp;&amp; hexo g &amp;&amp; hexo s</span><br></pre></td></tr></table></figure><h2 id="上传到Github"><a href="#上传到Github" class="headerlink" title="上传到Github"></a>上传到Github</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo g -d</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
  
  
    
    
    <entry>
      <title></title>
      <link href="/manifest.json"/>
      <url>/manifest.json</url>
      
        <content type="html"><![CDATA[{"lang":"en","dir":"ltr","name":"roydon","description":"roydon.top","display":"standalone","short_name":"roydon","scope":"/","start_url":"/","theme_color":"pink","background_color":"#fff","icons":[{"src":"/img/siteicon/16.png","sizes":"16x16","type":"image/png"},{"src":"/img/siteicon/32.png","sizes":"32x32","type":"image/png"},{"src":"/img/siteicon/48.png","sizes":"48x48","type":"image/png"},{"src":"/img/siteicon/64.png","sizes":"64x64","type":"image/png"},{"src":"/img/siteicon/128.png","sizes":"128x128","type":"image/png"},{"src":"/img/siteicon/144.png","sizes":"144x144","type":"image/png"},{"src":"/img/siteicon/512.png","sizes":"512x512","type":"image/png"}]}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/owo.json"/>
      <url>/owo.json</url>
      
        <content type="html"><![CDATA[{"bilibiliHotKey":{"type":"image","container":[{"text":"bilibiliHotKey-1","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/bilibiliHotKey/1.jpg'>"},{"text":"bilibiliHotKey-10","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/bilibiliHotKey/10.jpg'>"},{"text":"bilibiliHotKey-11","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/bilibiliHotKey/11.jpg'>"},{"text":"bilibiliHotKey-12","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/bilibiliHotKey/12.jpg'>"},{"text":"bilibiliHotKey-13","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/bilibiliHotKey/13.jpg'>"},{"text":"bilibiliHotKey-14","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/bilibiliHotKey/14.jpg'>"},{"text":"bilibiliHotKey-15","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/bilibiliHotKey/15.jpg'>"},{"text":"bilibiliHotKey-16","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/bilibiliHotKey/16.jpg'>"},{"text":"bilibiliHotKey-17","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/bilibiliHotKey/17.jpg'>"},{"text":"bilibiliHotKey-18","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/bilibiliHotKey/18.jpg'>"},{"text":"bilibiliHotKey-19","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/bilibiliHotKey/19.jpg'>"},{"text":"bilibiliHotKey-2","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/bilibiliHotKey/2.jpg'>"},{"text":"bilibiliHotKey-20","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/bilibiliHotKey/20.jpg'>"},{"text":"bilibiliHotKey-21","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/bilibiliHotKey/21.jpg'>"},{"text":"bilibiliHotKey-22","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/bilibiliHotKey/22.jpg'>"},{"text":"bilibiliHotKey-23","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/bilibiliHotKey/23.jpg'>"},{"text":"bilibiliHotKey-24","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/bilibiliHotKey/24.jpg'>"},{"text":"bilibiliHotKey-25","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/bilibiliHotKey/25.jpg'>"},{"text":"bilibiliHotKey-26","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/bilibiliHotKey/26.jpg'>"},{"text":"bilibiliHotKey-27","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/bilibiliHotKey/27.jpg'>"},{"text":"bilibiliHotKey-28","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/bilibiliHotKey/28.jpg'>"},{"text":"bilibiliHotKey-29","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/bilibiliHotKey/29.jpg'>"},{"text":"bilibiliHotKey-3","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/bilibiliHotKey/3.jpg'>"},{"text":"bilibiliHotKey-30","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/bilibiliHotKey/30.jpg'>"},{"text":"bilibiliHotKey-31","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/bilibiliHotKey/31.jpg'>"},{"text":"bilibiliHotKey-32","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/bilibiliHotKey/32.jpg'>"},{"text":"bilibiliHotKey-4","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/bilibiliHotKey/4.jpg'>"},{"text":"bilibiliHotKey-5","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/bilibiliHotKey/5.jpg'>"},{"text":"bilibiliHotKey-6","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/bilibiliHotKey/6.jpg'>"},{"text":"bilibiliHotKey-7","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/bilibiliHotKey/7.jpg'>"},{"text":"bilibiliHotKey-8","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/bilibiliHotKey/8.jpg'>"},{"text":"bilibiliHotKey-9","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/bilibiliHotKey/9.jpg'>"}]},"bilibili_tv_gif":{"type":"image","container":[{"text":"bilibili_tv_gif-doge","icon":"<img src='https://emotion.acs.pw/emotion/bilibili_tv_gif/doge.gif'>"},{"text":"bilibili_tv_gif-亲亲","icon":"<img src='https://emotion.acs.pw/emotion/bilibili_tv_gif/亲亲.gif'>"},{"text":"bilibili_tv_gif-偷笑","icon":"<img src='https://emotion.acs.pw/emotion/bilibili_tv_gif/偷笑.gif'>"},{"text":"bilibili_tv_gif-再见","icon":"<img src='https://emotion.acs.pw/emotion/bilibili_tv_gif/再见.gif'>"},{"text":"bilibili_tv_gif-发怒","icon":"<img src='https://emotion.acs.pw/emotion/bilibili_tv_gif/发怒.gif'>"},{"text":"bilibili_tv_gif-发财","icon":"<img src='https://emotion.acs.pw/emotion/bilibili_tv_gif/发财.gif'>"},{"text":"bilibili_tv_gif-可爱","icon":"<img src='https://emotion.acs.pw/emotion/bilibili_tv_gif/可爱.gif'>"},{"text":"bilibili_tv_gif-吐血","icon":"<img src='https://emotion.acs.pw/emotion/bilibili_tv_gif/吐血.gif'>"},{"text":"bilibili_tv_gif-呆","icon":"<img src='https://emotion.acs.pw/emotion/bilibili_tv_gif/呆.gif'>"},{"text":"bilibili_tv_gif-呕吐","icon":"<img src='https://emotion.acs.pw/emotion/bilibili_tv_gif/呕吐.gif'>"},{"text":"bilibili_tv_gif-困","icon":"<img src='https://emotion.acs.pw/emotion/bilibili_tv_gif/困.gif'>"},{"text":"bilibili_tv_gif-坏笑","icon":"<img src='https://emotion.acs.pw/emotion/bilibili_tv_gif/坏笑.gif'>"},{"text":"bilibili_tv_gif-大佬","icon":"<img src='https://emotion.acs.pw/emotion/bilibili_tv_gif/大佬.gif'>"},{"text":"bilibili_tv_gif-大哭","icon":"<img src='https://emotion.acs.pw/emotion/bilibili_tv_gif/大哭.gif'>"},{"text":"bilibili_tv_gif-委屈","icon":"<img src='https://emotion.acs.pw/emotion/bilibili_tv_gif/委屈.gif'>"},{"text":"bilibili_tv_gif-害羞","icon":"<img src='https://emotion.acs.pw/emotion/bilibili_tv_gif/害羞.gif'>"},{"text":"bilibili_tv_gif-尴尬","icon":"<img src='https://emotion.acs.pw/emotion/bilibili_tv_gif/尴尬.gif'>"},{"text":"bilibili_tv_gif-微笑","icon":"<img src='https://emotion.acs.pw/emotion/bilibili_tv_gif/微笑.gif'>"},{"text":"bilibili_tv_gif-思考","icon":"<img src='https://emotion.acs.pw/emotion/bilibili_tv_gif/思考.gif'>"},{"text":"bilibili_tv_gif-惊吓","icon":"<img src='https://emotion.acs.pw/emotion/bilibili_tv_gif/惊吓.gif'>"},{"text":"bilibili_tv_gif-打脸","icon":"<img src='https://emotion.acs.pw/emotion/bilibili_tv_gif/打脸.gif'>"},{"text":"bilibili_tv_gif-抓狂","icon":"<img src='https://emotion.acs.pw/emotion/bilibili_tv_gif/抓狂.gif'>"},{"text":"bilibili_tv_gif-抠鼻子","icon":"<img src='https://emotion.acs.pw/emotion/bilibili_tv_gif/抠鼻子.gif'>"},{"text":"bilibili_tv_gif-斜眼笑","icon":"<img src='https://emotion.acs.pw/emotion/bilibili_tv_gif/斜眼笑.gif'>"},{"text":"bilibili_tv_gif-无奈","icon":"<img src='https://emotion.acs.pw/emotion/bilibili_tv_gif/无奈.gif'>"},{"text":"bilibili_tv_gif-晕","icon":"<img src='https://emotion.acs.pw/emotion/bilibili_tv_gif/晕.gif'>"},{"text":"bilibili_tv_gif-流汗","icon":"<img src='https://emotion.acs.pw/emotion/bilibili_tv_gif/流汗.gif'>"},{"text":"bilibili_tv_gif-流鼻血","icon":"<img src='https://emotion.acs.pw/emotion/bilibili_tv_gif/流鼻血.gif'>"},{"text":"bilibili_tv_gif-点赞","icon":"<img src='https://emotion.acs.pw/emotion/bilibili_tv_gif/点赞.gif'>"},{"text":"bilibili_tv_gif-生气","icon":"<img src='https://emotion.acs.pw/emotion/bilibili_tv_gif/生气.gif'>"},{"text":"bilibili_tv_gif-生病","icon":"<img src='https://emotion.acs.pw/emotion/bilibili_tv_gif/生病.gif'>"},{"text":"bilibili_tv_gif-疑问","icon":"<img src='https://emotion.acs.pw/emotion/bilibili_tv_gif/疑问.gif'>"},{"text":"bilibili_tv_gif-白眼","icon":"<img src='https://emotion.acs.pw/emotion/bilibili_tv_gif/白眼.gif'>"},{"text":"bilibili_tv_gif-睡着","icon":"<img src='https://emotion.acs.pw/emotion/bilibili_tv_gif/睡着.gif'>"},{"text":"bilibili_tv_gif-笑哭","icon":"<img src='https://emotion.acs.pw/emotion/bilibili_tv_gif/笑哭.gif'>"},{"text":"bilibili_tv_gif-腼腆","icon":"<img src='https://emotion.acs.pw/emotion/bilibili_tv_gif/腼腆.gif'>"},{"text":"bilibili_tv_gif-色","icon":"<img src='https://emotion.acs.pw/emotion/bilibili_tv_gif/色.gif'>"},{"text":"bilibili_tv_gif-调皮","icon":"<img src='https://emotion.acs.pw/emotion/bilibili_tv_gif/调皮.gif'>"},{"text":"bilibili_tv_gif-鄙视","icon":"<img src='https://emotion.acs.pw/emotion/bilibili_tv_gif/鄙视.gif'>"},{"text":"bilibili_tv_gif-闭嘴","icon":"<img src='https://emotion.acs.pw/emotion/bilibili_tv_gif/闭嘴.gif'>"},{"text":"bilibili_tv_gif-难过","icon":"<img src='https://emotion.acs.pw/emotion/bilibili_tv_gif/难过.gif'>"},{"text":"bilibili_tv_gif-馋","icon":"<img src='https://emotion.acs.pw/emotion/bilibili_tv_gif/馋.gif'>"},{"text":"bilibili_tv_gif-黑人问号","icon":"<img src='https://emotion.acs.pw/emotion/bilibili_tv_gif/黑人问号.gif'>"},{"text":"bilibili_tv_gif-鼓掌","icon":"<img src='https://emotion.acs.pw/emotion/bilibili_tv_gif/鼓掌.gif'>"}]},"Genshin":{"type":"image","container":[{"text":"Genshin-1","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Genshin/1.jpg'>"},{"text":"Genshin-10","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Genshin/10.jpg'>"},{"text":"Genshin-11","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Genshin/11.jpg'>"},{"text":"Genshin-12","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Genshin/12.jpg'>"},{"text":"Genshin-13","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Genshin/13.jpg'>"},{"text":"Genshin-14","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Genshin/14.jpg'>"},{"text":"Genshin-15","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Genshin/15.jpg'>"},{"text":"Genshin-16","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Genshin/16.jpg'>"},{"text":"Genshin-17","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Genshin/17.jpg'>"},{"text":"Genshin-18","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Genshin/18.jpg'>"},{"text":"Genshin-19","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Genshin/19.jpg'>"},{"text":"Genshin-2","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Genshin/2.jpg'>"},{"text":"Genshin-20","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Genshin/20.jpg'>"},{"text":"Genshin-21","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Genshin/21.jpg'>"},{"text":"Genshin-22","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Genshin/22.jpg'>"},{"text":"Genshin-3","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Genshin/3.jpg'>"},{"text":"Genshin-4","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Genshin/4.jpg'>"},{"text":"Genshin-5","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Genshin/5.jpg'>"},{"text":"Genshin-6","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Genshin/6.jpg'>"},{"text":"Genshin-7","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Genshin/7.jpg'>"},{"text":"Genshin-8","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Genshin/8.jpg'>"},{"text":"Genshin-9","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Genshin/9.jpg'>"}]},"tom_jerry":{"type":"image","container":[{"text":"tom_jerry-1","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/tom_jerry/1.jpg'>"},{"text":"tom_jerry-10","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/tom_jerry/10.jpg'>"},{"text":"tom_jerry-11","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/tom_jerry/11.jpg'>"},{"text":"tom_jerry-12","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/tom_jerry/12.jpg'>"},{"text":"tom_jerry-13","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/tom_jerry/13.jpg'>"},{"text":"tom_jerry-14","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/tom_jerry/14.jpg'>"},{"text":"tom_jerry-15","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/tom_jerry/15.jpg'>"},{"text":"tom_jerry-16","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/tom_jerry/16.jpg'>"},{"text":"tom_jerry-17","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/tom_jerry/17.jpg'>"},{"text":"tom_jerry-18","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/tom_jerry/18.jpg'>"},{"text":"tom_jerry-19","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/tom_jerry/19.jpg'>"},{"text":"tom_jerry-2","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/tom_jerry/2.jpg'>"},{"text":"tom_jerry-20","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/tom_jerry/20.jpg'>"},{"text":"tom_jerry-21","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/tom_jerry/21.jpg'>"},{"text":"tom_jerry-22","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/tom_jerry/22.jpg'>"},{"text":"tom_jerry-23","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/tom_jerry/23.jpg'>"},{"text":"tom_jerry-24","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/tom_jerry/24.jpg'>"},{"text":"tom_jerry-25","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/tom_jerry/25.jpg'>"},{"text":"tom_jerry-26","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/tom_jerry/26.jpg'>"},{"text":"tom_jerry-27","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/tom_jerry/27.jpg'>"},{"text":"tom_jerry-28","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/tom_jerry/28.jpg'>"},{"text":"tom_jerry-29","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/tom_jerry/29.jpg'>"},{"text":"tom_jerry-3","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/tom_jerry/3.jpg'>"},{"text":"tom_jerry-30","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/tom_jerry/30.jpg'>"},{"text":"tom_jerry-31","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/tom_jerry/31.jpg'>"},{"text":"tom_jerry-4","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/tom_jerry/4.jpg'>"},{"text":"tom_jerry-5","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/tom_jerry/5.jpg'>"},{"text":"tom_jerry-6","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/tom_jerry/6.jpg'>"},{"text":"tom_jerry-7","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/tom_jerry/7.jpg'>"},{"text":"tom_jerry-8","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/tom_jerry/8.jpg'>"},{"text":"tom_jerry-9","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/tom_jerry/9.jpg'>"}]},"Snow-Miku":{"type":"image","container":[{"text":"Snow-Miku-3583066@2x","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Snow-Miku/3583066@2x.png'>"},{"text":"Snow-Miku-3583067@2x","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Snow-Miku/3583067@2x.png'>"},{"text":"Snow-Miku-3583068@2x","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Snow-Miku/3583068@2x.png'>"},{"text":"Snow-Miku-3583069@2x","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Snow-Miku/3583069@2x.png'>"},{"text":"Snow-Miku-3583070@2x","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Snow-Miku/3583070@2x.png'>"},{"text":"Snow-Miku-3583071@2x","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Snow-Miku/3583071@2x.png'>"},{"text":"Snow-Miku-3583072@2x","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Snow-Miku/3583072@2x.png'>"},{"text":"Snow-Miku-3583073@2x","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Snow-Miku/3583073@2x.png'>"},{"text":"Snow-Miku-3583074@2x","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Snow-Miku/3583074@2x.png'>"},{"text":"Snow-Miku-3583075@2x","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Snow-Miku/3583075@2x.png'>"},{"text":"Snow-Miku-3583076@2x","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Snow-Miku/3583076@2x.png'>"},{"text":"Snow-Miku-3583077@2x","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Snow-Miku/3583077@2x.png'>"},{"text":"Snow-Miku-3583078@2x","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Snow-Miku/3583078@2x.png'>"},{"text":"Snow-Miku-3583079@2x","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Snow-Miku/3583079@2x.png'>"},{"text":"Snow-Miku-3583080@2x","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Snow-Miku/3583080@2x.png'>"},{"text":"Snow-Miku-3583081@2x","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Snow-Miku/3583081@2x.png'>"},{"text":"Snow-Miku-3583082@2x","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Snow-Miku/3583082@2x.png'>"},{"text":"Snow-Miku-3583083@2x","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Snow-Miku/3583083@2x.png'>"},{"text":"Snow-Miku-3583084@2x","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Snow-Miku/3583084@2x.png'>"},{"text":"Snow-Miku-3583085@2x","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Snow-Miku/3583085@2x.png'>"},{"text":"Snow-Miku-3583086@2x","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Snow-Miku/3583086@2x.png'>"},{"text":"Snow-Miku-3583087@2x","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Snow-Miku/3583087@2x.png'>"},{"text":"Snow-Miku-3583088@2x","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Snow-Miku/3583088@2x.png'>"},{"text":"Snow-Miku-3583089@2x","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Snow-Miku/3583089@2x.png'>"},{"text":"Snow-Miku-3583090@2x","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Snow-Miku/3583090@2x.png'>"},{"text":"Snow-Miku-3583091@2x","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Snow-Miku/3583091@2x.png'>"},{"text":"Snow-Miku-3583092@2x","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Snow-Miku/3583092@2x.png'>"},{"text":"Snow-Miku-3583093@2x","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Snow-Miku/3583093@2x.png'>"},{"text":"Snow-Miku-3583094@2x","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Snow-Miku/3583094@2x.png'>"},{"text":"Snow-Miku-3583095@2x","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Snow-Miku/3583095@2x.png'>"},{"text":"Snow-Miku-3583096@2x","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Snow-Miku/3583096@2x.png'>"},{"text":"Snow-Miku-3583097@2x","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Snow-Miku/3583097@2x.png'>"},{"text":"Snow-Miku-3583098@2x","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Snow-Miku/3583098@2x.png'>"},{"text":"Snow-Miku-3583099@2x","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Snow-Miku/3583099@2x.png'>"},{"text":"Snow-Miku-3583100@2x","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Snow-Miku/3583100@2x.png'>"},{"text":"Snow-Miku-3583101@2x","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Snow-Miku/3583101@2x.png'>"},{"text":"Snow-Miku-3583102@2x","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Snow-Miku/3583102@2x.png'>"},{"text":"Snow-Miku-3583103@2x","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Snow-Miku/3583103@2x.png'>"},{"text":"Snow-Miku-3583104@2x","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Snow-Miku/3583104@2x.png'>"},{"text":"Snow-Miku-3583105@2x","icon":"<img src='https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Snow-Miku/3583105@2x.png'>"}]}}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>相册</title>
      <link href="/Gallery/index.html"/>
      <url>/Gallery/index.html</url>
      
        <content type="html"><![CDATA[<div class="gallery-group-main">  <figure class="gallery-group">  <img class="gallery-group-img no-lightbox" src='https://gcore.jsdelivr.net/gh/roydonGuo/CDN/siteBgZIP/4g16yl.webp' alt="Group Image Gallery">  <figcaption>  <div class="gallery-group-name">MINECRAFT</div>  <p>null</p>  <a href='/Gallery/minecraft'></a>  </figcaption>  </figure>    <figure class="gallery-group">  <img class="gallery-group-img no-lightbox" src='https://gcore.jsdelivr.net/gh/roydonGuo/CDN/siteBgZIP/jx9req.webp' alt="Group Image Gallery">  <figcaption>  <div class="gallery-group-name">原神</div>  <p>null</p>  <a href='/Gallery/genshin'></a>  </figcaption>  </figure>  </div>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>关于本站</title>
      <link href="/about/index.html"/>
      <url>/about/index.html</url>
      
        <content type="html"><![CDATA[<!-- <div id="categories-radar"></div><div id="posts-chart"></div><div id="posts-calendar" ></div> -->]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>归档</title>
      <link href="/archives/index.html"/>
      <url>/archives/index.html</url>
      
        <content type="html"><![CDATA[<!-- 文章发布时间统计图 --><!-- <div id="posts-chart" data-start="2022-08" style="border-radius: 8px; height: 300px; padding: 10px;"></div> --><!-- 文章标签统计图 --><!-- <div id="tags-chart" data-length="10" style="border-radius: 8px; height: 300px; padding: 10px;"></div> --><!-- 文章分类统计图 --><!-- <div id="categories-chart" data-parent="true" style="border-radius: 8px; height: 300px; padding: 10px;"></div> -->]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>bilibili</title>
      <link href="/bilibili/index.html"/>
      <url>/bilibili/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>分类</title>
      <link href="/categories/index.html"/>
      <url>/categories/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>留言板</title>
      <link href="/comments/index.html"/>
      <url>/comments/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/css/about.css"/>
      <url>/css/about.css</url>
      
        <content type="html"><![CDATA[#about-page .author-box {  position: relative;}#about-page .author-box .author-img {  margin: auto;  border-radius: 50%;  overflow: hidden;  position: relative;  width: 150px;  height: 150px;  border: 5px solid gold}#about-page .author-box .author-img img {  border-radius: 50%;  overflow: hidden;  width: 145px;  height: 145px;}#about-page .author-box .image-dot {  width: 32px;  height: 32px;  background: #77ec9c;  position: absolute;  border-radius: 50%;  border: 5px solid white;  top: 50%;  left: 50%;  transform: translate(35px, 45px);}.author-content {  display: flex;  flex-wrap: wrap;  justify-content: space-between;  width: 100%;  margin-top: 1rem;}#about-page .myInfoAndSayHello {  display: flex;  flex-direction: column;  justify-content: center;  background: linear-gradient(100deg, #4da6ff 40%, #b2f2ff 60%);  background-size: 200%;  animation: gradient 15s ease infinite;  width: 59%;}.author-content-item {  width: 49%;  border-radius: 24px;  box-shadow: var(--roydon-box-shadow);  position: relative;  padding: 1rem 2rem;  overflow: hidden;}#about-page .myInfoAndSayHello .title1 {  opacity: 0.8;  line-height: 1.3;}#about-page .myInfoAndSayHello .title2 {  font-size: 36px;  font-weight: 700;  line-height: 1.1;  margin: 0.5rem 0;}.inline-word {  word-break: keep-all;  white-space: nowrap;}#about-page .myInfoAndSayHello .title1 {  opacity: 0.8;  line-height: 1.3;}.author-content-item.aboutsiteTips {  display: flex;  justify-content: center;  align-items: flex-start;  background-color: pink;  flex-direction: column;  width: 39%;}.aboutsiteTips h2 {  margin-right: auto;  font-size: 36px;  font-family: Helvetica;  line-height: 1.06;  letter-spacing: -0.02em;  margin-top: 0;}.aboutsiteTips .mask {  height: 36px;  position: relative;  overflow: hidden;  margin-top: 4px;}.aboutsiteTips .mask span {  display: block;  box-sizing: border-box;  position: absolute;  top: 36px;  background-clip: text;  -webkit-text-fill-color: transparent;  background-repeat: no-repeat;}.aboutsiteTips .mask span[data-show] {  transform: translateY(-100%);  transition: 0.5s transform ease-in-out;}.aboutsiteTips .mask span[data-up] {  transform: translateY(-200%);  transition: 0.5s transform ease-in-out;}.aboutsiteTips .mask span:nth-child(1) {  background-image: linear-gradient(45deg, #0ecffe 50%, #07a6f1);}.aboutsiteTips .mask span:nth-child(2) {  background-image: linear-gradient(45deg, #18e198 50%, #0ec15d);}.aboutsiteTips .mask span:nth-child(3) {  background-image: linear-gradient(45deg, #9b8efc 50%, #3e0d89);}.aboutsiteTips .mask span:nth-child(4) {  background-image: linear-gradient(45deg, #f49794 50%, #fc3d66);}@media screen and (max-width: 768px) {  .author-content-item.map {    margin-bottom: 0;  }}#about-page .about-statistic {  min-height: 380px;  width: 39%;  color: white;  background: url(https://bu.dusays.com/2022/11/18/63765da00f149.png) no-repeat top;  background-size: cover;  overflow: hidden;}#about-page .about-statistic::after {  box-shadow: 0 -19px 63px 21px #1fa5af79 inset;  position: absolute;  content: "";  width: 100%;  height: 100%;  top: 0;  left: 0;}.author-content-item .card-content {  position: absolute;  width: 100%;  height: 100%;  top: 0;  left: 0;  z-index: 2;  display: flex;  flex-direction: column;  padding: 1rem 2rem;}.author-content-item .card-content .author-content-item-title {  margin-bottom: 0.5rem;}.author-content-item .author-content-item-title {  font-size: 36px;  font-weight: 700;  line-height: 1;}#statistic {  font-size: 16px;  border-radius: 15px;  width: 100%;  display: flex;  justify-content: space-between;  flex-direction: row;  flex-wrap: wrap;  margin-top: 1rem;  margin-bottom: 2rem;}#statistic div span:first-child {  opacity: 0.8;  font-size: 0.6rem;}#statistic div span:last-child {  font-weight: 700;  font-size: 34px;  line-height: 1;  white-space: nowrap;}#statistic div {  display: flex;  justify-content: space-between;  flex-direction: column;  width: 50%;  margin-bottom: 0.5rem;}.post-tips {  position: absolute;  bottom: 1rem;  left: 2rem;}.post-tips a {  color: blueviolet;  border: none !important;}.author-content-item .card-content .banner-button-group {  position: absolute;  bottom: 1rem;  right: 1rem;}.author-content-item .card-content .banner-button-group .banner-button {  height: 2.5rem;  width: 5rem;  border-radius: 1.2rem;  backdrop-filter: blur(30px);  display: flex;  align-items: center;  justify-content: center;  cursor: pointer;}.author-content-item .card-content .banner-button-group .banner-button i {  /* margin-right: 6px; */  font-size: 1rem;}#about-page .author-content-item .card-content .banner-button-group .banner-button i {  font-size: 1.5rem;}.author-content-item .card-content .banner-button-group .banner-button:hover {  color: white;  background-color: pink;  backdrop-filter: blur(50px);}.author-content-item.personalities {  position: relative;  background-color: rgba(255, 68, 0, 0.9);  width: 59%;}.author-content-item.personalities .image {  position: absolute;  right: 30px;  bottom: 1rem;  width: 250px;  transition: transform 1s cubic-bezier(0.13, 0.45, 0.21, 1.02);}.author-content-item.personalities .image img {  display: block;  /* margin: 0 auto 20px; */  max-width: 100%;  transition: filter 375ms ease-in 0.2s;}.author-content-item.personalities:hover .image {  transform: rotate(-10deg);}.author-content-item.myphoto {  height: 60%;  min-height: 240px;  position: relative;  overflow: hidden;  width: 39%;  display: flex;  align-items: center;  justify-content: center;}.author-content-item.myphoto img {  position: absolute;  min-width: 100%;  object-fit: cover;  transition: 0.6s;  animation: coverIn 1s ease-out forwards;  transition: transform 1s ease-out !important;}.author-content-item.myphoto:hover img {  transform: scale(1.1);}.author-content-item:hover .card-background-icon {  transform: rotate(20deg);}.author-content-item.personalities .title2 {  font-size: 36px;  font-weight: 700;  line-height: 1.1;}.author-content-item.map {  background: url(https://bu.dusays.com/2022/11/17/6375f5576cbc3.jpg) no-repeat center;  min-height: 160px;  max-height: 400px;  position: relative;  overflow: hidden;  margin-bottom: 1rem;  height: 60%;  background-size: 100%;  transition: 1s ease-in-out;}/* [data-theme="dark"] .author-content-item.map {  background: url(https://i.imgtg.com/2022/11/14/tAlzv.jpg) no-repeat center;  background-size: 100%;} */.author-content-item.single {  width: 100%;}.author-content-item.map .map-title {  position: absolute;  bottom: 0;  left: 0;  width: 100%;  padding: 0.5rem 2rem;  backdrop-filter: blur(20px);  transition: 2s ease-in-out;  font-size: 20px;}.author-content-item.map .map-title b {  color: blueviolet;  font-weight: 900;}.author-content-item.selfInfo {  display: flex;  min-height: 100px;  max-height: 400px;  justify-content: space-between;  align-items: center;  flex-wrap: wrap;  height: 40%;  background: gold;}.author-content-item.selfInfo div {  display: flex;  flex-direction: column;  margin: 0.5rem 2rem 0.5rem 0;}.author-content-item.selfInfo .selfInfo-title {  opacity: 0.8;  font-size: 0.8rem;  line-height: 1;  margin-bottom: 10px;}.author-content-item.selfInfo .selfInfo-content {  font-weight: 900;  font-size: 2.3em;  line-height: 1;}.author-content-item-group.column.mapAndInfo {  width: 59%;}.author-content-item.map:hover {  background-size: 150%;  transition: 3s ease-in-out;  background-position-x: 46%;  background-position-y: 36%;}.author-content-item.map:hover .map-title {  bottom: -100%;}.author-content-item-group.column {  display: flex;  flex-direction: column;  width: 49%;  justify-content: space-between;}.author-content-item.single.reward .reward-list-updateDate {  text-align: center;  font-size: 14px;}.author-content-item.single.reward .post-reward {  position: absolute;  margin-top: 0px;  width: auto;  text-align: none;  pointer-events: none;  right: 2rem;  top: 2rem;}.author-content-item.single.reward .post-reward:hover .reward-main {  display: block;  width: 320px !important;}.tip-button {  border-radius: 2.25rem;  cursor: pointer;  font-size: 20px;  font-weight: 600;  height: 2.6rem;  margin-bottom: -4rem;  outline: 0;  position: relative;  top: 0;  transform-origin: 0 100%;  transition: transform 500ms ease-in-out;  width: auto;}.tip-button__text {  /* margin-right: 0.8rem; */  opacity: 1;  position: relative;  transition: opacity 0.1s linear 0.5s;  z-index: 3;}.author-content .post-reward .reward-main {  bottom: 0;  top: 36px;  left: auto;  right: 0;}.author-content .post-reward .reward-main .reward-all:before {  top: -11px;  bottom: auto;}#about-page .post-reward .reward-main .reward-all {  border-radius: 10px;  padding: 10px 10px !important;}.post-reward .reward-main .reward-all .reward-item {  padding: 0 8px !important;}.post-reward .reward-main .reward-all li.reward-item::before {  content: none !important;}.post-reward .reward-main .reward-all:after {  content: none !important;}.author-content-item.maxim {  font-size: 36px;  font-weight: 900;  line-height: 1.1;  background: linear-gradient(140deg, #06e6ff 0, #f91a73 100%);  background-size: 200%;  animation: gradient 15s ease infinite;  display: flex;  align-items: flex-start;  flex-direction: column;  justify-content: center;  width: 39%;}.author-content-item .author-content-item-tips {  opacity: 0.8;  font-size: 1rem;  margin-bottom: 0.5rem;}.author-content-item.maxim .maxim-title {  display: flex;  flex-direction: column;}.author-content-item.buff {  height: 200px;  font-size: 36px;  font-weight: 900;  line-height: 1.2;  display: flex;  align-items: flex-start;  flex-direction: column;  justify-content: center;  background: linear-gradient(120deg, #ff27e8 0, #ff8000 100%);  background-size: 200%;  animation: gradient 15s ease infinite;  min-height: 200px;  height: fit-content;  width: 59%;}.author-content-item.buff .card-content {  display: flex;  flex-direction: column;  justify-content: center;}.author-content-item.buff .buff-title {  display: flex;  flex-direction: column;}.card-background-icon {  font-size: 18rem;  opacity: 0.6;  position: absolute;  right: 2%;  bottom: -10%;  transform: rotate(100deg);  transition: 1s ease-in-out;}.author-content-item.game-yuanshen {  background: url(https://bu.dusays.com/2022/11/17/6375f5589dde2.jpg) no-repeat top;  background-size: cover;  min-height: 460px;  color: white;  overflow: hidden;  width: 66%;}.author-content-item .content-bottom {  margin-top: auto;  display: flex;  align-items: center;  justify-content: space-between;}.author-content-item .content-bottom .icon-group {  display: flex;  position: relative;}/* .author-content-item .content-bottom .icon-group i {  display: inline-block;  width: 143px;  height: 18px;  margin-right: 0.5rem;} */.icon-pos-mid {  background: url(https://bu.dusays.com/2022/11/17/6375f5574f516.png);}.author-content-item.game-yuanshen::after {  box-shadow: 0 -39px 60px 20px #a089079a inset;  position: absolute;  content: "";  width: 100%;  height: 100%;  top: 0;  left: 0;}.author-content-item.historical-drama {  width: 32%;  background: url(https://bu.dusays.com/2022/12/11/6395626c96b6d.jpg) no-repeat top;  background-size: cover;  min-height: 460px;  overflow: hidden;  color: violet;}.author-content-item.historical-drama::after {  box-shadow: 0 -48px 203px 11px #57257aaf inset;  position: absolute;  content: "";  width: 100%;  height: 100%;  top: 0;  left: 0;}.author-content-item.like-technology {  background: url(https://bu.dusays.com/2022/11/17/637617ff5177f.jpg) no-repeat;  background-size: cover;  color: rgb(14, 159, 16);  min-height: 500px;}.author-content-item.like-music {  background: url(https://bu.dusays.com/2022/11/17/6375f558667f1.jpg) no-repeat top;  background-size: cover;  color: wheat;  min-height: 500px;  overflow: hidden;}.author-content-item.like-music::after {  box-shadow: 0 -10px 100px 10px #18a5e26a inset;  position: absolute;  content: "";  width: 100%;  height: 100%;  top: 0;  left: 0;}@media screen and (max-width: 768px) {  /* #gitcalendar {    display: none;  } */  /* [data-theme="dark"] .author-content-item .card-content .banner-button-group .banner-button {    color: black  } */  /* .author-content-item .card-content .banner-button-group .banner-button:hover {    background: none !important;  } */  .author-content-item.game-yuanshen .content-bottom {    padding-bottom: 10px;  }  .author-content-item.game-yuanshen .game-yuanshen-uid {    display: none;  }  .author-content {    margin-top: 0;  }  .author-content-item {    width: 100% !important;    margin-top: 1rem;    padding: 1rem;  }  .author-content-item.map {    margin-bottom: 0;  }  .author-content-item-group.column {    width: 100% !important;  }  .author-content-item.selfInfo {    height: 95%;  }  .author-content-item.personalities {    height: 170px;  }  .post-tips {    left: auto;  }  .author-content-item.personalities .image {    width: 90px;  }  .site-card-group>a {    width: 100% !important;  }  .post-reward {    display: none;  }  .reward-list-item {    width: 100% !important;  }  .layout>div:first-child:not(.recent-posts) {    padding: 1rem !important;  }  .author-content-item .card-content .banner-button-group .banner-button-text {    display: none;  }  .author-content-item .card-content .banner-button-group {    right: 1rem;    bottom: 1rem;  }  .author-content-item .card-content .banner-button-group .banner-button {    width: 3rem;    height: 3rem !important;  }  /* .author-content-item .card-content .banner-button-group .banner-button i {    margin-right: 0;    font-size: 1.5rem;    background: white;    border-radius: 50%;    padding: 6px;    margin-left: 80px;  } */  /* .author-content-item .card-content .banner-button-group .banner-button:hover i {    background: var(--anzhiyu-background) !important;    color: var(--anzhiyu-theme);  } */  #selfInfo-content-year {    width: 90px;  }}@media screen and (min-width: 768px) and (max-width: 896px) {  .author-content-item.like-music .content-bottom .tips {    display: none;  }}/* 赞赏的css */.reward-list-all {  display: flex;  flex-wrap: wrap;  flex-direction: row;  margin: 1rem -0.25rem 0.5rem;}.reward-list-item {  padding: 1rem;  border-radius: 12px;  border: 1px solid rgba(255, 192, 203, 0.6);  width: calc((100% / 3) - 0.5rem);  margin: 0 0.25rem 0.5rem;  box-shadow: 2px 2px 2px rgba(255, 192, 203, 0.6);  background: linear-gradient(140deg, #f8c303 0, #effb05 100%);  background-size: 200%;  animation: gradient 10s ease infinite;}.reward-list-item .reward-list-item-name {  font-size: 1.2rem;  font-weight: 900;  color: black;  line-height: 1;  margin-bottom: 1rem;}.reward-list-item .reward-list-bottom-group {  display: flex;  align-items: center;  justify-content: space-between;}.reward-list-item .reward-list-item-money {  padding: 4px;  font-size: 12px;  color: black;  font-weight: 700;  line-height: 1;  border-radius: 4px;  margin-right: 4px;  white-space: nowrap;}.reward-list-item .reward-list-item-time {  font-size: 12px;  color: black;  white-space: nowrap;}/* 生涯历程 */.author-content-item.careers {  min-height: 400px;}.author-content-item.careers .careers-group {  margin-top: 12px;}.author-content-item.careers .careers-item {  display: flex;  align-items: center;}.author-content-item.careers .careers-item .circle {  width: 16px;  height: 16px;  margin-right: 8px;  border-radius: 16px;}/* .author-content-item.careers .careers-item .name {  color: var(--anzhiyu-secondtext);} */.author-content-item.careers .careers-item {  display: flex;  align-items: center;}.author-content-item.careers .careers-item .circle {  width: 16px;  height: 16px;  margin-right: 8px;  border-radius: 16px;}/* .author-content-item.careers .careers-item .name {  color: var(--anzhiyu-secondtext);} */.author-content-item.careers img {  position: absolute;  left: 0;  bottom: 20px;  width: 100%;  transition: 0.6s;}/* :root {  --loadingbar-background-color: #2c2b30;  --loadingbar-prospect-color: #ece5d8;} */.loading-bar {  position: absolute;  top: 50%;  left: 50%;  width: 500px;  height: 62.5px;  transform: translate(-25%, -50%) scale(0.5);  transition: all 0.5s;  user-select: none;  overflow: hidden;}.loading-bar img {  position: absolute;  top: 500px;  left: 0;  filter: drop-shadow(0 -500px 0 pink);}.loading-bar::after {  content: "";  position: absolute;  top: 500px;  left: 0;  filter: drop-shadow(0 -500px 0 #ff3456);  width: 500px;  height: 62.5px;  background: url("https://bu.dusays.com/2022/11/17/6375f5574f516.png") no-repeat left 100%;  background-size: 500px 62.5px;  background-position-x: 0;}.author-content-item.game-yuanshen:hover .loading-bar::after {  animation: loading-bar 3.5s cubic-bezier(0.28, 0.11, 0.32, 1) infinite forwards;}@media screen and (max-width: 719px) {  .loading-bar .loading-bar {    display: none;  }}@media screen and (max-width: 719px) and (orientation: landscape) {  .loading-bar .loading-bar {    display: block !important;    transform: translate(-50%, -50%) scale(0.7) !important;  }}@supports not (filter: drop-shadow(0 0 0 #fff)) {  .loading-bar:before {    content: "Your browser does not support the animation";  }}@keyframes loading-bar {  0% {    width: 0;    background-size: 500px 62.5px;  }  16.6% {}  33.2% {}  49.8% {}  66.4% {}  83% {    width: 475px;  }  83.1% {    width: 475px;  }  83.2% {    width: 475px;  }  83.3% {    width: 475px;  }  83.4% {    width: 475px;  }  83.5% {    width: 475px;  }  83.6% {    width: 475px;  }  83.7% {    width: 475px;  }  83.8% {    width: 475px;  }  83.9% {    width: 475px;  }  84% {    width: 475px;  }  85% {    width: 475px;  }  86% {    width: 475px;  }  87% {    width: 475px;  }  100% {    width: 500px;  }}/* hello world */.hello-about {  margin: 20px auto;  border-radius: 24px;  box-shadow: var(--roydon-box-shadow);  position: relative;  overflow: hidden;  user-select: none;}.shapes {  position: relative;  height: 200px;  width: 100%;  background: #3dfcffad;  overflow: hidden;}.shape {  will-change: transform;  position: absolute;  border-radius: 50%;}.shape.shape-1 {  background: #115de0;  width: 700px;  height: 700px;  margin: -325px 0 0 -325px;}.shape.shape-2 {  background: #ffb3ade7;  width: 450px;  height: 450px;  margin: -220px 0 0 -220px;}.shape.shape-3 {  background: #facc61;  width: 280px;  height: 280px;  margin: -135px 0 0 -135px;}.hello-about .content {  top: 0;  left: 0;  position: absolute;  display: flex;  justify-content: center;  align-items: center;  height: 200px;  width: 100%;  background: rgba(250, 130, 140, 0.979);  mix-blend-mode: screen;}[data-theme="dark"] .hello-about .content {  background: transparent;}[data-theme="dark"] .hello-about h1 {  color: white;}.hello-about h1 {  margin: 0;  text-align: center;  vertical-align: baseline;  line-height: 1;  font-size: calc((0.0389119683 * 100vw + (10px)));  width: 100%;  height: 100%;  display: flex;  align-items: center;  justify-content: center;}@media (min-width: 419px) {  .hello-about h1 {    font-size: calc((0.0389119683 * 100vw + (5px)));  }}.cursor {  position: absolute;  background: #ff3456;  width: 30px;  height: 30px;  margin: -10px 0 0 -10px;  border-radius: 50%;  will-change: transform;  user-select: none;  pointer-events: none;  z-index: 3;}::selection {  color: #fff;  background: #2128bd;}.author-content-item.skills {  display: flex;  justify-content: center;  align-items: flex-start;  flex-direction: column;  width: 50%;  min-height: 400px;}.author-content-item.skills .skills-style-group {  position: relative;}.author-content-item.skills .tags-group-all {  display: flex;  transform: rotate(0);  transition: 0.3s;}.author-content-item.skills .tags-group-wrapper {  margin-top: 40px;  display: flex;  flex-wrap: nowrap;  animation: rowup 50s linear infinite;}.tags-group-icon-pair {  margin-left: 1rem;}.tags-group-icon {  display: flex;  align-items: center;  justify-content: center;  box-shadow: 1px 1px 1px black;  width: 120px;  height: 120px;  border-radius: 30px;}.tags-group-icon img {  width: 80%;  margin: 0 auto !important;}.tags-group-icon-pair .tags-group-icon:nth-child(even) {  margin-top: 1rem;  transform: translate(-60px);}.author-content-item.skills .skills-list {  display: flex;  opacity: 0;  transition: 0.3s;  position: absolute;  width: 100%;  top: 0;  left: 0;  flex-wrap: wrap;  flex-direction: row;  margin-top: 10px;}.author-content-item.skills .skill-info {  display: flex;  align-items: center;  margin-right: 6px;  margin-top: 4px;  font-weight: 800;  background: rgba(255, 192, 203, 0.8);  border-radius: 40px;  padding: 4px 8px;}.author-content-item.skills .skill-icon {  width: 32px;  height: 32px;  border-radius: 32px;  display: flex;  align-items: center;  justify-content: center;  margin-right: 4px;}.author-content-item.skills .skill-icon img {  width: 23px;  height: 23px;  margin: 0 auto !important;}.author-content-item.skills .etc {  margin-right: 10px;  margin-top: 10px;}@keyframes rowup {  0% {    transform: translateX(0);  }  100% {    transform: translateX(-70%);  }}.author-content-item.skills:hover .skills-style-group .tags-group-all {  opacity: 0;}.author-content-item.skills:hover .skills-style-group .skills-list {  opacity: 1;}/* .site-card-group .site-card .info {  margin-top: 0;}.site-card-group>a {  width: calc(100% / 4 - 0.5rem);  height: 150px;  position: relative;  display: block;  margin: 0.5rem 0.25rem;  float: left;  overflow: hidden;  padding: 0;  border-radius: 8px;  -webkit-transition: all 0.3s ease 0s, -webkit-transform 0.6s cubic-bezier(0.6, 0.2, 0.1, 1) 0s;  -moz-transition: all 0.3s ease 0s, -moz-transform 0.6s cubic-bezier(0.6, 0.2, 0.1, 1) 0s;  -o-transition: all 0.3s ease 0s, -o-transform 0.6s cubic-bezier(0.6, 0.2, 0.1, 1) 0s;  -ms-transition: all 0.3s ease 0s, -ms-transform 0.6s cubic-bezier(0.6, 0.2, 0.1, 1) 0s;  transition: all 0.3s ease 0s, transform 0.6s cubic-bezier(0.6, 0.2, 0.1, 1) 0s;  -webkit-box-shadow: none;  box-shadow: none;  border: var(--style-border) !important;}.site-card-group>a .wrapper {  position: relative;}.site-card-group>a .cover {  width: 100%;  -webkit-transition: -webkit-transform 0.5s ease-out;  -moz-transition: -moz-transform 0.5s ease-out;  -o-transition: -o-transform 0.5s ease-out;  -ms-transition: -ms-transform 0.5s ease-out;  transition: transform 0.5s ease-out;}.site-card-group>a .info,.site-card-group>a .wrapper .cover {  position: absolute;  top: 0;  left: 0;}.site-card-group>a .info {  display: -webkit-box;  display: -moz-box;  display: -webkit-flex;  display: -ms-flexbox;  display: box;  display: flex;  -webkit-box-orient: vertical;  -moz-box-orient: vertical;  -o-box-orient: vertical;  -webkit-flex-direction: column;  -ms-flex-direction: column;  flex-direction: column;  -webkit-box-pack: center;  -moz-box-pack: center;  -o-box-pack: center;  -ms-flex-pack: center;  -webkit-justify-content: center;  justify-content: center;  -webkit-box-align: center;  -moz-box-align: center;  -o-box-align: center;  -ms-flex-align: center;  -webkit-align-items: center;  align-items: center;  width: 100%;  height: 100%;  overflow: hidden;  border-radius: 3px;  background-color: rgba(255, 255, 255, 0.7);  -webkit-transition: -webkit-transform 0.5s cubic-bezier(0.6, 0.2, 0.1, 1) 0s;  -moz-transition: -moz-transform 0.5s cubic-bezier(0.6, 0.2, 0.1, 1) 0s;  -o-transition: -o-transform 0.5s cubic-bezier(0.6, 0.2, 0.1, 1) 0s;  -ms-transition: -ms-transform 0.5s cubic-bezier(0.6, 0.2, 0.1, 1) 0s;  transition: transform 0.5s cubic-bezier(0.6, 0.2, 0.1, 1) 0s;}.site-card-group>a .info img {  position: relative;  top: 45px;  width: 80px;  height: 80px;  border-radius: 50%;  -webkit-box-shadow: 0 0 10px rgb(0 0 0 / 30%);  box-shadow: 0 0 10px rgb(0 0 0 / 30%);  z-index: 1;  text-align: center;  pointer-events: none;}.site-card-group>a .info span {  padding: 20px 10% 60px 10%;  font-size: 16px;  width: 100%;  text-align: center;  -webkit-box-shadow: 0 0 10px rgb(0 0 0 / 30%);  box-shadow: 0 0 10px rgb(0 0 0 / 30%);  background-color: rgba(255, 255, 255, 0.7);  color: var(--font-color);  white-space: nowrap;  overflow: hidden;  -o-text-overflow: ellipsis;  text-overflow: ellipsis;}.site-card-group .site-card:hover {  border-color: var(--anzhiyu-main) !important;  background-color: var(--anzhiyu-main) !important;  -webkit-box-shadow: var(--anzhiyu-shadow-theme) !important;  box-shadow: var(--anzhiyu-shadow-theme) !important;}.site-card-group>a:hover .wrapper img {  -webkit-transform: scale(1.2);  -moz-transform: scale(1.2);  -o-transform: scale(1.2);  -ms-transform: scale(1.2);  transform: scale(1.2);}.site-card-group>a .cover {  width: 100%;  -webkit-transition: -webkit-transform 0.5s ease-out;  -moz-transition: -moz-transform 0.5s ease-out;  -o-transition: -o-transform 0.5s ease-out;  -ms-transition: -ms-transform 0.5s ease-out;  transition: transform 0.5s ease-out;}.site-card-group>a .wrapper img {  height: 150px;  pointer-events: none;}.site-card-group .site-card .wrapper img {  -webkit-transition: -webkit-transform 0.5s ease-out !important;  -moz-transition: -moz-transform 0.5s ease-out !important;  -o-transition: -o-transform 0.5s ease-out !important;  -ms-transition: -ms-transform 0.5s ease-out !important;  transition: transform 0.5s ease-out !important;}.site-card-group>a .wrapper .fadeIn {  -webkit-animation: coverIn 0.8s ease-out forwards;  -moz-animation: coverIn 0.8s ease-out forwards;  -o-animation: coverIn 0.8s ease-out forwards;  -ms-animation: coverIn 0.8s ease-out forwards;  animation: coverIn 0.8s ease-out forwards;}.site-card-group>a:hover .info {  -webkit-transform: translateY(-100%);  -moz-transform: translateY(-100%);  -o-transform: translateY(-100%);  -ms-transform: translateY(-100%);  transform: translateY(-100%);} */]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/css/aplayer.css"/>
      <url>/css/aplayer.css</url>
      
        <content type="html"><![CDATA[/* 左侧边栏伸缩音乐播放器 */.contact-info {  position: fixed;  bottom: 40%;  z-index: 200;  left: -50px;  transition: .3s;}.contact-info:hover {  left: 0px;}.contact-info .option {  cursor: pointer;  position: relative;  margin: 5px 0;}.contact-info .option i {  display: block;  width: 50px;  text-align: center;  height: 60px;  line-height: 60px;  background: rgb(255, 255, 255);  color: pink;  font-size: 23px;  transition: .3s;  border-radius: 0 10px 10px 0;}.contact-info .option:hover i {  color: #17f4ec;}.contact-info .text {  border-radius: 16px;  position: absolute;  height: 60px;  width: 200px;  background: rgba(255, 255, 255, 0.8);  top: 0;  z-index: -1;  left: -135px;  color: #000;  line-height: 60px;  text-align: center;  transition: .3s;}.contact-info .aplayertext {  transition: none !important;}.aplayer {  position: absolute !important;}.aplayer.aplayer-fixed .aplayer-body {  left: 0;  position: absolute !important;  width: 370px !important;  transition: none !important;  border-radius: 10px !important;}.aplayer.aplayer-fixed {  left: -300px !important;}.contact-info .option:hover .aplayer.aplayer-fixed .aplayer-body,.contact-info .option:hover .aplayer.aplayer-fixed {  left: 0px !important;}.contact-info .option:hover .text {  left: 60px;}.contact-info .blok {  position: absolute;  height: 60px;  width: 100px;  top: 0;  z-index: -1;  left: 0px;}.contact-info .bloktop {  position: absolute;  height: 75px;  width: 100px;  bottom: 0px;  z-index: -1;  left: 0px;}.contact-info .blokbottom {  position: absolute;  height: 75px;  width: 100px;  top: 0;  z-index: -1;  left: 0px;}.contact-info .option:hover .blok,.contact-info .option:hover .bloktop,.contact-info .option:hover .blokbottom {  left: 0px;}.contact-info .option:hover .aplayertext {  left: 66px !important;  width: 370px !important;  background: transparent !important;}.aplayer.aplayer-fixed .aplayer-miniswitcher {  border-radius: 0 10px 10px 0 !important;}.aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {  transition: 0.3s !important;  border-radius: 10px !important;}.aplayer .aplayer-pic {  height: 60px !important;}.aplayer .aplayer-info {  height: 60px !important;}.aplayer.aplayer-narrow .aplayer-body {  height: 60px;}/* .aplayer.aplayer-fixed .aplayer-list {  display: none !important;}.aplayer-icon-menu:hover .aplayer.aplayer-fixed .aplayer-list {  display: block !important;} */.aplayer .aplayer-list.aplayer-list-hide {  margin-bottom: 59px !important;}.aplayer.aplayer-fixed .aplayer-list {  max-height: 130px !important;  margin-bottom: 60px !important;  max-height: 130px !important;  border-radius: 10px 10px 0 0 !important;  border: none !important;}.aplayer .aplayer-list ol {  max-height: 130px !important;}.aplayer.aplayer-fixed .aplayer-info {  transition: none !important;}.aplayer.aplayer-narrow .aplayer-body {  height: 60px !important;}.aplayer.aplayer-narrow .aplayer-body,.aplayer.aplayer-narrow .aplayer-pic {  border-radius: 10px 0 0 10px !important;}.aplayer.aplayer-fixed {  border-radius: 10px !important;}.aplayer .aplayer-pic {  border-radius: 0 0 0 10px !important;}[data-theme=dark] .contact-info .option i {  background: rgb(22, 22, 22);  color: pink;}[data-theme=dark] .contact-info .text {  background: rgba(23, 23, 23, 0.8);  color: #fff;}@media screen and (max-width:1300px) {  .contact-info {    display: none !important;  }}.aplayer {  background: var(--card-bg) !important;  /* backdrop-filter: saturate(120%) blur(20px) !important; */}[data-theme=dark] .aplayer {  color: #fff;}[data-theme=dark] .aplayer.aplayer-fixed .aplayer-body {  background: #000 !important;  color: #fff;}[data-theme=dark] .aplayer .aplayer-list ol li:hover {  background: #3b3b3b;}[data-theme=dark] .aplayer .aplayer-list ol li.aplayer-list-light {  background: #686868;}[data-theme=dark] .aplayer .aplayer-info .aplayer-controller .aplayer-time {  color: #d4d4d4;}[data-theme=dark] .aplayer .aplayer-list ol li .aplayer-list-index {  color: #d4d4d4;}[data-theme=dark] .aplayer .aplayer-list ol li .aplayer-list-author {  color: #d4d4d4;}[data-theme=dark] .aplayer .aplayer-info .aplayer-controller .aplayer-time .aplayer-icon path {  fill: #d4d4d4;}.contact-info .text .strip {  border-radius: 5px;  position: absolute;  height: 36px;  width: 5px;  background: rgba(251, 8, 109, 0.8);  top: 12px;  z-index: -1;  right: 4px;  transition: 0.4s;}.aplayertext .strip {  transition: none !important;}.contact-info .option:hover .aplayertext .strip {  background: transparent;}[data-theme=dark] .aplayer .aplayer-miniswitcher {  background: rgba(23, 23, 23, 0.85);}.aplayer .aplayer-miniswitcher .aplayer-icon:hover path {  fill: #11eeea;}[data-theme=dark] .contact-info .option:hover i {  color: #ca0cef;}/* 歌词样式修改 */.aplayer .aplayer-lrc p {  opacity: .8 !important;  color: #d5b4fa;}.aplayer .aplayer-lrc .aplayer-lrc-contents>.aplayer-lrc-current {  color: #cf07f7;}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/css/category_tag.css"/>
      <url>/css/category_tag.css</url>
      
        <content type="html"><![CDATA[/* archives */#aside-content .card-archives ul.card-archive-list>.card-archive-list-item a:hover,#aside-content .card-categories ul.card-category-list>.card-category-list-item a:hover {  border-radius: 8px;}.article-sort .article-sort-item:not(.year) {  background: var(--roydon-small-card-bg);  margin: 0.5%;}@media screen and (min-width:900px) {  .article-sort .article-sort-item:not(.year) {    float: left;    box-shadow: var(--roydon-box-shadow);    padding: 5px;    /* border: 2px solid black; */    width: 49%;    /* height: 80px; */    overflow: hidden;    text-overflow: ellipsis;    white-space: nowrap;    box-sizing: border-box;  }}.article-sort .article-sort-item .article-sort-item-info .article-meta-wrap span:not(.article-meta__link) {  display: block;}.article-sort-item-img {  border-radius: 10px;  /* width: 30%; */  /* margin-right: 10px; */}.article-meta-wrap a:hover {  border-radius: 4px;  background: rgba(255, 192, 203, 0.7);  color: #ff3456 !important;  /* transition: .3s; */}.article-sort-item-info {  /* border-left: 4px solid black; */  width: 70%;  /* border-radius: 20px; */}.article-sort-item-title {  font-weight: 800;}.article-sort-item-title:hover {  color: #ff3456;}/* 分类目录条、标签目录条 */#catalog-bar {  padding: .4rem .8rem;  border-radius: 10px;  display: flex;  border: 3px solid pink;  margin-bottom: 1rem;  justify-content: space-between;}#catalog-bar .iconfont {  font-size: 14px;  padding-right: .8rem;  border-right: 2px solid pink;}#catalog-bar:hover {  border: 3px solid #ff3456;}#catalog-bar i {  line-height: inherit;}#catalog-list {  /* 分类/标签较少时，可以选择不设置 width，居中显示 catalog-list-item */  /* width: 100%; */  margin: 0 .5rem;  display: flex;  white-space: nowrap;  overflow-x: scroll;}#catalog-list::-webkit-scrollbar {  display: none;}.catalog-list-item a {  margin: 0 .2em;  padding: 0.2em 0.3em 0.3em;  font-weight: bold;  border-radius: 8px;  color: var(--font-color);  -webkit-transition: all .3s ease-in-out;  -moz-transition: all .3s ease-in-out;  -o-transition: all .3s ease-in-out;  -ms-transition: all .3s ease-in-out;  transition: all .3s ease-in-out;}.catalog-list-item:hover a {  background: pink;  color: aqua;}.catalog-list-item.selected a {  background: rgb(244, 199, 207);  color: #ff3456;}a.catalog-more {  min-width: fit-content;  font-weight: bold;  color: var(--font-color);  padding-left: .8rem;  border-left: 2px solid pink;}a.catalog-more:hover {  color: #ff3456;}.article-sort-item-info .article-sort-item-categories .article-meta__categories {  padding: 2px 4px;  margin: 0 2px;}.article-meta-wrap .article-sort-item-categories .iconfont {  font-size: 16px !important;}.article-meta-wrap .article-sort-item-tags .iconfont {  font-size: 16px !important;}.article-sort-item-info .article-sort-item-tags .article-meta__tags {  padding: 2px 4px;  margin: 0 2px;}#page .category-lists .category-list .category-list-item {  position: relative;  display: inline-block;  padding: 0 1rem;  width: 49%;  font-weight: 700;  margin: 0 .5% 2%;  border-radius: 10px;  box-shadow: rgb(135 32 32 / 30%) 50px 50px 50px 50px inset}@media (max-width:768px) {  #page .category-lists .category-list .category-list-item {    width: 95%  }}#page .category-lists .category-list .category-list-item::before {  display: none}#page .category-lists .category-list .category-list-item .category-list-link {  color: pink;  font-size: 1.5em;  margin-left: .4em}#page .category-lists .category-list .category-list-item .category-list-link:hover {  color: #ff3456;  font-size: 1.5em;  margin-left: .8em;  transition: .3s;}#page .category-lists .category-list .category-list-item .category-list-link::after {  content: '';  position: relative;  width: 0;  bottom: 0;  display: block;  height: 3px;  border-radius: 3px;  /* background: pink; */  -webkit-transition: all .6s ease-in-out;  -moz-transition: all .6s ease-in-out;  -ms-transition: all .6s ease-in-out;  -o-transition: all .6s ease-in-out;  transition: all .6s ease-in-out}#page .category-lists .category-list .category-list-item .category-list-link:hover::after {  width: 60%}#page .category-lists .category-list .category-list-item .category-list-count {  color: pink;  font-size: 1.2em}#page .category-lists .category-list .category-list-item .category-list-count::before {  content: '\e6a0';  padding-right: .2em;  font-family: 'iconfont'}#page .category-lists .category-list .category-list-item .category-list-count::after {  display: none}#page .category-lists .category-list li.category-list-item a.category-list-link::before {  position: absolute;  font-size: 4rem;  line-height: 4rem;  top: 1rem;  right: 1rem;  opacity: .7;  box-shadow: 0 3px 8px 6px rgb(85 85 85 / 6%);  -webkit-transform: rotate(-15deg);  -moz-transform: rotate(-15deg);  -ms-transform: rotate(-15deg);  -o-transform: rotate(-15deg);  transform: rotate(-15deg);  -webkit-transition: all .6s ease-in-out;  -moz-transition: all .6s ease-in-out;  -ms-transition: all .6s ease-in-out;  -o-transition: all .6s ease-in-out;  transition: all .6s ease-in-out}#page .category-lists .category-list li.category-list-item a.category-list-link:hover::before {  opacity: .9;  -webkit-transform: rotate(0);  -moz-transform: rotate(0);  -ms-transform: rotate(0);  -o-transform: rotate(0);  transform: rotate(0)}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/css/circle.css"/>
      <url>/css/circle.css</url>
      
        <content type="html"><![CDATA[.scrollbar {  overflow: auto;  height: 100%;}.scrollbar::-webkit-scrollbar {  width: 3px;  height: 4px;}.scrollbar::-webkit-scrollbar-thumb {  background: rgba(0, 0, 0, 0.3);  border-radius: 4px;  border: 1px solid transparent;}#friend-circle-page {  --bg: #000;  --bili-pink: #f69;  background: #17181a;  color: white;  display: flex;  border-radius: 1rem;  height: 70vh;}@media screen and (max-width: 768px) {  #friend-circle-page {    height: 80vh;  }}#friend-circle-page .friends {  width: 300px;  border-right: 2px solid #f69;  padding: 1rem 1rem;  display: flex;  flex-direction: column;  gap: 0.5rem;  overflow-y: scroll;}#friend-circle-page .friends .friend {  padding: 0.5rem 1rem;  border-radius: 0.5rem;  display: flex;  align-items: center;  gap: 0.5rem;  cursor: pointer;  transition: 0.5s; }#friend-circle-page .friends .friend .avatar {  width: 3rem;  height: 3rem;  border-radius: 1.5rem;  margin: 0 !important;}#friend-circle-page .friends .friend .name {  overflow: hidden;  text-overflow: ellipsis;  white-space: nowrap;}#friend-circle-page .friends .friend:hover {  background-color: var(--bili-pink);}#friend-circle-page .friends .friend.active {  background: var(--bili-pink);}#friend-circle-page .friends .friend.alive .avatar {  box-shadow: 0 0 0 3px var(--bili-pink);}#friend-circle-page .posts .post {  /* margin-bottom: 1rem; */  padding: 0.5rem;}#friend-circle-page .posts .post .meta {  display: flex;  align-items: center;  gap: 0.5rem;  padding: 0 1rem 0 0;}#friend-circle-page .posts .post .meta .avatar {  width: 2rem;  height: 2rem;  border-radius: 50%;}#friend-circle-page .posts .post .meta .author {  flex: 1;}#friend-circle-page .posts .post .info {  background: #46208b7d;  padding: 0.5rem;  border-radius: 0 1rem 1rem 1rem;  margin: 0 0 0.5rem 2.5rem;}#friend-circle-page .posts .post .info:hover {  background: #45208be3;}#friend-circle-page .posts .post .info .link:hover {  color: var(--bili-pink);  transition: 0.5s;}#friend-circle-page .author-info {  overflow: hidden;  flex: 1;  padding: 0.5rem;}#friend-circle-page .author-info .author-card {  background: #f9c445;  padding: 1rem;  border-radius: 0.5rem;  display: flex;  gap: 1rem;  justify-content: space-between;  align-items: center;  margin-bottom: 1rem;}#friend-circle-page .author-info .avatar {  width: 3rem;  height: 3rem;  border-radius: 0.5rem;  margin: 0;}#friend-circle-page .author-info .center {  /* flex: 1; */  /* font-size: 1.4rem; */}#friend-circle-page .author-info .center .name {  font-size: 1.4rem;  line-height: 1.8rem;  margin: 0;  color: #ffffff;}#friend-circle-page .author-info .center .desc {  line-height: 1.2rem;  font-size: 0.8rem;  color: var(--gray);}#friend-circle-page .author-info .right .link {  display: inline-block;  width: 3rem;  height: 3rem;  text-align: center;  line-height: 3rem;  border-radius: 1rem;  background: blanchedalmond;  color: var(--bili-pink);  transition: 0.5s;}#friend-circle-page .author-info .right .link:hover {  background-color: var(--bili-pink);  color: #fff;}@media (max-width: 768px) {  #friend-circle-page {    flex-direction: column;  }  #friend-circle-page .friends {    height: 7rem;    width: 100%;    padding: 0.5rem 1rem;    overflow-x: scroll;    overflow-y: hidden;    flex-direction: row;    border-right: none;    border-bottom: 1px solid var(--bg);  }  #friend-circle-page .friends .friend {    width: 5rem;    height: 6rem;    padding: 0.5rem;    flex-direction: column;  }  #friend-circle-page .friends .friend .name {    width: 100%;    font-size: 0.8rem;    text-align: center;  }}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/css/commentBarrage.css"/>
      <url>/css/commentBarrage.css</url>
      
        <content type="html"><![CDATA[.comment-barrage {  position: fixed;  bottom: 0;  right: 55px;  padding: 0 0 30px 10px;  z-index: 100;  display: flex;  flex-direction: column;  justify-content: end;  align-items: flex-end;}@media screen and (max-width: 768px) {  .comment-barrage {    display: none !important;  }}.comment-barrage-item {  min-width: 100px;  max-width: 220px;  min-height: 80px;  max-height: 120px;  margin: 4px 0;  padding: 8px;  background: var(--roydon-small-card-bg);  backdrop-filter: blur(20px);  border-radius: 8px;  color: var(--font-color);  animation: barrageIn 0.3s cubic-bezier(.25, .01, .5, 1.5);  transition: 0.5s;  display: flex;  flex-direction: column;}.comment-barrage-item.out {  opacity: 0;}@keyframes barrageIn {  0% {    transform: scale(0.1);  }  100% {    transform: scale(1.0);  }}.comment-barrage-item .barrageHead {  height: 30px;  padding: 0;  line-height: 30px;  font-size: 12px;  border-bottom: 2px solid #F69;  display: flex;  justify-content: space-between;  align-items: center;}.comment-barrage-item .barrageHead .barrageNick {  font-size: 14px;  font-weight: bold;}.comment-barrage-item .barrageHead .barrageAvatar {  width: 24px;  height: 24px;  margin: 0;  border-radius: 50%;}.comment-barrage-item .barrageContent {  font-size: 12px;  line-height: 1.2;  height: calc(100% - 20px);  overflow: scroll;}.comment-barrage-item .barrageContent img {  max-width: 48px;  max-height: 48px;}.comment-barrage-item .barrageContent::-webkit-scrollbar {  height: 0;  width: 3px;}.comment-barrage-item .barrageContent::-webkit-scrollbar-button {  display: none;}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/css/custom.css"/>
      <url>/css/custom.css</url>
      
        <content type="html"><![CDATA[/* CDN 服务仅供平台体验和调试使用，平台不承诺服务的稳定性，企业客户需下载字体包自行发布使用并做好备份。 */@font-face {    font-family: "ali-black";    font-weight: 700;    src: url("//at.alicdn.com/wf/webfont/jmF1bH9rSbIN/ngx4Rto7QDaF0wjwWujj1.woff2") format("woff2"),        url("//at.alicdn.com/wf/webfont/jmF1bH9rSbIN/A5DV5XIJJ9_XT5C2t2NRE.woff") format("woff");    font-display: swap;}/* 胡桃video *//* #video-hutao {    position: absolute;    top: 50%;    left: 50%;    transform: translate3d(-50%, -50%, 0);} */#body-wrap .full_page .index-video {    display: block !important;}#body-wrap .full_page .waves-area {    display: block !important;}/* .recent-posts .recent-post-item.firstpost-item {    width: 100% !important;} *//* aside */.aside-list .aside-list-item:hover {    border-radius: 16px;    background-color: #fdb2f7;    transition: .6s ease-in-out;}#aside-content .card-recent-post {    border-radius: 40px;    border: 8px solid #000;    background: url(https://bu.dusays.com/2023/01/02/63b2e761872df.webp);    background-size: cover;}.page #aside-content .sticky_layout .card-widget:nth-child(2)>.item-headline {    display: flex;    justify-content: space-between;    align-items: center;    position: absolute;    width: 100px;    height: 30px;    left: 50%;    top: 10px;    padding: 0 10px;    transform: translateX(-50%);    background: black;    border-radius: 20px;    transition: .6s ease-in-out;    cursor: default;    user-select: none;}.page #aside-content .sticky_layout .card-widget:nth-child(2)>.aside-list {    margin: 40px 0 0;}.page #aside-content .sticky_layout .card-widget:nth-child(2)>.item-headline i {    display: none;}.page #aside-content .sticky_layout .card-widget:nth-child(2)>.item-headline span {    display: none;}.page #aside-content .sticky_layout .card-widget:nth-child(2)>.item-headline:hover {    border: 2px solid rgb(0, 0, 0);    border-radius: 48px;    width: 200px;    height: 200px;    transition: .6s ease-in-out;    background: url(https://gcore.jsdelivr.net/gh/roydonGuo/CDN/avatar/ganyu.webp);    background-size: cover;}#recent-posts>.recent-post-item>.recent-post-info>.article-meta-wrap .article-meta__tags {    padding: 3px;    border-radius: 4px}/* 主题切换背景图片切换 */#web_bg {    background-image: var(--roydon-site-bg)}.bangumi-item .bangumi-picture img {    border-radius: 6px;}/* 主页中间博客名位置 */#page-header.full_page #site-info {    top: 38%;}/* 两款主题同一透明度0.8 */#vpanel {    opacity: .8;}/* 蕾姆rem看板娘 */#paul {    left: 0;    bottom: 0;    z-index: 520;    /* 如果模型被遮住可以把它改的更大 */    position: fixed;    pointer-events: none;    /* 防止遮住鼠标点击页面其他内容 */}#pagination {    margin: 0 auto;}/* 视频背景 */#video-bg {    position: fixed;    right: 0;    bottom: 0;    min-width: 100%;    min-height: 100%;    width: auto;    height: auto;    z-index: -9999;    /*灰色调*/    /*-webkit-filter:grayscale(100%)*/}h1#site-title {    font-family: "ali-black";    font-size: 3em !important;}a.article-title,a.blog-slider__title,a.categoryBar-list-link,h1.post-title {    font-family: "ali-black";}#aside-content .card-widget:last-child {    background: url('https://bu.dusays.com/2022/11/17/6375f55771d07.png');    background-repeat: no-repeat;    background-position: left;    background-size: cover;    background-origin: padding-box;    background-clip: border-box;    color: hotpink;    font-weight: 800;    font-size: 16px;}#aside-content .card-webinfo .webinfo .webinfo-item {    padding: 0 10px;}#recent-posts>.recent-post-item>.recent-post-info>.article-meta-wrap>.tags::before {    content: "\A";    white-space: nowrap !important;}/* 首页文章显示三栏 */#recent-posts>.recent-post-item:nth-child(n+2) {    width: 32.3%;}@media screen and (max-width: 768px) {    #recent-posts>.recent-post-item:nth-child(n+2) {        width: 100%;    }}#recent-posts>.recent-post-item .post_cover {    height: 12rem !important;}/* 首页磁贴卡片美化 */#recent-posts>.recent-post-item {    position: relative;    /* border: 2px solid black; */}#recent-posts>.recent-post-item:hover {    /* border: 2px solid pink; */}.icon-zhongbiao::before {    color: #f7c768;}.tk-meta-input .el-input-group__prepend {    background-color: pink;}/* bilibli番剧插件 */.bangumi-active {    background: #dbecfe !important;    border-radius: 10px !important;}a.bangumi-tab:hover {    text-decoration: none !important;}.bangumi-button:hover {    background: #dbecfe !important;    border-radius: 10px !important;}a.bangumi-button.bangumi-nextpage:hover {    text-decoration: none !important;}.bangumi-button {    padding: 5px 10px !important;}a.bangumi-tab {    padding: 5px 10px !important;}svg.icon.faa-tada {    font-size: 1.1em;}/* 解决artitalk的图标问题 */#uploadSource>svg {    width: 1.19em;    height: 1.5em;}/* 公告 *//* .announcement-detail{    height: 250px;    background: url();    background-repeat: no-repeat;    background-size: cover;} *//* 最新文章图标 */.newPost-left,.newPost-right {    position: absolute;    top: 0;    color: black;    height: 1.8em;    font-weight: 700;    text-align: center;    line-height: 1.5em;    padding: 0 10px;    background-color: rgb(140, 140, 255);    border-radius: 0 0 8px 8px;}.newPost-left {    left: 16px;}.newPost-right {    left: 16px;}/*top-img黑色透明玻璃效果移除，不建议加，除非你执着于完全一图流或者背景图对比色明显 */#page-header:not(.not-top-img):before {    background-color: transparent;}[data-theme='dark'] #web_bg:before,[data-theme='dark'] #page-header:before {    position: absolute;    width: 100%;    height: 100%;    background-color: transparent !important;    content: '';}#pagination .page-number.current {    border-radius: 5px;}.announcement-detail {    font-weight: 900;}/* 首页文章卡片 *//* #recent-posts>.recent-post-item {    background: rgba(255, 255, 255, 0.8);} *//* 文章页面正文背景 *//* div#post {    background: rgba(255, 255, 255, 0.8);} *//* 分页页面 *//* div#page {    background: rgba(255, 255, 255, 0.8);} *//* 归档页面 *//* div#archive {    background: rgba(255, 255, 255, 0.8);} *//* 标签页面 *//* div#tag {    background: rgba(255, 255, 255, 0.8);} *//* 分类页面 *//* div#category {    background: rgba(255, 255, 255, 0.8);} *//*夜间模式伪类遮罩层透明*//* [data-theme='dark'] #recent-posts>.recent-post-item {    background: rgba(0, 0, 0, 0.8) !important;}[data-theme='dark'] .card-widget {    background: rgba(0, 0, 0, 0.8) !important;}[data-theme='dark'] div#post {    background: rgba(0, 0, 0, 0.8) !important;}[data-theme='dark'] div#tag {    background: rgba(0, 0, 0, 0.8) !important;}[data-theme='dark'] div#archive {    background: rgba(0, 0, 0, 0.8) !important;}[data-theme='dark'] div#page {    background: rgba(0, 0, 0, 0.8) !important;}[data-theme='dark'] div#category {    background: rgba(0, 0, 0, 0.8) !important;} *//* 头图透明 */#page-header {    background: transparent !important;}#rightside>div>button {    border-radius: 5px;}/* 鼠标图标 *//* body {    cursor: url('/img/pointer.cur'), auto;}a,[type='button']:not(:disabled),[type='reset']:not(:disabled),[type='submit']:not(:disabled),button:not(:disabled) {    cursor: url('/img/link.cur'), auto !important;} *//* 404页面 */#error-wrap {    position: absolute;    top: 40%;    right: 0;    left: 0;    margin: 0 auto;    padding: 0 1rem;    max-width: 1000px;    transform: translate(0, -50%);}#error-wrap .error-content {    display: flex;    flex-direction: row;    justify-content: center;    align-items: center;    margin: 0 1rem;    height: 18rem;    border-radius: 8px;    background: var(--card-bg);    box-shadow: var(--card-box-shadow);    transition: all 0.3s;}#error-wrap .error-content .error-img {    box-flex: 1;    flex: 1;    height: 100%;    border-top-left-radius: 8px;    border-bottom-left-radius: 8px;    background-color: #49b1f5;    background-position: center;    background-size: cover;}#error-wrap .error-content .error-info {    box-flex: 1;    flex: 1;    padding: 0.5rem;    text-align: center;    font-size: 14px;    font-family: Titillium Web, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft JhengHei', 'Microsoft YaHei', sans-serif;}#error-wrap .error-content .error-info .error_title {    margin-top: -4rem;    font-size: 9em;}#error-wrap .error-content .error-info .error_subtitle {    margin-top: -3.5rem;    word-break: break-word;    font-size: 1.6em;}#error-wrap .error-content .error-info a {    display: inline-block;    margin-top: 0.5rem;    padding: 0.3rem 1.5rem;    background: var(--btn-bg);    color: var(--btn-color);}#body-wrap.error .aside-list {    display: flex;    flex-direction: row;    flex-wrap: nowrap;    bottom: 0px;    position: absolute;    padding: 1rem;    width: 100%;    overflow: scroll;}#body-wrap.error .aside-list .aside-list-group {    display: flex;    flex-direction: row;    flex-wrap: nowrap;    max-width: 1200px;    margin: 0 auto;}#body-wrap.error .aside-list .aside-list-item {    padding: 0.5rem;}#body-wrap.error .aside-list .aside-list-item img {    width: 100%;    object-fit: cover;    border-radius: 12px;}#body-wrap.error .aside-list .aside-list-item .thumbnail {    overflow: hidden;    width: 230px;    height: 143px;    background: var(--heo-card-bg);    display: flex;}#body-wrap.error .aside-list .aside-list-item .content .title {    -webkit-line-clamp: 2;    overflow: hidden;    display: -webkit-box;    -webkit-box-orient: vertical;    line-height: 1.5;    justify-content: center;    align-items: flex-end;    align-content: center;    padding-top: 0.5rem;    color: white;}#body-wrap.error .aside-list .aside-list-item .content time {    display: none;}.contrib-column {    line-height: 1.2;}/* 代码框主题 */#article-container figure.highlight {    border-radius: 10px;}#aside-content .card-widget {    /* border: 2px solid black !important; */}#aside-content .aside-list>.aside-list-item .content>.title {    color: #fff;    font-weight: bold;}#aside-content .card-widget:hover {    /* border: 2px solid pink !important; */}.gitcalendar-graph {    padding: 5px 0 0 !important;}.social-qq:before {    content: "\e626";    font-size: 24px;}span#subtitle:hover {    color: pink;    box-shadow: 2px 2px 1px black;}#article-container .btn-beautify.outline {    border-radius: 20px;    border: 5px solid;}#article-container>.genshin-card {    /* background: linear-gradient(112.88411960494409deg, rgba(248, 198, 215, 1) 2.265625%, rgba(175, 233, 249, 1) 100.70312499999999%); */    padding: 1%;    border-radius: 10px;}#article-container>.genshin-card>a>img {    width: 80%;    border-radius: 10px;}/* footer */#footer-wrap {    color: white}#footer-wrap a {    color: white;    height: 44px;    line-height: 36px}#footer-wrap a:hover {    color: #ff3456;    background-color: none}div#footer_deal {    justify-content: center;    display: flex;    padding-top: 2rem;    align-items: center}@media screen and (max-width: 768px) {    img.footer_mini_logo {        display: none    }    div#footer_deal {        flex-wrap: wrap;        flex-direction: row    }}a.deal_link {    display: flex;    margin: 1rem 20px;    /* color: blue; */    border-radius: 3rem;    width: 40px;    height: 40px;    background: transparent;    justify-content: center;    align-items: center;    transition: .5s}a.deal_link:hover {    color: white;    background: #ff3456}img.footer_mini_logo {    width: 64px;    height: 64px;    margin: 0 1rem;    cursor: pointer;    transition: cubic-bezier(0, 0, 0, 1.29) .5s}img.footer_mini_logo:hover {    filter: drop-shadow(0 2px 2px pink);    -webkit-backface-visibility: hidden;    -webkit-transform-style: preserve-3d}@media screen and (min-width: 1300px) {    img.footer_mini_logo:hover {        transform: scale(1.03)    }    img.footer_mini_logo:active {        transform: scale(.97)    }}#weblogo {    align-self: center}#footer-wrap a#Jayblog_footerlogo:hover {    background: none}.Jayblog_footerlogo_img {    filter: drop-shadow(0 12px 12px #ee7d7936)}.Jayblog_footerlogo_img:hover {    transform: scale(1.03)}.blog-slider__content {    padding-left: 0 !important;}/* 文章post-item修改分类 */.recent-post-item .recent-post-info .article-meta-wrap .article-meta .article-meta__categories {    position: absolute;    top: .5rem;    right: 1rem;    background: #7026f877;    /* backdrop-filter: blur(50px); */    border-radius: .4rem;    color: gold !important;    font-weight: 600 !important;    font-size: 99% !important;    padding: .2rem .8rem;}.recent-post-item .recent-post-info .article-meta-wrap .article-meta .article-meta__categories:hover {    text-decoration: none !important;    background: #185fff;    /* backdrop-filter: blur(30px) */}#recent-posts>.recent-post-item>.recent-post-info>.article-meta-wrap {    margin-bottom: 0 !important;}.article-meta-wrap .iconfont {    font-size: 110%;}.card-recent-post .home-indicator {    position: relative;    width: 100px;    margin: 5px auto;    height: 6px;    background-color: #fff;    border-radius: 3px;}/* .recent-post-item .recent-post-info .article-meta-wrap .article-meta:nth-child(2):hover a{    text-decoration: none !important;    background: none !important;} *//* card-announcement *//* .aside-content>.card-announcement {    background: url(https://bu.dusays.com/2022/11/22/637ce7ce67d6a.jpg) center / cover no-repeat !important;    background-size: cover !important;    box-shadow: 2px -4px 10px 10px #ff90906b inset !important;} */.aside-content .card-announcement .genshin-card {    width: 100%;    border-radius: 10px;}/* 翻页按钮居中 */#pagination {    width: 100%;    margin: auto;}/* 夜间模式菜单栏发光字 */[data-theme="dark"] #nav .site-page,[data-theme="dark"] #nav .menus_items .menus_item .menus_item_child li a {    text-shadow: 0 0 2px var(--theme-color) !important;}/* 手机端适配 */[data-theme="dark"] #sidebar #sidebar-menus .menus_items .site-page {    text-shadow: 0 0 2px var(--theme-color) !important;}/* aside-clock */#hexo_electric_clock .clock-row {    /* font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif; */    font-weight: 600 !important;    font-size: .9em;}.card-background {    height: 92px !important;    margin: 10px !important;    border-radius: 10px !important;}.card-clock-time {    flex: 1;    font-family: UnidreamLED !important;    font-size: 3em !important;    text-align: center;    /* font-family: DS-Digital; */    background: linear-gradient(to right, #91e8f4, #4a8cfe);    -webkit-background-clip: text;    color: transparent;    line-height: 1 !important;}#hexo_electric_clock {    padding: 4px !important;}/* banner_index */#random {    width: 24% !important;    border-radius: 16px;    background: url(https://bu.dusays.com/2022/11/22/637ce7ce67d6a.jpg) center / cover no-repeat;    background-size: cover;    border-radius: 16px;    /* border: 2px solid black; */    font-size: 1.4rem;    position: relative;}#random-banner {    display: none;}#random:hover {    /* border: 2px solid pink; */    transition: all 0.3s;}#random:hover #random-hover {    display: block !important;}#random-banner {    width: 100% !important;    height: 100% !important;    border-radius: 16px;}#random-banner:hover {    background: transparent;    backdrop-filter: blur(10px);    transition: all 0.3s;}#random-hover {    position: absolute;    bottom: 0%;    /* right: 0%; */    /* height: 100% !important; */    border-radius: 16px;}#random-hover:hover {    background: transparent;    backdrop-filter: blur(10px);    transition: all 0.3s;}/* #random-hover:hover .fa-paper-plane {    position: absolute;    right: 2%;    transition: all 3s;} *//* #random-hover:hover {    -webkit-backdrop-filter: blur(20px) saturate(150%);} */.recent-posts>.recent-post-item:first-child {    width: 74% !important;}@media screen and (max-width: 1050px) {    #random {        display: none !important;    }    .recent-posts>.recent-post-item:first-child {        width: 100% !important;    }}#footer {    /* background: linear-gradient(180deg, blue 0, yellow 25%); */    margin-top: 1rem;    display: flex;    /* backdrop-filter: saturate(150%) blur(20px); */    flex-direction: column;    /* z-index: 1002 */}@media screen and (max-width: 768px) {    #footer {        /* background: linear-gradient(180deg, blue 0, yellow 25%); */        margin-top: 0;        z-index: 999;        display: none !important;    }}[data-theme=dark] #footer:before,[data-theme=dark] #page-header:before,[data-theme=dark] #web_bg:before {    background-color: transparent !important}@media screen and (max-width: 768px) {    #letlink {        flex-direction: column !important;        text-align: center !important    }    #letlogo {        display: none !important    }    #footer-wrap {        margin-top: 1rem !important    }}.footer-banner-right {    display: flex;    flex-direction: row;    flex-wrap: wrap}#footer-wrap {    display: flex;    flex-wrap: wrap;    justify-content: space-around;    padding: 20px 50px 0 50px;    text-align: left !important;    max-width: 1100px;    margin: 0 auto}#footer-wrap h1 {    font-size: 1.5rem;    margin: 0}#footer-wrap h3 {    padding: 0 12px}#footer-wrap p {    margin: 0 0 0 .2rem;    font-size: .8rem;    opacity: .8}#footer-wrap i {    margin-right: .5rem;    width: 22px;    font-size: 18px;    display: inline-block}#footer-wrap #letlogo {    display: flex;    flex-direction: column;    /*margin-right: 60px;*/    align-self: center;    margin: auto 0;    max-width: 200px}#footer-wrap #letlink .link_group {    display: flex;    flex-direction: column;    margin-right: 20px;    min-width: 180px}#footer-wrap #letlink {    display: flex;    flex-direction: row;    justify-content: space-around;    margin: 0 0 1rem 0}#weblogo i {    font-size: 2rem;    line-height: 2rem;    letter-spacing: -10px}#footer:before {    position: absolute !important;    width: 100% !important;    height: 100% !important;    content: '' !important;    z-index: -1}#Jay-footer .footer-links {    display: flex;    flex-direction: column}#Jay-footer {    display: flex;    flex-direction: row;    width: 100%;    max-width: 1000px;    margin: 0 auto;    /* border-radius: 50px; */    justify-content: space-between;    flex-wrap: wrap;    padding: 1rem 1rem}#Jay-footer .footer-item {    font-size: 1.2rem;    line-height: 1rem;    margin: .7rem 0;    color: white;    /*margin-right: auto*/}#Jay-footer .footer-item:hover {    color: #ff3456}#Jay-footer .footer-title {    color: pink;    font-size: 1.6rem;    margin: 0 auto;}#footer-banner {    padding: 1rem;    color: white;    /* margin-top: 1rem; */    backdrop-filter: blur(20px);    background: transparent;    display: flex;    /* overflow: hidden; */    z-index: -1;    transition: .5s;    /*border-top: var(--style-border)*/}[data-theme=dark] #footer-banner {    background: transparent}#footer-banner .footer-banner-links {    display: flex;    justify-content: space-between;    max-width: 1400px;    width: 100%;    margin: 0 auto;    flex-wrap: wrap;    align-items: center;}#footer-banner .footer-banner-left {    display: flex;    flex-wrap: wrap;    color: plum;    margin: 0 auto;}#footer-banner .footer-banner-link {    margin-right: 1rem;    color: white;    font-size: 1rem;    font-weight: 700;    white-space: nowrap}#footer-banner .footer-banner-link.cc {    margin-right: 0}#footer-banner .footer-banner-link.cc i {    margin-right: .5rem}#footer-banner .footer-banner-link:hover {    color: #ff3456}#footer-banner>div>div.footer-banner-left>span {    margin-right: 1rem}#footer-banner .footer-banner-right a:hover {    color: plum}#footer_deal i {    font-size: 2rem;    transition: .8s;    line-height: 1.3rem;    height: 1.3rem}.announcement_content {    line-height: 1;    max-height: 90px;}/* essay_page.css */#page:has(#essay_page) {    /* border: 0; */    box-shadow: 2px 4px 4px rgba(0, 0, 0, 0.8);    /* padding: 0 !important; */    /* background: transparent !important; */}/* 波浪css */.main-hero-waves-area {    width: 100%;    position: absolute;    left: 0;    bottom: -10px;    z-index: 1;}.waves-area .waves-svg {    width: 100%;    height: 4rem;}/* Animation */.parallax>use {    animation: move-forever 25s cubic-bezier(0.55, 0.5, 0.45, 0.5) infinite;}.parallax>use:nth-child(1) {    animation-delay: -2s;    animation-duration: 7s;    fill: #5782f0a6;}.parallax>use:nth-child(2) {    animation-delay: -3s;    animation-duration: 10s;    fill: #8faaedab;}.parallax>use:nth-child(3) {    animation-delay: -4s;    animation-duration: 13s;    fill: #9eb4e868;}.parallax>use:nth-child(4) {    animation-delay: -5s;    animation-duration: 20s;    fill: #819ce185;}/* 黑色模式背景 *//* [data-theme="dark"] .parallax>use:nth-child(1) {    animation-delay: -2s;    animation-duration: 7s;    fill: #18171dc8;}[data-theme="dark"] .parallax>use:nth-child(2) {    animation-delay: -3s;    animation-duration: 10s;    fill: #18171d80;}[data-theme="dark"] .parallax>use:nth-child(3) {    animation-delay: -4s;    animation-duration: 13s;    fill: #18171d3e;}[data-theme="dark"] .parallax>use:nth-child(4) {    animation-delay: -5s;    animation-duration: 20s;    fill: #18171d;} */@keyframes move-forever {    0% {        transform: translate3d(-90px, 0, 0);    }    100% {        transform: translate3d(85px, 0, 0);    }}/*Shrinking for mobile*/@media (max-width: 768px) {    .waves-area .waves-svg {        height: 40px;        min-height: 40px;    }}/* #page:has(#essay_page) .page-title {    display: none;} *//* #web_bg~.page:has(#essay_page) {    background: var(--anzhiyu-background);} */#bber .bber-container-img {    display: flex;    align-items: center;    justify-content: center;    width: 100%;    flex-wrap: wrap;    margin-bottom: .3rem;}#bber .bber-container-img .bber-content-noimg {    width: calc(100% / 2 -5px);}#bber .bber-content-img {    height: 100px;    border-radius: 8px;    margin: 0 auto 5px;    overflow: hidden;    display: flex;    position: relative;    justify-content: center;    align-items: center;    width: calc(100% / 2 - 5px);}#bber .bber-content-img img {    object-fit: cover;    margin: 0 auto;    max-height: 100%;    border-radius: 8px;}#bber .bber-content .datacont {    order: 0;    font-size: 1.1rem;    font-weight: 600;    width: 100%;    line-height: 1.2rem;    border-radius: 12px;    margin-bottom: 0.5rem;    display: flex;    flex-direction: column;    text-align: justify;}#bber p {    margin: 0px;}#bber div.bber-content {    display: flex;    flex-flow: wrap;    border-radius: 12px;    width: 100%;    height: 100%;}#bber .timeline ul li.bber-item {    position: relative;    width: 32%;    border-radius: 16px;    padding: 1rem 1rem 0.5rem;    transition: all 0.3s ease 0s;    display: flex;    flex-flow: column nowrap;    justify-content: space-between;    align-items: flex-start;    background: var(--roydon-small-card-bg);    /* box-shadow: var(--roydon-box-shadow); */    margin-right: 2%;}#bber .timeline #waterfall.show {    opacity: 1;}#bber .timeline #waterfall {    opacity: 0;    transition: all 0.3s ease 0s;}#bber ul.list {    display: flex;    flex-flow: row wrap;    justify-content: space-between;}#bber {    margin-top: 1rem;    width: 100%;}#bber>section>ul>li.bber-item {    margin-bottom: 1rem;}#bber-tips {    font-size: 14px;    display: flex;    justify-content: center;    margin-top: 2rem;}#bber .timeline ul li.bber-item hr {    display: flex;    position: relative;    margin: 1rem 0 0;    border: 1px dashed #f69;    width: 100%;}#bber .bber-info {    display: flex;    align-items: center;}#bber>section>ul>li>div .bber-info-time,#bber>section>ul>li>div .bber-info-from {    font-size: 0.88rem;    background-color: rgba(43, 40, 52, 0.3);    padding: 0px 8px;    border-radius: 20px;    cursor: default;    display: flex;    align-items: center;}#bber .bber-info .far.fa-clock {    margin-right: 4px;}#bber>section>ul>li>div .bber-info-from span,#bber>section>ul>li>div .bber-info-from {    margin-left: 4px;    background: #ffc0cbe8;    border-radius: 12px;}#bber .bber-bottom {    display: flex;    justify-content: space-between;    width: 100%;    margin-top: 10px;}#bber .bber-bottom .bber-reply {    cursor: pointer}#bber .timeline ul li.bber-item:hover {    box-shadow: var(--roydon-hover-box-shadow);    transform: translateY(-3px);}#bber .bber-content-link {    display: flex;    margin-left: 0.5rem;    font-size: 0.88rem;    align-items: center;    background-color: rgba(245, 97, 97, 0.13);    color: #ff3456;    padding: 0px 8px;    border-radius: 20px;}#bber .bber-content-link i {    margin-right: 3px;}#bber .bber-content-link:hover {    background-color: #ff3456;    color: white;}#bber .bber-music {    width: 100%;    height: 90px;    margin: 0.5rem 0;    border-radius: 8px;    overflow: hidden;    position: relative;    border: 1px solid #d6def5;    background: #0000ff2e;}#bber .aplayer {    margin: 0;    width: 100%;    height: 100%;}#bber .aplayer.aplayer-withlrc .aplayer-pic {    height: 82px !important;    width: 82px !important;    margin: 4px;    border-radius: 6px !important;}.bber-music .aplayer.aplayer-withlrc .aplayer-info {    padding: 5px 7px 0;}#bber .aplayer .aplayer-info .aplayer-music .aplayer-title {    font-size: 1rem;    font-weight: 800;    margin: 0;}/* #bber .aplayer .aplayer-info .aplayer-controller {    align-items: center;} *//* #bber .aplayer .aplayer-info .aplayer-controller .aplayer-bar-wrap {    padding: 0;} */.bber-info>.bber-content-link>.iconfont {    font-size: 0.88rem;}#bber .aplayer .aplayer-info .aplayer-controller .aplayer-time {    position: initial;}#bber .aplayer .aplayer-info .aplayer-controller .aplayer-bar-wrap .aplayer-bar {    background: gray;    height: 6px;    border-radius: 8px;    transition: 0.3s;    overflow: hidden;}#bber .aplayer .aplayer-info .aplayer-controller .aplayer-bar-wrap .aplayer-bar .aplayer-loaded {    height: 100%;    border-radius: 8px;}#bber .aplayer .aplayer-info .aplayer-controller .aplayer-bar-wrap .aplayer-bar .aplayer-played {    height: 100%;    border-radius: 8px;}#bber .aplayer .aplayer-info .aplayer-controller .aplayer-bar-wrap .aplayer-bar .aplayer-played .aplayer-thumb {    display: none;}/* 顶部样式 */#essay_page .author-content {    /* min-height: 25rem; */}#essay_page .author-content .author-content-item.essayPage {    height: 24em;    width: 82%;    margin-right: 2%;    background: url(https://bu.dusays.com/2022/11/17/637615a3af26b.png) left center / cover no-repeat;    color: wheat;    overflow: hidden;}#essay_page .author-content .author-content-item.essayPage-right {    width: 16%;    height: 24em;    background: url(https://bu.dusays.com/2022/11/17/637607ee5d734.gif) left center / cover no-repeat;    background-size: contain;    color: rgb(122, 49, 6);    overflow: hidden;}.bber-info-from>.iconfont {    font-size: 0.88rem;}/* 响应式 */@media screen and (max-width: 1300px) {    #bber .timeline ul li.bber-item {        width: 49%;        margin-right: 1%;    }}@media screen and (max-width: 768px) {    #essay_page .author-content {        margin: 1rem 0;    }    #essay_page .author-content .author-content-item {        margin: 1rem 0;    }    #essay_page .author-content .author-content-item.essayPage {        margin-right: 0 !important;        height: 200px;    }    #bber .timeline ul li.bber-item {        width: 100%;        margin-right: 0px;    }    #essay_page .author-content .author-content-item.essayPage-right {        display: none;    }}[data-theme="dark"] #bber .bber-music .aplayer,[data-theme="dark"] #bber .aplayer .aplayer-lrc:before,[data-theme="dark"] #bber .aplayer .aplayer-lrc:after {    background: none !important;}/* index_bbtimebar */#bbTimeList {    background: var(--card-bg);    padding: 0.5rem 1rem;    border-radius: 16px;    box-sizing: border-box;    /* border: 2px solid black; */    display: flex;    transition: all 0.6s ease 0s;    backdrop-filter: blur(20px);    margin: 1em auto 0;    align-items: center;    height: 3rem;    width: 100%;}#bbtalk {    width: 100%;    overflow: hidden;    text-overflow: ellipsis;    white-space: nowrap;}#bber-talk {    width: 100%;    height: 2rem;    line-height: 2rem;    display: flex;    flex-direction: column;}.bber-logo {    font-size: 2rem;    line-height: 2rem;    margin-right: 2rem;    transition: all 0.3s ease 0s;    cursor: pointer;}.bber-gotobb {    line-height: 20px;    margin-left: 2rem;    transition: all 0.3s ease 0s;    cursor: pointer;}#bber-talk .li-style {    width: 100%;    max-width: 100%;    height: 20px;    text-align: center;    overflow: hidden;    text-overflow: ellipsis;    transition: 0.3s;    font-weight: 800;    margin: auto;    cursor: pointer;    white-space: nowrap;}#bbTimeList:hover {    color: gold;    transition: all 0.2s ease-out 0s;}/* 文章页H1-H6图标样式效果 */.bbTimeList .bber-logo {    animation: rotate 2s linear infinite;}@-webkit-keyframes rotate {    0% {        -webkit-transform: rotate(0deg);        transform: rotate(0deg);    }    to {        -webkit-transform: rotate(-1turn);        transform: rotate(-1turn);    }}@keyframes rotate {    0% {        -webkit-transform: rotate(0deg);        transform: rotate(0deg);    }    to {        -webkit-transform: rotate(-1turn);        transform: rotate(-1turn);    }}/* div{    backdrop-filter: saturate(150%) blur(20px);} *//* 首页文章三栏 */#recent-posts {    align-content: flex-start;    display: flex;    flex-wrap: wrap;    justify-content: space-between}#recent-posts>.recent-post-item {    /* margin-top: 1em; */    display: inline-block;    height: auto;}#recent-posts>.recent-post-item .post_cover {    width: 100%;}#recent-posts>.recent-post-item .post_cover img.post_bg {    width: 100%;    height: 100%}#recent-posts>.recent-post-item>.recent-post-info>.content {    display: none}@media screen and (max-width:768px) {    #recent-posts>.recent-post-item {        width: 100%    }}/*# sourceMappingURL=/sm/e91ff0653b41f1a04bad468b2ce1ff01d74e03c84bcb9d3f61b29394112373c4.map *//* twikoo评论美化 *//* 自定义twikoo评论输入框高度 */#twikoo .el-textarea textarea {    min-height: 120px !important;    background-size: 90px;}/* 自定义表情优化 */#twikoo .OwO-body {    max-width: 100% !important;    border-radius: 16px;}/* 选择某个框 #twikoo .OwO .OwO-body .OwO-items:nth-child(1) */#twikoo .OwO .OwO-body .OwO-items {    max-height: 250px !important;}.OwO .OwO-body .OwO-items-image .OwO-item {    /* max-width: 5% !important; */    margin: 0 !important;    padding: 5px !important;    box-sizing: content-box;}.OwO .OwO-body .OwO-items-image .OwO-item[title|="Genshin"],.OwO .OwO-body .OwO-items-image .OwO-item[title|="tom_jerry"],.OwO .OwO-body .OwO-items-image .OwO-item[title|="Snow-Miku"] {    max-width: 9% !important;    box-sizing: content-box;}#twikoo .OwO-items li img {    width: 100% !important;}.tk-comment .vemoji[alt|="Genshin"],.tk-comment .tk-owo-emotion[alt*="Genshin"],.tk-comment .vemoji[alt|="Snow"],.tk-comment .tk-owo-emotion[alt*="Snow"],.tk-comment .vemoji[alt|="tom_jerry"],.tk-comment .tk-owo-emotion[alt*="tom_jerry"] {    max-width: 100px !important;    max-height: 100px !important;    width: 100px;    margin: 4px;    border-radius: 8px !important;    display: inline-block !important;}/* 手机端适配 */@media screen and (max-width: 768px) {    /* .OwO .OwO-body .OwO-items-image .OwO-item {        max-width: 20% !important;        margin: 0 !important;        padding: 5px !important;        box-sizing: content-box;    } */    .tk-comment .vemoji[alt|="Genshin"],    .tk-comment .tk-owo-emotion[alt*="Genshin"],    .tk-comment .vemoji[alt|="Snow"],    .tk-comment .tk-owo-emotion[alt*="Snow"],    .tk-comment .vemoji[alt|="tom_jerry"],    .tk-comment .tk-owo-emotion[alt*="tom_jerry"] {        max-width: calc(100% - 5px) !important;        max-height: calc(100% - 5px) !important;        border-radius: 4px !important;    }    .OwO .OwO-body .OwO-items-image .OwO-item[title|="Genshin"],    .OwO .OwO-body .OwO-items-image .OwO-item[title|="tom_jerry"],    .OwO .OwO-body .OwO-items-image .OwO-item[title|="Snow-Miku"] {        max-width: calc(28% - 10px) !important;        box-sizing: content-box;    }}/* 右下角闭眼 */.el-textarea__inner {    background-image: url(https://tuchuang.voooe.cn/images/2023/01/02/open.webp) !important;}.el-textarea__inner:focus {    background-image: url(https://tuchuang.voooe.cn/images/2023/01/02/close.webp) !important;}/* 放大表情 *//* #owo-big {    position: fixed;    align-items: center;    background-color: rgb(255, 255, 255);    border: 1px #aaa solid;    border-radius: 10px;    z-index: 9999;    display: none;    transform: translate(0, -105%);    overflow: hidden;    animation: owoIn 0.3s cubic-bezier(0.42, 0, 0.3, 1.11);}[data-theme=dark] #owo-big {    background-color: #4a4a4a}#owo-big img {    width: 100%;} *//* 动画效果代码由 Heo：https://blog.zhheo.com/ 提供 *//* @keyframes owoIn {    0% {        transform: translate(0, -95%);        opacity: 0;    }    100% {        transform: translate(0, -105%);        opacity: 1;    }} *//* 评论区美化 */.twikoo .tk-comments .tk-submit {    margin-top: 1em;    background: var(--roydon-small-card-bg);    border-radius: 20px;    padding: 10px;}/* 评论区评论大框 */.twikoo .tk-comments-container>.tk-comment {    padding: 1em;    border-radius: 16px;    background: var(--roydon-small-card-bg);    transition: .3s;}.tk-content img {    border-radius: 8px;}.twikoo .tk-comments-container>.tk-comment {    box-shadow: var(--roydon-box-shadow);}/* .twikoo .tk-comments-container>.tk-comment:hover {    box-shadow: var(--card-hover-box-shadow);} *//* 设备信息 */.twikoo .tk-extra {    border-radius: 8px;    padding: 0.5em;    box-shadow: var(--card-hover-box-shadow);    transition: .3s;}/* 加载更多按钮 */.twikoo .tk-expand {    font-size: 12px;    font-weight: bold;    border-radius: 8px;}.twikoo .tk-extra:hover {    box-shadow: var(--card-hover-box-shadow);}/* 弹框 */.snackbar-container {    color: var(--font-color) !important;    font-weight: bold !important;    backdrop-filter: blur(20px) !important;}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/css/flink.css"/>
      <url>/css/flink.css</url>
      
        <content type="html"><![CDATA[#content-inner {  filter: none !important;  transform: none !important;  perspective: none !important;}.flink-card-content {  display: flex;  flex-wrap: wrap;  justify-content: space-between;  width: 100%;}.flink-card-content-item {  width: 100%;  border-radius: 16px;  background: var(--roydon-card-mask);  position: relative;  padding: 1rem 2rem;  overflow: hidden;}.flink-card-content-item .banners-title-big {  font-size: 36px;  font-weight: 700;  line-height: 1;}.flink-card-content-item.everyone {  display: flex;  justify-content: center;  align-items: flex-start;  flex-direction: column;  width: 100%;  position: relative;}.flink-card-content-item .banners-title {  left: 2rem;  top: 1rem;  position: absolute;  flex-direction: column;  display: flex;}.flink-card-content-item .banner-button-group {  position: absolute;  right: 2rem;  top: 1rem;  display: flex;}.flink-card-content-item .banner-button-group button {  background: var(--roydon-button-bg);  padding: 16px 12px;  border-radius: 16px;  box-shadow: var(--roydon-box-shadow);  color: var(--font-color);  font-size: 16px;  display: flex;  align-items: center;  z-index: 1;  transition: all 0.3s ease 0s;  cursor: pointer;}.flink-card-content-item .banner-button-group button:hover {  background: var(--roydon-button-hover-bg);}.flink-card-content-item .banner-button-group button i {  margin-right: 0.2rem;}.flink-card-content-item.everyone .everyone-style-everyone {  display: flex;  width: 100%;  padding-bottom: 1rem;  transform: rotate(0deg);}.flink-card-content-item.everyone .tags-everyone-wrapper {  margin-top: 7em;  display: flex;  flex-wrap: nowrap;  animation: 50s linear 0s infinite normal none running linkScroll;  -webkit-animation: 50s linear 0s infinite normal none running linkScroll;}@keyframes linkScroll {  0% {    transform: translateX(0px);    -webkit-transform: translateX(0px);  }  100% {    transform: translateX(-50%);    -webkit-transform: translateX(-50%);  }}.tags-everyone-iconfont-pair {  margin-left: 1rem;}.tags-everyone-iconfont-pair .tags-everyone-iconfont {  display: flex;  align-items: center;  justify-content: center;  width: 96px;  height: 96px;}.tags-everyone-iconfont-pair .tags-everyone-iconfont img {  width: 100%;  height: 100%;  box-shadow: var(--roydon-box-shadow);  border-radius: 64px;}.tags-everyone-iconfont img {  width: 80%;  margin: 0 auto !important;}.tags-everyone-iconfont-pair .tags-everyone-iconfont:nth-child(even) {  margin-top: 1rem;  transform: translate(-60px);}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/css/kslink.css"/>
      <url>/css/kslink.css</url>
      
        <content type="html"><![CDATA[/* 添加友链按钮 *//* 快速填写格式 */.addBtn {  display: flex;  justify-content: center;  flex-wrap: wrap;}.addBtn button {  transition: .2s;  display: flex;  margin: 5px auto;  color: var(--font-color);  padding: 15px;  border-radius: 40px;  background: var(--roydon-small-card-bg);  align-items: center;}button {  padding: 0;  outline: 0;  border: none;  background: 0 0;  cursor: pointer;  touch-action: manipulation;}.fa-solid,.fas {  font-family: "Font Awesome 6 Free";  font-weight: 900;}.addBtn i {  font-size: 1.3rem;  margin-right: 10px;}.addBtn button:hover {  background: #f69;}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/css/loaded_style.css"/>
      <url>/css/loaded_style.css</url>
      
        <content type="html"><![CDATA[.pace {  -webkit-pointer-events: none;  pointer-events: none;  -webkit-user-select: none;  -moz-user-select: none;  user-select: none;  z-index: 2000;  position: fixed;  margin: auto;  top: 6px;  left: 0;  right: 0;  height: 10px;  border-radius: 5px;  width: 6rem;  background: #c0cef8;  border: 1px #f7eb09;  overflow: hidden}.pace-inactive .pace-progress {  opacity: 0;  transition: .3s ease-in}.pace .pace-progress {  -webkit-box-sizing: border-box;  -moz-box-sizing: border-box;  -ms-box-sizing: border-box;  -o-box-sizing: border-box;  box-sizing: border-box;  -webkit-transform: translate3d(0, 0, 0);  -moz-transform: translate3d(0, 0, 0);  -ms-transform: translate3d(0, 0, 0);  -o-transform: translate3d(0, 0, 0);  transform: translate3d(0, 0, 0);  max-width: 200px;  position: absolute;  z-index: 2000;  display: block;  top: 0;  right: 100%;  height: 100%;  width: 100%;  background: linear-gradient(-45deg, #edbed5, #f583ae, #e6169d, #e50076);  animation: gradient 1.5s ease infinite;  background-size: 200%}.pace.pace-inactive {  opacity: 0;  transition: .3s;  top: -8px}@keyframes gradient {  0% {    background-position: 0% 50%;  }  50% {    background-position: 100% 50%;  }  100% {    background-position: 0% 50%;  }}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/css/nav.css"/>
      <url>/css/nav.css</url>
      
        <content type="html"><![CDATA[/* CDN 服务仅供平台体验和调试使用，平台不承诺服务的稳定性，企业客户需下载字体包自行发布使用并做好备份。 */@font-face {    font-family: "ali-song";    src: url("//at.alicdn.com/wf/webfont/jmF1bH9rSbIN/gRyhHl3ThWATQBmuOX84e.woff2") format("woff2"),        url("//at.alicdn.com/wf/webfont/jmF1bH9rSbIN/WQDY8KjcBMPEloQD1bmEW.woff") format("woff");    font-display: swap;}/* nav 设置透明 */#page-header.nav-fixed #nav {    /* background: rgba(60, 49, 57, 0.6) */    box-shadow: none !important;}div#menus>.menus_items {    position: absolute;    left: 50%;    top: 50%;    transform: translate(-50%, -50%);}div#menus {    font-family: "ali-song";    font-size: 1.2em;    line-height: 1.5;}#nav .site-page-to {    position: relative;    padding: 8px 10px;    font-size: 0.7em;    cursor: pointer;}#search-button a {    margin: 0 3px;    border: 1px solid rgba(49, 46, 46, 0.3);    border-radius: 8px;    box-sizing: border-box;    line-height: 1;    background: rgba(0, 0, 0, 0.1);}#search-button a:hover {    border: 1px solid #000;    background-color: rgba(13, 12, 12, 0.1);    box-shadow: var(--roydon-box-shadow);    opacity: 1;}/* #site-name */#nav #site-name {    font-size: 1.2em;}#nav #site-name:hover {    font-weight: 900;}/* 滚动条 */::-webkit-scrollbar {    width: 5px;    height: 10px;}::-webkit-scrollbar-thumb {    background-color: pink;    border-radius: 2em;}::-webkit-scrollbar-corner {    background-color: transparent;}::-moz-selection {    color: rgb(29, 24, 24);    background-color: pink;}/* 页脚透明 */#footer {    background: transparent !important;    height: 66px;}#site-name:hover::before {    opacity: 1;    scale: 1.03;}#site-name {    position: relative;    font-size: 24px;    /*一定要把字体调大点，否则效果惨不忍睹！*/}@media screen and (max-width: 768px) {    .mask-name-container {        width: 600px;    }}@media screen and (max-width: 500px) {    .mask-name-container {        display: none;    }}@media screen and (min-width: 1300px) {    #nav a:hover {        transform: scale(1.03);    }}.back-home-button:hover {    background: pink;    color: #ff3456 !important;}.back-home-button {    display: flex;    width: 40px;    height: 80%;    padding: 0 !important;    align-items: center;    justify-content: center;    font-weight: 700;    font-size: 1.2em;    line-height: 1;    transition: 0.3s;    border-radius: 10px;}.back-home-button:hover .back-menu-list-groups {    display: flex;    opacity: 1;    transition: 0.3s;    top: 55px;    pointer-events: auto;    left: 0;}/* 导航栏模糊透视 */#nav {    padding: 0 calc((100% - 1450px) / 2);    /* background: block; */    backdrop-filter: saturate(150%) blur(20px);    transition: none !important;    -webkit-transition: none !important;    -moz-transition: none !important;    -ms-transition: none !important;    -o-transition: none !important;}[data-theme='dark'] #page-header.nav-fixed>#nav,[data-theme='dark'] #page-header.not-top-img>#nav {    background: none !important;}.back-home-button .back-menu-list-groups {    position: absolute;    top: 60px;    left: 0;    background: rgba(0, 0, 0, 0.5);    border-radius: 12px;    /* border: 1px dotted pink; */    flex-direction: column;    font-size: 12px;    font-weight: 800;    color: white;    /* box-shadow: var(--anzhiyu-shadow-border); */    transition: 0s;    opacity: 0;    pointer-events: none;}.back-home-button .back-menu-list-group {    display: flex;    flex-direction: column;}.back-home-button .back-menu-list-group .back-menu-list-title {    margin: 8px 0 0 16px;    color: rgb(246, 104, 127);    transition: 0.3s;}.back-home-button-icon {    font-size: 1.3em;}.back-home-button .back-menu-list {    display: flex;    flex-direction: column;}.back-home-button .back-menu-list::before {    position: absolute;    top: -22px;    left: 0px;    width: 100%;    height: 25px;    content: '';}.back-home-button .back-menu-list-group:hover .back-menu-list-title {    color: pink;}.back-home-button .back-menu-list-groups:hover {    border: black;}.back-home-button .back-menu-list .back-menu-item {    display: flex;    align-items: center;    margin: 2px 8px;    padding: 4px 8px !important;    border-radius: 6px;    transition: 0.3s;}.back-home-button .back-menu-list .back-menu-item:hover {    background: rgb(0, 0, 0);}.back-home-button .back-menu-list .back-menu-item .back-menu-item-text {    font-size: 14px;    margin-left: 0.5rem;    color: whitesmoke;    white-space: nowrap;}.back-home-button .back-menu-list .back-menu-item .back-menu-item-icon {    width: 24px;    height: 24px;    border-radius: 24px;    /* background: plum; */}#page-header #nav .back-home-button {    color: pink;    cursor: pointer;    position: relative;}.back-home-button .back-menu-list .back-menu-item:hover .back-menu-item-text {    color: #ff3456;}.back-menu-item-icon.loading img {    width: 25px;}#site-name,.shuoshuo {    white-space: nowrap;    overflow: hidden;}#site-name {    padding: 0 2px;    margin-left: 4px;    position: relative;}#site-name *:not(i):hover {    display: none !important;}#blog_name #site-name:hover::after {    opacity: 1;    transform: scale(1.01);}#site-name::before {    opacity: 0;    background-color: pink !important;    border-radius: 12px;    transition: .3s;    position: absolute;    top: 0 !important;    right: 0 !important;    width: 100%;    height: 100%;    content: "\f015";    font-family: "Font Awesome 6 Free";    text-align: center;    color: #ff3456;    font-size: 20px;}#blog_name #site-name::after {    opacity: 0;    background-color: pink !important;    border-radius: 12px;    transition: 0.3s;    position: absolute;    top: 0;    right: 0;    width: 100%;    height: 100%;    content: '\f015';    font-family: 'Font Awesome 6 Free';    text-align: center;    color: #dbbdfd !important;}#site-name i {    position: absolute;    top: 50%;    left: 50% !important;    transform: translate(-50%, -50%);    left: 0;    opacity: 0;}#site-name:hover i {    opacity: 1;}#nav #blog_name {    flex-wrap: nowrap;    height: 60px;    display: flex;    align-items: center;    /* z-index: 102; */    transition: 0.3s;}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/css/opacity.css"/>
      <url>/css/opacity.css</url>
      
        <content type="html"><![CDATA[/* 网页div的圆角 */.cardHover,.error404 #error-wrap .error-content,.layout>div:first-child:not(.recent-posts),#recent-posts>.recent-post-item,#aside-content .card-widget,.layout>.recent-posts .pagination> :not(.space) {    /* border-radius: 16px !important; */    /* backdrop-filter: saturate(120%) blur(20px); */}#content-inner>#archive,#content-inner>#page {    /* background: transparent; */    background: var(--roydon-small-card-bg);    /* backdrop-filter: blur(20px); */}#page-header #post-info {    position: absolute;    bottom: 30px;    padding: 0 8%;    width: 100%;    text-align: center;    margin-bottom: 90px;}.framework-info {    display: none;}#footer-wrap {    padding: 0px 20px}#ghbdages {    margin: 0 auto;}#aside-content .card-info #card-info-btn:hover {    margin: 0 18%;    transition: .3s;}#universe {    display: block;    position: fixed;    margin: 0;    padding: 0;    border: 0;    outline: 0;    left: 0;    top: 0;    width: 100%;    height: 100%;    pointer-events: none;    z-index: 1;}/* 侧边栏卡片渐变 */#aside-content>.card-widget.card-info {    background: linear-gradient(-45deg, #b7d3ee, #5d6fc9, #ebfffe, #485dab);    background-size: 400%;    animation: gradient 5s ease infinite;    position: relative;    color: white;}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/css/postPage.css"/>
      <url>/css/postPage.css</url>
      
        <content type="html"><![CDATA[#post .post-content h1 {    color: rgb(255, 0, 128);}#post .post-content h1::after {    content: 'H1🔽';    color: #5bfef0;    position: absolute;    right: 0%;}#post .post-content h2 {    color: rgb(255, 68, 161);}#post .post-content h2::after {    content: 'H2🔽';    color: #5bfef0;    position: absolute;    right: 0%;}#post .post-content h3 {    color: rgb(255, 120, 188);}#post .post-content h3::after {    content: 'H3🔽';    color: #5bfef0;    position: absolute;    right: 0%;}#post .post-content h4 {    color: rgb(255, 177, 216);}#post .post-content h4::after {    content: 'H4🔽';    color: #5bfef0;    position: absolute;    right: 0%;}/* 博客页面所有图片圆角 */.post-content img {    border-radius: 6px;}/* 标签外挂之tabs */#post .post-content .tabs {    /* border: 2px solid pink; */    border-radius: 0 0 12px 12px;}[data-theme="light"] #post .post-content .tabs {    /* border: 2px solid black; */}#article-container .tabs>.tab-contents .tab-item-content {    padding: 3px 3px;}#article-container .tab-contents i {    font-size: 20px;    color: blue;}/* bilibili视频块区域 */#article-container iframe {    width: 100%;    border-radius: 8px;    min-height: 500px;}/* 代码块UI重设置 */#article-container .code-expand-btn i {    color: pink;}div#post {    /* border: 2px solid black; */}div#post:hover {    /* border: 2px solid pink; */    box-sizing: border-box;}/* 评论框  */.vwrap {    box-shadow: 2px 2px 5px #bbb;    background: rgba(255, 255, 255, 0.5);    border-radius: 8px;    padding: 30px;    margin: 30px 0px 30px 0px;}/* 设置文字内容 :nth-child(1)的作用是选择第几个 */.el-input.el-input--small.el-input-group.el-input-group--prepend:nth-child(1):before {    content: '输入昵称(自定义)🐧';}.el-input.el-input--small.el-input-group.el-input-group--prepend:nth-child(2):before {    content: '输入邮箱自动获取头像📧';}.el-input.el-input--small.el-input-group.el-input-group--prepend:nth-child(3):before {    content: '可以通过昵称访问您的网站🔗';}/* 当用户点击输入框时显示 */.el-input.el-input--small.el-input-group.el-input-group--prepend:focus-within::before,.el-input.el-input--small.el-input-group.el-input-group--prepend:focus-within::after {    display: block;}.v[data-class="v"] .vcards {    padding: 0 20px;}/* 查看更多背景色去除 */.v[data-class="v"] .vcards .vcard .vcontent.expand::before {    background: none !important;}.v[data-class="v"] .vcards .vcard .vcontent.expand::before {    background: none !important;}.v[data-class=v] .vcards .vcard .vcontent.expand {    max-height: 18em;}.v[data-class=v] .vcards .vcard .vcontent.expand::after {    border-radius: 8px;    color: #00fff6;}/* 主内容区 */.el-input.el-input--small.el-input-group.el-input-group--prepend::before {    display: none;    /* 绝对定位 */    position: absolute;    top: -60px;    /* 文字强制不换行，防止left:50%导致的文字换行 */    white-space: nowrap;    border-radius: 10px;    left: 50%;    /* 然后再向左边挪动自身的一半，即可实现居中 */    transform: translate(-50%);    padding: 14px 18px;    background: #444;    color: #fff;}/* 小角标 */.el-input.el-input--small.el-input-group.el-input-group--prepend::after {    display: none;    content: '';    position: absolute;    /* 内容大小（宽高）为0且边框大小不为0的情况下，每一条边（4个边）都是一个三角形，组成一个正方形。    我们先将所有边框透明，再给其中的一条边添加颜色就可以实现小三角图标 */    border: 12px solid transparent;    border-top-color: #444;    left: 50%;    transform: translate(-50%, -48px);}/* md网站下划线 */#article-container a:hover {    color: #ff3456;    text-decoration: none !important;}#article-container #hpp_talk p img {    display: inline;}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/css/roydon.css"/>
      <url>/css/roydon.css</url>
      
        <content type="html"><![CDATA[#about-page .author-box {  position: relative;}#about-page .author-box .author-img {  margin: auto;  border-radius: 50%;  overflow: hidden;  position: relative;  width: 150px;  height: 150px;  border: 5px solid gold}#about-page .author-box .author-img img {  border-radius: 50%;  overflow: hidden;  width: 145px;  height: 145px;}#about-page .author-box .image-dot {  width: 32px;  height: 32px;  background: var(--roydon-state-dot-bg);  position: absolute;  border-radius: 50%;  border: 5px solid white;  top: 50%;  left: 50%;  transform: translate(35px, 45px);}.author-content {  display: flex;  flex-wrap: wrap;  justify-content: space-between;  width: 100%;  margin-top: 1rem;}#about-page .myInfoAndSayHello {  display: flex;  flex-direction: column;  justify-content: center;  background: linear-gradient(100deg, #4da6ff 40%, #b2f2ff 60%);  background-size: 200%;  animation: gradient 15s ease infinite;  width: 59%;}.author-content-item {  width: 49%;  border-radius: 24px;  box-shadow: var(--roydon-box-shadow);  position: relative;  padding: 1rem 2rem;  overflow: hidden;}#about-page .myInfoAndSayHello .title1 {  opacity: 0.8;  line-height: 1.3;}#about-page .myInfoAndSayHello .title2 {  font-size: 36px;  font-weight: 700;  line-height: 1.1;  margin: 0.5rem 0;}.inline-word {  word-break: keep-all;  white-space: nowrap;}#about-page .myInfoAndSayHello .title1 {  opacity: 0.8;  line-height: 1.3;}.author-content-item.aboutsiteTips {  display: flex;  justify-content: center;  align-items: flex-start;  background-color: pink;  flex-direction: column;  width: 39%;}.aboutsiteTips h2 {  margin-right: auto;  font-size: 36px;  font-family: Helvetica;  line-height: 1.06;  letter-spacing: -0.02em;  margin-top: 0;}.aboutsiteTips .mask {  height: 36px;  position: relative;  overflow: hidden;  margin-top: 4px;}.aboutsiteTips .mask span {  display: block;  box-sizing: border-box;  position: absolute;  top: 36px;  background-size: 100% 100%;  background-clip: text;  -webkit-text-fill-color: transparent;  background-repeat: no-repeat;}.aboutsiteTips .mask span[data-show] {  transform: translateY(-100%);  transition: 0.5s transform ease-in-out;}.aboutsiteTips .mask span[data-up] {  transform: translateY(-200%);  transition: 0.5s transform ease-in-out;}.aboutsiteTips .mask span:nth-child(1) {  background-image: linear-gradient(45deg, #0ecffe 50%, #07a6f1);}.aboutsiteTips .mask span:nth-child(2) {  background-image: linear-gradient(45deg, #18e198 50%, #0ec15d);}.aboutsiteTips .mask span:nth-child(3) {  background-image: linear-gradient(45deg, #9b8efc 50%, #3e0d89);}.aboutsiteTips .mask span:nth-child(4) {  background-image: linear-gradient(45deg, #f49794 50%, #fc3d66);}@media screen and (max-width: 768px) {  .author-content-item.map {    margin-bottom: 0;  }}#about-page .about-statistic {  min-height: 380px;  width: 39%;  color: white;  background: url(https://bu.dusays.com/2022/11/18/63765da00f149.png) no-repeat top;  background-size: cover;  overflow: hidden;}#about-page .about-statistic::after {  box-shadow: 0 -19px 63px 21px #1fa5af79 inset;  position: absolute;  content: "";  width: 100%;  height: 100%;  top: 0;  left: 0;}.author-content-item .card-content {  position: absolute;  width: 100%;  height: 100%;  top: 0;  left: 0;  z-index: 2;  display: flex;  flex-direction: column;  padding: 1rem 2rem;}.author-content-item .card-content .author-content-item-title {  margin-bottom: 0.5rem;}.author-content-item .author-content-item-title {  font-size: 36px;  font-weight: 700;  line-height: 1;}#statistic {  font-size: 16px;  border-radius: 15px;  width: 100%;  display: flex;  justify-content: space-between;  flex-direction: row;  flex-wrap: wrap;  margin-top: 1rem;  margin-bottom: 2rem;}#statistic div span:first-child {  opacity: 0.8;  font-size: 0.6rem;}#statistic div span:last-child {  font-weight: 700;  font-size: 34px;  line-height: 1;  white-space: nowrap;}#statistic div {  display: flex;  justify-content: space-between;  flex-direction: column;  width: 50%;  margin-bottom: 0.5rem;}.post-tips {  position: absolute;  bottom: 1rem;  left: 2rem;}.post-tips a {  color: blueviolet;  border: none !important;}.author-content-item .card-content .banner-button-group {  position: absolute;  bottom: 1rem;  right: 1rem;}.author-content-item .card-content .banner-button-group .banner-button {  height: 2.5rem;  width: 5rem;  border-radius: 1.2rem;  background: var(--roydon-button-bg);  display: flex;  align-items: center;  justify-content: center;  cursor: pointer;}.author-content-item .card-content .banner-button-group .banner-button i {  font-size: 1rem;}#about-page .author-content-item .card-content .banner-button-group .banner-button i {  font-size: 1.5rem;}.author-content-item .card-content .banner-button-group .banner-button:hover {  color: white;  background-color: pink;  backdrop-filter: blur(50px);}.author-content-item.personalities {  position: relative;  background-color: rgba(255, 68, 0, 0.9);  width: 59%;}.author-content-item.personalities .image {  position: absolute;  right: 30px;  bottom: 1rem;  width: 250px;  transition: transform 1s cubic-bezier(0.13, 0.45, 0.21, 1.02);}.author-content-item.personalities .image img {  display: block;  max-width: 100%;  transition: filter 375ms ease-in 0.2s;}.author-content-item.personalities:hover .image {  transform: rotate(-10deg);}.author-content-item.myphoto {  height: 60%;  min-height: 240px;  position: relative;  overflow: hidden;  width: 39%;  display: flex;  align-items: center;  justify-content: center;}.author-content-item.myphoto img {  position: absolute;  min-width: 100%;  object-fit: cover;  transition: 0.6s;  animation: coverIn 1s ease-out forwards;  transition: transform 1s ease-out !important;}.author-content-item.myphoto:hover img {  transform: scale(1.1);}.author-content-item:hover .card-background-icon {  transform: rotate(20deg);}.author-content-item.personalities .title2 {  font-size: 36px;  font-weight: 700;  line-height: 1.1;}.author-content-item.map {  background: url(https://bu.dusays.com/2022/11/17/6375f5576cbc3.jpg) no-repeat center;  min-height: 160px;  max-height: 400px;  position: relative;  overflow: hidden;  margin-bottom: 1rem;  height: 60%;  background-size: 100%;  transition: 1s ease-in-out;}.author-content-item.single {  width: 100%;}.author-content-item.map .map-title {  position: absolute;  bottom: 0;  left: 0;  width: 100%;  padding: 0.5rem 2rem;  backdrop-filter: blur(20px);  transition: 2s ease-in-out;  font-size: 20px;}.author-content-item.map .map-title b {  color: blueviolet;  font-weight: 900;}.author-content-item.selfInfo {  display: flex;  min-height: 100px;  max-height: 400px;  justify-content: space-between;  align-items: center;  flex-wrap: wrap;  height: 40%;  background: gold;}.author-content-item.selfInfo div {  display: flex;  flex-direction: column;  margin: 0.5rem 2rem 0.5rem 0;}.author-content-item.selfInfo .selfInfo-title {  opacity: 0.8;  font-size: 0.8rem;  line-height: 1;  margin-bottom: 10px;}.author-content-item.selfInfo .selfInfo-content {  font-weight: 900;  font-size: 2.3em;  line-height: 1;}.author-content-item-group.column.mapAndInfo {  width: 59%;}.author-content-item.map:hover {  background-size: 150%;  transition: 3s ease-in-out;  background-position-x: 46%;  background-position-y: 36%;}.author-content-item.map:hover .map-title {  bottom: -100%;}.author-content-item-group.column {  display: flex;  flex-direction: column;  width: 49%;  justify-content: space-between;}.author-content-item.single.reward .reward-list-updateDate {  text-align: center;  font-size: 14px;}.author-content-item.single.reward .post-reward {  position: absolute;  margin-top: 0px;  width: auto;  text-align: none;  pointer-events: none;  right: 2rem;  top: 2rem;}.author-content-item.single.reward .post-reward:hover .reward-main {  display: block;  width: 320px !important;}.tip-button {  border-radius: 2.25rem;  cursor: pointer;  font-size: 20px;  font-weight: 600;  height: 2.6rem;  margin-bottom: -4rem;  outline: 0;  position: relative;  top: 0;  transform-origin: 0 100%;  transition: transform 500ms ease-in-out;  width: auto;}.tip-button__text {  opacity: 1;  position: relative;  transition: opacity 0.1s linear 0.5s;  z-index: 3;}.author-content .post-reward .reward-main {  bottom: 0;  top: 36px;  left: auto;  right: 0;}.author-content .post-reward .reward-main .reward-all:before {  top: -11px;  bottom: auto;}#about-page .post-reward .reward-main .reward-all {  border-radius: 10px;  padding: 10px 10px !important;}.post-reward .reward-main .reward-all .reward-item {  padding: 0 8px !important;}.post-reward .reward-main .reward-all li.reward-item::before {  content: none !important;}.post-reward .reward-main .reward-all:after {  content: none !important;}.author-content-item.maxim {  font-size: 36px;  font-weight: 900;  line-height: 1.1;  background: linear-gradient(140deg, #06e6ff 0, #f91a73 100%);  background-size: 200%;  animation: gradient 15s ease infinite;  display: flex;  align-items: flex-start;  flex-direction: column;  justify-content: center;  width: 39%;}.author-content-item .author-content-item-tips {  opacity: 0.8;  font-size: 1rem;  margin-bottom: 0.5rem;}.author-content-item.maxim .maxim-title {  display: flex;  flex-direction: column;}.author-content-item.buff {  height: 200px;  font-size: 36px;  font-weight: 900;  line-height: 1.2;  display: flex;  align-items: flex-start;  flex-direction: column;  justify-content: center;  background: linear-gradient(120deg, #ff27e8 0, #ff8000 100%);  background-size: 200%;  animation: gradient 15s ease infinite;  min-height: 200px;  height: fit-content;  width: 59%;}.author-content-item.buff .card-content {  display: flex;  flex-direction: column;  justify-content: center;}.author-content-item.buff .buff-title {  display: flex;  flex-direction: column;}.card-background-icon {  font-size: 18rem;  opacity: 0.6;  position: absolute;  right: 2%;  bottom: -10%;  transform: rotate(100deg);  transition: 1s ease-in-out;}.author-content-item.game-yuanshen {  background: url(https://bu.dusays.com/2022/11/17/6375f5589dde2.jpg) no-repeat top;  background-size: cover;  min-height: 460px;  color: white;  overflow: hidden;  width: 66%;}.author-content-item .content-bottom {  margin-top: auto;  display: flex;  align-items: center;  justify-content: space-between;}.author-content-item .content-bottom .icon-group {  display: flex;  position: relative;}.icon-pos-mid {  background: url(https://bu.dusays.com/2022/11/17/6375f5574f516.png);}.author-content-item.game-yuanshen::after {  box-shadow: 0 -39px 60px 20px #a089079a inset;  position: absolute;  content: "";  width: 100%;  height: 100%;  top: 0;  left: 0;}.author-content-item.historical-drama {  width: 32%;  background: url(https://bu.dusays.com/2023/01/19/63c93032c2f8e.jpg) no-repeat top;  background-size: cover;  min-height: 460px;  overflow: hidden;  color: violet;}.author-content-item.historical-drama::after {  box-shadow: 0 -48px 203px 11px #57257aaf inset;  position: absolute;  content: "";  width: 100%;  height: 100%;  top: 0;  left: 0;}.author-content-item.like-technology {  background: url(https://bu.dusays.com/2022/11/17/637617ff5177f.jpg) no-repeat;  background-size: cover;  color: rgb(14, 159, 16);  min-height: 500px;}.author-content-item.like-music {  background: url(https://bu.dusays.com/2022/11/17/6375f558667f1.jpg) no-repeat top;  background-size: cover;  color: wheat;  min-height: 500px;  overflow: hidden;}.author-content-item.like-music::after {  box-shadow: 0 -10px 100px 10px #18a5e26a inset;  position: absolute;  content: "";  width: 100%;  height: 100%;  top: 0;  left: 0;}@media screen and (max-width: 768px) {  .author-content-item.game-yuanshen .content-bottom {    padding-bottom: 10px;  }  .author-content-item.game-yuanshen .game-yuanshen-uid {    display: none;  }  .author-content {    margin-top: 0;  }  .author-content-item {    width: 100% !important;    margin-top: 1rem;    padding: 1rem;  }  .author-content-item.map {    margin-bottom: 0;  }  .author-content-item-group.column {    width: 100% !important;  }  .author-content-item.selfInfo {    height: 95%;  }  .author-content-item.personalities {    height: 170px;  }  .post-tips {    left: auto;  }  .author-content-item.personalities .image {    width: 90px;  }  .site-card-group>a {    width: 100% !important;  }  .post-reward {    display: none;  }  .reward-list-item {    width: 100% !important;  }  .layout>div:first-child:not(.recent-posts) {    padding: 1rem !important;  }  .author-content-item .card-content .banner-button-group .banner-button-text {    display: none;  }  .author-content-item .card-content .banner-button-group {    right: 1rem;    bottom: 1rem;  }  .author-content-item .card-content .banner-button-group .banner-button {    width: 3rem;    height: 3rem !important;  }  #selfInfo-content-year {    width: 90px;  }}@media screen and (min-width: 768px) and (max-width: 896px) {  .author-content-item.like-music .content-bottom .tips {    display: none;  }}.reward-list-all {  display: flex;  flex-wrap: wrap;  flex-direction: row;  margin: 1rem -0.25rem 0.5rem;}.reward-list-item {  padding: 1rem;  border-radius: 12px;  border: 1px solid rgba(255, 192, 203, 0.6);  width: calc((100% / 3) - 0.5rem);  margin: 0 0.25rem 0.5rem;  box-shadow: 2px 2px 2px rgba(255, 192, 203, 0.6);  background: linear-gradient(140deg, #f8c303 0, #effb05 100%);  background-size: 200%;  animation: gradient 10s ease infinite;}.reward-list-item .reward-list-item-name {  font-size: 1.2rem;  font-weight: 900;  color: black;  line-height: 1;  margin-bottom: 1rem;}.reward-list-item .reward-list-bottom-group {  display: flex;  align-items: center;  justify-content: space-between;}.reward-list-item .reward-list-item-money {  padding: 4px;  font-size: 12px;  color: black;  font-weight: 700;  line-height: 1;  border-radius: 4px;  margin-right: 4px;  white-space: nowrap;}.reward-list-item .reward-list-item-time {  font-size: 12px;  color: black;  white-space: nowrap;}.author-content-item.careers {  min-height: 400px;}.author-content-item.careers .careers-group {  margin-top: 12px;}.author-content-item.careers .careers-item {  display: flex;  align-items: center;}.author-content-item.careers .careers-item .circle {  width: 16px;  height: 16px;  margin-right: 8px;  border-radius: 16px;}.author-content-item.careers .careers-item {  display: flex;  align-items: center;}.author-content-item.careers .careers-item .circle {  width: 16px;  height: 16px;  margin-right: 8px;  border-radius: 16px;}.author-content-item.careers img {  position: absolute;  left: 0;  bottom: 20px;  width: 100%;  transition: 0.6s;}.loading-bar {  position: absolute;  top: 50%;  left: 50%;  width: 500px;  height: 62.5px;  transform: translate(-25%, -50%) scale(0.5);  transition: all 0.5s;  user-select: none;  overflow: hidden;}.loading-bar img {  position: absolute;  top: 500px;  left: 0;  filter: drop-shadow(0 -500px 0 pink);}.loading-bar::after {  content: "";  position: absolute;  top: 500px;  left: 0;  filter: drop-shadow(0 -500px 0 #ff3456);  width: 500px;  height: 62.5px;  background: url("https://bu.dusays.com/2022/11/17/6375f5574f516.png") no-repeat left 100%;  background-size: 500px 62.5px;  background-position-x: 0;}.author-content-item.game-yuanshen:hover .loading-bar::after {  animation: loading-bar 3.5s cubic-bezier(0.28, 0.11, 0.32, 1) infinite forwards;}@media screen and (max-width: 719px) {  .loading-bar .loading-bar {    display: none;  }}@media screen and (max-width: 719px) and (orientation: landscape) {  .loading-bar .loading-bar {    display: block !important;    transform: translate(-50%, -50%) scale(0.7) !important;  }}@supports not (filter: drop-shadow(0 0 0 #fff)) {  .loading-bar:before {    content: "Your browser does not support the animation";  }}@keyframes loading-bar {  0% {    width: 0;    background-size: 500px 62.5px;  }  16.6% {}  33.2% {}  49.8% {}  66.4% {}  83% {    width: 475px;  }  83.1% {    width: 475px;  }  83.2% {    width: 475px;  }  83.3% {    width: 475px;  }  83.4% {    width: 475px;  }  83.5% {    width: 475px;  }  83.6% {    width: 475px;  }  83.7% {    width: 475px;  }  83.8% {    width: 475px;  }  83.9% {    width: 475px;  }  84% {    width: 475px;  }  85% {    width: 475px;  }  86% {    width: 475px;  }  87% {    width: 475px;  }  100% {    width: 500px;  }}.hello-about {  margin: 20px auto;  border-radius: 24px;  box-shadow: var(--roydon-box-shadow);  position: relative;  overflow: hidden;  user-select: none;}.shapes {  position: relative;  height: 200px;  width: 100%;  background: #3dfcffad;  overflow: hidden;}.shape {  will-change: transform;  position: absolute;  border-radius: 50%;}.shape.shape-1 {  background: #115de0;  width: 700px;  height: 700px;  margin: -325px 0 0 -325px;}.shape.shape-2 {  background: #ffb3ade7;  width: 450px;  height: 450px;  margin: -220px 0 0 -220px;}.shape.shape-3 {  background: #facc61;  width: 280px;  height: 280px;  margin: -135px 0 0 -135px;}.hello-about .content {  top: 0;  left: 0;  position: absolute;  display: flex;  justify-content: center;  align-items: center;  height: 200px;  width: 100%;  background: rgba(250, 130, 140, 0.979);  mix-blend-mode: screen;}[data-theme="dark"] .hello-about .content {  background: transparent;}[data-theme="dark"] .hello-about h1 {  color: white;}.hello-about h1 {  margin: 0;  text-align: center;  vertical-align: baseline;  line-height: 1;  font-size: calc((0.0389119683 * 100vw + (10px)));  width: 100%;  height: 100%;  display: flex;  align-items: center;  justify-content: center;}@media (min-width: 419px) {  .hello-about h1 {    font-size: calc((0.0389119683 * 100vw + (5px)));  }}.cursor {  position: absolute;  background: #ff3456;  width: 30px;  height: 30px;  margin: -10px 0 0 -10px;  border-radius: 50%;  will-change: transform;  user-select: none;  pointer-events: none;  z-index: 3;}.author-content-item.skills {  display: flex;  justify-content: center;  align-items: flex-start;  flex-direction: column;  width: 50%;  min-height: 400px;}.author-content-item.skills .skills-style-group {  position: relative;}.author-content-item.skills .tags-group-all {  display: flex;  transform: rotate(0);  transition: 0.3s;}.author-content-item.skills .tags-group-wrapper {  margin-top: 40px;  display: flex;  flex-wrap: nowrap;  animation: rowup 50s linear infinite;}.tags-group-icon-pair {  margin-left: 1rem;}.tags-group-icon {  display: flex;  align-items: center;  justify-content: center;  box-shadow: 1px 1px 1px black;  width: 120px;  height: 120px;  border-radius: 30px;}.tags-group-icon img {  width: 80%;  margin: 0 auto !important;}.tags-group-icon-pair .tags-group-icon:nth-child(even) {  margin-top: 1rem;  transform: translate(-60px);}.author-content-item.skills .skills-list {  display: flex;  opacity: 0;  transition: 0.3s;  position: absolute;  width: 100%;  top: 0;  left: 0;  flex-wrap: wrap;  flex-direction: row;  margin-top: 10px;}.author-content-item.skills .skill-info {  display: flex;  align-items: center;  margin-right: 6px;  margin-top: 4px;  font-weight: 800;  background: rgba(255, 192, 203, 0.8);  border-radius: 40px;  padding: 4px 8px;}.author-content-item.skills .skill-icon {  width: 32px;  height: 32px;  border-radius: 32px;  display: flex;  align-items: center;  justify-content: center;  margin-right: 4px;}.author-content-item.skills .skill-icon img {  width: 23px;  height: 23px;  margin: 0 auto !important;}.author-content-item.skills .etc {  margin-right: 10px;  margin-top: 10px;}@keyframes rowup {  0% {    transform: translateX(0);  }  100% {    transform: translateX(-50%);  }}.author-content-item.skills:hover .skills-style-group .tags-group-all {  opacity: 0;}.author-content-item.skills:hover .skills-style-group .skills-list {  opacity: 1;}#aside-content .card-archives ul.card-archive-list>.card-archive-list-item a:hover,#aside-content .card-categories ul.card-category-list>.card-category-list-item a:hover {  border-radius: 8px;}.article-sort .article-sort-item:not(.year) {  background: var(--roydon-small-card-bg);  margin: 0.5%;}@media screen and (min-width:900px) {  .article-sort .article-sort-item:not(.year) {    float: left;    box-shadow: var(--roydon-box-shadow);    padding: 5px;    width: 49%;    overflow: hidden;    text-overflow: ellipsis;    white-space: nowrap;    box-sizing: border-box;  }}.article-sort .article-sort-item .article-sort-item-info .article-meta-wrap span:not(.article-meta__link) {  display: block;}.article-sort-item-img {  border-radius: 8px;}.article-meta-wrap a:hover {  border-radius: 4px;  background: rgba(255, 192, 203, 0.7);  color: var(--roydon-bili-color) !important;}.article-sort-item-info {  width: 70%;}.article-sort-item-title {  font-weight: bold;  -webkit-line-clamp: 1;}.article-sort-item-title:hover {  color: var(--roydon-bili-color);}#catalog-bar {  padding: 4px 8px;  border-radius: 8px;  display: flex;  border: 3px solid pink;  justify-content: space-between;}#catalog-bar .iconfont {  font-size: 14px;  padding-right: 4px;  border-right: 2px solid pink;}#catalog-bar:hover {  border: 3px solid #f69;}#catalog-bar i {  line-height: inherit;}#catalog-list {  margin: 0 .5rem;  display: flex;  white-space: nowrap;  overflow-x: scroll;}#catalog-list::-webkit-scrollbar {  display: none;}.catalog-list-item a {  margin: 0 2px;  padding: 6px;  font-weight: bold;  border-radius: 4px;  color: var(--font-color);  -webkit-transition: all .3s ease-in-out;  -moz-transition: all .3s ease-in-out;  -o-transition: all .3s ease-in-out;  -ms-transition: all .3s ease-in-out;  transition: all .3s ease-in-out;}.catalog-list-item:hover a {  background: pink;  color: aqua;}.catalog-list-item.selected a {  background: pink;  color: var(--roydon-bili-color);}a.catalog-more {  min-width: fit-content;  font-weight: bold;  color: var(--font-color);  padding-left: 8px;  border-left: 2px solid pink;}a.catalog-more:hover {  color: var(--roydon-bili-color);}.article-sort-item-info .article-sort-item-categories .article-meta__categories {  padding: 2px 4px;  margin: 0 2px;}.article-meta-wrap .article-sort-item-categories .iconfont {  font-size: 16px !important;}.article-meta-wrap .article-sort-item-tags .iconfont {  font-size: 16px !important;}.article-sort-item-info .article-sort-item-tags .article-meta__tags {  padding: 2px 4px;  margin: 0 2px;}.scrollbar {  overflow: auto;  height: 100%;}.scrollbar::-webkit-scrollbar {  width: 3px;  height: 4px;}.scrollbar::-webkit-scrollbar-thumb {  background: rgba(0, 0, 0, 0.3);  border-radius: 4px;  border: 1px solid transparent;}#friend-circle-page {  --bg: #000;  --bili-pink: #f69;  background: #17181a;  color: white;  display: flex;  border-radius: 1rem;  height: 70vh;}@media screen and (max-width: 768px) {  #friend-circle-page {    height: 80vh;  }}#friend-circle-page .friends {  width: 300px;  border-right: 2px solid #f69;  padding: 1rem 1rem;  display: flex;  flex-direction: column;  gap: 0.5rem;  overflow-y: scroll;}#friend-circle-page .friends .friend {  padding: 0.5rem 1rem;  border-radius: 0.5rem;  display: flex;  align-items: center;  gap: 0.5rem;  cursor: pointer;  transition: 0.5s;}#friend-circle-page .friends .friend .avatar {  width: 3rem;  height: 3rem;  border-radius: 1.5rem;  margin: 0 !important;}#friend-circle-page .friends .friend .name {  overflow: hidden;  text-overflow: ellipsis;  white-space: nowrap;}#friend-circle-page .friends .friend:hover {  background-color: var(--bili-pink);}#friend-circle-page .friends .friend.active {  background: var(--bili-pink);}#friend-circle-page .friends .friend.alive .avatar {  box-shadow: 0 0 0 3px var(--bili-pink);}#friend-circle-page .posts .post {  padding: 0.5rem;}#friend-circle-page .posts .post .meta {  display: flex;  align-items: center;  gap: 0.5rem;  padding: 0 1rem 0 0;}#friend-circle-page .posts .post .meta .avatar {  width: 2rem;  height: 2rem;  border-radius: 50%;}#friend-circle-page .posts .post .meta .author {  flex: 1;}#friend-circle-page .posts .post .info {  background: #46208b7d;  padding: 0.5rem;  border-radius: 0 1rem 1rem 1rem;  margin: 0 0 0.5rem 2.5rem;}#friend-circle-page .posts .post .info:hover {  background: #45208be3;}#friend-circle-page .posts .post .info .link:hover {  color: var(--bili-pink);  transition: 0.5s;}#friend-circle-page .author-info {  overflow: hidden;  flex: 1;  padding: 0.5rem;}#friend-circle-page .author-info .author-card {  background: #f9c445;  padding: 1rem;  border-radius: 0.5rem;  display: flex;  gap: 1rem;  justify-content: space-between;  align-items: center;  margin-bottom: 1rem;}#friend-circle-page .author-info .avatar {  width: 3rem;  height: 3rem;  border-radius: 0.5rem;  margin: 0;}#friend-circle-page .author-info .center .name {  font-size: 1.4rem;  line-height: 1.8rem;  margin: 0;  color: #ffffff;}#friend-circle-page .author-info .center .desc {  line-height: 1.2rem;  font-size: 0.8rem;  color: var(--gray);}#friend-circle-page .author-info .right .link {  display: inline-block;  width: 3rem;  height: 3rem;  text-align: center;  line-height: 3rem;  border-radius: 1rem;  background: blanchedalmond;  color: var(--bili-pink);  transition: 0.5s;}#friend-circle-page .author-info .right .link:hover {  background-color: var(--bili-pink);  color: #fff;}@media (max-width: 768px) {  #friend-circle-page {    flex-direction: column;  }  #friend-circle-page .friends {    height: 7rem;    width: 100%;    padding: 0.5rem 1rem;    overflow-x: scroll;    overflow-y: hidden;    flex-direction: row;    border-right: none;    border-bottom: 1px solid var(--bg);  }  #friend-circle-page .friends .friend {    width: 5rem;    height: 6rem;    padding: 0.5rem;    flex-direction: column;  }  #friend-circle-page .friends .friend .name {    width: 100%;    font-size: 0.8rem;    text-align: center;  }}.comment-barrage {  position: fixed;  bottom: 0;  right: 55px;  padding: 0 0 30px 10px;  z-index: 100;  display: flex;  flex-direction: column;  justify-content: end;  align-items: flex-end;}@media screen and (max-width: 768px) {  .comment-barrage {    display: none !important;  }}.comment-barrage-item {  min-width: 100px;  max-width: 220px;  min-height: 80px;  max-height: 120px;  margin: 4px 0;  padding: 8px;  background: var(--roydon-small-card-bg);  backdrop-filter: blur(20px);  border-radius: 8px;  color: var(--font-color);  animation: barrageIn 0.3s cubic-bezier(.25, .01, .5, 1.5);  transition: 0.5s;  display: flex;  flex-direction: column;}.comment-barrage-item.out {  opacity: 0;}@keyframes barrageIn {  0% {    transform: scale(0.1);  }  100% {    transform: scale(1.0);  }}.comment-barrage-item .barrageHead {  height: 30px;  padding: 0;  line-height: 30px;  font-size: 12px;  border-bottom: 2px solid #F69;  display: flex;  justify-content: space-between;  align-items: center;}.comment-barrage-item .barrageHead .barrageNick {  font-size: 14px;  font-weight: bold;}.comment-barrage-item .barrageHead .barrageAvatar {  width: 24px;  height: 24px;  margin: 0;  border-radius: 50%;}.comment-barrage-item .barrageContent {  font-size: 12px;  line-height: 1.2;  height: calc(100% - 20px);  overflow: scroll;}.comment-barrage-item .barrageContent img {  max-width: 48px;  max-height: 48px;}.comment-barrage-item .barrageContent::-webkit-scrollbar {  height: 0;  width: 3px;}.comment-barrage-item .barrageContent::-webkit-scrollbar-button {  display: none;}#body-wrap .full_page .index-video {  display: block !important;}#body-wrap .full_page .waves-area {  display: block !important;}#recent-posts>.recent-post-item>.recent-post-info>.article-meta-wrap .article-meta__tags {  padding: 3px;  border-radius: 4px}#web_bg {  background-image: var(--roydon-site-bg)}.bangumi-item .bangumi-picture img {  border-radius: 6px;}#page-header.full_page #site-info {  top: 38%;}#vpanel {  opacity: .8;}#paul {  left: 0;  bottom: 0;  z-index: 520;  position: fixed;  pointer-events: none;}#pagination {  margin: 0 auto;}#video-bg {  position: fixed;  right: 0;  bottom: 0;  min-width: 100%;  min-height: 100%;  width: auto;  height: auto;  z-index: -9999;}/* #aside-content .card-widget:last-child {  background: url('https://bu.dusays.com/2022/11/17/6375f55771d07.png');  background-repeat: no-repeat;  background-position: left;  background-size: cover;  background-origin: padding-box;  background-clip: border-box;  color: hotpink;  font-weight: 800;  font-size: 16px;} */#aside-content .card-webinfo .webinfo .webinfo-item {  padding: 0 10px;}#recent-posts>.recent-post-item>.recent-post-info>.article-meta-wrap>.tags::before {  content: "\A";  white-space: nowrap !important;}#recent-posts>.recent-post-item:nth-child(n+2) {  width: 32.3%;}@media screen and (max-width: 768px) {  #recent-posts>.recent-post-item:nth-child(n+2) {    width: 100%;  }}#recent-posts>.recent-post-item .post_cover {  height: 12rem !important;}#recent-posts>.recent-post-item {  position: relative;}.icon-zhongbiao::before {  color: #f7c768;}.tk-meta-input .el-input-group__prepend {  background-color: pink;}.bangumi-active {  background: #dbecfe !important;  border-radius: 10px !important;}a.bangumi-tab:hover {  text-decoration: none !important;}.bangumi-button:hover {  background: #dbecfe !important;  border-radius: 10px !important;}a.bangumi-button.bangumi-nextpage:hover {  text-decoration: none !important;}.bangumi-button {  padding: 5px 10px !important;}a.bangumi-tab {  padding: 5px 10px !important;}svg.icon.faa-tada {  font-size: 1.1em;}#uploadSource>svg {  width: 1.19em;  height: 1.5em;}.newPost-left,.newPost-right {  position: absolute;  top: 0;  color: black;  height: 1.8em;  font-weight: 700;  text-align: center;  line-height: 1.5em;  padding: 0 10px;  background-color: rgb(140, 140, 255);  border-radius: 0 0 8px 8px;}.newPost-left {  left: 16px;}.newPost-right {  left: 16px;}#page-header:not(.not-top-img):before {  background-color: transparent;}[data-theme='dark'] #web_bg:before,[data-theme='dark'] #page-header:before {  position: absolute;  width: 100%;  height: 100%;  background-color: transparent !important;  content: '';}#pagination .page-number.current {  border-radius: 5px;}.announcement-detail {  font-weight: 900;}#page-header {  background: transparent !important;}#rightside>div>button {  border-radius: 5px;}#error-wrap {  position: absolute;  top: 40%;  right: 0;  left: 0;  margin: 0 auto;  padding: 0 1rem;  max-width: 1000px;  transform: translate(0, -50%);}#error-wrap .error-content {  display: flex;  flex-direction: row;  justify-content: center;  align-items: center;  margin: 0 1rem;  height: 18rem;  border-radius: 8px;  background: var(--card-bg);  box-shadow: var(--card-box-shadow);  transition: all 0.3s;}#error-wrap .error-content .error-img {  box-flex: 1;  flex: 1;  height: 100%;  border-top-left-radius: 8px;  border-bottom-left-radius: 8px;  background-color: #49b1f5;  background-position: center;  background-size: cover;}#error-wrap .error-content .error-info {  box-flex: 1;  flex: 1;  padding: 0.5rem;  text-align: center;  font-size: 14px;  font-family: Titillium Web, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft JhengHei', 'Microsoft YaHei', sans-serif;}#error-wrap .error-content .error-info .error_title {  margin-top: -4rem;  font-size: 9em;}#error-wrap .error-content .error-info .error_subtitle {  margin-top: -3.5rem;  word-break: break-word;  font-size: 1.6em;}#error-wrap .error-content .error-info a {  display: inline-block;  margin-top: 0.5rem;  padding: 0.3rem 1.5rem;  background: var(--btn-bg);  color: var(--btn-color);}#body-wrap.error .aside-list {  display: flex;  flex-direction: row;  flex-wrap: nowrap;  bottom: 0px;  position: absolute;  padding: 1rem;  width: 100%;  overflow: scroll;}#body-wrap.error .aside-list .aside-list-group {  display: flex;  flex-direction: row;  flex-wrap: nowrap;  max-width: 1200px;  margin: 0 auto;}#body-wrap.error .aside-list .aside-list-item {  padding: 0.5rem;}#body-wrap.error .aside-list .aside-list-item img {  width: 100%;  object-fit: cover;  border-radius: 12px;}#body-wrap.error .aside-list .aside-list-item .thumbnail {  overflow: hidden;  width: 230px;  height: 143px;  background: var(--heo-card-bg);  display: flex;}#body-wrap.error .aside-list .aside-list-item .content .title {  -webkit-line-clamp: 2;  overflow: hidden;  display: -webkit-box;  -webkit-box-orient: vertical;  line-height: 1.5;  justify-content: center;  align-items: flex-end;  align-content: center;  padding-top: 0.5rem;  color: white;}#body-wrap.error .aside-list .aside-list-item .content time {  display: none;}.contrib-column {  line-height: 1.2;}#article-container figure.highlight {  border-radius: 10px;}#aside-content .aside-list>.aside-list-item .content>.title {  color: #fff;  font-weight: bold;}.gitcalendar-graph {  padding: 5px 0 0 !important;}.social-qq:before {  content: "\e626";  font-size: 24px;}#article-container .btn-beautify.outline {  border-radius: 20px;  border: 5px solid;}#article-container>.genshin-card {  padding: 1%;  border-radius: 10px;}#article-container>.genshin-card>a>img {  width: 80%;  border-radius: 10px;}#footer-wrap {  color: white}#footer-wrap a {  color: white;  height: 44px;  line-height: 36px}#footer-wrap a:hover {  color: #ff3456;  background-color: none}div#footer_deal {  justify-content: center;  display: flex;  padding-top: 2rem;  align-items: center}@media screen and (max-width: 768px) {  img.footer_mini_logo {    display: none  }  div#footer_deal {    flex-wrap: wrap;    flex-direction: row  }}a.deal_link {  display: flex;  margin: 1rem 20px;  border-radius: 3rem;  width: 40px;  height: 40px;  background: transparent;  justify-content: center;  align-items: center;  transition: .5s}a.deal_link:hover {  color: white;  background: #ff3456}img.footer_mini_logo {  width: 64px;  height: 64px;  margin: 0 1rem;  cursor: pointer;  transition: cubic-bezier(0, 0, 0, 1.29) .5s}img.footer_mini_logo:hover {  filter: drop-shadow(0 2px 2px pink);  -webkit-backface-visibility: hidden;  -webkit-transform-style: preserve-3d}@media screen and (min-width: 1300px) {  img.footer_mini_logo:hover {    transform: scale(1.03)  }  img.footer_mini_logo:active {    transform: scale(.97)  }}#weblogo {  align-self: center}#footer-wrap a#Jayblog_footerlogo:hover {  background: none}.Jayblog_footerlogo_img {  filter: drop-shadow(0 12px 12px #ee7d7936)}.Jayblog_footerlogo_img:hover {  transform: scale(1.03)}.blog-slider__content {  padding-left: 0 !important;}.recent-post-item .recent-post-info .article-meta-wrap .article-meta .article-meta__categories {  position: absolute;  top: .5rem;  right: 1rem;  background: #7026f877;  border-radius: .4rem;  color: gold !important;  font-weight: 600 !important;  font-size: 99% !important;  padding: .2rem .8rem;}.recent-post-item .recent-post-info .article-meta-wrap .article-meta .article-meta__categories:hover {  text-decoration: none !important;  background: #185fff;}#recent-posts>.recent-post-item>.recent-post-info>.article-meta-wrap {  margin-bottom: 0 !important;  white-space: nowrap;  overflow: hidden;  text-overflow: ellipsis;}.article-meta-wrap .iconfont {  font-size: 110%;}.card-recent-post .home-indicator {  position: relative;  width: 100px;  margin: 5px auto;  height: 6px;  background-color: #fff;  border-radius: 3px;}.aside-content .card-announcement .genshin-card {  width: 100%;  border-radius: 10px;}#pagination {  width: 100%;  display: flex;  margin: auto;  align-items: center;  justify-content: center;}[data-theme="dark"] #nav .site-page,[data-theme="dark"] #nav .menus_items .menus_item .menus_item_child li a {  text-shadow: 0 0 2px var(--theme-color) !important;}[data-theme="dark"] #sidebar #sidebar-menus .menus_items .site-page {  text-shadow: 0 0 2px var(--theme-color) !important;}#hexo_electric_clock .clock-row {  font-weight: 600 !important;  font-size: .9em;}.card-background {  height: 92px !important;  margin: 10px !important;  border-radius: 10px !important;}.card-clock-time {  flex: 1;  font-family: UnidreamLED !important;  font-size: 3em !important;  text-align: center;  background: linear-gradient(to right, #91e8f4, #4a8cfe);  -webkit-background-clip: text;  color: transparent;  line-height: 1 !important;}#hexo_electric_clock {  padding: 4px !important;}.recent-posts>.recent-post-item:first-child {  width: 74% !important;}@media screen and (max-width: 1050px) {  .recent-posts>.recent-post-item:first-child {    width: 100% !important;  }}#footer {  margin-top: 1em;  display: flex;  flex-direction: column;}@media screen and (max-width: 768px) {  #footer {    margin-top: 0;    z-index: 999;    display: none !important;  }}[data-theme=dark] #footer:before,[data-theme=dark] #page-header:before,[data-theme=dark] #web_bg:before {  background-color: transparent !important}@media screen and (max-width: 768px) {  #letlink {    flex-direction: column !important;    text-align: center !important  }  #letlogo {    display: none !important  }  #footer-wrap {    margin-top: 1rem !important  }}.footer-banner-right {  display: flex;  flex-direction: row;  flex-wrap: wrap}#footer-wrap {  display: flex;  flex-wrap: wrap;  justify-content: space-around;  padding: 20px 50px 0 50px;  text-align: left !important;  max-width: 1100px;  margin: 0 auto}#footer-wrap h1 {  font-size: 1.5rem;  margin: 0}#footer-wrap h3 {  padding: 0 12px}#footer-wrap p {  margin: 0 0 0 .2rem;  font-size: .8rem;  opacity: .8}#footer-wrap i {  margin-right: .5rem;  width: 22px;  font-size: 18px;  display: inline-block}#footer-wrap #letlogo {  display: flex;  flex-direction: column;  align-self: center;  margin: auto 0;  max-width: 200px}#footer-wrap #letlink .link_group {  display: flex;  flex-direction: column;  margin-right: 20px;  min-width: 180px}#footer-wrap #letlink {  display: flex;  flex-direction: row;  justify-content: space-around;  margin: 0 0 1rem 0}#weblogo i {  font-size: 2rem;  line-height: 2rem;  letter-spacing: -10px}#footer:before {  position: absolute !important;  width: 100% !important;  height: 100% !important;  content: '' !important;  z-index: -1}#Jay-footer .footer-links {  display: flex;  flex-direction: column}#Jay-footer {  display: flex;  flex-direction: row;  width: 100%;  max-width: 1000px;  margin: 0 auto;  justify-content: space-between;  flex-wrap: wrap;  padding: 1rem 1rem}#Jay-footer .footer-item {  font-size: 1.2rem;  line-height: 1rem;  margin: .7rem 0;  color: white;}#Jay-footer .footer-item:hover {  color: #ff3456}#Jay-footer .footer-title {  color: pink;  font-size: 1.6rem;  margin: 0 auto;}#footer-banner {  padding: 1rem;  color: white;  backdrop-filter: blur(20px);  background: transparent;  display: flex;  z-index: -1;  transition: .5s;}[data-theme=dark] #footer-banner {  background: transparent}#footer-banner .footer-banner-links {  display: flex;  justify-content: space-between;  max-width: 1400px;  width: 100%;  margin: 0 auto;  flex-wrap: wrap;  align-items: center;}#footer-banner .footer-banner-left {  display: flex;  flex-wrap: wrap;  color: plum;  margin: 0 auto;}#footer-banner .footer-banner-link {  margin-right: 1rem;  color: white;  font-size: 1rem;  font-weight: 700;  white-space: nowrap}#footer-banner .footer-banner-link.cc {  margin-right: 0}#footer-banner .footer-banner-link.cc i {  margin-right: .5rem}#footer-banner .footer-banner-link:hover {  color: #ff3456}#footer-banner>div>div.footer-banner-left>span {  margin-right: 1rem}#footer-banner .footer-banner-right a:hover {  color: plum}#footer_deal i {  font-size: 2rem;  transition: .8s;  line-height: 1.3rem;  height: 1.3rem}.main-hero-waves-area {  width: 100%;  position: absolute;  left: 0;  bottom: -10px;  z-index: 1;}.waves-area .waves-svg {  width: 100%;  height: 4rem;}.parallax>use {  animation: move-forever 25s cubic-bezier(0.55, 0.5, 0.45, 0.5) infinite;}.parallax>use:nth-child(1) {  animation-delay: -2s;  animation-duration: 7s;  fill: #5782f0a6;}.parallax>use:nth-child(2) {  animation-delay: -3s;  animation-duration: 10s;  fill: #8faaedab;}.parallax>use:nth-child(3) {  animation-delay: -4s;  animation-duration: 13s;  fill: #9eb4e868;}.parallax>use:nth-child(4) {  animation-delay: -5s;  animation-duration: 20s;  fill: #819ce185;}@keyframes move-forever {  0% {    transform: translate3d(-90px, 0, 0);  }  100% {    transform: translate3d(85px, 0, 0);  }}@media (max-width: 768px) {  .waves-area .waves-svg {    height: 40px;    min-height: 40px;  }}#essay_page .author-content .author-content-item.essayPage {  height: 24em;  width: 83%;  background: url(https://gcore.jsdelivr.net/gh/roydonGuo/CDN/siteBgZIP/9mw29d.webp) left center / cover no-repeat;  color: wheat;  overflow: hidden;}#essay_page .author-content .author-content-item.essayPage-right {  width: 16%;  height: 24em;  background: url(https://bu.dusays.com/2022/11/17/637607ee5d734.gif) left center / cover no-repeat;  background-size: contain;  color: rgb(122, 49, 6);  overflow: hidden;}#bbTimeList {  background: var(--card-bg);  padding: 0.5em;  border-radius: 16px;  box-sizing: border-box;  display: flex;  transition: all 0.6s ease 0s;  margin: 0 auto;  align-items: center;  height: 3em;  width: 100%;}#bbtalk {  width: 100%;  overflow: hidden;  text-overflow: ellipsis;  white-space: nowrap;}#bber-talk {  width: 100%;  height: 2em;  line-height: 2em;  display: flex;  flex-direction: column;}.bber-logo {  font-size: 2em;  line-height: 2em;  margin-right: 1em;}.bber-gotobb {  line-height: 2em;  margin-left: 2em;  transition: all 0.3s ease 0s;  cursor: pointer;}#bber-talk .li-style {  width: 100%;  max-width: 100%;  height: 2em;  text-align: center;  overflow: hidden;  text-overflow: ellipsis;  transition: 0.3s;  font-weight: bold;  margin: auto;  cursor: pointer;  white-space: nowrap;}#bbTimeList:hover {  color: gold;}.bbTimeList .bber-logo {  animation: rotate 2s linear infinite;}@-webkit-keyframes rotate {  0% {    -webkit-transform: rotate(0deg);    transform: rotate(0deg);  }  to {    -webkit-transform: rotate(-1turn);    transform: rotate(-1turn);  }}@keyframes rotate {  0% {    -webkit-transform: rotate(0deg);    transform: rotate(0deg);  }  to {    -webkit-transform: rotate(-1turn);    transform: rotate(-1turn);  }}.article-sort-item.year {  width: 100%;}#recent-posts {  align-content: flex-start;  display: flex;  flex-wrap: wrap;  justify-content: space-between}#recent-posts>.recent-post-item {  display: inline-block;  height: auto;}#recent-posts>.recent-post-item .post_cover {  width: 100%;}#recent-posts>.recent-post-item .post_cover img.post_bg {  width: 100%;  height: 100%}#recent-posts>.recent-post-item>.recent-post-info>.content {  display: none}@media screen and (max-width:768px) {  #recent-posts>.recent-post-item {    width: 100%  }}#twikoo .el-textarea textarea {  min-height: 120px !important;  background-size: 90px;}#twikoo .OwO-body {  max-width: 100% !important;  border-radius: 8px;}#twikoo .OwO .OwO-body .OwO-items {  max-height: 250px !important;}.OwO .OwO-body .OwO-items-show {  display: flex !important;  flex-wrap: wrap;  justify-content: space-between;}.OwO .OwO-body .OwO-items-image .OwO-item {  margin: 0 !important;  padding: 5px !important;  max-width: 6% !important;  box-sizing: content-box;}.OwO .OwO-body .OwO-items-image .OwO-item {  box-sizing: border-box;}.OwO .OwO-body .OwO-items-image .OwO-item[title|="Genshin"],.OwO .OwO-body .OwO-items-image .OwO-item[title|="tom_jerry"],.OwO .OwO-body .OwO-items-image .OwO-item[title|="Snow-Miku"] {  max-width: 9% !important;  box-sizing: content-box;}#twikoo .OwO-items li img {  width: 100% !important;}.tk-comment .vemoji[alt|="Genshin"],.tk-comment .tk-owo-emotion[alt*="Genshin"],.tk-comment .vemoji[alt|="Snow"],.tk-comment .tk-owo-emotion[alt*="Snow"],.tk-comment .vemoji[alt|="tom_jerry"],.tk-comment .tk-owo-emotion[alt*="tom_jerry"] {  max-width: 100px !important;  max-height: 100px !important;  width: 100px;  margin: 4px;  border-radius: 8px !important;  display: inline-block !important;}@media screen and (max-width: 768px) {  .tk-comment .vemoji[alt|="Genshin"],  .tk-comment .tk-owo-emotion[alt*="Genshin"],  .tk-comment .vemoji[alt|="Snow"],  .tk-comment .tk-owo-emotion[alt*="Snow"],  .tk-comment .vemoji[alt|="tom_jerry"],  .tk-comment .tk-owo-emotion[alt*="tom_jerry"] {    max-width: calc(100% - 5px) !important;    max-height: calc(100% - 5px) !important;    border-radius: 4px !important;  }  .OwO .OwO-body .OwO-items-image .OwO-item[title|="Genshin"],  .OwO .OwO-body .OwO-items-image .OwO-item[title|="tom_jerry"],  .OwO .OwO-body .OwO-items-image .OwO-item[title|="Snow-Miku"] {    max-width: calc(28% - 10px) !important;    box-sizing: content-box;  }}.el-textarea__inner {  background-image: url(https://tuchuang.voooe.cn/images/2023/01/02/open.webp) !important;}.el-textarea__inner:focus {  background-image: url(https://tuchuang.voooe.cn/images/2023/01/02/close.webp) !important;}.twikoo .tk-comments .tk-submit {  margin-top: 1em;  background: var(--roydon-small-card-bg);  border-radius: 20px;  padding: 10px;}.twikoo .tk-comments-container>.tk-comment {  padding: 1em;  border-radius: 16px;  background: var(--roydon-small-card-bg);  transition: .3s;}.tk-content img {  border-radius: 8px;}.twikoo .tk-comments-container>.tk-comment {  box-shadow: var(--roydon-box-shadow);}.twikoo .tk-extra {  border-radius: 8px;  padding: 0.5em;  box-shadow: var(--roydon-box-shadow);  transition: .3s;}.twikoo .tk-expand {  font-size: 12px;  font-weight: bold;  border-radius: 8px;}.twikoo .tk-extra:hover {  box-shadow: var(--card-hover-box-shadow);}#content-inner {  filter: none !important;  transform: none !important;  perspective: none !important;}.flink-card-content {  display: flex;  flex-wrap: wrap;  justify-content: space-between;  width: 100%;}.flink-card-content-item {  width: 100%;  border-radius: 16px;  box-shadow: var(--roydon-box-shadow);  background: var(--roydon-small-card-bg);  position: relative;  padding: 1rem 2rem;  overflow: hidden;}.flink-card-content-item .banners-title-big {  font-size: 36px;  font-weight: 700;  line-height: 1;}.flink-card-content-item.everyone {  display: flex;  justify-content: center;  align-items: flex-start;  flex-direction: column;  width: 100%;  position: relative;}.flink-card-content-item .banners-title {  left: 2rem;  top: 1rem;  position: absolute;  flex-direction: column;  display: flex;}.flink-card-content-item .banner-button-group {  position: absolute;  right: 2rem;  top: 1rem;  display: flex;}.flink-card-content-item .banner-button-group button {  background: var(--roydon-button-bg);  padding: 16px 12px;  border-radius: 16px;  box-shadow: var(--roydon-box-shadow);  color: var(--font-color);  font-size: 16px;  display: flex;  align-items: center;  z-index: 1;  transition: all 0.3s ease 0s;  cursor: pointer;}.flink-card-content-item .banner-button-group button:hover {  background: var(--roydon-button-hover-bg);}.flink-card-content-item .banner-button-group button i {  margin-right: 0.2rem;}.flink-card-content-item.everyone .everyone-style-everyone {  display: flex;  width: 100%;  padding-bottom: 1rem;  transform: rotate(0deg);}.flink-card-content-item.everyone .tags-everyone-wrapper {  margin-top: 7em;  display: flex;  flex-wrap: nowrap;  animation: 50s linear 0s infinite normal none running linkScroll;  -webkit-animation: 50s linear 0s infinite normal none running linkScroll;}@keyframes linkScroll {  0% {    transform: translateX(0px);    -webkit-transform: translateX(0px);  }  100% {    transform: translateX(-50%);    -webkit-transform: translateX(-50%);  }}.tags-everyone-iconfont-pair {  margin-left: 1rem;}.tags-everyone-iconfont-pair .tags-everyone-iconfont {  display: flex;  align-items: center;  justify-content: center;  width: 96px;  height: 96px;}.tags-everyone-iconfont-pair .tags-everyone-iconfont img {  width: 100%;  height: 100%;  box-shadow: var(--roydon-box-shadow);  border-radius: 64px;}.tags-everyone-iconfont img {  width: 80%;  margin: 0 auto !important;}.tags-everyone-iconfont-pair .tags-everyone-iconfont:nth-child(even) {  margin-top: 1rem;  transform: translate(-60px);}.addBtn {  display: flex;  justify-content: center;  flex-wrap: wrap;}.addBtn button {  transition: .2s;  display: flex;  margin: 5px auto;  color: var(--font-color);  padding: 15px;  border-radius: 40px;  background: var(--roydon-small-card-bg);  align-items: center;}button {  padding: 0;  outline: 0;  border: none;  background: 0 0;  cursor: pointer;  touch-action: manipulation;}.fa-solid,.fas {  font-family: "Font Awesome 6 Free";  font-weight: 900;}.addBtn i {  font-size: 1.3rem;  margin-right: 10px;}.addBtn button:hover {  background: #f69;}.pace {  -webkit-pointer-events: none;  pointer-events: none;  -webkit-user-select: none;  -moz-user-select: none;  user-select: none;  z-index: 2000;  position: fixed;  margin: auto;  top: 6px;  left: 0;  right: 0;  height: 10px;  border-radius: 5px;  width: 6rem;  background: #c0cef8;  border: 1px #f7eb09;  overflow: hidden}.pace-inactive .pace-progress {  opacity: 0;  transition: .3s ease-in}.pace .pace-progress {  -webkit-box-sizing: border-box;  -moz-box-sizing: border-box;  -ms-box-sizing: border-box;  -o-box-sizing: border-box;  box-sizing: border-box;  max-width: 200px;  position: absolute;  z-index: 2000;  display: block;  top: 0;  right: 100%;  height: 100%;  width: 100%;  background: linear-gradient(-45deg, #edbed5, #f583ae, #e6169d, #e50076);  animation: gradient 1.5s ease infinite;  -webkit-transform: translate3d(0, 0, 0);  -moz-transform: translate3d(0, 0, 0);  -ms-transform: translate3d(0, 0, 0);  -o-transform: translate3d(0, 0, 0);  transform: translate3d(0, 0, 0);  background-size: 200%}.pace.pace-inactive {  opacity: 0;  transition: .3s;  top: -8px}@keyframes gradient {  0% {    background-position: 0% 50%;  }  50% {    background-position: 100% 50%;  }  100% {    background-position: 0% 50%;  }}@font-face {  font-family: "ali-song";  src: url("//at.alicdn.com/wf/webfont/jmF1bH9rSbIN/gRyhHl3ThWATQBmuOX84e.woff2") format("woff2"),    url("//at.alicdn.com/wf/webfont/jmF1bH9rSbIN/WQDY8KjcBMPEloQD1bmEW.woff") format("woff");  font-display: swap;}#page-header.nav-fixed #nav {  box-shadow: none !important;}div#menus>.menus_items {  position: absolute;  left: 50%;  top: 50%;  transform: translate(-50%, -50%);}div#menus {  font-family: "ali-song";  font-size: 1.2em;  line-height: 1.5;}#nav .site-page-to {  position: relative;  padding: 8px 10px;  font-size: 0.7em;  cursor: pointer;}#search-button a {  margin: 0 3px;  border: 1px solid rgba(49, 46, 46, 0.3);  border-radius: 8px;  box-sizing: border-box;  line-height: 1;  background: rgba(0, 0, 0, 0.1);}#search-button a:hover {  border: 1px solid #000;  background-color: rgba(13, 12, 12, 0.1);  box-shadow: var(--roydon-box-shadow);  opacity: 1;}#nav #site-name {  font-size: 1.2em;}#nav #site-name:hover {  font-weight: 900;}::-webkit-scrollbar {  width: 5px;  height: 10px;}::-webkit-scrollbar-thumb {  background-color: pink;  border-radius: 2em;}::-webkit-scrollbar-corner {  background-color: transparent;}::-moz-selection {  color: rgb(29, 24, 24);  background-color: pink;}#footer {  background: transparent !important;  height: 66px;}#site-name:hover::before {  opacity: 1;  scale: 1.03;}#site-name {  position: relative;  font-size: 24px;}@media screen and (max-width: 768px) {  .mask-name-container {    width: 600px;  }}@media screen and (max-width: 500px) {  .mask-name-container {    display: none;  }}@media screen and (min-width: 1300px) {  #nav a:hover {    transform: scale(1.03);  }}.back-home-button:hover {  background: pink;  color: #ff3456 !important;}.back-home-button {  display: flex;  width: 40px;  height: 80%;  padding: 0 !important;  align-items: center;  justify-content: center;  font-weight: 700;  font-size: 1.2em;  line-height: 1;  transition: 0.3s;  border-radius: 10px;}.back-home-button:hover .back-menu-list-groups {  display: flex;  opacity: 1;  transition: 0.3s;  top: 55px;  pointer-events: auto;  left: 0;}#nav {  padding: 0 calc((100% - 1450px) / 2);  backdrop-filter: saturate(150%) blur(20px);  transition: none !important;  -webkit-transition: none !important;  -moz-transition: none !important;  -ms-transition: none !important;  -o-transition: none !important;}[data-theme='dark'] #page-header.nav-fixed>#nav,[data-theme='dark'] #page-header.not-top-img>#nav {  background: none !important;}.back-home-button .back-menu-list-groups {  position: absolute;  top: 60px;  left: 0;  background: rgba(0, 0, 0, 0.5);  border-radius: 12px;  flex-direction: column;  font-size: 12px;  font-weight: 800;  color: white;  transition: 0s;  opacity: 0;  pointer-events: none;}.back-home-button .back-menu-list-group {  display: flex;  flex-direction: column;}.back-home-button .back-menu-list-group .back-menu-list-title {  margin: 8px 0 0 16px;  color: rgb(246, 104, 127);  transition: 0.3s;}.back-home-button-icon {  font-size: 1.3em;}.back-home-button .back-menu-list {  display: flex;  flex-direction: column;}.back-home-button .back-menu-list::before {  position: absolute;  top: -22px;  left: 0px;  width: 100%;  height: 25px;  content: '';}.back-home-button .back-menu-list-group:hover .back-menu-list-title {  color: pink;}.back-home-button .back-menu-list-groups:hover {  border: black;}.back-home-button .back-menu-list .back-menu-item {  display: flex;  align-items: center;  margin: 2px 8px;  padding: 4px 8px !important;  border-radius: 6px;  transition: 0.3s;}.back-home-button .back-menu-list .back-menu-item:hover {  background: rgb(0, 0, 0);}.back-home-button .back-menu-list .back-menu-item .back-menu-item-text {  font-size: 14px;  margin-left: 0.5rem;  color: whitesmoke;  white-space: nowrap;}.back-home-button .back-menu-list .back-menu-item .back-menu-item-icon {  width: 24px;  height: 24px;  border-radius: 24px;}#page-header #nav .back-home-button {  color: pink;  cursor: pointer;  position: relative;}.back-home-button .back-menu-list .back-menu-item:hover .back-menu-item-text {  color: #ff3456;}.back-menu-item-icon.loading img {  width: 25px;}#site-name,.shuoshuo {  white-space: nowrap;  overflow: hidden;}#site-name {  padding: 0 2px;  margin-left: 4px;  position: relative;}#site-name *:not(i):hover {  display: none !important;}#blog_name #site-name:hover::after {  opacity: 1;  transform: scale(1.01);}#site-name::before {  opacity: 0;  background-color: pink !important;  border-radius: 12px;  transition: .3s;  position: absolute;  top: 0 !important;  right: 0 !important;  width: 100%;  height: 100%;  content: "\f015";  font-family: "Font Awesome 6 Free";  text-align: center;  color: #ff3456;  font-size: 20px;}#blog_name #site-name::after {  opacity: 0;  background-color: pink !important;  border-radius: 12px;  transition: 0.3s;  position: absolute;  top: 0;  right: 0;  width: 100%;  height: 100%;  content: '\f015';  font-family: 'Font Awesome 6 Free';  text-align: center;  color: #dbbdfd !important;}#site-name i {  position: absolute;  top: 50%;  left: 50% !important;  transform: translate(-50%, -50%);  left: 0;  opacity: 0;}#site-name:hover i {  opacity: 1;}#nav #blog_name {  flex-wrap: nowrap;  height: 60px;  display: flex;  align-items: center;  transition: 0.3s;}#content-inner>#archive,#content-inner>#page {  background: var(--roydon-small-card-bg);}#page-header #post-info {  position: absolute;  bottom: 30px;  padding: 0 8%;  width: 100%;  text-align: center;  margin-bottom: 90px;}.framework-info {  display: none;}#footer-wrap {  padding: 0px 20px}#ghbdages {  margin: 0 auto;}#aside-content .card-info #card-info-btn:hover {  margin: 0 18%;  transition: .3s;}#universe {  display: block;  position: fixed;  margin: 0;  padding: 0;  border: 0;  outline: 0;  left: 0;  top: 0;  width: 100%;  height: 100%;  pointer-events: none;  z-index: -1;}#post .post-content .tabs {  border-radius: 0 0 12px 12px;}#article-container .tabs>.tab-contents .tab-item-content {  padding: 3px 3px;}#article-container .tab-contents i {  font-size: 20px;  color: blue;}#article-container iframe {  width: 100%;  border-radius: 8px;  min-height: 500px;}#article-container .code-expand-btn i {  color: pink;}div#post:hover {  box-sizing: border-box;}.vwrap {  box-shadow: 2px 2px 5px #bbb;  background: rgba(255, 255, 255, 0.5);  border-radius: 8px;  padding: 30px;  margin: 30px 0px 30px 0px;}.el-input.el-input--small.el-input-group.el-input-group--prepend:nth-child(1):before {  content: '输入昵称(自定义)🐧';}.el-input.el-input--small.el-input-group.el-input-group--prepend:nth-child(2):before {  content: '输入邮箱自动获取头像📧';}.el-input.el-input--small.el-input-group.el-input-group--prepend:nth-child(3):before {  content: '可以通过昵称访问您的网站🔗';}.el-input.el-input--small.el-input-group.el-input-group--prepend:focus-within::before,.el-input.el-input--small.el-input-group.el-input-group--prepend:focus-within::after {  display: block;}.v[data-class="v"] .vcards {  padding: 0 20px;}.v[data-class="v"] .vcards .vcard .vcontent.expand::before {  background: none !important;}.v[data-class="v"] .vcards .vcard .vcontent.expand::before {  background: none !important;}.v[data-class=v] .vcards .vcard .vcontent.expand {  max-height: 18em;}.v[data-class=v] .vcards .vcard .vcontent.expand::after {  border-radius: 8px;  color: #00fff6;}.el-input.el-input--small.el-input-group.el-input-group--prepend::before {  display: none;  position: absolute;  top: -60px;  white-space: nowrap;  border-radius: 10px;  left: 50%;  transform: translate(-50%);  padding: 14px 18px;  background: #444;  color: #fff;}.el-input.el-input--small.el-input-group.el-input-group--prepend::after {  display: none;  content: '';  position: absolute;  border: 12px solid transparent;  border-top-color: #444;  left: 50%;  transform: translate(-50%, -48px);}#article-container a:hover {  color: #ff3456;  text-decoration: none !important;}#article-container #hpp_talk p img {  display: inline;}.winbox {  border-radius: 24px;  overflow: hidden;}.wb-min {  background-position: center;}.wb-body {  background: var(--roydon-card-mask);}.bgbox {  display: flex;  flex-wrap: wrap;  justify-content: space-between;}.pimgbox,.imgbox,.box {  width: 15.66%;  margin: 0.5%;  background-size: cover;  border-radius: 16px;  overflow: hidden;}.pimgbox {  height: 300px;}.imgbox,.box {  height: 100px;}@media screen and (max-width: 768px) {  .pimgbox,  .imgbox,  .box {    height: 1%;    width: 48%;  }  .pimgbox {    height: 250px;  }  .imgbox,  .box {    height: 100px;  }  .wb-min {    display: none;  }  #changeBgBox .wb-body::-webkit-scrollbar {    display: none;  }}.live2d-widget-dialog-container {  max-width: 200px !important;  max-height: 100px !important;  position: absolute;  bottom: 73% !important;  right: 0px;  transform-origin: right;  padding: 12px !important;  box-sizing: border-box;  -webkit-font-smoothing: antialiased;}.live2d-widget-dialog {  width: 100%;  height: 100%;  color: #917159;  font-size: 16px;  padding: 3px !important;  border: 2px solid rgb(236, 203, 180);  background: rgb(252, 248, 244);  border-radius: 12px;}#movies_page .author-content .author-content-item.item-left {  height: 24em;  width: 83%;  background: url(https://gcore.jsdelivr.net/gh/roydonGuo/CDN/siteBgZIP/1kzdg1.webp) left center / cover no-repeat;  color: wheat;  overflow: hidden;}#movies_page .author-content .author-content-item.item-right {  width: 16%;  height: 24em;  background: url(https://bu.dusays.com/2023/01/16/63c5537e493df.jpg) left center / cover no-repeat;  background-size: contain;  color: rgb(200, 39, 14);  overflow: hidden;}#article-container .author-content .author-content-item.item-left {  height: 24em;  width: 83%;  background: url(https://gcore.jsdelivr.net/gh/roydonGuo/CDN/siteBgZIP/4xjgzz.webp) left center / cover no-repeat;  color: wheat;  overflow: hidden;}#article-container .author-content .author-content-item.item-right {  width: 16%;  height: 24em;  background: url(https://bu.dusays.com/2023/01/16/63c5537e52b53.jpg) left center / cover no-repeat;  background-size: contain;  color: rgb(200, 39, 14);  overflow: hidden;}#music_page .author-content .author-content-item.item-left {  height: 24em;  width: 83%;  background: url(https://gcore.jsdelivr.net/gh/roydonGuo/CDN/siteBgZIP/m9ey79.webp) left center / cover no-repeat;  color: wheat;  overflow: hidden;}#music_page .author-content .author-content-item.item-right {  width: 16%;  height: 24em;  background: url(https://bu.dusays.com/2023/01/16/63c5537e4fc09.jpg) left center / cover no-repeat;  background-size: contain;  color: rgb(200, 39, 14);  overflow: hidden;}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/css/roydon.min.css"/>
      <url>/css/roydon.min.css</url>
      
        <content type="html"><![CDATA[#about-page .author-box{position:relative}#about-page .author-box .author-img{margin:auto;border-radius:50%;overflow:hidden;position:relative;width:150px;height:150px;border:5px solid gold}#about-page .author-box .author-img img{border-radius:50%;overflow:hidden;width:145px;height:145px}#about-page .author-box .image-dot{width:32px;height:32px;background:var(--roydon-state-dot-bg);position:absolute;border-radius:50%;border:5px solid #fff;top:50%;left:50%;transform:translate(35px,45px)}.author-content{display:flex;flex-wrap:wrap;justify-content:space-between;width:100%;margin-top:1rem}#about-page .myInfoAndSayHello{display:flex;flex-direction:column;justify-content:center;background:linear-gradient(100deg,#4da6ff 40%,#b2f2ff 60%);background-size:200%;animation:gradient 15s ease infinite;width:59%}.author-content-item{width:49%;border-radius:24px;box-shadow:var(--roydon-box-shadow);position:relative;padding:1rem 2rem;overflow:hidden}#about-page .myInfoAndSayHello .title1{opacity:.8;line-height:1.3}#about-page .myInfoAndSayHello .title2{font-size:36px;font-weight:700;line-height:1.1;margin:.5rem 0}.inline-word{word-break:keep-all;white-space:nowrap}#about-page .myInfoAndSayHello .title1{opacity:.8;line-height:1.3}.author-content-item.aboutsiteTips{display:flex;justify-content:center;align-items:flex-start;background-color:pink;flex-direction:column;width:39%}.aboutsiteTips h2{margin-right:auto;font-size:36px;font-family:Helvetica;line-height:1.06;letter-spacing:-.02em;margin-top:0}.aboutsiteTips .mask{height:36px;position:relative;overflow:hidden;margin-top:4px}.aboutsiteTips .mask span{display:block;box-sizing:border-box;position:absolute;top:36px;background-clip:text;-webkit-text-fill-color:transparent;background-repeat:no-repeat}.aboutsiteTips .mask span[data-show]{transform:translateY(-100%);transition:.5s transform ease-in-out}.aboutsiteTips .mask span[data-up]{transform:translateY(-200%);transition:.5s transform ease-in-out}.aboutsiteTips .mask span:nth-child(1){background-image:linear-gradient(45deg,#0ecffe 50%,#07a6f1)}.aboutsiteTips .mask span:nth-child(2){background-image:linear-gradient(45deg,#18e198 50%,#0ec15d)}.aboutsiteTips .mask span:nth-child(3){background-image:linear-gradient(45deg,#9b8efc 50%,#3e0d89)}.aboutsiteTips .mask span:nth-child(4){background-image:linear-gradient(45deg,#f49794 50%,#fc3d66)}@media screen and (max-width:768px){.author-content-item.map{margin-bottom:0}}#about-page .about-statistic{min-height:380px;width:39%;color:#fff;background:url(https://bu.dusays.com/2022/11/18/63765da00f149.png) no-repeat top;background-size:cover;overflow:hidden}#about-page .about-statistic::after{box-shadow:0 -19px 63px 21px #1fa5af79 inset;position:absolute;content:"";width:100%;height:100%;top:0;left:0}.author-content-item .card-content{position:absolute;width:100%;height:100%;top:0;left:0;z-index:2;display:flex;flex-direction:column;padding:1rem 2rem}.author-content-item .card-content .author-content-item-title{margin-bottom:.5rem}.author-content-item .author-content-item-title{font-size:36px;font-weight:700;line-height:1}#statistic{font-size:16px;border-radius:15px;width:100%;display:flex;justify-content:space-between;flex-direction:row;flex-wrap:wrap;margin-top:1rem;margin-bottom:2rem}#statistic div span:first-child{opacity:.8;font-size:.6rem}#statistic div span:last-child{font-weight:700;font-size:34px;line-height:1;white-space:nowrap}#statistic div{display:flex;justify-content:space-between;flex-direction:column;width:50%;margin-bottom:.5rem}.post-tips{position:absolute;bottom:1rem;left:2rem}.post-tips a{color:#8a2be2;border:none!important}.author-content-item .card-content .banner-button-group{position:absolute;bottom:1rem;right:1rem}.author-content-item .card-content .banner-button-group .banner-button{height:2.5rem;width:5rem;border-radius:1.2rem;backdrop-filter:blur(30px);display:flex;align-items:center;justify-content:center;cursor:pointer}.author-content-item .card-content .banner-button-group .banner-button i{font-size:1rem}#about-page .author-content-item .card-content .banner-button-group .banner-button i{font-size:1.5rem}.author-content-item .card-content .banner-button-group .banner-button:hover{color:#fff;background-color:pink;backdrop-filter:blur(50px)}.author-content-item.personalities{position:relative;background-color:rgba(255,68,0,.9);width:59%}.author-content-item.personalities .image{position:absolute;right:30px;bottom:1rem;width:250px;transition:transform 1s cubic-bezier(.13,.45,.21,1.02)}.author-content-item.personalities .image img{display:block;max-width:100%;transition:filter 375ms ease-in .2s}.author-content-item.personalities:hover .image{transform:rotate(-10deg)}.author-content-item.myphoto{height:60%;min-height:240px;position:relative;overflow:hidden;width:39%;display:flex;align-items:center;justify-content:center}.author-content-item.myphoto img{position:absolute;min-width:100%;object-fit:cover;transition:.6s;animation:coverIn 1s ease-out forwards;transition:transform 1s ease-out!important}.author-content-item.myphoto:hover img{transform:scale(1.1)}.author-content-item:hover .card-background-icon{transform:rotate(20deg)}.author-content-item.personalities .title2{font-size:36px;font-weight:700;line-height:1.1}.author-content-item.map{background:url(https://bu.dusays.com/2022/11/17/6375f5576cbc3.jpg) no-repeat center;min-height:160px;max-height:400px;position:relative;overflow:hidden;margin-bottom:1rem;height:60%;background-size:100%;transition:1s ease-in-out}.author-content-item.single{width:100%}.author-content-item.map .map-title{position:absolute;bottom:0;left:0;width:100%;padding:.5rem 2rem;backdrop-filter:blur(20px);transition:2s ease-in-out;font-size:20px}.author-content-item.map .map-title b{color:#8a2be2;font-weight:900}.author-content-item.selfInfo{display:flex;min-height:100px;max-height:400px;justify-content:space-between;align-items:center;flex-wrap:wrap;height:40%;background:gold}.author-content-item.selfInfo div{display:flex;flex-direction:column;margin:.5rem 2rem .5rem 0}.author-content-item.selfInfo .selfInfo-title{opacity:.8;font-size:.8rem;line-height:1;margin-bottom:10px}.author-content-item.selfInfo .selfInfo-content{font-weight:900;font-size:2.3em;line-height:1}.author-content-item-group.column.mapAndInfo{width:59%}.author-content-item.map:hover{background-size:150%;transition:3s ease-in-out;background-position-x:46%;background-position-y:36%}.author-content-item.map:hover .map-title{bottom:-100%}.author-content-item-group.column{display:flex;flex-direction:column;width:49%;justify-content:space-between}.author-content-item.single.reward .reward-list-updateDate{text-align:center;font-size:14px}.author-content-item.single.reward .post-reward{position:absolute;margin-top:0;width:auto;text-align:none;pointer-events:none;right:2rem;top:2rem}.author-content-item.single.reward .post-reward:hover .reward-main{display:block;width:320px!important}.tip-button{border-radius:2.25rem;cursor:pointer;font-size:20px;font-weight:600;height:2.6rem;margin-bottom:-4rem;outline:0;position:relative;top:0;transform-origin:0 100%;transition:transform .5s ease-in-out;width:auto}.tip-button__text{opacity:1;position:relative;transition:opacity .1s linear .5s;z-index:3}.author-content .post-reward .reward-main{bottom:0;top:36px;left:auto;right:0}.author-content .post-reward .reward-main .reward-all:before{top:-11px;bottom:auto}#about-page .post-reward .reward-main .reward-all{border-radius:10px;padding:10px 10px!important}.post-reward .reward-main .reward-all .reward-item{padding:0 8px!important}.post-reward .reward-main .reward-all li.reward-item::before{content:none!important}.post-reward .reward-main .reward-all:after{content:none!important}.author-content-item.maxim{font-size:36px;font-weight:900;line-height:1.1;background:linear-gradient(140deg,#06e6ff 0,#f91a73 100%);background-size:200%;animation:gradient 15s ease infinite;display:flex;align-items:flex-start;flex-direction:column;justify-content:center;width:39%}.author-content-item .author-content-item-tips{opacity:.8;font-size:1rem;margin-bottom:.5rem}.author-content-item.maxim .maxim-title{display:flex;flex-direction:column}.author-content-item.buff{height:200px;font-size:36px;font-weight:900;line-height:1.2;display:flex;align-items:flex-start;flex-direction:column;justify-content:center;background:linear-gradient(120deg,#ff27e8 0,#ff8000 100%);background-size:200%;animation:gradient 15s ease infinite;min-height:200px;height:fit-content;width:59%}.author-content-item.buff .card-content{display:flex;flex-direction:column;justify-content:center}.author-content-item.buff .buff-title{display:flex;flex-direction:column}.card-background-icon{font-size:18rem;opacity:.6;position:absolute;right:2%;bottom:-10%;transform:rotate(100deg);transition:1s ease-in-out}.author-content-item.game-yuanshen{background:url(https://bu.dusays.com/2022/11/17/6375f5589dde2.jpg) no-repeat top;background-size:cover;min-height:460px;color:#fff;overflow:hidden;width:66%}.author-content-item .content-bottom{margin-top:auto;display:flex;align-items:center;justify-content:space-between}.author-content-item .content-bottom .icon-group{display:flex;position:relative}.icon-pos-mid{background:url(https://bu.dusays.com/2022/11/17/6375f5574f516.png)}.author-content-item.game-yuanshen::after{box-shadow:0 -39px 60px 20px #a089079a inset;position:absolute;content:"";width:100%;height:100%;top:0;left:0}.author-content-item.historical-drama{width:32%;background:url(https://bu.dusays.com/2022/12/11/6395626c96b6d.jpg) no-repeat top;background-size:cover;min-height:460px;overflow:hidden;color:violet}.author-content-item.historical-drama::after{box-shadow:0 -48px 203px 11px #57257aaf inset;position:absolute;content:"";width:100%;height:100%;top:0;left:0}.author-content-item.like-technology{background:url(https://bu.dusays.com/2022/11/17/637617ff5177f.jpg) no-repeat;background-size:cover;color:#0e9f10;min-height:500px}.author-content-item.like-music{background:url(https://bu.dusays.com/2022/11/17/6375f558667f1.jpg) no-repeat top;background-size:cover;color:wheat;min-height:500px;overflow:hidden}.author-content-item.like-music::after{box-shadow:0 -10px 100px 10px #18a5e26a inset;position:absolute;content:"";width:100%;height:100%;top:0;left:0}@media screen and (max-width:768px){.author-content-item.game-yuanshen .content-bottom{padding-bottom:10px}.author-content-item.game-yuanshen .game-yuanshen-uid{display:none}.author-content{margin-top:0}.author-content-item{width:100%!important;margin-top:1rem;padding:1rem}.author-content-item.map{margin-bottom:0}.author-content-item-group.column{width:100%!important}.author-content-item.selfInfo{height:95%}.author-content-item.personalities{height:170px}.post-tips{left:auto}.author-content-item.personalities .image{width:90px}.site-card-group>a{width:100%!important}.post-reward{display:none}.reward-list-item{width:100%!important}.layout>div:first-child:not(.recent-posts){padding:1rem!important}.author-content-item .card-content .banner-button-group .banner-button-text{display:none}.author-content-item .card-content .banner-button-group{right:1rem;bottom:1rem}.author-content-item .card-content .banner-button-group .banner-button{width:3rem;height:3rem!important}#selfInfo-content-year{width:90px}}@media screen and (min-width:768px) and (max-width:896px){.author-content-item.like-music .content-bottom .tips{display:none}}.reward-list-all{display:flex;flex-wrap:wrap;flex-direction:row;margin:1rem -.25rem .5rem}.reward-list-item{padding:1rem;border-radius:12px;border:1px solid rgba(255,192,203,.6);width:calc((100% / 3) - .5rem);margin:0 .25rem .5rem;box-shadow:2px 2px 2px rgba(255,192,203,.6);background:linear-gradient(140deg,#f8c303 0,#effb05 100%);background-size:200%;animation:gradient 10s ease infinite}.reward-list-item .reward-list-item-name{font-size:1.2rem;font-weight:900;color:#000;line-height:1;margin-bottom:1rem}.reward-list-item .reward-list-bottom-group{display:flex;align-items:center;justify-content:space-between}.reward-list-item .reward-list-item-money{padding:4px;font-size:12px;color:#000;font-weight:700;line-height:1;border-radius:4px;margin-right:4px;white-space:nowrap}.reward-list-item .reward-list-item-time{font-size:12px;color:#000;white-space:nowrap}.author-content-item.careers{min-height:400px}.author-content-item.careers .careers-group{margin-top:12px}.author-content-item.careers .careers-item{display:flex;align-items:center}.author-content-item.careers .careers-item .circle{width:16px;height:16px;margin-right:8px;border-radius:16px}.author-content-item.careers .careers-item{display:flex;align-items:center}.author-content-item.careers .careers-item .circle{width:16px;height:16px;margin-right:8px;border-radius:16px}.author-content-item.careers img{position:absolute;left:0;bottom:20px;width:100%;transition:.6s}.loading-bar{position:absolute;top:50%;left:50%;width:500px;height:62.5px;transform:translate(-25%,-50%) scale(.5);transition:all .5s;user-select:none;overflow:hidden}.loading-bar img{position:absolute;top:500px;left:0;filter:drop-shadow(0 -500px 0 pink)}.loading-bar::after{content:"";position:absolute;top:500px;left:0;filter:drop-shadow(0 -500px 0 #ff3456);width:500px;height:62.5px;background:url(https://bu.dusays.com/2022/11/17/6375f5574f516.png) no-repeat left 100%;background-size:500px 62.5px;background-position-x:0}.author-content-item.game-yuanshen:hover .loading-bar::after{animation:loading-bar 3.5s cubic-bezier(.28,.11,.32,1) infinite forwards}@media screen and (max-width:719px){.loading-bar .loading-bar{display:none}}@media screen and (max-width:719px) and (orientation:landscape){.loading-bar .loading-bar{display:block!important;transform:translate(-50%,-50%) scale(.7)!important}}@supports not (filter:drop-shadow(0 0 0 #fff)){.loading-bar:before{content:"Your browser does not support the animation"}}@keyframes loading-bar{0%{width:0;background-size:500px 62.5px}83%{width:475px}83.1%{width:475px}83.2%{width:475px}83.3%{width:475px}83.4%{width:475px}83.5%{width:475px}83.6%{width:475px}83.7%{width:475px}83.8%{width:475px}83.9%{width:475px}84%{width:475px}85%{width:475px}86%{width:475px}87%{width:475px}100%{width:500px}}.hello-about{margin:20px auto;border-radius:24px;box-shadow:var(--roydon-box-shadow);position:relative;overflow:hidden;user-select:none}.shapes{position:relative;height:200px;width:100%;background:#3dfcffad;overflow:hidden}.shape{will-change:transform;position:absolute;border-radius:50%}.shape.shape-1{background:#115de0;width:700px;height:700px;margin:-325px 0 0 -325px}.shape.shape-2{background:#ffb3ade7;width:450px;height:450px;margin:-220px 0 0 -220px}.shape.shape-3{background:#facc61;width:280px;height:280px;margin:-135px 0 0 -135px}.hello-about .content{top:0;left:0;position:absolute;display:flex;justify-content:center;align-items:center;height:200px;width:100%;background:rgba(250,130,140,.979);mix-blend-mode:screen}[data-theme=dark] .hello-about .content{background:0 0}[data-theme=dark] .hello-about h1{color:#fff}.hello-about h1{margin:0;text-align:center;vertical-align:baseline;line-height:1;font-size:calc((.0389119683 * 100vw + (10px)));width:100%;height:100%;display:flex;align-items:center;justify-content:center}@media (min-width:419px){.hello-about h1{font-size:calc((.0389119683 * 100vw + (5px)))}}.cursor{position:absolute;background:#ff3456;width:30px;height:30px;margin:-10px 0 0 -10px;border-radius:50%;will-change:transform;user-select:none;pointer-events:none;z-index:3}::selection{color:#fff;background:#2128bd}.author-content-item.skills{display:flex;justify-content:center;align-items:flex-start;flex-direction:column;width:50%;min-height:400px}.author-content-item.skills .skills-style-group{position:relative}.author-content-item.skills .tags-group-all{display:flex;transform:rotate(0);transition:.3s}.author-content-item.skills .tags-group-wrapper{margin-top:40px;display:flex;flex-wrap:nowrap;animation:rowup 50s linear infinite}.tags-group-icon-pair{margin-left:1rem}.tags-group-icon{display:flex;align-items:center;justify-content:center;box-shadow:1px 1px 1px #000;width:120px;height:120px;border-radius:30px}.tags-group-icon img{width:80%;margin:0 auto!important}.tags-group-icon-pair .tags-group-icon:nth-child(even){margin-top:1rem;transform:translate(-60px)}.author-content-item.skills .skills-list{display:flex;opacity:0;transition:.3s;position:absolute;width:100%;top:0;left:0;flex-wrap:wrap;flex-direction:row;margin-top:10px}.author-content-item.skills .skill-info{display:flex;align-items:center;margin-right:6px;margin-top:4px;font-weight:800;background:rgba(255,192,203,.8);border-radius:40px;padding:4px 8px}.author-content-item.skills .skill-icon{width:32px;height:32px;border-radius:32px;display:flex;align-items:center;justify-content:center;margin-right:4px}.author-content-item.skills .skill-icon img{width:23px;height:23px;margin:0 auto!important}.author-content-item.skills .etc{margin-right:10px;margin-top:10px}@keyframes rowup{0%{transform:translateX(0)}100%{transform:translateX(-70%)}}.author-content-item.skills:hover .skills-style-group .tags-group-all{opacity:0}.author-content-item.skills:hover .skills-style-group .skills-list{opacity:1}#aside-content .card-archives ul.card-archive-list>.card-archive-list-item a:hover,#aside-content .card-categories ul.card-category-list>.card-category-list-item a:hover{border-radius:8px}.article-sort .article-sort-item:not(.year){background:var(--roydon-small-card-bg);margin:.5%}@media screen and (min-width:900px){.article-sort .article-sort-item:not(.year){float:left;box-shadow:var(--roydon-box-shadow);padding:5px;width:49%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;box-sizing:border-box}}.article-sort .article-sort-item .article-sort-item-info .article-meta-wrap span:not(.article-meta__link){display:block}.article-sort-item-img{border-radius:8px}.article-meta-wrap a:hover{border-radius:4px;background:rgba(255,192,203,.7);color:var(--roydon-bili-color)!important}.article-sort-item-info{width:70%}.article-sort-item-title{font-weight:700;-webkit-line-clamp:1}.article-sort-item-title:hover{color:var(--roydon-bili-color)}#catalog-bar{padding:4px 8px;border-radius:8px;display:flex;border:3px solid pink;justify-content:space-between}#catalog-bar .iconfont{font-size:14px;padding-right:4px;border-right:2px solid pink}#catalog-bar:hover{border:3px solid #f69}#catalog-bar i{line-height:inherit}#catalog-list{margin:0 .5rem;display:flex;white-space:nowrap;overflow-x:scroll}#catalog-list::-webkit-scrollbar{display:none}.catalog-list-item a{margin:0 2px;padding:6px;font-weight:700;border-radius:4px;color:var(--font-color);-webkit-transition:all .3s ease-in-out;-moz-transition:all .3s ease-in-out;-o-transition:all .3s ease-in-out;-ms-transition:all .3s ease-in-out;transition:all .3s ease-in-out}.catalog-list-item:hover a{background:pink;color:#0ff}.catalog-list-item.selected a{background:pink;color:var(--roydon-bili-color)}a.catalog-more{min-width:fit-content;font-weight:700;color:var(--font-color);padding-left:8px;border-left:2px solid pink}a.catalog-more:hover{color:var(--roydon-bili-color)}.article-sort-item-info .article-sort-item-categories .article-meta__categories{padding:2px 4px;margin:0 2px}.article-meta-wrap .article-sort-item-categories .iconfont{font-size:16px!important}.article-meta-wrap .article-sort-item-tags .iconfont{font-size:16px!important}.article-sort-item-info .article-sort-item-tags .article-meta__tags{padding:2px 4px;margin:0 2px}#page .category-lists .category-list .category-list-item{position:relative;display:inline-block;padding:0 1rem;width:49%;font-weight:700;margin:0 .5% 2%;border-radius:10px;box-shadow:rgb(135 32 32 / 30%) 50px 50px 50px 50px inset}@media (max-width:768px)]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/css/spine.css"/>
      <url>/css/spine.css</url>
      
        <content type="html"><![CDATA[/** Player **/#player-container {position: absolute;top: 0;z-index: 1;width: 100%;height: 100%;}#player-container2 {position: absolute;top: 0;z-index: 0;width: 100%;height: 100%;}.spine-player {box-sizing: border-box;width: 100%;height: 100%;background: none;}.spine-player * {box-sizing: border-box;font-family: "PT Sans", Arial, "Helvetica Neue", Helvetica, Tahoma, sans-serif;color: #dddddd;-webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;}.spine-player-error {font-size: 14px;z-index: 10;border-radius: 4px;-webkit-user-select: text;-khtml-user-select: text;-moz-user-select: text;-ms-user-select: text;user-select: text;}.spine-player-hidden {display: none;}/** Canvas **/.spine-player canvas {border-radius: 4px;}/** Slider **/.spine-player-slider {width: 100%;height: 16px;position: relative;cursor: pointer;}.spine-player-slider-value {position: absolute;bottom: 0;height: 2px;background: rgba(98, 176, 238, 0.6);cursor: pointer;}.spine-player-slider:hover .spine-player-slider-value {height: 4px;background: rgba(98, 176, 238, 1);transition: height 0.2s;}.spine-player-slider-value.hovering {height: 4px;background: rgba(98, 176, 238, 1);transition: height 0.2s;}.spine-player-slider.big {height: 12px;background: rgb(0, 0, 0);}.spine-player-slider.big .spine-player-slider-value {height: 12px;background: rgba(98, 176, 238, 1);}/** Column and row layout elements **/.spine-player-column {display: flex;flex-direction: column;}.spine-player-row {display: flex;flex-direction: row;}/** List **/.spine-player-list {list-style: none !important;padding: 0 !important;margin: 0 !important;}.spine-player-list li {cursor: pointer;margin: 8px 8px;}.spine-player-list .selectable {display: flex;flex-direction: row;margin: 0 !important;padding: 2px 20px 2px 0 !important;}.spine-player-list li.selectable:first-child {margin-top: 4px !important;}.spine-player-list li.selectable:last-child {margin-bottom: 4px !important;}.spine-player-list li.selectable:hover {background: #6e6e6e;}.spine-player-list li.selectable .selectable-circle {display: flex;flex-direction: row;width: 6px;min-width: 6px;height: 6px;border-radius: 50%;background: #fff;align-self: center;opacity: 0;margin: 5px 10px;}.spine-player-list li.selectable.selected .selectable-circle {opacity: 1;}.spine-player-list li.selectable .selectable-text {color: #aaa;}.spine-player-list li.selectable.selected .selectable-text,.spine-player-list li.selectable:hover .selectable-text {color: #ddd;}/** Switch **/.spine-player-switch {display: flex;flex-direction: row;margin: 2px 10px;}.spine-player-switch-text {flex: 1;margin-right: 8px;}.spine-player-switch-knob-area {width: 30px;/* width of the switch */height: 10px;display: block;border-radius: 5px;/* must be half of height */background: #6e6e6e;position: relative;align-self: center;justify-self: flex-end;}.spine-player-switch.active .spine-player-switch-knob-area {background: #5EAFF1;}.spine-player-switch-knob {display: block;width: 14px;height: 14px;border-radius: 50%;background: #9e9e9e;position: absolute;left: 0px;top: -2px;filter: drop-shadow(0 0 1px #333);transition: transform 0.2s;}.spine-player-switch.active .spine-player-switch-knob {background: #fff;transform: translateX(18px);transition: transform 0.2s;}/** Popup **/.spine-player-popup-parent {position: relative;}.spine-player-popup {user-select: none;position: absolute;background: rgba(0, 0, 0, 0.75);z-index: 1;right: 2px;bottom: 40px;border-radius: 4px;max-height: 400%;overflow: auto;font-size: 85%;}.spine-player-popup-title {margin: 4px 15px 2px 15px;text-align: center;}.spine-player-popup hr {margin: 0;border: 0;border-bottom: 1px solid #cccccc70;}/** Player controls **/.spine-player-controls {display: flex;flex-direction: column;position: absolute;bottom: 0;left: 0;width: 100%;opacity: 1;transition: opacity 0.4s;}.spine-player-controls-hidden {pointer-events: none;opacity: 0;transition: opacity 0.4s;}/** Player buttons **/.spine-player-buttons {display: flex;flex-direction: row;width: 100%;background: rgba(0, 0, 0, 0.5);border-bottom-left-radius: 4px;border-bottom-right-radius: 4px;padding: 2px 8px 3px;}.spine-player-button {background: none;outline: 0;border: none;width: 32px;height: 32px;background-size: 20px;background-repeat: no-repeat;background-position: center;cursor: pointer;margin-right: 3px;padding-bottom: 3px;filter: drop-shadow(0 0 1px #333);}.spine-player-button-spacer {flex: 1;}.spine-player-button-icon-play {background-image: url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2048%2048%22%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill%3A%23fff%3B%7D%3C%2Fstyle%3E%3C%2Fdefs%3E%3Ctitle%3Eplay%3C%2Ftitle%3E%3Cg%20id%3D%22play%22%3E%3Cpolygon%20class%3D%22cls-1%22%20points%3D%2243%2023.3%204%2047%204%201%2043%2023.3%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E");}.spine-player-button-icon-play:hover {background-image: url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2048%2048%22%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill%3A%2362B0EE%3B%7D%3C%2Fstyle%3E%3C%2Fdefs%3E%3Ctitle%3Eplay%3C%2Ftitle%3E%3Cg%20id%3D%22play%22%3E%3Cpolygon%20class%3D%22cls-1%22%20points%3D%2243%2023.3%204%2047%204%201%2043%2023.3%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E");}.spine-player-button-icon-play-selected {background-image: url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2048%2048%22%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill%3A%2362B0EE%3B%7D%3C%2Fstyle%3E%3C%2Fdefs%3E%3Ctitle%3Eplay%3C%2Ftitle%3E%3Cg%20id%3D%22play%22%3E%3Cpolygon%20class%3D%22cls-1%22%20points%3D%2243%2023.3%204%2047%204%201%2043%2023.3%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E");}.spine-player-button-icon-pause {background-image: url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2048%2048%22%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill%3A%23fff%3B%7D%3C%2Fstyle%3E%3C%2Fdefs%3E%3Ctitle%3Epause%3C%2Ftitle%3E%3Cg%20id%3D%22pause%22%3E%3Crect%20class%3D%22cls-1%22%20x%3D%226%22%20y%3D%221%22%20width%3D%2213%22%20height%3D%2246%22%2F%3E%3Crect%20class%3D%22cls-1%22%20x%3D%2228%22%20y%3D%221%22%20width%3D%2213%22%20height%3D%2246%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E");}.spine-player-button-icon-pause:hover {background-image: url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2048%2048%22%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill%3A%2362B0EE%3B%7D%3C%2Fstyle%3E%3C%2Fdefs%3E%3Ctitle%3Epause%3C%2Ftitle%3E%3Cg%20id%3D%22pause%22%3E%3Crect%20class%3D%22cls-1%22%20x%3D%226%22%20y%3D%221%22%20width%3D%2213%22%20height%3D%2246%22%2F%3E%3Crect%20class%3D%22cls-1%22%20x%3D%2228%22%20y%3D%221%22%20width%3D%2213%22%20height%3D%2246%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E");}.spine-player-button-icon-pause-selected {background-image: url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2048%2048%22%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill%3A%2362B0EE%3B%7D%3C%2Fstyle%3E%3C%2Fdefs%3E%3Ctitle%3Epause%3C%2Ftitle%3E%3Cg%20id%3D%22pause%22%3E%3Crect%20class%3D%22cls-1%22%20x%3D%226%22%20y%3D%221%22%20width%3D%2213%22%20height%3D%2246%22%2F%3E%3Crect%20class%3D%22cls-1%22%20x%3D%2228%22%20y%3D%221%22%20width%3D%2213%22%20height%3D%2246%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E");}.spine-player-button-icon-speed {background-image: url("data:image/svg+xml,%3Csvg%20id%3D%22playback%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2048%2048%22%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill%3A%23fff%3B%7D%3C%2Fstyle%3E%3C%2Fdefs%3E%3Ctitle%3Eplayback%3C%2Ftitle%3E%3Cpath%20class%3D%22cls-1%22%20d%3D%22M48%2C28V20l-4.7-1.18a20.16%2C20.16%2C0%2C0%2C0-2-4.81l2.49-4.15L38.14%2C4.2%2C34%2C6.69a20.16%2C20.16%2C0%2C0%2C0-4.81-2L28%2C0H20L18.82%2C4.7A20.16%2C20.16%2C0%2C0%2C0%2C14%2C6.7L9.86%2C4.2%2C4.2%2C9.86%2C6.69%2C14a20.16%2C20.16%2C0%2C0%2C0-2%2C4.81L0%2C20v8l4.7%2C1.18A20.16%2C20.16%2C0%2C0%2C0%2C6.7%2C34L4.2%2C38.14%2C9.86%2C43.8%2C14%2C41.31a20.16%2C20.16%2C0%2C0%2C0%2C4.81%2C2L20%2C48h8l1.18-4.7a20.16%2C20.16%2C0%2C0%2C0%2C4.81-2l4.15%2C2.49%2C5.66-5.66L41.31%2C34a20.16%2C20.16%2C0%2C0%2C0%2C2-4.81ZM24%2C38A14%2C14%2C0%2C1%2C1%2C38%2C24%2C14%2C14%2C0%2C0%2C1%2C24%2C38Z%22%2F%3E%3Cpolygon%20class%3D%22cls-1%22%20points%3D%2234%2024%2018%2033%2018%2015%2034%2024%2034%2024%22%2F%3E%3C%2Fsvg%3E");}.spine-player-button-icon-speed:hover {background-image: url("data:image/svg+xml,%3Csvg%20id%3D%22playback%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2048%2048%22%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill%3A%2362B0EE%3B%7D%3C%2Fstyle%3E%3C%2Fdefs%3E%3Ctitle%3Eplayback%3C%2Ftitle%3E%3Cpath%20class%3D%22cls-1%22%20d%3D%22M48%2C28V20l-4.7-1.18a20.16%2C20.16%2C0%2C0%2C0-2-4.81l2.49-4.15L38.14%2C4.2%2C34%2C6.69a20.16%2C20.16%2C0%2C0%2C0-4.81-2L28%2C0H20L18.82%2C4.7A20.16%2C20.16%2C0%2C0%2C0%2C14%2C6.7L9.86%2C4.2%2C4.2%2C9.86%2C6.69%2C14a20.16%2C20.16%2C0%2C0%2C0-2%2C4.81L0%2C20v8l4.7%2C1.18A20.16%2C20.16%2C0%2C0%2C0%2C6.7%2C34L4.2%2C38.14%2C9.86%2C43.8%2C14%2C41.31a20.16%2C20.16%2C0%2C0%2C0%2C4.81%2C2L20%2C48h8l1.18-4.7a20.16%2C20.16%2C0%2C0%2C0%2C4.81-2l4.15%2C2.49%2C5.66-5.66L41.31%2C34a20.16%2C20.16%2C0%2C0%2C0%2C2-4.81ZM24%2C38A14%2C14%2C0%2C1%2C1%2C38%2C24%2C14%2C14%2C0%2C0%2C1%2C24%2C38Z%22%2F%3E%3Cpolygon%20class%3D%22cls-1%22%20points%3D%2234%2024%2018%2033%2018%2015%2034%2024%2034%2024%22%2F%3E%3C%2Fsvg%3E");}.spine-player-button-icon-speed-selected {background-image: url("data:image/svg+xml,%3Csvg%20id%3D%22playback%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2048%2048%22%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill%3A%2362B0EE%3B%7D%3C%2Fstyle%3E%3C%2Fdefs%3E%3Ctitle%3Eplayback%3C%2Ftitle%3E%3Cpath%20class%3D%22cls-1%22%20d%3D%22M48%2C28V20l-4.7-1.18a20.16%2C20.16%2C0%2C0%2C0-2-4.81l2.49-4.15L38.14%2C4.2%2C34%2C6.69a20.16%2C20.16%2C0%2C0%2C0-4.81-2L28%2C0H20L18.82%2C4.7A20.16%2C20.16%2C0%2C0%2C0%2C14%2C6.7L9.86%2C4.2%2C4.2%2C9.86%2C6.69%2C14a20.16%2C20.16%2C0%2C0%2C0-2%2C4.81L0%2C20v8l4.7%2C1.18A20.16%2C20.16%2C0%2C0%2C0%2C6.7%2C34L4.2%2C38.14%2C9.86%2C43.8%2C14%2C41.31a20.16%2C20.16%2C0%2C0%2C0%2C4.81%2C2L20%2C48h8l1.18-4.7a20.16%2C20.16%2C0%2C0%2C0%2C4.81-2l4.15%2C2.49%2C5.66-5.66L41.31%2C34a20.16%2C20.16%2C0%2C0%2C0%2C2-4.81ZM24%2C38A14%2C14%2C0%2C1%2C1%2C38%2C24%2C14%2C14%2C0%2C0%2C1%2C24%2C38Z%22%2F%3E%3Cpolygon%20class%3D%22cls-1%22%20points%3D%2234%2024%2018%2033%2018%2015%2034%2024%2034%2024%22%2F%3E%3C%2Fsvg%3E");}.spine-player-button-icon-animations {background-image: url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2048%2048%22%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill%3A%23fff%3B%7D%3C%2Fstyle%3E%3C%2Fdefs%3E%3Ctitle%3Eanimations%3C%2Ftitle%3E%3Cg%20id%3D%22animations%22%3E%3Cpath%20class%3D%22cls-1%22%20d%3D%22M12%2C45V43.22a6.39%2C6.39%2C0%2C0%2C0%2C.63-.81%2C27.83%2C27.83%2C0%2C0%2C1%2C3.79-4.16c.93-.84%2C2.06-1.88%2C2.86-2.71a13.83%2C13.83%2C0%2C0%2C0%2C1.53-1.9l3.9-5.24c1-1.17.95-1.1%2C2.11%2C0l3%2C2.24a4%2C4%2C0%2C0%2C0-2.29%2C2.38c-1.37%2C3-2.39%2C4-2.68%2C4.22l-.23.18c-.54.39-1.81%2C1-1.7%2C1.54l.8%2C1.49a4.5%2C4.5%2C0%2C0%2C1%2C.39%2C1l.57%2C2.15a.69.69%2C0%2C0%2C0%2C.58.48c.47.08%2C1%2C.5%2C1.33.53%2C1.29.1%2C1.79%2C0%2C1.42-.54L26.7%2C42.72a.86.86%2C0%2C0%2C1-.2-.24%2C3.64%2C3.64%2C0%2C0%2C1-.42-2.2A5.39%2C5.39%2C0%2C0%2C1%2C26.61%2C39c1.84-2%2C6.74-6.36%2C6.74-6.36%2C1.71-1.81%2C1.4-2.52.81-3.84a27.38%2C27.38%2C0%2C0%2C0-2-3c-.41-.61-2.08-2.38-2.85-3.28-.43-.5.38-2.08.87-2.82.18-.12-.41.05%2C1.72.07a23.32%2C23.32%2C0%2C0%2C0%2C3.56-.19l1.63.61c.28%2C0%2C1.18-.09%2C1.31-.35l.12-.78c.18-.39.31-1.56-.05-1.75l-.6-.52a2.28%2C2.28%2C0%2C0%2C0-1.61.07l-.2.44c-.14.15-.52.37-.71.29l-2.24%2C0c-.5.12-1.18-.42-1.81-.73L32.05%2C15a8%2C8%2C0%2C0%2C0%2C.8-3.92%2C1.22%2C1.22%2C0%2C0%2C0-.28-.82%2C7.87%2C7.87%2C0%2C0%2C0-1.15-1.06l.11-.73c-.12-.49%2C1-.82%2C1.52-.82l.76-.33c.32%2C0%2C.68-.89.78-1.21L34.94%2C4a11.26%2C11.26%2C0%2C0%2C0%2C0-1.61C34.57.08%2C30.06-1.42%2C28.78%2C2c-.14.38-.62.77.34%2C3.21a1.55%2C1.55%2C0%2C0%2C1-.3%2C1.2L28.4%2C7a4%2C4%2C0%2C0%2C1-1.19.49c-.79%2C0-1.59-.75-4%2C.54C21%2C9.16%2C18.59%2C13%2C17.7%2C14.22a3.21%2C3.21%2C0%2C0%2C0-.61%2C1.58c-.05%2C1.16.7%2C3.74.87%2C5.75.13%2C1.53.21%2C2.52.72%2C3.06%2C1.07%2C1.14%2C2.1-.18%2C2.61-1a2.74%2C2.74%2C0%2C0%2C0-.14-1.86l-.74-.1c-.15-.15-.4-.42-.39-.64-.05-3.48-.22-3.14-.18-5.39%2C1.74-1.46%2C2.4-2.45%2C2.3-2-.2%2C1.15.28%2C2.83.09%2C4.35a6.46%2C6.46%2C0%2C0%2C1-.7%2C2.58s-2.11%2C4.22-2.14%2C4.27l-1.26%2C5.6-.7%2C1.44s-.71.54-1.59%2C1.21a9.67%2C9.67%2C0%2C0%2C0-2.27%2C3.18%2C20.16%2C20.16%2C0%2C0%2C1-1.42%2C2.83l-.87%2C1.31a1.72%2C1.72%2C0%2C0%2C1-.6.61l-1.83%2C1.1a1.39%2C1.39%2C0%2C0%2C0-.16.93l.68%2C1.71a4.07%2C4.07%2C0%2C0%2C1%2C.27%2C1.07l.17%2C1.56a.75.75%2C0%2C0%2C0%2C.71.59%2C18.13%2C18.13%2C0%2C0%2C0%2C3.26-.5c.27-.09-.29-.78-.53-1s-.45-.36-.45-.36A12.78%2C12.78%2C0%2C0%2C1%2C12%2C45Z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E")}.spine-player-button-icon-animations:hover {background-image: url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2048%2048%22%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill%3A%2362B0EE%3B%7D%3C%2Fstyle%3E%3C%2Fdefs%3E%3Ctitle%3Eanimations%3C%2Ftitle%3E%3Cg%20id%3D%22animations%22%3E%3Cpath%20class%3D%22cls-1%22%20d%3D%22M12%2C45V43.22a6.39%2C6.39%2C0%2C0%2C0%2C.63-.81%2C27.83%2C27.83%2C0%2C0%2C1%2C3.79-4.16c.93-.84%2C2.06-1.88%2C2.86-2.71a13.83%2C13.83%2C0%2C0%2C0%2C1.53-1.9l3.9-5.24c1-1.17.95-1.1%2C2.11%2C0l3%2C2.24a4%2C4%2C0%2C0%2C0-2.29%2C2.38c-1.37%2C3-2.39%2C4-2.68%2C4.22l-.23.18c-.54.39-1.81%2C1-1.7%2C1.54l.8%2C1.49a4.5%2C4.5%2C0%2C0%2C1%2C.39%2C1l.57%2C2.15a.69.69%2C0%2C0%2C0%2C.58.48c.47.08%2C1%2C.5%2C1.33.53%2C1.29.1%2C1.79%2C0%2C1.42-.54L26.7%2C42.72a.86.86%2C0%2C0%2C1-.2-.24%2C3.64%2C3.64%2C0%2C0%2C1-.42-2.2A5.39%2C5.39%2C0%2C0%2C1%2C26.61%2C39c1.84-2%2C6.74-6.36%2C6.74-6.36%2C1.71-1.81%2C1.4-2.52.81-3.84a27.38%2C27.38%2C0%2C0%2C0-2-3c-.41-.61-2.08-2.38-2.85-3.28-.43-.5.38-2.08.87-2.82.18-.12-.41.05%2C1.72.07a23.32%2C23.32%2C0%2C0%2C0%2C3.56-.19l1.63.61c.28%2C0%2C1.18-.09%2C1.31-.35l.12-.78c.18-.39.31-1.56-.05-1.75l-.6-.52a2.28%2C2.28%2C0%2C0%2C0-1.61.07l-.2.44c-.14.15-.52.37-.71.29l-2.24%2C0c-.5.12-1.18-.42-1.81-.73L32.05%2C15a8%2C8%2C0%2C0%2C0%2C.8-3.92%2C1.22%2C1.22%2C0%2C0%2C0-.28-.82%2C7.87%2C7.87%2C0%2C0%2C0-1.15-1.06l.11-.73c-.12-.49%2C1-.82%2C1.52-.82l.76-.33c.32%2C0%2C.68-.89.78-1.21L34.94%2C4a11.26%2C11.26%2C0%2C0%2C0%2C0-1.61C34.57.08%2C30.06-1.42%2C28.78%2C2c-.14.38-.62.77.34%2C3.21a1.55%2C1.55%2C0%2C0%2C1-.3%2C1.2L28.4%2C7a4%2C4%2C0%2C0%2C1-1.19.49c-.79%2C0-1.59-.75-4%2C.54C21%2C9.16%2C18.59%2C13%2C17.7%2C14.22a3.21%2C3.21%2C0%2C0%2C0-.61%2C1.58c-.05%2C1.16.7%2C3.74.87%2C5.75.13%2C1.53.21%2C2.52.72%2C3.06%2C1.07%2C1.14%2C2.1-.18%2C2.61-1a2.74%2C2.74%2C0%2C0%2C0-.14-1.86l-.74-.1c-.15-.15-.4-.42-.39-.64-.05-3.48-.22-3.14-.18-5.39%2C1.74-1.46%2C2.4-2.45%2C2.3-2-.2%2C1.15.28%2C2.83.09%2C4.35a6.46%2C6.46%2C0%2C0%2C1-.7%2C2.58s-2.11%2C4.22-2.14%2C4.27l-1.26%2C5.6-.7%2C1.44s-.71.54-1.59%2C1.21a9.67%2C9.67%2C0%2C0%2C0-2.27%2C3.18%2C20.16%2C20.16%2C0%2C0%2C1-1.42%2C2.83l-.87%2C1.31a1.72%2C1.72%2C0%2C0%2C1-.6.61l-1.83%2C1.1a1.39%2C1.39%2C0%2C0%2C0-.16.93l.68%2C1.71a4.07%2C4.07%2C0%2C0%2C1%2C.27%2C1.07l.17%2C1.56a.75.75%2C0%2C0%2C0%2C.71.59%2C18.13%2C18.13%2C0%2C0%2C0%2C3.26-.5c.27-.09-.29-.78-.53-1s-.45-.36-.45-.36A12.78%2C12.78%2C0%2C0%2C1%2C12%2C45Z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E")}.spine-player-button-icon-animations-selected {background-image: url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2048%2048%22%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill%3A%2362B0EE%3B%7D%3C%2Fstyle%3E%3C%2Fdefs%3E%3Ctitle%3Eanimations%3C%2Ftitle%3E%3Cg%20id%3D%22animations%22%3E%3Cpath%20class%3D%22cls-1%22%20d%3D%22M12%2C45V43.22a6.39%2C6.39%2C0%2C0%2C0%2C.63-.81%2C27.83%2C27.83%2C0%2C0%2C1%2C3.79-4.16c.93-.84%2C2.06-1.88%2C2.86-2.71a13.83%2C13.83%2C0%2C0%2C0%2C1.53-1.9l3.9-5.24c1-1.17.95-1.1%2C2.11%2C0l3%2C2.24a4%2C4%2C0%2C0%2C0-2.29%2C2.38c-1.37%2C3-2.39%2C4-2.68%2C4.22l-.23.18c-.54.39-1.81%2C1-1.7%2C1.54l.8%2C1.49a4.5%2C4.5%2C0%2C0%2C1%2C.39%2C1l.57%2C2.15a.69.69%2C0%2C0%2C0%2C.58.48c.47.08%2C1%2C.5%2C1.33.53%2C1.29.1%2C1.79%2C0%2C1.42-.54L26.7%2C42.72a.86.86%2C0%2C0%2C1-.2-.24%2C3.64%2C3.64%2C0%2C0%2C1-.42-2.2A5.39%2C5.39%2C0%2C0%2C1%2C26.61%2C39c1.84-2%2C6.74-6.36%2C6.74-6.36%2C1.71-1.81%2C1.4-2.52.81-3.84a27.38%2C27.38%2C0%2C0%2C0-2-3c-.41-.61-2.08-2.38-2.85-3.28-.43-.5.38-2.08.87-2.82.18-.12-.41.05%2C1.72.07a23.32%2C23.32%2C0%2C0%2C0%2C3.56-.19l1.63.61c.28%2C0%2C1.18-.09%2C1.31-.35l.12-.78c.18-.39.31-1.56-.05-1.75l-.6-.52a2.28%2C2.28%2C0%2C0%2C0-1.61.07l-.2.44c-.14.15-.52.37-.71.29l-2.24%2C0c-.5.12-1.18-.42-1.81-.73L32.05%2C15a8%2C8%2C0%2C0%2C0%2C.8-3.92%2C1.22%2C1.22%2C0%2C0%2C0-.28-.82%2C7.87%2C7.87%2C0%2C0%2C0-1.15-1.06l.11-.73c-.12-.49%2C1-.82%2C1.52-.82l.76-.33c.32%2C0%2C.68-.89.78-1.21L34.94%2C4a11.26%2C11.26%2C0%2C0%2C0%2C0-1.61C34.57.08%2C30.06-1.42%2C28.78%2C2c-.14.38-.62.77.34%2C3.21a1.55%2C1.55%2C0%2C0%2C1-.3%2C1.2L28.4%2C7a4%2C4%2C0%2C0%2C1-1.19.49c-.79%2C0-1.59-.75-4%2C.54C21%2C9.16%2C18.59%2C13%2C17.7%2C14.22a3.21%2C3.21%2C0%2C0%2C0-.61%2C1.58c-.05%2C1.16.7%2C3.74.87%2C5.75.13%2C1.53.21%2C2.52.72%2C3.06%2C1.07%2C1.14%2C2.1-.18%2C2.61-1a2.74%2C2.74%2C0%2C0%2C0-.14-1.86l-.74-.1c-.15-.15-.4-.42-.39-.64-.05-3.48-.22-3.14-.18-5.39%2C1.74-1.46%2C2.4-2.45%2C2.3-2-.2%2C1.15.28%2C2.83.09%2C4.35a6.46%2C6.46%2C0%2C0%2C1-.7%2C2.58s-2.11%2C4.22-2.14%2C4.27l-1.26%2C5.6-.7%2C1.44s-.71.54-1.59%2C1.21a9.67%2C9.67%2C0%2C0%2C0-2.27%2C3.18%2C20.16%2C20.16%2C0%2C0%2C1-1.42%2C2.83l-.87%2C1.31a1.72%2C1.72%2C0%2C0%2C1-.6.61l-1.83%2C1.1a1.39%2C1.39%2C0%2C0%2C0-.16.93l.68%2C1.71a4.07%2C4.07%2C0%2C0%2C1%2C.27%2C1.07l.17%2C1.56a.75.75%2C0%2C0%2C0%2C.71.59%2C18.13%2C18.13%2C0%2C0%2C0%2C3.26-.5c.27-.09-.29-.78-.53-1s-.45-.36-.45-.36A12.78%2C12.78%2C0%2C0%2C1%2C12%2C45Z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E")}.spine-player-button-icon-skins {background-image: url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2048%2048%22%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill%3A%23fff%3B%7D%3C%2Fstyle%3E%3C%2Fdefs%3E%3Ctitle%3Eskins%3C%2Ftitle%3E%3Cg%20id%3D%22skins%22%3E%3Cpath%20class%3D%22cls-1%22%20d%3D%22M36%2C12.54l-6.92%2C1-.79%2C1.2c-1%2C.25-2-.62-3-.55V12.33a1.35%2C1.35%2C0%2C0%2C1%2C.55-1.07c3-2.24%2C3.28-3.75%2C3.28-5.34A5.06%2C5.06%2C0%2C0%2C0%2C24%2C.76c-2.54%2C0-4.38.71-5.49%2C2.13a5.74%2C5.74%2C0%2C0%2C0-.9%2C4.57l2.48-.61a3.17%2C3.17%2C0%2C0%2C1%2C.45-2.4c.6-.75%2C1.75-1.13%2C3.42-1.13%2C2.56%2C0%2C2.56%2C1.24%2C2.56%2C2.56%2C0%2C.92%2C0%2C1.65-2.26%2C3.34a3.92%2C3.92%2C0%2C0%2C0-1.58%2C3.12v1.86c-1-.07-2%2C.8-3%2C.55l-.79-1.2-6.92-1c-2.25%2C0-4.35%2C2.09-5.64%2C3.93L1%2C24c3.83%2C5.11%2C10.22%2C5.11%2C10.22%2C5.11V41.93c0%2C2.34%2C2.68%2C3.88%2C5.59%2C4.86a22.59%2C22.59%2C0%2C0%2C0%2C14.37%2C0c2.91-1%2C5.59-2.52%2C5.59-4.86V29.15S43.17%2C29.15%2C47%2C24l-5.33-7.57C40.38%2C14.63%2C38.27%2C12.54%2C36%2C12.54ZM23.32%2C20.09%2C21%2C17l1.8-.6a3.79%2C3.79%2C0%2C0%2C1%2C2.4%2C0L27%2C17l-2.32%2C3.09A.85.85%2C0%2C0%2C1%2C23.32%2C20.09Z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E");width: 31px;height: 31px;}.spine-player-button-icon-skins:hover {background-image: url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2048%2048%22%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill%3A%2362B0EE%3B%7D%3C%2Fstyle%3E%3C%2Fdefs%3E%3Ctitle%3Eskins%3C%2Ftitle%3E%3Cg%20id%3D%22skins%22%3E%3Cpath%20class%3D%22cls-1%22%20d%3D%22M36%2C12.54l-6.92%2C1-.79%2C1.2c-1%2C.25-2-.62-3-.55V12.33a1.35%2C1.35%2C0%2C0%2C1%2C.55-1.07c3-2.24%2C3.28-3.75%2C3.28-5.34A5.06%2C5.06%2C0%2C0%2C0%2C24%2C.76c-2.54%2C0-4.38.71-5.49%2C2.13a5.74%2C5.74%2C0%2C0%2C0-.9%2C4.57l2.48-.61a3.17%2C3.17%2C0%2C0%2C1%2C.45-2.4c.6-.75%2C1.75-1.13%2C3.42-1.13%2C2.56%2C0%2C2.56%2C1.24%2C2.56%2C2.56%2C0%2C.92%2C0%2C1.65-2.26%2C3.34a3.92%2C3.92%2C0%2C0%2C0-1.58%2C3.12v1.86c-1-.07-2%2C.8-3%2C.55l-.79-1.2-6.92-1c-2.25%2C0-4.35%2C2.09-5.64%2C3.93L1%2C24c3.83%2C5.11%2C10.22%2C5.11%2C10.22%2C5.11V41.93c0%2C2.34%2C2.68%2C3.88%2C5.59%2C4.86a22.59%2C22.59%2C0%2C0%2C0%2C14.37%2C0c2.91-1%2C5.59-2.52%2C5.59-4.86V29.15S43.17%2C29.15%2C47%2C24l-5.33-7.57C40.38%2C14.63%2C38.27%2C12.54%2C36%2C12.54ZM23.32%2C20.09%2C21%2C17l1.8-.6a3.79%2C3.79%2C0%2C0%2C1%2C2.4%2C0L27%2C17l-2.32%2C3.09A.85.85%2C0%2C0%2C1%2C23.32%2C20.09Z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E");}.spine-player-button-icon-skins-selected {background-image: url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2048%2048%22%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill%3A%2362B0EE%3B%7D%3C%2Fstyle%3E%3C%2Fdefs%3E%3Ctitle%3Eskins%3C%2Ftitle%3E%3Cg%20id%3D%22skins%22%3E%3Cpath%20class%3D%22cls-1%22%20d%3D%22M36%2C12.54l-6.92%2C1-.79%2C1.2c-1%2C.25-2-.62-3-.55V12.33a1.35%2C1.35%2C0%2C0%2C1%2C.55-1.07c3-2.24%2C3.28-3.75%2C3.28-5.34A5.06%2C5.06%2C0%2C0%2C0%2C24%2C.76c-2.54%2C0-4.38.71-5.49%2C2.13a5.74%2C5.74%2C0%2C0%2C0-.9%2C4.57l2.48-.61a3.17%2C3.17%2C0%2C0%2C1%2C.45-2.4c.6-.75%2C1.75-1.13%2C3.42-1.13%2C2.56%2C0%2C2.56%2C1.24%2C2.56%2C2.56%2C0%2C.92%2C0%2C1.65-2.26%2C3.34a3.92%2C3.92%2C0%2C0%2C0-1.58%2C3.12v1.86c-1-.07-2%2C.8-3%2C.55l-.79-1.2-6.92-1c-2.25%2C0-4.35%2C2.09-5.64%2C3.93L1%2C24c3.83%2C5.11%2C10.22%2C5.11%2C10.22%2C5.11V41.93c0%2C2.34%2C2.68%2C3.88%2C5.59%2C4.86a22.59%2C22.59%2C0%2C0%2C0%2C14.37%2C0c2.91-1%2C5.59-2.52%2C5.59-4.86V29.15S43.17%2C29.15%2C47%2C24l-5.33-7.57C40.38%2C14.63%2C38.27%2C12.54%2C36%2C12.54ZM23.32%2C20.09%2C21%2C17l1.8-.6a3.79%2C3.79%2C0%2C0%2C1%2C2.4%2C0L27%2C17l-2.32%2C3.09A.85.85%2C0%2C0%2C1%2C23.32%2C20.09Z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E");}.spine-player-button-icon-settings {background-image: url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2048%2048%22%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill%3A%23fff%3B%7D%3C%2Fstyle%3E%3C%2Fdefs%3E%3Ctitle%3Esettings%3C%2Ftitle%3E%3Cg%20id%3D%22settings%22%3E%3Cpath%20class%3D%22cls-1%22%20d%3D%22M40%2C3H8A5%2C5%2C0%2C0%2C0%2C3%2C8V40a5%2C5%2C0%2C0%2C0%2C5%2C5H40a5%2C5%2C0%2C0%2C0%2C5-5V8A5%2C5%2C0%2C0%2C0%2C40%2C3ZM16%2C40H9V33h7Zm0-12H9V21h7Zm0-12H9V9h7ZM39%2C38H20V35H39Zm0-12H20V23H39Zm0-12H20V11H39Z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E");margin-top: 1px;}.spine-player-button-icon-settings:hover {background-image: url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2048%2048%22%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill%3A%2362B0EE%3B%7D%3C%2Fstyle%3E%3C%2Fdefs%3E%3Ctitle%3Esettings%3C%2Ftitle%3E%3Cg%20id%3D%22settings%22%3E%3Cpath%20class%3D%22cls-1%22%20d%3D%22M40%2C3H8A5%2C5%2C0%2C0%2C0%2C3%2C8V40a5%2C5%2C0%2C0%2C0%2C5%2C5H40a5%2C5%2C0%2C0%2C0%2C5-5V8A5%2C5%2C0%2C0%2C0%2C40%2C3ZM16%2C40H9V33h7Zm0-12H9V21h7Zm0-12H9V9h7ZM39%2C38H20V35H39Zm0-12H20V23H39Zm0-12H20V11H39Z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E");}.spine-player-button-icon-settings-selected {background-image: url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2048%2048%22%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill%3A%2362B0EE%3B%7D%3C%2Fstyle%3E%3C%2Fdefs%3E%3Ctitle%3Esettings%3C%2Ftitle%3E%3Cg%20id%3D%22settings%22%3E%3Cpath%20class%3D%22cls-1%22%20d%3D%22M40%2C3H8A5%2C5%2C0%2C0%2C0%2C3%2C8V40a5%2C5%2C0%2C0%2C0%2C5%2C5H40a5%2C5%2C0%2C0%2C0%2C5-5V8A5%2C5%2C0%2C0%2C0%2C40%2C3ZM16%2C40H9V33h7Zm0-12H9V21h7Zm0-12H9V9h7ZM39%2C38H20V35H39Zm0-12H20V23H39Zm0-12H20V11H39Z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E");}.spine-player-button-icon-fullscreen {background-image: url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2048%2048%22%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill%3A%23fff%3B%7D%3C%2Fstyle%3E%3C%2Fdefs%3E%3Ctitle%3Eexpand%3C%2Ftitle%3E%3Cg%20id%3D%22settings%22%3E%3Cpolygon%20class%3D%22cls-1%22%20points%3D%2230.14%208%2040%208%2040%2017.86%2044.5%2017.86%2044.5%203.5%2030.14%203.5%2030.14%208%22%2F%3E%3Cpolygon%20class%3D%22cls-1%22%20points%3D%228%2017.86%208%208%2017.86%208%2017.86%203.5%203.5%203.5%203.5%2017.86%208%2017.86%22%2F%3E%3Cpolygon%20class%3D%22cls-1%22%20points%3D%2240%2030.14%2040%2040%2030.14%2040%2030.14%2044.5%2044.5%2044.5%2044.5%2030.14%2040%2030.14%22%2F%3E%3Cpolygon%20class%3D%22cls-1%22%20points%3D%2217.86%2040%208%2040%208%2030.14%203.5%2030.14%203.5%2044.5%2017.86%2044.5%2017.86%2040%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E");margin-top: 1px;}.spine-player-button-icon-fullscreen:hover {background-image: url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2048%2048%22%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill%3A%2362B0EE%3B%7D%3C%2Fstyle%3E%3C%2Fdefs%3E%3Ctitle%3Eexpand%3C%2Ftitle%3E%3Cg%20id%3D%22settings%22%3E%3Cpolygon%20class%3D%22cls-1%22%20points%3D%2230.14%208%2040%208%2040%2017.86%2044.5%2017.86%2044.5%203.5%2030.14%203.5%2030.14%208%22%2F%3E%3Cpolygon%20class%3D%22cls-1%22%20points%3D%228%2017.86%208%208%2017.86%208%2017.86%203.5%203.5%203.5%203.5%2017.86%208%2017.86%22%2F%3E%3Cpolygon%20class%3D%22cls-1%22%20points%3D%2240%2030.14%2040%2040%2030.14%2040%2030.14%2044.5%2044.5%2044.5%2044.5%2030.14%2040%2030.14%22%2F%3E%3Cpolygon%20class%3D%22cls-1%22%20points%3D%2217.86%2040%208%2040%208%2030.14%203.5%2030.14%203.5%2044.5%2017.86%2044.5%2017.86%2040%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E");}.spine-player-button-icon-fullscreen-selected {background-image: url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2048%2048%22%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill%3A%2362B0EE%3B%7D%3C%2Fstyle%3E%3C%2Fdefs%3E%3Ctitle%3Eexpand%3C%2Ftitle%3E%3Cg%20id%3D%22settings%22%3E%3Cpolygon%20class%3D%22cls-1%22%20points%3D%2230.14%208%2040%208%2040%2017.86%2044.5%2017.86%2044.5%203.5%2030.14%203.5%2030.14%208%22%2F%3E%3Cpolygon%20class%3D%22cls-1%22%20points%3D%228%2017.86%208%208%2017.86%208%2017.86%203.5%203.5%203.5%203.5%2017.86%208%2017.86%22%2F%3E%3Cpolygon%20class%3D%22cls-1%22%20points%3D%2240%2030.14%2040%2040%2030.14%2040%2030.14%2044.5%2044.5%2044.5%2044.5%2030.14%2040%2030.14%22%2F%3E%3Cpolygon%20class%3D%22cls-1%22%20points%3D%2217.86%2040%208%2040%208%2030.14%203.5%2030.14%203.5%2044.5%2017.86%2044.5%2017.86%2040%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E");}.spine-player-button-icon-spine-logo {height: 20px;position: relative;top: 1px;margin: 0 8px !important;align-self: center;border: none !important;width: auto !important;cursor: pointer;transition: transform 0.2s;box-shadow: none !important;filter: drop-shadow(0 0 1px #333);}.spine-player-button-icon-spine-logo:hover {transform: scale(1.05);transition: transform 0.2s;}/** Speed slider **/.spine-player-speed-slider {width: 150px;}/** Player editor **/.spine-player-editor-container {display: flex;flex-direction: row;height: 100%;width: 100%;}.spine-player-editor-code {flex: 1;overflow: auto;}.spine-player-editor-player {flex: 1;border: none;background: black;}.CodeMirror {height: 100%;}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/css/winbox.css"/>
      <url>/css/winbox.css</url>
      
        <content type="html"><![CDATA[/* winbox *//* 由于全屏会出bug，所以直接给他隐藏 */.winbox {  border-radius: 24px;  overflow: hidden;  /* width: 1200px !important; */  /* top: 50% !important;  left: 50% !important;  transform: translate(-50%, -50%); */}.wb-min {  background-position: center;}.wb-body {  background: var(--roydon-card-mask);  backdrop-filter: blur(10px);}.bgbox {  display: flex;  flex-wrap: wrap;  justify-content: space-between;}.pimgbox,.imgbox,.box {  width: 15.66%;  margin: 0.5%;  background-size: cover;  border-radius: 16px;  overflow: hidden;}.pimgbox {  height: 300px;}.imgbox,.box {  height: 100px;}@media screen and (max-width: 768px) {  /* 背景 */  .pimgbox,  .imgbox,  .box {    height: 1%;    width: 48%;  }  .pimgbox {    height: 250px;  }  .imgbox,  .box {    height: 100px;  }  /* 2.0新增内容 */  .wb-min {    display: none;  }  #changeBgBox .wb-body::-webkit-scrollbar {    display: none;  }}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>日常哔哔</title>
      <link href="/essay/index.html"/>
      <url>/essay/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>朋友圈</title>
      <link href="//fcircle/index.html"/>
      <url>//fcircle/index.html</url>
      
        <content type="html"><![CDATA[<script>  window.circle_config = {    api: 'https://roydon.cloud' //你的朋友圈地址，不要加 '/'  }</script><p><script type="module" src="/js/circle-module.js"></script></p><p><link href="/css/circle.css" rel="stylesheet" /></p><p><script src="/js/circle.js" nomodule></script></p><div id="app"></div>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/changebg.js"/>
      <url>/js/changebg.js</url>
      
        <content type="html"><![CDATA[// 点击一次，节流// var jieliuFlag = true// var randomBgOrNot = false// function randomBg() {//     var randomBgOrNot = !randomBgOrNot//     saveData('randomBgOrNot', randomBgOrNot)//     if (randomBgOrNot && jieliuFlag) {//         jieliuFlag = false//         getCDNSiteBg()//         var bgindex = Math.floor(Math.random() * cdnSiteBg.length)//         //重设背景图片//         document.querySelector("#web_bg").style.backgroundImage = 'url(' + cdnSiteBg[bgindex] + ')'//         // console.log(document.querySelector("#web_bg").style.background);//         setInterval(function () {//             //获取背景图片总数，生成随机数//             var bgindex = Math.floor(Math.random() * cdnSiteBg.length)//             //重设背景图片//             document.querySelector("#web_bg").style.backgroundImage = 'url(' + cdnSiteBg[bgindex] + ')'//             // console.log(document.querySelector("#web_bg").style.background);//         }, 60000)//     } else {//         localStorage.removeItem('randomBgOrNot')//     }// }// function loadRandomBg() {//     try {//         let data = loadData('randomBgOrNot', 1440)//         if (data) {//             randomBg()//         } else {//             localStorage.removeItem('randomBgOrNot')//         }//     } catch (error) {//         localStorage.removeItem('randomBgOrNot');//     }// }// loadRandomBg()]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/circle-module.js"/>
      <url>/js/circle-module.js</url>
      
        <content type="html"><![CDATA[(function(){var t={9662:function(t,e,n){var r=n(7854),o=n(614),i=n(6330),a=r.TypeError;t.exports=function(t){if(o(t))return t;throw a(i(t)+" is not a function")}},9670:function(t,e,n){var r=n(7854),o=n(111),i=r.String,a=r.TypeError;t.exports=function(t){if(o(t))return t;throw a(i(t)+" is not an object")}},1318:function(t,e,n){var r=n(5656),o=n(1400),i=n(6244),a=function(t){return function(e,n,a){var s,c=r(e),u=i(c),l=o(a,u);if(t&&n!=n){while(u>l)if(s=c[l++],s!=s)return!0}else for(;u>l;l++)if((t||l in c)&&c[l]===n)return t||l||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},206:function(t,e,n){var r=n(1702);t.exports=r([].slice)},4326:function(t,e,n){var r=n(1702),o=r({}.toString),i=r("".slice);t.exports=function(t){return i(o(t),8,-1)}},9920:function(t,e,n){var r=n(2597),o=n(3887),i=n(1236),a=n(3070);t.exports=function(t,e,n){for(var s=o(e),c=a.f,u=i.f,l=0;l<s.length;l++){var f=s[l];r(t,f)||n&&r(n,f)||c(t,f,u(e,f))}}},8880:function(t,e,n){var r=n(9781),o=n(3070),i=n(9114);t.exports=r?function(t,e,n){return o.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},9114:function(t){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},8052:function(t,e,n){var r=n(7854),o=n(614),i=n(8880),a=n(6339),s=n(3505);t.exports=function(t,e,n,c){var u=!!c&&!!c.unsafe,l=!!c&&!!c.enumerable,f=!!c&&!!c.noTargetGet,p=c&&void 0!==c.name?c.name:e;return o(n)&&a(n,p,c),t===r?(l?t[e]=n:s(e,n),t):(u?!f&&t[e]&&(l=!0):delete t[e],l?t[e]=n:i(t,e,n),t)}},9781:function(t,e,n){var r=n(7293);t.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},317:function(t,e,n){var r=n(7854),o=n(111),i=r.document,a=o(i)&&o(i.createElement);t.exports=function(t){return a?i.createElement(t):{}}},6833:function(t,e,n){var r=n(8113);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},5268:function(t,e,n){var r=n(4326),o=n(7854);t.exports="process"==r(o.process)},8113:function(t,e,n){var r=n(5005);t.exports=r("navigator","userAgent")||""},7392:function(t,e,n){var r,o,i=n(7854),a=n(8113),s=i.process,c=i.Deno,u=s&&s.versions||c&&c.version,l=u&&u.v8;l&&(r=l.split("."),o=r[0]>0&&r[0]<4?1:+(r[0]+r[1])),!o&&a&&(r=a.match(/Edge\/(\d+)/),(!r||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/),r&&(o=+r[1]))),t.exports=o},748:function(t){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:function(t,e,n){var r=n(7854),o=n(1236).f,i=n(8880),a=n(8052),s=n(3505),c=n(9920),u=n(4705);t.exports=function(t,e){var n,l,f,p,d,v,h=t.target,m=t.global,y=t.stat;if(l=m?r:y?r[h]||s(h,{}):(r[h]||{}).prototype,l)for(f in e){if(d=e[f],t.noTargetGet?(v=o(l,f),p=v&&v.value):p=l[f],n=u(m?f:h+(y?".":"#")+f,t.forced),!n&&void 0!==p){if(typeof d==typeof p)continue;c(d,p)}(t.sham||p&&p.sham)&&i(d,"sham",!0),a(l,f,d,t)}}},7293:function(t){t.exports=function(t){try{return!!t()}catch(e){return!0}}},2104:function(t,e,n){var r=n(4374),o=Function.prototype,i=o.apply,a=o.call;t.exports="object"==typeof Reflect&&Reflect.apply||(r?a.bind(i):function(){return a.apply(i,arguments)})},9974:function(t,e,n){var r=n(1702),o=n(9662),i=n(4374),a=r(r.bind);t.exports=function(t,e){return o(t),void 0===e?t:i?a(t,e):function(){return t.apply(e,arguments)}}},4374:function(t,e,n){var r=n(7293);t.exports=!r((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},6916:function(t,e,n){var r=n(4374),o=Function.prototype.call;t.exports=r?o.bind(o):function(){return o.apply(o,arguments)}},6530:function(t,e,n){var r=n(9781),o=n(2597),i=Function.prototype,a=r&&Object.getOwnPropertyDescriptor,s=o(i,"name"),c=s&&"something"===function(){}.name,u=s&&(!r||r&&a(i,"name").configurable);t.exports={EXISTS:s,PROPER:c,CONFIGURABLE:u}},1702:function(t,e,n){var r=n(4374),o=Function.prototype,i=o.bind,a=o.call,s=r&&i.bind(a,a);t.exports=r?function(t){return t&&s(t)}:function(t){return t&&function(){return a.apply(t,arguments)}}},5005:function(t,e,n){var r=n(7854),o=n(614),i=function(t){return o(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?i(r[t]):r[t]&&r[t][e]}},8173:function(t,e,n){var r=n(9662);t.exports=function(t,e){var n=t[e];return null==n?void 0:r(n)}},7854:function(t,e,n){var r=function(t){return t&&t.Math==Math&&t};t.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},2597:function(t,e,n){var r=n(1702),o=n(7908),i=r({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return i(o(t),e)}},3501:function(t){t.exports={}},490:function(t,e,n){var r=n(5005);t.exports=r("document","documentElement")},4664:function(t,e,n){var r=n(9781),o=n(7293),i=n(317);t.exports=!r&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},8361:function(t,e,n){var r=n(7854),o=n(1702),i=n(7293),a=n(4326),s=r.Object,c=o("".split);t.exports=i((function(){return!s("z").propertyIsEnumerable(0)}))?function(t){return"String"==a(t)?c(t,""):s(t)}:s},2788:function(t,e,n){var r=n(1702),o=n(614),i=n(5465),a=r(Function.toString);o(i.inspectSource)||(i.inspectSource=function(t){return a(t)}),t.exports=i.inspectSource},9909:function(t,e,n){var r,o,i,a=n(8536),s=n(7854),c=n(1702),u=n(111),l=n(8880),f=n(2597),p=n(5465),d=n(6200),v=n(3501),h="Object already initialized",m=s.TypeError,y=s.WeakMap,g=function(t){return i(t)?o(t):r(t,{})},_=function(t){return function(e){var n;if(!u(e)||(n=o(e)).type!==t)throw m("Incompatible receiver, "+t+" required");return n}};if(a||p.state){var b=p.state||(p.state=new y),w=c(b.get),C=c(b.has),x=c(b.set);r=function(t,e){if(C(b,t))throw new m(h);return e.facade=t,x(b,t,e),e},o=function(t){return w(b,t)||{}},i=function(t){return C(b,t)}}else{var $=d("state");v[$]=!0,r=function(t,e){if(f(t,$))throw new m(h);return e.facade=t,l(t,$,e),e},o=function(t){return f(t,$)?t[$]:{}},i=function(t){return f(t,$)}}t.exports={set:r,get:o,has:i,enforce:g,getterFor:_}},614:function(t){t.exports=function(t){return"function"==typeof t}},4705:function(t,e,n){var r=n(7293),o=n(614),i=/#|\.prototype\./,a=function(t,e){var n=c[s(t)];return n==l||n!=u&&(o(e)?r(e):!!e)},s=a.normalize=function(t){return String(t).replace(i,".").toLowerCase()},c=a.data={},u=a.NATIVE="N",l=a.POLYFILL="P";t.exports=a},111:function(t,e,n){var r=n(614);t.exports=function(t){return"object"==typeof t?null!==t:r(t)}},1913:function(t){t.exports=!1},2190:function(t,e,n){var r=n(7854),o=n(5005),i=n(614),a=n(7976),s=n(3307),c=r.Object;t.exports=s?function(t){return"symbol"==typeof t}:function(t){var e=o("Symbol");return i(e)&&a(e.prototype,c(t))}},6244:function(t,e,n){var r=n(7466);t.exports=function(t){return r(t.length)}},6339:function(t,e,n){var r=n(7293),o=n(614),i=n(2597),a=n(9781),s=n(6530).CONFIGURABLE,c=n(2788),u=n(9909),l=u.enforce,f=u.get,p=Object.defineProperty,d=a&&!r((function(){return 8!==p((function(){}),"length",{value:8}).length})),v=String(String).split("String"),h=t.exports=function(t,e,n){if("Symbol("===String(e).slice(0,7)&&(e="["+String(e).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!i(t,"name")||s&&t.name!==e)&&p(t,"name",{value:e,configurable:!0}),d&&n&&i(n,"arity")&&t.length!==n.arity&&p(t,"length",{value:n.arity}),n&&i(n,"constructor")&&n.constructor){if(a)try{p(t,"prototype",{writable:!1})}catch(o){}}else t.prototype=void 0;var r=l(t);return i(r,"source")||(r.source=v.join("string"==typeof e?e:"")),t};Function.prototype.toString=h((function(){return o(this)&&f(this).source||c(this)}),"toString")},133:function(t,e,n){var r=n(7392),o=n(7293);t.exports=!!Object.getOwnPropertySymbols&&!o((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},8536:function(t,e,n){var r=n(7854),o=n(614),i=n(2788),a=r.WeakMap;t.exports=o(a)&&/native code/.test(i(a))},3070:function(t,e,n){var r=n(7854),o=n(9781),i=n(4664),a=n(3353),s=n(9670),c=n(4948),u=r.TypeError,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,p="enumerable",d="configurable",v="writable";e.f=o?a?function(t,e,n){if(s(t),e=c(e),s(n),"function"===typeof t&&"prototype"===e&&"value"in n&&v in n&&!n[v]){var r=f(t,e);r&&r[v]&&(t[e]=n.value,n={configurable:d in n?n[d]:r[d],enumerable:p in n?n[p]:r[p],writable:!1})}return l(t,e,n)}:l:function(t,e,n){if(s(t),e=c(e),s(n),i)try{return l(t,e,n)}catch(r){}if("get"in n||"set"in n)throw u("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},1236:function(t,e,n){var r=n(9781),o=n(6916),i=n(5296),a=n(9114),s=n(5656),c=n(4948),u=n(2597),l=n(4664),f=Object.getOwnPropertyDescriptor;e.f=r?f:function(t,e){if(t=s(t),e=c(e),l)try{return f(t,e)}catch(n){}if(u(t,e))return a(!o(i.f,t,e),t[e])}},8006:function(t,e,n){var r=n(6324),o=n(748),i=o.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},5181:function(t,e){e.f=Object.getOwnPropertySymbols},7976:function(t,e,n){var r=n(1702);t.exports=r({}.isPrototypeOf)},6324:function(t,e,n){var r=n(1702),o=n(2597),i=n(5656),a=n(1318).indexOf,s=n(3501),c=r([].push);t.exports=function(t,e){var n,r=i(t),u=0,l=[];for(n in r)!o(s,n)&&o(r,n)&&c(l,n);while(e.length>u)o(r,n=e[u++])&&(~a(l,n)||c(l,n));return l}},5296:function(t,e){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,o=r&&!n.call({1:2},1);e.f=o?function(t){var e=r(this,t);return!!e&&e.enumerable}:n},2140:function(t,e,n){var r=n(7854),o=n(6916),i=n(614),a=n(111),s=r.TypeError;t.exports=function(t,e){var n,r;if("string"===e&&i(n=t.toString)&&!a(r=o(n,t)))return r;if(i(n=t.valueOf)&&!a(r=o(n,t)))return r;if("string"!==e&&i(n=t.toString)&&!a(r=o(n,t)))return r;throw s("Can't convert object to primitive value")}},3887:function(t,e,n){var r=n(5005),o=n(1702),i=n(8006),a=n(5181),s=n(9670),c=o([].concat);t.exports=r("Reflect","ownKeys")||function(t){var e=i.f(s(t)),n=a.f;return n?c(e,n(t)):e}},4488:function(t,e,n){var r=n(7854),o=r.TypeError;t.exports=function(t){if(void 0==t)throw o("Can't call method on "+t);return t}},3505:function(t,e,n){var r=n(7854),o=Object.defineProperty;t.exports=function(t,e){try{o(r,t,{value:e,configurable:!0,writable:!0})}catch(n){r[t]=e}return e}},6200:function(t,e,n){var r=n(2309),o=n(9711),i=r("keys");t.exports=function(t){return i[t]||(i[t]=o(t))}},5465:function(t,e,n){var r=n(7854),o=n(3505),i="__core-js_shared__",a=r[i]||o(i,{});t.exports=a},2309:function(t,e,n){var r=n(1913),o=n(5465);(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.22.5",mode:r?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.22.5/LICENSE",source:"https://github.com/zloirock/core-js"})},261:function(t,e,n){var r,o,i,a,s=n(7854),c=n(2104),u=n(9974),l=n(614),f=n(2597),p=n(7293),d=n(490),v=n(206),h=n(317),m=n(8053),y=n(6833),g=n(5268),_=s.setImmediate,b=s.clearImmediate,w=s.process,C=s.Dispatch,x=s.Function,$=s.MessageChannel,O=s.String,k=0,A={},S="onreadystatechange";try{r=s.location}catch(P){}var j=function(t){if(f(A,t)){var e=A[t];delete A[t],e()}},E=function(t){return function(){j(t)}},T=function(t){j(t.data)},I=function(t){s.postMessage(O(t),r.protocol+"//"+r.host)};_&&b||(_=function(t){m(arguments.length,1);var e=l(t)?t:x(t),n=v(arguments,1);return A[++k]=function(){c(e,void 0,n)},o(k),k},b=function(t){delete A[t]},g?o=function(t){w.nextTick(E(t))}:C&&C.now?o=function(t){C.now(E(t))}:$&&!y?(i=new $,a=i.port2,i.port1.onmessage=T,o=u(a.postMessage,a)):s.addEventListener&&l(s.postMessage)&&!s.importScripts&&r&&"file:"!==r.protocol&&!p(I)?(o=I,s.addEventListener("message",T,!1)):o=S in h("script")?function(t){d.appendChild(h("script"))[S]=function(){d.removeChild(this),j(t)}}:function(t){setTimeout(E(t),0)}),t.exports={set:_,clear:b}},1400:function(t,e,n){var r=n(9303),o=Math.max,i=Math.min;t.exports=function(t,e){var n=r(t);return n<0?o(n+e,0):i(n,e)}},5656:function(t,e,n){var r=n(8361),o=n(4488);t.exports=function(t){return r(o(t))}},9303:function(t){var e=Math.ceil,n=Math.floor;t.exports=function(t){var r=+t;return r!==r||0===r?0:(r>0?n:e)(r)}},7466:function(t,e,n){var r=n(9303),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},7908:function(t,e,n){var r=n(7854),o=n(4488),i=r.Object;t.exports=function(t){return i(o(t))}},7593:function(t,e,n){var r=n(7854),o=n(6916),i=n(111),a=n(2190),s=n(8173),c=n(2140),u=n(5112),l=r.TypeError,f=u("toPrimitive");t.exports=function(t,e){if(!i(t)||a(t))return t;var n,r=s(t,f);if(r){if(void 0===e&&(e="default"),n=o(r,t,e),!i(n)||a(n))return n;throw l("Can't convert object to primitive value")}return void 0===e&&(e="number"),c(t,e)}},4948:function(t,e,n){var r=n(7593),o=n(2190);t.exports=function(t){var e=r(t,"string");return o(e)?e:e+""}},6330:function(t,e,n){var r=n(7854),o=r.String;t.exports=function(t){try{return o(t)}catch(e){return"Object"}}},9711:function(t,e,n){var r=n(1702),o=0,i=Math.random(),a=r(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+a(++o+i,36)}},3307:function(t,e,n){var r=n(133);t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:function(t,e,n){var r=n(9781),o=n(7293);t.exports=r&&o((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},8053:function(t,e,n){var r=n(7854),o=r.TypeError;t.exports=function(t,e){if(t<e)throw o("Not enough arguments");return t}},5112:function(t,e,n){var r=n(7854),o=n(2309),i=n(2597),a=n(9711),s=n(133),c=n(3307),u=o("wks"),l=r.Symbol,f=l&&l["for"],p=c?l:l&&l.withoutSetter||a;t.exports=function(t){if(!i(u,t)||!s&&"string"!=typeof u[t]){var e="Symbol."+t;s&&i(l,t)?u[t]=l[t]:u[t]=c&&f?f(e):p(e)}return u[t]}},1091:function(t,e,n){var r=n(2109),o=n(7854),i=n(261).clear;r({global:!0,bind:!0,enumerable:!0,forced:o.clearImmediate!==i},{clearImmediate:i})},4633:function(t,e,n){n(1091),n(2986)},2986:function(t,e,n){var r=n(2109),o=n(7854),i=n(261).set;r({global:!0,bind:!0,enumerable:!0,forced:o.setImmediate!==i},{setImmediate:i})}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}!function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}();!function(){"use strict";n(4633);var t=Object.freeze({});function e(t){return void 0===t||null===t}function r(t){return void 0!==t&&null!==t}function o(t){return!0===t}function i(t){return!1===t}function a(t){return"string"===typeof t||"number"===typeof t||"symbol"===typeof t||"boolean"===typeof t}function s(t){return null!==t&&"object"===typeof t}var c=Object.prototype.toString;function u(t){return"[object Object]"===c.call(t)}function l(t){return"[object RegExp]"===c.call(t)}function f(t){var e=parseFloat(String(t));return e>=0&&Math.floor(e)===e&&isFinite(t)}function p(t){return r(t)&&"function"===typeof t.then&&"function"===typeof t.catch}function d(t){return null==t?"":Array.isArray(t)||u(t)&&t.toString===c?JSON.stringify(t,null,2):String(t)}function v(t){var e=parseFloat(t);return isNaN(e)?t:e}function h(t,e){for(var n=Object.create(null),r=t.split(","),o=0;o<r.length;o++)n[r[o]]=!0;return e?function(t){return n[t.toLowerCase()]}:function(t){return n[t]}}h("slot,component",!0);var m=h("key,ref,slot,slot-scope,is");function y(t,e){if(t.length){var n=t.indexOf(e);if(n>-1)return t.splice(n,1)}}var g=Object.prototype.hasOwnProperty;function _(t,e){return g.call(t,e)}function b(t){var e=Object.create(null);return function(n){var r=e[n];return r||(e[n]=t(n))}}var w=/-(\w)/g,C=b((function(t){return t.replace(w,(function(t,e){return e?e.toUpperCase():""}))})),x=b((function(t){return t.charAt(0).toUpperCase()+t.slice(1)})),$=/\B([A-Z])/g,O=b((function(t){return t.replace($,"-$1").toLowerCase()}));function k(t,e){function n(n){var r=arguments.length;return r?r>1?t.apply(e,arguments):t.call(e,n):t.call(e)}return n._length=t.length,n}function A(t,e){return t.bind(e)}var S=Function.prototype.bind?A:k;function j(t,e){e=e||0;var n=t.length-e,r=new Array(n);while(n--)r[n]=t[n+e];return r}function E(t,e){for(var n in e)t[n]=e[n];return t}function T(t){for(var e={},n=0;n<t.length;n++)t[n]&&E(e,t[n]);return e}function I(t,e,n){}var P=function(t,e,n){return!1},D=function(t){return t};function N(t,e){if(t===e)return!0;var n=s(t),r=s(e);if(!n||!r)return!n&&!r&&String(t)===String(e);try{var o=Array.isArray(t),i=Array.isArray(e);if(o&&i)return t.length===e.length&&t.every((function(t,n){return N(t,e[n])}));if(t instanceof Date&&e instanceof Date)return t.getTime()===e.getTime();if(o||i)return!1;var a=Object.keys(t),c=Object.keys(e);return a.length===c.length&&a.every((function(n){return N(t[n],e[n])}))}catch(u){return!1}}function F(t,e){for(var n=0;n<t.length;n++)if(N(t[n],e))return n;return-1}function L(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}}var M="data-server-rendered",R=["component","directive","filter"],z=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],U={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:P,isReservedAttr:P,isUnknownElement:P,getTagNamespace:I,parsePlatformTagName:D,mustUseProp:P,async:!0,_lifecycleHooks:z},V=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function B(t){var e=(t+"").charCodeAt(0);return 36===e||95===e}function H(t,e,n,r){Object.defineProperty(t,e,{value:n,enumerable:!!r,writable:!0,configurable:!0})}var K=new RegExp("[^"+V.source+".$_\\d]");function W(t){if(!K.test(t)){var e=t.split(".");return function(t){for(var n=0;n<e.length;n++){if(!t)return;t=t[e[n]]}return t}}}var q,G="__proto__"in{},X="undefined"!==typeof window,Z="undefined"!==typeof WXEnvironment&&!!WXEnvironment.platform,J=Z&&WXEnvironment.platform.toLowerCase(),Y=X&&window.navigator.userAgent.toLowerCase(),Q=Y&&/msie|trident/.test(Y),tt=Y&&Y.indexOf("msie 9.0")>0,et=Y&&Y.indexOf("edge/")>0,nt=(Y&&Y.indexOf("android"),Y&&/iphone|ipad|ipod|ios/.test(Y)||"ios"===J),rt=(Y&&/chrome\/\d+/.test(Y),Y&&/phantomjs/.test(Y),Y&&Y.match(/firefox\/(\d+)/)),ot={}.watch,it=!1;if(X)try{var at={};Object.defineProperty(at,"passive",{get:function(){it=!0}}),window.addEventListener("test-passive",null,at)}catch(Ia){}var st=function(){return void 0===q&&(q=!X&&!Z&&"undefined"!==typeof n.g&&(n.g["process"]&&"server"===n.g["process"].env.VUE_ENV)),q},ct=X&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function ut(t){return"function"===typeof t&&/native code/.test(t.toString())}var lt,ft="undefined"!==typeof Symbol&&ut(Symbol)&&"undefined"!==typeof Reflect&&ut(Reflect.ownKeys);lt="undefined"!==typeof Set&&ut(Set)?Set:function(){function t(){this.set=Object.create(null)}return t.prototype.has=function(t){return!0===this.set[t]},t.prototype.add=function(t){this.set[t]=!0},t.prototype.clear=function(){this.set=Object.create(null)},t}();var pt=I,dt=0,vt=function(){this.id=dt++,this.subs=[]};vt.prototype.addSub=function(t){this.subs.push(t)},vt.prototype.removeSub=function(t){y(this.subs,t)},vt.prototype.depend=function(){vt.target&&vt.target.addDep(this)},vt.prototype.notify=function(){var t=this.subs.slice();for(var e=0,n=t.length;e<n;e++)t[e].update()},vt.target=null;var ht=[];function mt(t){ht.push(t),vt.target=t}function yt(){ht.pop(),vt.target=ht[ht.length-1]}var gt=function(t,e,n,r,o,i,a,s){this.tag=t,this.data=e,this.children=n,this.text=r,this.elm=o,this.ns=void 0,this.context=i,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=e&&e.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},_t={child:{configurable:!0}};_t.child.get=function(){return this.componentInstance},Object.defineProperties(gt.prototype,_t);var bt=function(t){void 0===t&&(t="");var e=new gt;return e.text=t,e.isComment=!0,e};function wt(t){return new gt(void 0,void 0,void 0,String(t))}function Ct(t){var e=new gt(t.tag,t.data,t.children&&t.children.slice(),t.text,t.elm,t.context,t.componentOptions,t.asyncFactory);return e.ns=t.ns,e.isStatic=t.isStatic,e.key=t.key,e.isComment=t.isComment,e.fnContext=t.fnContext,e.fnOptions=t.fnOptions,e.fnScopeId=t.fnScopeId,e.asyncMeta=t.asyncMeta,e.isCloned=!0,e}var xt=Array.prototype,$t=Object.create(xt),Ot=["push","pop","shift","unshift","splice","sort","reverse"];Ot.forEach((function(t){var e=xt[t];H($t,t,(function(){var n=[],r=arguments.length;while(r--)n[r]=arguments[r];var o,i=e.apply(this,n),a=this.__ob__;switch(t){case"push":case"unshift":o=n;break;case"splice":o=n.slice(2);break}return o&&a.observeArray(o),a.dep.notify(),i}))}));var kt=Object.getOwnPropertyNames($t),At=!0;function St(t){At=t}var jt=function(t){this.value=t,this.dep=new vt,this.vmCount=0,H(t,"__ob__",this),Array.isArray(t)?(G?Et(t,$t):Tt(t,$t,kt),this.observeArray(t)):this.walk(t)};function Et(t,e){t.__proto__=e}function Tt(t,e,n){for(var r=0,o=n.length;r<o;r++){var i=n[r];H(t,i,e[i])}}function It(t,e){var n;if(s(t)&&!(t instanceof gt))return _(t,"__ob__")&&t.__ob__ instanceof jt?n=t.__ob__:At&&!st()&&(Array.isArray(t)||u(t))&&Object.isExtensible(t)&&!t._isVue&&(n=new jt(t)),e&&n&&n.vmCount++,n}function Pt(t,e,n,r,o){var i=new vt,a=Object.getOwnPropertyDescriptor(t,e);if(!a||!1!==a.configurable){var s=a&&a.get,c=a&&a.set;s&&!c||2!==arguments.length||(n=t[e]);var u=!o&&It(n);Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){var e=s?s.call(t):n;return vt.target&&(i.depend(),u&&(u.dep.depend(),Array.isArray(e)&&Ft(e))),e},set:function(e){var r=s?s.call(t):n;e===r||e!==e&&r!==r||s&&!c||(c?c.call(t,e):n=e,u=!o&&It(e),i.notify())}})}}function Dt(t,e,n){if(Array.isArray(t)&&f(e))return t.length=Math.max(t.length,e),t.splice(e,1,n),n;if(e in t&&!(e in Object.prototype))return t[e]=n,n;var r=t.__ob__;return t._isVue||r&&r.vmCount?n:r?(Pt(r.value,e,n),r.dep.notify(),n):(t[e]=n,n)}function Nt(t,e){if(Array.isArray(t)&&f(e))t.splice(e,1);else{var n=t.__ob__;t._isVue||n&&n.vmCount||_(t,e)&&(delete t[e],n&&n.dep.notify())}}function Ft(t){for(var e=void 0,n=0,r=t.length;n<r;n++)e=t[n],e&&e.__ob__&&e.__ob__.dep.depend(),Array.isArray(e)&&Ft(e)}jt.prototype.walk=function(t){for(var e=Object.keys(t),n=0;n<e.length;n++)Pt(t,e[n])},jt.prototype.observeArray=function(t){for(var e=0,n=t.length;e<n;e++)It(t[e])};var Lt=U.optionMergeStrategies;function Mt(t,e){if(!e)return t;for(var n,r,o,i=ft?Reflect.ownKeys(e):Object.keys(e),a=0;a<i.length;a++)n=i[a],"__ob__"!==n&&(r=t[n],o=e[n],_(t,n)?r!==o&&u(r)&&u(o)&&Mt(r,o):Dt(t,n,o));return t}function Rt(t,e,n){return n?function(){var r="function"===typeof e?e.call(n,n):e,o="function"===typeof t?t.call(n,n):t;return r?Mt(r,o):o}:e?t?function(){return Mt("function"===typeof e?e.call(this,this):e,"function"===typeof t?t.call(this,this):t)}:e:t}function zt(t,e){var n=e?t?t.concat(e):Array.isArray(e)?e:[e]:t;return n?Ut(n):n}function Ut(t){for(var e=[],n=0;n<t.length;n++)-1===e.indexOf(t[n])&&e.push(t[n]);return e}function Vt(t,e,n,r){var o=Object.create(t||null);return e?E(o,e):o}Lt.data=function(t,e,n){return n?Rt(t,e,n):e&&"function"!==typeof e?t:Rt(t,e)},z.forEach((function(t){Lt[t]=zt})),R.forEach((function(t){Lt[t+"s"]=Vt})),Lt.watch=function(t,e,n,r){if(t===ot&&(t=void 0),e===ot&&(e=void 0),!e)return Object.create(t||null);if(!t)return e;var o={};for(var i in E(o,t),e){var a=o[i],s=e[i];a&&!Array.isArray(a)&&(a=[a]),o[i]=a?a.concat(s):Array.isArray(s)?s:[s]}return o},Lt.props=Lt.methods=Lt.inject=Lt.computed=function(t,e,n,r){if(!t)return e;var o=Object.create(null);return E(o,t),e&&E(o,e),o},Lt.provide=Rt;var Bt=function(t,e){return void 0===e?t:e};function Ht(t,e){var n=t.props;if(n){var r,o,i,a={};if(Array.isArray(n)){r=n.length;while(r--)o=n[r],"string"===typeof o&&(i=C(o),a[i]={type:null})}else if(u(n))for(var s in n)o=n[s],i=C(s),a[i]=u(o)?o:{type:o};else 0;t.props=a}}function Kt(t,e){var n=t.inject;if(n){var r=t.inject={};if(Array.isArray(n))for(var o=0;o<n.length;o++)r[n[o]]={from:n[o]};else if(u(n))for(var i in n){var a=n[i];r[i]=u(a)?E({from:i},a):{from:a}}else 0}}function Wt(t){var e=t.directives;if(e)for(var n in e){var r=e[n];"function"===typeof r&&(e[n]={bind:r,update:r})}}function qt(t,e,n){if("function"===typeof e&&(e=e.options),Ht(e,n),Kt(e,n),Wt(e),!e._base&&(e.extends&&(t=qt(t,e.extends,n)),e.mixins))for(var r=0,o=e.mixins.length;r<o;r++)t=qt(t,e.mixins[r],n);var i,a={};for(i in t)s(i);for(i in e)_(t,i)||s(i);function s(r){var o=Lt[r]||Bt;a[r]=o(t[r],e[r],n,r)}return a}function Gt(t,e,n,r){if("string"===typeof n){var o=t[e];if(_(o,n))return o[n];var i=C(n);if(_(o,i))return o[i];var a=x(i);if(_(o,a))return o[a];var s=o[n]||o[i]||o[a];return s}}function Xt(t,e,n,r){var o=e[t],i=!_(n,t),a=n[t],s=te(Boolean,o.type);if(s>-1)if(i&&!_(o,"default"))a=!1;else if(""===a||a===O(t)){var c=te(String,o.type);(c<0||s<c)&&(a=!0)}if(void 0===a){a=Zt(r,o,t);var u=At;St(!0),It(a),St(u)}return a}function Zt(t,e,n){if(_(e,"default")){var r=e.default;return t&&t.$options.propsData&&void 0===t.$options.propsData[n]&&void 0!==t._props[n]?t._props[n]:"function"===typeof r&&"Function"!==Yt(e.type)?r.call(t):r}}var Jt=/^\s*function (\w+)/;function Yt(t){var e=t&&t.toString().match(Jt);return e?e[1]:""}function Qt(t,e){return Yt(t)===Yt(e)}function te(t,e){if(!Array.isArray(e))return Qt(e,t)?0:-1;for(var n=0,r=e.length;n<r;n++)if(Qt(e[n],t))return n;return-1}function ee(t,e,n){mt();try{if(e){var r=e;while(r=r.$parent){var o=r.$options.errorCaptured;if(o)for(var i=0;i<o.length;i++)try{var a=!1===o[i].call(r,t,e,n);if(a)return}catch(Ia){re(Ia,r,"errorCaptured hook")}}}re(t,e,n)}finally{yt()}}function ne(t,e,n,r,o){var i;try{i=n?t.apply(e,n):t.call(e),i&&!i._isVue&&p(i)&&!i._handled&&(i.catch((function(t){return ee(t,r,o+" (Promise/async)")})),i._handled=!0)}catch(Ia){ee(Ia,r,o)}return i}function re(t,e,n){if(U.errorHandler)try{return U.errorHandler.call(null,t,e,n)}catch(Ia){Ia!==t&&oe(Ia,null,"config.errorHandler")}oe(t,e,n)}function oe(t,e,n){if(!X&&!Z||"undefined"===typeof console)throw t;console.error(t)}var ie,ae=!1,se=[],ce=!1;function ue(){ce=!1;var t=se.slice(0);se.length=0;for(var e=0;e<t.length;e++)t[e]()}if("undefined"!==typeof Promise&&ut(Promise)){var le=Promise.resolve();ie=function(){le.then(ue),nt&&setTimeout(I)},ae=!0}else if(Q||"undefined"===typeof MutationObserver||!ut(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())ie="undefined"!==typeof setImmediate&&ut(setImmediate)?function(){setImmediate(ue)}:function(){setTimeout(ue,0)};else{var fe=1,pe=new MutationObserver(ue),de=document.createTextNode(String(fe));pe.observe(de,{characterData:!0}),ie=function(){fe=(fe+1)%2,de.data=String(fe)},ae=!0}function ve(t,e){var n;if(se.push((function(){if(t)try{t.call(e)}catch(Ia){ee(Ia,e,"nextTick")}else n&&n(e)})),ce||(ce=!0,ie()),!t&&"undefined"!==typeof Promise)return new Promise((function(t){n=t}))}var he=new lt;function me(t){ye(t,he),he.clear()}function ye(t,e){var n,r,o=Array.isArray(t);if(!(!o&&!s(t)||Object.isFrozen(t)||t instanceof gt)){if(t.__ob__){var i=t.__ob__.dep.id;if(e.has(i))return;e.add(i)}if(o){n=t.length;while(n--)ye(t[n],e)}else{r=Object.keys(t),n=r.length;while(n--)ye(t[r[n]],e)}}}var ge=b((function(t){var e="&"===t.charAt(0);t=e?t.slice(1):t;var n="~"===t.charAt(0);t=n?t.slice(1):t;var r="!"===t.charAt(0);return t=r?t.slice(1):t,{name:t,once:n,capture:r,passive:e}}));function _e(t,e){function n(){var t=arguments,r=n.fns;if(!Array.isArray(r))return ne(r,null,arguments,e,"v-on handler");for(var o=r.slice(),i=0;i<o.length;i++)ne(o[i],null,t,e,"v-on handler")}return n.fns=t,n}function be(t,n,r,i,a,s){var c,u,l,f;for(c in t)u=t[c],l=n[c],f=ge(c),e(u)||(e(l)?(e(u.fns)&&(u=t[c]=_e(u,s)),o(f.once)&&(u=t[c]=a(f.name,u,f.capture)),r(f.name,u,f.capture,f.passive,f.params)):u!==l&&(l.fns=u,t[c]=l));for(c in n)e(t[c])&&(f=ge(c),i(f.name,n[c],f.capture))}function we(t,n,i){var a;t instanceof gt&&(t=t.data.hook||(t.data.hook={}));var s=t[n];function c(){i.apply(this,arguments),y(a.fns,c)}e(s)?a=_e([c]):r(s.fns)&&o(s.merged)?(a=s,a.fns.push(c)):a=_e([s,c]),a.merged=!0,t[n]=a}function Ce(t,n,o){var i=n.options.props;if(!e(i)){var a={},s=t.attrs,c=t.props;if(r(s)||r(c))for(var u in i){var l=O(u);xe(a,c,u,l,!0)||xe(a,s,u,l,!1)}return a}}function xe(t,e,n,o,i){if(r(e)){if(_(e,n))return t[n]=e[n],i||delete e[n],!0;if(_(e,o))return t[n]=e[o],i||delete e[o],!0}return!1}function $e(t){for(var e=0;e<t.length;e++)if(Array.isArray(t[e]))return Array.prototype.concat.apply([],t);return t}function Oe(t){return a(t)?[wt(t)]:Array.isArray(t)?Ae(t):void 0}function ke(t){return r(t)&&r(t.text)&&i(t.isComment)}function Ae(t,n){var i,s,c,u,l=[];for(i=0;i<t.length;i++)s=t[i],e(s)||"boolean"===typeof s||(c=l.length-1,u=l[c],Array.isArray(s)?s.length>0&&(s=Ae(s,(n||"")+"_"+i),ke(s[0])&&ke(u)&&(l[c]=wt(u.text+s[0].text),s.shift()),l.push.apply(l,s)):a(s)?ke(u)?l[c]=wt(u.text+s):""!==s&&l.push(wt(s)):ke(s)&&ke(u)?l[c]=wt(u.text+s.text):(o(t._isVList)&&r(s.tag)&&e(s.key)&&r(n)&&(s.key="__vlist"+n+"_"+i+"__"),l.push(s)));return l}function Se(t){var e=t.$options.provide;e&&(t._provided="function"===typeof e?e.call(t):e)}function je(t){var e=Ee(t.$options.inject,t);e&&(St(!1),Object.keys(e).forEach((function(n){Pt(t,n,e[n])})),St(!0))}function Ee(t,e){if(t){for(var n=Object.create(null),r=ft?Reflect.ownKeys(t):Object.keys(t),o=0;o<r.length;o++){var i=r[o];if("__ob__"!==i){var a=t[i].from,s=e;while(s){if(s._provided&&_(s._provided,a)){n[i]=s._provided[a];break}s=s.$parent}if(!s)if("default"in t[i]){var c=t[i].default;n[i]="function"===typeof c?c.call(e):c}else 0}}return n}}function Te(t,e){if(!t||!t.length)return{};for(var n={},r=0,o=t.length;r<o;r++){var i=t[r],a=i.data;if(a&&a.attrs&&a.attrs.slot&&delete a.attrs.slot,i.context!==e&&i.fnContext!==e||!a||null==a.slot)(n.default||(n.default=[])).push(i);else{var s=a.slot,c=n[s]||(n[s]=[]);"template"===i.tag?c.push.apply(c,i.children||[]):c.push(i)}}for(var u in n)n[u].every(Ie)&&delete n[u];return n}function Ie(t){return t.isComment&&!t.asyncFactory||" "===t.text}function Pe(t){return t.isComment&&t.asyncFactory}function De(e,n,r){var o,i=Object.keys(n).length>0,a=e?!!e.$stable:!i,s=e&&e.$key;if(e){if(e._normalized)return e._normalized;if(a&&r&&r!==t&&s===r.$key&&!i&&!r.$hasNormal)return r;for(var c in o={},e)e[c]&&"$"!==c[0]&&(o[c]=Ne(n,c,e[c]))}else o={};for(var u in n)u in o||(o[u]=Fe(n,u));return e&&Object.isExtensible(e)&&(e._normalized=o),H(o,"$stable",a),H(o,"$key",s),H(o,"$hasNormal",i),o}function Ne(t,e,n){var r=function(){var t=arguments.length?n.apply(null,arguments):n({});t=t&&"object"===typeof t&&!Array.isArray(t)?[t]:Oe(t);var e=t&&t[0];return t&&(!e||1===t.length&&e.isComment&&!Pe(e))?void 0:t};return n.proxy&&Object.defineProperty(t,e,{get:r,enumerable:!0,configurable:!0}),r}function Fe(t,e){return function(){return t[e]}}function Le(t,e){var n,o,i,a,c;if(Array.isArray(t)||"string"===typeof t)for(n=new Array(t.length),o=0,i=t.length;o<i;o++)n[o]=e(t[o],o);else if("number"===typeof t)for(n=new Array(t),o=0;o<t;o++)n[o]=e(o+1,o);else if(s(t))if(ft&&t[Symbol.iterator]){n=[];var u=t[Symbol.iterator](),l=u.next();while(!l.done)n.push(e(l.value,n.length)),l=u.next()}else for(a=Object.keys(t),n=new Array(a.length),o=0,i=a.length;o<i;o++)c=a[o],n[o]=e(t[c],c,o);return r(n)||(n=[]),n._isVList=!0,n}function Me(t,e,n,r){var o,i=this.$scopedSlots[t];i?(n=n||{},r&&(n=E(E({},r),n)),o=i(n)||("function"===typeof e?e():e)):o=this.$slots[t]||("function"===typeof e?e():e);var a=n&&n.slot;return a?this.$createElement("template",{slot:a},o):o}function Re(t){return Gt(this.$options,"filters",t,!0)||D}function ze(t,e){return Array.isArray(t)?-1===t.indexOf(e):t!==e}function Ue(t,e,n,r,o){var i=U.keyCodes[e]||n;return o&&r&&!U.keyCodes[e]?ze(o,r):i?ze(i,t):r?O(r)!==e:void 0===t}function Ve(t,e,n,r,o){if(n)if(s(n)){var i;Array.isArray(n)&&(n=T(n));var a=function(a){if("class"===a||"style"===a||m(a))i=t;else{var s=t.attrs&&t.attrs.type;i=r||U.mustUseProp(e,s,a)?t.domProps||(t.domProps={}):t.attrs||(t.attrs={})}var c=C(a),u=O(a);if(!(c in i)&&!(u in i)&&(i[a]=n[a],o)){var l=t.on||(t.on={});l["update:"+a]=function(t){n[a]=t}}};for(var c in n)a(c)}else;return t}function Be(t,e){var n=this._staticTrees||(this._staticTrees=[]),r=n[t];return r&&!e||(r=n[t]=this.$options.staticRenderFns[t].call(this._renderProxy,null,this),Ke(r,"__static__"+t,!1)),r}function He(t,e,n){return Ke(t,"__once__"+e+(n?"_"+n:""),!0),t}function Ke(t,e,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]&&"string"!==typeof t[r]&&We(t[r],e+"_"+r,n);else We(t,e,n)}function We(t,e,n){t.isStatic=!0,t.key=e,t.isOnce=n}function qe(t,e){if(e)if(u(e)){var n=t.on=t.on?E({},t.on):{};for(var r in e){var o=n[r],i=e[r];n[r]=o?[].concat(o,i):i}}else;return t}function Ge(t,e,n,r){e=e||{$stable:!n};for(var o=0;o<t.length;o++){var i=t[o];Array.isArray(i)?Ge(i,e,n):i&&(i.proxy&&(i.fn.proxy=!0),e[i.key]=i.fn)}return r&&(e.$key=r),e}function Xe(t,e){for(var n=0;n<e.length;n+=2){var r=e[n];"string"===typeof r&&r&&(t[e[n]]=e[n+1])}return t}function Ze(t,e){return"string"===typeof t?e+t:t}function Je(t){t._o=He,t._n=v,t._s=d,t._l=Le,t._t=Me,t._q=N,t._i=F,t._m=Be,t._f=Re,t._k=Ue,t._b=Ve,t._v=wt,t._e=bt,t._u=Ge,t._g=qe,t._d=Xe,t._p=Ze}function Ye(e,n,r,i,a){var s,c=this,u=a.options;_(i,"_uid")?(s=Object.create(i),s._original=i):(s=i,i=i._original);var l=o(u._compiled),f=!l;this.data=e,this.props=n,this.children=r,this.parent=i,this.listeners=e.on||t,this.injections=Ee(u.inject,i),this.slots=function(){return c.$slots||De(e.scopedSlots,c.$slots=Te(r,i)),c.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return De(e.scopedSlots,this.slots())}}),l&&(this.$options=u,this.$slots=this.slots(),this.$scopedSlots=De(e.scopedSlots,this.$slots)),u._scopeId?this._c=function(t,e,n,r){var o=pn(s,t,e,n,r,f);return o&&!Array.isArray(o)&&(o.fnScopeId=u._scopeId,o.fnContext=i),o}:this._c=function(t,e,n,r){return pn(s,t,e,n,r,f)}}function Qe(e,n,o,i,a){var s=e.options,c={},u=s.props;if(r(u))for(var l in u)c[l]=Xt(l,u,n||t);else r(o.attrs)&&en(c,o.attrs),r(o.props)&&en(c,o.props);var f=new Ye(o,c,a,i,e),p=s.render.call(null,f._c,f);if(p instanceof gt)return tn(p,o,f.parent,s,f);if(Array.isArray(p)){for(var d=Oe(p)||[],v=new Array(d.length),h=0;h<d.length;h++)v[h]=tn(d[h],o,f.parent,s,f);return v}}function tn(t,e,n,r,o){var i=Ct(t);return i.fnContext=n,i.fnOptions=r,e.slot&&((i.data||(i.data={})).slot=e.slot),i}function en(t,e){for(var n in e)t[C(n)]=e[n]}Je(Ye.prototype);var nn={init:function(t,e){if(t.componentInstance&&!t.componentInstance._isDestroyed&&t.data.keepAlive){var n=t;nn.prepatch(n,n)}else{var r=t.componentInstance=an(t,En);r.$mount(e?t.elm:void 0,e)}},prepatch:function(t,e){var n=e.componentOptions,r=e.componentInstance=t.componentInstance;Nn(r,n.propsData,n.listeners,e,n.children)},insert:function(t){var e=t.context,n=t.componentInstance;n._isMounted||(n._isMounted=!0,Rn(n,"mounted")),t.data.keepAlive&&(e._isMounted?Yn(n):Ln(n,!0))},destroy:function(t){var e=t.componentInstance;e._isDestroyed||(t.data.keepAlive?Mn(e,!0):e.$destroy())}},rn=Object.keys(nn);function on(t,n,i,a,c){if(!e(t)){var u=i.$options._base;if(s(t)&&(t=u.extend(t)),"function"===typeof t){var l;if(e(t.cid)&&(l=t,t=Cn(l,u),void 0===t))return wn(l,n,i,a,c);n=n||{},wr(t),r(n.model)&&un(t.options,n);var f=Ce(n,t,c);if(o(t.options.functional))return Qe(t,f,n,i,a);var p=n.on;if(n.on=n.nativeOn,o(t.options.abstract)){var d=n.slot;n={},d&&(n.slot=d)}sn(n);var v=t.options.name||c,h=new gt("vue-component-"+t.cid+(v?"-"+v:""),n,void 0,void 0,void 0,i,{Ctor:t,propsData:f,listeners:p,tag:c,children:a},l);return h}}}function an(t,e){var n={_isComponent:!0,_parentVnode:t,parent:e},o=t.data.inlineTemplate;return r(o)&&(n.render=o.render,n.staticRenderFns=o.staticRenderFns),new t.componentOptions.Ctor(n)}function sn(t){for(var e=t.hook||(t.hook={}),n=0;n<rn.length;n++){var r=rn[n],o=e[r],i=nn[r];o===i||o&&o._merged||(e[r]=o?cn(i,o):i)}}function cn(t,e){var n=function(n,r){t(n,r),e(n,r)};return n._merged=!0,n}function un(t,e){var n=t.model&&t.model.prop||"value",o=t.model&&t.model.event||"input";(e.attrs||(e.attrs={}))[n]=e.model.value;var i=e.on||(e.on={}),a=i[o],s=e.model.callback;r(a)?(Array.isArray(a)?-1===a.indexOf(s):a!==s)&&(i[o]=[s].concat(a)):i[o]=s}var ln=1,fn=2;function pn(t,e,n,r,i,s){return(Array.isArray(n)||a(n))&&(i=r,r=n,n=void 0),o(s)&&(i=fn),dn(t,e,n,r,i)}function dn(t,e,n,o,i){if(r(n)&&r(n.__ob__))return bt();if(r(n)&&r(n.is)&&(e=n.is),!e)return bt();var a,s,c;(Array.isArray(o)&&"function"===typeof o[0]&&(n=n||{},n.scopedSlots={default:o[0]},o.length=0),i===fn?o=Oe(o):i===ln&&(o=$e(o)),"string"===typeof e)?(s=t.$vnode&&t.$vnode.ns||U.getTagNamespace(e),a=U.isReservedTag(e)?new gt(U.parsePlatformTagName(e),n,o,void 0,void 0,t):n&&n.pre||!r(c=Gt(t.$options,"components",e))?new gt(e,n,o,void 0,void 0,t):on(c,n,t,o,e)):a=on(e,n,t,o);return Array.isArray(a)?a:r(a)?(r(s)&&vn(a,s),r(n)&&hn(n),a):bt()}function vn(t,n,i){if(t.ns=n,"foreignObject"===t.tag&&(n=void 0,i=!0),r(t.children))for(var a=0,s=t.children.length;a<s;a++){var c=t.children[a];r(c.tag)&&(e(c.ns)||o(i)&&"svg"!==c.tag)&&vn(c,n,i)}}function hn(t){s(t.style)&&me(t.style),s(t.class)&&me(t.class)}function mn(e){e._vnode=null,e._staticTrees=null;var n=e.$options,r=e.$vnode=n._parentVnode,o=r&&r.context;e.$slots=Te(n._renderChildren,o),e.$scopedSlots=t,e._c=function(t,n,r,o){return pn(e,t,n,r,o,!1)},e.$createElement=function(t,n,r,o){return pn(e,t,n,r,o,!0)};var i=r&&r.data;Pt(e,"$attrs",i&&i.attrs||t,null,!0),Pt(e,"$listeners",n._parentListeners||t,null,!0)}var yn,gn=null;function _n(t){Je(t.prototype),t.prototype.$nextTick=function(t){return ve(t,this)},t.prototype._render=function(){var t,e=this,n=e.$options,r=n.render,o=n._parentVnode;o&&(e.$scopedSlots=De(o.data.scopedSlots,e.$slots,e.$scopedSlots)),e.$vnode=o;try{gn=e,t=r.call(e._renderProxy,e.$createElement)}catch(Ia){ee(Ia,e,"render"),t=e._vnode}finally{gn=null}return Array.isArray(t)&&1===t.length&&(t=t[0]),t instanceof gt||(t=bt()),t.parent=o,t}}function bn(t,e){return(t.__esModule||ft&&"Module"===t[Symbol.toStringTag])&&(t=t.default),s(t)?e.extend(t):t}function wn(t,e,n,r,o){var i=bt();return i.asyncFactory=t,i.asyncMeta={data:e,context:n,children:r,tag:o},i}function Cn(t,n){if(o(t.error)&&r(t.errorComp))return t.errorComp;if(r(t.resolved))return t.resolved;var i=gn;if(i&&r(t.owners)&&-1===t.owners.indexOf(i)&&t.owners.push(i),o(t.loading)&&r(t.loadingComp))return t.loadingComp;if(i&&!r(t.owners)){var a=t.owners=[i],c=!0,u=null,l=null;i.$on("hook:destroyed",(function(){return y(a,i)}));var f=function(t){for(var e=0,n=a.length;e<n;e++)a[e].$forceUpdate();t&&(a.length=0,null!==u&&(clearTimeout(u),u=null),null!==l&&(clearTimeout(l),l=null))},d=L((function(e){t.resolved=bn(e,n),c?a.length=0:f(!0)})),v=L((function(e){r(t.errorComp)&&(t.error=!0,f(!0))})),h=t(d,v);return s(h)&&(p(h)?e(t.resolved)&&h.then(d,v):p(h.component)&&(h.component.then(d,v),r(h.error)&&(t.errorComp=bn(h.error,n)),r(h.loading)&&(t.loadingComp=bn(h.loading,n),0===h.delay?t.loading=!0:u=setTimeout((function(){u=null,e(t.resolved)&&e(t.error)&&(t.loading=!0,f(!1))}),h.delay||200)),r(h.timeout)&&(l=setTimeout((function(){l=null,e(t.resolved)&&v(null)}),h.timeout)))),c=!1,t.loading?t.loadingComp:t.resolved}}function xn(t){if(Array.isArray(t))for(var e=0;e<t.length;e++){var n=t[e];if(r(n)&&(r(n.componentOptions)||Pe(n)))return n}}function $n(t){t._events=Object.create(null),t._hasHookEvent=!1;var e=t.$options._parentListeners;e&&Sn(t,e)}function On(t,e){yn.$on(t,e)}function kn(t,e){yn.$off(t,e)}function An(t,e){var n=yn;return function r(){var o=e.apply(null,arguments);null!==o&&n.$off(t,r)}}function Sn(t,e,n){yn=t,be(e,n||{},On,kn,An,t),yn=void 0}function jn(t){var e=/^hook:/;t.prototype.$on=function(t,n){var r=this;if(Array.isArray(t))for(var o=0,i=t.length;o<i;o++)r.$on(t[o],n);else(r._events[t]||(r._events[t]=[])).push(n),e.test(t)&&(r._hasHookEvent=!0);return r},t.prototype.$once=function(t,e){var n=this;function r(){n.$off(t,r),e.apply(n,arguments)}return r.fn=e,n.$on(t,r),n},t.prototype.$off=function(t,e){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(Array.isArray(t)){for(var r=0,o=t.length;r<o;r++)n.$off(t[r],e);return n}var i,a=n._events[t];if(!a)return n;if(!e)return n._events[t]=null,n;var s=a.length;while(s--)if(i=a[s],i===e||i.fn===e){a.splice(s,1);break}return n},t.prototype.$emit=function(t){var e=this,n=e._events[t];if(n){n=n.length>1?j(n):n;for(var r=j(arguments,1),o='event handler for "'+t+'"',i=0,a=n.length;i<a;i++)ne(n[i],e,r,e,o)}return e}}var En=null;function Tn(t){var e=En;return En=t,function(){En=e}}function In(t){var e=t.$options,n=e.parent;if(n&&!e.abstract){while(n.$options.abstract&&n.$parent)n=n.$parent;n.$children.push(t)}t.$parent=n,t.$root=n?n.$root:t,t.$children=[],t.$refs={},t._watcher=null,t._inactive=null,t._directInactive=!1,t._isMounted=!1,t._isDestroyed=!1,t._isBeingDestroyed=!1}function Pn(t){t.prototype._update=function(t,e){var n=this,r=n.$el,o=n._vnode,i=Tn(n);n._vnode=t,n.$el=o?n.__patch__(o,t):n.__patch__(n.$el,t,e,!1),i(),r&&(r.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},t.prototype.$forceUpdate=function(){var t=this;t._watcher&&t._watcher.update()},t.prototype.$destroy=function(){var t=this;if(!t._isBeingDestroyed){Rn(t,"beforeDestroy"),t._isBeingDestroyed=!0;var e=t.$parent;!e||e._isBeingDestroyed||t.$options.abstract||y(e.$children,t),t._watcher&&t._watcher.teardown();var n=t._watchers.length;while(n--)t._watchers[n].teardown();t._data.__ob__&&t._data.__ob__.vmCount--,t._isDestroyed=!0,t.__patch__(t._vnode,null),Rn(t,"destroyed"),t.$off(),t.$el&&(t.$el.__vue__=null),t.$vnode&&(t.$vnode.parent=null)}}}function Dn(t,e,n){var r;return t.$el=e,t.$options.render||(t.$options.render=bt),Rn(t,"beforeMount"),r=function(){t._update(t._render(),n)},new nr(t,r,I,{before:function(){t._isMounted&&!t._isDestroyed&&Rn(t,"beforeUpdate")}},!0),n=!1,null==t.$vnode&&(t._isMounted=!0,Rn(t,"mounted")),t}function Nn(e,n,r,o,i){var a=o.data.scopedSlots,s=e.$scopedSlots,c=!!(a&&!a.$stable||s!==t&&!s.$stable||a&&e.$scopedSlots.$key!==a.$key||!a&&e.$scopedSlots.$key),u=!!(i||e.$options._renderChildren||c);if(e.$options._parentVnode=o,e.$vnode=o,e._vnode&&(e._vnode.parent=o),e.$options._renderChildren=i,e.$attrs=o.data.attrs||t,e.$listeners=r||t,n&&e.$options.props){St(!1);for(var l=e._props,f=e.$options._propKeys||[],p=0;p<f.length;p++){var d=f[p],v=e.$options.props;l[d]=Xt(d,v,n,e)}St(!0),e.$options.propsData=n}r=r||t;var h=e.$options._parentListeners;e.$options._parentListeners=r,Sn(e,r,h),u&&(e.$slots=Te(i,o.context),e.$forceUpdate())}function Fn(t){while(t&&(t=t.$parent))if(t._inactive)return!0;return!1}function Ln(t,e){if(e){if(t._directInactive=!1,Fn(t))return}else if(t._directInactive)return;if(t._inactive||null===t._inactive){t._inactive=!1;for(var n=0;n<t.$children.length;n++)Ln(t.$children[n]);Rn(t,"activated")}}function Mn(t,e){if((!e||(t._directInactive=!0,!Fn(t)))&&!t._inactive){t._inactive=!0;for(var n=0;n<t.$children.length;n++)Mn(t.$children[n]);Rn(t,"deactivated")}}function Rn(t,e){mt();var n=t.$options[e],r=e+" hook";if(n)for(var o=0,i=n.length;o<i;o++)ne(n[o],t,null,t,r);t._hasHookEvent&&t.$emit("hook:"+e),yt()}var zn=[],Un=[],Vn={},Bn=!1,Hn=!1,Kn=0;function Wn(){Kn=zn.length=Un.length=0,Vn={},Bn=Hn=!1}var qn=0,Gn=Date.now;if(X&&!Q){var Xn=window.performance;Xn&&"function"===typeof Xn.now&&Gn()>document.createEvent("Event").timeStamp&&(Gn=function(){return Xn.now()})}function Zn(){var t,e;for(qn=Gn(),Hn=!0,zn.sort((function(t,e){return t.id-e.id})),Kn=0;Kn<zn.length;Kn++)t=zn[Kn],t.before&&t.before(),e=t.id,Vn[e]=null,t.run();var n=Un.slice(),r=zn.slice();Wn(),Qn(n),Jn(r),ct&&U.devtools&&ct.emit("flush")}function Jn(t){var e=t.length;while(e--){var n=t[e],r=n.vm;r._watcher===n&&r._isMounted&&!r._isDestroyed&&Rn(r,"updated")}}function Yn(t){t._inactive=!1,Un.push(t)}function Qn(t){for(var e=0;e<t.length;e++)t[e]._inactive=!0,Ln(t[e],!0)}function tr(t){var e=t.id;if(null==Vn[e]){if(Vn[e]=!0,Hn){var n=zn.length-1;while(n>Kn&&zn[n].id>t.id)n--;zn.splice(n+1,0,t)}else zn.push(t);Bn||(Bn=!0,ve(Zn))}}var er=0,nr=function(t,e,n,r,o){this.vm=t,o&&(t._watcher=this),t._watchers.push(this),r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync,this.before=r.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++er,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new lt,this.newDepIds=new lt,this.expression="","function"===typeof e?this.getter=e:(this.getter=W(e),this.getter||(this.getter=I)),this.value=this.lazy?void 0:this.get()};nr.prototype.get=function(){var t;mt(this);var e=this.vm;try{t=this.getter.call(e,e)}catch(Ia){if(!this.user)throw Ia;ee(Ia,e,'getter for watcher "'+this.expression+'"')}finally{this.deep&&me(t),yt(),this.cleanupDeps()}return t},nr.prototype.addDep=function(t){var e=t.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(t),this.depIds.has(e)||t.addSub(this))},nr.prototype.cleanupDeps=function(){var t=this.deps.length;while(t--){var e=this.deps[t];this.newDepIds.has(e.id)||e.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},nr.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():tr(this)},nr.prototype.run=function(){if(this.active){var t=this.get();if(t!==this.value||s(t)||this.deep){var e=this.value;if(this.value=t,this.user){var n='callback for watcher "'+this.expression+'"';ne(this.cb,this.vm,[t,e],this.vm,n)}else this.cb.call(this.vm,t,e)}}},nr.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},nr.prototype.depend=function(){var t=this.deps.length;while(t--)this.deps[t].depend()},nr.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||y(this.vm._watchers,this);var t=this.deps.length;while(t--)this.deps[t].removeSub(this);this.active=!1}};var rr={enumerable:!0,configurable:!0,get:I,set:I};function or(t,e,n){rr.get=function(){return this[e][n]},rr.set=function(t){this[e][n]=t},Object.defineProperty(t,n,rr)}function ir(t){t._watchers=[];var e=t.$options;e.props&&ar(t,e.props),e.methods&&vr(t,e.methods),e.data?sr(t):It(t._data={},!0),e.computed&&lr(t,e.computed),e.watch&&e.watch!==ot&&hr(t,e.watch)}function ar(t,e){var n=t.$options.propsData||{},r=t._props={},o=t.$options._propKeys=[],i=!t.$parent;i||St(!1);var a=function(i){o.push(i);var a=Xt(i,e,n,t);Pt(r,i,a),i in t||or(t,"_props",i)};for(var s in e)a(s);St(!0)}function sr(t){var e=t.$options.data;e=t._data="function"===typeof e?cr(e,t):e||{},u(e)||(e={});var n=Object.keys(e),r=t.$options.props,o=(t.$options.methods,n.length);while(o--){var i=n[o];0,r&&_(r,i)||B(i)||or(t,"_data",i)}It(e,!0)}function cr(t,e){mt();try{return t.call(e,e)}catch(Ia){return ee(Ia,e,"data()"),{}}finally{yt()}}var ur={lazy:!0};function lr(t,e){var n=t._computedWatchers=Object.create(null),r=st();for(var o in e){var i=e[o],a="function"===typeof i?i:i.get;0,r||(n[o]=new nr(t,a||I,I,ur)),o in t||fr(t,o,i)}}function fr(t,e,n){var r=!st();"function"===typeof n?(rr.get=r?pr(e):dr(n),rr.set=I):(rr.get=n.get?r&&!1!==n.cache?pr(e):dr(n.get):I,rr.set=n.set||I),Object.defineProperty(t,e,rr)}function pr(t){return function(){var e=this._computedWatchers&&this._computedWatchers[t];if(e)return e.dirty&&e.evaluate(),vt.target&&e.depend(),e.value}}function dr(t){return function(){return t.call(this,this)}}function vr(t,e){t.$options.props;for(var n in e)t[n]="function"!==typeof e[n]?I:S(e[n],t)}function hr(t,e){for(var n in e){var r=e[n];if(Array.isArray(r))for(var o=0;o<r.length;o++)mr(t,n,r[o]);else mr(t,n,r)}}function mr(t,e,n,r){return u(n)&&(r=n,n=n.handler),"string"===typeof n&&(n=t[n]),t.$watch(e,n,r)}function yr(t){var e={get:function(){return this._data}},n={get:function(){return this._props}};Object.defineProperty(t.prototype,"$data",e),Object.defineProperty(t.prototype,"$props",n),t.prototype.$set=Dt,t.prototype.$delete=Nt,t.prototype.$watch=function(t,e,n){var r=this;if(u(e))return mr(r,t,e,n);n=n||{},n.user=!0;var o=new nr(r,t,e,n);if(n.immediate){var i='callback for immediate watcher "'+o.expression+'"';mt(),ne(e,r,[o.value],r,i),yt()}return function(){o.teardown()}}}var gr=0;function _r(t){t.prototype._init=function(t){var e=this;e._uid=gr++,e._isVue=!0,t&&t._isComponent?br(e,t):e.$options=qt(wr(e.constructor),t||{},e),e._renderProxy=e,e._self=e,In(e),$n(e),mn(e),Rn(e,"beforeCreate"),je(e),ir(e),Se(e),Rn(e,"created"),e.$options.el&&e.$mount(e.$options.el)}}function br(t,e){var n=t.$options=Object.create(t.constructor.options),r=e._parentVnode;n.parent=e.parent,n._parentVnode=r;var o=r.componentOptions;n.propsData=o.propsData,n._parentListeners=o.listeners,n._renderChildren=o.children,n._componentTag=o.tag,e.render&&(n.render=e.render,n.staticRenderFns=e.staticRenderFns)}function wr(t){var e=t.options;if(t.super){var n=wr(t.super),r=t.superOptions;if(n!==r){t.superOptions=n;var o=Cr(t);o&&E(t.extendOptions,o),e=t.options=qt(n,t.extendOptions),e.name&&(e.components[e.name]=t)}}return e}function Cr(t){var e,n=t.options,r=t.sealedOptions;for(var o in n)n[o]!==r[o]&&(e||(e={}),e[o]=n[o]);return e}function xr(t){this._init(t)}function $r(t){t.use=function(t){var e=this._installedPlugins||(this._installedPlugins=[]);if(e.indexOf(t)>-1)return this;var n=j(arguments,1);return n.unshift(this),"function"===typeof t.install?t.install.apply(t,n):"function"===typeof t&&t.apply(null,n),e.push(t),this}}function Or(t){t.mixin=function(t){return this.options=qt(this.options,t),this}}function kr(t){t.cid=0;var e=1;t.extend=function(t){t=t||{};var n=this,r=n.cid,o=t._Ctor||(t._Ctor={});if(o[r])return o[r];var i=t.name||n.options.name;var a=function(t){this._init(t)};return a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.cid=e++,a.options=qt(n.options,t),a["super"]=n,a.options.props&&Ar(a),a.options.computed&&Sr(a),a.extend=n.extend,a.mixin=n.mixin,a.use=n.use,R.forEach((function(t){a[t]=n[t]})),i&&(a.options.components[i]=a),a.superOptions=n.options,a.extendOptions=t,a.sealedOptions=E({},a.options),o[r]=a,a}}function Ar(t){var e=t.options.props;for(var n in e)or(t.prototype,"_props",n)}function Sr(t){var e=t.options.computed;for(var n in e)fr(t.prototype,n,e[n])}function jr(t){R.forEach((function(e){t[e]=function(t,n){return n?("component"===e&&u(n)&&(n.name=n.name||t,n=this.options._base.extend(n)),"directive"===e&&"function"===typeof n&&(n={bind:n,update:n}),this.options[e+"s"][t]=n,n):this.options[e+"s"][t]}}))}function Er(t){return t&&(t.Ctor.options.name||t.tag)}function Tr(t,e){return Array.isArray(t)?t.indexOf(e)>-1:"string"===typeof t?t.split(",").indexOf(e)>-1:!!l(t)&&t.test(e)}function Ir(t,e){var n=t.cache,r=t.keys,o=t._vnode;for(var i in n){var a=n[i];if(a){var s=a.name;s&&!e(s)&&Pr(n,i,r,o)}}}function Pr(t,e,n,r){var o=t[e];!o||r&&o.tag===r.tag||o.componentInstance.$destroy(),t[e]=null,y(n,e)}_r(xr),yr(xr),jn(xr),Pn(xr),_n(xr);var Dr=[String,RegExp,Array],Nr={name:"keep-alive",abstract:!0,props:{include:Dr,exclude:Dr,max:[String,Number]},methods:{cacheVNode:function(){var t=this,e=t.cache,n=t.keys,r=t.vnodeToCache,o=t.keyToCache;if(r){var i=r.tag,a=r.componentInstance,s=r.componentOptions;e[o]={name:Er(s),tag:i,componentInstance:a},n.push(o),this.max&&n.length>parseInt(this.max)&&Pr(e,n[0],n,this._vnode),this.vnodeToCache=null}}},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var t in this.cache)Pr(this.cache,t,this.keys)},mounted:function(){var t=this;this.cacheVNode(),this.$watch("include",(function(e){Ir(t,(function(t){return Tr(e,t)}))})),this.$watch("exclude",(function(e){Ir(t,(function(t){return!Tr(e,t)}))}))},updated:function(){this.cacheVNode()},render:function(){var t=this.$slots.default,e=xn(t),n=e&&e.componentOptions;if(n){var r=Er(n),o=this,i=o.include,a=o.exclude;if(i&&(!r||!Tr(i,r))||a&&r&&Tr(a,r))return e;var s=this,c=s.cache,u=s.keys,l=null==e.key?n.Ctor.cid+(n.tag?"::"+n.tag:""):e.key;c[l]?(e.componentInstance=c[l].componentInstance,y(u,l),u.push(l)):(this.vnodeToCache=e,this.keyToCache=l),e.data.keepAlive=!0}return e||t&&t[0]}},Fr={KeepAlive:Nr};function Lr(t){var e={get:function(){return U}};Object.defineProperty(t,"config",e),t.util={warn:pt,extend:E,mergeOptions:qt,defineReactive:Pt},t.set=Dt,t.delete=Nt,t.nextTick=ve,t.observable=function(t){return It(t),t},t.options=Object.create(null),R.forEach((function(e){t.options[e+"s"]=Object.create(null)})),t.options._base=t,E(t.options.components,Fr),$r(t),Or(t),kr(t),jr(t)}Lr(xr),Object.defineProperty(xr.prototype,"$isServer",{get:st}),Object.defineProperty(xr.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(xr,"FunctionalRenderContext",{value:Ye}),xr.version="2.6.14";var Mr=h("style,class"),Rr=h("input,textarea,option,select,progress"),zr=function(t,e,n){return"value"===n&&Rr(t)&&"button"!==e||"selected"===n&&"option"===t||"checked"===n&&"input"===t||"muted"===n&&"video"===t},Ur=h("contenteditable,draggable,spellcheck"),Vr=h("events,caret,typing,plaintext-only"),Br=function(t,e){return Gr(e)||"false"===e?"false":"contenteditable"===t&&Vr(e)?e:"true"},Hr=h("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible"),Kr="http://www.w3.org/1999/xlink",Wr=function(t){return":"===t.charAt(5)&&"xlink"===t.slice(0,5)},qr=function(t){return Wr(t)?t.slice(6,t.length):""},Gr=function(t){return null==t||!1===t};function Xr(t){var e=t.data,n=t,o=t;while(r(o.componentInstance))o=o.componentInstance._vnode,o&&o.data&&(e=Zr(o.data,e));while(r(n=n.parent))n&&n.data&&(e=Zr(e,n.data));return Jr(e.staticClass,e.class)}function Zr(t,e){return{staticClass:Yr(t.staticClass,e.staticClass),class:r(t.class)?[t.class,e.class]:e.class}}function Jr(t,e){return r(t)||r(e)?Yr(t,Qr(e)):""}function Yr(t,e){return t?e?t+" "+e:t:e||""}function Qr(t){return Array.isArray(t)?to(t):s(t)?eo(t):"string"===typeof t?t:""}function to(t){for(var e,n="",o=0,i=t.length;o<i;o++)r(e=Qr(t[o]))&&""!==e&&(n&&(n+=" "),n+=e);return n}function eo(t){var e="";for(var n in t)t[n]&&(e&&(e+=" "),e+=n);return e}var no={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},ro=h("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),oo=h("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignobject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),io=function(t){return ro(t)||oo(t)};function ao(t){return oo(t)?"svg":"math"===t?"math":void 0}var so=Object.create(null);function co(t){if(!X)return!0;if(io(t))return!1;if(t=t.toLowerCase(),null!=so[t])return so[t];var e=document.createElement(t);return t.indexOf("-")>-1?so[t]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:so[t]=/HTMLUnknownElement/.test(e.toString())}var uo=h("text,number,password,search,email,tel,url");function lo(t){if("string"===typeof t){var e=document.querySelector(t);return e||document.createElement("div")}return t}function fo(t,e){var n=document.createElement(t);return"select"!==t||e.data&&e.data.attrs&&void 0!==e.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n}function po(t,e){return document.createElementNS(no[t],e)}function vo(t){return document.createTextNode(t)}function ho(t){return document.createComment(t)}function mo(t,e,n){t.insertBefore(e,n)}function yo(t,e){t.removeChild(e)}function go(t,e){t.appendChild(e)}function _o(t){return t.parentNode}function bo(t){return t.nextSibling}function wo(t){return t.tagName}function Co(t,e){t.textContent=e}function xo(t,e){t.setAttribute(e,"")}var $o=Object.freeze({createElement:fo,createElementNS:po,createTextNode:vo,createComment:ho,insertBefore:mo,removeChild:yo,appendChild:go,parentNode:_o,nextSibling:bo,tagName:wo,setTextContent:Co,setStyleScope:xo}),Oo={create:function(t,e){ko(e)},update:function(t,e){t.data.ref!==e.data.ref&&(ko(t,!0),ko(e))},destroy:function(t){ko(t,!0)}};function ko(t,e){var n=t.data.ref;if(r(n)){var o=t.context,i=t.componentInstance||t.elm,a=o.$refs;e?Array.isArray(a[n])?y(a[n],i):a[n]===i&&(a[n]=void 0):t.data.refInFor?Array.isArray(a[n])?a[n].indexOf(i)<0&&a[n].push(i):a[n]=[i]:a[n]=i}}var Ao=new gt("",{},[]),So=["create","activate","update","remove","destroy"];function jo(t,n){return t.key===n.key&&t.asyncFactory===n.asyncFactory&&(t.tag===n.tag&&t.isComment===n.isComment&&r(t.data)===r(n.data)&&Eo(t,n)||o(t.isAsyncPlaceholder)&&e(n.asyncFactory.error))}function Eo(t,e){if("input"!==t.tag)return!0;var n,o=r(n=t.data)&&r(n=n.attrs)&&n.type,i=r(n=e.data)&&r(n=n.attrs)&&n.type;return o===i||uo(o)&&uo(i)}function To(t,e,n){var o,i,a={};for(o=e;o<=n;++o)i=t[o].key,r(i)&&(a[i]=o);return a}function Io(t){var n,i,s={},c=t.modules,u=t.nodeOps;for(n=0;n<So.length;++n)for(s[So[n]]=[],i=0;i<c.length;++i)r(c[i][So[n]])&&s[So[n]].push(c[i][So[n]]);function l(t){return new gt(u.tagName(t).toLowerCase(),{},[],void 0,t)}function f(t,e){function n(){0===--n.listeners&&p(t)}return n.listeners=e,n}function p(t){var e=u.parentNode(t);r(e)&&u.removeChild(e,t)}function d(t,e,n,i,a,s,c){if(r(t.elm)&&r(s)&&(t=s[c]=Ct(t)),t.isRootInsert=!a,!v(t,e,n,i)){var l=t.data,f=t.children,p=t.tag;r(p)?(t.elm=t.ns?u.createElementNS(t.ns,p):u.createElement(p,t),C(t),_(t,f,e),r(l)&&w(t,e),g(n,t.elm,i)):o(t.isComment)?(t.elm=u.createComment(t.text),g(n,t.elm,i)):(t.elm=u.createTextNode(t.text),g(n,t.elm,i))}}function v(t,e,n,i){var a=t.data;if(r(a)){var s=r(t.componentInstance)&&a.keepAlive;if(r(a=a.hook)&&r(a=a.init)&&a(t,!1),r(t.componentInstance))return m(t,e),g(n,t.elm,i),o(s)&&y(t,e,n,i),!0}}function m(t,e){r(t.data.pendingInsert)&&(e.push.apply(e,t.data.pendingInsert),t.data.pendingInsert=null),t.elm=t.componentInstance.$el,b(t)?(w(t,e),C(t)):(ko(t),e.push(t))}function y(t,e,n,o){var i,a=t;while(a.componentInstance)if(a=a.componentInstance._vnode,r(i=a.data)&&r(i=i.transition)){for(i=0;i<s.activate.length;++i)s.activate[i](Ao,a);e.push(a);break}g(n,t.elm,o)}function g(t,e,n){r(t)&&(r(n)?u.parentNode(n)===t&&u.insertBefore(t,e,n):u.appendChild(t,e))}function _(t,e,n){if(Array.isArray(e)){0;for(var r=0;r<e.length;++r)d(e[r],n,t.elm,null,!0,e,r)}else a(t.text)&&u.appendChild(t.elm,u.createTextNode(String(t.text)))}function b(t){while(t.componentInstance)t=t.componentInstance._vnode;return r(t.tag)}function w(t,e){for(var o=0;o<s.create.length;++o)s.create[o](Ao,t);n=t.data.hook,r(n)&&(r(n.create)&&n.create(Ao,t),r(n.insert)&&e.push(t))}function C(t){var e;if(r(e=t.fnScopeId))u.setStyleScope(t.elm,e);else{var n=t;while(n)r(e=n.context)&&r(e=e.$options._scopeId)&&u.setStyleScope(t.elm,e),n=n.parent}r(e=En)&&e!==t.context&&e!==t.fnContext&&r(e=e.$options._scopeId)&&u.setStyleScope(t.elm,e)}function x(t,e,n,r,o,i){for(;r<=o;++r)d(n[r],i,t,e,!1,n,r)}function $(t){var e,n,o=t.data;if(r(o))for(r(e=o.hook)&&r(e=e.destroy)&&e(t),e=0;e<s.destroy.length;++e)s.destroy[e](t);if(r(e=t.children))for(n=0;n<t.children.length;++n)$(t.children[n])}function O(t,e,n){for(;e<=n;++e){var o=t[e];r(o)&&(r(o.tag)?(k(o),$(o)):p(o.elm))}}function k(t,e){if(r(e)||r(t.data)){var n,o=s.remove.length+1;for(r(e)?e.listeners+=o:e=f(t.elm,o),r(n=t.componentInstance)&&r(n=n._vnode)&&r(n.data)&&k(n,e),n=0;n<s.remove.length;++n)s.remove[n](t,e);r(n=t.data.hook)&&r(n=n.remove)?n(t,e):e()}else p(t.elm)}function A(t,n,o,i,a){var s,c,l,f,p=0,v=0,h=n.length-1,m=n[0],y=n[h],g=o.length-1,_=o[0],b=o[g],w=!a;while(p<=h&&v<=g)e(m)?m=n[++p]:e(y)?y=n[--h]:jo(m,_)?(j(m,_,i,o,v),m=n[++p],_=o[++v]):jo(y,b)?(j(y,b,i,o,g),y=n[--h],b=o[--g]):jo(m,b)?(j(m,b,i,o,g),w&&u.insertBefore(t,m.elm,u.nextSibling(y.elm)),m=n[++p],b=o[--g]):jo(y,_)?(j(y,_,i,o,v),w&&u.insertBefore(t,y.elm,m.elm),y=n[--h],_=o[++v]):(e(s)&&(s=To(n,p,h)),c=r(_.key)?s[_.key]:S(_,n,p,h),e(c)?d(_,i,t,m.elm,!1,o,v):(l=n[c],jo(l,_)?(j(l,_,i,o,v),n[c]=void 0,w&&u.insertBefore(t,l.elm,m.elm)):d(_,i,t,m.elm,!1,o,v)),_=o[++v]);p>h?(f=e(o[g+1])?null:o[g+1].elm,x(t,f,o,v,g,i)):v>g&&O(n,p,h)}function S(t,e,n,o){for(var i=n;i<o;i++){var a=e[i];if(r(a)&&jo(t,a))return i}}function j(t,n,i,a,c,l){if(t!==n){r(n.elm)&&r(a)&&(n=a[c]=Ct(n));var f=n.elm=t.elm;if(o(t.isAsyncPlaceholder))r(n.asyncFactory.resolved)?I(t.elm,n,i):n.isAsyncPlaceholder=!0;else if(o(n.isStatic)&&o(t.isStatic)&&n.key===t.key&&(o(n.isCloned)||o(n.isOnce)))n.componentInstance=t.componentInstance;else{var p,d=n.data;r(d)&&r(p=d.hook)&&r(p=p.prepatch)&&p(t,n);var v=t.children,h=n.children;if(r(d)&&b(n)){for(p=0;p<s.update.length;++p)s.update[p](t,n);r(p=d.hook)&&r(p=p.update)&&p(t,n)}e(n.text)?r(v)&&r(h)?v!==h&&A(f,v,h,i,l):r(h)?(r(t.text)&&u.setTextContent(f,""),x(f,null,h,0,h.length-1,i)):r(v)?O(v,0,v.length-1):r(t.text)&&u.setTextContent(f,""):t.text!==n.text&&u.setTextContent(f,n.text),r(d)&&r(p=d.hook)&&r(p=p.postpatch)&&p(t,n)}}}function E(t,e,n){if(o(n)&&r(t.parent))t.parent.data.pendingInsert=e;else for(var i=0;i<e.length;++i)e[i].data.hook.insert(e[i])}var T=h("attrs,class,staticClass,staticStyle,key");function I(t,e,n,i){var a,s=e.tag,c=e.data,u=e.children;if(i=i||c&&c.pre,e.elm=t,o(e.isComment)&&r(e.asyncFactory))return e.isAsyncPlaceholder=!0,!0;if(r(c)&&(r(a=c.hook)&&r(a=a.init)&&a(e,!0),r(a=e.componentInstance)))return m(e,n),!0;if(r(s)){if(r(u))if(t.hasChildNodes())if(r(a=c)&&r(a=a.domProps)&&r(a=a.innerHTML)){if(a!==t.innerHTML)return!1}else{for(var l=!0,f=t.firstChild,p=0;p<u.length;p++){if(!f||!I(f,u[p],n,i)){l=!1;break}f=f.nextSibling}if(!l||f)return!1}else _(e,u,n);if(r(c)){var d=!1;for(var v in c)if(!T(v)){d=!0,w(e,n);break}!d&&c["class"]&&me(c["class"])}}else t.data!==e.text&&(t.data=e.text);return!0}return function(t,n,i,a){if(!e(n)){var c=!1,f=[];if(e(t))c=!0,d(n,f);else{var p=r(t.nodeType);if(!p&&jo(t,n))j(t,n,f,null,null,a);else{if(p){if(1===t.nodeType&&t.hasAttribute(M)&&(t.removeAttribute(M),i=!0),o(i)&&I(t,n,f))return E(n,f,!0),t;t=l(t)}var v=t.elm,h=u.parentNode(v);if(d(n,f,v._leaveCb?null:h,u.nextSibling(v)),r(n.parent)){var m=n.parent,y=b(n);while(m){for(var g=0;g<s.destroy.length;++g)s.destroy[g](m);if(m.elm=n.elm,y){for(var _=0;_<s.create.length;++_)s.create[_](Ao,m);var w=m.data.hook.insert;if(w.merged)for(var C=1;C<w.fns.length;C++)w.fns[C]()}else ko(m);m=m.parent}}r(h)?O([t],0,0):r(t.tag)&&$(t)}}return E(n,f,c),n.elm}r(t)&&$(t)}}var Po={create:Do,update:Do,destroy:function(t){Do(t,Ao)}};function Do(t,e){(t.data.directives||e.data.directives)&&No(t,e)}function No(t,e){var n,r,o,i=t===Ao,a=e===Ao,s=Lo(t.data.directives,t.context),c=Lo(e.data.directives,e.context),u=[],l=[];for(n in c)r=s[n],o=c[n],r?(o.oldValue=r.value,o.oldArg=r.arg,Ro(o,"update",e,t),o.def&&o.def.componentUpdated&&l.push(o)):(Ro(o,"bind",e,t),o.def&&o.def.inserted&&u.push(o));if(u.length){var f=function(){for(var n=0;n<u.length;n++)Ro(u[n],"inserted",e,t)};i?we(e,"insert",f):f()}if(l.length&&we(e,"postpatch",(function(){for(var n=0;n<l.length;n++)Ro(l[n],"componentUpdated",e,t)})),!i)for(n in s)c[n]||Ro(s[n],"unbind",t,t,a)}var Fo=Object.create(null);function Lo(t,e){var n,r,o=Object.create(null);if(!t)return o;for(n=0;n<t.length;n++)r=t[n],r.modifiers||(r.modifiers=Fo),o[Mo(r)]=r,r.def=Gt(e.$options,"directives",r.name,!0);return o}function Mo(t){return t.rawName||t.name+"."+Object.keys(t.modifiers||{}).join(".")}function Ro(t,e,n,r,o){var i=t.def&&t.def[e];if(i)try{i(n.elm,t,n,r,o)}catch(Ia){ee(Ia,n.context,"directive "+t.name+" "+e+" hook")}}var zo=[Oo,Po];function Uo(t,n){var o=n.componentOptions;if((!r(o)||!1!==o.Ctor.options.inheritAttrs)&&(!e(t.data.attrs)||!e(n.data.attrs))){var i,a,s,c=n.elm,u=t.data.attrs||{},l=n.data.attrs||{};for(i in r(l.__ob__)&&(l=n.data.attrs=E({},l)),l)a=l[i],s=u[i],s!==a&&Vo(c,i,a,n.data.pre);for(i in(Q||et)&&l.value!==u.value&&Vo(c,"value",l.value),u)e(l[i])&&(Wr(i)?c.removeAttributeNS(Kr,qr(i)):Ur(i)||c.removeAttribute(i))}}function Vo(t,e,n,r){r||t.tagName.indexOf("-")>-1?Bo(t,e,n):Hr(e)?Gr(n)?t.removeAttribute(e):(n="allowfullscreen"===e&&"EMBED"===t.tagName?"true":e,t.setAttribute(e,n)):Ur(e)?t.setAttribute(e,Br(e,n)):Wr(e)?Gr(n)?t.removeAttributeNS(Kr,qr(e)):t.setAttributeNS(Kr,e,n):Bo(t,e,n)}function Bo(t,e,n){if(Gr(n))t.removeAttribute(e);else{if(Q&&!tt&&"TEXTAREA"===t.tagName&&"placeholder"===e&&""!==n&&!t.__ieph){var r=function(e){e.stopImmediatePropagation(),t.removeEventListener("input",r)};t.addEventListener("input",r),t.__ieph=!0}t.setAttribute(e,n)}}var Ho={create:Uo,update:Uo};function Ko(t,n){var o=n.elm,i=n.data,a=t.data;if(!(e(i.staticClass)&&e(i.class)&&(e(a)||e(a.staticClass)&&e(a.class)))){var s=Xr(n),c=o._transitionClasses;r(c)&&(s=Yr(s,Qr(c))),s!==o._prevClass&&(o.setAttribute("class",s),o._prevClass=s)}}var Wo,qo={create:Ko,update:Ko},Go="__r",Xo="__c";function Zo(t){if(r(t[Go])){var e=Q?"change":"input";t[e]=[].concat(t[Go],t[e]||[]),delete t[Go]}r(t[Xo])&&(t.change=[].concat(t[Xo],t.change||[]),delete t[Xo])}function Jo(t,e,n){var r=Wo;return function o(){var i=e.apply(null,arguments);null!==i&&ti(t,o,n,r)}}var Yo=ae&&!(rt&&Number(rt[1])<=53);function Qo(t,e,n,r){if(Yo){var o=qn,i=e;e=i._wrapper=function(t){if(t.target===t.currentTarget||t.timeStamp>=o||t.timeStamp<=0||t.target.ownerDocument!==document)return i.apply(this,arguments)}}Wo.addEventListener(t,e,it?{capture:n,passive:r}:n)}function ti(t,e,n,r){(r||Wo).removeEventListener(t,e._wrapper||e,n)}function ei(t,n){if(!e(t.data.on)||!e(n.data.on)){var r=n.data.on||{},o=t.data.on||{};Wo=n.elm,Zo(r),be(r,o,Qo,ti,Jo,n.context),Wo=void 0}}var ni,ri={create:ei,update:ei};function oi(t,n){if(!e(t.data.domProps)||!e(n.data.domProps)){var o,i,a=n.elm,s=t.data.domProps||{},c=n.data.domProps||{};for(o in r(c.__ob__)&&(c=n.data.domProps=E({},c)),s)o in c||(a[o]="");for(o in c){if(i=c[o],"textContent"===o||"innerHTML"===o){if(n.children&&(n.children.length=0),i===s[o])continue;1===a.childNodes.length&&a.removeChild(a.childNodes[0])}if("value"===o&&"PROGRESS"!==a.tagName){a._value=i;var u=e(i)?"":String(i);ii(a,u)&&(a.value=u)}else if("innerHTML"===o&&oo(a.tagName)&&e(a.innerHTML)){ni=ni||document.createElement("div"),ni.innerHTML="<svg>"+i+"</svg>";var l=ni.firstChild;while(a.firstChild)a.removeChild(a.firstChild);while(l.firstChild)a.appendChild(l.firstChild)}else if(i!==s[o])try{a[o]=i}catch(Ia){}}}}function ii(t,e){return!t.composing&&("OPTION"===t.tagName||ai(t,e)||si(t,e))}function ai(t,e){var n=!0;try{n=document.activeElement!==t}catch(Ia){}return n&&t.value!==e}function si(t,e){var n=t.value,o=t._vModifiers;if(r(o)){if(o.number)return v(n)!==v(e);if(o.trim)return n.trim()!==e.trim()}return n!==e}var ci={create:oi,update:oi},ui=b((function(t){var e={},n=/;(?![^(]*\))/g,r=/:(.+)/;return t.split(n).forEach((function(t){if(t){var n=t.split(r);n.length>1&&(e[n[0].trim()]=n[1].trim())}})),e}));function li(t){var e=fi(t.style);return t.staticStyle?E(t.staticStyle,e):e}function fi(t){return Array.isArray(t)?T(t):"string"===typeof t?ui(t):t}function pi(t,e){var n,r={};if(e){var o=t;while(o.componentInstance)o=o.componentInstance._vnode,o&&o.data&&(n=li(o.data))&&E(r,n)}(n=li(t.data))&&E(r,n);var i=t;while(i=i.parent)i.data&&(n=li(i.data))&&E(r,n);return r}var di,vi=/^--/,hi=/\s*!important$/,mi=function(t,e,n){if(vi.test(e))t.style.setProperty(e,n);else if(hi.test(n))t.style.setProperty(O(e),n.replace(hi,""),"important");else{var r=gi(e);if(Array.isArray(n))for(var o=0,i=n.length;o<i;o++)t.style[r]=n[o];else t.style[r]=n}},yi=["Webkit","Moz","ms"],gi=b((function(t){if(di=di||document.createElement("div").style,t=C(t),"filter"!==t&&t in di)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),n=0;n<yi.length;n++){var r=yi[n]+e;if(r in di)return r}}));function _i(t,n){var o=n.data,i=t.data;if(!(e(o.staticStyle)&&e(o.style)&&e(i.staticStyle)&&e(i.style))){var a,s,c=n.elm,u=i.staticStyle,l=i.normalizedStyle||i.style||{},f=u||l,p=fi(n.data.style)||{};n.data.normalizedStyle=r(p.__ob__)?E({},p):p;var d=pi(n,!0);for(s in f)e(d[s])&&mi(c,s,"");for(s in d)a=d[s],a!==f[s]&&mi(c,s,null==a?"":a)}}var bi={create:_i,update:_i},wi=/\s+/;function Ci(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(wi).forEach((function(e){return t.classList.add(e)})):t.classList.add(e);else{var n=" "+(t.getAttribute("class")||"")+" ";n.indexOf(" "+e+" ")<0&&t.setAttribute("class",(n+e).trim())}}function xi(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(wi).forEach((function(e){return t.classList.remove(e)})):t.classList.remove(e),t.classList.length||t.removeAttribute("class");else{var n=" "+(t.getAttribute("class")||"")+" ",r=" "+e+" ";while(n.indexOf(r)>=0)n=n.replace(r," ");n=n.trim(),n?t.setAttribute("class",n):t.removeAttribute("class")}}function $i(t){if(t){if("object"===typeof t){var e={};return!1!==t.css&&E(e,Oi(t.name||"v")),E(e,t),e}return"string"===typeof t?Oi(t):void 0}}var Oi=b((function(t){return{enterClass:t+"-enter",enterToClass:t+"-enter-to",enterActiveClass:t+"-enter-active",leaveClass:t+"-leave",leaveToClass:t+"-leave-to",leaveActiveClass:t+"-leave-active"}})),ki=X&&!tt,Ai="transition",Si="animation",ji="transition",Ei="transitionend",Ti="animation",Ii="animationend";ki&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(ji="WebkitTransition",Ei="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Ti="WebkitAnimation",Ii="webkitAnimationEnd"));var Pi=X?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(t){return t()};function Di(t){Pi((function(){Pi(t)}))}function Ni(t,e){var n=t._transitionClasses||(t._transitionClasses=[]);n.indexOf(e)<0&&(n.push(e),Ci(t,e))}function Fi(t,e){t._transitionClasses&&y(t._transitionClasses,e),xi(t,e)}function Li(t,e,n){var r=Ri(t,e),o=r.type,i=r.timeout,a=r.propCount;if(!o)return n();var s=o===Ai?Ei:Ii,c=0,u=function(){t.removeEventListener(s,l),n()},l=function(e){e.target===t&&++c>=a&&u()};setTimeout((function(){c<a&&u()}),i+1),t.addEventListener(s,l)}var Mi=/\b(transform|all)(,|$)/;function Ri(t,e){var n,r=window.getComputedStyle(t),o=(r[ji+"Delay"]||"").split(", "),i=(r[ji+"Duration"]||"").split(", "),a=zi(o,i),s=(r[Ti+"Delay"]||"").split(", "),c=(r[Ti+"Duration"]||"").split(", "),u=zi(s,c),l=0,f=0;e===Ai?a>0&&(n=Ai,l=a,f=i.length):e===Si?u>0&&(n=Si,l=u,f=c.length):(l=Math.max(a,u),n=l>0?a>u?Ai:Si:null,f=n?n===Ai?i.length:c.length:0);var p=n===Ai&&Mi.test(r[ji+"Property"]);return{type:n,timeout:l,propCount:f,hasTransform:p}}function zi(t,e){while(t.length<e.length)t=t.concat(t);return Math.max.apply(null,e.map((function(e,n){return Ui(e)+Ui(t[n])})))}function Ui(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function Vi(t,n){var o=t.elm;r(o._leaveCb)&&(o._leaveCb.cancelled=!0,o._leaveCb());var i=$i(t.data.transition);if(!e(i)&&!r(o._enterCb)&&1===o.nodeType){var a=i.css,c=i.type,u=i.enterClass,l=i.enterToClass,f=i.enterActiveClass,p=i.appearClass,d=i.appearToClass,h=i.appearActiveClass,m=i.beforeEnter,y=i.enter,g=i.afterEnter,_=i.enterCancelled,b=i.beforeAppear,w=i.appear,C=i.afterAppear,x=i.appearCancelled,$=i.duration,O=En,k=En.$vnode;while(k&&k.parent)O=k.context,k=k.parent;var A=!O._isMounted||!t.isRootInsert;if(!A||w||""===w){var S=A&&p?p:u,j=A&&h?h:f,E=A&&d?d:l,T=A&&b||m,I=A&&"function"===typeof w?w:y,P=A&&C||g,D=A&&x||_,N=v(s($)?$.enter:$);0;var F=!1!==a&&!tt,M=Ki(I),R=o._enterCb=L((function(){F&&(Fi(o,E),Fi(o,j)),R.cancelled?(F&&Fi(o,S),D&&D(o)):P&&P(o),o._enterCb=null}));t.data.show||we(t,"insert",(function(){var e=o.parentNode,n=e&&e._pending&&e._pending[t.key];n&&n.tag===t.tag&&n.elm._leaveCb&&n.elm._leaveCb(),I&&I(o,R)})),T&&T(o),F&&(Ni(o,S),Ni(o,j),Di((function(){Fi(o,S),R.cancelled||(Ni(o,E),M||(Hi(N)?setTimeout(R,N):Li(o,c,R)))}))),t.data.show&&(n&&n(),I&&I(o,R)),F||M||R()}}}function Bi(t,n){var o=t.elm;r(o._enterCb)&&(o._enterCb.cancelled=!0,o._enterCb());var i=$i(t.data.transition);if(e(i)||1!==o.nodeType)return n();if(!r(o._leaveCb)){var a=i.css,c=i.type,u=i.leaveClass,l=i.leaveToClass,f=i.leaveActiveClass,p=i.beforeLeave,d=i.leave,h=i.afterLeave,m=i.leaveCancelled,y=i.delayLeave,g=i.duration,_=!1!==a&&!tt,b=Ki(d),w=v(s(g)?g.leave:g);0;var C=o._leaveCb=L((function(){o.parentNode&&o.parentNode._pending&&(o.parentNode._pending[t.key]=null),_&&(Fi(o,l),Fi(o,f)),C.cancelled?(_&&Fi(o,u),m&&m(o)):(n(),h&&h(o)),o._leaveCb=null}));y?y(x):x()}function x(){C.cancelled||(!t.data.show&&o.parentNode&&((o.parentNode._pending||(o.parentNode._pending={}))[t.key]=t),p&&p(o),_&&(Ni(o,u),Ni(o,f),Di((function(){Fi(o,u),C.cancelled||(Ni(o,l),b||(Hi(w)?setTimeout(C,w):Li(o,c,C)))}))),d&&d(o,C),_||b||C())}}function Hi(t){return"number"===typeof t&&!isNaN(t)}function Ki(t){if(e(t))return!1;var n=t.fns;return r(n)?Ki(Array.isArray(n)?n[0]:n):(t._length||t.length)>1}function Wi(t,e){!0!==e.data.show&&Vi(e)}var qi=X?{create:Wi,activate:Wi,remove:function(t,e){!0!==t.data.show?Bi(t,e):e()}}:{},Gi=[Ho,qo,ri,ci,bi,qi],Xi=Gi.concat(zo),Zi=Io({nodeOps:$o,modules:Xi});tt&&document.addEventListener("selectionchange",(function(){var t=document.activeElement;t&&t.vmodel&&oa(t,"input")}));var Ji={inserted:function(t,e,n,r){"select"===n.tag?(r.elm&&!r.elm._vOptions?we(n,"postpatch",(function(){Ji.componentUpdated(t,e,n)})):Yi(t,e,n.context),t._vOptions=[].map.call(t.options,ea)):("textarea"===n.tag||uo(t.type))&&(t._vModifiers=e.modifiers,e.modifiers.lazy||(t.addEventListener("compositionstart",na),t.addEventListener("compositionend",ra),t.addEventListener("change",ra),tt&&(t.vmodel=!0)))},componentUpdated:function(t,e,n){if("select"===n.tag){Yi(t,e,n.context);var r=t._vOptions,o=t._vOptions=[].map.call(t.options,ea);if(o.some((function(t,e){return!N(t,r[e])}))){var i=t.multiple?e.value.some((function(t){return ta(t,o)})):e.value!==e.oldValue&&ta(e.value,o);i&&oa(t,"change")}}}};function Yi(t,e,n){Qi(t,e,n),(Q||et)&&setTimeout((function(){Qi(t,e,n)}),0)}function Qi(t,e,n){var r=e.value,o=t.multiple;if(!o||Array.isArray(r)){for(var i,a,s=0,c=t.options.length;s<c;s++)if(a=t.options[s],o)i=F(r,ea(a))>-1,a.selected!==i&&(a.selected=i);else if(N(ea(a),r))return void(t.selectedIndex!==s&&(t.selectedIndex=s));o||(t.selectedIndex=-1)}}function ta(t,e){return e.every((function(e){return!N(e,t)}))}function ea(t){return"_value"in t?t._value:t.value}function na(t){t.target.composing=!0}function ra(t){t.target.composing&&(t.target.composing=!1,oa(t.target,"input"))}function oa(t,e){var n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)}function ia(t){return!t.componentInstance||t.data&&t.data.transition?t:ia(t.componentInstance._vnode)}var aa={bind:function(t,e,n){var r=e.value;n=ia(n);var o=n.data&&n.data.transition,i=t.__vOriginalDisplay="none"===t.style.display?"":t.style.display;r&&o?(n.data.show=!0,Vi(n,(function(){t.style.display=i}))):t.style.display=r?i:"none"},update:function(t,e,n){var r=e.value,o=e.oldValue;if(!r!==!o){n=ia(n);var i=n.data&&n.data.transition;i?(n.data.show=!0,r?Vi(n,(function(){t.style.display=t.__vOriginalDisplay})):Bi(n,(function(){t.style.display="none"}))):t.style.display=r?t.__vOriginalDisplay:"none"}},unbind:function(t,e,n,r,o){o||(t.style.display=t.__vOriginalDisplay)}},sa={model:Ji,show:aa},ca={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function ua(t){var e=t&&t.componentOptions;return e&&e.Ctor.options.abstract?ua(xn(e.children)):t}function la(t){var e={},n=t.$options;for(var r in n.propsData)e[r]=t[r];var o=n._parentListeners;for(var i in o)e[C(i)]=o[i];return e}function fa(t,e){if(/\d-keep-alive$/.test(e.tag))return t("keep-alive",{props:e.componentOptions.propsData})}function pa(t){while(t=t.parent)if(t.data.transition)return!0}function da(t,e){return e.key===t.key&&e.tag===t.tag}var va=function(t){return t.tag||Pe(t)},ha=function(t){return"show"===t.name},ma={name:"transition",props:ca,abstract:!0,render:function(t){var e=this,n=this.$slots.default;if(n&&(n=n.filter(va),n.length)){0;var r=this.mode;0;var o=n[0];if(pa(this.$vnode))return o;var i=ua(o);if(!i)return o;if(this._leaving)return fa(t,o);var s="__transition-"+this._uid+"-";i.key=null==i.key?i.isComment?s+"comment":s+i.tag:a(i.key)?0===String(i.key).indexOf(s)?i.key:s+i.key:i.key;var c=(i.data||(i.data={})).transition=la(this),u=this._vnode,l=ua(u);if(i.data.directives&&i.data.directives.some(ha)&&(i.data.show=!0),l&&l.data&&!da(i,l)&&!Pe(l)&&(!l.componentInstance||!l.componentInstance._vnode.isComment)){var f=l.data.transition=E({},c);if("out-in"===r)return this._leaving=!0,we(f,"afterLeave",(function(){e._leaving=!1,e.$forceUpdate()})),fa(t,o);if("in-out"===r){if(Pe(i))return u;var p,d=function(){p()};we(c,"afterEnter",d),we(c,"enterCancelled",d),we(f,"delayLeave",(function(t){p=t}))}}return o}}},ya=E({tag:String,moveClass:String},ca);delete ya.mode;var ga={props:ya,beforeMount:function(){var t=this,e=this._update;this._update=function(n,r){var o=Tn(t);t.__patch__(t._vnode,t.kept,!1,!0),t._vnode=t.kept,o(),e.call(t,n,r)}},render:function(t){for(var e=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),r=this.prevChildren=this.children,o=this.$slots.default||[],i=this.children=[],a=la(this),s=0;s<o.length;s++){var c=o[s];if(c.tag)if(null!=c.key&&0!==String(c.key).indexOf("__vlist"))i.push(c),n[c.key]=c,(c.data||(c.data={})).transition=a;else;}if(r){for(var u=[],l=[],f=0;f<r.length;f++){var p=r[f];p.data.transition=a,p.data.pos=p.elm.getBoundingClientRect(),n[p.key]?u.push(p):l.push(p)}this.kept=t(e,null,u),this.removed=l}return t(e,null,i)},updated:function(){var t=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";t.length&&this.hasMove(t[0].elm,e)&&(t.forEach(_a),t.forEach(ba),t.forEach(wa),this._reflow=document.body.offsetHeight,t.forEach((function(t){if(t.data.moved){var n=t.elm,r=n.style;Ni(n,e),r.transform=r.WebkitTransform=r.transitionDuration="",n.addEventListener(Ei,n._moveCb=function t(r){r&&r.target!==n||r&&!/transform$/.test(r.propertyName)||(n.removeEventListener(Ei,t),n._moveCb=null,Fi(n,e))})}})))},methods:{hasMove:function(t,e){if(!ki)return!1;if(this._hasMove)return this._hasMove;var n=t.cloneNode();t._transitionClasses&&t._transitionClasses.forEach((function(t){xi(n,t)})),Ci(n,e),n.style.display="none",this.$el.appendChild(n);var r=Ri(n);return this.$el.removeChild(n),this._hasMove=r.hasTransform}}};function _a(t){t.elm._moveCb&&t.elm._moveCb(),t.elm._enterCb&&t.elm._enterCb()}function ba(t){t.data.newPos=t.elm.getBoundingClientRect()}function wa(t){var e=t.data.pos,n=t.data.newPos,r=e.left-n.left,o=e.top-n.top;if(r||o){t.data.moved=!0;var i=t.elm.style;i.transform=i.WebkitTransform="translate("+r+"px,"+o+"px)",i.transitionDuration="0s"}}var Ca={Transition:ma,TransitionGroup:ga};xr.config.mustUseProp=zr,xr.config.isReservedTag=io,xr.config.isReservedAttr=Mr,xr.config.getTagNamespace=ao,xr.config.isUnknownElement=co,E(xr.options.directives,sa),E(xr.options.components,Ca),xr.prototype.__patch__=X?Zi:I,xr.prototype.$mount=function(t,e){return t=t&&X?lo(t):void 0,Dn(this,t,e)},X&&setTimeout((function(){U.devtools&&ct&&ct.emit("init",xr)}),0);var xa=xr,$a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{attrs:{id:"friend-circle-page"}},[n("div",{staticClass:"friends scrollbar"},[n("div",{staticClass:"friend",class:"all"===t.active?"active":"",on:{click:function(e){return t.handleFriendClick({link:"all"})}}},[n("div",{staticClass:"avatar",staticStyle:{"font-size":"1.8rem","text-align":"center","line-height":"3rem"}},[t._v("📺")]),n("div",{staticClass:"name"},[t._v("全部动态")])]),t._l(t.circleFriends,(function(e){return n("div",{key:e.name,staticClass:"friend",class:{active:e.link===t.active,alive:!e.lost},on:{click:function(n){return t.handleFriendClick(e)}}},[n("img",{staticClass:"avatar",attrs:{src:e.avatar,alt:""}}),n("div",{staticClass:"name"},[t._v(t._s(e.name))])])}))],2),t.currentPosts&&t.currentPosts.length?n("div",{staticClass:"author-info"},[t.author?n("div",{staticClass:"author-card"},[n("div",{staticClass:"left"},[n("img",{staticClass:"avatar",attrs:{src:t.author.avatar,alt:""}})]),n("div",{staticClass:"center"},[n("h3",{staticClass:"name"},[t._v(t._s(t.author.name))]),n("div",{staticClass:"desc"},[t._v(t._s(t.author.desc))])]),n("div",{staticClass:"right"},[n("a",{staticClass:"link",attrs:{href:t.author.link,target:"_blank"}},[n("i",{staticClass:"fas fa-link"})])])]):t._e(),n("div",{staticClass:"posts scrollbar"},t._l(t.currentPosts,(function(e){return n("div",{key:e.floor+e.author,staticClass:"post"},[n("div",{staticClass:"meta"},[n("img",{staticClass:"avatar",attrs:{src:e.avatar}}),n("div",{staticClass:"author"},[t._v(t._s(e.author))]),n("div",{staticClass:"date"},[t._v(t._s(e[t.sortKey]))])]),n("div",{staticClass:"info"},[n("a",{staticClass:"link",attrs:{href:e.link,target:"_blank"}},[t._v(t._s(e.title))])])])})),0)]):n("div",{staticStyle:{flex:"1",display:"flex","justify-content":"center","align-items":"center"}},[t._v(" 这个博主最近好像在摸鱼🐟 ")])])])},Oa=[];let ka={api:"https://roydon.cloud",sortKey:"updated"};var Aa={name:"App",data(){return{active:"all",circleFriends:[],circleList:[],friendPosts:{},sortKey:ka.sortKey||"updated",author:null}},computed:{currentPosts(){return"all"===this.active?this.circleList:this.friendPosts[this.active]}},mounted(){fetch(ka.api+"/friend").then((t=>t.json())).then((t=>{this.circleFriends=t})).then((()=>{fetch(ka.api+"/friendstatus").then((t=>t.json())).then((t=>{this.circleFriends.forEach((e=>{xa.set(e,"lost",!t.not_lost_friends[e.name])})),this.circleFriends.sort(((t,e)=>t.lost&&e.lost?t.name>e.name?1:-1:t.lost?1:e.lost?-1:t.name>e.name?1:-1))}))})),fetch(ka.api+"/all").then((t=>t.json())).then((t=>{this.circleList=t.article_data,this.circleList.sort(((t,e)=>t[this.sortKey]>e[this.sortKey]?-1:1))}))},methods:{async handleFriendClick(t){"all"!==t.link?(this.author=t,this.friendPosts[t.link]||await fetch(ka.api+`/post?link=${t.link}`).then((t=>t.json())).then((e=>{const n=e.article_data.map((t=>({author:e.statistical_data.name,...e.statistical_data,...t})));n.sort(((t,e)=>t[this.sortKey]>e[this.sortKey]?-1:1)),this.friendPosts[t.link]=n,this.active=t.link}))):this.author=null,this.active=t.link}}},Sa=Aa;function ja(t,e,n,r,o,i,a,s){var c,u="function"===typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=n,u._compiled=!0),r&&(u.functional=!0),i&&(u._scopeId="data-v-"+i),a?(c=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},u._ssrRegister=c):o&&(c=s?function(){o.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:o),c)if(u.functional){u._injectStyles=c;var l=u.render;u.render=function(t,e){return c.call(e),l(t,e)}}else{var f=u.beforeCreate;u.beforeCreate=f?[].concat(f,c):[c]}return{exports:t,options:u}}var Ea=ja(Sa,$a,Oa,!1,null,null,null),Ta=Ea.exports;xa.config.productionTip=!1,new xa({render:t=>t(Ta)}).$mount("#app")}()})();//# sourceMappingURL=app.1715cf9b.js.map]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/circle.js"/>
      <url>/js/circle.js</url>
      
        <content type="html"><![CDATA[(function(){var t={9662:function(t,e,n){var r=n(7854),o=n(614),i=n(6330),a=r.TypeError;t.exports=function(t){if(o(t))return t;throw a(i(t)+" is not a function")}},9483:function(t,e,n){var r=n(7854),o=n(4411),i=n(6330),a=r.TypeError;t.exports=function(t){if(o(t))return t;throw a(i(t)+" is not a constructor")}},6077:function(t,e,n){var r=n(7854),o=n(614),i=r.String,a=r.TypeError;t.exports=function(t){if("object"==typeof t||o(t))return t;throw a("Can't set "+i(t)+" as a prototype")}},1223:function(t,e,n){var r=n(5112),o=n(30),i=n(3070),a=r("unscopables"),c=Array.prototype;void 0==c[a]&&i.f(c,a,{configurable:!0,value:o(null)}),t.exports=function(t){c[a][t]=!0}},1530:function(t,e,n){"use strict";var r=n(8710).charAt;t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},5787:function(t,e,n){var r=n(7854),o=n(7976),i=r.TypeError;t.exports=function(t,e){if(o(e,t))return t;throw i("Incorrect invocation")}},9670:function(t,e,n){var r=n(7854),o=n(111),i=r.String,a=r.TypeError;t.exports=function(t){if(o(t))return t;throw a(i(t)+" is not an object")}},7556:function(t,e,n){var r=n(7293);t.exports=r((function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}}))},8533:function(t,e,n){"use strict";var r=n(2092).forEach,o=n(9341),i=o("forEach");t.exports=i?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},1318:function(t,e,n){var r=n(5656),o=n(1400),i=n(6244),a=function(t){return function(e,n,a){var c,s=r(e),u=i(s),f=o(a,u);if(t&&n!=n){while(u>f)if(c=s[f++],c!=c)return!0}else for(;u>f;f++)if((t||f in s)&&s[f]===n)return t||f||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},2092:function(t,e,n){var r=n(9974),o=n(1702),i=n(8361),a=n(7908),c=n(6244),s=n(5417),u=o([].push),f=function(t){var e=1==t,n=2==t,o=3==t,f=4==t,l=6==t,p=7==t,v=5==t||l;return function(d,h,y,m){for(var g,b,x=a(d),_=i(x),w=r(h,y),O=c(_),S=0,C=m||s,E=e?C(d,O):n||p?C(d,0):void 0;O>S;S++)if((v||S in _)&&(g=_[S],b=w(g,S,x),t))if(e)E[S]=b;else if(b)switch(t){case 3:return!0;case 5:return g;case 6:return S;case 2:u(E,g)}else switch(t){case 4:return!1;case 7:u(E,g)}return l?-1:o||f?f:E}};t.exports={forEach:f(0),map:f(1),filter:f(2),some:f(3),every:f(4),find:f(5),findIndex:f(6),filterReject:f(7)}},1194:function(t,e,n){var r=n(7293),o=n(5112),i=n(7392),a=o("species");t.exports=function(t){return i>=51||!r((function(){var e=[],n=e.constructor={};return n[a]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},9341:function(t,e,n){"use strict";var r=n(7293);t.exports=function(t,e){var n=[][t];return!!n&&r((function(){n.call(null,e||function(){return 1},1)}))}},1589:function(t,e,n){var r=n(7854),o=n(1400),i=n(6244),a=n(6135),c=r.Array,s=Math.max;t.exports=function(t,e,n){for(var r=i(t),u=o(e,r),f=o(void 0===n?r:n,r),l=c(s(f-u,0)),p=0;u<f;u++,p++)a(l,p,t[u]);return l.length=p,l}},206:function(t,e,n){var r=n(1702);t.exports=r([].slice)},4362:function(t,e,n){var r=n(1589),o=Math.floor,i=function(t,e){var n=t.length,s=o(n/2);return n<8?a(t,e):c(t,i(r(t,0,s),e),i(r(t,s),e),e)},a=function(t,e){var n,r,o=t.length,i=1;while(i<o){r=i,n=t[i];while(r&&e(t[r-1],n)>0)t[r]=t[--r];r!==i++&&(t[r]=n)}return t},c=function(t,e,n,r){var o=e.length,i=n.length,a=0,c=0;while(a<o||c<i)t[a+c]=a<o&&c<i?r(e[a],n[c])<=0?e[a++]:n[c++]:a<o?e[a++]:n[c++];return t};t.exports=i},7475:function(t,e,n){var r=n(7854),o=n(3157),i=n(4411),a=n(111),c=n(5112),s=c("species"),u=r.Array;t.exports=function(t){var e;return o(t)&&(e=t.constructor,i(e)&&(e===u||o(e.prototype))?e=void 0:a(e)&&(e=e[s],null===e&&(e=void 0))),void 0===e?u:e}},5417:function(t,e,n){var r=n(7475);t.exports=function(t,e){return new(r(t))(0===e?0:e)}},7072:function(t,e,n){var r=n(5112),o=r("iterator"),i=!1;try{var a=0,c={next:function(){return{done:!!a++}},return:function(){i=!0}};c[o]=function(){return this},Array.from(c,(function(){throw 2}))}catch(s){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var r={};r[o]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(s){}return n}},4326:function(t,e,n){var r=n(1702),o=r({}.toString),i=r("".slice);t.exports=function(t){return i(o(t),8,-1)}},648:function(t,e,n){var r=n(7854),o=n(1694),i=n(614),a=n(4326),c=n(5112),s=c("toStringTag"),u=r.Object,f="Arguments"==a(function(){return arguments}()),l=function(t,e){try{return t[e]}catch(n){}};t.exports=o?a:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=l(e=u(t),s))?n:f?a(e):"Object"==(r=a(e))&&i(e.callee)?"Arguments":r}},7741:function(t,e,n){var r=n(1702),o=Error,i=r("".replace),a=function(t){return String(o(t).stack)}("zxcasd"),c=/\n\s*at [^:]*:[^\n]*/,s=c.test(a);t.exports=function(t,e){if(s&&"string"==typeof t&&!o.prepareStackTrace)while(e--)t=i(t,c,"");return t}},5631:function(t,e,n){"use strict";var r=n(3070).f,o=n(30),i=n(9190),a=n(9974),c=n(5787),s=n(408),u=n(654),f=n(6340),l=n(9781),p=n(2423).fastKey,v=n(9909),d=v.set,h=v.getterFor;t.exports={getConstructor:function(t,e,n,u){var f=t((function(t,r){c(t,v),d(t,{type:e,index:o(null),first:void 0,last:void 0,size:0}),l||(t.size=0),void 0!=r&&s(r,t[u],{that:t,AS_ENTRIES:n})})),v=f.prototype,y=h(e),m=function(t,e,n){var r,o,i=y(t),a=g(t,e);return a?a.value=n:(i.last=a={index:o=p(e,!0),key:e,value:n,previous:r=i.last,next:void 0,removed:!1},i.first||(i.first=a),r&&(r.next=a),l?i.size++:t.size++,"F"!==o&&(i.index[o]=a)),t},g=function(t,e){var n,r=y(t),o=p(e);if("F"!==o)return r.index[o];for(n=r.first;n;n=n.next)if(n.key==e)return n};return i(v,{clear:function(){var t=this,e=y(t),n=e.index,r=e.first;while(r)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete n[r.index],r=r.next;e.first=e.last=void 0,l?e.size=0:t.size=0},delete:function(t){var e=this,n=y(e),r=g(e,t);if(r){var o=r.next,i=r.previous;delete n.index[r.index],r.removed=!0,i&&(i.next=o),o&&(o.previous=i),n.first==r&&(n.first=o),n.last==r&&(n.last=i),l?n.size--:e.size--}return!!r},forEach:function(t){var e,n=y(this),r=a(t,arguments.length>1?arguments[1]:void 0);while(e=e?e.next:n.first){r(e.value,e.key,this);while(e&&e.removed)e=e.previous}},has:function(t){return!!g(this,t)}}),i(v,n?{get:function(t){var e=g(this,t);return e&&e.value},set:function(t,e){return m(this,0===t?0:t,e)}}:{add:function(t){return m(this,t=0===t?0:t,t)}}),l&&r(v,"size",{get:function(){return y(this).size}}),f},setStrong:function(t,e,n){var r=e+" Iterator",o=h(e),i=h(r);u(t,e,(function(t,e){d(this,{type:r,target:t,state:o(t),kind:e,last:void 0})}),(function(){var t=i(this),e=t.kind,n=t.last;while(n&&n.removed)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),f(e)}}},7710:function(t,e,n){"use strict";var r=n(2109),o=n(7854),i=n(1702),a=n(4705),c=n(8052),s=n(2423),u=n(408),f=n(5787),l=n(614),p=n(111),v=n(7293),d=n(7072),h=n(8003),y=n(9587);t.exports=function(t,e,n){var m=-1!==t.indexOf("Map"),g=-1!==t.indexOf("Weak"),b=m?"set":"add",x=o[t],_=x&&x.prototype,w=x,O={},S=function(t){var e=i(_[t]);c(_,t,"add"==t?function(t){return e(this,0===t?0:t),this}:"delete"==t?function(t){return!(g&&!p(t))&&e(this,0===t?0:t)}:"get"==t?function(t){return g&&!p(t)?void 0:e(this,0===t?0:t)}:"has"==t?function(t){return!(g&&!p(t))&&e(this,0===t?0:t)}:function(t,n){return e(this,0===t?0:t,n),this})},C=a(t,!l(x)||!(g||_.forEach&&!v((function(){(new x).entries().next()}))));if(C)w=n.getConstructor(e,t,m,b),s.enable();else if(a(t,!0)){var E=new w,k=E[b](g?{}:-0,1)!=E,A=v((function(){E.has(1)})),j=d((function(t){new x(t)})),$=!g&&v((function(){var t=new x,e=5;while(e--)t[b](e,e);return!t.has(-0)}));j||(w=e((function(t,e){f(t,_);var n=y(new x,t,w);return void 0!=e&&u(e,n[b],{that:n,AS_ENTRIES:m}),n})),w.prototype=_,_.constructor=w),(A||$)&&(S("delete"),S("has"),m&&S("get")),($||k)&&S(b),g&&_.clear&&delete _.clear}return O[t]=w,r({global:!0,constructor:!0,forced:w!=x},O),h(w,t),g||n.setStrong(w,t,m),w}},9920:function(t,e,n){var r=n(2597),o=n(3887),i=n(1236),a=n(3070);t.exports=function(t,e,n){for(var c=o(e),s=a.f,u=i.f,f=0;f<c.length;f++){var l=c[f];r(t,l)||n&&r(n,l)||s(t,l,u(e,l))}}},8544:function(t,e,n){var r=n(7293);t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},4230:function(t,e,n){var r=n(1702),o=n(4488),i=n(1340),a=/"/g,c=r("".replace);t.exports=function(t,e,n,r){var s=i(o(t)),u="<"+e;return""!==n&&(u+=" "+n+'="'+c(i(r),a,"&quot;")+'"'),u+">"+s+"</"+e+">"}},4994:function(t,e,n){"use strict";var r=n(3383).IteratorPrototype,o=n(30),i=n(9114),a=n(8003),c=n(7497),s=function(){return this};t.exports=function(t,e,n,u){var f=e+" Iterator";return t.prototype=o(r,{next:i(+!u,n)}),a(t,f,!1,!0),c[f]=s,t}},8880:function(t,e,n){var r=n(9781),o=n(3070),i=n(9114);t.exports=r?function(t,e,n){return o.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},9114:function(t){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},6135:function(t,e,n){"use strict";var r=n(4948),o=n(3070),i=n(9114);t.exports=function(t,e,n){var a=r(e);a in t?o.f(t,a,i(0,n)):t[a]=n}},7045:function(t,e,n){var r=n(6339),o=n(3070);t.exports=function(t,e,n){return n.get&&r(n.get,e,{getter:!0}),n.set&&r(n.set,e,{setter:!0}),o.f(t,e,n)}},8052:function(t,e,n){var r=n(7854),o=n(614),i=n(8880),a=n(6339),c=n(3505);t.exports=function(t,e,n,s){var u=!!s&&!!s.unsafe,f=!!s&&!!s.enumerable,l=!!s&&!!s.noTargetGet,p=s&&void 0!==s.name?s.name:e;return o(n)&&a(n,p,s),t===r?(f?t[e]=n:c(e,n),t):(u?!l&&t[e]&&(f=!0):delete t[e],f?t[e]=n:i(t,e,n),t)}},9190:function(t,e,n){var r=n(8052);t.exports=function(t,e,n){for(var o in e)r(t,o,e[o],n);return t}},654:function(t,e,n){"use strict";var r=n(2109),o=n(6916),i=n(1913),a=n(6530),c=n(614),s=n(4994),u=n(9518),f=n(7674),l=n(8003),p=n(8880),v=n(8052),d=n(5112),h=n(7497),y=n(3383),m=a.PROPER,g=a.CONFIGURABLE,b=y.IteratorPrototype,x=y.BUGGY_SAFARI_ITERATORS,_=d("iterator"),w="keys",O="values",S="entries",C=function(){return this};t.exports=function(t,e,n,a,d,y,E){s(n,e,a);var k,A,j,$=function(t){if(t===d&&N)return N;if(!x&&t in P)return P[t];switch(t){case w:return function(){return new n(this,t)};case O:return function(){return new n(this,t)};case S:return function(){return new n(this,t)}}return function(){return new n(this)}},T=e+" Iterator",I=!1,P=t.prototype,R=P[_]||P["@@iterator"]||d&&P[d],N=!x&&R||$(d),L="Array"==e&&P.entries||R;if(L&&(k=u(L.call(new t)),k!==Object.prototype&&k.next&&(i||u(k)===b||(f?f(k,b):c(k[_])||v(k,_,C)),l(k,T,!0,!0),i&&(h[T]=C))),m&&d==O&&R&&R.name!==O&&(!i&&g?p(P,"name",O):(I=!0,N=function(){return o(R,this)})),d)if(A={values:$(O),keys:y?N:$(w),entries:$(S)},E)for(j in A)(x||I||!(j in P))&&v(P,j,A[j]);else r({target:e,proto:!0,forced:x||I},A);return i&&!E||P[_]===N||v(P,_,N,{name:d}),h[e]=N,A}},7235:function(t,e,n){var r=n(857),o=n(2597),i=n(6061),a=n(3070).f;t.exports=function(t){var e=r.Symbol||(r.Symbol={});o(e,t)||a(e,t,{value:i.f(t)})}},9781:function(t,e,n){var r=n(7293);t.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},317:function(t,e,n){var r=n(7854),o=n(111),i=r.document,a=o(i)&&o(i.createElement);t.exports=function(t){return a?i.createElement(t):{}}},8324:function(t){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8509:function(t,e,n){var r=n(317),o=r("span").classList,i=o&&o.constructor&&o.constructor.prototype;t.exports=i===Object.prototype?void 0:i},8886:function(t,e,n){var r=n(8113),o=r.match(/firefox\/(\d+)/i);t.exports=!!o&&+o[1]},7871:function(t){t.exports="object"==typeof window&&"object"!=typeof Deno},256:function(t,e,n){var r=n(8113);t.exports=/MSIE|Trident/.test(r)},1528:function(t,e,n){var r=n(8113),o=n(7854);t.exports=/ipad|iphone|ipod/i.test(r)&&void 0!==o.Pebble},6833:function(t,e,n){var r=n(8113);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},5268:function(t,e,n){var r=n(4326),o=n(7854);t.exports="process"==r(o.process)},1036:function(t,e,n){var r=n(8113);t.exports=/web0s(?!.*chrome)/i.test(r)},8113:function(t,e,n){var r=n(5005);t.exports=r("navigator","userAgent")||""},7392:function(t,e,n){var r,o,i=n(7854),a=n(8113),c=i.process,s=i.Deno,u=c&&c.versions||s&&s.version,f=u&&u.v8;f&&(r=f.split("."),o=r[0]>0&&r[0]<4?1:+(r[0]+r[1])),!o&&a&&(r=a.match(/Edge\/(\d+)/),(!r||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/),r&&(o=+r[1]))),t.exports=o},8008:function(t,e,n){var r=n(8113),o=r.match(/AppleWebKit\/(\d+)\./);t.exports=!!o&&+o[1]},748:function(t){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2914:function(t,e,n){var r=n(7293),o=n(9114);t.exports=!r((function(){var t=Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",o(1,7)),7!==t.stack)}))},2109:function(t,e,n){var r=n(7854),o=n(1236).f,i=n(8880),a=n(8052),c=n(3505),s=n(9920),u=n(4705);t.exports=function(t,e){var n,f,l,p,v,d,h=t.target,y=t.global,m=t.stat;if(f=y?r:m?r[h]||c(h,{}):(r[h]||{}).prototype,f)for(l in e){if(v=e[l],t.noTargetGet?(d=o(f,l),p=d&&d.value):p=f[l],n=u(y?l:h+(m?".":"#")+l,t.forced),!n&&void 0!==p){if(typeof v==typeof p)continue;s(v,p)}(t.sham||p&&p.sham)&&i(v,"sham",!0),a(f,l,v,t)}}},7293:function(t){t.exports=function(t){try{return!!t()}catch(e){return!0}}},7007:function(t,e,n){"use strict";n(4916);var r=n(1702),o=n(8052),i=n(2261),a=n(7293),c=n(5112),s=n(8880),u=c("species"),f=RegExp.prototype;t.exports=function(t,e,n,l){var p=c(t),v=!a((function(){var e={};return e[p]=function(){return 7},7!=""[t](e)})),d=v&&!a((function(){var e=!1,n=/a/;return"split"===t&&(n={},n.constructor={},n.constructor[u]=function(){return n},n.flags="",n[p]=/./[p]),n.exec=function(){return e=!0,null},n[p](""),!e}));if(!v||!d||n){var h=r(/./[p]),y=e(p,""[t],(function(t,e,n,o,a){var c=r(t),s=e.exec;return s===i||s===f.exec?v&&!a?{done:!0,value:h(e,n,o)}:{done:!0,value:c(n,e,o)}:{done:!1}}));o(String.prototype,t,y[0]),o(f,p,y[1])}l&&s(f[p],"sham",!0)}},6677:function(t,e,n){var r=n(7293);t.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},2104:function(t,e,n){var r=n(4374),o=Function.prototype,i=o.apply,a=o.call;t.exports="object"==typeof Reflect&&Reflect.apply||(r?a.bind(i):function(){return a.apply(i,arguments)})},9974:function(t,e,n){var r=n(1702),o=n(9662),i=n(4374),a=r(r.bind);t.exports=function(t,e){return o(t),void 0===e?t:i?a(t,e):function(){return t.apply(e,arguments)}}},4374:function(t,e,n){var r=n(7293);t.exports=!r((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},6916:function(t,e,n){var r=n(4374),o=Function.prototype.call;t.exports=r?o.bind(o):function(){return o.apply(o,arguments)}},6530:function(t,e,n){var r=n(9781),o=n(2597),i=Function.prototype,a=r&&Object.getOwnPropertyDescriptor,c=o(i,"name"),s=c&&"something"===function(){}.name,u=c&&(!r||r&&a(i,"name").configurable);t.exports={EXISTS:c,PROPER:s,CONFIGURABLE:u}},1702:function(t,e,n){var r=n(4374),o=Function.prototype,i=o.bind,a=o.call,c=r&&i.bind(a,a);t.exports=r?function(t){return t&&c(t)}:function(t){return t&&function(){return a.apply(t,arguments)}}},5005:function(t,e,n){var r=n(7854),o=n(614),i=function(t){return o(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?i(r[t]):r[t]&&r[t][e]}},1246:function(t,e,n){var r=n(648),o=n(8173),i=n(7497),a=n(5112),c=a("iterator");t.exports=function(t){if(void 0!=t)return o(t,c)||o(t,"@@iterator")||i[r(t)]}},8554:function(t,e,n){var r=n(7854),o=n(6916),i=n(9662),a=n(9670),c=n(6330),s=n(1246),u=r.TypeError;t.exports=function(t,e){var n=arguments.length<2?s(t):e;if(i(n))return a(o(n,t));throw u(c(t)+" is not iterable")}},8173:function(t,e,n){var r=n(9662);t.exports=function(t,e){var n=t[e];return null==n?void 0:r(n)}},647:function(t,e,n){var r=n(1702),o=n(7908),i=Math.floor,a=r("".charAt),c=r("".replace),s=r("".slice),u=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,f=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,n,r,l,p){var v=n+t.length,d=r.length,h=f;return void 0!==l&&(l=o(l),h=u),c(p,h,(function(o,c){var u;switch(a(c,0)){case"$":return"$";case"&":return t;case"`":return s(e,0,n);case"'":return s(e,v);case"<":u=l[s(c,1,-1)];break;default:var f=+c;if(0===f)return o;if(f>d){var p=i(f/10);return 0===p?o:p<=d?void 0===r[p-1]?a(c,1):r[p-1]+a(c,1):o}u=r[f-1]}return void 0===u?"":u}))}},7854:function(t,e,n){var r=function(t){return t&&t.Math==Math&&t};t.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},2597:function(t,e,n){var r=n(1702),o=n(7908),i=r({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return i(o(t),e)}},3501:function(t){t.exports={}},842:function(t,e,n){var r=n(7854);t.exports=function(t,e){var n=r.console;n&&n.error&&(1==arguments.length?n.error(t):n.error(t,e))}},490:function(t,e,n){var r=n(5005);t.exports=r("document","documentElement")},4664:function(t,e,n){var r=n(9781),o=n(7293),i=n(317);t.exports=!r&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},8361:function(t,e,n){var r=n(7854),o=n(1702),i=n(7293),a=n(4326),c=r.Object,s=o("".split);t.exports=i((function(){return!c("z").propertyIsEnumerable(0)}))?function(t){return"String"==a(t)?s(t,""):c(t)}:c},9587:function(t,e,n){var r=n(614),o=n(111),i=n(7674);t.exports=function(t,e,n){var a,c;return i&&r(a=e.constructor)&&a!==n&&o(c=a.prototype)&&c!==n.prototype&&i(t,c),t}},2788:function(t,e,n){var r=n(1702),o=n(614),i=n(5465),a=r(Function.toString);o(i.inspectSource)||(i.inspectSource=function(t){return a(t)}),t.exports=i.inspectSource},8340:function(t,e,n){var r=n(111),o=n(8880);t.exports=function(t,e){r(e)&&"cause"in e&&o(t,"cause",e.cause)}},2423:function(t,e,n){var r=n(2109),o=n(1702),i=n(3501),a=n(111),c=n(2597),s=n(3070).f,u=n(8006),f=n(1156),l=n(2050),p=n(9711),v=n(6677),d=!1,h=p("meta"),y=0,m=function(t){s(t,h,{value:{objectID:"O"+y++,weakData:{}}})},g=function(t,e){if(!a(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!c(t,h)){if(!l(t))return"F";if(!e)return"E";m(t)}return t[h].objectID},b=function(t,e){if(!c(t,h)){if(!l(t))return!0;if(!e)return!1;m(t)}return t[h].weakData},x=function(t){return v&&d&&l(t)&&!c(t,h)&&m(t),t},_=function(){w.enable=function(){},d=!0;var t=u.f,e=o([].splice),n={};n[h]=1,t(n).length&&(u.f=function(n){for(var r=t(n),o=0,i=r.length;o<i;o++)if(r[o]===h){e(r,o,1);break}return r},r({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:f.f}))},w=t.exports={enable:_,fastKey:g,getWeakData:b,onFreeze:x};i[h]=!0},9909:function(t,e,n){var r,o,i,a=n(8536),c=n(7854),s=n(1702),u=n(111),f=n(8880),l=n(2597),p=n(5465),v=n(6200),d=n(3501),h="Object already initialized",y=c.TypeError,m=c.WeakMap,g=function(t){return i(t)?o(t):r(t,{})},b=function(t){return function(e){var n;if(!u(e)||(n=o(e)).type!==t)throw y("Incompatible receiver, "+t+" required");return n}};if(a||p.state){var x=p.state||(p.state=new m),_=s(x.get),w=s(x.has),O=s(x.set);r=function(t,e){if(w(x,t))throw new y(h);return e.facade=t,O(x,t,e),e},o=function(t){return _(x,t)||{}},i=function(t){return w(x,t)}}else{var S=v("state");d[S]=!0,r=function(t,e){if(l(t,S))throw new y(h);return e.facade=t,f(t,S,e),e},o=function(t){return l(t,S)?t[S]:{}},i=function(t){return l(t,S)}}t.exports={set:r,get:o,has:i,enforce:g,getterFor:b}},7659:function(t,e,n){var r=n(5112),o=n(7497),i=r("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(o.Array===t||a[i]===t)}},3157:function(t,e,n){var r=n(4326);t.exports=Array.isArray||function(t){return"Array"==r(t)}},614:function(t){t.exports=function(t){return"function"==typeof t}},4411:function(t,e,n){var r=n(1702),o=n(7293),i=n(614),a=n(648),c=n(5005),s=n(2788),u=function(){},f=[],l=c("Reflect","construct"),p=/^\s*(?:class|function)\b/,v=r(p.exec),d=!p.exec(u),h=function(t){if(!i(t))return!1;try{return l(u,f,t),!0}catch(e){return!1}},y=function(t){if(!i(t))return!1;switch(a(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return d||!!v(p,s(t))}catch(e){return!0}};y.sham=!0,t.exports=!l||o((function(){var t;return h(h.call)||!h(Object)||!h((function(){t=!0}))||t}))?y:h},4705:function(t,e,n){var r=n(7293),o=n(614),i=/#|\.prototype\./,a=function(t,e){var n=s[c(t)];return n==f||n!=u&&(o(e)?r(e):!!e)},c=a.normalize=function(t){return String(t).replace(i,".").toLowerCase()},s=a.data={},u=a.NATIVE="N",f=a.POLYFILL="P";t.exports=a},111:function(t,e,n){var r=n(614);t.exports=function(t){return"object"==typeof t?null!==t:r(t)}},1913:function(t){t.exports=!1},7850:function(t,e,n){var r=n(111),o=n(4326),i=n(5112),a=i("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[a])?!!e:"RegExp"==o(t))}},2190:function(t,e,n){var r=n(7854),o=n(5005),i=n(614),a=n(7976),c=n(3307),s=r.Object;t.exports=c?function(t){return"symbol"==typeof t}:function(t){var e=o("Symbol");return i(e)&&a(e.prototype,s(t))}},408:function(t,e,n){var r=n(7854),o=n(9974),i=n(6916),a=n(9670),c=n(6330),s=n(7659),u=n(6244),f=n(7976),l=n(8554),p=n(1246),v=n(9212),d=r.TypeError,h=function(t,e){this.stopped=t,this.result=e},y=h.prototype;t.exports=function(t,e,n){var r,m,g,b,x,_,w,O=n&&n.that,S=!(!n||!n.AS_ENTRIES),C=!(!n||!n.IS_ITERATOR),E=!(!n||!n.INTERRUPTED),k=o(e,O),A=function(t){return r&&v(r,"normal",t),new h(!0,t)},j=function(t){return S?(a(t),E?k(t[0],t[1],A):k(t[0],t[1])):E?k(t,A):k(t)};if(C)r=t;else{if(m=p(t),!m)throw d(c(t)+" is not iterable");if(s(m)){for(g=0,b=u(t);b>g;g++)if(x=j(t[g]),x&&f(y,x))return x;return new h(!1)}r=l(t,m)}_=r.next;while(!(w=i(_,r)).done){try{x=j(w.value)}catch($){v(r,"throw",$)}if("object"==typeof x&&x&&f(y,x))return x}return new h(!1)}},9212:function(t,e,n){var r=n(6916),o=n(9670),i=n(8173);t.exports=function(t,e,n){var a,c;o(t);try{if(a=i(t,"return"),!a){if("throw"===e)throw n;return n}a=r(a,t)}catch(s){c=!0,a=s}if("throw"===e)throw n;if(c)throw a;return o(a),n}},3383:function(t,e,n){"use strict";var r,o,i,a=n(7293),c=n(614),s=n(30),u=n(9518),f=n(8052),l=n(5112),p=n(1913),v=l("iterator"),d=!1;[].keys&&(i=[].keys(),"next"in i?(o=u(u(i)),o!==Object.prototype&&(r=o)):d=!0);var h=void 0==r||a((function(){var t={};return r[v].call(t)!==t}));h?r={}:p&&(r=s(r)),c(r[v])||f(r,v,(function(){return this})),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:d}},7497:function(t){t.exports={}},6244:function(t,e,n){var r=n(7466);t.exports=function(t){return r(t.length)}},6339:function(t,e,n){var r=n(7293),o=n(614),i=n(2597),a=n(9781),c=n(6530).CONFIGURABLE,s=n(2788),u=n(9909),f=u.enforce,l=u.get,p=Object.defineProperty,v=a&&!r((function(){return 8!==p((function(){}),"length",{value:8}).length})),d=String(String).split("String"),h=t.exports=function(t,e,n){if("Symbol("===String(e).slice(0,7)&&(e="["+String(e).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!i(t,"name")||c&&t.name!==e)&&p(t,"name",{value:e,configurable:!0}),v&&n&&i(n,"arity")&&t.length!==n.arity&&p(t,"length",{value:n.arity}),n&&i(n,"constructor")&&n.constructor){if(a)try{p(t,"prototype",{writable:!1})}catch(o){}}else t.prototype=void 0;var r=f(t);return i(r,"source")||(r.source=d.join("string"==typeof e?e:"")),t};Function.prototype.toString=h((function(){return o(this)&&l(this).source||s(this)}),"toString")},5948:function(t,e,n){var r,o,i,a,c,s,u,f,l=n(7854),p=n(9974),v=n(1236).f,d=n(261).set,h=n(6833),y=n(1528),m=n(1036),g=n(5268),b=l.MutationObserver||l.WebKitMutationObserver,x=l.document,_=l.process,w=l.Promise,O=v(l,"queueMicrotask"),S=O&&O.value;S||(r=function(){var t,e;g&&(t=_.domain)&&t.exit();while(o){e=o.fn,o=o.next;try{e()}catch(n){throw o?a():i=void 0,n}}i=void 0,t&&t.enter()},h||g||m||!b||!x?!y&&w&&w.resolve?(u=w.resolve(void 0),u.constructor=w,f=p(u.then,u),a=function(){f(r)}):g?a=function(){_.nextTick(r)}:(d=p(d,l),a=function(){d(r)}):(c=!0,s=x.createTextNode(""),new b(r).observe(s,{characterData:!0}),a=function(){s.data=c=!c})),t.exports=S||function(t){var e={fn:t,next:void 0};i&&(i.next=e),o||(o=e,a()),i=e}},735:function(t,e,n){var r=n(133);t.exports=r&&!!Symbol["for"]&&!!Symbol.keyFor},133:function(t,e,n){var r=n(7392),o=n(7293);t.exports=!!Object.getOwnPropertySymbols&&!o((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},8536:function(t,e,n){var r=n(7854),o=n(614),i=n(2788),a=r.WeakMap;t.exports=o(a)&&/native code/.test(i(a))},8523:function(t,e,n){"use strict";var r=n(9662),o=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=r(e),this.reject=r(n)};t.exports.f=function(t){return new o(t)}},6277:function(t,e,n){var r=n(1340);t.exports=function(t,e){return void 0===t?arguments.length<2?"":e:r(t)}},1574:function(t,e,n){"use strict";var r=n(9781),o=n(1702),i=n(6916),a=n(7293),c=n(1956),s=n(5181),u=n(5296),f=n(7908),l=n(8361),p=Object.assign,v=Object.defineProperty,d=o([].concat);t.exports=!p||a((function(){if(r&&1!==p({b:1},p(v({},"a",{enumerable:!0,get:function(){v(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol(),o="abcdefghijklmnopqrst";return t[n]=7,o.split("").forEach((function(t){e[t]=t})),7!=p({},t)[n]||c(p({},e)).join("")!=o}))?function(t,e){var n=f(t),o=arguments.length,a=1,p=s.f,v=u.f;while(o>a){var h,y=l(arguments[a++]),m=p?d(c(y),p(y)):c(y),g=m.length,b=0;while(g>b)h=m[b++],r&&!i(v,y,h)||(n[h]=y[h])}return n}:p},30:function(t,e,n){var r,o=n(9670),i=n(6048),a=n(748),c=n(3501),s=n(490),u=n(317),f=n(6200),l=">",p="<",v="prototype",d="script",h=f("IE_PROTO"),y=function(){},m=function(t){return p+d+l+t+p+"/"+d+l},g=function(t){t.write(m("")),t.close();var e=t.parentWindow.Object;return t=null,e},b=function(){var t,e=u("iframe"),n="java"+d+":";return e.style.display="none",s.appendChild(e),e.src=String(n),t=e.contentWindow.document,t.open(),t.write(m("document.F=Object")),t.close(),t.F},x=function(){try{r=new ActiveXObject("htmlfile")}catch(e){}x="undefined"!=typeof document?document.domain&&r?g(r):b():g(r);var t=a.length;while(t--)delete x[v][a[t]];return x()};c[h]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(y[v]=o(t),n=new y,y[v]=null,n[h]=t):n=x(),void 0===e?n:i.f(n,e)}},6048:function(t,e,n){var r=n(9781),o=n(3353),i=n(3070),a=n(9670),c=n(5656),s=n(1956);e.f=r&&!o?Object.defineProperties:function(t,e){a(t);var n,r=c(e),o=s(e),u=o.length,f=0;while(u>f)i.f(t,n=o[f++],r[n]);return t}},3070:function(t,e,n){var r=n(7854),o=n(9781),i=n(4664),a=n(3353),c=n(9670),s=n(4948),u=r.TypeError,f=Object.defineProperty,l=Object.getOwnPropertyDescriptor,p="enumerable",v="configurable",d="writable";e.f=o?a?function(t,e,n){if(c(t),e=s(e),c(n),"function"===typeof t&&"prototype"===e&&"value"in n&&d in n&&!n[d]){var r=l(t,e);r&&r[d]&&(t[e]=n.value,n={configurable:v in n?n[v]:r[v],enumerable:p in n?n[p]:r[p],writable:!1})}return f(t,e,n)}:f:function(t,e,n){if(c(t),e=s(e),c(n),i)try{return f(t,e,n)}catch(r){}if("get"in n||"set"in n)throw u("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},1236:function(t,e,n){var r=n(9781),o=n(6916),i=n(5296),a=n(9114),c=n(5656),s=n(4948),u=n(2597),f=n(4664),l=Object.getOwnPropertyDescriptor;e.f=r?l:function(t,e){if(t=c(t),e=s(e),f)try{return l(t,e)}catch(n){}if(u(t,e))return a(!o(i.f,t,e),t[e])}},1156:function(t,e,n){var r=n(4326),o=n(5656),i=n(8006).f,a=n(1589),c="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return i(t)}catch(e){return a(c)}};t.exports.f=function(t){return c&&"Window"==r(t)?s(t):i(o(t))}},8006:function(t,e,n){var r=n(6324),o=n(748),i=o.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},5181:function(t,e){e.f=Object.getOwnPropertySymbols},9518:function(t,e,n){var r=n(7854),o=n(2597),i=n(614),a=n(7908),c=n(6200),s=n(8544),u=c("IE_PROTO"),f=r.Object,l=f.prototype;t.exports=s?f.getPrototypeOf:function(t){var e=a(t);if(o(e,u))return e[u];var n=e.constructor;return i(n)&&e instanceof n?n.prototype:e instanceof f?l:null}},2050:function(t,e,n){var r=n(7293),o=n(111),i=n(4326),a=n(7556),c=Object.isExtensible,s=r((function(){c(1)}));t.exports=s||a?function(t){return!!o(t)&&((!a||"ArrayBuffer"!=i(t))&&(!c||c(t)))}:c},7976:function(t,e,n){var r=n(1702);t.exports=r({}.isPrototypeOf)},6324:function(t,e,n){var r=n(1702),o=n(2597),i=n(5656),a=n(1318).indexOf,c=n(3501),s=r([].push);t.exports=function(t,e){var n,r=i(t),u=0,f=[];for(n in r)!o(c,n)&&o(r,n)&&s(f,n);while(e.length>u)o(r,n=e[u++])&&(~a(f,n)||s(f,n));return f}},1956:function(t,e,n){var r=n(6324),o=n(748);t.exports=Object.keys||function(t){return r(t,o)}},5296:function(t,e){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,o=r&&!n.call({1:2},1);e.f=o?function(t){var e=r(this,t);return!!e&&e.enumerable}:n},7674:function(t,e,n){var r=n(1702),o=n(9670),i=n(6077);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{t=r(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),t(n,[]),e=n instanceof Array}catch(a){}return function(n,r){return o(n),i(r),e?t(n,r):n.__proto__=r,n}}():void 0)},288:function(t,e,n){"use strict";var r=n(1694),o=n(648);t.exports=r?{}.toString:function(){return"[object "+o(this)+"]"}},2140:function(t,e,n){var r=n(7854),o=n(6916),i=n(614),a=n(111),c=r.TypeError;t.exports=function(t,e){var n,r;if("string"===e&&i(n=t.toString)&&!a(r=o(n,t)))return r;if(i(n=t.valueOf)&&!a(r=o(n,t)))return r;if("string"!==e&&i(n=t.toString)&&!a(r=o(n,t)))return r;throw c("Can't convert object to primitive value")}},3887:function(t,e,n){var r=n(5005),o=n(1702),i=n(8006),a=n(5181),c=n(9670),s=o([].concat);t.exports=r("Reflect","ownKeys")||function(t){var e=i.f(c(t)),n=a.f;return n?s(e,n(t)):e}},857:function(t,e,n){var r=n(7854);t.exports=r},2534:function(t){t.exports=function(t){try{return{error:!1,value:t()}}catch(e){return{error:!0,value:e}}}},3702:function(t,e,n){var r=n(7854),o=n(2492),i=n(614),a=n(4705),c=n(2788),s=n(5112),u=n(7871),f=n(1913),l=n(7392),p=o&&o.prototype,v=s("species"),d=!1,h=i(r.PromiseRejectionEvent),y=a("Promise",(function(){var t=c(o),e=t!==String(o);if(!e&&66===l)return!0;if(f&&(!p["catch"]||!p["finally"]))return!0;if(l>=51&&/native code/.test(t))return!1;var n=new o((function(t){t(1)})),r=function(t){t((function(){}),(function(){}))},i=n.constructor={};return i[v]=r,d=n.then((function(){}))instanceof r,!d||!e&&u&&!h}));t.exports={CONSTRUCTOR:y,REJECTION_EVENT:h,SUBCLASSING:d}},2492:function(t,e,n){var r=n(7854);t.exports=r.Promise},9478:function(t,e,n){var r=n(9670),o=n(111),i=n(8523);t.exports=function(t,e){if(r(t),o(e)&&e.constructor===t)return e;var n=i.f(t),a=n.resolve;return a(e),n.promise}},612:function(t,e,n){var r=n(2492),o=n(7072),i=n(3702).CONSTRUCTOR;t.exports=i||!o((function(t){r.all(t).then(void 0,(function(){}))}))},2626:function(t,e,n){var r=n(3070).f;t.exports=function(t,e,n){n in t||r(t,n,{configurable:!0,get:function(){return e[n]},set:function(t){e[n]=t}})}},8572:function(t){var e=function(){this.head=null,this.tail=null};e.prototype={add:function(t){var e={item:t,next:null};this.head?this.tail.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return this.head=t.next,this.tail===t&&(this.tail=null),t.item}},t.exports=e},7651:function(t,e,n){var r=n(7854),o=n(6916),i=n(9670),a=n(614),c=n(4326),s=n(2261),u=r.TypeError;t.exports=function(t,e){var n=t.exec;if(a(n)){var r=o(n,t,e);return null!==r&&i(r),r}if("RegExp"===c(t))return o(s,t,e);throw u("RegExp#exec called on incompatible receiver")}},2261:function(t,e,n){"use strict";var r=n(6916),o=n(1702),i=n(1340),a=n(7066),c=n(2999),s=n(2309),u=n(30),f=n(9909).get,l=n(9441),p=n(7168),v=s("native-string-replace",String.prototype.replace),d=RegExp.prototype.exec,h=d,y=o("".charAt),m=o("".indexOf),g=o("".replace),b=o("".slice),x=function(){var t=/a/,e=/b*/g;return r(d,t,"a"),r(d,e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),_=c.BROKEN_CARET,w=void 0!==/()??/.exec("")[1],O=x||w||_||l||p;O&&(h=function(t){var e,n,o,c,s,l,p,O=this,S=f(O),C=i(t),E=S.raw;if(E)return E.lastIndex=O.lastIndex,e=r(h,E,C),O.lastIndex=E.lastIndex,e;var k=S.groups,A=_&&O.sticky,j=r(a,O),$=O.source,T=0,I=C;if(A&&(j=g(j,"y",""),-1===m(j,"g")&&(j+="g"),I=b(C,O.lastIndex),O.lastIndex>0&&(!O.multiline||O.multiline&&"\n"!==y(C,O.lastIndex-1))&&($="(?: "+$+")",I=" "+I,T++),n=new RegExp("^(?:"+$+")",j)),w&&(n=new RegExp("^"+$+"$(?!\\s)",j)),x&&(o=O.lastIndex),c=r(d,A?n:O,I),A?c?(c.input=b(c.input,T),c[0]=b(c[0],T),c.index=O.lastIndex,O.lastIndex+=c[0].length):O.lastIndex=0:x&&c&&(O.lastIndex=O.global?c.index+c[0].length:o),w&&c&&c.length>1&&r(v,c[0],n,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(c[s]=void 0)})),c&&k)for(c.groups=l=u(null),s=0;s<k.length;s++)p=k[s],l[p[0]]=c[p[1]];return c}),t.exports=h},7066:function(t,e,n){"use strict";var r=n(9670);t.exports=function(){var t=r(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},4706:function(t,e,n){var r=n(6916),o=n(2597),i=n(7976),a=n(7066),c=RegExp.prototype;t.exports=function(t){var e=t.flags;return void 0!==e||"flags"in c||o(t,"flags")||!i(c,t)?e:r(a,t)}},2999:function(t,e,n){var r=n(7293),o=n(7854),i=o.RegExp,a=r((function(){var t=i("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),c=a||r((function(){return!i("a","y").sticky})),s=a||r((function(){var t=i("^r","gy");return t.lastIndex=2,null!=t.exec("str")}));t.exports={BROKEN_CARET:s,MISSED_STICKY:c,UNSUPPORTED_Y:a}},9441:function(t,e,n){var r=n(7293),o=n(7854),i=o.RegExp;t.exports=r((function(){var t=i(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)}))},7168:function(t,e,n){var r=n(7293),o=n(7854),i=o.RegExp;t.exports=r((function(){var t=i("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}))},4488:function(t,e,n){var r=n(7854),o=r.TypeError;t.exports=function(t){if(void 0==t)throw o("Can't call method on "+t);return t}},3505:function(t,e,n){var r=n(7854),o=Object.defineProperty;t.exports=function(t,e){try{o(r,t,{value:e,configurable:!0,writable:!0})}catch(n){r[t]=e}return e}},6340:function(t,e,n){"use strict";var r=n(5005),o=n(3070),i=n(5112),a=n(9781),c=i("species");t.exports=function(t){var e=r(t),n=o.f;a&&e&&!e[c]&&n(e,c,{configurable:!0,get:function(){return this}})}},8003:function(t,e,n){var r=n(3070).f,o=n(2597),i=n(5112),a=i("toStringTag");t.exports=function(t,e,n){t&&!n&&(t=t.prototype),t&&!o(t,a)&&r(t,a,{configurable:!0,value:e})}},6200:function(t,e,n){var r=n(2309),o=n(9711),i=r("keys");t.exports=function(t){return i[t]||(i[t]=o(t))}},5465:function(t,e,n){var r=n(7854),o=n(3505),i="__core-js_shared__",a=r[i]||o(i,{});t.exports=a},2309:function(t,e,n){var r=n(1913),o=n(5465);(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.22.5",mode:r?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.22.5/LICENSE",source:"https://github.com/zloirock/core-js"})},6707:function(t,e,n){var r=n(9670),o=n(9483),i=n(5112),a=i("species");t.exports=function(t,e){var n,i=r(t).constructor;return void 0===i||void 0==(n=r(i)[a])?e:o(n)}},3429:function(t,e,n){var r=n(7293);t.exports=function(t){return r((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},8710:function(t,e,n){var r=n(1702),o=n(9303),i=n(1340),a=n(4488),c=r("".charAt),s=r("".charCodeAt),u=r("".slice),f=function(t){return function(e,n){var r,f,l=i(a(e)),p=o(n),v=l.length;return p<0||p>=v?t?"":void 0:(r=s(l,p),r<55296||r>56319||p+1===v||(f=s(l,p+1))<56320||f>57343?t?c(l,p):r:t?u(l,p,p+2):f-56320+(r-55296<<10)+65536)}};t.exports={codeAt:f(!1),charAt:f(!0)}},6091:function(t,e,n){var r=n(6530).PROPER,o=n(7293),i=n(1361),a="​᠎";t.exports=function(t){return o((function(){return!!i[t]()||a[t]()!==a||r&&i[t].name!==t}))}},3111:function(t,e,n){var r=n(1702),o=n(4488),i=n(1340),a=n(1361),c=r("".replace),s="["+a+"]",u=RegExp("^"+s+s+"*"),f=RegExp(s+s+"*$"),l=function(t){return function(e){var n=i(o(e));return 1&t&&(n=c(n,u,"")),2&t&&(n=c(n,f,"")),n}};t.exports={start:l(1),end:l(2),trim:l(3)}},6532:function(t,e,n){var r=n(6916),o=n(5005),i=n(5112),a=n(8052);t.exports=function(){var t=o("Symbol"),e=t&&t.prototype,n=e&&e.valueOf,c=i("toPrimitive");e&&!e[c]&&a(e,c,(function(t){return r(n,this)}),{arity:1})}},261:function(t,e,n){var r,o,i,a,c=n(7854),s=n(2104),u=n(9974),f=n(614),l=n(2597),p=n(7293),v=n(490),d=n(206),h=n(317),y=n(8053),m=n(6833),g=n(5268),b=c.setImmediate,x=c.clearImmediate,_=c.process,w=c.Dispatch,O=c.Function,S=c.MessageChannel,C=c.String,E=0,k={},A="onreadystatechange";try{r=c.location}catch(P){}var j=function(t){if(l(k,t)){var e=k[t];delete k[t],e()}},$=function(t){return function(){j(t)}},T=function(t){j(t.data)},I=function(t){c.postMessage(C(t),r.protocol+"//"+r.host)};b&&x||(b=function(t){y(arguments.length,1);var e=f(t)?t:O(t),n=d(arguments,1);return k[++E]=function(){s(e,void 0,n)},o(E),E},x=function(t){delete k[t]},g?o=function(t){_.nextTick($(t))}:w&&w.now?o=function(t){w.now($(t))}:S&&!m?(i=new S,a=i.port2,i.port1.onmessage=T,o=u(a.postMessage,a)):c.addEventListener&&f(c.postMessage)&&!c.importScripts&&r&&"file:"!==r.protocol&&!p(I)?(o=I,c.addEventListener("message",T,!1)):o=A in h("script")?function(t){v.appendChild(h("script"))[A]=function(){v.removeChild(this),j(t)}}:function(t){setTimeout($(t),0)}),t.exports={set:b,clear:x}},863:function(t,e,n){var r=n(1702);t.exports=r(1..valueOf)},1400:function(t,e,n){var r=n(9303),o=Math.max,i=Math.min;t.exports=function(t,e){var n=r(t);return n<0?o(n+e,0):i(n,e)}},5656:function(t,e,n){var r=n(8361),o=n(4488);t.exports=function(t){return r(o(t))}},9303:function(t){var e=Math.ceil,n=Math.floor;t.exports=function(t){var r=+t;return r!==r||0===r?0:(r>0?n:e)(r)}},7466:function(t,e,n){var r=n(9303),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},7908:function(t,e,n){var r=n(7854),o=n(4488),i=r.Object;t.exports=function(t){return i(o(t))}},7593:function(t,e,n){var r=n(7854),o=n(6916),i=n(111),a=n(2190),c=n(8173),s=n(2140),u=n(5112),f=r.TypeError,l=u("toPrimitive");t.exports=function(t,e){if(!i(t)||a(t))return t;var n,r=c(t,l);if(r){if(void 0===e&&(e="default"),n=o(r,t,e),!i(n)||a(n))return n;throw f("Can't convert object to primitive value")}return void 0===e&&(e="number"),s(t,e)}},4948:function(t,e,n){var r=n(7593),o=n(2190);t.exports=function(t){var e=r(t,"string");return o(e)?e:e+""}},1694:function(t,e,n){var r=n(5112),o=r("toStringTag"),i={};i[o]="z",t.exports="[object z]"===String(i)},1340:function(t,e,n){var r=n(7854),o=n(648),i=r.String;t.exports=function(t){if("Symbol"===o(t))throw TypeError("Cannot convert a Symbol value to a string");return i(t)}},6330:function(t,e,n){var r=n(7854),o=r.String;t.exports=function(t){try{return o(t)}catch(e){return"Object"}}},9711:function(t,e,n){var r=n(1702),o=0,i=Math.random(),a=r(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+a(++o+i,36)}},3307:function(t,e,n){var r=n(133);t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:function(t,e,n){var r=n(9781),o=n(7293);t.exports=r&&o((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},8053:function(t,e,n){var r=n(7854),o=r.TypeError;t.exports=function(t,e){if(t<e)throw o("Not enough arguments");return t}},6061:function(t,e,n){var r=n(5112);e.f=r},5112:function(t,e,n){var r=n(7854),o=n(2309),i=n(2597),a=n(9711),c=n(133),s=n(3307),u=o("wks"),f=r.Symbol,l=f&&f["for"],p=s?f:f&&f.withoutSetter||a;t.exports=function(t){if(!i(u,t)||!c&&"string"!=typeof u[t]){var e="Symbol."+t;c&&i(f,t)?u[t]=f[t]:u[t]=s&&l?l(e):p(e)}return u[t]}},1361:function(t){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},9191:function(t,e,n){"use strict";var r=n(5005),o=n(2597),i=n(8880),a=n(7976),c=n(7674),s=n(9920),u=n(2626),f=n(9587),l=n(6277),p=n(8340),v=n(7741),d=n(2914),h=n(9781),y=n(1913);t.exports=function(t,e,n,m){var g="stackTraceLimit",b=m?2:1,x=t.split("."),_=x[x.length-1],w=r.apply(null,x);if(w){var O=w.prototype;if(!y&&o(O,"cause")&&delete O.cause,!n)return w;var S=r("Error"),C=e((function(t,e){var n=l(m?e:t,void 0),r=m?new w(t):new w;return void 0!==n&&i(r,"message",n),d&&i(r,"stack",v(r.stack,2)),this&&a(O,this)&&f(r,this,C),arguments.length>b&&p(r,arguments[b]),r}));if(C.prototype=O,"Error"!==_?c?c(C,S):s(C,S,{name:!0}):h&&g in w&&(u(C,w,g),u(C,w,"prepareStackTrace")),s(C,w),!y)try{O.name!==_&&i(O,"name",_),O.constructor=C}catch(E){}return C}}},2222:function(t,e,n){"use strict";var r=n(2109),o=n(7854),i=n(7293),a=n(3157),c=n(111),s=n(7908),u=n(6244),f=n(6135),l=n(5417),p=n(1194),v=n(5112),d=n(7392),h=v("isConcatSpreadable"),y=9007199254740991,m="Maximum allowed index exceeded",g=o.TypeError,b=d>=51||!i((function(){var t=[];return t[h]=!1,t.concat()[0]!==t})),x=p("concat"),_=function(t){if(!c(t))return!1;var e=t[h];return void 0!==e?!!e:a(t)},w=!b||!x;r({target:"Array",proto:!0,arity:1,forced:w},{concat:function(t){var e,n,r,o,i,a=s(this),c=l(a,0),p=0;for(e=-1,r=arguments.length;e<r;e++)if(i=-1===e?a:arguments[e],_(i)){if(o=u(i),p+o>y)throw g(m);for(n=0;n<o;n++,p++)n in i&&f(c,p,i[n])}else{if(p>=y)throw g(m);f(c,p++,i)}return c.length=p,c}})},7327:function(t,e,n){"use strict";var r=n(2109),o=n(2092).filter,i=n(1194),a=i("filter");r({target:"Array",proto:!0,forced:!a},{filter:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},6992:function(t,e,n){"use strict";var r=n(5656),o=n(1223),i=n(7497),a=n(9909),c=n(3070).f,s=n(654),u=n(1913),f=n(9781),l="Array Iterator",p=a.set,v=a.getterFor(l);t.exports=s(Array,"Array",(function(t,e){p(this,{type:l,target:r(t),index:0,kind:e})}),(function(){var t=v(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");var d=i.Arguments=i.Array;if(o("keys"),o("values"),o("entries"),!u&&f&&"values"!==d.name)try{c(d,"name",{value:"values"})}catch(h){}},9600:function(t,e,n){"use strict";var r=n(2109),o=n(1702),i=n(8361),a=n(5656),c=n(9341),s=o([].join),u=i!=Object,f=c("join",",");r({target:"Array",proto:!0,forced:u||!f},{join:function(t){return s(a(this),void 0===t?",":t)}})},1249:function(t,e,n){"use strict";var r=n(2109),o=n(2092).map,i=n(1194),a=i("map");r({target:"Array",proto:!0,forced:!a},{map:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},7042:function(t,e,n){"use strict";var r=n(2109),o=n(7854),i=n(3157),a=n(4411),c=n(111),s=n(1400),u=n(6244),f=n(5656),l=n(6135),p=n(5112),v=n(1194),d=n(206),h=v("slice"),y=p("species"),m=o.Array,g=Math.max;r({target:"Array",proto:!0,forced:!h},{slice:function(t,e){var n,r,o,p=f(this),v=u(p),h=s(t,v),b=s(void 0===e?v:e,v);if(i(p)&&(n=p.constructor,a(n)&&(n===m||i(n.prototype))?n=void 0:c(n)&&(n=n[y],null===n&&(n=void 0)),n===m||void 0===n))return d(p,h,b);for(r=new(void 0===n?m:n)(g(b-h,0)),o=0;h<b;h++,o++)h in p&&l(r,o,p[h]);return r.length=o,r}})},2707:function(t,e,n){"use strict";var r=n(2109),o=n(1702),i=n(9662),a=n(7908),c=n(6244),s=n(1340),u=n(7293),f=n(4362),l=n(9341),p=n(8886),v=n(256),d=n(7392),h=n(8008),y=[],m=o(y.sort),g=o(y.push),b=u((function(){y.sort(void 0)})),x=u((function(){y.sort(null)})),_=l("sort"),w=!u((function(){if(d)return d<70;if(!(p&&p>3)){if(v)return!0;if(h)return h<603;var t,e,n,r,o="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)y.push({k:e+r,v:n})}for(y.sort((function(t,e){return e.v-t.v})),r=0;r<y.length;r++)e=y[r].k.charAt(0),o.charAt(o.length-1)!==e&&(o+=e);return"DGBEFHACIJK"!==o}})),O=b||!x||!_||!w,S=function(t){return function(e,n){return void 0===n?-1:void 0===e?1:void 0!==t?+t(e,n)||0:s(e)>s(n)?1:-1}};r({target:"Array",proto:!0,forced:O},{sort:function(t){void 0!==t&&i(t);var e=a(this);if(w)return void 0===t?m(e):m(e,t);var n,r,o=[],s=c(e);for(r=0;r<s;r++)r in e&&g(o,e[r]);f(o,S(t)),n=o.length,r=0;while(r<n)e[r]=o[r++];while(r<s)delete e[r++];return e}})},561:function(t,e,n){"use strict";var r=n(2109),o=n(7854),i=n(1400),a=n(9303),c=n(6244),s=n(7908),u=n(5417),f=n(6135),l=n(1194),p=l("splice"),v=o.TypeError,d=Math.max,h=Math.min,y=9007199254740991,m="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!p},{splice:function(t,e){var n,r,o,l,p,g,b=s(this),x=c(b),_=i(t,x),w=arguments.length;if(0===w?n=r=0:1===w?(n=0,r=x-_):(n=w-2,r=h(d(a(e),0),x-_)),x+n-r>y)throw v(m);for(o=u(b,r),l=0;l<r;l++)p=_+l,p in b&&f(o,l,b[p]);if(o.length=r,n<r){for(l=_;l<x-r;l++)p=l+r,g=l+n,p in b?b[g]=b[p]:delete b[g];for(l=x;l>x-r+n;l--)delete b[l-1]}else if(n>r)for(l=x-r;l>_;l--)p=l+r-1,g=l+n-1,p in b?b[g]=b[p]:delete b[g];for(l=0;l<n;l++)b[l+_]=arguments[l+2];return b.length=x-r+n,o}})},1703:function(t,e,n){var r=n(2109),o=n(7854),i=n(2104),a=n(9191),c="WebAssembly",s=o[c],u=7!==Error("e",{cause:7}).cause,f=function(t,e){var n={};n[t]=a(t,e,u),r({global:!0,constructor:!0,arity:1,forced:u},n)},l=function(t,e){if(s&&s[t]){var n={};n[t]=a(c+"."+t,e,u),r({target:c,stat:!0,constructor:!0,arity:1,forced:u},n)}};f("Error",(function(t){return function(e){return i(t,this,arguments)}})),f("EvalError",(function(t){return function(e){return i(t,this,arguments)}})),f("RangeError",(function(t){return function(e){return i(t,this,arguments)}})),f("ReferenceError",(function(t){return function(e){return i(t,this,arguments)}})),f("SyntaxError",(function(t){return function(e){return i(t,this,arguments)}})),f("TypeError",(function(t){return function(e){return i(t,this,arguments)}})),f("URIError",(function(t){return function(e){return i(t,this,arguments)}})),l("CompileError",(function(t){return function(e){return i(t,this,arguments)}})),l("LinkError",(function(t){return function(e){return i(t,this,arguments)}})),l("RuntimeError",(function(t){return function(e){return i(t,this,arguments)}}))},8309:function(t,e,n){var r=n(9781),o=n(6530).EXISTS,i=n(1702),a=n(3070).f,c=Function.prototype,s=i(c.toString),u=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,f=i(u.exec),l="name";r&&!o&&a(c,l,{configurable:!0,get:function(){try{return f(u,s(this))[1]}catch(t){return""}}})},5837:function(t,e,n){var r=n(2109),o=n(7854);r({global:!0},{globalThis:o})},8862:function(t,e,n){var r=n(2109),o=n(5005),i=n(2104),a=n(6916),c=n(1702),s=n(7293),u=n(3157),f=n(614),l=n(111),p=n(2190),v=n(206),d=n(133),h=o("JSON","stringify"),y=c(/./.exec),m=c("".charAt),g=c("".charCodeAt),b=c("".replace),x=c(1..toString),_=/[\uD800-\uDFFF]/g,w=/^[\uD800-\uDBFF]$/,O=/^[\uDC00-\uDFFF]$/,S=!d||s((function(){var t=o("Symbol")();return"[null]"!=h([t])||"{}"!=h({a:t})||"{}"!=h(Object(t))})),C=s((function(){return'"\\udf06\\ud834"'!==h("\udf06\ud834")||'"\\udead"'!==h("\udead")})),E=function(t,e){var n=v(arguments),r=e;if((l(e)||void 0!==t)&&!p(t))return u(e)||(e=function(t,e){if(f(r)&&(e=a(r,this,t,e)),!p(e))return e}),n[1]=e,i(h,null,n)},k=function(t,e,n){var r=m(n,e-1),o=m(n,e+1);return y(w,t)&&!y(O,o)||y(O,t)&&!y(w,r)?"\\u"+x(g(t,0),16):t};h&&r({target:"JSON",stat:!0,arity:3,forced:S||C},{stringify:function(t,e,n){var r=v(arguments),o=i(S?E:h,null,r);return C&&"string"==typeof o?b(o,_,k):o}})},3706:function(t,e,n){var r=n(7854),o=n(8003);o(r.JSON,"JSON",!0)},2703:function(t,e,n){var r=n(8003);r(Math,"Math",!0)},9653:function(t,e,n){"use strict";var r=n(9781),o=n(7854),i=n(1702),a=n(4705),c=n(8052),s=n(2597),u=n(9587),f=n(7976),l=n(2190),p=n(7593),v=n(7293),d=n(8006).f,h=n(1236).f,y=n(3070).f,m=n(863),g=n(3111).trim,b="Number",x=o[b],_=x.prototype,w=o.TypeError,O=i("".slice),S=i("".charCodeAt),C=function(t){var e=p(t,"number");return"bigint"==typeof e?e:E(e)},E=function(t){var e,n,r,o,i,a,c,s,u=p(t,"number");if(l(u))throw w("Cannot convert a Symbol value to a number");if("string"==typeof u&&u.length>2)if(u=g(u),e=S(u,0),43===e||45===e){if(n=S(u,2),88===n||120===n)return NaN}else if(48===e){switch(S(u,1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+u}for(i=O(u,2),a=i.length,c=0;c<a;c++)if(s=S(i,c),s<48||s>o)return NaN;return parseInt(i,r)}return+u};if(a(b,!x(" 0o1")||!x("0b1")||x("+0x1"))){for(var k,A=function(t){var e=arguments.length<1?0:x(C(t)),n=this;return f(_,n)&&v((function(){m(n)}))?u(Object(e),n,A):e},j=r?d(x):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),$=0;j.length>$;$++)s(x,k=j[$])&&!s(A,k)&&y(A,k,h(x,k));A.prototype=_,_.constructor=A,c(o,b,A,{constructor:!0})}},9601:function(t,e,n){var r=n(2109),o=n(1574);r({target:"Object",stat:!0,arity:2,forced:Object.assign!==o},{assign:o})},3371:function(t,e,n){var r=n(2109),o=n(6677),i=n(7293),a=n(111),c=n(2423).onFreeze,s=Object.freeze,u=i((function(){s(1)}));r({target:"Object",stat:!0,forced:u,sham:!o},{freeze:function(t){return s&&a(t)?s(c(t)):t}})},5003:function(t,e,n){var r=n(2109),o=n(7293),i=n(5656),a=n(1236).f,c=n(9781),s=o((function(){a(1)})),u=!c||s;r({target:"Object",stat:!0,forced:u,sham:!c},{getOwnPropertyDescriptor:function(t,e){return a(i(t),e)}})},9337:function(t,e,n){var r=n(2109),o=n(9781),i=n(3887),a=n(5656),c=n(1236),s=n(6135);r({target:"Object",stat:!0,sham:!o},{getOwnPropertyDescriptors:function(t){var e,n,r=a(t),o=c.f,u=i(r),f={},l=0;while(u.length>l)n=o(r,e=u[l++]),void 0!==n&&s(f,e,n);return f}})},6210:function(t,e,n){var r=n(2109),o=n(7293),i=n(1156).f,a=o((function(){return!Object.getOwnPropertyNames(1)}));r({target:"Object",stat:!0,forced:a},{getOwnPropertyNames:i})},9660:function(t,e,n){var r=n(2109),o=n(133),i=n(7293),a=n(5181),c=n(7908),s=!o||i((function(){a.f(1)}));r({target:"Object",stat:!0,forced:s},{getOwnPropertySymbols:function(t){var e=a.f;return e?e(c(t)):[]}})},489:function(t,e,n){var r=n(2109),o=n(7293),i=n(7908),a=n(9518),c=n(8544),s=o((function(){a(1)}));r({target:"Object",stat:!0,forced:s,sham:!c},{getPrototypeOf:function(t){return a(i(t))}})},1825:function(t,e,n){var r=n(2109),o=n(2050);r({target:"Object",stat:!0,forced:Object.isExtensible!==o},{isExtensible:o})},8410:function(t,e,n){var r=n(2109),o=n(7293),i=n(111),a=n(4326),c=n(7556),s=Object.isFrozen,u=o((function(){s(1)}));r({target:"Object",stat:!0,forced:u||c},{isFrozen:function(t){return!i(t)||(!(!c||"ArrayBuffer"!=a(t))||!!s&&s(t))}})},7941:function(t,e,n){var r=n(2109),o=n(7908),i=n(1956),a=n(7293),c=a((function(){i(1)}));r({target:"Object",stat:!0,forced:c},{keys:function(t){return i(o(t))}})},1539:function(t,e,n){var r=n(1694),o=n(8052),i=n(288);r||o(Object.prototype,"toString",i,{unsafe:!0})},821:function(t,e,n){"use strict";var r=n(2109),o=n(6916),i=n(9662),a=n(8523),c=n(2534),s=n(408),u=n(612);r({target:"Promise",stat:!0,forced:u},{all:function(t){var e=this,n=a.f(e),r=n.resolve,u=n.reject,f=c((function(){var n=i(e.resolve),a=[],c=0,f=1;s(t,(function(t){var i=c++,s=!1;f++,o(n,e,t).then((function(t){s||(s=!0,a[i]=t,--f||r(a))}),u)})),--f||r(a)}));return f.error&&u(f.value),n.promise}})},4164:function(t,e,n){"use strict";var r=n(2109),o=n(1913),i=n(3702).CONSTRUCTOR,a=n(2492),c=n(5005),s=n(614),u=n(8052),f=a&&a.prototype;if(r({target:"Promise",proto:!0,forced:i,real:!0},{catch:function(t){return this.then(void 0,t)}}),!o&&s(a)){var l=c("Promise").prototype["catch"];f["catch"]!==l&&u(f,"catch",l,{unsafe:!0})}},3401:function(t,e,n){"use strict";var r,o,i,a,c=n(2109),s=n(1913),u=n(5268),f=n(7854),l=n(6916),p=n(8052),v=n(7674),d=n(8003),h=n(6340),y=n(9662),m=n(614),g=n(111),b=n(5787),x=n(6707),_=n(261).set,w=n(5948),O=n(842),S=n(2534),C=n(8572),E=n(9909),k=n(2492),A=n(3702),j=n(8523),$="Promise",T=A.CONSTRUCTOR,I=A.REJECTION_EVENT,P=A.SUBCLASSING,R=E.getterFor($),N=E.set,L=k&&k.prototype,F=k,D=L,M=f.TypeError,U=f.document,z=f.process,V=j.f,B=V,G=!!(U&&U.createEvent&&f.dispatchEvent),H="unhandledrejection",K="rejectionhandled",W=0,q=1,Y=2,X=1,J=2,Z=function(t){var e;return!(!g(t)||!m(e=t.then))&&e},Q=function(t,e){var n,r,o,i=e.value,a=e.state==q,c=a?t.ok:t.fail,s=t.resolve,u=t.reject,f=t.domain;try{c?(a||(e.rejection===J&&ot(e),e.rejection=X),!0===c?n=i:(f&&f.enter(),n=c(i),f&&(f.exit(),o=!0)),n===t.promise?u(M("Promise-chain cycle")):(r=Z(n))?l(r,n,s,u):s(n)):u(i)}catch(p){f&&!o&&f.exit(),u(p)}},tt=function(t,e){t.notified||(t.notified=!0,w((function(){var n,r=t.reactions;while(n=r.get())Q(n,t);t.notified=!1,e&&!t.rejection&&nt(t)})))},et=function(t,e,n){var r,o;G?(r=U.createEvent("Event"),r.promise=e,r.reason=n,r.initEvent(t,!1,!0),f.dispatchEvent(r)):r={promise:e,reason:n},!I&&(o=f["on"+t])?o(r):t===H&&O("Unhandled promise rejection",n)},nt=function(t){l(_,f,(function(){var e,n=t.facade,r=t.value,o=rt(t);if(o&&(e=S((function(){u?z.emit("unhandledRejection",r,n):et(H,n,r)})),t.rejection=u||rt(t)?J:X,e.error))throw e.value}))},rt=function(t){return t.rejection!==X&&!t.parent},ot=function(t){l(_,f,(function(){var e=t.facade;u?z.emit("rejectionHandled",e):et(K,e,t.value)}))},it=function(t,e,n){return function(r){t(e,r,n)}},at=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=Y,tt(t,!0))},ct=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw M("Promise can't be resolved itself");var r=Z(e);r?w((function(){var n={done:!1};try{l(r,e,it(ct,n,t),it(at,n,t))}catch(o){at(n,o,t)}})):(t.value=e,t.state=q,tt(t,!1))}catch(o){at({done:!1},o,t)}}};if(T&&(F=function(t){b(this,D),y(t),l(r,this);var e=R(this);try{t(it(ct,e),it(at,e))}catch(n){at(e,n)}},D=F.prototype,r=function(t){N(this,{type:$,done:!1,notified:!1,parent:!1,reactions:new C,rejection:!1,state:W,value:void 0})},r.prototype=p(D,"then",(function(t,e){var n=R(this),r=V(x(this,F));return n.parent=!0,r.ok=!m(t)||t,r.fail=m(e)&&e,r.domain=u?z.domain:void 0,n.state==W?n.reactions.add(r):w((function(){Q(r,n)})),r.promise})),o=function(){var t=new r,e=R(t);this.promise=t,this.resolve=it(ct,e),this.reject=it(at,e)},j.f=V=function(t){return t===F||t===i?new o(t):B(t)},!s&&m(k)&&L!==Object.prototype)){a=L.then,P||p(L,"then",(function(t,e){var n=this;return new F((function(t,e){l(a,n,t,e)})).then(t,e)}),{unsafe:!0});try{delete L.constructor}catch(st){}v&&v(L,D)}c({global:!0,constructor:!0,wrap:!0,forced:T},{Promise:F}),d(F,$,!1,!0),h($)},7727:function(t,e,n){"use strict";var r=n(2109),o=n(1913),i=n(2492),a=n(7293),c=n(5005),s=n(614),u=n(6707),f=n(9478),l=n(8052),p=i&&i.prototype,v=!!i&&a((function(){p["finally"].call({then:function(){}},(function(){}))}));if(r({target:"Promise",proto:!0,real:!0,forced:v},{finally:function(t){var e=u(this,c("Promise")),n=s(t);return this.then(n?function(n){return f(e,t()).then((function(){return n}))}:t,n?function(n){return f(e,t()).then((function(){throw n}))}:t)}}),!o&&s(i)){var d=c("Promise").prototype["finally"];p["finally"]!==d&&l(p,"finally",d,{unsafe:!0})}},8674:function(t,e,n){n(3401),n(821),n(4164),n(6027),n(683),n(6294)},6027:function(t,e,n){"use strict";var r=n(2109),o=n(6916),i=n(9662),a=n(8523),c=n(2534),s=n(408),u=n(612);r({target:"Promise",stat:!0,forced:u},{race:function(t){var e=this,n=a.f(e),r=n.reject,u=c((function(){var a=i(e.resolve);s(t,(function(t){o(a,e,t).then(n.resolve,r)}))}));return u.error&&r(u.value),n.promise}})},683:function(t,e,n){"use strict";var r=n(2109),o=n(6916),i=n(8523),a=n(3702).CONSTRUCTOR;r({target:"Promise",stat:!0,forced:a},{reject:function(t){var e=i.f(this);return o(e.reject,void 0,t),e.promise}})},6294:function(t,e,n){"use strict";var r=n(2109),o=n(5005),i=n(1913),a=n(2492),c=n(3702).CONSTRUCTOR,s=n(9478),u=o("Promise"),f=i&&!c;r({target:"Promise",stat:!0,forced:i||c},{resolve:function(t){return s(f&&this===u?a:this,t)}})},7318:function(t,e,n){var r=n(2109),o=n(3887);r({target:"Reflect",stat:!0},{ownKeys:o})},1299:function(t,e,n){var r=n(2109),o=n(7854),i=n(8003);r({global:!0},{Reflect:{}}),i(o.Reflect,"Reflect",!0)},4603:function(t,e,n){var r=n(9781),o=n(7854),i=n(1702),a=n(4705),c=n(9587),s=n(8880),u=n(8006).f,f=n(7976),l=n(7850),p=n(1340),v=n(4706),d=n(2999),h=n(2626),y=n(8052),m=n(7293),g=n(2597),b=n(9909).enforce,x=n(6340),_=n(5112),w=n(9441),O=n(7168),S=_("match"),C=o.RegExp,E=C.prototype,k=o.SyntaxError,A=i(E.exec),j=i("".charAt),$=i("".replace),T=i("".indexOf),I=i("".slice),P=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,R=/a/g,N=/a/g,L=new C(R)!==R,F=d.MISSED_STICKY,D=d.UNSUPPORTED_Y,M=r&&(!L||F||w||O||m((function(){return N[S]=!1,C(R)!=R||C(N)==N||"/a/i"!=C(R,"i")}))),U=function(t){for(var e,n=t.length,r=0,o="",i=!1;r<=n;r++)e=j(t,r),"\\"!==e?i||"."!==e?("["===e?i=!0:"]"===e&&(i=!1),o+=e):o+="[\\s\\S]":o+=e+j(t,++r);return o},z=function(t){for(var e,n=t.length,r=0,o="",i=[],a={},c=!1,s=!1,u=0,f="";r<=n;r++){if(e=j(t,r),"\\"===e)e+=j(t,++r);else if("]"===e)c=!1;else if(!c)switch(!0){case"["===e:c=!0;break;case"("===e:A(P,I(t,r+1))&&(r+=2,s=!0),o+=e,u++;continue;case">"===e&&s:if(""===f||g(a,f))throw new k("Invalid capture group name");a[f]=!0,i[i.length]=[f,u],s=!1,f="";continue}s?f+=e:o+=e}return[o,i]};if(a("RegExp",M)){for(var V=function(t,e){var n,r,o,i,a,u,d=f(E,this),h=l(t),y=void 0===e,m=[],g=t;if(!d&&h&&y&&t.constructor===V)return t;if((h||f(E,t))&&(t=t.source,y&&(e=v(g))),t=void 0===t?"":p(t),e=void 0===e?"":p(e),g=t,w&&"dotAll"in R&&(r=!!e&&T(e,"s")>-1,r&&(e=$(e,/s/g,""))),n=e,F&&"sticky"in R&&(o=!!e&&T(e,"y")>-1,o&&D&&(e=$(e,/y/g,""))),O&&(i=z(t),t=i[0],m=i[1]),a=c(C(t,e),d?this:E,V),(r||o||m.length)&&(u=b(a),r&&(u.dotAll=!0,u.raw=V(U(t),n)),o&&(u.sticky=!0),m.length&&(u.groups=m)),t!==g)try{s(a,"source",""===g?"(?:)":g)}catch(x){}return a},B=u(C),G=0;B.length>G;)h(V,C,B[G++]);E.constructor=V,V.prototype=E,y(o,"RegExp",V,{constructor:!0})}x("RegExp")},8450:function(t,e,n){var r=n(7854),o=n(9781),i=n(9441),a=n(4326),c=n(7045),s=n(9909).get,u=RegExp.prototype,f=r.TypeError;o&&i&&c(u,"dotAll",{configurable:!0,get:function(){if(this!==u){if("RegExp"===a(this))return!!s(this).dotAll;throw f("Incompatible receiver, RegExp required")}}})},4916:function(t,e,n){"use strict";var r=n(2109),o=n(2261);r({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},8386:function(t,e,n){var r=n(7854),o=n(9781),i=n(2999).MISSED_STICKY,a=n(4326),c=n(7045),s=n(9909).get,u=RegExp.prototype,f=r.TypeError;o&&i&&c(u,"sticky",{configurable:!0,get:function(){if(this!==u){if("RegExp"===a(this))return!!s(this).sticky;throw f("Incompatible receiver, RegExp required")}}})},7601:function(t,e,n){"use strict";n(4916);var r=n(2109),o=n(7854),i=n(6916),a=n(1702),c=n(614),s=n(111),u=function(){var t=!1,e=/[ac]/;return e.exec=function(){return t=!0,/./.exec.apply(this,arguments)},!0===e.test("abc")&&t}(),f=o.Error,l=a(/./.test);r({target:"RegExp",proto:!0,forced:!u},{test:function(t){var e=this.exec;if(!c(e))return l(this,t);var n=i(e,this,t);if(null!==n&&!s(n))throw new f("RegExp exec method returned something other than an Object or null");return!!n}})},9714:function(t,e,n){"use strict";var r=n(6530).PROPER,o=n(8052),i=n(9670),a=n(1340),c=n(7293),s=n(4706),u="toString",f=RegExp.prototype,l=f[u],p=c((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),v=r&&l.name!=u;(p||v)&&o(RegExp.prototype,u,(function(){var t=i(this),e=a(t.source),n=a(s(t));return"/"+e+"/"+n}),{unsafe:!0})},7227:function(t,e,n){"use strict";var r=n(7710),o=n(5631);r("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),o)},189:function(t,e,n){n(7227)},8783:function(t,e,n){"use strict";var r=n(8710).charAt,o=n(1340),i=n(9909),a=n(654),c="String Iterator",s=i.set,u=i.getterFor(c);a(String,"String",(function(t){s(this,{type:c,string:o(t),index:0})}),(function(){var t,e=u(this),n=e.string,o=e.index;return o>=n.length?{value:void 0,done:!0}:(t=r(n,o),e.index+=t.length,{value:t,done:!1})}))},9254:function(t,e,n){"use strict";var r=n(2109),o=n(4230),i=n(3429);r({target:"String",proto:!0,forced:i("link")},{link:function(t){return o(this,"a","href",t)}})},4723:function(t,e,n){"use strict";var r=n(6916),o=n(7007),i=n(9670),a=n(7466),c=n(1340),s=n(4488),u=n(8173),f=n(1530),l=n(7651);o("match",(function(t,e,n){return[function(e){var n=s(this),o=void 0==e?void 0:u(e,t);return o?r(o,e,n):new RegExp(e)[t](c(n))},function(t){var r=i(this),o=c(t),s=n(e,r,o);if(s.done)return s.value;if(!r.global)return l(r,o);var u=r.unicode;r.lastIndex=0;var p,v=[],d=0;while(null!==(p=l(r,o))){var h=c(p[0]);v[d]=h,""===h&&(r.lastIndex=f(o,a(r.lastIndex),u)),d++}return 0===d?null:v}]}))},5306:function(t,e,n){"use strict";var r=n(2104),o=n(6916),i=n(1702),a=n(7007),c=n(7293),s=n(9670),u=n(614),f=n(9303),l=n(7466),p=n(1340),v=n(4488),d=n(1530),h=n(8173),y=n(647),m=n(7651),g=n(5112),b=g("replace"),x=Math.max,_=Math.min,w=i([].concat),O=i([].push),S=i("".indexOf),C=i("".slice),E=function(t){return void 0===t?t:String(t)},k=function(){return"$0"==="a".replace(/./,"$0")}(),A=function(){return!!/./[b]&&""===/./[b]("a","$0")}(),j=!c((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}));a("replace",(function(t,e,n){var i=A?"$":"$0";return[function(t,n){var r=v(this),i=void 0==t?void 0:h(t,b);return i?o(i,t,r,n):o(e,p(r),t,n)},function(t,o){var a=s(this),c=p(t);if("string"==typeof o&&-1===S(o,i)&&-1===S(o,"$<")){var v=n(e,a,c,o);if(v.done)return v.value}var h=u(o);h||(o=p(o));var g=a.global;if(g){var b=a.unicode;a.lastIndex=0}var k=[];while(1){var A=m(a,c);if(null===A)break;if(O(k,A),!g)break;var j=p(A[0]);""===j&&(a.lastIndex=d(c,l(a.lastIndex),b))}for(var $="",T=0,I=0;I<k.length;I++){A=k[I];for(var P=p(A[0]),R=x(_(f(A.index),c.length),0),N=[],L=1;L<A.length;L++)O(N,E(A[L]));var F=A.groups;if(h){var D=w([P],N,R,c);void 0!==F&&O(D,F);var M=p(r(o,void 0,D))}else M=y(P,c,R,N,F,o);R>=T&&($+=C(c,T,R)+M,T=R+P.length)}return $+C(c,T)}]}),!j||!k||A)},3123:function(t,e,n){"use strict";var r=n(2104),o=n(6916),i=n(1702),a=n(7007),c=n(7850),s=n(9670),u=n(4488),f=n(6707),l=n(1530),p=n(7466),v=n(1340),d=n(8173),h=n(1589),y=n(7651),m=n(2261),g=n(2999),b=n(7293),x=g.UNSUPPORTED_Y,_=4294967295,w=Math.min,O=[].push,S=i(/./.exec),C=i(O),E=i("".slice),k=!b((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));a("split",(function(t,e,n){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var i=v(u(this)),a=void 0===n?_:n>>>0;if(0===a)return[];if(void 0===t)return[i];if(!c(t))return o(e,i,t,a);var s,f,l,p=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),y=0,g=new RegExp(t.source,d+"g");while(s=o(m,g,i)){if(f=g.lastIndex,f>y&&(C(p,E(i,y,s.index)),s.length>1&&s.index<i.length&&r(O,p,h(s,1)),l=s[0].length,y=f,p.length>=a))break;g.lastIndex===s.index&&g.lastIndex++}return y===i.length?!l&&S(g,"")||C(p,""):C(p,E(i,y)),p.length>a?h(p,0,a):p}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:o(e,this,t,n)}:e,[function(e,n){var r=u(this),a=void 0==e?void 0:d(e,t);return a?o(a,e,r,n):o(i,v(r),e,n)},function(t,r){var o=s(this),a=v(t),c=n(i,o,a,r,i!==e);if(c.done)return c.value;var u=f(o,RegExp),d=o.unicode,h=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(x?"g":"y"),m=new u(x?"^(?:"+o.source+")":o,h),g=void 0===r?_:r>>>0;if(0===g)return[];if(0===a.length)return null===y(m,a)?[a]:[];var b=0,O=0,S=[];while(O<a.length){m.lastIndex=x?0:O;var k,A=y(m,x?E(a,O):a);if(null===A||(k=w(p(m.lastIndex+(x?O:0)),a.length))===b)O=l(a,O,d);else{if(C(S,E(a,b,O)),S.length===g)return S;for(var j=1;j<=A.length-1;j++)if(C(S,A[j]),S.length===g)return S;O=b=k}}return C(S,E(a,b)),S}]}),!k,x)},3210:function(t,e,n){"use strict";var r=n(2109),o=n(3111).trim,i=n(6091);r({target:"String",proto:!0,forced:i("trim")},{trim:function(){return o(this)}})},2443:function(t,e,n){var r=n(7235);r("asyncIterator")},4032:function(t,e,n){"use strict";var r=n(2109),o=n(7854),i=n(6916),a=n(1702),c=n(1913),s=n(9781),u=n(133),f=n(7293),l=n(2597),p=n(7976),v=n(9670),d=n(5656),h=n(4948),y=n(1340),m=n(9114),g=n(30),b=n(1956),x=n(8006),_=n(1156),w=n(5181),O=n(1236),S=n(3070),C=n(6048),E=n(5296),k=n(8052),A=n(2309),j=n(6200),$=n(3501),T=n(9711),I=n(5112),P=n(6061),R=n(7235),N=n(6532),L=n(8003),F=n(9909),D=n(2092).forEach,M=j("hidden"),U="Symbol",z="prototype",V=F.set,B=F.getterFor(U),G=Object[z],H=o.Symbol,K=H&&H[z],W=o.TypeError,q=o.QObject,Y=O.f,X=S.f,J=_.f,Z=E.f,Q=a([].push),tt=A("symbols"),et=A("op-symbols"),nt=A("wks"),rt=!q||!q[z]||!q[z].findChild,ot=s&&f((function(){return 7!=g(X({},"a",{get:function(){return X(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=Y(G,e);r&&delete G[e],X(t,e,n),r&&t!==G&&X(G,e,r)}:X,it=function(t,e){var n=tt[t]=g(K);return V(n,{type:U,tag:t,description:e}),s||(n.description=e),n},at=function(t,e,n){t===G&&at(et,e,n),v(t);var r=h(e);return v(n),l(tt,r)?(n.enumerable?(l(t,M)&&t[M][r]&&(t[M][r]=!1),n=g(n,{enumerable:m(0,!1)})):(l(t,M)||X(t,M,m(1,{})),t[M][r]=!0),ot(t,r,n)):X(t,r,n)},ct=function(t,e){v(t);var n=d(e),r=b(n).concat(pt(n));return D(r,(function(e){s&&!i(ut,n,e)||at(t,e,n[e])})),t},st=function(t,e){return void 0===e?g(t):ct(g(t),e)},ut=function(t){var e=h(t),n=i(Z,this,e);return!(this===G&&l(tt,e)&&!l(et,e))&&(!(n||!l(this,e)||!l(tt,e)||l(this,M)&&this[M][e])||n)},ft=function(t,e){var n=d(t),r=h(e);if(n!==G||!l(tt,r)||l(et,r)){var o=Y(n,r);return!o||!l(tt,r)||l(n,M)&&n[M][r]||(o.enumerable=!0),o}},lt=function(t){var e=J(d(t)),n=[];return D(e,(function(t){l(tt,t)||l($,t)||Q(n,t)})),n},pt=function(t){var e=t===G,n=J(e?et:d(t)),r=[];return D(n,(function(t){!l(tt,t)||e&&!l(G,t)||Q(r,tt[t])})),r};u||(H=function(){if(p(K,this))throw W("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?y(arguments[0]):void 0,e=T(t),n=function(t){this===G&&i(n,et,t),l(this,M)&&l(this[M],e)&&(this[M][e]=!1),ot(this,e,m(1,t))};return s&&rt&&ot(G,e,{configurable:!0,set:n}),it(e,t)},K=H[z],k(K,"toString",(function(){return B(this).tag})),k(H,"withoutSetter",(function(t){return it(T(t),t)})),E.f=ut,S.f=at,C.f=ct,O.f=ft,x.f=_.f=lt,w.f=pt,P.f=function(t){return it(I(t),t)},s&&(X(K,"description",{configurable:!0,get:function(){return B(this).description}}),c||k(G,"propertyIsEnumerable",ut,{unsafe:!0}))),r({global:!0,constructor:!0,wrap:!0,forced:!u,sham:!u},{Symbol:H}),D(b(nt),(function(t){R(t)})),r({target:U,stat:!0,forced:!u},{useSetter:function(){rt=!0},useSimple:function(){rt=!1}}),r({target:"Object",stat:!0,forced:!u,sham:!s},{create:st,defineProperty:at,defineProperties:ct,getOwnPropertyDescriptor:ft}),r({target:"Object",stat:!0,forced:!u},{getOwnPropertyNames:lt}),N(),L(H,U),$[M]=!0},1817:function(t,e,n){"use strict";var r=n(2109),o=n(9781),i=n(7854),a=n(1702),c=n(2597),s=n(614),u=n(7976),f=n(1340),l=n(3070).f,p=n(9920),v=i.Symbol,d=v&&v.prototype;if(o&&s(v)&&(!("description"in d)||void 0!==v().description)){var h={},y=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:f(arguments[0]),e=u(d,this)?new v(t):void 0===t?v():v(t);return""===t&&(h[e]=!0),e};p(y,v),y.prototype=d,d.constructor=y;var m="Symbol(test)"==String(v("test")),g=a(d.toString),b=a(d.valueOf),x=/^Symbol\((.*)\)[^)]+$/,_=a("".replace),w=a("".slice);l(d,"description",{configurable:!0,get:function(){var t=b(this),e=g(t);if(c(h,t))return"";var n=m?w(e,7,-1):_(e,x,"$1");return""===n?void 0:n}}),r({global:!0,constructor:!0,forced:!0},{Symbol:y})}},763:function(t,e,n){var r=n(2109),o=n(5005),i=n(2597),a=n(1340),c=n(2309),s=n(735),u=c("string-to-symbol-registry"),f=c("symbol-to-string-registry");r({target:"Symbol",stat:!0,forced:!s},{for:function(t){var e=a(t);if(i(u,e))return u[e];var n=o("Symbol")(e);return u[e]=n,f[n]=e,n}})},2165:function(t,e,n){var r=n(7235);r("iterator")},2526:function(t,e,n){n(4032),n(763),n(6620),n(8862),n(9660)},6620:function(t,e,n){var r=n(2109),o=n(2597),i=n(2190),a=n(6330),c=n(2309),s=n(735),u=c("symbol-to-string-registry");r({target:"Symbol",stat:!0,forced:!s},{keyFor:function(t){if(!i(t))throw TypeError(a(t)+" is not a symbol");if(o(u,t))return u[t]}})},3680:function(t,e,n){var r=n(5005),o=n(7235),i=n(8003);o("toStringTag"),i(r("Symbol"),"Symbol")},1091:function(t,e,n){var r=n(2109),o=n(7854),i=n(261).clear;r({global:!0,bind:!0,enumerable:!0,forced:o.clearImmediate!==i},{clearImmediate:i})},4747:function(t,e,n){var r=n(7854),o=n(8324),i=n(8509),a=n(8533),c=n(8880),s=function(t){if(t&&t.forEach!==a)try{c(t,"forEach",a)}catch(e){t.forEach=a}};for(var u in o)o[u]&&s(r[u]&&r[u].prototype);s(i)},3948:function(t,e,n){var r=n(7854),o=n(8324),i=n(8509),a=n(6992),c=n(8880),s=n(5112),u=s("iterator"),f=s("toStringTag"),l=a.values,p=function(t,e){if(t){if(t[u]!==l)try{c(t,u,l)}catch(r){t[u]=l}if(t[f]||c(t,f,e),o[e])for(var n in a)if(t[n]!==a[n])try{c(t,n,a[n])}catch(r){t[n]=a[n]}}};for(var v in o)p(r[v]&&r[v].prototype,v);p(i,"DOMTokenList")},4633:function(t,e,n){n(1091),n(2986)},2986:function(t,e,n){var r=n(2109),o=n(7854),i=n(261).set;r({global:!0,bind:!0,enumerable:!0,forced:o.setImmediate!==i},{setImmediate:i})},7964:function(t,e,n){function r(e){return t.exports=r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports["default"]=t.exports,r(e)}n(2526),n(1817),n(1539),n(2165),n(8783),n(3948),t.exports=r,t.exports.__esModule=!0,t.exports["default"]=t.exports},8975:function(t,e,n){t=n.nmd(t);var r=n(7964)["default"];n(2526),n(1817),n(1539),n(2165),n(8783),n(3948),n(2443),n(3680),n(3706),n(2703),n(489),n(8309),n(1703),n(4747),n(7042),n(5837);var o=function(t){"use strict";var e,n=Object.prototype,o=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(P){u=function(t,e,n){return t[e]=n}}function f(t,e,n,r){var o=e&&e.prototype instanceof m?e:m,i=Object.create(o.prototype),a=new $(r||[]);return i._invoke=E(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(P){return{type:"throw",arg:P}}}t.wrap=f;var p="suspendedStart",v="suspendedYield",d="executing",h="completed",y={};function m(){}function g(){}function b(){}var x={};u(x,a,(function(){return this}));var _=Object.getPrototypeOf,w=_&&_(_(T([])));w&&w!==n&&o.call(w,a)&&(x=w);var O=b.prototype=m.prototype=Object.create(x);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function n(i,a,c,s){var u=l(t[i],t,a);if("throw"!==u.type){var f=u.arg,p=f.value;return p&&"object"===r(p)&&o.call(p,"__await")?e.resolve(p.__await).then((function(t){n("next",t,c,s)}),(function(t){n("throw",t,c,s)})):e.resolve(p).then((function(t){f.value=t,c(f)}),(function(t){return n("throw",t,c,s)}))}s(u.arg)}var i;function a(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}this._invoke=a}function E(t,e,n){var r=p;return function(o,i){if(r===d)throw new Error("Generator is already running");if(r===h){if("throw"===o)throw i;return I()}n.method=o,n.arg=i;while(1){var a=n.delegate;if(a){var c=k(a,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===p)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var s=l(t,e,n);if("normal"===s.type){if(r=n.done?h:v,s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=h,n.method="throw",n.arg=s.arg)}}}function k(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator["return"]&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method))return y;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var o=l(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function $(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function T(t){if(t){var n=t[a];if(n)return n.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function n(){while(++r<t.length)if(o.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}return{next:I}}function I(){return{value:e,done:!0}}return g.prototype=b,u(O,"constructor",b),u(b,"constructor",g),g.displayName=u(b,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,s,"GeneratorFunction")),t.prototype=Object.create(O),t},t.awrap=function(t){return{__await:t}},S(C.prototype),u(C.prototype,c,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new C(f(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(O),u(O,s,"Generator"),u(O,a,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){while(e.length){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,$.prototype={constructor:$,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=o.call(a,"catchLoc"),u=o.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),j(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:T(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}("object"===r(t)?t.exports:{});try{regeneratorRuntime=o}catch(i){"object"===("undefined"===typeof globalThis?"undefined":r(globalThis))?globalThis.regeneratorRuntime=o:Function("r","regeneratorRuntime = r")(o)}}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={id:r,loaded:!1,exports:{}};return t[r](i,i.exports,n),i.loaded=!0,i.exports}!function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}();!function(){"use strict";n(6992),n(8674),n(9601),n(7727),n(2526),n(1817),n(1539),n(2165),n(8783),n(3948);function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}n(3371),n(7042),n(9714),n(8862),n(4916),n(3123),n(561),n(5306),n(7941),n(4603),n(8450),n(8386),n(7601),n(4723),n(1299),n(7318),n(189),n(8309),n(9600),n(1249),n(2707),n(6210),n(1825),n(5003),n(2222),n(9653),n(4633),n(8410),n(4747),n(3680),n(3706),n(2703),n(3210),n(7327);var e=Object.freeze({});function r(t){return void 0===t||null===t}function o(t){return void 0!==t&&null!==t}function i(t){return!0===t}function a(t){return!1===t}function c(e){return"string"===typeof e||"number"===typeof e||"symbol"===t(e)||"boolean"===typeof e}function s(e){return null!==e&&"object"===t(e)}var u=Object.prototype.toString;function f(t){return"[object Object]"===u.call(t)}function l(t){return"[object RegExp]"===u.call(t)}function p(t){var e=parseFloat(String(t));return e>=0&&Math.floor(e)===e&&isFinite(t)}function v(t){return o(t)&&"function"===typeof t.then&&"function"===typeof t.catch}function d(t){return null==t?"":Array.isArray(t)||f(t)&&t.toString===u?JSON.stringify(t,null,2):String(t)}function h(t){var e=parseFloat(t);return isNaN(e)?t:e}function y(t,e){for(var n=Object.create(null),r=t.split(","),o=0;o<r.length;o++)n[r[o]]=!0;return e?function(t){return n[t.toLowerCase()]}:function(t){return n[t]}}y("slot,component",!0);var m=y("key,ref,slot,slot-scope,is");function g(t,e){if(t.length){var n=t.indexOf(e);if(n>-1)return t.splice(n,1)}}var b=Object.prototype.hasOwnProperty;function x(t,e){return b.call(t,e)}function _(t){var e=Object.create(null);return function(n){var r=e[n];return r||(e[n]=t(n))}}var w=/-(\w)/g,O=_((function(t){return t.replace(w,(function(t,e){return e?e.toUpperCase():""}))})),S=_((function(t){return t.charAt(0).toUpperCase()+t.slice(1)})),C=/\B([A-Z])/g,E=_((function(t){return t.replace(C,"-$1").toLowerCase()}));function k(t,e){function n(n){var r=arguments.length;return r?r>1?t.apply(e,arguments):t.call(e,n):t.call(e)}return n._length=t.length,n}function A(t,e){return t.bind(e)}var j=Function.prototype.bind?A:k;function $(t,e){e=e||0;var n=t.length-e,r=new Array(n);while(n--)r[n]=t[n+e];return r}function T(t,e){for(var n in e)t[n]=e[n];return t}function I(t){for(var e={},n=0;n<t.length;n++)t[n]&&T(e,t[n]);return e}function P(t,e,n){}var R=function(t,e,n){return!1},N=function(t){return t};function L(t,e){if(t===e)return!0;var n=s(t),r=s(e);if(!n||!r)return!n&&!r&&String(t)===String(e);try{var o=Array.isArray(t),i=Array.isArray(e);if(o&&i)return t.length===e.length&&t.every((function(t,n){return L(t,e[n])}));if(t instanceof Date&&e instanceof Date)return t.getTime()===e.getTime();if(o||i)return!1;var a=Object.keys(t),c=Object.keys(e);return a.length===c.length&&a.every((function(n){return L(t[n],e[n])}))}catch(u){return!1}}function F(t,e){for(var n=0;n<t.length;n++)if(L(t[n],e))return n;return-1}function D(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}}var M="data-server-rendered",U=["component","directive","filter"],z=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],V={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:R,isReservedAttr:R,isUnknownElement:R,getTagNamespace:P,parsePlatformTagName:N,mustUseProp:R,async:!0,_lifecycleHooks:z},B=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function G(t){var e=(t+"").charCodeAt(0);return 36===e||95===e}function H(t,e,n,r){Object.defineProperty(t,e,{value:n,enumerable:!!r,writable:!0,configurable:!0})}var K=new RegExp("[^"+B.source+".$_\\d]");function W(t){if(!K.test(t)){var e=t.split(".");return function(t){for(var n=0;n<e.length;n++){if(!t)return;t=t[e[n]]}return t}}}var q,Y="__proto__"in{},X="undefined"!==typeof window,J="undefined"!==typeof WXEnvironment&&!!WXEnvironment.platform,Z=J&&WXEnvironment.platform.toLowerCase(),Q=X&&window.navigator.userAgent.toLowerCase(),tt=Q&&/msie|trident/.test(Q),et=Q&&Q.indexOf("msie 9.0")>0,nt=Q&&Q.indexOf("edge/")>0,rt=(Q&&Q.indexOf("android"),Q&&/iphone|ipad|ipod|ios/.test(Q)||"ios"===Z),ot=(Q&&/chrome\/\d+/.test(Q),Q&&/phantomjs/.test(Q),Q&&Q.match(/firefox\/(\d+)/)),it={}.watch,at=!1;if(X)try{var ct={};Object.defineProperty(ct,"passive",{get:function(){at=!0}}),window.addEventListener("test-passive",null,ct)}catch(Da){}var st=function(){return void 0===q&&(q=!X&&!J&&"undefined"!==typeof n.g&&(n.g["process"]&&"server"===n.g["process"].env.VUE_ENV)),q},ut=X&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function ft(t){return"function"===typeof t&&/native code/.test(t.toString())}var lt,pt="undefined"!==typeof Symbol&&ft(Symbol)&&"undefined"!==typeof Reflect&&ft(Reflect.ownKeys);lt="undefined"!==typeof Set&&ft(Set)?Set:function(){function t(){this.set=Object.create(null)}return t.prototype.has=function(t){return!0===this.set[t]},t.prototype.add=function(t){this.set[t]=!0},t.prototype.clear=function(){this.set=Object.create(null)},t}();var vt=P,dt=0,ht=function(){this.id=dt++,this.subs=[]};ht.prototype.addSub=function(t){this.subs.push(t)},ht.prototype.removeSub=function(t){g(this.subs,t)},ht.prototype.depend=function(){ht.target&&ht.target.addDep(this)},ht.prototype.notify=function(){var t=this.subs.slice();for(var e=0,n=t.length;e<n;e++)t[e].update()},ht.target=null;var yt=[];function mt(t){yt.push(t),ht.target=t}function gt(){yt.pop(),ht.target=yt[yt.length-1]}var bt=function(t,e,n,r,o,i,a,c){this.tag=t,this.data=e,this.children=n,this.text=r,this.elm=o,this.ns=void 0,this.context=i,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=e&&e.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=c,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},xt={child:{configurable:!0}};xt.child.get=function(){return this.componentInstance},Object.defineProperties(bt.prototype,xt);var _t=function(t){void 0===t&&(t="");var e=new bt;return e.text=t,e.isComment=!0,e};function wt(t){return new bt(void 0,void 0,void 0,String(t))}function Ot(t){var e=new bt(t.tag,t.data,t.children&&t.children.slice(),t.text,t.elm,t.context,t.componentOptions,t.asyncFactory);return e.ns=t.ns,e.isStatic=t.isStatic,e.key=t.key,e.isComment=t.isComment,e.fnContext=t.fnContext,e.fnOptions=t.fnOptions,e.fnScopeId=t.fnScopeId,e.asyncMeta=t.asyncMeta,e.isCloned=!0,e}var St=Array.prototype,Ct=Object.create(St),Et=["push","pop","shift","unshift","splice","sort","reverse"];Et.forEach((function(t){var e=St[t];H(Ct,t,(function(){var n=[],r=arguments.length;while(r--)n[r]=arguments[r];var o,i=e.apply(this,n),a=this.__ob__;switch(t){case"push":case"unshift":o=n;break;case"splice":o=n.slice(2);break}return o&&a.observeArray(o),a.dep.notify(),i}))}));var kt=Object.getOwnPropertyNames(Ct),At=!0;function jt(t){At=t}var $t=function(t){this.value=t,this.dep=new ht,this.vmCount=0,H(t,"__ob__",this),Array.isArray(t)?(Y?Tt(t,Ct):It(t,Ct,kt),this.observeArray(t)):this.walk(t)};function Tt(t,e){t.__proto__=e}function It(t,e,n){for(var r=0,o=n.length;r<o;r++){var i=n[r];H(t,i,e[i])}}function Pt(t,e){var n;if(s(t)&&!(t instanceof bt))return x(t,"__ob__")&&t.__ob__ instanceof $t?n=t.__ob__:At&&!st()&&(Array.isArray(t)||f(t))&&Object.isExtensible(t)&&!t._isVue&&(n=new $t(t)),e&&n&&n.vmCount++,n}function Rt(t,e,n,r,o){var i=new ht,a=Object.getOwnPropertyDescriptor(t,e);if(!a||!1!==a.configurable){var c=a&&a.get,s=a&&a.set;c&&!s||2!==arguments.length||(n=t[e]);var u=!o&&Pt(n);Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){var e=c?c.call(t):n;return ht.target&&(i.depend(),u&&(u.dep.depend(),Array.isArray(e)&&Ft(e))),e},set:function(e){var r=c?c.call(t):n;e===r||e!==e&&r!==r||c&&!s||(s?s.call(t,e):n=e,u=!o&&Pt(e),i.notify())}})}}function Nt(t,e,n){if(Array.isArray(t)&&p(e))return t.length=Math.max(t.length,e),t.splice(e,1,n),n;if(e in t&&!(e in Object.prototype))return t[e]=n,n;var r=t.__ob__;return t._isVue||r&&r.vmCount?n:r?(Rt(r.value,e,n),r.dep.notify(),n):(t[e]=n,n)}function Lt(t,e){if(Array.isArray(t)&&p(e))t.splice(e,1);else{var n=t.__ob__;t._isVue||n&&n.vmCount||x(t,e)&&(delete t[e],n&&n.dep.notify())}}function Ft(t){for(var e=void 0,n=0,r=t.length;n<r;n++)e=t[n],e&&e.__ob__&&e.__ob__.dep.depend(),Array.isArray(e)&&Ft(e)}$t.prototype.walk=function(t){for(var e=Object.keys(t),n=0;n<e.length;n++)Rt(t,e[n])},$t.prototype.observeArray=function(t){for(var e=0,n=t.length;e<n;e++)Pt(t[e])};var Dt=V.optionMergeStrategies;function Mt(t,e){if(!e)return t;for(var n,r,o,i=pt?Reflect.ownKeys(e):Object.keys(e),a=0;a<i.length;a++)n=i[a],"__ob__"!==n&&(r=t[n],o=e[n],x(t,n)?r!==o&&f(r)&&f(o)&&Mt(r,o):Nt(t,n,o));return t}function Ut(t,e,n){return n?function(){var r="function"===typeof e?e.call(n,n):e,o="function"===typeof t?t.call(n,n):t;return r?Mt(r,o):o}:e?t?function(){return Mt("function"===typeof e?e.call(this,this):e,"function"===typeof t?t.call(this,this):t)}:e:t}function zt(t,e){var n=e?t?t.concat(e):Array.isArray(e)?e:[e]:t;return n?Vt(n):n}function Vt(t){for(var e=[],n=0;n<t.length;n++)-1===e.indexOf(t[n])&&e.push(t[n]);return e}function Bt(t,e,n,r){var o=Object.create(t||null);return e?T(o,e):o}Dt.data=function(t,e,n){return n?Ut(t,e,n):e&&"function"!==typeof e?t:Ut(t,e)},z.forEach((function(t){Dt[t]=zt})),U.forEach((function(t){Dt[t+"s"]=Bt})),Dt.watch=function(t,e,n,r){if(t===it&&(t=void 0),e===it&&(e=void 0),!e)return Object.create(t||null);if(!t)return e;var o={};for(var i in T(o,t),e){var a=o[i],c=e[i];a&&!Array.isArray(a)&&(a=[a]),o[i]=a?a.concat(c):Array.isArray(c)?c:[c]}return o},Dt.props=Dt.methods=Dt.inject=Dt.computed=function(t,e,n,r){if(!t)return e;var o=Object.create(null);return T(o,t),e&&T(o,e),o},Dt.provide=Ut;var Gt=function(t,e){return void 0===e?t:e};function Ht(t,e){var n=t.props;if(n){var r,o,i,a={};if(Array.isArray(n)){r=n.length;while(r--)o=n[r],"string"===typeof o&&(i=O(o),a[i]={type:null})}else if(f(n))for(var c in n)o=n[c],i=O(c),a[i]=f(o)?o:{type:o};else 0;t.props=a}}function Kt(t,e){var n=t.inject;if(n){var r=t.inject={};if(Array.isArray(n))for(var o=0;o<n.length;o++)r[n[o]]={from:n[o]};else if(f(n))for(var i in n){var a=n[i];r[i]=f(a)?T({from:i},a):{from:a}}else 0}}function Wt(t){var e=t.directives;if(e)for(var n in e){var r=e[n];"function"===typeof r&&(e[n]={bind:r,update:r})}}function qt(t,e,n){if("function"===typeof e&&(e=e.options),Ht(e,n),Kt(e,n),Wt(e),!e._base&&(e.extends&&(t=qt(t,e.extends,n)),e.mixins))for(var r=0,o=e.mixins.length;r<o;r++)t=qt(t,e.mixins[r],n);var i,a={};for(i in t)c(i);for(i in e)x(t,i)||c(i);function c(r){var o=Dt[r]||Gt;a[r]=o(t[r],e[r],n,r)}return a}function Yt(t,e,n,r){if("string"===typeof n){var o=t[e];if(x(o,n))return o[n];var i=O(n);if(x(o,i))return o[i];var a=S(i);if(x(o,a))return o[a];var c=o[n]||o[i]||o[a];return c}}function Xt(t,e,n,r){var o=e[t],i=!x(n,t),a=n[t],c=ee(Boolean,o.type);if(c>-1)if(i&&!x(o,"default"))a=!1;else if(""===a||a===E(t)){var s=ee(String,o.type);(s<0||c<s)&&(a=!0)}if(void 0===a){a=Jt(r,o,t);var u=At;jt(!0),Pt(a),jt(u)}return a}function Jt(t,e,n){if(x(e,"default")){var r=e.default;return t&&t.$options.propsData&&void 0===t.$options.propsData[n]&&void 0!==t._props[n]?t._props[n]:"function"===typeof r&&"Function"!==Qt(e.type)?r.call(t):r}}var Zt=/^\s*function (\w+)/;function Qt(t){var e=t&&t.toString().match(Zt);return e?e[1]:""}function te(t,e){return Qt(t)===Qt(e)}function ee(t,e){if(!Array.isArray(e))return te(e,t)?0:-1;for(var n=0,r=e.length;n<r;n++)if(te(e[n],t))return n;return-1}function ne(t,e,n){mt();try{if(e){var r=e;while(r=r.$parent){var o=r.$options.errorCaptured;if(o)for(var i=0;i<o.length;i++)try{var a=!1===o[i].call(r,t,e,n);if(a)return}catch(Da){oe(Da,r,"errorCaptured hook")}}}oe(t,e,n)}finally{gt()}}function re(t,e,n,r,o){var i;try{i=n?t.apply(e,n):t.call(e),i&&!i._isVue&&v(i)&&!i._handled&&(i.catch((function(t){return ne(t,r,o+" (Promise/async)")})),i._handled=!0)}catch(Da){ne(Da,r,o)}return i}function oe(t,e,n){if(V.errorHandler)try{return V.errorHandler.call(null,t,e,n)}catch(Da){Da!==t&&ie(Da,null,"config.errorHandler")}ie(t,e,n)}function ie(t,e,n){if(!X&&!J||"undefined"===typeof console)throw t;console.error(t)}var ae,ce=!1,se=[],ue=!1;function fe(){ue=!1;var t=se.slice(0);se.length=0;for(var e=0;e<t.length;e++)t[e]()}if("undefined"!==typeof Promise&&ft(Promise)){var le=Promise.resolve();ae=function(){le.then(fe),rt&&setTimeout(P)},ce=!0}else if(tt||"undefined"===typeof MutationObserver||!ft(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())ae="undefined"!==typeof setImmediate&&ft(setImmediate)?function(){setImmediate(fe)}:function(){setTimeout(fe,0)};else{var pe=1,ve=new MutationObserver(fe),de=document.createTextNode(String(pe));ve.observe(de,{characterData:!0}),ae=function(){pe=(pe+1)%2,de.data=String(pe)},ce=!0}function he(t,e){var n;if(se.push((function(){if(t)try{t.call(e)}catch(Da){ne(Da,e,"nextTick")}else n&&n(e)})),ue||(ue=!0,ae()),!t&&"undefined"!==typeof Promise)return new Promise((function(t){n=t}))}var ye=new lt;function me(t){ge(t,ye),ye.clear()}function ge(t,e){var n,r,o=Array.isArray(t);if(!(!o&&!s(t)||Object.isFrozen(t)||t instanceof bt)){if(t.__ob__){var i=t.__ob__.dep.id;if(e.has(i))return;e.add(i)}if(o){n=t.length;while(n--)ge(t[n],e)}else{r=Object.keys(t),n=r.length;while(n--)ge(t[r[n]],e)}}}var be=_((function(t){var e="&"===t.charAt(0);t=e?t.slice(1):t;var n="~"===t.charAt(0);t=n?t.slice(1):t;var r="!"===t.charAt(0);return t=r?t.slice(1):t,{name:t,once:n,capture:r,passive:e}}));function xe(t,e){function n(){var t=arguments,r=n.fns;if(!Array.isArray(r))return re(r,null,arguments,e,"v-on handler");for(var o=r.slice(),i=0;i<o.length;i++)re(o[i],null,t,e,"v-on handler")}return n.fns=t,n}function _e(t,e,n,o,a,c){var s,u,f,l;for(s in t)u=t[s],f=e[s],l=be(s),r(u)||(r(f)?(r(u.fns)&&(u=t[s]=xe(u,c)),i(l.once)&&(u=t[s]=a(l.name,u,l.capture)),n(l.name,u,l.capture,l.passive,l.params)):u!==f&&(f.fns=u,t[s]=f));for(s in e)r(t[s])&&(l=be(s),o(l.name,e[s],l.capture))}function we(t,e,n){var a;t instanceof bt&&(t=t.data.hook||(t.data.hook={}));var c=t[e];function s(){n.apply(this,arguments),g(a.fns,s)}r(c)?a=xe([s]):o(c.fns)&&i(c.merged)?(a=c,a.fns.push(s)):a=xe([c,s]),a.merged=!0,t[e]=a}function Oe(t,e,n){var i=e.options.props;if(!r(i)){var a={},c=t.attrs,s=t.props;if(o(c)||o(s))for(var u in i){var f=E(u);Se(a,s,u,f,!0)||Se(a,c,u,f,!1)}return a}}function Se(t,e,n,r,i){if(o(e)){if(x(e,n))return t[n]=e[n],i||delete e[n],!0;if(x(e,r))return t[n]=e[r],i||delete e[r],!0}return!1}function Ce(t){for(var e=0;e<t.length;e++)if(Array.isArray(t[e]))return Array.prototype.concat.apply([],t);return t}function Ee(t){return c(t)?[wt(t)]:Array.isArray(t)?Ae(t):void 0}function ke(t){return o(t)&&o(t.text)&&a(t.isComment)}function Ae(t,e){var n,a,s,u,f=[];for(n=0;n<t.length;n++)a=t[n],r(a)||"boolean"===typeof a||(s=f.length-1,u=f[s],Array.isArray(a)?a.length>0&&(a=Ae(a,(e||"")+"_"+n),ke(a[0])&&ke(u)&&(f[s]=wt(u.text+a[0].text),a.shift()),f.push.apply(f,a)):c(a)?ke(u)?f[s]=wt(u.text+a):""!==a&&f.push(wt(a)):ke(a)&&ke(u)?f[s]=wt(u.text+a.text):(i(t._isVList)&&o(a.tag)&&r(a.key)&&o(e)&&(a.key="__vlist"+e+"_"+n+"__"),f.push(a)));return f}function je(t){var e=t.$options.provide;e&&(t._provided="function"===typeof e?e.call(t):e)}function $e(t){var e=Te(t.$options.inject,t);e&&(jt(!1),Object.keys(e).forEach((function(n){Rt(t,n,e[n])})),jt(!0))}function Te(t,e){if(t){for(var n=Object.create(null),r=pt?Reflect.ownKeys(t):Object.keys(t),o=0;o<r.length;o++){var i=r[o];if("__ob__"!==i){var a=t[i].from,c=e;while(c){if(c._provided&&x(c._provided,a)){n[i]=c._provided[a];break}c=c.$parent}if(!c)if("default"in t[i]){var s=t[i].default;n[i]="function"===typeof s?s.call(e):s}else 0}}return n}}function Ie(t,e){if(!t||!t.length)return{};for(var n={},r=0,o=t.length;r<o;r++){var i=t[r],a=i.data;if(a&&a.attrs&&a.attrs.slot&&delete a.attrs.slot,i.context!==e&&i.fnContext!==e||!a||null==a.slot)(n.default||(n.default=[])).push(i);else{var c=a.slot,s=n[c]||(n[c]=[]);"template"===i.tag?s.push.apply(s,i.children||[]):s.push(i)}}for(var u in n)n[u].every(Pe)&&delete n[u];return n}function Pe(t){return t.isComment&&!t.asyncFactory||" "===t.text}function Re(t){return t.isComment&&t.asyncFactory}function Ne(t,n,r){var o,i=Object.keys(n).length>0,a=t?!!t.$stable:!i,c=t&&t.$key;if(t){if(t._normalized)return t._normalized;if(a&&r&&r!==e&&c===r.$key&&!i&&!r.$hasNormal)return r;for(var s in o={},t)t[s]&&"$"!==s[0]&&(o[s]=Le(n,s,t[s]))}else o={};for(var u in n)u in o||(o[u]=Fe(n,u));return t&&Object.isExtensible(t)&&(t._normalized=o),H(o,"$stable",a),H(o,"$key",c),H(o,"$hasNormal",i),o}function Le(e,n,r){var o=function(){var e=arguments.length?r.apply(null,arguments):r({});e=e&&"object"===t(e)&&!Array.isArray(e)?[e]:Ee(e);var n=e&&e[0];return e&&(!n||1===e.length&&n.isComment&&!Re(n))?void 0:e};return r.proxy&&Object.defineProperty(e,n,{get:o,enumerable:!0,configurable:!0}),o}function Fe(t,e){return function(){return t[e]}}function De(t,e){var n,r,i,a,c;if(Array.isArray(t)||"string"===typeof t)for(n=new Array(t.length),r=0,i=t.length;r<i;r++)n[r]=e(t[r],r);else if("number"===typeof t)for(n=new Array(t),r=0;r<t;r++)n[r]=e(r+1,r);else if(s(t))if(pt&&t[Symbol.iterator]){n=[];var u=t[Symbol.iterator](),f=u.next();while(!f.done)n.push(e(f.value,n.length)),f=u.next()}else for(a=Object.keys(t),n=new Array(a.length),r=0,i=a.length;r<i;r++)c=a[r],n[r]=e(t[c],c,r);return o(n)||(n=[]),n._isVList=!0,n}function Me(t,e,n,r){var o,i=this.$scopedSlots[t];i?(n=n||{},r&&(n=T(T({},r),n)),o=i(n)||("function"===typeof e?e():e)):o=this.$slots[t]||("function"===typeof e?e():e);var a=n&&n.slot;return a?this.$createElement("template",{slot:a},o):o}function Ue(t){return Yt(this.$options,"filters",t,!0)||N}function ze(t,e){return Array.isArray(t)?-1===t.indexOf(e):t!==e}function Ve(t,e,n,r,o){var i=V.keyCodes[e]||n;return o&&r&&!V.keyCodes[e]?ze(o,r):i?ze(i,t):r?E(r)!==e:void 0===t}function Be(t,e,n,r,o){if(n)if(s(n)){var i;Array.isArray(n)&&(n=I(n));var a=function(a){if("class"===a||"style"===a||m(a))i=t;else{var c=t.attrs&&t.attrs.type;i=r||V.mustUseProp(e,c,a)?t.domProps||(t.domProps={}):t.attrs||(t.attrs={})}var s=O(a),u=E(a);if(!(s in i)&&!(u in i)&&(i[a]=n[a],o)){var f=t.on||(t.on={});f["update:"+a]=function(t){n[a]=t}}};for(var c in n)a(c)}else;return t}function Ge(t,e){var n=this._staticTrees||(this._staticTrees=[]),r=n[t];return r&&!e||(r=n[t]=this.$options.staticRenderFns[t].call(this._renderProxy,null,this),Ke(r,"__static__"+t,!1)),r}function He(t,e,n){return Ke(t,"__once__"+e+(n?"_"+n:""),!0),t}function Ke(t,e,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]&&"string"!==typeof t[r]&&We(t[r],e+"_"+r,n);else We(t,e,n)}function We(t,e,n){t.isStatic=!0,t.key=e,t.isOnce=n}function qe(t,e){if(e)if(f(e)){var n=t.on=t.on?T({},t.on):{};for(var r in e){var o=n[r],i=e[r];n[r]=o?[].concat(o,i):i}}else;return t}function Ye(t,e,n,r){e=e||{$stable:!n};for(var o=0;o<t.length;o++){var i=t[o];Array.isArray(i)?Ye(i,e,n):i&&(i.proxy&&(i.fn.proxy=!0),e[i.key]=i.fn)}return r&&(e.$key=r),e}function Xe(t,e){for(var n=0;n<e.length;n+=2){var r=e[n];"string"===typeof r&&r&&(t[e[n]]=e[n+1])}return t}function Je(t,e){return"string"===typeof t?e+t:t}function Ze(t){t._o=He,t._n=h,t._s=d,t._l=De,t._t=Me,t._q=L,t._i=F,t._m=Ge,t._f=Ue,t._k=Ve,t._b=Be,t._v=wt,t._e=_t,t._u=Ye,t._g=qe,t._d=Xe,t._p=Je}function Qe(t,n,r,o,a){var c,s=this,u=a.options;x(o,"_uid")?(c=Object.create(o),c._original=o):(c=o,o=o._original);var f=i(u._compiled),l=!f;this.data=t,this.props=n,this.children=r,this.parent=o,this.listeners=t.on||e,this.injections=Te(u.inject,o),this.slots=function(){return s.$slots||Ne(t.scopedSlots,s.$slots=Ie(r,o)),s.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return Ne(t.scopedSlots,this.slots())}}),f&&(this.$options=u,this.$slots=this.slots(),this.$scopedSlots=Ne(t.scopedSlots,this.$slots)),u._scopeId?this._c=function(t,e,n,r){var i=vn(c,t,e,n,r,l);return i&&!Array.isArray(i)&&(i.fnScopeId=u._scopeId,i.fnContext=o),i}:this._c=function(t,e,n,r){return vn(c,t,e,n,r,l)}}function tn(t,n,r,i,a){var c=t.options,s={},u=c.props;if(o(u))for(var f in u)s[f]=Xt(f,u,n||e);else o(r.attrs)&&nn(s,r.attrs),o(r.props)&&nn(s,r.props);var l=new Qe(r,s,a,i,t),p=c.render.call(null,l._c,l);if(p instanceof bt)return en(p,r,l.parent,c,l);if(Array.isArray(p)){for(var v=Ee(p)||[],d=new Array(v.length),h=0;h<v.length;h++)d[h]=en(v[h],r,l.parent,c,l);return d}}function en(t,e,n,r,o){var i=Ot(t);return i.fnContext=n,i.fnOptions=r,e.slot&&((i.data||(i.data={})).slot=e.slot),i}function nn(t,e){for(var n in e)t[O(n)]=e[n]}Ze(Qe.prototype);var rn={init:function(t,e){if(t.componentInstance&&!t.componentInstance._isDestroyed&&t.data.keepAlive){var n=t;rn.prepatch(n,n)}else{var r=t.componentInstance=cn(t,Tn);r.$mount(e?t.elm:void 0,e)}},prepatch:function(t,e){var n=e.componentOptions,r=e.componentInstance=t.componentInstance;Ln(r,n.propsData,n.listeners,e,n.children)},insert:function(t){var e=t.context,n=t.componentInstance;n._isMounted||(n._isMounted=!0,Un(n,"mounted")),t.data.keepAlive&&(e._isMounted?Qn(n):Dn(n,!0))},destroy:function(t){var e=t.componentInstance;e._isDestroyed||(t.data.keepAlive?Mn(e,!0):e.$destroy())}},on=Object.keys(rn);function an(t,e,n,a,c){if(!r(t)){var u=n.$options._base;if(s(t)&&(t=u.extend(t)),"function"===typeof t){var f;if(r(t.cid)&&(f=t,t=On(f,u),void 0===t))return wn(f,e,n,a,c);e=e||{},wr(t),o(e.model)&&fn(t.options,e);var l=Oe(e,t,c);if(i(t.options.functional))return tn(t,l,e,n,a);var p=e.on;if(e.on=e.nativeOn,i(t.options.abstract)){var v=e.slot;e={},v&&(e.slot=v)}sn(e);var d=t.options.name||c,h=new bt("vue-component-"+t.cid+(d?"-"+d:""),e,void 0,void 0,void 0,n,{Ctor:t,propsData:l,listeners:p,tag:c,children:a},f);return h}}}function cn(t,e){var n={_isComponent:!0,_parentVnode:t,parent:e},r=t.data.inlineTemplate;return o(r)&&(n.render=r.render,n.staticRenderFns=r.staticRenderFns),new t.componentOptions.Ctor(n)}function sn(t){for(var e=t.hook||(t.hook={}),n=0;n<on.length;n++){var r=on[n],o=e[r],i=rn[r];o===i||o&&o._merged||(e[r]=o?un(i,o):i)}}function un(t,e){var n=function(n,r){t(n,r),e(n,r)};return n._merged=!0,n}function fn(t,e){var n=t.model&&t.model.prop||"value",r=t.model&&t.model.event||"input";(e.attrs||(e.attrs={}))[n]=e.model.value;var i=e.on||(e.on={}),a=i[r],c=e.model.callback;o(a)?(Array.isArray(a)?-1===a.indexOf(c):a!==c)&&(i[r]=[c].concat(a)):i[r]=c}var ln=1,pn=2;function vn(t,e,n,r,o,a){return(Array.isArray(n)||c(n))&&(o=r,r=n,n=void 0),i(a)&&(o=pn),dn(t,e,n,r,o)}function dn(t,e,n,r,i){if(o(n)&&o(n.__ob__))return _t();if(o(n)&&o(n.is)&&(e=n.is),!e)return _t();var a,c,s;(Array.isArray(r)&&"function"===typeof r[0]&&(n=n||{},n.scopedSlots={default:r[0]},r.length=0),i===pn?r=Ee(r):i===ln&&(r=Ce(r)),"string"===typeof e)?(c=t.$vnode&&t.$vnode.ns||V.getTagNamespace(e),a=V.isReservedTag(e)?new bt(V.parsePlatformTagName(e),n,r,void 0,void 0,t):n&&n.pre||!o(s=Yt(t.$options,"components",e))?new bt(e,n,r,void 0,void 0,t):an(s,n,t,r,e)):a=an(e,n,t,r);return Array.isArray(a)?a:o(a)?(o(c)&&hn(a,c),o(n)&&yn(n),a):_t()}function hn(t,e,n){if(t.ns=e,"foreignObject"===t.tag&&(e=void 0,n=!0),o(t.children))for(var a=0,c=t.children.length;a<c;a++){var s=t.children[a];o(s.tag)&&(r(s.ns)||i(n)&&"svg"!==s.tag)&&hn(s,e,n)}}function yn(t){s(t.style)&&me(t.style),s(t.class)&&me(t.class)}function mn(t){t._vnode=null,t._staticTrees=null;var n=t.$options,r=t.$vnode=n._parentVnode,o=r&&r.context;t.$slots=Ie(n._renderChildren,o),t.$scopedSlots=e,t._c=function(e,n,r,o){return vn(t,e,n,r,o,!1)},t.$createElement=function(e,n,r,o){return vn(t,e,n,r,o,!0)};var i=r&&r.data;Rt(t,"$attrs",i&&i.attrs||e,null,!0),Rt(t,"$listeners",n._parentListeners||e,null,!0)}var gn,bn=null;function xn(t){Ze(t.prototype),t.prototype.$nextTick=function(t){return he(t,this)},t.prototype._render=function(){var t,e=this,n=e.$options,r=n.render,o=n._parentVnode;o&&(e.$scopedSlots=Ne(o.data.scopedSlots,e.$slots,e.$scopedSlots)),e.$vnode=o;try{bn=e,t=r.call(e._renderProxy,e.$createElement)}catch(Da){ne(Da,e,"render"),t=e._vnode}finally{bn=null}return Array.isArray(t)&&1===t.length&&(t=t[0]),t instanceof bt||(t=_t()),t.parent=o,t}}function _n(t,e){return(t.__esModule||pt&&"Module"===t[Symbol.toStringTag])&&(t=t.default),s(t)?e.extend(t):t}function wn(t,e,n,r,o){var i=_t();return i.asyncFactory=t,i.asyncMeta={data:e,context:n,children:r,tag:o},i}function On(t,e){if(i(t.error)&&o(t.errorComp))return t.errorComp;if(o(t.resolved))return t.resolved;var n=bn;if(n&&o(t.owners)&&-1===t.owners.indexOf(n)&&t.owners.push(n),i(t.loading)&&o(t.loadingComp))return t.loadingComp;if(n&&!o(t.owners)){var a=t.owners=[n],c=!0,u=null,f=null;n.$on("hook:destroyed",(function(){return g(a,n)}));var l=function(t){for(var e=0,n=a.length;e<n;e++)a[e].$forceUpdate();t&&(a.length=0,null!==u&&(clearTimeout(u),u=null),null!==f&&(clearTimeout(f),f=null))},p=D((function(n){t.resolved=_n(n,e),c?a.length=0:l(!0)})),d=D((function(e){o(t.errorComp)&&(t.error=!0,l(!0))})),h=t(p,d);return s(h)&&(v(h)?r(t.resolved)&&h.then(p,d):v(h.component)&&(h.component.then(p,d),o(h.error)&&(t.errorComp=_n(h.error,e)),o(h.loading)&&(t.loadingComp=_n(h.loading,e),0===h.delay?t.loading=!0:u=setTimeout((function(){u=null,r(t.resolved)&&r(t.error)&&(t.loading=!0,l(!1))}),h.delay||200)),o(h.timeout)&&(f=setTimeout((function(){f=null,r(t.resolved)&&d(null)}),h.timeout)))),c=!1,t.loading?t.loadingComp:t.resolved}}function Sn(t){if(Array.isArray(t))for(var e=0;e<t.length;e++){var n=t[e];if(o(n)&&(o(n.componentOptions)||Re(n)))return n}}function Cn(t){t._events=Object.create(null),t._hasHookEvent=!1;var e=t.$options._parentListeners;e&&jn(t,e)}function En(t,e){gn.$on(t,e)}function kn(t,e){gn.$off(t,e)}function An(t,e){var n=gn;return function r(){var o=e.apply(null,arguments);null!==o&&n.$off(t,r)}}function jn(t,e,n){gn=t,_e(e,n||{},En,kn,An,t),gn=void 0}function $n(t){var e=/^hook:/;t.prototype.$on=function(t,n){var r=this;if(Array.isArray(t))for(var o=0,i=t.length;o<i;o++)r.$on(t[o],n);else(r._events[t]||(r._events[t]=[])).push(n),e.test(t)&&(r._hasHookEvent=!0);return r},t.prototype.$once=function(t,e){var n=this;function r(){n.$off(t,r),e.apply(n,arguments)}return r.fn=e,n.$on(t,r),n},t.prototype.$off=function(t,e){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(Array.isArray(t)){for(var r=0,o=t.length;r<o;r++)n.$off(t[r],e);return n}var i,a=n._events[t];if(!a)return n;if(!e)return n._events[t]=null,n;var c=a.length;while(c--)if(i=a[c],i===e||i.fn===e){a.splice(c,1);break}return n},t.prototype.$emit=function(t){var e=this,n=e._events[t];if(n){n=n.length>1?$(n):n;for(var r=$(arguments,1),o='event handler for "'+t+'"',i=0,a=n.length;i<a;i++)re(n[i],e,r,e,o)}return e}}var Tn=null;function In(t){var e=Tn;return Tn=t,function(){Tn=e}}function Pn(t){var e=t.$options,n=e.parent;if(n&&!e.abstract){while(n.$options.abstract&&n.$parent)n=n.$parent;n.$children.push(t)}t.$parent=n,t.$root=n?n.$root:t,t.$children=[],t.$refs={},t._watcher=null,t._inactive=null,t._directInactive=!1,t._isMounted=!1,t._isDestroyed=!1,t._isBeingDestroyed=!1}function Rn(t){t.prototype._update=function(t,e){var n=this,r=n.$el,o=n._vnode,i=In(n);n._vnode=t,n.$el=o?n.__patch__(o,t):n.__patch__(n.$el,t,e,!1),i(),r&&(r.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},t.prototype.$forceUpdate=function(){var t=this;t._watcher&&t._watcher.update()},t.prototype.$destroy=function(){var t=this;if(!t._isBeingDestroyed){Un(t,"beforeDestroy"),t._isBeingDestroyed=!0;var e=t.$parent;!e||e._isBeingDestroyed||t.$options.abstract||g(e.$children,t),t._watcher&&t._watcher.teardown();var n=t._watchers.length;while(n--)t._watchers[n].teardown();t._data.__ob__&&t._data.__ob__.vmCount--,t._isDestroyed=!0,t.__patch__(t._vnode,null),Un(t,"destroyed"),t.$off(),t.$el&&(t.$el.__vue__=null),t.$vnode&&(t.$vnode.parent=null)}}}function Nn(t,e,n){var r;return t.$el=e,t.$options.render||(t.$options.render=_t),Un(t,"beforeMount"),r=function(){t._update(t._render(),n)},new rr(t,r,P,{before:function(){t._isMounted&&!t._isDestroyed&&Un(t,"beforeUpdate")}},!0),n=!1,null==t.$vnode&&(t._isMounted=!0,Un(t,"mounted")),t}function Ln(t,n,r,o,i){var a=o.data.scopedSlots,c=t.$scopedSlots,s=!!(a&&!a.$stable||c!==e&&!c.$stable||a&&t.$scopedSlots.$key!==a.$key||!a&&t.$scopedSlots.$key),u=!!(i||t.$options._renderChildren||s);if(t.$options._parentVnode=o,t.$vnode=o,t._vnode&&(t._vnode.parent=o),t.$options._renderChildren=i,t.$attrs=o.data.attrs||e,t.$listeners=r||e,n&&t.$options.props){jt(!1);for(var f=t._props,l=t.$options._propKeys||[],p=0;p<l.length;p++){var v=l[p],d=t.$options.props;f[v]=Xt(v,d,n,t)}jt(!0),t.$options.propsData=n}r=r||e;var h=t.$options._parentListeners;t.$options._parentListeners=r,jn(t,r,h),u&&(t.$slots=Ie(i,o.context),t.$forceUpdate())}function Fn(t){while(t&&(t=t.$parent))if(t._inactive)return!0;return!1}function Dn(t,e){if(e){if(t._directInactive=!1,Fn(t))return}else if(t._directInactive)return;if(t._inactive||null===t._inactive){t._inactive=!1;for(var n=0;n<t.$children.length;n++)Dn(t.$children[n]);Un(t,"activated")}}function Mn(t,e){if((!e||(t._directInactive=!0,!Fn(t)))&&!t._inactive){t._inactive=!0;for(var n=0;n<t.$children.length;n++)Mn(t.$children[n]);Un(t,"deactivated")}}function Un(t,e){mt();var n=t.$options[e],r=e+" hook";if(n)for(var o=0,i=n.length;o<i;o++)re(n[o],t,null,t,r);t._hasHookEvent&&t.$emit("hook:"+e),gt()}var zn=[],Vn=[],Bn={},Gn=!1,Hn=!1,Kn=0;function Wn(){Kn=zn.length=Vn.length=0,Bn={},Gn=Hn=!1}var qn=0,Yn=Date.now;if(X&&!tt){var Xn=window.performance;Xn&&"function"===typeof Xn.now&&Yn()>document.createEvent("Event").timeStamp&&(Yn=function(){return Xn.now()})}function Jn(){var t,e;for(qn=Yn(),Hn=!0,zn.sort((function(t,e){return t.id-e.id})),Kn=0;Kn<zn.length;Kn++)t=zn[Kn],t.before&&t.before(),e=t.id,Bn[e]=null,t.run();var n=Vn.slice(),r=zn.slice();Wn(),tr(n),Zn(r),ut&&V.devtools&&ut.emit("flush")}function Zn(t){var e=t.length;while(e--){var n=t[e],r=n.vm;r._watcher===n&&r._isMounted&&!r._isDestroyed&&Un(r,"updated")}}function Qn(t){t._inactive=!1,Vn.push(t)}function tr(t){for(var e=0;e<t.length;e++)t[e]._inactive=!0,Dn(t[e],!0)}function er(t){var e=t.id;if(null==Bn[e]){if(Bn[e]=!0,Hn){var n=zn.length-1;while(n>Kn&&zn[n].id>t.id)n--;zn.splice(n+1,0,t)}else zn.push(t);Gn||(Gn=!0,he(Jn))}}var nr=0,rr=function(t,e,n,r,o){this.vm=t,o&&(t._watcher=this),t._watchers.push(this),r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync,this.before=r.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++nr,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new lt,this.newDepIds=new lt,this.expression="","function"===typeof e?this.getter=e:(this.getter=W(e),this.getter||(this.getter=P)),this.value=this.lazy?void 0:this.get()};rr.prototype.get=function(){var t;mt(this);var e=this.vm;try{t=this.getter.call(e,e)}catch(Da){if(!this.user)throw Da;ne(Da,e,'getter for watcher "'+this.expression+'"')}finally{this.deep&&me(t),gt(),this.cleanupDeps()}return t},rr.prototype.addDep=function(t){var e=t.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(t),this.depIds.has(e)||t.addSub(this))},rr.prototype.cleanupDeps=function(){var t=this.deps.length;while(t--){var e=this.deps[t];this.newDepIds.has(e.id)||e.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},rr.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():er(this)},rr.prototype.run=function(){if(this.active){var t=this.get();if(t!==this.value||s(t)||this.deep){var e=this.value;if(this.value=t,this.user){var n='callback for watcher "'+this.expression+'"';re(this.cb,this.vm,[t,e],this.vm,n)}else this.cb.call(this.vm,t,e)}}},rr.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},rr.prototype.depend=function(){var t=this.deps.length;while(t--)this.deps[t].depend()},rr.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||g(this.vm._watchers,this);var t=this.deps.length;while(t--)this.deps[t].removeSub(this);this.active=!1}};var or={enumerable:!0,configurable:!0,get:P,set:P};function ir(t,e,n){or.get=function(){return this[e][n]},or.set=function(t){this[e][n]=t},Object.defineProperty(t,n,or)}function ar(t){t._watchers=[];var e=t.$options;e.props&&cr(t,e.props),e.methods&&hr(t,e.methods),e.data?sr(t):Pt(t._data={},!0),e.computed&&lr(t,e.computed),e.watch&&e.watch!==it&&yr(t,e.watch)}function cr(t,e){var n=t.$options.propsData||{},r=t._props={},o=t.$options._propKeys=[],i=!t.$parent;i||jt(!1);var a=function(i){o.push(i);var a=Xt(i,e,n,t);Rt(r,i,a),i in t||ir(t,"_props",i)};for(var c in e)a(c);jt(!0)}function sr(t){var e=t.$options.data;e=t._data="function"===typeof e?ur(e,t):e||{},f(e)||(e={});var n=Object.keys(e),r=t.$options.props,o=(t.$options.methods,n.length);while(o--){var i=n[o];0,r&&x(r,i)||G(i)||ir(t,"_data",i)}Pt(e,!0)}function ur(t,e){mt();try{return t.call(e,e)}catch(Da){return ne(Da,e,"data()"),{}}finally{gt()}}var fr={lazy:!0};function lr(t,e){var n=t._computedWatchers=Object.create(null),r=st();for(var o in e){var i=e[o],a="function"===typeof i?i:i.get;0,r||(n[o]=new rr(t,a||P,P,fr)),o in t||pr(t,o,i)}}function pr(t,e,n){var r=!st();"function"===typeof n?(or.get=r?vr(e):dr(n),or.set=P):(or.get=n.get?r&&!1!==n.cache?vr(e):dr(n.get):P,or.set=n.set||P),Object.defineProperty(t,e,or)}function vr(t){return function(){var e=this._computedWatchers&&this._computedWatchers[t];if(e)return e.dirty&&e.evaluate(),ht.target&&e.depend(),e.value}}function dr(t){return function(){return t.call(this,this)}}function hr(t,e){t.$options.props;for(var n in e)t[n]="function"!==typeof e[n]?P:j(e[n],t)}function yr(t,e){for(var n in e){var r=e[n];if(Array.isArray(r))for(var o=0;o<r.length;o++)mr(t,n,r[o]);else mr(t,n,r)}}function mr(t,e,n,r){return f(n)&&(r=n,n=n.handler),"string"===typeof n&&(n=t[n]),t.$watch(e,n,r)}function gr(t){var e={get:function(){return this._data}},n={get:function(){return this._props}};Object.defineProperty(t.prototype,"$data",e),Object.defineProperty(t.prototype,"$props",n),t.prototype.$set=Nt,t.prototype.$delete=Lt,t.prototype.$watch=function(t,e,n){var r=this;if(f(e))return mr(r,t,e,n);n=n||{},n.user=!0;var o=new rr(r,t,e,n);if(n.immediate){var i='callback for immediate watcher "'+o.expression+'"';mt(),re(e,r,[o.value],r,i),gt()}return function(){o.teardown()}}}var br=0;function xr(t){t.prototype._init=function(t){var e=this;e._uid=br++,e._isVue=!0,t&&t._isComponent?_r(e,t):e.$options=qt(wr(e.constructor),t||{},e),e._renderProxy=e,e._self=e,Pn(e),Cn(e),mn(e),Un(e,"beforeCreate"),$e(e),ar(e),je(e),Un(e,"created"),e.$options.el&&e.$mount(e.$options.el)}}function _r(t,e){var n=t.$options=Object.create(t.constructor.options),r=e._parentVnode;n.parent=e.parent,n._parentVnode=r;var o=r.componentOptions;n.propsData=o.propsData,n._parentListeners=o.listeners,n._renderChildren=o.children,n._componentTag=o.tag,e.render&&(n.render=e.render,n.staticRenderFns=e.staticRenderFns)}function wr(t){var e=t.options;if(t.super){var n=wr(t.super),r=t.superOptions;if(n!==r){t.superOptions=n;var o=Or(t);o&&T(t.extendOptions,o),e=t.options=qt(n,t.extendOptions),e.name&&(e.components[e.name]=t)}}return e}function Or(t){var e,n=t.options,r=t.sealedOptions;for(var o in n)n[o]!==r[o]&&(e||(e={}),e[o]=n[o]);return e}function Sr(t){this._init(t)}function Cr(t){t.use=function(t){var e=this._installedPlugins||(this._installedPlugins=[]);if(e.indexOf(t)>-1)return this;var n=$(arguments,1);return n.unshift(this),"function"===typeof t.install?t.install.apply(t,n):"function"===typeof t&&t.apply(null,n),e.push(t),this}}function Er(t){t.mixin=function(t){return this.options=qt(this.options,t),this}}function kr(t){t.cid=0;var e=1;t.extend=function(t){t=t||{};var n=this,r=n.cid,o=t._Ctor||(t._Ctor={});if(o[r])return o[r];var i=t.name||n.options.name;var a=function(t){this._init(t)};return a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.cid=e++,a.options=qt(n.options,t),a["super"]=n,a.options.props&&Ar(a),a.options.computed&&jr(a),a.extend=n.extend,a.mixin=n.mixin,a.use=n.use,U.forEach((function(t){a[t]=n[t]})),i&&(a.options.components[i]=a),a.superOptions=n.options,a.extendOptions=t,a.sealedOptions=T({},a.options),o[r]=a,a}}function Ar(t){var e=t.options.props;for(var n in e)ir(t.prototype,"_props",n)}function jr(t){var e=t.options.computed;for(var n in e)pr(t.prototype,n,e[n])}function $r(t){U.forEach((function(e){t[e]=function(t,n){return n?("component"===e&&f(n)&&(n.name=n.name||t,n=this.options._base.extend(n)),"directive"===e&&"function"===typeof n&&(n={bind:n,update:n}),this.options[e+"s"][t]=n,n):this.options[e+"s"][t]}}))}function Tr(t){return t&&(t.Ctor.options.name||t.tag)}function Ir(t,e){return Array.isArray(t)?t.indexOf(e)>-1:"string"===typeof t?t.split(",").indexOf(e)>-1:!!l(t)&&t.test(e)}function Pr(t,e){var n=t.cache,r=t.keys,o=t._vnode;for(var i in n){var a=n[i];if(a){var c=a.name;c&&!e(c)&&Rr(n,i,r,o)}}}function Rr(t,e,n,r){var o=t[e];!o||r&&o.tag===r.tag||o.componentInstance.$destroy(),t[e]=null,g(n,e)}xr(Sr),gr(Sr),$n(Sr),Rn(Sr),xn(Sr);var Nr=[String,RegExp,Array],Lr={name:"keep-alive",abstract:!0,props:{include:Nr,exclude:Nr,max:[String,Number]},methods:{cacheVNode:function(){var t=this,e=t.cache,n=t.keys,r=t.vnodeToCache,o=t.keyToCache;if(r){var i=r.tag,a=r.componentInstance,c=r.componentOptions;e[o]={name:Tr(c),tag:i,componentInstance:a},n.push(o),this.max&&n.length>parseInt(this.max)&&Rr(e,n[0],n,this._vnode),this.vnodeToCache=null}}},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var t in this.cache)Rr(this.cache,t,this.keys)},mounted:function(){var t=this;this.cacheVNode(),this.$watch("include",(function(e){Pr(t,(function(t){return Ir(e,t)}))})),this.$watch("exclude",(function(e){Pr(t,(function(t){return!Ir(e,t)}))}))},updated:function(){this.cacheVNode()},render:function(){var t=this.$slots.default,e=Sn(t),n=e&&e.componentOptions;if(n){var r=Tr(n),o=this,i=o.include,a=o.exclude;if(i&&(!r||!Ir(i,r))||a&&r&&Ir(a,r))return e;var c=this,s=c.cache,u=c.keys,f=null==e.key?n.Ctor.cid+(n.tag?"::"+n.tag:""):e.key;s[f]?(e.componentInstance=s[f].componentInstance,g(u,f),u.push(f)):(this.vnodeToCache=e,this.keyToCache=f),e.data.keepAlive=!0}return e||t&&t[0]}},Fr={KeepAlive:Lr};function Dr(t){var e={get:function(){return V}};Object.defineProperty(t,"config",e),t.util={warn:vt,extend:T,mergeOptions:qt,defineReactive:Rt},t.set=Nt,t.delete=Lt,t.nextTick=he,t.observable=function(t){return Pt(t),t},t.options=Object.create(null),U.forEach((function(e){t.options[e+"s"]=Object.create(null)})),t.options._base=t,T(t.options.components,Fr),Cr(t),Er(t),kr(t),$r(t)}Dr(Sr),Object.defineProperty(Sr.prototype,"$isServer",{get:st}),Object.defineProperty(Sr.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(Sr,"FunctionalRenderContext",{value:Qe}),Sr.version="2.6.14";var Mr=y("style,class"),Ur=y("input,textarea,option,select,progress"),zr=function(t,e,n){return"value"===n&&Ur(t)&&"button"!==e||"selected"===n&&"option"===t||"checked"===n&&"input"===t||"muted"===n&&"video"===t},Vr=y("contenteditable,draggable,spellcheck"),Br=y("events,caret,typing,plaintext-only"),Gr=function(t,e){return Yr(e)||"false"===e?"false":"contenteditable"===t&&Br(e)?e:"true"},Hr=y("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible"),Kr="http://www.w3.org/1999/xlink",Wr=function(t){return":"===t.charAt(5)&&"xlink"===t.slice(0,5)},qr=function(t){return Wr(t)?t.slice(6,t.length):""},Yr=function(t){return null==t||!1===t};function Xr(t){var e=t.data,n=t,r=t;while(o(r.componentInstance))r=r.componentInstance._vnode,r&&r.data&&(e=Jr(r.data,e));while(o(n=n.parent))n&&n.data&&(e=Jr(e,n.data));return Zr(e.staticClass,e.class)}function Jr(t,e){return{staticClass:Qr(t.staticClass,e.staticClass),class:o(t.class)?[t.class,e.class]:e.class}}function Zr(t,e){return o(t)||o(e)?Qr(t,to(e)):""}function Qr(t,e){return t?e?t+" "+e:t:e||""}function to(t){return Array.isArray(t)?eo(t):s(t)?no(t):"string"===typeof t?t:""}function eo(t){for(var e,n="",r=0,i=t.length;r<i;r++)o(e=to(t[r]))&&""!==e&&(n&&(n+=" "),n+=e);return n}function no(t){var e="";for(var n in t)t[n]&&(e&&(e+=" "),e+=n);return e}var ro={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},oo=y("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),io=y("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignobject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),ao=function(t){return oo(t)||io(t)};function co(t){return io(t)?"svg":"math"===t?"math":void 0}var so=Object.create(null);function uo(t){if(!X)return!0;if(ao(t))return!1;if(t=t.toLowerCase(),null!=so[t])return so[t];var e=document.createElement(t);return t.indexOf("-")>-1?so[t]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:so[t]=/HTMLUnknownElement/.test(e.toString())}var fo=y("text,number,password,search,email,tel,url");function lo(t){if("string"===typeof t){var e=document.querySelector(t);return e||document.createElement("div")}return t}function po(t,e){var n=document.createElement(t);return"select"!==t||e.data&&e.data.attrs&&void 0!==e.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n}function vo(t,e){return document.createElementNS(ro[t],e)}function ho(t){return document.createTextNode(t)}function yo(t){return document.createComment(t)}function mo(t,e,n){t.insertBefore(e,n)}function go(t,e){t.removeChild(e)}function bo(t,e){t.appendChild(e)}function xo(t){return t.parentNode}function _o(t){return t.nextSibling}function wo(t){return t.tagName}function Oo(t,e){t.textContent=e}function So(t,e){t.setAttribute(e,"")}var Co=Object.freeze({createElement:po,createElementNS:vo,createTextNode:ho,createComment:yo,insertBefore:mo,removeChild:go,appendChild:bo,parentNode:xo,nextSibling:_o,tagName:wo,setTextContent:Oo,setStyleScope:So}),Eo={create:function(t,e){ko(e)},update:function(t,e){t.data.ref!==e.data.ref&&(ko(t,!0),ko(e))},destroy:function(t){ko(t,!0)}};function ko(t,e){var n=t.data.ref;if(o(n)){var r=t.context,i=t.componentInstance||t.elm,a=r.$refs;e?Array.isArray(a[n])?g(a[n],i):a[n]===i&&(a[n]=void 0):t.data.refInFor?Array.isArray(a[n])?a[n].indexOf(i)<0&&a[n].push(i):a[n]=[i]:a[n]=i}}var Ao=new bt("",{},[]),jo=["create","activate","update","remove","destroy"];function $o(t,e){return t.key===e.key&&t.asyncFactory===e.asyncFactory&&(t.tag===e.tag&&t.isComment===e.isComment&&o(t.data)===o(e.data)&&To(t,e)||i(t.isAsyncPlaceholder)&&r(e.asyncFactory.error))}function To(t,e){if("input"!==t.tag)return!0;var n,r=o(n=t.data)&&o(n=n.attrs)&&n.type,i=o(n=e.data)&&o(n=n.attrs)&&n.type;return r===i||fo(r)&&fo(i)}function Io(t,e,n){var r,i,a={};for(r=e;r<=n;++r)i=t[r].key,o(i)&&(a[i]=r);return a}function Po(t){var e,n,a={},s=t.modules,u=t.nodeOps;for(e=0;e<jo.length;++e)for(a[jo[e]]=[],n=0;n<s.length;++n)o(s[n][jo[e]])&&a[jo[e]].push(s[n][jo[e]]);function f(t){return new bt(u.tagName(t).toLowerCase(),{},[],void 0,t)}function l(t,e){function n(){0===--n.listeners&&p(t)}return n.listeners=e,n}function p(t){var e=u.parentNode(t);o(e)&&u.removeChild(e,t)}function v(t,e,n,r,a,c,s){if(o(t.elm)&&o(c)&&(t=c[s]=Ot(t)),t.isRootInsert=!a,!d(t,e,n,r)){var f=t.data,l=t.children,p=t.tag;o(p)?(t.elm=t.ns?u.createElementNS(t.ns,p):u.createElement(p,t),w(t),b(t,l,e),o(f)&&_(t,e),g(n,t.elm,r)):i(t.isComment)?(t.elm=u.createComment(t.text),g(n,t.elm,r)):(t.elm=u.createTextNode(t.text),g(n,t.elm,r))}}function d(t,e,n,r){var a=t.data;if(o(a)){var c=o(t.componentInstance)&&a.keepAlive;if(o(a=a.hook)&&o(a=a.init)&&a(t,!1),o(t.componentInstance))return h(t,e),g(n,t.elm,r),i(c)&&m(t,e,n,r),!0}}function h(t,e){o(t.data.pendingInsert)&&(e.push.apply(e,t.data.pendingInsert),t.data.pendingInsert=null),t.elm=t.componentInstance.$el,x(t)?(_(t,e),w(t)):(ko(t),e.push(t))}function m(t,e,n,r){var i,c=t;while(c.componentInstance)if(c=c.componentInstance._vnode,o(i=c.data)&&o(i=i.transition)){for(i=0;i<a.activate.length;++i)a.activate[i](Ao,c);e.push(c);break}g(n,t.elm,r)}function g(t,e,n){o(t)&&(o(n)?u.parentNode(n)===t&&u.insertBefore(t,e,n):u.appendChild(t,e))}function b(t,e,n){if(Array.isArray(e)){0;for(var r=0;r<e.length;++r)v(e[r],n,t.elm,null,!0,e,r)}else c(t.text)&&u.appendChild(t.elm,u.createTextNode(String(t.text)))}function x(t){while(t.componentInstance)t=t.componentInstance._vnode;return o(t.tag)}function _(t,n){for(var r=0;r<a.create.length;++r)a.create[r](Ao,t);e=t.data.hook,o(e)&&(o(e.create)&&e.create(Ao,t),o(e.insert)&&n.push(t))}function w(t){var e;if(o(e=t.fnScopeId))u.setStyleScope(t.elm,e);else{var n=t;while(n)o(e=n.context)&&o(e=e.$options._scopeId)&&u.setStyleScope(t.elm,e),n=n.parent}o(e=Tn)&&e!==t.context&&e!==t.fnContext&&o(e=e.$options._scopeId)&&u.setStyleScope(t.elm,e)}function O(t,e,n,r,o,i){for(;r<=o;++r)v(n[r],i,t,e,!1,n,r)}function S(t){var e,n,r=t.data;if(o(r))for(o(e=r.hook)&&o(e=e.destroy)&&e(t),e=0;e<a.destroy.length;++e)a.destroy[e](t);if(o(e=t.children))for(n=0;n<t.children.length;++n)S(t.children[n])}function C(t,e,n){for(;e<=n;++e){var r=t[e];o(r)&&(o(r.tag)?(E(r),S(r)):p(r.elm))}}function E(t,e){if(o(e)||o(t.data)){var n,r=a.remove.length+1;for(o(e)?e.listeners+=r:e=l(t.elm,r),o(n=t.componentInstance)&&o(n=n._vnode)&&o(n.data)&&E(n,e),n=0;n<a.remove.length;++n)a.remove[n](t,e);o(n=t.data.hook)&&o(n=n.remove)?n(t,e):e()}else p(t.elm)}function k(t,e,n,i,a){var c,s,f,l,p=0,d=0,h=e.length-1,y=e[0],m=e[h],g=n.length-1,b=n[0],x=n[g],_=!a;while(p<=h&&d<=g)r(y)?y=e[++p]:r(m)?m=e[--h]:$o(y,b)?(j(y,b,i,n,d),y=e[++p],b=n[++d]):$o(m,x)?(j(m,x,i,n,g),m=e[--h],x=n[--g]):$o(y,x)?(j(y,x,i,n,g),_&&u.insertBefore(t,y.elm,u.nextSibling(m.elm)),y=e[++p],x=n[--g]):$o(m,b)?(j(m,b,i,n,d),_&&u.insertBefore(t,m.elm,y.elm),m=e[--h],b=n[++d]):(r(c)&&(c=Io(e,p,h)),s=o(b.key)?c[b.key]:A(b,e,p,h),r(s)?v(b,i,t,y.elm,!1,n,d):(f=e[s],$o(f,b)?(j(f,b,i,n,d),e[s]=void 0,_&&u.insertBefore(t,f.elm,y.elm)):v(b,i,t,y.elm,!1,n,d)),b=n[++d]);p>h?(l=r(n[g+1])?null:n[g+1].elm,O(t,l,n,d,g,i)):d>g&&C(e,p,h)}function A(t,e,n,r){for(var i=n;i<r;i++){var a=e[i];if(o(a)&&$o(t,a))return i}}function j(t,e,n,c,s,f){if(t!==e){o(e.elm)&&o(c)&&(e=c[s]=Ot(e));var l=e.elm=t.elm;if(i(t.isAsyncPlaceholder))o(e.asyncFactory.resolved)?I(t.elm,e,n):e.isAsyncPlaceholder=!0;else if(i(e.isStatic)&&i(t.isStatic)&&e.key===t.key&&(i(e.isCloned)||i(e.isOnce)))e.componentInstance=t.componentInstance;else{var p,v=e.data;o(v)&&o(p=v.hook)&&o(p=p.prepatch)&&p(t,e);var d=t.children,h=e.children;if(o(v)&&x(e)){for(p=0;p<a.update.length;++p)a.update[p](t,e);o(p=v.hook)&&o(p=p.update)&&p(t,e)}r(e.text)?o(d)&&o(h)?d!==h&&k(l,d,h,n,f):o(h)?(o(t.text)&&u.setTextContent(l,""),O(l,null,h,0,h.length-1,n)):o(d)?C(d,0,d.length-1):o(t.text)&&u.setTextContent(l,""):t.text!==e.text&&u.setTextContent(l,e.text),o(v)&&o(p=v.hook)&&o(p=p.postpatch)&&p(t,e)}}}function $(t,e,n){if(i(n)&&o(t.parent))t.parent.data.pendingInsert=e;else for(var r=0;r<e.length;++r)e[r].data.hook.insert(e[r])}var T=y("attrs,class,staticClass,staticStyle,key");function I(t,e,n,r){var a,c=e.tag,s=e.data,u=e.children;if(r=r||s&&s.pre,e.elm=t,i(e.isComment)&&o(e.asyncFactory))return e.isAsyncPlaceholder=!0,!0;if(o(s)&&(o(a=s.hook)&&o(a=a.init)&&a(e,!0),o(a=e.componentInstance)))return h(e,n),!0;if(o(c)){if(o(u))if(t.hasChildNodes())if(o(a=s)&&o(a=a.domProps)&&o(a=a.innerHTML)){if(a!==t.innerHTML)return!1}else{for(var f=!0,l=t.firstChild,p=0;p<u.length;p++){if(!l||!I(l,u[p],n,r)){f=!1;break}l=l.nextSibling}if(!f||l)return!1}else b(e,u,n);if(o(s)){var v=!1;for(var d in s)if(!T(d)){v=!0,_(e,n);break}!v&&s["class"]&&me(s["class"])}}else t.data!==e.text&&(t.data=e.text);return!0}return function(t,e,n,c){if(!r(e)){var s=!1,l=[];if(r(t))s=!0,v(e,l);else{var p=o(t.nodeType);if(!p&&$o(t,e))j(t,e,l,null,null,c);else{if(p){if(1===t.nodeType&&t.hasAttribute(M)&&(t.removeAttribute(M),n=!0),i(n)&&I(t,e,l))return $(e,l,!0),t;t=f(t)}var d=t.elm,h=u.parentNode(d);if(v(e,l,d._leaveCb?null:h,u.nextSibling(d)),o(e.parent)){var y=e.parent,m=x(e);while(y){for(var g=0;g<a.destroy.length;++g)a.destroy[g](y);if(y.elm=e.elm,m){for(var b=0;b<a.create.length;++b)a.create[b](Ao,y);var _=y.data.hook.insert;if(_.merged)for(var w=1;w<_.fns.length;w++)_.fns[w]()}else ko(y);y=y.parent}}o(h)?C([t],0,0):o(t.tag)&&S(t)}}return $(e,l,s),e.elm}o(t)&&S(t)}}var Ro={create:No,update:No,destroy:function(t){No(t,Ao)}};function No(t,e){(t.data.directives||e.data.directives)&&Lo(t,e)}function Lo(t,e){var n,r,o,i=t===Ao,a=e===Ao,c=Do(t.data.directives,t.context),s=Do(e.data.directives,e.context),u=[],f=[];for(n in s)r=c[n],o=s[n],r?(o.oldValue=r.value,o.oldArg=r.arg,Uo(o,"update",e,t),o.def&&o.def.componentUpdated&&f.push(o)):(Uo(o,"bind",e,t),o.def&&o.def.inserted&&u.push(o));if(u.length){var l=function(){for(var n=0;n<u.length;n++)Uo(u[n],"inserted",e,t)};i?we(e,"insert",l):l()}if(f.length&&we(e,"postpatch",(function(){for(var n=0;n<f.length;n++)Uo(f[n],"componentUpdated",e,t)})),!i)for(n in c)s[n]||Uo(c[n],"unbind",t,t,a)}var Fo=Object.create(null);function Do(t,e){var n,r,o=Object.create(null);if(!t)return o;for(n=0;n<t.length;n++)r=t[n],r.modifiers||(r.modifiers=Fo),o[Mo(r)]=r,r.def=Yt(e.$options,"directives",r.name,!0);return o}function Mo(t){return t.rawName||t.name+"."+Object.keys(t.modifiers||{}).join(".")}function Uo(t,e,n,r,o){var i=t.def&&t.def[e];if(i)try{i(n.elm,t,n,r,o)}catch(Da){ne(Da,n.context,"directive "+t.name+" "+e+" hook")}}var zo=[Eo,Ro];function Vo(t,e){var n=e.componentOptions;if((!o(n)||!1!==n.Ctor.options.inheritAttrs)&&(!r(t.data.attrs)||!r(e.data.attrs))){var i,a,c,s=e.elm,u=t.data.attrs||{},f=e.data.attrs||{};for(i in o(f.__ob__)&&(f=e.data.attrs=T({},f)),f)a=f[i],c=u[i],c!==a&&Bo(s,i,a,e.data.pre);for(i in(tt||nt)&&f.value!==u.value&&Bo(s,"value",f.value),u)r(f[i])&&(Wr(i)?s.removeAttributeNS(Kr,qr(i)):Vr(i)||s.removeAttribute(i))}}function Bo(t,e,n,r){r||t.tagName.indexOf("-")>-1?Go(t,e,n):Hr(e)?Yr(n)?t.removeAttribute(e):(n="allowfullscreen"===e&&"EMBED"===t.tagName?"true":e,t.setAttribute(e,n)):Vr(e)?t.setAttribute(e,Gr(e,n)):Wr(e)?Yr(n)?t.removeAttributeNS(Kr,qr(e)):t.setAttributeNS(Kr,e,n):Go(t,e,n)}function Go(t,e,n){if(Yr(n))t.removeAttribute(e);else{if(tt&&!et&&"TEXTAREA"===t.tagName&&"placeholder"===e&&""!==n&&!t.__ieph){var r=function e(n){n.stopImmediatePropagation(),t.removeEventListener("input",e)};t.addEventListener("input",r),t.__ieph=!0}t.setAttribute(e,n)}}var Ho={create:Vo,update:Vo};function Ko(t,e){var n=e.elm,i=e.data,a=t.data;if(!(r(i.staticClass)&&r(i.class)&&(r(a)||r(a.staticClass)&&r(a.class)))){var c=Xr(e),s=n._transitionClasses;o(s)&&(c=Qr(c,to(s))),c!==n._prevClass&&(n.setAttribute("class",c),n._prevClass=c)}}var Wo,qo={create:Ko,update:Ko},Yo="__r",Xo="__c";function Jo(t){if(o(t[Yo])){var e=tt?"change":"input";t[e]=[].concat(t[Yo],t[e]||[]),delete t[Yo]}o(t[Xo])&&(t.change=[].concat(t[Xo],t.change||[]),delete t[Xo])}function Zo(t,e,n){var r=Wo;return function o(){var i=e.apply(null,arguments);null!==i&&ei(t,o,n,r)}}var Qo=ce&&!(ot&&Number(ot[1])<=53);function ti(t,e,n,r){if(Qo){var o=qn,i=e;e=i._wrapper=function(t){if(t.target===t.currentTarget||t.timeStamp>=o||t.timeStamp<=0||t.target.ownerDocument!==document)return i.apply(this,arguments)}}Wo.addEventListener(t,e,at?{capture:n,passive:r}:n)}function ei(t,e,n,r){(r||Wo).removeEventListener(t,e._wrapper||e,n)}function ni(t,e){if(!r(t.data.on)||!r(e.data.on)){var n=e.data.on||{},o=t.data.on||{};Wo=e.elm,Jo(n),_e(n,o,ti,ei,Zo,e.context),Wo=void 0}}var ri,oi={create:ni,update:ni};function ii(t,e){if(!r(t.data.domProps)||!r(e.data.domProps)){var n,i,a=e.elm,c=t.data.domProps||{},s=e.data.domProps||{};for(n in o(s.__ob__)&&(s=e.data.domProps=T({},s)),c)n in s||(a[n]="");for(n in s){if(i=s[n],"textContent"===n||"innerHTML"===n){if(e.children&&(e.children.length=0),i===c[n])continue;1===a.childNodes.length&&a.removeChild(a.childNodes[0])}if("value"===n&&"PROGRESS"!==a.tagName){a._value=i;var u=r(i)?"":String(i);ai(a,u)&&(a.value=u)}else if("innerHTML"===n&&io(a.tagName)&&r(a.innerHTML)){ri=ri||document.createElement("div"),ri.innerHTML="<svg>"+i+"</svg>";var f=ri.firstChild;while(a.firstChild)a.removeChild(a.firstChild);while(f.firstChild)a.appendChild(f.firstChild)}else if(i!==c[n])try{a[n]=i}catch(Da){}}}}function ai(t,e){return!t.composing&&("OPTION"===t.tagName||ci(t,e)||si(t,e))}function ci(t,e){var n=!0;try{n=document.activeElement!==t}catch(Da){}return n&&t.value!==e}function si(t,e){var n=t.value,r=t._vModifiers;if(o(r)){if(r.number)return h(n)!==h(e);if(r.trim)return n.trim()!==e.trim()}return n!==e}var ui={create:ii,update:ii},fi=_((function(t){var e={},n=/;(?![^(]*\))/g,r=/:(.+)/;return t.split(n).forEach((function(t){if(t){var n=t.split(r);n.length>1&&(e[n[0].trim()]=n[1].trim())}})),e}));function li(t){var e=pi(t.style);return t.staticStyle?T(t.staticStyle,e):e}function pi(t){return Array.isArray(t)?I(t):"string"===typeof t?fi(t):t}function vi(t,e){var n,r={};if(e){var o=t;while(o.componentInstance)o=o.componentInstance._vnode,o&&o.data&&(n=li(o.data))&&T(r,n)}(n=li(t.data))&&T(r,n);var i=t;while(i=i.parent)i.data&&(n=li(i.data))&&T(r,n);return r}var di,hi=/^--/,yi=/\s*!important$/,mi=function(t,e,n){if(hi.test(e))t.style.setProperty(e,n);else if(yi.test(n))t.style.setProperty(E(e),n.replace(yi,""),"important");else{var r=bi(e);if(Array.isArray(n))for(var o=0,i=n.length;o<i;o++)t.style[r]=n[o];else t.style[r]=n}},gi=["Webkit","Moz","ms"],bi=_((function(t){if(di=di||document.createElement("div").style,t=O(t),"filter"!==t&&t in di)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),n=0;n<gi.length;n++){var r=gi[n]+e;if(r in di)return r}}));function xi(t,e){var n=e.data,i=t.data;if(!(r(n.staticStyle)&&r(n.style)&&r(i.staticStyle)&&r(i.style))){var a,c,s=e.elm,u=i.staticStyle,f=i.normalizedStyle||i.style||{},l=u||f,p=pi(e.data.style)||{};e.data.normalizedStyle=o(p.__ob__)?T({},p):p;var v=vi(e,!0);for(c in l)r(v[c])&&mi(s,c,"");for(c in v)a=v[c],a!==l[c]&&mi(s,c,null==a?"":a)}}var _i={create:xi,update:xi},wi=/\s+/;function Oi(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(wi).forEach((function(e){return t.classList.add(e)})):t.classList.add(e);else{var n=" "+(t.getAttribute("class")||"")+" ";n.indexOf(" "+e+" ")<0&&t.setAttribute("class",(n+e).trim())}}function Si(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(wi).forEach((function(e){return t.classList.remove(e)})):t.classList.remove(e),t.classList.length||t.removeAttribute("class");else{var n=" "+(t.getAttribute("class")||"")+" ",r=" "+e+" ";while(n.indexOf(r)>=0)n=n.replace(r," ");n=n.trim(),n?t.setAttribute("class",n):t.removeAttribute("class")}}function Ci(e){if(e){if("object"===t(e)){var n={};return!1!==e.css&&T(n,Ei(e.name||"v")),T(n,e),n}return"string"===typeof e?Ei(e):void 0}}var Ei=_((function(t){return{enterClass:t+"-enter",enterToClass:t+"-enter-to",enterActiveClass:t+"-enter-active",leaveClass:t+"-leave",leaveToClass:t+"-leave-to",leaveActiveClass:t+"-leave-active"}})),ki=X&&!et,Ai="transition",ji="animation",$i="transition",Ti="transitionend",Ii="animation",Pi="animationend";ki&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&($i="WebkitTransition",Ti="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Ii="WebkitAnimation",Pi="webkitAnimationEnd"));var Ri=X?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(t){return t()};function Ni(t){Ri((function(){Ri(t)}))}function Li(t,e){var n=t._transitionClasses||(t._transitionClasses=[]);n.indexOf(e)<0&&(n.push(e),Oi(t,e))}function Fi(t,e){t._transitionClasses&&g(t._transitionClasses,e),Si(t,e)}function Di(t,e,n){var r=Ui(t,e),o=r.type,i=r.timeout,a=r.propCount;if(!o)return n();var c=o===Ai?Ti:Pi,s=0,u=function(){t.removeEventListener(c,f),n()},f=function(e){e.target===t&&++s>=a&&u()};setTimeout((function(){s<a&&u()}),i+1),t.addEventListener(c,f)}var Mi=/\b(transform|all)(,|$)/;function Ui(t,e){var n,r=window.getComputedStyle(t),o=(r[$i+"Delay"]||"").split(", "),i=(r[$i+"Duration"]||"").split(", "),a=zi(o,i),c=(r[Ii+"Delay"]||"").split(", "),s=(r[Ii+"Duration"]||"").split(", "),u=zi(c,s),f=0,l=0;e===Ai?a>0&&(n=Ai,f=a,l=i.length):e===ji?u>0&&(n=ji,f=u,l=s.length):(f=Math.max(a,u),n=f>0?a>u?Ai:ji:null,l=n?n===Ai?i.length:s.length:0);var p=n===Ai&&Mi.test(r[$i+"Property"]);return{type:n,timeout:f,propCount:l,hasTransform:p}}function zi(t,e){while(t.length<e.length)t=t.concat(t);return Math.max.apply(null,e.map((function(e,n){return Vi(e)+Vi(t[n])})))}function Vi(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function Bi(t,e){var n=t.elm;o(n._leaveCb)&&(n._leaveCb.cancelled=!0,n._leaveCb());var i=Ci(t.data.transition);if(!r(i)&&!o(n._enterCb)&&1===n.nodeType){var a=i.css,c=i.type,u=i.enterClass,f=i.enterToClass,l=i.enterActiveClass,p=i.appearClass,v=i.appearToClass,d=i.appearActiveClass,y=i.beforeEnter,m=i.enter,g=i.afterEnter,b=i.enterCancelled,x=i.beforeAppear,_=i.appear,w=i.afterAppear,O=i.appearCancelled,S=i.duration,C=Tn,E=Tn.$vnode;while(E&&E.parent)C=E.context,E=E.parent;var k=!C._isMounted||!t.isRootInsert;if(!k||_||""===_){var A=k&&p?p:u,j=k&&d?d:l,$=k&&v?v:f,T=k&&x||y,I=k&&"function"===typeof _?_:m,P=k&&w||g,R=k&&O||b,N=h(s(S)?S.enter:S);0;var L=!1!==a&&!et,F=Ki(I),M=n._enterCb=D((function(){L&&(Fi(n,$),Fi(n,j)),M.cancelled?(L&&Fi(n,A),R&&R(n)):P&&P(n),n._enterCb=null}));t.data.show||we(t,"insert",(function(){var e=n.parentNode,r=e&&e._pending&&e._pending[t.key];r&&r.tag===t.tag&&r.elm._leaveCb&&r.elm._leaveCb(),I&&I(n,M)})),T&&T(n),L&&(Li(n,A),Li(n,j),Ni((function(){Fi(n,A),M.cancelled||(Li(n,$),F||(Hi(N)?setTimeout(M,N):Di(n,c,M)))}))),t.data.show&&(e&&e(),I&&I(n,M)),L||F||M()}}}function Gi(t,e){var n=t.elm;o(n._enterCb)&&(n._enterCb.cancelled=!0,n._enterCb());var i=Ci(t.data.transition);if(r(i)||1!==n.nodeType)return e();if(!o(n._leaveCb)){var a=i.css,c=i.type,u=i.leaveClass,f=i.leaveToClass,l=i.leaveActiveClass,p=i.beforeLeave,v=i.leave,d=i.afterLeave,y=i.leaveCancelled,m=i.delayLeave,g=i.duration,b=!1!==a&&!et,x=Ki(v),_=h(s(g)?g.leave:g);0;var w=n._leaveCb=D((function(){n.parentNode&&n.parentNode._pending&&(n.parentNode._pending[t.key]=null),b&&(Fi(n,f),Fi(n,l)),w.cancelled?(b&&Fi(n,u),y&&y(n)):(e(),d&&d(n)),n._leaveCb=null}));m?m(O):O()}function O(){w.cancelled||(!t.data.show&&n.parentNode&&((n.parentNode._pending||(n.parentNode._pending={}))[t.key]=t),p&&p(n),b&&(Li(n,u),Li(n,l),Ni((function(){Fi(n,u),w.cancelled||(Li(n,f),x||(Hi(_)?setTimeout(w,_):Di(n,c,w)))}))),v&&v(n,w),b||x||w())}}function Hi(t){return"number"===typeof t&&!isNaN(t)}function Ki(t){if(r(t))return!1;var e=t.fns;return o(e)?Ki(Array.isArray(e)?e[0]:e):(t._length||t.length)>1}function Wi(t,e){!0!==e.data.show&&Bi(e)}var qi=X?{create:Wi,activate:Wi,remove:function(t,e){!0!==t.data.show?Gi(t,e):e()}}:{},Yi=[Ho,qo,oi,ui,_i,qi],Xi=Yi.concat(zo),Ji=Po({nodeOps:Co,modules:Xi});et&&document.addEventListener("selectionchange",(function(){var t=document.activeElement;t&&t.vmodel&&ia(t,"input")}));var Zi={inserted:function(t,e,n,r){"select"===n.tag?(r.elm&&!r.elm._vOptions?we(n,"postpatch",(function(){Zi.componentUpdated(t,e,n)})):Qi(t,e,n.context),t._vOptions=[].map.call(t.options,na)):("textarea"===n.tag||fo(t.type))&&(t._vModifiers=e.modifiers,e.modifiers.lazy||(t.addEventListener("compositionstart",ra),t.addEventListener("compositionend",oa),t.addEventListener("change",oa),et&&(t.vmodel=!0)))},componentUpdated:function(t,e,n){if("select"===n.tag){Qi(t,e,n.context);var r=t._vOptions,o=t._vOptions=[].map.call(t.options,na);if(o.some((function(t,e){return!L(t,r[e])}))){var i=t.multiple?e.value.some((function(t){return ea(t,o)})):e.value!==e.oldValue&&ea(e.value,o);i&&ia(t,"change")}}}};function Qi(t,e,n){ta(t,e,n),(tt||nt)&&setTimeout((function(){ta(t,e,n)}),0)}function ta(t,e,n){var r=e.value,o=t.multiple;if(!o||Array.isArray(r)){for(var i,a,c=0,s=t.options.length;c<s;c++)if(a=t.options[c],o)i=F(r,na(a))>-1,a.selected!==i&&(a.selected=i);else if(L(na(a),r))return void(t.selectedIndex!==c&&(t.selectedIndex=c));o||(t.selectedIndex=-1)}}function ea(t,e){return e.every((function(e){return!L(e,t)}))}function na(t){return"_value"in t?t._value:t.value}function ra(t){t.target.composing=!0}function oa(t){t.target.composing&&(t.target.composing=!1,ia(t.target,"input"))}function ia(t,e){var n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)}function aa(t){return!t.componentInstance||t.data&&t.data.transition?t:aa(t.componentInstance._vnode)}var ca={bind:function(t,e,n){var r=e.value;n=aa(n);var o=n.data&&n.data.transition,i=t.__vOriginalDisplay="none"===t.style.display?"":t.style.display;r&&o?(n.data.show=!0,Bi(n,(function(){t.style.display=i}))):t.style.display=r?i:"none"},update:function(t,e,n){var r=e.value,o=e.oldValue;if(!r!==!o){n=aa(n);var i=n.data&&n.data.transition;i?(n.data.show=!0,r?Bi(n,(function(){t.style.display=t.__vOriginalDisplay})):Gi(n,(function(){t.style.display="none"}))):t.style.display=r?t.__vOriginalDisplay:"none"}},unbind:function(t,e,n,r,o){o||(t.style.display=t.__vOriginalDisplay)}},sa={model:Zi,show:ca},ua={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function fa(t){var e=t&&t.componentOptions;return e&&e.Ctor.options.abstract?fa(Sn(e.children)):t}function la(t){var e={},n=t.$options;for(var r in n.propsData)e[r]=t[r];var o=n._parentListeners;for(var i in o)e[O(i)]=o[i];return e}function pa(t,e){if(/\d-keep-alive$/.test(e.tag))return t("keep-alive",{props:e.componentOptions.propsData})}function va(t){while(t=t.parent)if(t.data.transition)return!0}function da(t,e){return e.key===t.key&&e.tag===t.tag}var ha=function(t){return t.tag||Re(t)},ya=function(t){return"show"===t.name},ma={name:"transition",props:ua,abstract:!0,render:function(t){var e=this,n=this.$slots.default;if(n&&(n=n.filter(ha),n.length)){0;var r=this.mode;0;var o=n[0];if(va(this.$vnode))return o;var i=fa(o);if(!i)return o;if(this._leaving)return pa(t,o);var a="__transition-"+this._uid+"-";i.key=null==i.key?i.isComment?a+"comment":a+i.tag:c(i.key)?0===String(i.key).indexOf(a)?i.key:a+i.key:i.key;var s=(i.data||(i.data={})).transition=la(this),u=this._vnode,f=fa(u);if(i.data.directives&&i.data.directives.some(ya)&&(i.data.show=!0),f&&f.data&&!da(i,f)&&!Re(f)&&(!f.componentInstance||!f.componentInstance._vnode.isComment)){var l=f.data.transition=T({},s);if("out-in"===r)return this._leaving=!0,we(l,"afterLeave",(function(){e._leaving=!1,e.$forceUpdate()})),pa(t,o);if("in-out"===r){if(Re(i))return u;var p,v=function(){p()};we(s,"afterEnter",v),we(s,"enterCancelled",v),we(l,"delayLeave",(function(t){p=t}))}}return o}}},ga=T({tag:String,moveClass:String},ua);delete ga.mode;var ba={props:ga,beforeMount:function(){var t=this,e=this._update;this._update=function(n,r){var o=In(t);t.__patch__(t._vnode,t.kept,!1,!0),t._vnode=t.kept,o(),e.call(t,n,r)}},render:function(t){for(var e=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),r=this.prevChildren=this.children,o=this.$slots.default||[],i=this.children=[],a=la(this),c=0;c<o.length;c++){var s=o[c];if(s.tag)if(null!=s.key&&0!==String(s.key).indexOf("__vlist"))i.push(s),n[s.key]=s,(s.data||(s.data={})).transition=a;else;}if(r){for(var u=[],f=[],l=0;l<r.length;l++){var p=r[l];p.data.transition=a,p.data.pos=p.elm.getBoundingClientRect(),n[p.key]?u.push(p):f.push(p)}this.kept=t(e,null,u),this.removed=f}return t(e,null,i)},updated:function(){var t=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";t.length&&this.hasMove(t[0].elm,e)&&(t.forEach(xa),t.forEach(_a),t.forEach(wa),this._reflow=document.body.offsetHeight,t.forEach((function(t){if(t.data.moved){var n=t.elm,r=n.style;Li(n,e),r.transform=r.WebkitTransform=r.transitionDuration="",n.addEventListener(Ti,n._moveCb=function t(r){r&&r.target!==n||r&&!/transform$/.test(r.propertyName)||(n.removeEventListener(Ti,t),n._moveCb=null,Fi(n,e))})}})))},methods:{hasMove:function(t,e){if(!ki)return!1;if(this._hasMove)return this._hasMove;var n=t.cloneNode();t._transitionClasses&&t._transitionClasses.forEach((function(t){Si(n,t)})),Oi(n,e),n.style.display="none",this.$el.appendChild(n);var r=Ui(n);return this.$el.removeChild(n),this._hasMove=r.hasTransform}}};function xa(t){t.elm._moveCb&&t.elm._moveCb(),t.elm._enterCb&&t.elm._enterCb()}function _a(t){t.data.newPos=t.elm.getBoundingClientRect()}function wa(t){var e=t.data.pos,n=t.data.newPos,r=e.left-n.left,o=e.top-n.top;if(r||o){t.data.moved=!0;var i=t.elm.style;i.transform=i.WebkitTransform="translate("+r+"px,"+o+"px)",i.transitionDuration="0s"}}var Oa={Transition:ma,TransitionGroup:ba};Sr.config.mustUseProp=zr,Sr.config.isReservedTag=ao,Sr.config.isReservedAttr=Mr,Sr.config.getTagNamespace=co,Sr.config.isUnknownElement=uo,T(Sr.options.directives,sa),T(Sr.options.components,Oa),Sr.prototype.__patch__=X?Ji:P,Sr.prototype.$mount=function(t,e){return t=t&&X?lo(t):void 0,Nn(this,t,e)},X&&setTimeout((function(){V.devtools&&ut&&ut.emit("init",Sr)}),0);var Sa=Sr,Ca=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{attrs:{id:"friend-circle-page"}},[n("div",{staticClass:"friends scrollbar"},[n("div",{staticClass:"friend",class:"all"===t.active?"active":"",on:{click:function(e){return t.handleFriendClick({link:"all"})}}},[n("div",{staticClass:"avatar",staticStyle:{"font-size":"1.8rem","text-align":"center","line-height":"3rem"}},[t._v("📺")]),n("div",{staticClass:"name"},[t._v("全部动态")])]),t._l(t.circleFriends,(function(e){return n("div",{key:e.name,staticClass:"friend",class:{active:e.link===t.active,alive:!e.lost},on:{click:function(n){return t.handleFriendClick(e)}}},[n("img",{staticClass:"avatar",attrs:{src:e.avatar,alt:""}}),n("div",{staticClass:"name"},[t._v(t._s(e.name))])])}))],2),t.currentPosts&&t.currentPosts.length?n("div",{staticClass:"author-info"},[t.author?n("div",{staticClass:"author-card"},[n("div",{staticClass:"left"},[n("img",{staticClass:"avatar",attrs:{src:t.author.avatar,alt:""}})]),n("div",{staticClass:"center"},[n("div",{staticClass:"name"},[t._v(t._s(t.author.name))]),n("div",{staticClass:"desc"},[t._v(t._s(t.author.desc))])]),n("div",{staticClass:"right"},[n("a",{staticClass:"link",attrs:{href:t.author.link,target:"_blank"}},[n("i",{staticClass:"fas fa-link"})])])]):t._e(),n("div",{staticClass:"posts scrollbar"},t._l(t.currentPosts,(function(e){return n("div",{key:e.floor+e.author,staticClass:"post"},[n("div",{staticClass:"meta"},[n("img",{staticClass:"avatar",attrs:{src:e.avatar}}),n("div",{staticClass:"author"},[t._v(t._s(e.author))]),n("div",{staticClass:"date"},[t._v(t._s(e[t.sortKey]))])]),n("div",{staticClass:"info"},[n("a",{staticClass:"link",attrs:{href:e.link,target:"_blank"}},[t._v(t._s(e.title))])])])})),0)]):n("div",{staticStyle:{flex:"1",display:"flex","justify-content":"center","align-items":"center"}},[t._v(" 这个博主最近好像在摸鱼🐟 ")])])])},Ea=[];n(9337);function ka(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Aa(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ja(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Aa(Object(n),!0).forEach((function(e){ka(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Aa(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function $a(t,e,n,r,o,i,a){try{var c=t[i](a),s=c.value}catch(u){return void n(u)}c.done?e(s):Promise.resolve(s).then(r,o)}function Ta(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){$a(i,r,o,a,c,"next",t)}function c(t){$a(i,r,o,a,c,"throw",t)}a(void 0)}))}}n(8975),n(9254);var Ia={api:"https://roydon.cloud",sortKey:"updated"},Pa={name:"App",data:function(){return{active:"all",circleFriends:[],circleList:[],friendPosts:{},sortKey:Ia.sortKey||"updated",author:null}},computed:{currentPosts:function(){return"all"===this.active?this.circleList:this.friendPosts[this.active]}},mounted:function(){var t=this;fetch(Ia.api+"/friend").then((function(t){return t.json()})).then((function(e){t.circleFriends=e})).then((function(){fetch(Ia.api+"/friendstatus").then((function(t){return t.json()})).then((function(e){t.circleFriends.forEach((function(t){Sa.set(t,"lost",!e.not_lost_friends[t.name])})),t.circleFriends.sort((function(t,e){return t.lost&&e.lost?t.name>e.name?1:-1:t.lost?1:e.lost?-1:t.name>e.name?1:-1}))}))})),fetch(Ia.api+"/all").then((function(t){return t.json()})).then((function(e){t.circleList=e.article_data,t.circleList.sort((function(e,n){return e[t.sortKey]>n[t.sortKey]?-1:1}))}))},methods:{handleFriendClick:function(t){var e=this;return Ta(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("all"===t.link){n.next=7;break}if(e.author=t,e.friendPosts[t.link]){n.next=5;break}return n.next=5,fetch(Ia.api+"/post?link=".concat(t.link)).then((function(t){return t.json()})).then((function(n){var r=n.article_data.map((function(t){return ja(ja({author:n.statistical_data.name},n.statistical_data),t)}));r.sort((function(t,n){return t[e.sortKey]>n[e.sortKey]?-1:1})),e.friendPosts[t.link]=r,e.active=t.link}));case 5:n.next=8;break;case 7:e.author=null;case 8:e.active=t.link;case 9:case"end":return n.stop()}}),n)})))()}}},Ra=Pa;function Na(t,e,n,r,o,i,a,c){var s,u="function"===typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=n,u._compiled=!0),r&&(u.functional=!0),i&&(u._scopeId="data-v-"+i),a?(s=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},u._ssrRegister=s):o&&(s=c?function(){o.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:o),s)if(u.functional){u._injectStyles=s;var f=u.render;u.render=function(t,e){return s.call(e),f(t,e)}}else{var l=u.beforeCreate;u.beforeCreate=l?[].concat(l,s):[s]}return{exports:t,options:u}}var La=Na(Ra,Ca,Ea,!1,null,null,null),Fa=La.exports;Sa.config.productionTip=!1,new Sa({render:function(t){return t(Fa)}}).$mount("#app")}()})();//# sourceMappingURL=app-legacy.9790800e.js.map]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/commentBarrage.js"/>
      <url>/js/commentBarrage.js</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/console.js"/>
      <url>/js/console.js</url>
      
        <content type="html"><![CDATA[ichikaBlur = 'blur(10px)';ichikaNoBlur = 'blur(0px)';ichikaCardBgDark = 'rgba(0,0,0,0.7)';ichikaBlurBg = 'rgba(255,255,255,0.88)';ichikaNoBlurBg = 'rgba(255,255,255,0.95)';fesTheme = ['2022·圣诞', '2023·元旦', '2023·春节'] //手动主题列表UHDimg = [ //4K壁纸  'https://cdn.ichika.cc/WallPaper/104289966_p0.jpg',  'https://cdn.ichika.cc/WallPaper/104289966_p1.jpg',  'https://cdn.ichika.cc/WallPaper/101123738_p0.jpg',  'https://cdn.ichika.cc/WallPaper/1113371.jpg',  'https://cdn.ichika.cc/WallPaper/1115199.jpg',  'https://cdn.ichika.cc/WallPaper/1137402.jpg',  'https://cdn.ichika.cc/WallPaper/1197417.jpg',  'https://cdn.ichika.cc/WallPaper/1198589.jpg',  'https://cdn.ichika.cc/WallPaper/1260845.jpg',  'https://cdn.ichika.cc/WallPaper/1261011.png',  'https://cdn.ichika.cc/WallPaper/1273976.jpg',  'https://cdn.ichika.cc/WallPaper/763891.jpg',  'https://cdn.ichika.cc/WallPaper/800800.jpg']PCimg = [ //标准壁纸  'https://cdn.ichika.cc/WallPaper/102875400_p0.png',  'https://cdn.ichika.cc/typora/202210141544062.png',  'https://cdn.ichika.cc/typora/202210141513175.png',  'https://cdn.ichika.cc/typora/202210141535511.png',  'https://cdn.ichika.cc/typora/archivecover.png',  'https://cdn.ichika.cc/typora/categorycover.png',  'https://cdn.ichika.cc/typora/tagcover.png',  'https://cdn.ichika.cc/typora/202210141549031.png',  'https://cdn.ichika.cc/typora/202210141549269.png',  'https://cdn.ichika.cc/typora/202210181614358.png',  'https://cdn.ichika.cc/typora/202210141549975.png',  'https://cdn.ichika.cc/typora/202210141535193.jpg',  'https://cdn.ichika.cc/typora/202210141536098.png',  'https://cdn.ichika.cc/typora/202210141545495.jpg',  'https://cdn.ichika.cc/typora/202210141538929.jpg',  'https://cdn.ichika.cc/WallPaper/illust_101965789_20221019_154953.png']Moblieimg = [ //手机壁纸  'https://cdn.ichika.cc/WallPaper/102185774_p0.jpg',  'https://cdn.ichika.cc/WallPaper/102897176_p0.jpg',  'https://cdn.ichika.cc/WallPaper/103399572_p0.png',  'https://cdn.ichika.cc/WallPaper/104001022_p0.jpg',  'https://cdn.ichika.cc/typora/Miku15Years.jpg',  'https://cdn.ichika.cc/page/Touhou1.jpg',  'https://cdn.ichika.cc/page/bbcover.png',  'https://cdn.ichika.cc/typora/202210141549113.jpg',  'https://cdn.ichika.cc/typora/202210141549936.jpg',  'https://cdn.ichika.cc/WallPaper/illust_100285476_20221019_154927.png',  'https://cdn.ichika.cc/WallPaper/illust_83162615_20221019_154713.jpg',  'https://cdn.ichika.cc/WallPaper/illust_87558396_20221019_154633.jpg',  'https://cdn.ichika.cc/WallPaper/illust_93208096_20221019_154748.jpg',  'https://cdn.ichika.cc/WallPaper/illust_93261557_20221019_154904.jpg',  'https://cdn.ichika.cc/WallPaper/illust_94054694_20221019_154602.png',  'https://cdn.ichika.cc/WallPaper/illust_94886325_20221019_154850.png',  'https://cdn.ichika.cc/WallPaper/illust_94964180_20221019_154719.png',  'https://cdn.ichika.cc/WallPaper/illust_96477234_20221019_154742.jpg',  'https://cdn.ichika.cc/WallPaper/illust_96791042_20221019_154642.jpg',  'https://cdn.ichika.cc/WallPaper/illust_97513114_20221019_154922.jpg',  'https://cdn.ichika.cc/WallPaper/illust_97883472_20221019_154736.jpg',  'https://cdn.ichika.cc/WallPaper/illust_98031598_20221019_154829.jpg',  'https://cdn.ichika.cc/WallPaper/illust_98107508_20221019_154822.jpg',  'https://cdn.ichika.cc/WallPaper/illust_98398587_20221019_154815.jpg',  'https://cdn.ichika.cc/WallPaper/illust_99170622_20221019_154809.jpg',  'https://cdn.ichika.cc/WallPaper/illust_99486664_20221019_154914.jpg',  'https://cdn.ichika.cc/WallPaper/illust_99684687_20221019_154620.png']// 设置窗口// 存数据function saveData(name, data) {  localStorage.setItem(name, JSON.stringify({    'time': Date.now(),    'data': data  }))}// 取数据function loadData(name, time) {  let d = JSON.parse(localStorage.getItem(name));  // 过期或有错误返回 0 否则返回数据  if (d) {    let t = Date.now() - d.time    if (t < (time * 60 * 1000) && t > -1) return d.data;  }  return 0;}// 切换背景函数// 此处的flag是为了每次读取时都重新存储一次,导致过期时间不稳定// 如果flag为0则存储,即设置背景. 为1则不存储,即每次加载自动读取背景.function changeBg(s, flag) {  //移出web_bg pjax选择器，防止闪屏  hasSetBg = true;  let bg = document.getElementById('web_bg')  let hd = document.getElementById('page-header')  if (s.charAt(0) == '#') {    bg.style.backgroundColor = s    bg.style.backgroundImage = 'none'    bg.style.setProperty('opacity', '1', 'important')    hd.style.backgroundColor = s    hd.style.backgroundImage = 'none'    bg.classList.add('header-nogradient')    hd.classList.add('header-nogradient')  } else {    bg.style.backgroundImage = s    if (s.charAt(0) === 'l') {      bg.style.setProperty('opacity', '1', 'important')      bg.classList.add('header-nogradient')      hd.classList.add('header-nogradient')    } else {      bg.style.setProperty('opacity', '1', 'important')      bg.classList.remove('header-nogradient')      hd.classList.remove('header-nogradient')    }    hd.style.backgroundImage = s  }  if (!flag) {    try {      pjaxSelectors.forEach(function (item, index, arr) {        if (item === "#web_bg") {          arr.splice(index, 1);        }      });    } catch (error) {}    saveData('blogbg', s)  }}//控制台函数//桌面端按钮拖动var consoleButton = document.getElementById("consoleButton");var isDrag = false;consoleButton.onmousedown = function (mousePos) {  var btnPosX = consoleButton.style.right;  var btnPosY = consoleButton.style.bottom;  let startTime = new Date();  document.onmousemove = function (evt) {    let nowTime = new Date();    if (nowTime - startTime > 100) {      isDrag = true;      var resultX = parseFloat(btnPosX) - (evt.clientX - mousePos.clientX);      var resultY = parseFloat(btnPosY) - (evt.clientY - mousePos.clientY);      resultX = (resultX > 0 && resultX < window.innerWidth - consoleButton.clientWidth) ? resultX : Math.max(0, Math.min(window.innerWidth - consoleButton.clientWidth, resultX));      resultY = (resultY > 0 && resultY < window.innerHeight - consoleButton.clientHeight) ? resultY : Math.max(0, Math.min(window.innerHeight - consoleButton.clientHeight, resultY));      consoleButton.style.right = resultX + 'px';      consoleButton.style.bottom = resultY + 'px';    }  }  document.onmouseup = function () {    document.onmousemove = null;  };};//移动端按钮拖动consoleButton.ontouchstart = function (a) {  var mousePos = a.targetTouches[0];  var btnPosX = consoleButton.style.right;  var btnPosY = consoleButton.style.bottom;  let startTime = new Date();  consoleButton.ontouchmove = function (e) {    e.preventDefault()    let nowTime = new Date();    if (nowTime - startTime > 100) {      var evt = e.targetTouches[0];      var resultX = parseFloat(btnPosX) - (evt.clientX - mousePos.clientX);      var resultY = parseFloat(btnPosY) - (evt.clientY - mousePos.clientY);      resultX = (resultX > 0 && resultX < window.innerWidth - consoleButton.clientWidth) ? resultX : Math.max(0, Math.min(window.innerWidth - consoleButton.clientWidth, resultX));      resultY = (resultY > 0 && resultY < window.innerHeight - consoleButton.clientHeight) ? resultY : Math.max(0, Math.min(window.innerHeight - consoleButton.clientHeight, resultY));      consoleButton.style.right = resultX + 'px';      consoleButton.style.bottom = resultY + 'px';    }  }  document.ontouchend = function () {    document.ontouchmove = null;  };};function showConsole() {  if (isDrag) {    isDrag = false;    return;  }  let consolePanel = document.getElementById('console');  let consblur = document.getElementById('console-blur')  if (consolePanel.style.opacity == 0) {    consolePanel.style.opacity = 1;    consolePanel.style.zIndex = 999;    consblur.style.opacity = 1;    consblur.style.zIndex = 998;  } else {    consolePanel.style.opacity = 0;    consolePanel.style.zIndex = -100;    consblur.style.opacity = 0;    consblur.style.zIndex = -100;  }}function backToMenu() {  let secmenu = document.getElementById('console-secmenu')  document.getElementById('console-content').classList.remove('console-insecmenu');  document.getElementById('console-settings').style.opacity = 1;  document.getElementById('console-show').style.opacity = 1;  document.getElementById('console-bottom').style.opacity = 1;  document.getElementById('console-return').style.opacity = 0;  secmenu.style.opacity = 0;  secmenu.style.zIndex = -1;}function showSecMenu() {  let secmenu = document.getElementById('console-secmenu')  document.getElementById('console-content').classList.add('console-insecmenu');  document.getElementById('console-settings').style.opacity = 0;  document.getElementById('console-show').style.opacity = 0;  document.getElementById('console-bottom').style.opacity = 0;  document.getElementById('console-return').style.opacity = 1;  secmenu.style.opacity = 1;  secmenu.style.zIndex = 1;}//主界面快速按钮function darkMode() {  const nowMode = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'light'  if (nowMode === 'light') {    activateDarkMode()    document.getElementById('quick-darkmode').innerHTML = '<i class="fas fa-sun"></i>'    saveToLocal.set('theme', 'dark', 2)    GLOBAL_CONFIG.Snackbar !== undefined && btf.snackbarShow(GLOBAL_CONFIG.Snackbar.day_to_night)  } else {    activateLightMode()    document.getElementById('quick-darkmode').innerHTML = '<i class="fas fa-moon"></i>'    saveToLocal.set('theme', 'light', 2)    GLOBAL_CONFIG.Snackbar !== undefined && btf.snackbarShow(GLOBAL_CONFIG.Snackbar.night_to_day)  }  try {    layoutSwitch('bgBlur', loadData('bgBlur', 1440 * 30))  } catch (error) {    localStorage.removeItem(option);    console.log('error')  }  // handle some cases  typeof utterancesTheme === 'function' && utterancesTheme()  typeof changeGiscusTheme === 'function' && changeGiscusTheme()  typeof FB === 'object' && window.loadFBComment()  typeof runMermaid === 'function' && window.runMermaid()}function readMode() {  const $body = document.body  $body.classList.add('read-mode')  const newEle = document.createElement('button')  newEle.type = 'button'  newEle.className = 'fas fa-sign-out-alt exit-readmode'  $body.appendChild(newEle)  function clickFn() {    $body.classList.remove('read-mode')    newEle.remove()    newEle.removeEventListener('click', clickFn)  }  newEle.addEventListener('click', clickFn)  showConsole()}function fullScreen() {  if (document.fullscreenElement) document.exitFullscreen()  else document.documentElement.requestFullscreen();}function showBgSetting() { //切换背景页面  let result = `<div id="blog-setting">    <span><button id="resetbg" onclick="localStorage.removeItem('blogbg');localStorage.removeItem('autoTheme');localStorage.removeItem('manualTheme');location.reload();"><i class="fa-solid fa-arrows-rotate"></i> 重置背景</button></span>    <h2 id="主题"><a href="#主题" class="headerlink" title="主题"></a>主题<span style='font-size:14px;font-weight:normal'>(自定义背景图片请使用default)</span></h2>    <div class="bgbox"><a href="javascript:;" rel="noopener external nofollow" style="background-image:url('https://cdn.ichika.cc/theme/default/bg.jpg!cover');position:relative" class="imgbox" onclick="manualSetTheme('default');location.reload();"><div class="themebox">default</div></a>`  fesTheme.forEach(function (themeName) {    result += `<a href="javascript:;" rel="noopener external nofollow" style="background-image:url('https://cdn.ichika.cc/theme/${themeName}/bg.jpg!cover');position:relative" class="imgbox" onclick="manualSetTheme('${themeName}')"><div class="themebox">${themeName}</div></a>`  })  result += `</div><h2 id="桌面端"><a href="#桌面端" class="headerlink" title="桌面端"></a>桌面端</h2><div class="bgbox">`  PCimg.forEach(function (img) {    result += `<a href="javascript:;" rel="noopener external nofollow" style="background-image:url(${img}!cover)" class="imgbox" onclick="changeBg('url(${img})')"></a>`  })  result += `</div><h2 id="移动端"><a href="#移动端" class="headerlink" title="移动端"></a>移动端</h2><div class="bgbox">`  Moblieimg.forEach(function (img) {    result += `<a href="javascript:;" rel="noopener external nofollow" style="background-image:url(${img}!cover)" class="pimgbox" onclick="changeBg('url(${img})')"></a>`  })  result += `</div><h2 id="4K"><a href="#4K" class="headerlink" title="4K"></a>4K</h2><div class="bgbox">`  UHDimg.forEach(function (img) {    result += `<a href="javascript:;" rel="noopener external nofollow" style="background-image:url(${img}!cover)" class="imgbox" onclick="changeBg('url(${img})')"></a>`  })  document.getElementById('console-secmenu').innerHTML = result + `</div>    <h2 id="渐变"><a href="#渐变" class="headerlink" title="渐变"></a>渐变</h2>    <div class="bgbox">    <a href="javascript:;" rel="noopener external nofollow" class="box" style="background: linear-gradient(to right, #eecda3, #ef629f)" onclick="changeBg('linear-gradient(to right, #eecda3, #ef629f)')"></a>    <a href="javascript:;" rel="noopener external nofollow" class="box" style="background: linear-gradient(to right, #B7D31E, #42CE1E)" onclick="changeBg('linear-gradient(to right, #B7D31E, #42CE1E)')"></a>    <a href="javascript:;" rel="noopener external nofollow" class="box" style="background: linear-gradient(to right, #06DE86, #06A5DE)" onclick="changeBg('linear-gradient(to right, #06DE86, #06A5DE)')"></a>    <a href="javascript:;" rel="noopener external nofollow" class="box" style="background: linear-gradient(to right, #189BC4, #183DC4)" onclick="changeBg('linear-gradient(to right, #189BC4, #183DC4)')"></a>    <a href="javascript:;" rel="noopener external nofollow" class="box" style="background: linear-gradient(to right, #C018C4, #C41818)" onclick="changeBg('linear-gradient(to right, #C018C4, #C41818)')"></a>    <a href="javascript:;" rel="noopener external nofollow" class="box" style="background: linear-gradient(to right, #8B00BB, #030094)" onclick="changeBg('linear-gradient(to right, #8B00BB, #030094)')"></a>    </div>    <h2 id="纯色"><a href="#纯色" class="headerlink" title="纯色"></a>纯色</h2>    <div class="bgbox">    <a href="javascript:;" rel="noopener external nofollow" class="box" style="background: #7D9D9C" onclick="changeBg('#7D9D9C')"></a>    <a href="javascript:;" rel="noopener external nofollow" class="box" style="background: #fff" onclick="changeBg('#fff')"></a>    <a href="javascript:;" rel="noopener external nofollow" class="box" style="background: #49A6E9" onclick="changeBg('#49A6E9')"></a>    <a href="javascript:;" rel="noopener external nofollow" class="box" style="background: #F7CEFF" onclick="changeBg('#F7CEFF')"></a>    <a href="javascript:;" rel="noopener external nofollow" class="box" style="background: #FFFFCE" onclick="changeBg('#FFFFCE')"></a>    <a href="javascript:;" rel="noopener external nofollow" class="box" style="background: #CFFFCE" onclick="changeBg('#CFFFCE')"></a>    <a href="javascript:;" rel="noopener external nofollow" class="box" style="background: #17EFE9" onclick="changeBg('#17EFE9')"></a>    <a href="javascript:;" rel="noopener external nofollow" class="box" style="background: #9F17EF" onclick="changeBg('#9F17EF')"></a>    </div>`;  showSecMenu();}//按钮idvar layoutOption = [  ['showWidget', '显示侧边栏', 1, '显示信息栏', 0], //[关键词，桌面端名，桌面端默认值，移动端名，移动端默认值] 1：true 0：false -1：隐藏  ['singleRow', '首页单栏布局', 0, '', -1],  ['navFixed', '固定导航栏', 1, '固定导航栏', 1],  ['HDCover', '高清封面（消耗流量）', 0, '', -1],  ['bgBlur', '背景虚化（消耗性能）', 1, '背景虚化（消耗性能）', 1],  ['useSakura', '落樱特效', 1, '落樱特效', 0],  ['clickEffect', '单击特效', 1, '', -1]]isNavFixed = true//布局页function showLayoutSetting() {  if (window.innerWidth > 768) {    let a = `<div id="layout-content"><button id="resetLayout" onclick="resetLayout()"><i class="fa-solid fa-arrows-rotate"></i></button>        <div><ul>`    layoutOption.forEach((option) => {      if (option[2] != -1) a += `<li><span>${option[1]}</span><label class="switch"><input id="${option[0]}" onclick="layoutSwitch('${option[0]}',1)" type="checkbox" ${option[2] == 1 ? 'checked' : ''}><div class="slider round"></div></label></li>`    })    a += `</ul></div></div>`    document.getElementById('console-secmenu').innerHTML = a  } else {    let a = `<div id="layout-content"><button id="resetLayout" onclick="resetLayout()"><i class="fa-solid fa-arrows-rotate"></i></button>        <div><ul>`    layoutOption.forEach((option) => {      if (option[4] != -1) a += `<li><span>${option[3]}</span><label class="switch"><input id="${option[0]}" onclick="layoutSwitch('${option[0]}',1)" type="checkbox" ${option[4] == 1 ? 'checked' : ''}><div class="slider round"></div></label></li>`    })    a += `</ul></div></div>`    document.getElementById('console-secmenu').innerHTML = a  }  //设置按钮初始状态  layoutOption.forEach(function (option) {    try {      if ((window.innerWidth > 768 && option[2] != -1) || (window.innerWidth <= 768 && option[4] != -1)) {        let data = loadData(option[0], 1440 * 30)        if (typeof (data) == "boolean") document.getElementById(option[0]).checked = data;        else localStorage.removeItem(option[0]);      }    } catch (error) {      localStorage.removeItem(option[0]);      console.log('error')    }  })  showSecMenu();}//恢复默认设置function resetLayout() {  layoutOption.forEach(option => {    if (window.innerWidth > 768) {      if (option[2] == 0) {        document.getElementById(option[0]).checked = false;        layoutSwitch(option[0], false);      } else if (option[2] == 1) {        document.getElementById(option[0]).checked = true;        layoutSwitch(option[0], true)      }    } else {      if (option[4] == 0) {        document.getElementById(option[0]).checked = false;        layoutSwitch(option[0], false);      } else if (option[4] == 1) {        document.getElementById(option[0]).checked = true;        layoutSwitch(option[0], true)      }    }  })}//布局页各项设置function layoutSwitch(name, flag) {  let switchOn = (typeof (flag) == "boolean") ? flag : document.getElementById(name).checked;  switch (name) {    case 'showWidget':      if (switchOn) {        if (document.getElementById('aside-content')) document.getElementById('aside-content').classList.remove('show-widget-asidehide')        if (document.getElementById('post')) document.getElementById('post').classList.remove('show-widget-posts')        if (document.getElementById('recent-posts')) document.getElementById('recent-posts').classList.remove('show-widget-posts')        if (document.getElementsByClassName('post_cover')) Array.from(document.getElementsByClassName('post_cover')).forEach(function (item) {          item.classList.remove('show-widget-postcard')        })      } else {        if (document.getElementById('aside-content')) document.getElementById('aside-content').classList.add('show-widget-asidehide')        if (document.getElementById('post')) document.getElementById('post').classList.add('show-widget-posts')        if (document.getElementById('recent-posts')) document.getElementById('recent-posts').classList.add('show-widget-posts')        if (document.getElementsByClassName('post_cover')) Array.from(document.getElementsByClassName('post_cover')).forEach(function (item) {          item.classList.add('show-widget-postcard')        })      }      break;    case 'singleRow':      if (switchOn && document.getElementsByClassName('recent-post-item')) {        Array.from(document.getElementsByClassName('recent-post-item')).forEach(function (item) {          item.classList.add('single-row')        })        if (typeof (flag) == "number" && document.getElementById('HDCover').checked) layoutSwitch('HDCover', true)      } else if (!switchOn && document.getElementsByClassName('recent-post-item')) Array.from(document.getElementsByClassName('recent-post-item')).forEach(function (item) {        item.classList.remove('single-row')      })      break;    case 'navFixed':      if (switchOn) isNavFixed = true;      else {        if (document.getElementsByClassName('menus_items')[1].classList.contains('page-name-invisible')) {          document.getElementsByClassName('menus_items')[1].classList.remove('page-name-invisible')          document.getElementsByClassName('menus_items')[1].classList.add('page-name-visible')          document.getElementById('page-name').classList.remove('page-name-visible')          document.getElementById('page-name').classList.add('page-name-invisible')        }        isNavFixed = false;      }      break;    case 'HDCover':      if (switchOn && (loadData('singleRow', 1440 * 30) == true || document.getElementById('singleRow'))) Array.from(document.getElementsByClassName('post_bg')).forEach(function (img) {        img.setAttribute("src", `${img.getAttribute('src').split('!cover')[0]}`)      })      break;    case 'bgBlur':      if (switchOn) {        if (document.documentElement.getAttribute('data-theme') === 'dark') document.documentElement.style.setProperty('--ichika-card-bg', ichikaCardBgDark)        else document.documentElement.style.setProperty('--ichika-card-bg', ichikaBlurBg)        document.documentElement.style.setProperty('--ichika-bgblur', ichikaBlur)      } else {        if (document.documentElement.getAttribute('data-theme') === 'dark') document.documentElement.style.setProperty('--ichika-card-bg', ichikaCardBgDark)        else document.documentElement.style.setProperty('--ichika-card-bg', ichikaNoBlurBg)        document.documentElement.style.setProperty('--ichika-bgblur', ichikaNoBlur)      }      break;    case 'useSakura':      stopp(switchOn)      break;    case 'clickEffect':      if (switchOn && document.getElementsByClassName('fireworks')[0]) document.getElementsByClassName('fireworks')[0].setAttribute('style', 'display:block')      else if (!switchOn && document.getElementsByClassName('fireworks')[0]) document.getElementsByClassName('fireworks')[0].setAttribute('style', 'display:none')      break;    default:      break;  }  saveData(name, switchOn)}//主题设置//切换情况：自动切换与手动切换//特殊节日：自动切换为节日主题，节日结束后换回默认或用户先前的设置。如果用户在节日期间设置主题，则将自动主题设为'setByUser'，在此期间均使用用户设置主题。节日结束后将自动主题重设为默认，继续使用用户设置主题//常规日期：使用默认或用户手动设置的主题，同时恢复自动主题为默认//问题：如果用户在当前节日手动切换主题，即自动主题置为'setByUser'，如果下次访问站点时为一个新的节日且自动主题有效期未过期（10天），即错过了常规日期将自动主题恢复为默认，那么新访问站点时自动主题仍为'setByUser'，不会自动切换为节日主题//判断当前日期是否是特殊节日var isFestival;var myDate = new Date;var today = myDate.getMonth() + 1 + '.' + myDate.getDate();switch (today) {  case '12.24':  case '12.25':    isFestival = 'Christmas';    break;  case '12.31':  case '1.1':  case '1.2':  case '1.3':    isFestival = 'NewYear';    break;  case '1.19':  case '1.20':  case '1.21':  case '1.22':  case '1.23':  case '1.24':  case '1.25':  case '1.26':  case '1.27':    isFestival = 'SF2023';    break;  default:    isFestival = 'default';    break;}//自动设置主题，检测用户有没有手动修改try {  let autoTheme = loadData('autoTheme', 14400);  if (autoTheme != 'setByUser' || isFestival == 'default') saveData('autoTheme', isFestival);} catch (error) {  saveData('autoTheme', isFestival);  console.log('error1')}//读取主题设置try {  let autoTheme = loadData('autoTheme', 14400);  let manualTheme = loadData('manualTheme', 1440 * 30);  if (autoTheme && autoTheme != 'default' && autoTheme != 'setByUser') setTheme(autoTheme);  else if (manualTheme) setTheme(manualTheme);  else {    saveData('autoTheme', isFestival)    setTheme(isFestival);  }} catch (error) {  localStorage.removeItem('autoTheme');  localStorage.removeItem('manualTheme');  saveData('autoTheme', isFestival)  setTheme(isFestival);}//设置主题function setTheme(themeName) {  if (themeName == 'default') {    setBg();    return;  }  changeBg("url('https://cdn.ichika.cc/theme/" + themeName + "/bg.jpg')", 1);  try {    pjaxSelectors.forEach(function (item, index, arr) {      if (item === "#web_bg") {        arr.splice(index, 1);      }    });  } catch (error) {}  //移出旧的css和js  $('.themeStyle').remove();  $('.themeScript').remove();  effectImg.src = 'https://cdn.ichika.cc/theme/' + themeName + '/effect.png';  let themeStyle = document.createElement("link");  themeStyle.setAttribute("class", "themeStyle")  themeStyle.setAttribute("rel", "stylesheet");  themeStyle.setAttribute("type", "text/css");  themeStyle.setAttribute("href", 'https://cdn.ichika.cc/theme/' + themeName + '/style.css');  document.body.appendChild(themeStyle);  let themeScript = document.createElement("script");  themeScript.setAttribute("class", "themeScript");  themeScript.setAttribute("src", 'https://cdn.ichika.cc/theme/' + themeName + '/script.js');  document.body.appendChild(themeScript);}function manualSetTheme(themeName) {  saveData('autoTheme', 'setByUser');  saveData('manualTheme', themeName);  setTheme(themeName);}// 读取背景function setBg() {  try {    let data = loadData('blogbg', 1440 * 30)    if (data) {      changeBg(data, 1)    } else localStorage.removeItem('blogbg');  } catch (error) {    localStorage.removeItem('blogbg');  }}//初始化布局设置layoutOption.forEach(function (option) {  try {    let data = loadData(option[0], 1440 * 30)    if (typeof (data) == "boolean") layoutSwitch(option[0], data)    else localStorage.removeItem(option)[0];  } catch (error) {    localStorage.removeItem(option[0])  }})//统计页51统计数据var lainfo = ''function showData() {  // 链接替换即可，不需要后面的参数  document.getElementById('console-secmenu').innerHTML = `<div id="data-content"">    <iframe id="timeuprobot" src="https://status.ichika.cc"><div class="comments-load" id="iframeload"></div></iframe>    <div class="data-meta"><div id="data-51la"><div class="comments-load"></div></div></div>    </div>`  if (lainfo == '') {    fetch('https://v6-widget.51.la/v6/JqAEr98WCPCHb0eq/quote.js').then(res => res.text()).then((data) => {      let title = ['最近活跃访客', '今日人数', '今日访问', '昨日人数', '昨日访问', '本月访问', '总访问量']      let num = data.match(/(<\/span><span>).*?(\/span><\/p>)/g);      num = num.map(el => {        let val = el.replace(/(<\/span><span>)/g, "");        let str = val.replace(/(<\/span><\/p>)/g, "");        return str;      });      let order = [1, 3, 2, 4, 5] // 新增  可排序，如果需要隐藏则删除对应数字即可。      // 示例：[1, 3, 2, 4, 5] 显示 ['今日人数', '昨日人数', '今日访问', '昨日访问', '本月访问']，不显示 最近活跃访客(0) 和 总访问量(6)      for (let i = 0; i < order.length; i++) lainfo += '<div><span>' + title[order[i]] + '</span><span class="num-51la">' + num[order[i]] + '</span></div>'      document.getElementById('data-51la').innerHTML = lainfo + `<div style="text-align:center">由<a target="_blank" rel="nofollow noopener noreferrer" href='https://www.51.la/'>51LA</a>提供数据支持</div>`    })  } else document.getElementById('data-51la').innerHTML = lainfo + `<div style="text-align:center">由<a target="_blank" rel="nofollow noopener noreferrer" href='https://www.51.la/'>51LA</a>提供数据支持</div>`  showSecMenu();}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/custom.js"/>
      <url>/js/custom.js</url>
      
        <content type="html"><![CDATA[// 霓虹灯效果// 颜色数组var arr = ["#39c5bb", "#f14747", "#f1a247", "#f1ee47", "#b347f1", "#1edbff", "#ed709b", "#5636ed"];// 颜色索引var idx = 0;// 切换颜色function changeColor() {  // 仅夜间模式才启用  if (document.getElementsByTagName('html')[0].getAttribute('data-theme') == 'dark') {    if (document.getElementById("site-name"))      document.getElementById("site-name").style.textShadow = arr[idx] + " 0 0 15px";    if (document.getElementById("site-title"))      document.getElementById("site-title").style.textShadow = arr[idx] + " 0 0 15px";    if (document.getElementById("site-subtitle"))      document.getElementById("site-subtitle").style.textShadow = arr[idx] + " 0 0 10px";    if (document.getElementById("post-info"))      document.getElementById("post-info").style.textShadow = arr[idx] + " 0 0 5px";    try {      document.getElementsByClassName("author-info__name")[0].style.textShadow = arr[idx] + " 0 0 12px";      document.getElementsByClassName("author-info__description")[0].style.textShadow = arr[idx] + " 0 0 12px";    } catch {    }    idx++;    if (idx == 8) {      idx = 0;    }  } else {    // 白天模式恢复默认    if (document.getElementById("site-name"))      document.getElementById("site-name").style.textShadow = "#1e1e1ee0 1px 1px 1px";    if (document.getElementById("site-title"))      document.getElementById("site-title").style.textShadow = "#1e1e1ee0 1px 1px 1px";    if (document.getElementById("site-subtitle"))      document.getElementById("site-subtitle").style.textShadow = "#1e1e1ee0 1px 1px 1px";    if (document.getElementById("post-info"))      document.getElementById("post-info").style.textShadow = "#1e1e1ee0 1px 1px 1px";    try {      document.getElementsByClassName("author-info__name")[0].style.textShadow = "";      document.getElementsByClassName("author-info__description")[0].style.textShadow = "";    } catch {    }  }}// 开启计时器window.onload = setInterval(changeColor, 1200);var percentFlag = false; // 节流阀function essayScroll() {  let a = document.documentElement.scrollTop || window.pageYOffset; // 卷去高度  const waterfallResult = a % document.documentElement.clientHeight; // 卷去一个视口  result <= 99 || (result = 99);  if (    !percentFlag &&    waterfallResult + 100 >= document.documentElement.clientHeight &&    document.querySelector("#waterfall")  ) {    // console.info(waterfallResult, document.documentElement.clientHeight);    setTimeout(() => {      waterfall("#waterfall");    }, 500);  } else {    setTimeout(() => {      document.querySelector("#waterfall") && waterfall("#waterfall");    }, 500);  }  const r = window.scrollY + document.documentElement.clientHeight;  let p = document.getElementById("post-comment") || document.getElementById("footer");  (p.offsetTop + p.offsetHeight / 2 < r || 90 < result) && (percentFlag = true);}function replaceAll(e, n, t) {  return e.split(n).join(t);}var anzhiyu = {  diffDate: function (d, more = false) {    const dateNow = new Date();    const datePost = new Date(d);    const dateDiff = dateNow.getTime() - datePost.getTime();    const minute = 1000 * 60;    const hour = minute * 60;    const day = hour * 24;    const month = day * 30;    let result;    if (more) {      const monthCount = dateDiff / month;      const dayCount = dateDiff / day;      const hourCount = dateDiff / hour;      const minuteCount = dateDiff / minute;      if (monthCount >= 1) {        result = datePost.toLocaleDateString().replace(/\//g, "-");      } else if (dayCount >= 1) {        result = parseInt(dayCount) + " " + GLOBAL_CONFIG.date_suffix.day;      } else if (hourCount >= 1) {        result = parseInt(hourCount) + " " + GLOBAL_CONFIG.date_suffix.hour;      } else if (minuteCount >= 1) {        result = parseInt(minuteCount) + " " + GLOBAL_CONFIG.date_suffix.min;      } else {        result = GLOBAL_CONFIG.date_suffix.just;      }    } else {      result = parseInt(dateDiff / day);    }    return result;  },  changeTimeInEssay: function () {    document.querySelector("#bber") &&      document.querySelectorAll("#bber time").forEach(function (e) {        var t = e,          datetime = t.getAttribute("datetime");        (t.innerText = anzhiyu.diffDate(datetime, true)), (t.style.display = "inline");      });  },  reflashEssayWaterFall: function () {    document.querySelector("#waterfall") &&      setTimeout(function () {        waterfall("#waterfall");        document.getElementById("waterfall").classList.add("show");      }, 200);  },  commentText: function (e) {    if (e == "undefined" || e == "null") e = "好棒！";    var n = document.getElementsByClassName("el-textarea__inner")[0],      t = document.createEvent("HTMLEvents");    if (!n) return;    t.initEvent("input", !0, !0);    var o = replaceAll(e, "\n", "\n> ");    (n.value = "> " + o + "\n\n"), n.dispatchEvent(t);    var i = document.querySelector("#post-comment").offsetTop;    window.scrollTo(0, i - 80),      n.focus(),      n.setSelectionRange(-1, -1),      document.getElementById("comment-tips") && document.getElementById("comment-tips").classList.add("show");  },  initIndexEssay: function () {    setTimeout(() => {      let essay_bar_swiper = new Swiper(".essay_bar_swiper_container", {        passiveListeners: true,        direction: "vertical",        loop: true,        autoplay: {          disableOnInteraction: true,          delay: 3000,        },        mousewheel: true,      });      let essay_bar_comtainer = document.getElementById("bbtalk");      if (essay_bar_comtainer !== null) {        essay_bar_comtainer.onmouseenter = function () {          essay_bar_swiper.autoplay.stop();        };        essay_bar_comtainer.onmouseleave = function () {          essay_bar_swiper.autoplay.start();        };      }    }, 100);  },};anzhiyu.initIndexEssay();anzhiyu.changeTimeInEssay();anzhiyu.reflashEssayWaterFall();function removeRandomBanner() {  var randomBar = document.querySelector('#random')  if (randomBar) {    randomBar.style.display = 'none'  }}if (location.pathname.substring(0, 5) === '/page') removeRandomBanner()// /* 右上角切换主题按钮 */// /* icon-taiyang | icon-yueliang */// function darkToLight() {//     var themeCoin = document.querySelector('#dark-theme-coin')//     /* var htmlTheme = document.documentElement.getAttribute('data-theme')//     if (htmlTheme === 'dark') {//         themeCoin.className = 'iconfont icon-taiyang fa-fw'//         $('html').attr('data-theme', 'light')//     } else {//         themeCoin.className = 'iconfont icon-yueliang fa-fw'//         $('html').attr('data-theme', 'dark')//     } *///     var date = +new Date();//     if ($('html').attr('data-theme') === 'light') {//         themeCoin.className = 'iconfont icon-yueliang fa-fw'//         var themeData = {//             theme: 'dark',//             expiry: date//         }//         localStorage.setItem('theme', JSON.stringify(themeData))//         // localStorage.setItem('theme',theme);//         $('html').attr('data-theme', 'dark')//     } else {//         themeCoin.className = 'iconfont icon-taiyang fa-fw'//         var themeData = {//             theme: 'light',//             expiry: date//         }//         localStorage.setItem('theme', JSON.stringify(themeData))//         $('html').attr('data-theme', 'light')//     }// }// var flag = true// var timer// document.addEventListener('keyup', function (e) {//     clearTimeout(timer)//     if (e.keyCode === 9 && flag === true) {//         flag = false//         e.preventDefault()//         darkToLight()//     }//     timer = setTimeout(function () {//         flag = true//     }, 1e3)// })// $.ajax({//   type: 'GET',//   url: ' ',//   data: {},//   dataType: 'JSON',//   async: false, //请求是否异步，默认为异步//   headers: {//     'Authorization': localStorage.getItem('token')//   },//   success: function (res) {//     console.log(res);//   },//   error: function (e) {//     console.log(e);//   }// })// $.ajax({//   type: 'POST',//   url: '',//   data: {},//   dataType: "json",//   contentType: "application/json",//   headers: {//     // Accept: "application/json; charset=utf-8",//     token: localStorage.getItem('token')//   },//   success: function (res) {//     console.log(res);//   },//   error: function (e) {//     console.log(e);//   }// })]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/dianzan.js"/>
      <url>/js/dianzan.js</url>
      
        <content type="html"><![CDATA[function GetUrlRelativePath() {  var url = document.location.toString();  var arrUrl = url.split("//");  var start = arrUrl[1].indexOf("/");  var relUrl = arrUrl[1].substring(start);  if (relUrl.indexOf("?") != -1) {    relUrl = relUrl.split("?")[0];  }  return relUrl;}$(document).ready(function () {  const {    Query,    User  } = AV;  AV.init({    appId: "n5bJDnhkFDPpUxlHphl01Fa6-gzGzoHsz",    appKey: "N6dnp2zcXFvTon5Emp0cG3Nm",    serverURLs: "https://n5bjdnhk.lc-cn-n1-shared.com"    // appId: "itTEnRp2e8zPuxOcSkAOmEc7-MdYXbMMI",    // appKey: "JYgISKzbk3hNbNoNj5P0XEIe",    // serverURL: "https://ittenrp2.api.lncldglobal.com"    // appId: "PMHJupAc9h04752ZS0JbU9TW-gzGzoHsz",    // appKey: "iapeQUi15n90QgF2MaOvMiuW",    // serverURL: "https://pmhjupac.lc-cn-n1-shared.com"  });  var dianzans = [];  var hrefs = [];  var ids = [];  const query2 = new AV.Query('Zan');  query2.find().then((dzs) => {    for (i = dzs.length - 1; i >= 0; i--) {      dianzans.push(dzs[i]["attributes"]["count"]);      hrefs.push(dzs[i]["attributes"]["href"]);      ids.push(dzs[i]["id"])    }    index = hrefs.indexOf(GetUrlRelativePath());    console.log(dianzans[index])    if (dianzans[index] === undefined) {      document.getElementsByClassName("dianzan-count")[0].innerText = "0";    } else {      document.getElementsByClassName("dianzan-count")[0].innerText = dianzans[index];    }  });})function setCount() {  var dianzans = [];  var hrefs = [];  var ids = [];  const query2 = new AV.Query('Zan');  query2.find().then((dzs) => {    for (i = dzs.length - 1; i >= 0; i--) {      dianzans.push(dzs[i]["attributes"]["count"]);      hrefs.push(dzs[i]["attributes"]["href"]);      ids.push(dzs[i]["id"])    }    index = hrefs.indexOf(GetUrlRelativePath());    console.log(dianzans[index])    if (dianzans[index] === undefined) {      document.getElementsByClassName("dianzan-count")[0].innerText = "0";    } else {      document.getElementsByClassName("dianzan-count")[0].innerText = dianzans[index] + 1;    }  });}function dianzan() {  try {    var dianzans = [];    var hrefs = [];    var ids = [];    const query = new AV.Query('Zan');    query.find().then((dzs) => {      for (i = dzs.length - 1; i >= 0; i--) {        dianzans.push(dzs[i]["attributes"]["count"]);        hrefs.push(dzs[i]["attributes"]["href"]);        ids.push(dzs[i]["id"])      }      if (hrefs.indexOf(GetUrlRelativePath()) == -1) {        console.log(1)        const TestObject = AV.Object.extend('Zan');        const testObject = new TestObject();        testObject.set('href', GetUrlRelativePath());        testObject.set('count', 1);        testObject.save();      } else {        index = hrefs.indexOf(GetUrlRelativePath());        console.log(ids[index])        query.get(ids[index]).then((todo) => {          todo.set('count', dianzans[index] + 1);          todo.save();        });      }      setCount();    });  } catch (err) {    const TestObject = AV.Object.extend('Zan');    const testObject = new TestObject();    testObject.set('href', GetUrlRelativePath());    testObject.set('count', 1);    testObject.save();  }}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/firework.js"/>
      <url>/js/firework.js</url>
      
        <content type="html"><![CDATA[if (location.pathname == '/') {  window.requestAnimationFrame = (function () {    return window.requestAnimationFrame ||      window.webkitRequestAnimationFrame ||      window.mozRequestAnimationFrame ||      function (callback) {        window.setTimeout(callback, 10000)        //每间隔10秒执行一次动画      }  })();  //获取canvas区域.并设置宽和高  var area = document.querySelector("#universe");  area.width = document.documentElement.clientWidth;  area.height = document.documentElement.clientHeight;  //转换成2d模型  var ctx = area.getContext("2d");  //烟花数组  hue = 120; //设置颜色范围  timerTick = 0; //计时器  timerTotal = 5; //每间隔5秒烟花绽放一次  fireworks = []; //存放烟花数组  particles = []; //存放碎屑数组  //随机min和max之间的值  function random(min, max) {    return Math.random() * (max - min) + min;  }  //计算两点之间的距离  function distans(sx, sy, tx, ty) {    var xdistan = sx - tx;    var ydistan = sy - ty;    return Math.sqrt((Math.pow(xdistan, 2) + Math.pow(ydistan, 2)));  }  //定义烟花对象  function Firework(sx, sy, tx, ty) {    this.x = sx;    this.y = sy;    this.sx = sx;    this.sy = sy;    this.tx = tx;    this.ty = ty;    //计算两点之间的距离    this.targetDistances = distans(sx, sy, tx, ty);    //运行距离    this.distancesc = 0;    //定义变量生成的运动轨迹    this.guiji = [];    this.guijicount = 3;    while (this.guijicount--) {      this.guiji.push([this.x, this.y]);    }    //计算角度    this.angle = Math.atan2(ty - sy, tx - sx);    this.speed = 2;    this.jiasudu = 1.05;    this.brightness = random(50, 70); //烟花的明度    this.targetRad = 5; //烟花小圈的半径  }  //更新烟花的位置  Firework.prototype.update = function (index) {    this.guiji.pop();    this.guiji.push([this.x, this.y]);    //目标圆运动    if (this.targetRad < 8) {      this.targetRad += 0.3;    } else {      this.targetRad = 1;    }    //根据加速度计算速度并且计算出烟花运行过程中x轴和y轴的速度    this.speed *= this.jiasudu;    var vx = Math.cos(this.angle) * this.speed;    var vy = Math.sin(this.angle) * this.speed;    //重新计算两点之间的距离    this.distancesc = distans(this.sx, this.sy, this.x + vx, this.y + vy);    //如果烟花运行距离大于或等于初始位置到目标位置之间的距离，生成新烟花并移除当前烟花，否则更新烟花位置    if (this.distancesc >= this.targetDistances) {      //生成烟花碎屑      createparticals(this.tx, this.ty);      //销毁烟花小圈      fireworks.splice(index, 1)    } else {      this.x += vx;      this.y += vy;    }  }  //开始画运行轨迹  Firework.prototype.draw = function () {    ctx.beginPath();    //轨迹的起点    ctx.moveTo(this.guiji[this.guiji.length - 1][0], this.guiji[this.guiji.length - 1][1]);    //绘制线条到目标点    ctx.lineTo(this.x, this.y);    //画出不同颜色的烟花    ctx.strokeStyle = 'hsl(' + hue + ',100%,' + this.brightness + '%)';    ctx.stroke(); //绘制烟花轨迹    //画出目标小圆    ctx.beginPath();    ctx.arc(this.tx, this.ty, this.targetRad, 0, Math.PI * 2);    ctx.stroke();  }  //定义烟花碎屑方法  function Particle(x, y) {    this.x = x;    this.y = y;    this.guiji = [];    this.guijicount = 10;    while (this.guijicount--) {      this.guiji.push([this.x, this.y]);    }    //生成任意方向的碎屑    this.angle = random(0, 2 * Math.PI);    this.speed = random(1, 10); //随机的速度    this.mocal = 0.95; //摩擦力    this.gravity = 0.98; //重力    this.hue = random(hue - 20, hue + 20); //碎屑颜色变化范围    this.brightness = random(50, 80);    this.alpha = 1; //定义碎屑初始不透明    this.decay = random(0.015, 0.03); //碎屑消失的时间  }  //更新碎屑  Particle.prototype.update = function (index) {    this.guiji.pop();    //unshift() 方法可向数组的开头添加一个或更多元素，并返回新的长度。    this.guiji.unshift([this.x, this.y]);    //下面是烟花碎屑的运动    this.speed *= this.mocal;    this.x += Math.cos(this.angle) * this.speed;    this.y += Math.sin(this.angle) * this.speed + this.gravity;    this.alpha -= this.decay; //不透明度一直随时间变为0；即烟花碎屑消失    if (this.alpha <= this.decay) {      particles.splice(index, 1) //销毁烟花碎屑    }  }  //画烟花碎屑轨迹  Particle.prototype.draw = function () {    ctx.beginPath();    ctx.moveTo(this.guiji[this.guiji.length - 1][0], this.guiji[this.guiji.length - 1][1]);    ctx.lineTo(this.x, this.y);    //画出不同颜色的烟花利用HSL    ctx.strokeStyle = 'hsl(' + hue + ',100%,' + this.brightness + '%)';    ctx.stroke();  }  //创建碎屑  function createparticals(x, y) {    //设定碎屑数目    var particalcount = 500;    while (particalcount--) {      //随着碎屑数目的减少为0，又重新调用碎屑方法      particles.push(new Particle(x, y))    }  }  //获取屏幕的宽和高  var clientw = document.documentElement.clientWidth;  var clienth = document.documentElement.clientHeight;  function loop() {    //requestAnimationFrame() 方法来告诉浏览器需要执行的动画，    // 并让浏览器在下一次重绘之前调用指定的函数来更新动画。    requestAnimationFrame(loop);    hue += 0.5;    //在源图像外显示目标图像。只有源图像外的目标图像部分会被显示，源图像是透明的。    ctx.globalCompositeOperation = 'destination-out';    ctx.fillRect(0, 0, clientw, clienth);    ctx.fillStyle = 'rgb(0,0,0,0.5)';    //显示源图像和目标图像。    ctx.globalCompositeOperation = 'lighter';    var i = fireworks.length;    while (i--) {      fireworks[i].draw();      fireworks[i].update(i);    }    var i = particles.length;    while (i--) {      particles[i].draw();      particles[i].update(i);    }    //此时，我们还没有创建任何的烟花。我们希望设置一个定时时间timerTotal，周期性的    // 产生一个烟花，我们也需要一个时间计数timerTick，在每次帧更新的时候加1，记下帧更新的次数。    if (timerTick >= timerTotal) {      fireworks.push(new Firework(clientw / 2, clienth, random(0, clientw), random(0, clienth)));      timerTick = 0;    } else {      timerTick++;    }  }  window.οnlοad = loop();}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/function.js"/>
      <url>/js/function.js</url>
      
        <content type="html"><![CDATA['use strict';var roydon = {  randomIndexVideo() { // 主页视频背景随机     const videoCDN = ["https://gcore.jsdelivr.net/gh/roydonGuo/CDN/videos/hutao.mp4",      "https://gcore.jsdelivr.net/gh/roydonGuo/CDN/videos/hutao2.mp4",      "https://gcore.jsdelivr.net/gh/roydonGuo/CDN/videos/nahida.mp4",      "https://gcore.jsdelivr.net/gh/roydonGuo/CDN/videos/ganyu_heimao.mp4",      "https://gcore.jsdelivr.net/gh/roydonGuo/CDN/videos/ganyu4.mp4"    ]    var indexVideo = document.querySelector("#index-video")    if (indexVideo) {      var videoIndex = Math.floor(Math.random() * videoCDN.length)      indexVideo.src = videoCDN[videoIndex]    }  },  randoMcBgGif() { // 首页随机mc背景图片    var mcBgGif = [      "https://bu.dusays.com/2022/11/24/637f50838e27c.gif",      "https://bu.dusays.com/2022/11/24/637f50815b2b3.gif",      "https://bu.dusays.com/2022/11/24/637f50813ef9c.gif",      "https://bu.dusays.com/2022/11/24/637f50869b81d.gif",      "https://bu.dusays.com/2022/11/24/637f5086361fa.gif",      "https://bu.dusays.com/2022/11/24/637f50860c8c2.gif",      "https://bu.dusays.com/2022/11/24/637f5084dc583.gif",      "https://bu.dusays.com/2022/11/24/637f507ff3d86.gif",      "https://bu.dusays.com/2022/11/24/637f507fd3bc7.gif",      "https://bu.dusays.com/2022/11/24/637f507be15b0.gif"    ]    var mctime    clearInterval(mctime)    var randombar = document.querySelector("#random");    if (randombar) {      mctime = setInterval(function () {        var bgindex = Math.floor(Math.random() * mcBgGif.length)        randombar.style.backgroundImage = 'url(' + mcBgGif[bgindex] + ')'      }, 5000)    }  },  sm(title, msg) { //vue弹窗    new Vue({      data: function () {        this.$notify({          title: title,          message: msg,          position: 'top-left',          offset: 50,          showClose: true,          type: "success", //success/warning/info/error          duration: 3000        });      }    })  },  saveData(name, data) { // 存数据    localStorage.setItem(name, JSON.stringify({      'time': Date.now(),      'data': data    }))  },  loadData(name, time) { // 取数据    let data = JSON.parse(localStorage.getItem(name));    // 过期或有错误返回 0    if (data) {      let t = Date.now() - data.time      if (t < time * 60 * 1000 && t > 0) return data.data    }    return 0;  },  dark() { //暗色背景xx**    window.requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;    var n, e, i, h, t = .05,      s = document.getElementById("universe"),      o = !0,      a = "180,184,240",      r = "226,225,142",      d = "226,225,224",      c = [];    function f() {      n = window.innerWidth, e = window.innerHeight, i = .216 * n, s.setAttribute("width", n), s.setAttribute("height", e)    }    function u() {      h.clearRect(0, 0, n, e);      for (var t = c.length, i = 0; i < t; i++) {        var s = c[i];        s.move(), s.fadeIn(), s.fadeOut(), s.draw()      }    }    function y() {      this.reset = function () {        this.giant = m(3), this.comet = !this.giant && !o && m(10), this.x = l(0, n - 10), this.y = l(0, e), this.r = l(1.1, 2.6), this.dx = l(t, 6 * t) + (this.comet + 1 - 1) * t * l(50, 120) + 2 * t, this.dy = -l(t, 6 * t) - (this.comet + 1 - 1) * t * l(50, 120), this.fadingOut = null, this.fadingIn = !0, this.opacity = 0, this.opacityTresh = l(.2, 1 - .4 * (this.comet + 1 - 1)), this.do = l(5e-4, .002) + .001 * (this.comet + 1 - 1)      }, this.fadeIn = function () {        this.fadingIn && (this.fadingIn = !(this.opacity > this.opacityTresh), this.opacity += this.do)      }, this.fadeOut = function () {        this.fadingOut && (this.fadingOut = !(this.opacity < 0), this.opacity -= this.do / 2, (this.x > n || this.y < 0) && (this.fadingOut = !1, this.reset()))      }, this.draw = function () {        if (h.beginPath(), this.giant) h.fillStyle = "rgba(" + a + "," + this.opacity + ")", h.arc(this.x, this.y, 2, 0, 2 * Math.PI, !1);        else if (this.comet) {          h.fillStyle = "rgba(" + d + "," + this.opacity + ")", h.arc(this.x, this.y, 1.5, 0, 2 * Math.PI, !1);          for (var t = 0; t < 30; t++) h.fillStyle = "rgba(" + d + "," + (this.opacity - this.opacity / 20 * t) + ")", h.rect(this.x - this.dx / 4 * t, this.y - this.dy / 4 * t - 2, 2, 2), h.fill()        } else h.fillStyle = "rgba(" + r + "," + this.opacity + ")", h.rect(this.x, this.y, this.r, this.r);        h.closePath(), h.fill()      }, this.move = function () {        this.x += this.dx, this.y += this.dy, !1 === this.fadingOut && this.reset(), (this.x > n - n / 4 || this.y < 0) && (this.fadingOut = !0)      }, setTimeout(function () {        o = !1      }, 50)    }    function m(t) {      return Math.floor(1e3 * Math.random()) + 1 < 10 * t    }    function l(t, i) {      return Math.random() * (i - t) + t    }    f(), window.addEventListener("resize", f, !1),      function () {        h = s.getContext("2d");        for (var t = 0; t < i; t++) c[t] = new y, c[t].reset();        u()      }(),      function t() {        document.getElementsByTagName('html')[0].getAttribute('data-theme') == 'dark' && u(), window.requestAnimationFrame(t)      }()  },  switchNightMode() { //模式切换    var themeCoin = document.querySelector('#dark-theme-coin')    const nowMode = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'light'    if (nowMode === 'light') {      themeCoin.className = 'iconfont icon-yueliang'      activateDarkMode()      saveToLocal.set('theme', 'dark', 2)      GLOBAL_CONFIG.Snackbar !== undefined && btf.snackbarShow(GLOBAL_CONFIG.Snackbar.day_to_night)      document.getElementById('dark-theme-coin').setAttribute('xlink:href', '#icon-sun')    } else {      themeCoin.className = 'iconfont icon-taiyang'      activateLightMode()      saveToLocal.set('theme', 'light', 2)      document.querySelector('body').classList.add('DarkMode')      GLOBAL_CONFIG.Snackbar !== undefined && btf.snackbarShow(GLOBAL_CONFIG.Snackbar.night_to_day)      document.getElementById('dark-theme-coin').setAttribute('xlink:href', '#icon-moon')    }  },  // // 切换背景函数  changeBg(s, flag) {    var bg = document.querySelector('#web_bg')    if (s.charAt(0) === '#') {      bg.style.backgroundColor = s      bg.style.backgroundImage = 'none'    } else {      bg.style.backgroundImage = s    }    if (!flag) {      roydon.saveData('blogbg', s)    }  },  // 读取背景  loadbg() {    try {      let data = roydon.loadData('blogbg', 1440)      if (data) roydon.changeBg(data, 1)      else localStorage.removeItem('blogbg');    } catch (error) {      localStorage.removeItem('blogbg');    }  },  // waterfall(a) { //bibi页瀑布流  //   function b(a, b) {  //     var c = window.getComputedStyle(b);  //     return parseFloat(c["margin" + a]) || 0  //   }  //   function c(a) {  //     return a + "px"  //   }  //   function d(a) {  //     return parseFloat(a.style.top)  //   }  //   function e(a) {  //     return parseFloat(a.style.left)  //   }  //   function f(a) {  //     return a.clientWidth  //   }  //   function g(a) {  //     return a.clientHeight  //   }  //   function h(a) {  //     return d(a) + g(a) + b("Bottom", a)  //   }  //   function i(a) {  //     return e(a) + f(a) + b("Right", a)  //   }  //   function j(a) {  //     a = a.sort(function (a, b) {  //       return h(a) === h(b) ? e(b) - e(a) : h(b) - h(a)  //     })  //   }  //   function k(b) {  //     f(a) != t && (b.target.removeEventListener(b.type, arguments.callee), roydon.waterfall(a))  //   }  //   "string" == typeof a && (a = document.querySelector(a));  //   var l = [].map.call(a.children, function (a) {  //     return a.style.position = "absolute", a  //   });  //   a.style.position = "relative";  //   var m = [];  //   l.length && (l[0].style.top = "0px", l[0].style.left = c(b("Left", l[0])), m.push(l[0]));  //   for (var n = 1; n < l.length; n++) {  //     var o = l[n - 1],  //       p = l[n],  //       q = i(o) + f(p) <= f(a);  //     if (!q) break;  //     p.style.top = o.style.top, p.style.left = c(i(o) + b("Left", p)), m.push(p)  //   }  //   for (; n < l.length; n++) {  //     j(m);  //     var p = l[n],  //       r = m.pop();  //     p.style.top = c(h(r) + b("Top", p)), p.style.left = c(e(r)), m.push(p)  //   }  //   j(m);  //   var s = m[0];  //   a.style.height = c(h(s) + b("Bottom", s));  //   var t = f(a);  //   window.addEventListener ? window.addEventListener("resize", k) : document.body.onresize = k  // },  // essay() {  //   var percentFlag = false; // 节流阀  //   function essayScroll() {  //     let a = document.documentElement.scrollTop || window.pageYOffset; // 卷去高度  //     const waterfallResult = a % document.documentElement.clientHeight; // 卷去一个视口  //     result <= 99 || (result = 99);  //     if (  //       !percentFlag &&  //       waterfallResult + 100 >= document.documentElement.clientHeight &&  //       document.querySelector("#waterfall")  //     ) {  //       // console.info(waterfallResult, document.documentElement.clientHeight);  //       setTimeout(() => {  //         roydon.waterfall("#waterfall");  //       }, 500);  //     } else {  //       setTimeout(() => {  //         document.querySelector("#waterfall") && roydon.waterfall("#waterfall");  //       }, 500);  //     }  //     const r = window.scrollY + document.documentElement.clientHeight;  //     let p = document.getElementById("post-comment") || document.getElementById("footer");  //     (p.offsetTop + p.offsetHeight / 2 < r || 90 < result) && (percentFlag = true);  //   }  //   var anzhiyu = {  //     diffDate: function (d, more = false) {  //       const dateNow = new Date();  //       const datePost = new Date(d);  //       const dateDiff = dateNow.getTime() - datePost.getTime();  //       const minute = 1000 * 60;  //       const hour = minute * 60;  //       const day = hour * 24;  //       const month = day * 30;  //       let result;  //       if (more) {  //         const monthCount = dateDiff / month;  //         const dayCount = dateDiff / day;  //         const hourCount = dateDiff / hour;  //         const minuteCount = dateDiff / minute;  //         if (monthCount >= 1) {  //           result = datePost.toLocaleDateString().replace(/\//g, "-");  //         } else if (dayCount >= 1) {  //           result = parseInt(dayCount) + " " + GLOBAL_CONFIG.date_suffix.day;  //         } else if (hourCount >= 1) {  //           result = parseInt(hourCount) + " " + GLOBAL_CONFIG.date_suffix.hour;  //         } else if (minuteCount >= 1) {  //           result = parseInt(minuteCount) + " " + GLOBAL_CONFIG.date_suffix.min;  //         } else {  //           result = GLOBAL_CONFIG.date_suffix.just;  //         }  //       } else {  //         result = parseInt(dateDiff / day);  //       }  //       return result;  //     },  //     changeTimeInEssay: function () {  //       document.querySelector("#bber") &&  //         document.querySelectorAll("#bber time").forEach(function (e) {  //           var t = e,  //             datetime = t.getAttribute("datetime");  //           (t.innerText = anzhiyu.diffDate(datetime, true)), (t.style.display = "inline");  //         });  //     },  //     reflashEssayWaterFall: function () {  //       document.querySelector("#waterfall") &&  //         setTimeout(function () {  //           roydon.waterfall("#waterfall");  //           document.getElementById("waterfall").classList.add("show");  //         }, 200);  //     },  //     initIndexEssay: function () {  //       setTimeout(() => {  //         let essay_bar_swiper = new Swiper(".essay_bar_swiper_container", {  //           passiveListeners: true,  //           direction: "vertical",  //           loop: true,  //           autoplay: {  //             disableOnInteraction: true,  //             delay: 3000,  //           },  //           mousewheel: true,  //         });  //         let essay_bar_comtainer = document.getElementById("bbtalk");  //         if (essay_bar_comtainer !== null) {  //           essay_bar_comtainer.onmouseenter = function () {  //             essay_bar_swiper.autoplay.stop();  //           };  //           essay_bar_comtainer.onmouseleave = function () {  //             essay_bar_swiper.autoplay.start();  //           };  //         }  //       }, 100);  //     },  //   };  //   anzhiyu.initIndexEssay();  //   anzhiyu.changeTimeInEssay();  //   anzhiyu.reflashEssayWaterFall();  // },  replaceAll(e, n, t) {    return e.split(n).join(t);  },  initIndexEssay: function () {    setTimeout(() => {      let essay_bar_swiper = new Swiper(".essay_bar_swiper_container", {        passiveListeners: true,        direction: "vertical",        loop: true,        autoplay: {          disableOnInteraction: true,          delay: 3000,        },        mousewheel: true,      });      let essay_bar_comtainer = document.getElementById("bbtalk");      if (essay_bar_comtainer !== null) {        essay_bar_comtainer.onmouseenter = function () {          essay_bar_swiper.autoplay.stop();        };        essay_bar_comtainer.onmouseleave = function () {          essay_bar_swiper.autoplay.start();        };      }    }, 100);  },  commentText(e) {    if (e == "undefined" || e == "null") e = "好棒！";    var n = document.getElementsByClassName("el-textarea__inner")[0],      t = document.createEvent("HTMLEvents");    if (!n) return;    t.initEvent("input", !0, !0);    var o = roydon.replaceAll(e, "\n", "\n> ");    (n.value = "> " + o + "\n\n"), n.dispatchEvent(t);    var i = document.querySelector("#post-comment").offsetTop;    window.scrollTo(0, i - 80),      n.focus(),      n.setSelectionRange(-1, -1),      document.getElementById("comment-tips") && document.getElementById("comment-tips").classList.add("show");  },  danmu() { //评论弹幕    const commentBarrageConfig = {      maxBarrage: 1,      barrageTime: 5000,      twikooUrl: "https://guo.yicheng.plus",      accessToken: "04fdc390db1b4efd9ed7de5954e0e968",      pageUrl: window.location.pathname,      barrageTimer: [],      barrageList: [],      barrageIndex: 0,      // 没有设置过头像时返回的默认头像，见cravatar文档 https://cravatar.cn/developers/api，可以不改以免出错      noAvatarType: "retro",      dom: document.querySelector('.comment-barrage'),      //是否默认显示留言弹幕      displayBarrage: true,      //头像cdn，默认cravatar      avatarCDN: "cravatar.cn",    }    function isInViewPortOfOne(el) {      const viewPortHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight      const offsetTop = el.offsetTop      const scrollTop = document.documentElement.scrollTop      const top = offsetTop - scrollTop      return top <= viewPortHeight    }    document.onscroll = function () {      if (commentBarrageConfig.displayBarrage) {        if (document.getElementById("post-comment")) {          if (isInViewPortOfOne(document.getElementById("post-comment"))) {            document.getElementsByClassName("comment-barrage")[0].setAttribute("style", `display:none;`)          } else {            document.getElementsByClassName("comment-barrage")[0].setAttribute("style", "")          }        }      }    }    function initCommentBarrage() {      var data = JSON.stringify({        "event": "COMMENT_GET",        "commentBarrageConfig.accessToken": commentBarrageConfig.accessToken,        "url": commentBarrageConfig.pageUrl      });      var xhr = new XMLHttpRequest();      xhr.withCredentials = true;      xhr.addEventListener("readystatechange", function () {        if (this.readyState === 4) {          commentBarrageConfig.barrageList = commentLinkFilter(JSON.parse(this.responseText).data);          if (commentBarrageConfig.dom) {            commentBarrageConfig.dom.innerHTML = '';          }        }      });      xhr.open("POST", commentBarrageConfig.twikooUrl);      xhr.setRequestHeader("Content-Type", "application/json");      xhr.send(data);      setInterval(() => {        if (commentBarrageConfig.barrageList.length) {          popCommentBarrage(commentBarrageConfig.barrageList[commentBarrageConfig.barrageIndex]);          commentBarrageConfig.barrageIndex += 1;          commentBarrageConfig.barrageIndex %= commentBarrageConfig.barrageList.length;        }        if (commentBarrageConfig.barrageTimer.length > (commentBarrageConfig.barrageList.length > commentBarrageConfig.maxBarrage ? commentBarrageConfig.maxBarrage : commentBarrageConfig.barrageList.length)) {          removeCommentBarrage(commentBarrageConfig.barrageTimer.shift())        }      }, commentBarrageConfig.barrageTime)    }    function commentLinkFilter(data) {      data.sort((a, b) => {        return a.created - b.created;      })      let newData = [];      data.forEach(item => {        newData.push(...getCommentReplies(item));      });      return newData;    }    function getCommentReplies(item) {      if (item.replies) {        let replies = [item];        item.replies.forEach(item => {          replies.push(...getCommentReplies(item));        })        return replies;      } else {        return [];      }    }    function popCommentBarrage(data) {      let barrage = document.createElement('div');      let width = commentBarrageConfig.dom.clientWidth;      let height = commentBarrageConfig.dom.clientHeight;      barrage.className = 'comment-barrage-item'      // let ran = Math.floor(Math.random() * commentBarrageConfig.lightColors.length)      // document.getElementById("barragesColor").innerHTML = `[data-theme='light'] .comment-barrage-item { background-color:${commentBarrageConfig.lightColors[ran][0]};color:${commentBarrageConfig.lightColors[ran][1]}}[data-theme='dark'] .comment-barrage-item{ background-color:${commentBarrageConfig.darkColors[ran][0]};color:${commentBarrageConfig.darkColors[ran][1]}}`;      barrage.innerHTML = `<div class="barrageHead"><img class="barrageAvatar" src="https://${commentBarrageConfig.avatarCDN}/avatar/${data.mailMd5}?d=${commentBarrageConfig.noAvatarType}"/><div class="barrageNick">${data.nick}</div><a href="javascript:switchCommentBarrage()" style="font-size:20px">×</a></div><div class="barrageContent">${data.comment}</div>`      commentBarrageConfig.barrageTimer.push(barrage);      commentBarrageConfig.dom.append(barrage);    }    function removeCommentBarrage(barrage) {      barrage.className = 'comment-barrage-item out';      if (commentBarrageConfig.maxBarrage != 1) {        setTimeout(() => {          commentBarrageConfig.dom.removeChild(barrage);        }, 1000)      } else {        commentBarrageConfig.dom.removeChild(barrage);      }    }    function switchCommentBarrage() {      localStorage.setItem("isBarrageToggle", Number(!Number(localStorage.getItem("isBarrageToggle"))))      if (document.getElementById("post-comment")) {        if (!isInViewPortOfOne(document.getElementById("post-comment"))) {          commentBarrageConfig.displayBarrage = !(commentBarrageConfig.displayBarrage);          let commentBarrage = document.querySelector('.comment-barrage');          if (commentBarrage) {            $(commentBarrage).fadeToggle()          }        }      }    }    var timer    $(".comment-barrage").hover(function () {      clearInterval(timer);    }, function () {      timer = setInterval(() => {        if (commentBarrageConfig.barrageList.length) {          popCommentBarrage(commentBarrageConfig.barrageList[commentBarrageConfig.barrageIndex]);          commentBarrageConfig.barrageIndex += 1;          commentBarrageConfig.barrageIndex %= commentBarrageConfig.barrageList.length;        }        if (commentBarrageConfig.barrageTimer.length > (commentBarrageConfig.barrageList.length > commentBarrageConfig.maxBarrage ? commentBarrageConfig.maxBarrage : commentBarrageConfig.barrageList.length)) {          removeCommentBarrage(commentBarrageConfig.barrageTimer.shift())        }      }, commentBarrageConfig.barrageTime)    })    if (localStorage.getItem("isBarrageToggle") == undefined) {      localStorage.setItem("isBarrageToggle", "0");    } else if (localStorage.getItem("isBarrageToggle") == "1") {      localStorage.setItem("isBarrageToggle", "0");      switchCommentBarrage()    }    initCommentBarrage()  },  linkCom: e => { //快速友链    var t = document.querySelector(".el-textarea__inner");    "bf" == e ? (t.value = "```yml\n", t.value += "- name: \n  link: \n  avatar: \n  descr: \n  siteshot: ", t.value += "\n```", t.setSelectionRange(15, 15)) : (t.value = "站点名称：\n站点地址：\n头像链接：\n站点描述：\n站点截图：", t.setSelectionRange(5, 5)), t.focus()  },  countUp() {    var CountUp = function (target, startVal, endVal, decimals, duration, options) {      var self = this;      self.version = function () {        return "1.9.2";      };      self.options = {        useEasing: true,        useGrouping: true,        separator: ",",        decimal: ".",        easingFn: easeOutExpo,        formattingFn: formatNumber,        prefix: "",        suffix: "",        numerals: [],      };      if (options && typeof options === "object") {        for (var key in self.options) {          if (options.hasOwnProperty(key) && options[key] !== null) {            self.options[key] = options[key];          }        }      }      if (self.options.separator === "") {        self.options.useGrouping = false;      } else {        self.options.separator = "" + self.options.separator;      }      var lastTime = 0;      var vendors = ["webkit", "moz", "ms", "o"];      for (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {        window.requestAnimationFrame = window[vendors[x] + "RequestAnimationFrame"];        window.cancelAnimationFrame =          window[vendors[x] + "CancelAnimationFrame"] || window[vendors[x] + "CancelRequestAnimationFrame"];      }      if (!window.requestAnimationFrame) {        window.requestAnimationFrame = function (callback, element) {          var currTime = new Date().getTime();          var timeToCall = Math.max(0, 16 - (currTime - lastTime));          var id = window.setTimeout(function () {            callback(currTime + timeToCall);          }, timeToCall);          lastTime = currTime + timeToCall;          return id;        };      }      if (!window.cancelAnimationFrame) {        window.cancelAnimationFrame = function (id) {          clearTimeout(id);        };      }      function formatNumber(num) {        num = num.toFixed(self.decimals);        num += "";        var x, x1, x2, x3, i, l;        x = num.split(".");        x1 = x[0];        x2 = x.length > 1 ? self.options.decimal + x[1] : "";        if (self.options.useGrouping) {          x3 = "";          for (i = 0, l = x1.length; i < l; ++i) {            if (i !== 0 && i % 3 === 0) {              x3 = self.options.separator + x3;            }            x3 = x1[l - i - 1] + x3;          }          x1 = x3;        }        if (self.options.numerals.length) {          x1 = x1.replace(/[0-9]/g, function (w) {            return self.options.numerals[+w];          });          x2 = x2.replace(/[0-9]/g, function (w) {            return self.options.numerals[+w];          });        }        return self.options.prefix + x1 + x2 + self.options.suffix;      }      function easeOutExpo(t, b, c, d) {        return (c * (-Math.pow(2, (-10 * t) / d) + 1) * 1024) / 1023 + b;      }      function ensureNumber(n) {        return typeof n === "number" && !isNaN(n);      }      self.initialize = function () {        if (self.initialized) {          return true;        }        self.error = "";        self.d = typeof target === "string" ? document.getElementById(target) : target;        if (!self.d) {          self.error = "[CountUp] target is null or undefined";          return false;        }        self.startVal = Number(startVal);        self.endVal = Number(endVal);        if (ensureNumber(self.startVal) && ensureNumber(self.endVal)) {          self.decimals = Math.max(0, decimals || 0);          self.dec = Math.pow(10, self.decimals);          self.duration = Number(duration) * 1000 || 2000;          self.countDown = self.startVal > self.endVal;          self.frameVal = self.startVal;          self.initialized = true;          return true;        } else {          self.error = "[CountUp] startVal (" + startVal + ") or endVal (" + endVal + ") is not a number";          return false;        }      };      self.printValue = function (value) {        var result = self.options.formattingFn(value);        if (self.d.tagName === "INPUT") {          this.d.value = result;        } else {          if (self.d.tagName === "text" || self.d.tagName === "tspan") {            this.d.textContent = result;          } else {            this.d.innerHTML = result;          }        }      };      self.count = function (timestamp) {        if (!self.startTime) {          self.startTime = timestamp;        }        self.timestamp = timestamp;        var progress = timestamp - self.startTime;        self.remaining = self.duration - progress;        if (self.options.useEasing) {          if (self.countDown) {            self.frameVal = self.startVal - self.options.easingFn(progress, 0, self.startVal - self.endVal, self.duration);          } else {            self.frameVal = self.options.easingFn(progress, self.startVal, self.endVal - self.startVal, self.duration);          }        } else {          if (self.countDown) {            self.frameVal = self.startVal - (self.startVal - self.endVal) * (progress / self.duration);          } else {            self.frameVal = self.startVal + (self.endVal - self.startVal) * (progress / self.duration);          }        }        if (self.countDown) {          self.frameVal = self.frameVal < self.endVal ? self.endVal : self.frameVal;        } else {          self.frameVal = self.frameVal > self.endVal ? self.endVal : self.frameVal;        }        self.frameVal = Math.round(self.frameVal * self.dec) / self.dec;        self.printValue(self.frameVal);        if (progress < self.duration) {          self.rAF = requestAnimationFrame(self.count);        } else {          if (self.callback) {            self.callback();          }        }      };      self.start = function (callback) {        if (!self.initialize()) {          return;        }        self.callback = callback;        self.rAF = requestAnimationFrame(self.count);      };      self.pauseResume = function () {        if (!self.paused) {          self.paused = true;          cancelAnimationFrame(self.rAF);        } else {          self.paused = false;          delete self.startTime;          self.duration = self.remaining;          self.startVal = self.frameVal;          requestAnimationFrame(self.count);        }      };      self.reset = function () {        self.paused = false;        delete self.startTime;        self.initialized = false;        if (self.initialize()) {          cancelAnimationFrame(self.rAF);          self.printValue(self.startVal);        }      };      self.update = function (newEndVal) {        if (!self.initialize()) {          return;        }        newEndVal = Number(newEndVal);        if (!ensureNumber(newEndVal)) {          self.error = "[CountUp] update() - new endVal is not a number: " + newEndVal;          return;        }        self.error = "";        if (newEndVal === self.frameVal) {          return;        }        cancelAnimationFrame(self.rAF);        self.paused = false;        delete self.startTime;        self.startVal = self.frameVal;        self.endVal = newEndVal;        self.countDown = self.startVal > self.endVal;        self.rAF = requestAnimationFrame(self.count);      };      if (self.initialize()) {        self.printValue(self.startVal);      }    }  },  catalogActive() { //分类页分类滚动    let $list = document.getElementById('catalog-list')    if ($list) {      // 鼠标滚轮滚动      $list.addEventListener('mousewheel', function (e) {        // 计算鼠标滚轮滚动的距离        $list.scrollLeft -= e.wheelDelta / 2        // 阻止浏览器默认方法        e.preventDefault()      }, false)      // 高亮当前页面对应的分类或标签      let $catalog = document.getElementById(decodeURIComponent(window.location.pathname))      $catalog.classList.add('selected')      // 滚动当前页面对应的分类或标签到中部      $list.scrollLeft = ($catalog.offsetLeft - $list.offsetLeft) - ($list.offsetWidth - $catalog.offsetWidth) / 2    }  },  removeRandomBanner() {    var randomBar = document.querySelector('#random')    if (randomBar) {      randomBar.style.display = 'none'    }  },  swiperInit() {    var mySwiper = new Swiper('.swiperPost', {      // direction: 'vertical', // 垂直切换选项      loop: true, // 循环模式选项      // 如果需要分页器      pagination: {        el: '.swiper-pagination',        clickable: true,      },      // 如果需要前进后退按钮      navigation: {        nextEl: '.swiper-button-next',        prevEl: '.swiper-button-prev',      },      //自动轮播      autoplay: {        delay: 3000, //时间 毫秒        disableOnInteraction: false, //用户操作之后是否停止自动轮播默认true       },      mousewheel: true,    })  },  isIndex() {    return location.pathname == '/' ? true : false  },  hideIndexTop() { //index-top只在首页一个页面展示    if (!roydon.isIndex()) {      var indexTop = document.querySelector(".index-top-container")      if (indexTop) {        indexTop.style.display = "none"      }    }  },  //侧边栏申鹤spine  shenheSpine() {    var shenhe = "shenhe"    var pc1 = document.querySelector("#player-container")    if (pc1) {      new spine.SpinePlayer("player-container", {        jsonUrl: "/" + shenhe + "/" + shenhe + ".json",        atlasUrl: "/" + shenhe + "/" + shenhe + ".atlas",        premultipliedAlpha: false,        showControls: false,        alpha: true,        backgroundColor: "#00000000",        animation: "animation",        viewport: {          x: 0,          y: -550,          width: 1012.2 / 2,          height: 2046.31 / 2,          padLeft: "0%",          padRight: "0%",          padTop: "0%",          padBottom: "0%"        }      });    }    var pc2 = document.querySelector("#player-container2")    if (pc2) {      new spine.SpinePlayer("player-container2", {        jsonUrl: "/" + shenhe + "/shenhelh.json",        atlasUrl: "/" + shenhe + "/shenhelh.atlas",        premultipliedAlpha: false,        showControls: false,        alpha: true,        backgroundColor: "#00000000",        animation: "animation",        viewport: {          x: 0,          y: -550,          width: 1012.2 / 2,          height: 2046.31 / 2,          padLeft: "0%",          padRight: "0%",          padTop: "0%",          padBottom: "0%"        }      });    }  }}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/roydon.js"/>
      <url>/js/roydon.js</url>
      
        <content type="html"><![CDATA[function whenDOMReady() {  roydon.loadbg()  // if (location.pathname == '/essay/') {  //   roydon.countUp()  //   roydon.essay()  // }  if (location.pathname.substring(0, 6) == '/tags/' || '/categories/' == location.pathname.substring(0, 12)) {    roydon.catalogActive()  }  roydon.danmu()  roydon.swiperInit()  roydon.hideIndexTop()  // roydon.essay()}whenDOMReady()document.addEventListener("pjax:complete", whenDOMReady)// roydon.randoMcBgGif()//随机mcgifroydon.randomIndexVideo() //首页视频背景随机roydon.initIndexEssay() //初始化首页即可短文bannerroydon.shenheSpine() //侧边栏申鹤spinevar cdnSiteBg = new Array// 1. 创建 XHR 对象function getCDNSiteBg() { //获取cdn图片资源  var xhr = new XMLHttpRequest()  xhr.open('GET', 'https://gcore.jsdelivr.net/gh/roydonGuo/CDN@1.2.3/siteBgZIP.txt')  xhr.send()  xhr.onreadystatechange = function () {    if (xhr.readyState === 4 && xhr.status === 200) {      cdnSiteBg = xhr.responseText.replace(/\s*/g, "").split(',')      // console.log(cdnSiteBg);    }  }}// document.onkeydown = function (e) {//   if (123 == e.keyCode || (e.ctrlKey && e.shiftKey && (74 === e.keyCode || 73 === e.keyCode || 67 === e.keyCode)) || (e.ctrlKey && 85 === e.keyCode)) return btf.snackbarShow("你真坏，不能打开控制台喔!"), event.keyCode = 0, event.returnValue = !1, !1// };// roydon.sm("欢迎来到本站","目前存在pjax的bug：)")var now1 = new Date()function createtime1() {  var grt = new Date("08/28/2022 00:00:00"); //此处修改你的建站时间或者网站上线时间  now1.setTime(now1.getTime() + 250);  var days = (now1 - grt) / 1000 / 60 / 60 / 24;  var dnum = Math.floor(days);  var ascll = [    `欢迎来到本站`,    `请遵守本站协议`,    `        ██████   ██████  ███    ███ ███████   ██████  ███     ████   ██ ██    ██  ███  ███  ██    ██ ██    ██ ████    ████████  ██    ██    ████    ██    ██ ██    ██ ██  ██  ████   ██ ██    ██     ██     ██    ██ ██    ██ ██    ██████   ██  ██████      ██     ███████   ██████  ██     ███                                              `,    "小站已经苟活",    dnum,    "天啦!",    "©2022 by roydon",  ];  setTimeout(    console.log.bind(      console,      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,      "color:#39c5bb",      "",      "color:pink",      "color:#39c5bb",      "",      "color:#39c5bb",      ""    )  );}createtime1();function createtime2() {  var ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为「大聪明」`, `Photo captured: `, ` 🤪 `];  setTimeout(    console.log.bind(      console,      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}`,      "color:white; background-color:#10bcc0",      "",      "",      'background:url("https://unpkg.zhimg.com/anzhiyu-assets@latest/image/common/tinggge.gif") no-repeat;font-size:450%'    )  );  setTimeout(console.log.bind(console, "%c WELCOME %c 欢迎光临，大聪明", "color:white; background-color:#23c682", ""));  setTimeout(    console.warn.bind(      console,      "%c ⚡ Powered by roydon %c 你正在访问",      "color:white; background-color:#f0ad4e",      ""    )  );  setTimeout(console.log.bind(console, "%c W23-12 %c 系统监测到你已打开控制台", "color:white; background-color:#4f90d9", ""));  setTimeout(    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中", "color:white; background-color:#d9534f", "")  );}// createtime2();// 重写console方法console.log = function () {};console.error = function () {};console.warn = function () {};function loadScript(src) {  return new Promise((resolve, reject) => {    const script = document.createElement('script')    script.src = src    script.onload = resolve    script.onerror = reject    document.head.appendChild(script)  })}var siteBgZIP = 'https://gcore.jsdelivr.net/gh/roydonGuo/CDN/siteBgZIP/'var siteBgPhoneZIP = 'https://gcore.jsdelivr.net/gh/roydonGuo/CDN/siteBgPhoneZIP/'//切换一组图片,s表示手机或电脑function getNewCDNBg(s) {  if (s == 'pc') {    getCDNSiteBg()    cdnSiteBg.sort(function () {      return 0.5 - Math.random();    })    var new6bgs = [] //随机选出六条数据    for (let index = 0; index < 6; index++) {      var temp = Math.floor(Math.random() * cdnSiteBg.length)      new6bgs.push(temp)    }    // console.log(new6bgs);    // console.log(cdnSiteBg[new6bgs[0]]);    var pcbgc = document.querySelector("#pc-bg")    if (pcbgc) {      pcbgc.innerHTML = `      <a style="background-image:url(${siteBgZIP}${cdnSiteBg[new6bgs[0]]})" class="imgbox" onclick="roydon.changeBg('url(${siteBgZIP}${cdnSiteBg[new6bgs[0]]})')" href="javascript:;"></a>      <a style="background-image:url(${siteBgZIP}${cdnSiteBg[new6bgs[1]]})" class="imgbox" onclick="roydon.changeBg('url(${siteBgZIP}${cdnSiteBg[new6bgs[1]]})')" href="javascript:;"></a>      <a style="background-image:url(${siteBgZIP}${cdnSiteBg[new6bgs[2]]})" class="imgbox" onclick="roydon.changeBg('url(${siteBgZIP}${cdnSiteBg[new6bgs[2]]})')" href="javascript:;"></a>      <a style="background-image:url(${siteBgZIP}${cdnSiteBg[new6bgs[3]]})" class="imgbox" onclick="roydon.changeBg('url(${siteBgZIP}${cdnSiteBg[new6bgs[3]]})')" href="javascript:;"></a>      <a style="background-image:url(${siteBgZIP}${cdnSiteBg[new6bgs[4]]})" class="imgbox" onclick="roydon.changeBg('url(${siteBgZIP}${cdnSiteBg[new6bgs[4]]})')" href="javascript:;"></a>      <a style="background-image:url(${siteBgZIP}${cdnSiteBg[new6bgs[5]]})" class="imgbox" onclick="roydon.changeBg('url(${siteBgZIP}${cdnSiteBg[new6bgs[5]]})')" href="javascript:;"></a>      `    }  }}/* winbox */var winbox = ''function createWinbox() {  // sm("点击图片切换背景", "您可以选择操作：)")  getCDNSiteBg()  // btf.snackbarShow('点击图片切换背景：)')  let div = document.createElement('div')  document.body.appendChild(div)  winbox = WinBox({    id: 'changeBgBox',    index: 999,    icon: "/img/favicon.png",    title: "控制面板",    width: "80%",    height: "80%",    background: "pink",    x: "center",    y: "center",    onmaximize: () => {      div.innerHTML = `<style>body::-webkit-scrollbar {display: none;}div#changeBgBox {width: 100%;}</style>`    },    onrestore: () => {      div.innerHTML = ''    }  });  winResize();  window.addEventListener('resize', winResize)  winbox.body.innerHTML = `    <div id="article-container" style="padding:10px;">        <p><button onclick="localStorage.removeItem('blogbg');location.reload();" style="background:pink;display:block;width:100%;padding: 10px 0;border-radius:10px;color:white;"><i class="fa-solid fa-arrows-rotate"></i> 点我恢复默认背景</button></p>    <div class="bgbox">    <button onclick="javascript:loadScript('https://cdn.jsdelivr.net/gh/yremp/yremp-js@1.5/sakura.js');" style="background:#fc8cff;display:block;width:32%;padding: 15px 0;border-radius:6px;color:white;"> 樱花飘落</button>    <button onclick="javascript:loadScript('/js/xh1.js');" style="background:#3cf4ff;display:block;width:32%;padding: 15px 0;border-radius:6px;color:white;"> 雪花飘落</button>    <button onclick="javascript:loadScript('/js/xh2.js');" style="background:#ff6224;display:block;width:32%;padding: 15px 0;border-radius:6px;color:white;"> 秋叶飘落</button>    </div>    <h2 id="电脑壁纸"><a href="#电脑壁纸" class="headerlink" title="电脑壁纸"></a>电脑壁纸</h2>    <details class="folding-tag" cyan><summary> 查看电脑壁纸 </summary>              <div class='content'>              <p><div class="bgbox" id="pc-bg"><a href="javascript:;" style="background-image:url(${siteBgZIP}dplo2m.webp)" class="imgbox" onclick="roydon.changeBg('url(${siteBgZIP}dplo2m.webp)')"></a><a href="javascript:;" style="background-image:url(${siteBgZIP}e7g71w.webp)" class="imgbox" onclick="roydon.changeBg('url(${siteBgZIP}e7g71w.webp)')"></a><a href="javascript:;" style="background-image:url(${siteBgZIP}72dvlv.webp)" class="imgbox" onclick="roydon.changeBg('url(${siteBgZIP}72dvlv.webp)')"></a><a href="javascript:;" style="background-image:url(${siteBgZIP}1k2kp9.webp)" class="imgbox" onclick="roydon.changeBg('url(${siteBgZIP}1k2kp9.webp)')"></a><a href="javascript:;" style="background-image:url(${siteBgZIP}5gdw85.webp)" class="imgbox" onclick="roydon.changeBg('url(${siteBgZIP}5gdw85.webp)')"></a><a href="javascript:;" style="background-image:url(${siteBgZIP}577mx5.webp)" class="imgbox" onclick="roydon.changeBg('url(${siteBgZIP}577mx5.webp)')"></a></div></p><button onclick="getNewCDNBg('pc')" style="background:#F69;display:block;width:32%;padding: 15px 0;border-radius:6px;color:white;margin: 0 auto;"> 切换一批图片</button>              </div>            </details>    <h2 id="手机壁纸"><a href="#手机壁纸" class="headerlink" title="手机壁纸"></a>手机壁纸</h2>    <details class="folding-tag" cyan><summary> 查看手机壁纸 </summary>              <div class='content'>              <div class="bgbox" id="pg-bg"><a href="javascript:;" style="background-image:url(${siteBgPhoneZIP}7p66we.webp)" class="pimgbox" onclick="roydon.changeBg('url(${siteBgPhoneZIP}7p66we.webp)')"></a><a href="javascript:;" style="background-image:url(${siteBgPhoneZIP}jx88k5.webp)" class="pimgbox" onclick="roydon.changeBg('url(${siteBgPhoneZIP}jx88k5.webp)')"></a><a href="javascript:;" style="background-image:url(${siteBgPhoneZIP}gpjj97.webp)" class="pimgbox" onclick="roydon.changeBg('url(${siteBgPhoneZIP}gpjj97.webp)')"></a><a href="javascript:;" style="background-image:url(${siteBgPhoneZIP}57x9l9.webp)" class="pimgbox" onclick="roydon.changeBg('url(${siteBgPhoneZIP}57x9l9.webp)')"></a><a href="javascript:;" style="background-image:url(${siteBgPhoneZIP}57od15.webp)" class="pimgbox" onclick="roydon.changeBg('url(${siteBgPhoneZIP}57od15.webp)')"></a><a href="javascript:;" style="background-image:url(${siteBgPhoneZIP}rdkd3q.webp)" class="pimgbox" onclick="roydon.changeBg('url(${siteBgPhoneZIP}rdkd3q.webp)')"></a><a href="javascript:;" style="background-image:url(${siteBgPhoneZIP}5glvk5.webp)" class="pimgbox" onclick="roydon.changeBg('url(${siteBgPhoneZIP}5glvk5.webp)')"></a><a href="javascript:;" style="background-image:url(${siteBgPhoneZIP}mp8zp8.webp)" class="pimgbox" onclick="roydon.changeBg('url(${siteBgPhoneZIP}mp8zp8.webp)')"></a><a href="javascript:;" style="background-image:url(${siteBgPhoneZIP}1kd8p9.webp)" class="pimgbox" onclick="roydon.changeBg('url(${siteBgPhoneZIP}1kd8p9.webp)')"></a><a href="javascript:;" style="background-image:url(${siteBgPhoneZIP}3z1dg9.webp)" class="pimgbox" onclick="roydon.changeBg('url(${siteBgPhoneZIP}3z1dg9.webp)')"></a><a href="javascript:;" style="background-image:url(${siteBgPhoneZIP}6oek9w.webp)" class="pimgbox" onclick="roydon.changeBg('url(${siteBgPhoneZIP}6oek9w.webp)')"></a><a href="javascript:;" style="background-image:url(${siteBgPhoneZIP}m3ppwy.webp)" class="pimgbox" onclick="roydon.changeBg('url(${siteBgPhoneZIP}m3ppwy.webp)')"></a></div>              </div>            </details>        <h2 id="渐变色"><a href="#渐变色" class="headerlink" title="渐变色"></a>渐变色</h2>    <details class="folding-tag" cyan><summary> 查看渐变色 </summary>              <div class='content'>              <div class="bgbox"><a href="javascript:;"  class="box" style="background: linear-gradient(to right, #eecda3, #ef629f)" onclick="roydon.changeBg('linear-gradient(to right, #eecda3, #ef629f)')"></a><a href="javascript:;"  class="box" style="background: linear-gradient(to right, #efa0ae, #ff3456)" onclick="roydon.changeBg('linear-gradient(to right, #efa0ae, #ff3456)')"></a><a href="javascript:;"  class="box" style="background: linear-gradient(to right, #ede437, #e4f023)" onclick="roydon.changeBg('linear-gradient(to right, #ede437, #e4f023)')"></a><a href="javascript:;"  class="box" style="background: linear-gradient(to right, #e8fd2b, #f59510)" onclick="roydon.changeBg('linear-gradient(to right, #e8fd2b, #f59510)')"></a><a href="javascript:;"  class="box" style="background: linear-gradient(to right, #3cfbff, #1e78f2)" onclick="roydon.changeBg('linear-gradient(to right, #3cfbff, #1e78f2)')"></a><a href="javascript:;"  class="box" style="background: linear-gradient(to right, #d718ff, #488cea)" onclick="roydon.changeBg('linear-gradient(to right, #d718ff, #488cea)')"></a></div>              </div>            </details>        <h2 id="纯色"><a href="#纯色" class="headerlink" title="纯色"></a>纯色</h2>    <details class="folding-tag" cyan><summary> 查看纯色 </summary>              <div class='content'>              <div class="bgbox"><a href="javascript:;"  class="box" style="background: #000000" onclick="roydon.changeBg('#000000')"></a><a href="javascript:;"  class="box" style="background: #ffffff" onclick="roydon.changeBg('#ffffff')"></a>  <a href="javascript:;"  class="box" style="background: #ff2700" onclick="roydon.changeBg('#ff2700')"></a><a href="javascript:;"  class="box" style="background: #ff9300" onclick="roydon.changeBg('#ff9300')"></a>   <a href="javascript:;"  class="box" style="background: #fffb0d" onclick="roydon.changeBg('#fffb0d')"></a>   <a href="javascript:;"  class="box" style="background: #00f91a" onclick="roydon.changeBg('#00f91a')"></a>   </div>              </div>            </details>`;}// 适应窗口大小function winResize() {  var offsetWid = document.documentElement.clientWidth;  if (offsetWid <= 768) {    winbox.resize(offsetWid * 0.9 + "px", "90%").move("center", "center");  } else {    winbox.resize(offsetWid * 0.8 + "px", "80%").move("center", "center");  }}// 切换状态，窗口已创建则控制窗口显示和隐藏，没窗口则创建窗口function toggleWinbox() {  if (document.querySelector('#changeBgBox')) winbox.toggleClass('hide');  else createWinbox();}//重定向浏览器地址// pjax.site_handleResponse = pjax.handleResponse;// pjax.handleResponse = function(responseText, request, href, options){//   Object.defineProperty(request,'responseURL',{//     value: href//   });//   pjax.site_handleResponse(responseText,request,href,options);// }]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/spine.js"/>
      <url>/js/spine.js</url>
      
        <content type="html"><![CDATA[var spine = (() => {    var __defProp = Object.defineProperty;    var __markAsModule = (target) => __defProp(target, "__esModule", { value: true });    var __export = (target, all) => {      __markAsModule(target);      for (var name in all)        __defProp(target, name, { get: all[name], enumerable: true });    };      // spine-player/src/index.ts    var src_exports = {};    __export(src_exports, {      AlphaTimeline: () => AlphaTimeline,      Animation: () => Animation,      AnimationState: () => AnimationState,      AnimationStateAdapter: () => AnimationStateAdapter,      AnimationStateData: () => AnimationStateData,      AssetManager: () => AssetManager,      AssetManagerBase: () => AssetManagerBase,      AtlasAttachmentLoader: () => AtlasAttachmentLoader,      Attachment: () => Attachment,      AttachmentTimeline: () => AttachmentTimeline,      BinaryInput: () => BinaryInput,      BlendMode: () => BlendMode,      Bone: () => Bone,      BoneData: () => BoneData,      BoundingBoxAttachment: () => BoundingBoxAttachment,      CURRENT: () => CURRENT,      CameraController: () => CameraController,      ClippingAttachment: () => ClippingAttachment,      Color: () => Color,      Color2Attribute: () => Color2Attribute,      ColorAttribute: () => ColorAttribute,      ConstraintData: () => ConstraintData,      CurveTimeline: () => CurveTimeline,      CurveTimeline1: () => CurveTimeline1,      CurveTimeline2: () => CurveTimeline2,      DebugUtils: () => DebugUtils,      DeformTimeline: () => DeformTimeline,      Downloader: () => Downloader,      DrawOrderTimeline: () => DrawOrderTimeline,      Event: () => Event,      EventData: () => EventData,      EventQueue: () => EventQueue,      EventTimeline: () => EventTimeline,      EventType: () => EventType,      FIRST: () => FIRST,      FakeTexture: () => FakeTexture,      GLTexture: () => GLTexture,      HOLD_FIRST: () => HOLD_FIRST,      HOLD_MIX: () => HOLD_MIX,      HOLD_SUBSEQUENT: () => HOLD_SUBSEQUENT,      IkConstraint: () => IkConstraint,      IkConstraintData: () => IkConstraintData,      IkConstraintTimeline: () => IkConstraintTimeline,      Input: () => Input,      IntSet: () => IntSet,      Interpolation: () => Interpolation,      JitterEffect: () => JitterEffect,      LoadingScreen: () => LoadingScreen,      M00: () => M00,      M01: () => M01,      M02: () => M02,      M03: () => M03,      M10: () => M10,      M11: () => M11,      M12: () => M12,      M13: () => M13,      M20: () => M20,      M21: () => M21,      M22: () => M22,      M23: () => M23,      M30: () => M30,      M31: () => M31,      M32: () => M32,      M33: () => M33,      ManagedWebGLRenderingContext: () => ManagedWebGLRenderingContext,      MathUtils: () => MathUtils,      Matrix4: () => Matrix42,      Mesh: () => Mesh,      MeshAttachment: () => MeshAttachment,      MixBlend: () => MixBlend,      MixDirection: () => MixDirection,      OrthoCamera: () => OrthoCamera,      PathAttachment: () => PathAttachment,      PathConstraint: () => PathConstraint,      PathConstraintData: () => PathConstraintData,      PathConstraintMixTimeline: () => PathConstraintMixTimeline,      PathConstraintPositionTimeline: () => PathConstraintPositionTimeline,      PathConstraintSpacingTimeline: () => PathConstraintSpacingTimeline,      PointAttachment: () => PointAttachment,      PolygonBatcher: () => PolygonBatcher,      Pool: () => Pool,      Position2Attribute: () => Position2Attribute,      Position3Attribute: () => Position3Attribute,      PositionMode: () => PositionMode,      Pow: () => Pow,      PowOut: () => PowOut,      RGB2Timeline: () => RGB2Timeline,      RGBA2Timeline: () => RGBA2Timeline,      RGBATimeline: () => RGBATimeline,      RGBTimeline: () => RGBTimeline,      RegionAttachment: () => RegionAttachment,      ResizeMode: () => ResizeMode,      RotateMode: () => RotateMode,      RotateTimeline: () => RotateTimeline,      SETUP: () => SETUP,      SUBSEQUENT: () => SUBSEQUENT,      ScaleTimeline: () => ScaleTimeline,      ScaleXTimeline: () => ScaleXTimeline,      ScaleYTimeline: () => ScaleYTimeline,      SceneRenderer: () => SceneRenderer,      Shader: () => Shader,      ShapeRenderer: () => ShapeRenderer,      ShapeType: () => ShapeType,      ShearTimeline: () => ShearTimeline,      ShearXTimeline: () => ShearXTimeline,      ShearYTimeline: () => ShearYTimeline,      Skeleton: () => Skeleton,      SkeletonBinary: () => SkeletonBinary,      SkeletonBounds: () => SkeletonBounds,      SkeletonClipping: () => SkeletonClipping,      SkeletonData: () => SkeletonData,      SkeletonDebugRenderer: () => SkeletonDebugRenderer,      SkeletonJson: () => SkeletonJson,      SkeletonRenderer: () => SkeletonRenderer,      Skin: () => Skin,      SkinEntry: () => SkinEntry,      Slot: () => Slot,      SlotData: () => SlotData,      SpacingMode: () => SpacingMode,      SpineCanvas: () => SpineCanvas,      SpinePlayer: () => SpinePlayer,      SpinePlayerEditor: () => SpinePlayerEditor,      StringSet: () => StringSet,      SwirlEffect: () => SwirlEffect,      TexCoordAttribute: () => TexCoordAttribute,      Texture: () => Texture,      TextureAtlas: () => TextureAtlas,      TextureAtlasPage: () => TextureAtlasPage,      TextureAtlasRegion: () => TextureAtlasRegion,      TextureFilter: () => TextureFilter,      TextureRegion: () => TextureRegion,      TextureWrap: () => TextureWrap,      TimeKeeper: () => TimeKeeper,      Timeline: () => Timeline,      Touch: () => Touch,      TrackEntry: () => TrackEntry,      TransformConstraint: () => TransformConstraint,      TransformConstraintData: () => TransformConstraintData,      TransformConstraintTimeline: () => TransformConstraintTimeline,      TransformMode: () => TransformMode,      TranslateTimeline: () => TranslateTimeline,      TranslateXTimeline: () => TranslateXTimeline,      TranslateYTimeline: () => TranslateYTimeline,      Triangulator: () => Triangulator,      Utils: () => Utils,      Vector2: () => Vector2,      Vector3: () => Vector3,      VertexAttachment: () => VertexAttachment,      VertexAttribute: () => VertexAttribute,      VertexAttributeType: () => VertexAttributeType,      WebGLBlendModeConverter: () => WebGLBlendModeConverter,      WindowedMean: () => WindowedMean    });      // spine-core/src/Utils.ts    var IntSet = class {      constructor() {        this.array = new Array();      }      add(value) {        let contains = this.contains(value);        this.array[value | 0] = value | 0;        return !contains;      }      contains(value) {        return this.array[value | 0] != void 0;      }      remove(value) {        this.array[value | 0] = void 0;      }      clear() {        this.array.length = 0;      }    };    var StringSet = class {      constructor() {        this.entries = {};        this.size = 0;      }      add(value) {        let contains = this.entries[value];        this.entries[value] = true;        if (!contains) {          this.size++;          return true;        }        return false;      }      addAll(values) {        let oldSize = this.size;        for (var i = 0, n = values.length; i < n; i++)          this.add(values[i]);        return oldSize != this.size;      }      contains(value) {        return this.entries[value];      }      clear() {        this.entries = {};        this.size = 0;      }    };    var _Color = class {      constructor(r = 0, g = 0, b = 0, a = 0) {        this.r = r;        this.g = g;        this.b = b;        this.a = a;      }      set(r, g, b, a) {        this.r = r;        this.g = g;        this.b = b;        this.a = a;        return this.clamp();      }      setFromColor(c) {        this.r = c.r;        this.g = c.g;        this.b = c.b;        this.a = c.a;        return this;      }      setFromString(hex) {        hex = hex.charAt(0) == "#" ? hex.substr(1) : hex;        this.r = parseInt(hex.substr(0, 2), 16) / 255;        this.g = parseInt(hex.substr(2, 2), 16) / 255;        this.b = parseInt(hex.substr(4, 2), 16) / 255;        this.a = hex.length != 8 ? 1 : parseInt(hex.substr(6, 2), 16) / 255;        return this;      }      add(r, g, b, a) {        this.r += r;        this.g += g;        this.b += b;        this.a += a;        return this.clamp();      }      clamp() {        if (this.r < 0)          this.r = 0;        else if (this.r > 1)          this.r = 1;        if (this.g < 0)          this.g = 0;        else if (this.g > 1)          this.g = 1;        if (this.b < 0)          this.b = 0;        else if (this.b > 1)          this.b = 1;        if (this.a < 0)          this.a = 0;        else if (this.a > 1)          this.a = 1;        return this;      }      static rgba8888ToColor(color, value) {        color.r = ((value & 4278190080) >>> 24) / 255;        color.g = ((value & 16711680) >>> 16) / 255;        color.b = ((value & 65280) >>> 8) / 255;        color.a = (value & 255) / 255;      }      static rgb888ToColor(color, value) {        color.r = ((value & 16711680) >>> 16) / 255;        color.g = ((value & 65280) >>> 8) / 255;        color.b = (value & 255) / 255;      }      static fromString(hex) {        return new _Color().setFromString(hex);      }    };    var Color = _Color;    Color.WHITE = new _Color(1, 1, 1, 1);    Color.RED = new _Color(1, 0, 0, 1);    Color.GREEN = new _Color(0, 1, 0, 1);    Color.BLUE = new _Color(0, 0, 1, 1);    Color.MAGENTA = new _Color(1, 0, 1, 1);    var _MathUtils = class {      static clamp(value, min, max) {        if (value < min)          return min;        if (value > max)          return max;        return value;      }      static cosDeg(degrees) {        return Math.cos(degrees * _MathUtils.degRad);      }      static sinDeg(degrees) {        return Math.sin(degrees * _MathUtils.degRad);      }      static signum(value) {        return value > 0 ? 1 : value < 0 ? -1 : 0;      }      static toInt(x) {        return x > 0 ? Math.floor(x) : Math.ceil(x);      }      static cbrt(x) {        let y = Math.pow(Math.abs(x), 1 / 3);        return x < 0 ? -y : y;      }      static randomTriangular(min, max) {        return _MathUtils.randomTriangularWith(min, max, (min + max) * 0.5);      }      static randomTriangularWith(min, max, mode) {        let u = Math.random();        let d = max - min;        if (u <= (mode - min) / d)          return min + Math.sqrt(u * d * (mode - min));        return max - Math.sqrt((1 - u) * d * (max - mode));      }      static isPowerOfTwo(value) {        return value && (value & value - 1) === 0;      }    };    var MathUtils = _MathUtils;    MathUtils.PI = 3.1415927;    MathUtils.PI2 = _MathUtils.PI * 2;    MathUtils.radiansToDegrees = 180 / _MathUtils.PI;    MathUtils.radDeg = _MathUtils.radiansToDegrees;    MathUtils.degreesToRadians = _MathUtils.PI / 180;    MathUtils.degRad = _MathUtils.degreesToRadians;    var Interpolation = class {      apply(start, end, a) {        return start + (end - start) * this.applyInternal(a);      }    };    var Pow = class extends Interpolation {      constructor(power) {        super();        this.power = 2;        this.power = power;      }      applyInternal(a) {        if (a <= 0.5)          return Math.pow(a * 2, this.power) / 2;        return Math.pow((a - 1) * 2, this.power) / (this.power % 2 == 0 ? -2 : 2) + 1;      }    };    var PowOut = class extends Pow {      constructor(power) {        super(power);      }      applyInternal(a) {        return Math.pow(a - 1, this.power) * (this.power % 2 == 0 ? -1 : 1) + 1;      }    };    var _Utils = class {      static arrayCopy(source, sourceStart, dest, destStart, numElements) {        for (let i = sourceStart, j = destStart; i < sourceStart + numElements; i++, j++) {          dest[j] = source[i];        }      }      static arrayFill(array, fromIndex, toIndex, value) {        for (let i = fromIndex; i < toIndex; i++)          array[i] = value;      }      static setArraySize(array, size, value = 0) {        let oldSize = array.length;        if (oldSize == size)          return array;        array.length = size;        if (oldSize < size) {          for (let i = oldSize; i < size; i++)            array[i] = value;        }        return array;      }      static ensureArrayCapacity(array, size, value = 0) {        if (array.length >= size)          return array;        return _Utils.setArraySize(array, size, value);      }      static newArray(size, defaultValue) {        let array = new Array(size);        for (let i = 0; i < size; i++)          array[i] = defaultValue;        return array;      }      static newFloatArray(size) {        if (_Utils.SUPPORTS_TYPED_ARRAYS)          return new Float32Array(size);        else {          let array = new Array(size);          for (let i = 0; i < array.length; i++)            array[i] = 0;          return array;        }      }      static newShortArray(size) {        if (_Utils.SUPPORTS_TYPED_ARRAYS)          return new Int16Array(size);        else {          let array = new Array(size);          for (let i = 0; i < array.length; i++)            array[i] = 0;          return array;        }      }      static toFloatArray(array) {        return _Utils.SUPPORTS_TYPED_ARRAYS ? new Float32Array(array) : array;      }      static toSinglePrecision(value) {        return _Utils.SUPPORTS_TYPED_ARRAYS ? Math.fround(value) : value;      }      static webkit602BugfixHelper(alpha, blend) {      }      static contains(array, element, identity = true) {        for (var i = 0; i < array.length; i++)          if (array[i] == element)            return true;        return false;      }      static enumValue(type, name) {        return type[name[0].toUpperCase() + name.slice(1)];      }    };    var Utils = _Utils;    Utils.SUPPORTS_TYPED_ARRAYS = typeof Float32Array !== "undefined";    var DebugUtils = class {      static logBones(skeleton) {        for (let i = 0; i < skeleton.bones.length; i++) {          let bone = skeleton.bones[i];          console.log(bone.data.name + ", " + bone.a + ", " + bone.b + ", " + bone.c + ", " + bone.d + ", " + bone.worldX + ", " + bone.worldY);        }      }    };    var Pool = class {      constructor(instantiator) {        this.items = new Array();        this.instantiator = instantiator;      }      obtain() {        return this.items.length > 0 ? this.items.pop() : this.instantiator();      }      free(item) {        if (item.reset)          item.reset();        this.items.push(item);      }      freeAll(items) {        for (let i = 0; i < items.length; i++)          this.free(items[i]);      }      clear() {        this.items.length = 0;      }    };    var Vector2 = class {      constructor(x = 0, y = 0) {        this.x = x;        this.y = y;      }      set(x, y) {        this.x = x;        this.y = y;        return this;      }      length() {        let x = this.x;        let y = this.y;        return Math.sqrt(x * x + y * y);      }      normalize() {        let len = this.length();        if (len != 0) {          this.x /= len;          this.y /= len;        }        return this;      }    };    var TimeKeeper = class {      constructor() {        this.maxDelta = 0.064;        this.framesPerSecond = 0;        this.delta = 0;        this.totalTime = 0;        this.lastTime = Date.now() / 1e3;        this.frameCount = 0;        this.frameTime = 0;      }      update() {        let now = Date.now() / 1e3;        this.delta = now - this.lastTime;        this.frameTime += this.delta;        this.totalTime += this.delta;        if (this.delta > this.maxDelta)          this.delta = this.maxDelta;        this.lastTime = now;        this.frameCount++;        if (this.frameTime > 1) {          this.framesPerSecond = this.frameCount / this.frameTime;          this.frameTime = 0;          this.frameCount = 0;        }      }    };    var WindowedMean = class {      constructor(windowSize = 32) {        this.addedValues = 0;        this.lastValue = 0;        this.mean = 0;        this.dirty = true;        this.values = new Array(windowSize);      }      hasEnoughData() {        return this.addedValues >= this.values.length;      }      addValue(value) {        if (this.addedValues < this.values.length)          this.addedValues++;        this.values[this.lastValue++] = value;        if (this.lastValue > this.values.length - 1)          this.lastValue = 0;        this.dirty = true;      }      getMean() {        if (this.hasEnoughData()) {          if (this.dirty) {            let mean = 0;            for (let i = 0; i < this.values.length; i++)              mean += this.values[i];            this.mean = mean / this.values.length;            this.dirty = false;          }          return this.mean;        }        return 0;      }    };      // spine-core/src/attachments/Attachment.ts    var Attachment = class {      constructor(name) {        if (!name)          throw new Error("name cannot be null.");        this.name = name;      }    };    var _VertexAttachment = class extends Attachment {      constructor(name) {        super(name);        this.id = _VertexAttachment.nextID++;        this.bones = null;        this.vertices = null;        this.worldVerticesLength = 0;        this.deformAttachment = this;      }      computeWorldVertices(slot, start, count, worldVertices, offset, stride) {        count = offset + (count >> 1) * stride;        let skeleton = slot.bone.skeleton;        let deformArray = slot.deform;        let vertices = this.vertices;        let bones = this.bones;        if (!bones) {          if (deformArray.length > 0)            vertices = deformArray;          let bone = slot.bone;          let x = bone.worldX;          let y = bone.worldY;          let a = bone.a, b = bone.b, c = bone.c, d = bone.d;          for (let v2 = start, w = offset; w < count; v2 += 2, w += stride) {            let vx = vertices[v2], vy = vertices[v2 + 1];            worldVertices[w] = vx * a + vy * b + x;            worldVertices[w + 1] = vx * c + vy * d + y;          }          return;        }        let v = 0, skip = 0;        for (let i = 0; i < start; i += 2) {          let n = bones[v];          v += n + 1;          skip += n;        }        let skeletonBones = skeleton.bones;        if (deformArray.length == 0) {          for (let w = offset, b = skip * 3; w < count; w += stride) {            let wx = 0, wy = 0;            let n = bones[v++];            n += v;            for (; v < n; v++, b += 3) {              let bone = skeletonBones[bones[v]];              let vx = vertices[b], vy = vertices[b + 1], weight = vertices[b + 2];              wx += (vx * bone.a + vy * bone.b + bone.worldX) * weight;              wy += (vx * bone.c + vy * bone.d + bone.worldY) * weight;            }            worldVertices[w] = wx;            worldVertices[w + 1] = wy;          }        } else {          let deform = deformArray;          for (let w = offset, b = skip * 3, f = skip << 1; w < count; w += stride) {            let wx = 0, wy = 0;            let n = bones[v++];            n += v;            for (; v < n; v++, b += 3, f += 2) {              let bone = skeletonBones[bones[v]];              let vx = vertices[b] + deform[f], vy = vertices[b + 1] + deform[f + 1], weight = vertices[b + 2];              wx += (vx * bone.a + vy * bone.b + bone.worldX) * weight;              wy += (vx * bone.c + vy * bone.d + bone.worldY) * weight;            }            worldVertices[w] = wx;            worldVertices[w + 1] = wy;          }        }      }      copyTo(attachment) {        if (this.bones) {          attachment.bones = new Array(this.bones.length);          Utils.arrayCopy(this.bones, 0, attachment.bones, 0, this.bones.length);        } else          attachment.bones = null;        if (this.vertices) {          attachment.vertices = Utils.newFloatArray(this.vertices.length);          Utils.arrayCopy(this.vertices, 0, attachment.vertices, 0, this.vertices.length);        } else          attachment.vertices = null;        attachment.worldVerticesLength = this.worldVerticesLength;        attachment.deformAttachment = this.deformAttachment;      }    };    var VertexAttachment = _VertexAttachment;    VertexAttachment.nextID = 0;      // spine-core/src/Animation.ts    var Animation = class {      constructor(name, timelines, duration) {        this.timelines = null;        this.timelineIds = null;        if (!name)          throw new Error("name cannot be null.");        this.name = name;        this.setTimelines(timelines);        this.duration = duration;      }      setTimelines(timelines) {        if (!timelines)          throw new Error("timelines cannot be null.");        this.timelines = timelines;        this.timelineIds = new StringSet();        for (var i = 0; i < timelines.length; i++)          this.timelineIds.addAll(timelines[i].getPropertyIds());      }      hasTimeline(ids) {        for (let i = 0; i < ids.length; i++)          if (this.timelineIds.contains(ids[i]))            return true;        return false;      }      apply(skeleton, lastTime, time, loop, events, alpha, blend, direction) {        if (!skeleton)          throw new Error("skeleton cannot be null.");        if (loop && this.duration != 0) {          time %= this.duration;          if (lastTime > 0)            lastTime %= this.duration;        }        let timelines = this.timelines;        for (let i = 0, n = timelines.length; i < n; i++)          timelines[i].apply(skeleton, lastTime, time, events, alpha, blend, direction);      }    };    var MixBlend;    (function(MixBlend2) {      MixBlend2[MixBlend2["setup"] = 0] = "setup";      MixBlend2[MixBlend2["first"] = 1] = "first";      MixBlend2[MixBlend2["replace"] = 2] = "replace";      MixBlend2[MixBlend2["add"] = 3] = "add";    })(MixBlend || (MixBlend = {}));    var MixDirection;    (function(MixDirection2) {      MixDirection2[MixDirection2["mixIn"] = 0] = "mixIn";      MixDirection2[MixDirection2["mixOut"] = 1] = "mixOut";    })(MixDirection || (MixDirection = {}));    var Property = {      rotate: 0,      x: 1,      y: 2,      scaleX: 3,      scaleY: 4,      shearX: 5,      shearY: 6,      rgb: 7,      alpha: 8,      rgb2: 9,      attachment: 10,      deform: 11,      event: 12,      drawOrder: 13,      ikConstraint: 14,      transformConstraint: 15,      pathConstraintPosition: 16,      pathConstraintSpacing: 17,      pathConstraintMix: 18    };    var Timeline = class {      constructor(frameCount, propertyIds) {        this.propertyIds = null;        this.frames = null;        this.propertyIds = propertyIds;        this.frames = Utils.newFloatArray(frameCount * this.getFrameEntries());      }      getPropertyIds() {        return this.propertyIds;      }      getFrameEntries() {        return 1;      }      getFrameCount() {        return this.frames.length / this.getFrameEntries();      }      getDuration() {        return this.frames[this.frames.length - this.getFrameEntries()];      }      static search1(frames, time) {        let n = frames.length;        for (let i = 1; i < n; i++)          if (frames[i] > time)            return i - 1;        return n - 1;      }      static search(frames, time, step) {        let n = frames.length;        for (let i = step; i < n; i += step)          if (frames[i] > time)            return i - step;        return n - step;      }    };    var CurveTimeline = class extends Timeline {      constructor(frameCount, bezierCount, propertyIds) {        super(frameCount, propertyIds);        this.curves = null;        this.curves = Utils.newFloatArray(frameCount + bezierCount * 18);        this.curves[frameCount - 1] = 1;      }      setLinear(frame) {        this.curves[frame] = 0;      }      setStepped(frame) {        this.curves[frame] = 1;      }      shrink(bezierCount) {        let size = this.getFrameCount() + bezierCount * 18;        if (this.curves.length > size) {          let newCurves = Utils.newFloatArray(size);          Utils.arrayCopy(this.curves, 0, newCurves, 0, size);          this.curves = newCurves;        }      }      setBezier(bezier, frame, value, time1, value1, cx1, cy1, cx2, cy2, time2, value2) {        let curves = this.curves;        let i = this.getFrameCount() + bezier * 18;        if (value == 0)          curves[frame] = 2 + i;        let tmpx = (time1 - cx1 * 2 + cx2) * 0.03, tmpy = (value1 - cy1 * 2 + cy2) * 0.03;        let dddx = ((cx1 - cx2) * 3 - time1 + time2) * 6e-3, dddy = ((cy1 - cy2) * 3 - value1 + value2) * 6e-3;        let ddx = tmpx * 2 + dddx, ddy = tmpy * 2 + dddy;        let dx = (cx1 - time1) * 0.3 + tmpx + dddx * 0.16666667, dy = (cy1 - value1) * 0.3 + tmpy + dddy * 0.16666667;        let x = time1 + dx, y = value1 + dy;        for (let n = i + 18; i < n; i += 2) {          curves[i] = x;          curves[i + 1] = y;          dx += ddx;          dy += ddy;          ddx += dddx;          ddy += dddy;          x += dx;          y += dy;        }      }      getBezierValue(time, frameIndex, valueOffset, i) {        let curves = this.curves;        if (curves[i] > time) {          let x2 = this.frames[frameIndex], y2 = this.frames[frameIndex + valueOffset];          return y2 + (time - x2) / (curves[i] - x2) * (curves[i + 1] - y2);        }        let n = i + 18;        for (i += 2; i < n; i += 2) {          if (curves[i] >= time) {            let x2 = curves[i - 2], y2 = curves[i - 1];            return y2 + (time - x2) / (curves[i] - x2) * (curves[i + 1] - y2);          }        }        frameIndex += this.getFrameEntries();        let x = curves[n - 2], y = curves[n - 1];        return y + (time - x) / (this.frames[frameIndex] - x) * (this.frames[frameIndex + valueOffset] - y);      }    };    var CurveTimeline1 = class extends CurveTimeline {      constructor(frameCount, bezierCount, propertyId) {        super(frameCount, bezierCount, [propertyId]);      }      getFrameEntries() {        return 2;      }      setFrame(frame, time, value) {        frame <<= 1;        this.frames[frame] = time;        this.frames[frame + 1] = value;      }      getCurveValue(time) {        let frames = this.frames;        let i = frames.length - 2;        for (let ii = 2; ii <= i; ii += 2) {          if (frames[ii] > time) {            i = ii - 2;            break;          }        }        let curveType = this.curves[i >> 1];        switch (curveType) {          case 0:            let before = frames[i], value = frames[i + 1];            return value + (time - before) / (frames[i + 2] - before) * (frames[i + 2 + 1] - value);          case 1:            return frames[i + 1];        }        return this.getBezierValue(time, i, 1, curveType - 2);      }    };    var CurveTimeline2 = class extends CurveTimeline {      constructor(frameCount, bezierCount, propertyId1, propertyId2) {        super(frameCount, bezierCount, [propertyId1, propertyId2]);      }      getFrameEntries() {        return 3;      }      setFrame(frame, time, value1, value2) {        frame *= 3;        this.frames[frame] = time;        this.frames[frame + 1] = value1;        this.frames[frame + 2] = value2;      }    };    var RotateTimeline = class extends CurveTimeline1 {      constructor(frameCount, bezierCount, boneIndex) {        super(frameCount, bezierCount, Property.rotate + "|" + boneIndex);        this.boneIndex = 0;        this.boneIndex = boneIndex;      }      apply(skeleton, lastTime, time, events, alpha, blend, direction) {        let bone = skeleton.bones[this.boneIndex];        if (!bone.active)          return;        let frames = this.frames;        if (time < frames[0]) {          switch (blend) {            case 0:              bone.rotation = bone.data.rotation;              return;            case 1:              bone.rotation += (bone.data.rotation - bone.rotation) * alpha;          }          return;        }        let r = this.getCurveValue(time);        switch (blend) {          case 0:            bone.rotation = bone.data.rotation + r * alpha;            break;          case 1:          case 2:            r += bone.data.rotation - bone.rotation;          case 3:            bone.rotation += r * alpha;        }      }    };    var TranslateTimeline = class extends CurveTimeline2 {      constructor(frameCount, bezierCount, boneIndex) {        super(frameCount, bezierCount, Property.x + "|" + boneIndex, Property.y + "|" + boneIndex);        this.boneIndex = 0;        this.boneIndex = boneIndex;      }      apply(skeleton, lastTime, time, events, alpha, blend, direction) {        let bone = skeleton.bones[this.boneIndex];        if (!bone.active)          return;        let frames = this.frames;        if (time < frames[0]) {          switch (blend) {            case 0:              bone.x = bone.data.x;              bone.y = bone.data.y;              return;            case 1:              bone.x += (bone.data.x - bone.x) * alpha;              bone.y += (bone.data.y - bone.y) * alpha;          }          return;        }        let x = 0, y = 0;        let i = Timeline.search(frames, time, 3);        let curveType = this.curves[i / 3];        switch (curveType) {          case 0:            let before = frames[i];            x = frames[i + 1];            y = frames[i + 2];            let t = (time - before) / (frames[i + 3] - before);            x += (frames[i + 3 + 1] - x) * t;            y += (frames[i + 3 + 2] - y) * t;            break;          case 1:            x = frames[i + 1];            y = frames[i + 2];            break;          default:            x = this.getBezierValue(time, i, 1, curveType - 2);            y = this.getBezierValue(time, i, 2, curveType + 18 - 2);        }        switch (blend) {          case 0:            bone.x = bone.data.x + x * alpha;            bone.y = bone.data.y + y * alpha;            break;          case 1:          case 2:            bone.x += (bone.data.x + x - bone.x) * alpha;            bone.y += (bone.data.y + y - bone.y) * alpha;            break;          case 3:            bone.x += x * alpha;            bone.y += y * alpha;        }      }    };    var TranslateXTimeline = class extends CurveTimeline1 {      constructor(frameCount, bezierCount, boneIndex) {        super(frameCount, bezierCount, Property.x + "|" + boneIndex);        this.boneIndex = 0;        this.boneIndex = boneIndex;      }      apply(skeleton, lastTime, time, events, alpha, blend, direction) {        let bone = skeleton.bones[this.boneIndex];        if (!bone.active)          return;        let frames = this.frames;        if (time < frames[0]) {          switch (blend) {            case 0:              bone.x = bone.data.x;              return;            case 1:              bone.x += (bone.data.x - bone.x) * alpha;          }          return;        }        let x = this.getCurveValue(time);        switch (blend) {          case 0:            bone.x = bone.data.x + x * alpha;            break;          case 1:          case 2:            bone.x += (bone.data.x + x - bone.x) * alpha;            break;          case 3:            bone.x += x * alpha;        }      }    };    var TranslateYTimeline = class extends CurveTimeline1 {      constructor(frameCount, bezierCount, boneIndex) {        super(frameCount, bezierCount, Property.y + "|" + boneIndex);        this.boneIndex = 0;        this.boneIndex = boneIndex;      }      apply(skeleton, lastTime, time, events, alpha, blend, direction) {        let bone = skeleton.bones[this.boneIndex];        if (!bone.active)          return;        let frames = this.frames;        if (time < frames[0]) {          switch (blend) {            case 0:              bone.y = bone.data.y;              return;            case 1:              bone.y += (bone.data.y - bone.y) * alpha;          }          return;        }        let y = this.getCurveValue(time);        switch (blend) {          case 0:            bone.y = bone.data.y + y * alpha;            break;          case 1:          case 2:            bone.y += (bone.data.y + y - bone.y) * alpha;            break;          case 3:            bone.y += y * alpha;        }      }    };    var ScaleTimeline = class extends CurveTimeline2 {      constructor(frameCount, bezierCount, boneIndex) {        super(frameCount, bezierCount, Property.scaleX + "|" + boneIndex, Property.scaleY + "|" + boneIndex);        this.boneIndex = 0;        this.boneIndex = boneIndex;      }      apply(skeleton, lastTime, time, events, alpha, blend, direction) {        let bone = skeleton.bones[this.boneIndex];        if (!bone.active)          return;        let frames = this.frames;        if (time < frames[0]) {          switch (blend) {            case 0:              bone.scaleX = bone.data.scaleX;              bone.scaleY = bone.data.scaleY;              return;            case 1:              bone.scaleX += (bone.data.scaleX - bone.scaleX) * alpha;              bone.scaleY += (bone.data.scaleY - bone.scaleY) * alpha;          }          return;        }        let x, y;        let i = Timeline.search(frames, time, 3);        let curveType = this.curves[i / 3];        switch (curveType) {          case 0:            let before = frames[i];            x = frames[i + 1];            y = frames[i + 2];            let t = (time - before) / (frames[i + 3] - before);            x += (frames[i + 3 + 1] - x) * t;            y += (frames[i + 3 + 2] - y) * t;            break;          case 1:            x = frames[i + 1];            y = frames[i + 2];            break;          default:            x = this.getBezierValue(time, i, 1, curveType - 2);            y = this.getBezierValue(time, i, 2, curveType + 18 - 2);        }        x *= bone.data.scaleX;        y *= bone.data.scaleY;        if (alpha == 1) {          if (blend == 3) {            bone.scaleX += x - bone.data.scaleX;            bone.scaleY += y - bone.data.scaleY;          } else {            bone.scaleX = x;            bone.scaleY = y;          }        } else {          let bx = 0, by = 0;          if (direction == 1) {            switch (blend) {              case 0:                bx = bone.data.scaleX;                by = bone.data.scaleY;                bone.scaleX = bx + (Math.abs(x) * MathUtils.signum(bx) - bx) * alpha;                bone.scaleY = by + (Math.abs(y) * MathUtils.signum(by) - by) * alpha;                break;              case 1:              case 2:                bx = bone.scaleX;                by = bone.scaleY;                bone.scaleX = bx + (Math.abs(x) * MathUtils.signum(bx) - bx) * alpha;                bone.scaleY = by + (Math.abs(y) * MathUtils.signum(by) - by) * alpha;                break;              case 3:                bone.scaleX += (x - bone.data.scaleX) * alpha;                bone.scaleY += (y - bone.data.scaleY) * alpha;            }          } else {            switch (blend) {              case 0:                bx = Math.abs(bone.data.scaleX) * MathUtils.signum(x);                by = Math.abs(bone.data.scaleY) * MathUtils.signum(y);                bone.scaleX = bx + (x - bx) * alpha;                bone.scaleY = by + (y - by) * alpha;                break;              case 1:              case 2:                bx = Math.abs(bone.scaleX) * MathUtils.signum(x);                by = Math.abs(bone.scaleY) * MathUtils.signum(y);                bone.scaleX = bx + (x - bx) * alpha;                bone.scaleY = by + (y - by) * alpha;                break;              case 3:                bone.scaleX += (x - bone.data.scaleX) * alpha;                bone.scaleY += (y - bone.data.scaleY) * alpha;            }          }        }      }    };    var ScaleXTimeline = class extends CurveTimeline1 {      constructor(frameCount, bezierCount, boneIndex) {        super(frameCount, bezierCount, Property.scaleX + "|" + boneIndex);        this.boneIndex = 0;        this.boneIndex = boneIndex;      }      apply(skeleton, lastTime, time, events, alpha, blend, direction) {        let bone = skeleton.bones[this.boneIndex];        if (!bone.active)          return;        let frames = this.frames;        if (time < frames[0]) {          switch (blend) {            case 0:              bone.scaleX = bone.data.scaleX;              return;            case 1:              bone.scaleX += (bone.data.scaleX - bone.scaleX) * alpha;          }          return;        }        let x = this.getCurveValue(time) * bone.data.scaleX;        if (alpha == 1) {          if (blend == 3)            bone.scaleX += x - bone.data.scaleX;          else            bone.scaleX = x;        } else {          let bx = 0;          if (direction == 1) {            switch (blend) {              case 0:                bx = bone.data.scaleX;                bone.scaleX = bx + (Math.abs(x) * MathUtils.signum(bx) - bx) * alpha;                break;              case 1:              case 2:                bx = bone.scaleX;                bone.scaleX = bx + (Math.abs(x) * MathUtils.signum(bx) - bx) * alpha;                break;              case 3:                bone.scaleX += (x - bone.data.scaleX) * alpha;            }          } else {            switch (blend) {              case 0:                bx = Math.abs(bone.data.scaleX) * MathUtils.signum(x);                bone.scaleX = bx + (x - bx) * alpha;                break;              case 1:              case 2:                bx = Math.abs(bone.scaleX) * MathUtils.signum(x);                bone.scaleX = bx + (x - bx) * alpha;                break;              case 3:                bone.scaleX += (x - bone.data.scaleX) * alpha;            }          }        }      }    };    var ScaleYTimeline = class extends CurveTimeline1 {      constructor(frameCount, bezierCount, boneIndex) {        super(frameCount, bezierCount, Property.scaleY + "|" + boneIndex);        this.boneIndex = 0;        this.boneIndex = boneIndex;      }      apply(skeleton, lastTime, time, events, alpha, blend, direction) {        let bone = skeleton.bones[this.boneIndex];        if (!bone.active)          return;        let frames = this.frames;        if (time < frames[0]) {          switch (blend) {            case 0:              bone.scaleY = bone.data.scaleY;              return;            case 1:              bone.scaleY += (bone.data.scaleY - bone.scaleY) * alpha;          }          return;        }        let y = this.getCurveValue(time) * bone.data.scaleY;        if (alpha == 1) {          if (blend == 3)            bone.scaleY += y - bone.data.scaleY;          else            bone.scaleY = y;        } else {          let by = 0;          if (direction == 1) {            switch (blend) {              case 0:                by = bone.data.scaleY;                bone.scaleY = by + (Math.abs(y) * MathUtils.signum(by) - by) * alpha;                break;              case 1:              case 2:                by = bone.scaleY;                bone.scaleY = by + (Math.abs(y) * MathUtils.signum(by) - by) * alpha;                break;              case 3:                bone.scaleY += (y - bone.data.scaleY) * alpha;            }          } else {            switch (blend) {              case 0:                by = Math.abs(bone.data.scaleY) * MathUtils.signum(y);                bone.scaleY = by + (y - by) * alpha;                break;              case 1:              case 2:                by = Math.abs(bone.scaleY) * MathUtils.signum(y);                bone.scaleY = by + (y - by) * alpha;                break;              case 3:                bone.scaleY += (y - bone.data.scaleY) * alpha;            }          }        }      }    };    var ShearTimeline = class extends CurveTimeline2 {      constructor(frameCount, bezierCount, boneIndex) {        super(frameCount, bezierCount, Property.shearX + "|" + boneIndex, Property.shearY + "|" + boneIndex);        this.boneIndex = 0;        this.boneIndex = boneIndex;      }      apply(skeleton, lastTime, time, events, alpha, blend, direction) {        let bone = skeleton.bones[this.boneIndex];        if (!bone.active)          return;        let frames = this.frames;        if (time < frames[0]) {          switch (blend) {            case 0:              bone.shearX = bone.data.shearX;              bone.shearY = bone.data.shearY;              return;            case 1:              bone.shearX += (bone.data.shearX - bone.shearX) * alpha;              bone.shearY += (bone.data.shearY - bone.shearY) * alpha;          }          return;        }        let x = 0, y = 0;        let i = Timeline.search(frames, time, 3);        let curveType = this.curves[i / 3];        switch (curveType) {          case 0:            let before = frames[i];            x = frames[i + 1];            y = frames[i + 2];            let t = (time - before) / (frames[i + 3] - before);            x += (frames[i + 3 + 1] - x) * t;            y += (frames[i + 3 + 2] - y) * t;            break;          case 1:            x = frames[i + 1];            y = frames[i + 2];            break;          default:            x = this.getBezierValue(time, i, 1, curveType - 2);            y = this.getBezierValue(time, i, 2, curveType + 18 - 2);        }        switch (blend) {          case 0:            bone.shearX = bone.data.shearX + x * alpha;            bone.shearY = bone.data.shearY + y * alpha;            break;          case 1:          case 2:            bone.shearX += (bone.data.shearX + x - bone.shearX) * alpha;            bone.shearY += (bone.data.shearY + y - bone.shearY) * alpha;            break;          case 3:            bone.shearX += x * alpha;            bone.shearY += y * alpha;        }      }    };    var ShearXTimeline = class extends CurveTimeline1 {      constructor(frameCount, bezierCount, boneIndex) {        super(frameCount, bezierCount, Property.shearX + "|" + boneIndex);        this.boneIndex = 0;        this.boneIndex = boneIndex;      }      apply(skeleton, lastTime, time, events, alpha, blend, direction) {        let bone = skeleton.bones[this.boneIndex];        if (!bone.active)          return;        let frames = this.frames;        if (time < frames[0]) {          switch (blend) {            case 0:              bone.shearX = bone.data.shearX;              return;            case 1:              bone.shearX += (bone.data.shearX - bone.shearX) * alpha;          }          return;        }        let x = this.getCurveValue(time);        switch (blend) {          case 0:            bone.shearX = bone.data.shearX + x * alpha;            break;          case 1:          case 2:            bone.shearX += (bone.data.shearX + x - bone.shearX) * alpha;            break;          case 3:            bone.shearX += x * alpha;        }      }    };    var ShearYTimeline = class extends CurveTimeline1 {      constructor(frameCount, bezierCount, boneIndex) {        super(frameCount, bezierCount, Property.shearY + "|" + boneIndex);        this.boneIndex = 0;        this.boneIndex = boneIndex;      }      apply(skeleton, lastTime, time, events, alpha, blend, direction) {        let bone = skeleton.bones[this.boneIndex];        if (!bone.active)          return;        let frames = this.frames;        if (time < frames[0]) {          switch (blend) {            case 0:              bone.shearY = bone.data.shearY;              return;            case 1:              bone.shearY += (bone.data.shearY - bone.shearY) * alpha;          }          return;        }        let y = this.getCurveValue(time);        switch (blend) {          case 0:            bone.shearY = bone.data.shearY + y * alpha;            break;          case 1:          case 2:            bone.shearY += (bone.data.shearY + y - bone.shearY) * alpha;            break;          case 3:            bone.shearY += y * alpha;        }      }    };    var RGBATimeline = class extends CurveTimeline {      constructor(frameCount, bezierCount, slotIndex) {        super(frameCount, bezierCount, [          Property.rgb + "|" + slotIndex,          Property.alpha + "|" + slotIndex        ]);        this.slotIndex = 0;        this.slotIndex = slotIndex;      }      getFrameEntries() {        return 5;      }      setFrame(frame, time, r, g, b, a) {        frame *= 5;        this.frames[frame] = time;        this.frames[frame + 1] = r;        this.frames[frame + 2] = g;        this.frames[frame + 3] = b;        this.frames[frame + 4] = a;      }      apply(skeleton, lastTime, time, events, alpha, blend, direction) {        let slot = skeleton.slots[this.slotIndex];        if (!slot.bone.active)          return;        let frames = this.frames;        let color = slot.color;        if (time < frames[0]) {          let setup = slot.data.color;          switch (blend) {            case 0:              color.setFromColor(setup);              return;            case 1:              color.add((setup.r - color.r) * alpha, (setup.g - color.g) * alpha, (setup.b - color.b) * alpha, (setup.a - color.a) * alpha);          }          return;        }        let r = 0, g = 0, b = 0, a = 0;        let i = Timeline.search(frames, time, 5);        let curveType = this.curves[i / 5];        switch (curveType) {          case 0:            let before = frames[i];            r = frames[i + 1];            g = frames[i + 2];            b = frames[i + 3];            a = frames[i + 4];            let t = (time - before) / (frames[i + 5] - before);            r += (frames[i + 5 + 1] - r) * t;            g += (frames[i + 5 + 2] - g) * t;            b += (frames[i + 5 + 3] - b) * t;            a += (frames[i + 5 + 4] - a) * t;            break;          case 1:            r = frames[i + 1];            g = frames[i + 2];            b = frames[i + 3];            a = frames[i + 4];            break;          default:            r = this.getBezierValue(time, i, 1, curveType - 2);            g = this.getBezierValue(time, i, 2, curveType + 18 - 2);            b = this.getBezierValue(time, i, 3, curveType + 18 * 2 - 2);            a = this.getBezierValue(time, i, 4, curveType + 18 * 3 - 2);        }        if (alpha == 1)          color.set(r, g, b, a);        else {          if (blend == 0)            color.setFromColor(slot.data.color);          color.add((r - color.r) * alpha, (g - color.g) * alpha, (b - color.b) * alpha, (a - color.a) * alpha);        }      }    };    var RGBTimeline = class extends CurveTimeline {      constructor(frameCount, bezierCount, slotIndex) {        super(frameCount, bezierCount, [          Property.rgb + "|" + slotIndex        ]);        this.slotIndex = 0;        this.slotIndex = slotIndex;      }      getFrameEntries() {        return 4;      }      setFrame(frame, time, r, g, b) {        frame <<= 2;        this.frames[frame] = time;        this.frames[frame + 1] = r;        this.frames[frame + 2] = g;        this.frames[frame + 3] = b;      }      apply(skeleton, lastTime, time, events, alpha, blend, direction) {        let slot = skeleton.slots[this.slotIndex];        if (!slot.bone.active)          return;        let frames = this.frames;        let color = slot.color;        if (time < frames[0]) {          let setup = slot.data.color;          switch (blend) {            case 0:              color.r = setup.r;              color.g = setup.g;              color.b = setup.b;              return;            case 1:              color.r += (setup.r - color.r) * alpha;              color.g += (setup.g - color.g) * alpha;              color.b += (setup.b - color.b) * alpha;          }          return;        }        let r = 0, g = 0, b = 0;        let i = Timeline.search(frames, time, 4);        let curveType = this.curves[i >> 2];        switch (curveType) {          case 0:            let before = frames[i];            r = frames[i + 1];            g = frames[i + 2];            b = frames[i + 3];            let t = (time - before) / (frames[i + 4] - before);            r += (frames[i + 4 + 1] - r) * t;            g += (frames[i + 4 + 2] - g) * t;            b += (frames[i + 4 + 3] - b) * t;            break;          case 1:            r = frames[i + 1];            g = frames[i + 2];            b = frames[i + 3];            break;          default:            r = this.getBezierValue(time, i, 1, curveType - 2);            g = this.getBezierValue(time, i, 2, curveType + 18 - 2);            b = this.getBezierValue(time, i, 3, curveType + 18 * 2 - 2);        }        if (alpha == 1) {          color.r = r;          color.g = g;          color.b = b;        } else {          if (blend == 0) {            let setup = slot.data.color;            color.r = setup.r;            color.g = setup.g;            color.b = setup.b;          }          color.r += (r - color.r) * alpha;          color.g += (g - color.g) * alpha;          color.b += (b - color.b) * alpha;        }      }    };    var AlphaTimeline = class extends CurveTimeline1 {      constructor(frameCount, bezierCount, slotIndex) {        super(frameCount, bezierCount, Property.alpha + "|" + slotIndex);        this.slotIndex = 0;        this.slotIndex = slotIndex;      }      apply(skeleton, lastTime, time, events, alpha, blend, direction) {        let slot = skeleton.slots[this.slotIndex];        if (!slot.bone.active)          return;        let color = slot.color;        if (time < this.frames[0]) {          let setup = slot.data.color;          switch (blend) {            case 0:              color.a = setup.a;              return;            case 1:              color.a += (setup.a - color.a) * alpha;          }          return;        }        let a = this.getCurveValue(time);        if (alpha == 1)          color.a = a;        else {          if (blend == 0)            color.a = slot.data.color.a;          color.a += (a - color.a) * alpha;        }      }    };    var RGBA2Timeline = class extends CurveTimeline {      constructor(frameCount, bezierCount, slotIndex) {        super(frameCount, bezierCount, [          Property.rgb + "|" + slotIndex,          Property.alpha + "|" + slotIndex,          Property.rgb2 + "|" + slotIndex        ]);        this.slotIndex = 0;        this.slotIndex = slotIndex;      }      getFrameEntries() {        return 8;      }      setFrame(frame, time, r, g, b, a, r2, g2, b2) {        frame <<= 3;        this.frames[frame] = time;        this.frames[frame + 1] = r;        this.frames[frame + 2] = g;        this.frames[frame + 3] = b;        this.frames[frame + 4] = a;        this.frames[frame + 5] = r2;        this.frames[frame + 6] = g2;        this.frames[frame + 7] = b2;      }      apply(skeleton, lastTime, time, events, alpha, blend, direction) {        let slot = skeleton.slots[this.slotIndex];        if (!slot.bone.active)          return;        let frames = this.frames;        let light = slot.color, dark = slot.darkColor;        if (time < frames[0]) {          let setupLight = slot.data.color, setupDark = slot.data.darkColor;          switch (blend) {            case 0:              light.setFromColor(setupLight);              dark.r = setupDark.r;              dark.g = setupDark.g;              dark.b = setupDark.b;              return;            case 1:              light.add((setupLight.r - light.r) * alpha, (setupLight.g - light.g) * alpha, (setupLight.b - light.b) * alpha, (setupLight.a - light.a) * alpha);              dark.r += (setupDark.r - dark.r) * alpha;              dark.g += (setupDark.g - dark.g) * alpha;              dark.b += (setupDark.b - dark.b) * alpha;          }          return;        }        let r = 0, g = 0, b = 0, a = 0, r2 = 0, g2 = 0, b2 = 0;        let i = Timeline.search(frames, time, 8);        let curveType = this.curves[i >> 3];        switch (curveType) {          case 0:            let before = frames[i];            r = frames[i + 1];            g = frames[i + 2];            b = frames[i + 3];            a = frames[i + 4];            r2 = frames[i + 5];            g2 = frames[i + 6];            b2 = frames[i + 7];            let t = (time - before) / (frames[i + 8] - before);            r += (frames[i + 8 + 1] - r) * t;            g += (frames[i + 8 + 2] - g) * t;            b += (frames[i + 8 + 3] - b) * t;            a += (frames[i + 8 + 4] - a) * t;            r2 += (frames[i + 8 + 5] - r2) * t;            g2 += (frames[i + 8 + 6] - g2) * t;            b2 += (frames[i + 8 + 7] - b2) * t;            break;          case 1:            r = frames[i + 1];            g = frames[i + 2];            b = frames[i + 3];            a = frames[i + 4];            r2 = frames[i + 5];            g2 = frames[i + 6];            b2 = frames[i + 7];            break;          default:            r = this.getBezierValue(time, i, 1, curveType - 2);            g = this.getBezierValue(time, i, 2, curveType + 18 - 2);            b = this.getBezierValue(time, i, 3, curveType + 18 * 2 - 2);            a = this.getBezierValue(time, i, 4, curveType + 18 * 3 - 2);            r2 = this.getBezierValue(time, i, 5, curveType + 18 * 4 - 2);            g2 = this.getBezierValue(time, i, 6, curveType + 18 * 5 - 2);            b2 = this.getBezierValue(time, i, 7, curveType + 18 * 6 - 2);        }        if (alpha == 1) {          light.set(r, g, b, a);          dark.r = r2;          dark.g = g2;          dark.b = b2;        } else {          if (blend == 0) {            light.setFromColor(slot.data.color);            let setupDark = slot.data.darkColor;            dark.r = setupDark.r;            dark.g = setupDark.g;            dark.b = setupDark.b;          }          light.add((r - light.r) * alpha, (g - light.g) * alpha, (b - light.b) * alpha, (a - light.a) * alpha);          dark.r += (r2 - dark.r) * alpha;          dark.g += (g2 - dark.g) * alpha;          dark.b += (b2 - dark.b) * alpha;        }      }    };    var RGB2Timeline = class extends CurveTimeline {      constructor(frameCount, bezierCount, slotIndex) {        super(frameCount, bezierCount, [          Property.rgb + "|" + slotIndex,          Property.rgb2 + "|" + slotIndex        ]);        this.slotIndex = 0;        this.slotIndex = slotIndex;      }      getFrameEntries() {        return 7;      }      setFrame(frame, time, r, g, b, r2, g2, b2) {        frame *= 7;        this.frames[frame] = time;        this.frames[frame + 1] = r;        this.frames[frame + 2] = g;        this.frames[frame + 3] = b;        this.frames[frame + 4] = r2;        this.frames[frame + 5] = g2;        this.frames[frame + 6] = b2;      }      apply(skeleton, lastTime, time, events, alpha, blend, direction) {        let slot = skeleton.slots[this.slotIndex];        if (!slot.bone.active)          return;        let frames = this.frames;        let light = slot.color, dark = slot.darkColor;        if (time < frames[0]) {          let setupLight = slot.data.color, setupDark = slot.data.darkColor;          switch (blend) {            case 0:              light.r = setupLight.r;              light.g = setupLight.g;              light.b = setupLight.b;              dark.r = setupDark.r;              dark.g = setupDark.g;              dark.b = setupDark.b;              return;            case 1:              light.r += (setupLight.r - light.r) * alpha;              light.g += (setupLight.g - light.g) * alpha;              light.b += (setupLight.b - light.b) * alpha;              dark.r += (setupDark.r - dark.r) * alpha;              dark.g += (setupDark.g - dark.g) * alpha;              dark.b += (setupDark.b - dark.b) * alpha;          }          return;        }        let r = 0, g = 0, b = 0, a = 0, r2 = 0, g2 = 0, b2 = 0;        let i = Timeline.search(frames, time, 7);        let curveType = this.curves[i / 7];        switch (curveType) {          case 0:            let before = frames[i];            r = frames[i + 1];            g = frames[i + 2];            b = frames[i + 3];            r2 = frames[i + 4];            g2 = frames[i + 5];            b2 = frames[i + 6];            let t = (time - before) / (frames[i + 7] - before);            r += (frames[i + 7 + 1] - r) * t;            g += (frames[i + 7 + 2] - g) * t;            b += (frames[i + 7 + 3] - b) * t;            r2 += (frames[i + 7 + 4] - r2) * t;            g2 += (frames[i + 7 + 5] - g2) * t;            b2 += (frames[i + 7 + 6] - b2) * t;            break;          case 1:            r = frames[i + 1];            g = frames[i + 2];            b = frames[i + 3];            r2 = frames[i + 4];            g2 = frames[i + 5];            b2 = frames[i + 6];            break;          default:            r = this.getBezierValue(time, i, 1, curveType - 2);            g = this.getBezierValue(time, i, 2, curveType + 18 - 2);            b = this.getBezierValue(time, i, 3, curveType + 18 * 2 - 2);            r2 = this.getBezierValue(time, i, 4, curveType + 18 * 3 - 2);            g2 = this.getBezierValue(time, i, 5, curveType + 18 * 4 - 2);            b2 = this.getBezierValue(time, i, 6, curveType + 18 * 5 - 2);        }        if (alpha == 1) {          light.r = r;          light.g = g;          light.b = b;          dark.r = r2;          dark.g = g2;          dark.b = b2;        } else {          if (blend == 0) {            let setupLight = slot.data.color, setupDark = slot.data.darkColor;            light.r = setupLight.r;            light.g = setupLight.g;            light.b = setupLight.b;            dark.r = setupDark.r;            dark.g = setupDark.g;            dark.b = setupDark.b;          }          light.r += (r - light.r) * alpha;          light.g += (g - light.g) * alpha;          light.b += (b - light.b) * alpha;          dark.r += (r2 - dark.r) * alpha;          dark.g += (g2 - dark.g) * alpha;          dark.b += (b2 - dark.b) * alpha;        }      }    };    var AttachmentTimeline = class extends Timeline {      constructor(frameCount, slotIndex) {        super(frameCount, [          Property.attachment + "|" + slotIndex        ]);        this.slotIndex = 0;        this.slotIndex = slotIndex;        this.attachmentNames = new Array(frameCount);      }      getFrameCount() {        return this.frames.length;      }      setFrame(frame, time, attachmentName) {        this.frames[frame] = time;        this.attachmentNames[frame] = attachmentName;      }      apply(skeleton, lastTime, time, events, alpha, blend, direction) {        let slot = skeleton.slots[this.slotIndex];        if (!slot.bone.active)          return;        if (direction == 1) {          if (blend == 0)            this.setAttachment(skeleton, slot, slot.data.attachmentName);          return;        }        if (time < this.frames[0]) {          if (blend == 0 || blend == 1)            this.setAttachment(skeleton, slot, slot.data.attachmentName);          return;        }        this.setAttachment(skeleton, slot, this.attachmentNames[Timeline.search1(this.frames, time)]);      }      setAttachment(skeleton, slot, attachmentName) {        slot.setAttachment(!attachmentName ? null : skeleton.getAttachment(this.slotIndex, attachmentName));      }    };    var DeformTimeline = class extends CurveTimeline {      constructor(frameCount, bezierCount, slotIndex, attachment) {        super(frameCount, bezierCount, [          Property.deform + "|" + slotIndex + "|" + attachment.id        ]);        this.slotIndex = 0;        this.attachment = null;        this.vertices = null;        this.slotIndex = slotIndex;        this.attachment = attachment;        this.vertices = new Array(frameCount);      }      getFrameCount() {        return this.frames.length;      }      setFrame(frame, time, vertices) {        this.frames[frame] = time;        this.vertices[frame] = vertices;      }      setBezier(bezier, frame, value, time1, value1, cx1, cy1, cx2, cy2, time2, value2) {        let curves = this.curves;        let i = this.getFrameCount() + bezier * 18;        if (value == 0)          curves[frame] = 2 + i;        let tmpx = (time1 - cx1 * 2 + cx2) * 0.03, tmpy = cy2 * 0.03 - cy1 * 0.06;        let dddx = ((cx1 - cx2) * 3 - time1 + time2) * 6e-3, dddy = (cy1 - cy2 + 0.33333333) * 0.018;        let ddx = tmpx * 2 + dddx, ddy = tmpy * 2 + dddy;        let dx = (cx1 - time1) * 0.3 + tmpx + dddx * 0.16666667, dy = cy1 * 0.3 + tmpy + dddy * 0.16666667;        let x = time1 + dx, y = dy;        for (let n = i + 18; i < n; i += 2) {          curves[i] = x;          curves[i + 1] = y;          dx += ddx;          dy += ddy;          ddx += dddx;          ddy += dddy;          x += dx;          y += dy;        }      }      getCurvePercent(time, frame) {        let curves = this.curves;        let i = curves[frame];        switch (i) {          case 0:            let x2 = this.frames[frame];            return (time - x2) / (this.frames[frame + this.getFrameEntries()] - x2);          case 1:            return 0;        }        i -= 2;        if (curves[i] > time) {          let x2 = this.frames[frame];          return curves[i + 1] * (time - x2) / (curves[i] - x2);        }        let n = i + 18;        for (i += 2; i < n; i += 2) {          if (curves[i] >= time) {            let x2 = curves[i - 2], y2 = curves[i - 1];            return y2 + (time - x2) / (curves[i] - x2) * (curves[i + 1] - y2);          }        }        let x = curves[n - 2], y = curves[n - 1];        return y + (1 - y) * (time - x) / (this.frames[frame + this.getFrameEntries()] - x);      }      apply(skeleton, lastTime, time, firedEvents, alpha, blend, direction) {        let slot = skeleton.slots[this.slotIndex];        if (!slot.bone.active)          return;        let slotAttachment = slot.getAttachment();        if (!(slotAttachment instanceof VertexAttachment) || slotAttachment.deformAttachment != this.attachment)          return;        let deform = slot.deform;        if (deform.length == 0)          blend = 0;        let vertices = this.vertices;        let vertexCount = vertices[0].length;        let frames = this.frames;        if (time < frames[0]) {          let vertexAttachment = slotAttachment;          switch (blend) {            case 0:              deform.length = 0;              return;            case 1:              if (alpha == 1) {                deform.length = 0;                return;              }              deform.length = vertexCount;              if (!vertexAttachment.bones) {                let setupVertices = vertexAttachment.vertices;                for (var i = 0; i < vertexCount; i++)                  deform[i] += (setupVertices[i] - deform[i]) * alpha;              } else {                alpha = 1 - alpha;                for (var i = 0; i < vertexCount; i++)                  deform[i] *= alpha;              }          }          return;        }        deform.length = vertexCount;        if (time >= frames[frames.length - 1]) {          let lastVertices = vertices[frames.length - 1];          if (alpha == 1) {            if (blend == 3) {              let vertexAttachment = slotAttachment;              if (!vertexAttachment.bones) {                let setupVertices = vertexAttachment.vertices;                for (let i2 = 0; i2 < vertexCount; i2++)                  deform[i2] += lastVertices[i2] - setupVertices[i2];              } else {                for (let i2 = 0; i2 < vertexCount; i2++)                  deform[i2] += lastVertices[i2];              }            } else              Utils.arrayCopy(lastVertices, 0, deform, 0, vertexCount);          } else {            switch (blend) {              case 0: {                let vertexAttachment2 = slotAttachment;                if (!vertexAttachment2.bones) {                  let setupVertices = vertexAttachment2.vertices;                  for (let i2 = 0; i2 < vertexCount; i2++) {                    let setup = setupVertices[i2];                    deform[i2] = setup + (lastVertices[i2] - setup) * alpha;                  }                } else {                  for (let i2 = 0; i2 < vertexCount; i2++)                    deform[i2] = lastVertices[i2] * alpha;                }                break;              }              case 1:              case 2:                for (let i2 = 0; i2 < vertexCount; i2++)                  deform[i2] += (lastVertices[i2] - deform[i2]) * alpha;                break;              case 3:                let vertexAttachment = slotAttachment;                if (!vertexAttachment.bones) {                  let setupVertices = vertexAttachment.vertices;                  for (let i2 = 0; i2 < vertexCount; i2++)                    deform[i2] += (lastVertices[i2] - setupVertices[i2]) * alpha;                } else {                  for (let i2 = 0; i2 < vertexCount; i2++)                    deform[i2] += lastVertices[i2] * alpha;                }            }          }          return;        }        let frame = Timeline.search1(frames, time);        let percent = this.getCurvePercent(time, frame);        let prevVertices = vertices[frame];        let nextVertices = vertices[frame + 1];        if (alpha == 1) {          if (blend == 3) {            let vertexAttachment = slotAttachment;            if (!vertexAttachment.bones) {              let setupVertices = vertexAttachment.vertices;              for (let i2 = 0; i2 < vertexCount; i2++) {                let prev = prevVertices[i2];                deform[i2] += prev + (nextVertices[i2] - prev) * percent - setupVertices[i2];              }            } else {              for (let i2 = 0; i2 < vertexCount; i2++) {                let prev = prevVertices[i2];                deform[i2] += prev + (nextVertices[i2] - prev) * percent;              }            }          } else {            for (let i2 = 0; i2 < vertexCount; i2++) {              let prev = prevVertices[i2];              deform[i2] = prev + (nextVertices[i2] - prev) * percent;            }          }        } else {          switch (blend) {            case 0: {              let vertexAttachment2 = slotAttachment;              if (!vertexAttachment2.bones) {                let setupVertices = vertexAttachment2.vertices;                for (let i2 = 0; i2 < vertexCount; i2++) {                  let prev = prevVertices[i2], setup = setupVertices[i2];                  deform[i2] = setup + (prev + (nextVertices[i2] - prev) * percent - setup) * alpha;                }              } else {                for (let i2 = 0; i2 < vertexCount; i2++) {                  let prev = prevVertices[i2];                  deform[i2] = (prev + (nextVertices[i2] - prev) * percent) * alpha;                }              }              break;            }            case 1:            case 2:              for (let i2 = 0; i2 < vertexCount; i2++) {                let prev = prevVertices[i2];                deform[i2] += (prev + (nextVertices[i2] - prev) * percent - deform[i2]) * alpha;              }              break;            case 3:              let vertexAttachment = slotAttachment;              if (!vertexAttachment.bones) {                let setupVertices = vertexAttachment.vertices;                for (let i2 = 0; i2 < vertexCount; i2++) {                  let prev = prevVertices[i2];                  deform[i2] += (prev + (nextVertices[i2] - prev) * percent - setupVertices[i2]) * alpha;                }              } else {                for (let i2 = 0; i2 < vertexCount; i2++) {                  let prev = prevVertices[i2];                  deform[i2] += (prev + (nextVertices[i2] - prev) * percent) * alpha;                }              }          }        }      }    };    var _EventTimeline = class extends Timeline {      constructor(frameCount) {        super(frameCount, _EventTimeline.propertyIds);        this.events = null;        this.events = new Array(frameCount);      }      getFrameCount() {        return this.frames.length;      }      setFrame(frame, event) {        this.frames[frame] = event.time;        this.events[frame] = event;      }      apply(skeleton, lastTime, time, firedEvents, alpha, blend, direction) {        if (!firedEvents)          return;        let frames = this.frames;        let frameCount = this.frames.length;        if (lastTime > time) {          this.apply(skeleton, lastTime, Number.MAX_VALUE, firedEvents, alpha, blend, direction);          lastTime = -1;        } else if (lastTime >= frames[frameCount - 1])          return;        if (time < frames[0])          return;        let i = 0;        if (lastTime < frames[0])          i = 0;        else {          i = Timeline.search1(frames, lastTime) + 1;          let frameTime = frames[i];          while (i > 0) {            if (frames[i - 1] != frameTime)              break;            i--;          }        }        for (; i < frameCount && time >= frames[i]; i++)          firedEvents.push(this.events[i]);      }    };    var EventTimeline = _EventTimeline;    EventTimeline.propertyIds = ["" + Property.event];    var _DrawOrderTimeline = class extends Timeline {      constructor(frameCount) {        super(frameCount, _DrawOrderTimeline.propertyIds);        this.drawOrders = null;        this.drawOrders = new Array(frameCount);      }      getFrameCount() {        return this.frames.length;      }      setFrame(frame, time, drawOrder) {        this.frames[frame] = time;        this.drawOrders[frame] = drawOrder;      }      apply(skeleton, lastTime, time, firedEvents, alpha, blend, direction) {        if (direction == 1) {          if (blend == 0)            Utils.arrayCopy(skeleton.slots, 0, skeleton.drawOrder, 0, skeleton.slots.length);          return;        }        if (time < this.frames[0]) {          if (blend == 0 || blend == 1)            Utils.arrayCopy(skeleton.slots, 0, skeleton.drawOrder, 0, skeleton.slots.length);          return;        }        let drawOrderToSetupIndex = this.drawOrders[Timeline.search1(this.frames, time)];        if (!drawOrderToSetupIndex)          Utils.arrayCopy(skeleton.slots, 0, skeleton.drawOrder, 0, skeleton.slots.length);        else {          let drawOrder = skeleton.drawOrder;          let slots = skeleton.slots;          for (let i = 0, n = drawOrderToSetupIndex.length; i < n; i++)            drawOrder[i] = slots[drawOrderToSetupIndex[i]];        }      }    };    var DrawOrderTimeline = _DrawOrderTimeline;    DrawOrderTimeline.propertyIds = ["" + Property.drawOrder];    var IkConstraintTimeline = class extends CurveTimeline {      constructor(frameCount, bezierCount, ikConstraintIndex) {        super(frameCount, bezierCount, [          Property.ikConstraint + "|" + ikConstraintIndex        ]);        this.ikConstraintIndex = 0;        this.ikConstraintIndex = ikConstraintIndex;      }      getFrameEntries() {        return 6;      }      setFrame(frame, time, mix, softness, bendDirection, compress, stretch) {        frame *= 6;        this.frames[frame] = time;        this.frames[frame + 1] = mix;        this.frames[frame + 2] = softness;        this.frames[frame + 3] = bendDirection;        this.frames[frame + 4] = compress ? 1 : 0;        this.frames[frame + 5] = stretch ? 1 : 0;      }      apply(skeleton, lastTime, time, firedEvents, alpha, blend, direction) {        let constraint = skeleton.ikConstraints[this.ikConstraintIndex];        if (!constraint.active)          return;        let frames = this.frames;        if (time < frames[0]) {          switch (blend) {            case 0:              constraint.mix = constraint.data.mix;              constraint.softness = constraint.data.softness;              constraint.bendDirection = constraint.data.bendDirection;              constraint.compress = constraint.data.compress;              constraint.stretch = constraint.data.stretch;              return;            case 1:              constraint.mix += (constraint.data.mix - constraint.mix) * alpha;              constraint.softness += (constraint.data.softness - constraint.softness) * alpha;              constraint.bendDirection = constraint.data.bendDirection;              constraint.compress = constraint.data.compress;              constraint.stretch = constraint.data.stretch;          }          return;        }        let mix = 0, softness = 0;        let i = Timeline.search(frames, time, 6);        let curveType = this.curves[i / 6];        switch (curveType) {          case 0:            let before = frames[i];            mix = frames[i + 1];            softness = frames[i + 2];            let t = (time - before) / (frames[i + 6] - before);            mix += (frames[i + 6 + 1] - mix) * t;            softness += (frames[i + 6 + 2] - softness) * t;            break;          case 1:            mix = frames[i + 1];            softness = frames[i + 2];            break;          default:            mix = this.getBezierValue(time, i, 1, curveType - 2);            softness = this.getBezierValue(time, i, 2, curveType + 18 - 2);        }        if (blend == 0) {          constraint.mix = constraint.data.mix + (mix - constraint.data.mix) * alpha;          constraint.softness = constraint.data.softness + (softness - constraint.data.softness) * alpha;          if (direction == 1) {            constraint.bendDirection = constraint.data.bendDirection;            constraint.compress = constraint.data.compress;            constraint.stretch = constraint.data.stretch;          } else {            constraint.bendDirection = frames[i + 3];            constraint.compress = frames[i + 4] != 0;            constraint.stretch = frames[i + 5] != 0;          }        } else {          constraint.mix += (mix - constraint.mix) * alpha;          constraint.softness += (softness - constraint.softness) * alpha;          if (direction == 0) {            constraint.bendDirection = frames[i + 3];            constraint.compress = frames[i + 4] != 0;            constraint.stretch = frames[i + 5] != 0;          }        }      }    };    var TransformConstraintTimeline = class extends CurveTimeline {      constructor(frameCount, bezierCount, transformConstraintIndex) {        super(frameCount, bezierCount, [          Property.transformConstraint + "|" + transformConstraintIndex        ]);        this.transformConstraintIndex = 0;        this.transformConstraintIndex = transformConstraintIndex;      }      getFrameEntries() {        return 7;      }      setFrame(frame, time, mixRotate, mixX, mixY, mixScaleX, mixScaleY, mixShearY) {        let frames = this.frames;        frame *= 7;        frames[frame] = time;        frames[frame + 1] = mixRotate;        frames[frame + 2] = mixX;        frames[frame + 3] = mixY;        frames[frame + 4] = mixScaleX;        frames[frame + 5] = mixScaleY;        frames[frame + 6] = mixShearY;      }      apply(skeleton, lastTime, time, firedEvents, alpha, blend, direction) {        let constraint = skeleton.transformConstraints[this.transformConstraintIndex];        if (!constraint.active)          return;        let frames = this.frames;        if (time < frames[0]) {          let data = constraint.data;          switch (blend) {            case 0:              constraint.mixRotate = data.mixRotate;              constraint.mixX = data.mixX;              constraint.mixY = data.mixY;              constraint.mixScaleX = data.mixScaleX;              constraint.mixScaleY = data.mixScaleY;              constraint.mixShearY = data.mixShearY;              return;            case 1:              constraint.mixRotate += (data.mixRotate - constraint.mixRotate) * alpha;              constraint.mixX += (data.mixX - constraint.mixX) * alpha;              constraint.mixY += (data.mixY - constraint.mixY) * alpha;              constraint.mixScaleX += (data.mixScaleX - constraint.mixScaleX) * alpha;              constraint.mixScaleY += (data.mixScaleY - constraint.mixScaleY) * alpha;              constraint.mixShearY += (data.mixShearY - constraint.mixShearY) * alpha;          }          return;        }        let rotate, x, y, scaleX, scaleY, shearY;        let i = Timeline.search(frames, time, 7);        let curveType = this.curves[i / 7];        switch (curveType) {          case 0:            let before = frames[i];            rotate = frames[i + 1];            x = frames[i + 2];            y = frames[i + 3];            scaleX = frames[i + 4];            scaleY = frames[i + 5];            shearY = frames[i + 6];            let t = (time - before) / (frames[i + 7] - before);            rotate += (frames[i + 7 + 1] - rotate) * t;            x += (frames[i + 7 + 2] - x) * t;            y += (frames[i + 7 + 3] - y) * t;            scaleX += (frames[i + 7 + 4] - scaleX) * t;            scaleY += (frames[i + 7 + 5] - scaleY) * t;            shearY += (frames[i + 7 + 6] - shearY) * t;            break;          case 1:            rotate = frames[i + 1];            x = frames[i + 2];            y = frames[i + 3];            scaleX = frames[i + 4];            scaleY = frames[i + 5];            shearY = frames[i + 6];            break;          default:            rotate = this.getBezierValue(time, i, 1, curveType - 2);            x = this.getBezierValue(time, i, 2, curveType + 18 - 2);            y = this.getBezierValue(time, i, 3, curveType + 18 * 2 - 2);            scaleX = this.getBezierValue(time, i, 4, curveType + 18 * 3 - 2);            scaleY = this.getBezierValue(time, i, 5, curveType + 18 * 4 - 2);            shearY = this.getBezierValue(time, i, 6, curveType + 18 * 5 - 2);        }        if (blend == 0) {          let data = constraint.data;          constraint.mixRotate = data.mixRotate + (rotate - data.mixRotate) * alpha;          constraint.mixX = data.mixX + (x - data.mixX) * alpha;          constraint.mixY = data.mixY + (y - data.mixY) * alpha;          constraint.mixScaleX = data.mixScaleX + (scaleX - data.mixScaleX) * alpha;          constraint.mixScaleY = data.mixScaleY + (scaleY - data.mixScaleY) * alpha;          constraint.mixShearY = data.mixShearY + (shearY - data.mixShearY) * alpha;        } else {          constraint.mixRotate += (rotate - constraint.mixRotate) * alpha;          constraint.mixX += (x - constraint.mixX) * alpha;          constraint.mixY += (y - constraint.mixY) * alpha;          constraint.mixScaleX += (scaleX - constraint.mixScaleX) * alpha;          constraint.mixScaleY += (scaleY - constraint.mixScaleY) * alpha;          constraint.mixShearY += (shearY - constraint.mixShearY) * alpha;        }      }    };    var PathConstraintPositionTimeline = class extends CurveTimeline1 {      constructor(frameCount, bezierCount, pathConstraintIndex) {        super(frameCount, bezierCount, Property.pathConstraintPosition + "|" + pathConstraintIndex);        this.pathConstraintIndex = 0;        this.pathConstraintIndex = pathConstraintIndex;      }      apply(skeleton, lastTime, time, firedEvents, alpha, blend, direction) {        let constraint = skeleton.pathConstraints[this.pathConstraintIndex];        if (!constraint.active)          return;        let frames = this.frames;        if (time < frames[0]) {          switch (blend) {            case 0:              constraint.position = constraint.data.position;              return;            case 1:              constraint.position += (constraint.data.position - constraint.position) * alpha;          }          return;        }        let position = this.getCurveValue(time);        if (blend == 0)          constraint.position = constraint.data.position + (position - constraint.data.position) * alpha;        else          constraint.position += (position - constraint.position) * alpha;      }    };    var PathConstraintSpacingTimeline = class extends CurveTimeline1 {      constructor(frameCount, bezierCount, pathConstraintIndex) {        super(frameCount, bezierCount, Property.pathConstraintSpacing + "|" + pathConstraintIndex);        this.pathConstraintIndex = 0;        this.pathConstraintIndex = pathConstraintIndex;      }      apply(skeleton, lastTime, time, firedEvents, alpha, blend, direction) {        let constraint = skeleton.pathConstraints[this.pathConstraintIndex];        if (!constraint.active)          return;        let frames = this.frames;        if (time < frames[0]) {          switch (blend) {            case 0:              constraint.spacing = constraint.data.spacing;              return;            case 1:              constraint.spacing += (constraint.data.spacing - constraint.spacing) * alpha;          }          return;        }        let spacing = this.getCurveValue(time);        if (blend == 0)          constraint.spacing = constraint.data.spacing + (spacing - constraint.data.spacing) * alpha;        else          constraint.spacing += (spacing - constraint.spacing) * alpha;      }    };    var PathConstraintMixTimeline = class extends CurveTimeline {      constructor(frameCount, bezierCount, pathConstraintIndex) {        super(frameCount, bezierCount, [          Property.pathConstraintMix + "|" + pathConstraintIndex        ]);        this.pathConstraintIndex = 0;        this.pathConstraintIndex = pathConstraintIndex;      }      getFrameEntries() {        return 4;      }      setFrame(frame, time, mixRotate, mixX, mixY) {        let frames = this.frames;        frame <<= 2;        frames[frame] = time;        frames[frame + 1] = mixRotate;        frames[frame + 2] = mixX;        frames[frame + 3] = mixY;      }      apply(skeleton, lastTime, time, firedEvents, alpha, blend, direction) {        let constraint = skeleton.pathConstraints[this.pathConstraintIndex];        if (!constraint.active)          return;        let frames = this.frames;        if (time < frames[0]) {          switch (blend) {            case 0:              constraint.mixRotate = constraint.data.mixRotate;              constraint.mixX = constraint.data.mixX;              constraint.mixY = constraint.data.mixY;              return;            case 1:              constraint.mixRotate += (constraint.data.mixRotate - constraint.mixRotate) * alpha;              constraint.mixX += (constraint.data.mixX - constraint.mixX) * alpha;              constraint.mixY += (constraint.data.mixY - constraint.mixY) * alpha;          }          return;        }        let rotate, x, y;        let i = Timeline.search(frames, time, 4);        let curveType = this.curves[i >> 2];        switch (curveType) {          case 0:            let before = frames[i];            rotate = frames[i + 1];            x = frames[i + 2];            y = frames[i + 3];            let t = (time - before) / (frames[i + 4] - before);            rotate += (frames[i + 4 + 1] - rotate) * t;            x += (frames[i + 4 + 2] - x) * t;            y += (frames[i + 4 + 3] - y) * t;            break;          case 1:            rotate = frames[i + 1];            x = frames[i + 2];            y = frames[i + 3];            break;          default:            rotate = this.getBezierValue(time, i, 1, curveType - 2);            x = this.getBezierValue(time, i, 2, curveType + 18 - 2);            y = this.getBezierValue(time, i, 3, curveType + 18 * 2 - 2);        }        if (blend == 0) {          let data = constraint.data;          constraint.mixRotate = data.mixRotate + (rotate - data.mixRotate) * alpha;          constraint.mixX = data.mixX + (x - data.mixX) * alpha;          constraint.mixY = data.mixY + (y - data.mixY) * alpha;        } else {          constraint.mixRotate += (rotate - constraint.mixRotate) * alpha;          constraint.mixX += (x - constraint.mixX) * alpha;          constraint.mixY += (y - constraint.mixY) * alpha;        }      }    };      // spine-core/src/AnimationState.ts    var AnimationState = class {      constructor(data) {        this.data = null;        this.tracks = new Array();        this.timeScale = 1;        this.unkeyedState = 0;        this.events = new Array();        this.listeners = new Array();        this.queue = new EventQueue(this);        this.propertyIDs = new StringSet();        this.animationsChanged = false;        this.trackEntryPool = new Pool(() => new TrackEntry());        this.data = data;      }      static emptyAnimation() {        if (!_emptyAnimation)          _emptyAnimation = new Animation("<empty>", [], 0);        return _emptyAnimation;      }      update(delta) {        delta *= this.timeScale;        let tracks = this.tracks;        for (let i = 0, n = tracks.length; i < n; i++) {          let current = tracks[i];          if (!current)            continue;          current.animationLast = current.nextAnimationLast;          current.trackLast = current.nextTrackLast;          let currentDelta = delta * current.timeScale;          if (current.delay > 0) {            current.delay -= currentDelta;            if (current.delay > 0)              continue;            currentDelta = -current.delay;            current.delay = 0;          }          let next = current.next;          if (next) {            let nextTime = current.trackLast - next.delay;            if (nextTime >= 0) {              next.delay = 0;              next.trackTime += current.timeScale == 0 ? 0 : (nextTime / current.timeScale + delta) * next.timeScale;              current.trackTime += currentDelta;              this.setCurrent(i, next, true);              while (next.mixingFrom) {                next.mixTime += delta;                next = next.mixingFrom;              }              continue;            }          } else if (current.trackLast >= current.trackEnd && !current.mixingFrom) {            tracks[i] = null;            this.queue.end(current);            this.clearNext(current);            continue;          }          if (current.mixingFrom && this.updateMixingFrom(current, delta)) {            let from = current.mixingFrom;            current.mixingFrom = null;            if (from)              from.mixingTo = null;            while (from) {              this.queue.end(from);              from = from.mixingFrom;            }          }          current.trackTime += currentDelta;        }        this.queue.drain();      }      updateMixingFrom(to, delta) {        let from = to.mixingFrom;        if (!from)          return true;        let finished = this.updateMixingFrom(from, delta);        from.animationLast = from.nextAnimationLast;        from.trackLast = from.nextTrackLast;        if (to.mixTime > 0 && to.mixTime >= to.mixDuration) {          if (from.totalAlpha == 0 || to.mixDuration == 0) {            to.mixingFrom = from.mixingFrom;            if (from.mixingFrom)              from.mixingFrom.mixingTo = to;            to.interruptAlpha = from.interruptAlpha;            this.queue.end(from);          }          return finished;        }        from.trackTime += delta * from.timeScale;        to.mixTime += delta;        return false;      }      apply(skeleton) {        if (!skeleton)          throw new Error("skeleton cannot be null.");        if (this.animationsChanged)          this._animationsChanged();        let events = this.events;        let tracks = this.tracks;        let applied = false;        for (let i2 = 0, n2 = tracks.length; i2 < n2; i2++) {          let current = tracks[i2];          if (!current || current.delay > 0)            continue;          applied = true;          let blend = i2 == 0 ? MixBlend.first : current.mixBlend;          let mix = current.alpha;          if (current.mixingFrom)            mix *= this.applyMixingFrom(current, skeleton, blend);          else if (current.trackTime >= current.trackEnd && !current.next)            mix = 0;          let animationLast = current.animationLast, animationTime = current.getAnimationTime(), applyTime = animationTime;          let applyEvents = events;          if (current.reverse) {            applyTime = current.animation.duration - applyTime;            applyEvents = null;          }          let timelines = current.animation.timelines;          let timelineCount = timelines.length;          if (i2 == 0 && mix == 1 || blend == MixBlend.add) {            for (let ii = 0; ii < timelineCount; ii++) {              Utils.webkit602BugfixHelper(mix, blend);              var timeline = timelines[ii];              if (timeline instanceof AttachmentTimeline)                this.applyAttachmentTimeline(timeline, skeleton, applyTime, blend, true);              else                timeline.apply(skeleton, animationLast, applyTime, applyEvents, mix, blend, MixDirection.mixIn);            }          } else {            let timelineMode = current.timelineMode;            let firstFrame = current.timelinesRotation.length != timelineCount << 1;            if (firstFrame)              current.timelinesRotation.length = timelineCount << 1;            for (let ii = 0; ii < timelineCount; ii++) {              let timeline2 = timelines[ii];              let timelineBlend = timelineMode[ii] == SUBSEQUENT ? blend : MixBlend.setup;              if (timeline2 instanceof RotateTimeline) {                this.applyRotateTimeline(timeline2, skeleton, applyTime, mix, timelineBlend, current.timelinesRotation, ii << 1, firstFrame);              } else if (timeline2 instanceof AttachmentTimeline) {                this.applyAttachmentTimeline(timeline2, skeleton, applyTime, blend, true);              } else {                Utils.webkit602BugfixHelper(mix, blend);                timeline2.apply(skeleton, animationLast, applyTime, applyEvents, mix, timelineBlend, MixDirection.mixIn);              }            }          }          this.queueEvents(current, animationTime);          events.length = 0;          current.nextAnimationLast = animationTime;          current.nextTrackLast = current.trackTime;        }        var setupState = this.unkeyedState + SETUP;        var slots = skeleton.slots;        for (var i = 0, n = skeleton.slots.length; i < n; i++) {          var slot = slots[i];          if (slot.attachmentState == setupState) {            var attachmentName = slot.data.attachmentName;            slot.setAttachment(!attachmentName ? null : skeleton.getAttachment(slot.data.index, attachmentName));          }        }        this.unkeyedState += 2;        this.queue.drain();        return applied;      }      applyMixingFrom(to, skeleton, blend) {        let from = to.mixingFrom;        if (from.mixingFrom)          this.applyMixingFrom(from, skeleton, blend);        let mix = 0;        if (to.mixDuration == 0) {          mix = 1;          if (blend == MixBlend.first)            blend = MixBlend.setup;        } else {          mix = to.mixTime / to.mixDuration;          if (mix > 1)            mix = 1;          if (blend != MixBlend.first)            blend = from.mixBlend;        }        let attachments = mix < from.attachmentThreshold, drawOrder = mix < from.drawOrderThreshold;        let timelines = from.animation.timelines;        let timelineCount = timelines.length;        let alphaHold = from.alpha * to.interruptAlpha, alphaMix = alphaHold * (1 - mix);        let animationLast = from.animationLast, animationTime = from.getAnimationTime(), applyTime = animationTime;        let events = null;        if (from.reverse)          applyTime = from.animation.duration - applyTime;        else if (mix < from.eventThreshold)          events = this.events;        if (blend == MixBlend.add) {          for (let i = 0; i < timelineCount; i++)            timelines[i].apply(skeleton, animationLast, applyTime, events, alphaMix, blend, MixDirection.mixOut);        } else {          let timelineMode = from.timelineMode;          let timelineHoldMix = from.timelineHoldMix;          let firstFrame = from.timelinesRotation.length != timelineCount << 1;          if (firstFrame)            from.timelinesRotation.length = timelineCount << 1;          from.totalAlpha = 0;          for (let i = 0; i < timelineCount; i++) {            let timeline = timelines[i];            let direction = MixDirection.mixOut;            let timelineBlend;            let alpha = 0;            switch (timelineMode[i]) {              case SUBSEQUENT:                if (!drawOrder && timeline instanceof DrawOrderTimeline)                  continue;                timelineBlend = blend;                alpha = alphaMix;                break;              case FIRST:                timelineBlend = MixBlend.setup;                alpha = alphaMix;                break;              case HOLD_SUBSEQUENT:                timelineBlend = blend;                alpha = alphaHold;                break;              case HOLD_FIRST:                timelineBlend = MixBlend.setup;                alpha = alphaHold;                break;              default:                timelineBlend = MixBlend.setup;                let holdMix = timelineHoldMix[i];                alpha = alphaHold * Math.max(0, 1 - holdMix.mixTime / holdMix.mixDuration);                break;            }            from.totalAlpha += alpha;            if (timeline instanceof RotateTimeline)              this.applyRotateTimeline(timeline, skeleton, applyTime, alpha, timelineBlend, from.timelinesRotation, i << 1, firstFrame);            else if (timeline instanceof AttachmentTimeline)              this.applyAttachmentTimeline(timeline, skeleton, applyTime, timelineBlend, attachments);            else {              Utils.webkit602BugfixHelper(alpha, blend);              if (drawOrder && timeline instanceof DrawOrderTimeline && timelineBlend == MixBlend.setup)                direction = MixDirection.mixIn;              timeline.apply(skeleton, animationLast, applyTime, events, alpha, timelineBlend, direction);            }          }        }        if (to.mixDuration > 0)          this.queueEvents(from, animationTime);        this.events.length = 0;        from.nextAnimationLast = animationTime;        from.nextTrackLast = from.trackTime;        return mix;      }      applyAttachmentTimeline(timeline, skeleton, time, blend, attachments) {        var slot = skeleton.slots[timeline.slotIndex];        if (!slot.bone.active)          return;        if (time < timeline.frames[0]) {          if (blend == MixBlend.setup || blend == MixBlend.first)            this.setAttachment(skeleton, slot, slot.data.attachmentName, attachments);        } else          this.setAttachment(skeleton, slot, timeline.attachmentNames[Timeline.search1(timeline.frames, time)], attachments);        if (slot.attachmentState <= this.unkeyedState)          slot.attachmentState = this.unkeyedState + SETUP;      }      setAttachment(skeleton, slot, attachmentName, attachments) {        slot.setAttachment(!attachmentName ? null : skeleton.getAttachment(slot.data.index, attachmentName));        if (attachments)          slot.attachmentState = this.unkeyedState + CURRENT;      }      applyRotateTimeline(timeline, skeleton, time, alpha, blend, timelinesRotation, i, firstFrame) {        if (firstFrame)          timelinesRotation[i] = 0;        if (alpha == 1) {          timeline.apply(skeleton, 0, time, null, 1, blend, MixDirection.mixIn);          return;        }        let bone = skeleton.bones[timeline.boneIndex];        if (!bone.active)          return;        let frames = timeline.frames;        let r1 = 0, r2 = 0;        if (time < frames[0]) {          switch (blend) {            case MixBlend.setup:              bone.rotation = bone.data.rotation;            default:              return;            case MixBlend.first:              r1 = bone.rotation;              r2 = bone.data.rotation;          }        } else {          r1 = blend == MixBlend.setup ? bone.data.rotation : bone.rotation;          r2 = bone.data.rotation + timeline.getCurveValue(time);        }        let total = 0, diff = r2 - r1;        diff -= (16384 - (16384.499999999996 - diff / 360 | 0)) * 360;        if (diff == 0) {          total = timelinesRotation[i];        } else {          let lastTotal = 0, lastDiff = 0;          if (firstFrame) {            lastTotal = 0;            lastDiff = diff;          } else {            lastTotal = timelinesRotation[i];            lastDiff = timelinesRotation[i + 1];          }          let current = diff > 0, dir = lastTotal >= 0;          if (MathUtils.signum(lastDiff) != MathUtils.signum(diff) && Math.abs(lastDiff) <= 90) {            if (Math.abs(lastTotal) > 180)              lastTotal += 360 * MathUtils.signum(lastTotal);            dir = current;          }          total = diff + lastTotal - lastTotal % 360;          if (dir != current)            total += 360 * MathUtils.signum(lastTotal);          timelinesRotation[i] = total;        }        timelinesRotation[i + 1] = diff;        bone.rotation = r1 + total * alpha;      }      queueEvents(entry, animationTime) {        let animationStart = entry.animationStart, animationEnd = entry.animationEnd;        let duration = animationEnd - animationStart;        let trackLastWrapped = entry.trackLast % duration;        let events = this.events;        let i = 0, n = events.length;        for (; i < n; i++) {          let event = events[i];          if (event.time < trackLastWrapped)            break;          if (event.time > animationEnd)            continue;          this.queue.event(entry, event);        }        let complete = false;        if (entry.loop)          complete = duration == 0 || trackLastWrapped > entry.trackTime % duration;        else          complete = animationTime >= animationEnd && entry.animationLast < animationEnd;        if (complete)          this.queue.complete(entry);        for (; i < n; i++) {          let event = events[i];          if (event.time < animationStart)            continue;          this.queue.event(entry, event);        }      }      clearTracks() {        let oldDrainDisabled = this.queue.drainDisabled;        this.queue.drainDisabled = true;        for (let i = 0, n = this.tracks.length; i < n; i++)          this.clearTrack(i);        this.tracks.length = 0;        this.queue.drainDisabled = oldDrainDisabled;        this.queue.drain();      }      clearTrack(trackIndex) {        if (trackIndex >= this.tracks.length)          return;        let current = this.tracks[trackIndex];        if (!current)          return;        this.queue.end(current);        this.clearNext(current);        let entry = current;        while (true) {          let from = entry.mixingFrom;          if (!from)            break;          this.queue.end(from);          entry.mixingFrom = null;          entry.mixingTo = null;          entry = from;        }        this.tracks[current.trackIndex] = null;        this.queue.drain();      }      setCurrent(index, current, interrupt) {        let from = this.expandToIndex(index);        this.tracks[index] = current;        current.previous = null;        if (from) {          if (interrupt)            this.queue.interrupt(from);          current.mixingFrom = from;          from.mixingTo = current;          current.mixTime = 0;          if (from.mixingFrom && from.mixDuration > 0)            current.interruptAlpha *= Math.min(1, from.mixTime / from.mixDuration);          from.timelinesRotation.length = 0;        }        this.queue.start(current);      }      setAnimation(trackIndex, animationName, loop = false) {        let animation = this.data.skeletonData.findAnimation(animationName);        if (!animation)          throw new Error("Animation not found: " + animationName);        return this.setAnimationWith(trackIndex, animation, loop);      }      setAnimationWith(trackIndex, animation, loop = false) {        if (!animation)          throw new Error("animation cannot be null.");        let interrupt = true;        let current = this.expandToIndex(trackIndex);        if (current) {          if (current.nextTrackLast == -1) {            this.tracks[trackIndex] = current.mixingFrom;            this.queue.interrupt(current);            this.queue.end(current);            this.clearNext(current);            current = current.mixingFrom;            interrupt = false;          } else            this.clearNext(current);        }        let entry = this.trackEntry(trackIndex, animation, loop, current);        this.setCurrent(trackIndex, entry, interrupt);        this.queue.drain();        return entry;      }      addAnimation(trackIndex, animationName, loop = false, delay = 0) {        let animation = this.data.skeletonData.findAnimation(animationName);        if (!animation)          throw new Error("Animation not found: " + animationName);        return this.addAnimationWith(trackIndex, animation, loop, delay);      }      addAnimationWith(trackIndex, animation, loop = false, delay = 0) {        if (!animation)          throw new Error("animation cannot be null.");        let last = this.expandToIndex(trackIndex);        if (last) {          while (last.next)            last = last.next;        }        let entry = this.trackEntry(trackIndex, animation, loop, last);        if (!last) {          this.setCurrent(trackIndex, entry, true);          this.queue.drain();        } else {          last.next = entry;          entry.previous = last;          if (delay <= 0)            delay += last.getTrackComplete() - entry.mixDuration;        }        entry.delay = delay;        return entry;      }      setEmptyAnimation(trackIndex, mixDuration = 0) {        let entry = this.setAnimationWith(trackIndex, AnimationState.emptyAnimation(), false);        entry.mixDuration = mixDuration;        entry.trackEnd = mixDuration;        return entry;      }      addEmptyAnimation(trackIndex, mixDuration = 0, delay = 0) {        let entry = this.addAnimationWith(trackIndex, AnimationState.emptyAnimation(), false, delay);        if (delay <= 0)          entry.delay += entry.mixDuration - mixDuration;        entry.mixDuration = mixDuration;        entry.trackEnd = mixDuration;        return entry;      }      setEmptyAnimations(mixDuration = 0) {        let oldDrainDisabled = this.queue.drainDisabled;        this.queue.drainDisabled = true;        for (let i = 0, n = this.tracks.length; i < n; i++) {          let current = this.tracks[i];          if (current)            this.setEmptyAnimation(current.trackIndex, mixDuration);        }        this.queue.drainDisabled = oldDrainDisabled;        this.queue.drain();      }      expandToIndex(index) {        if (index < this.tracks.length)          return this.tracks[index];        Utils.ensureArrayCapacity(this.tracks, index + 1, null);        this.tracks.length = index + 1;        return null;      }      trackEntry(trackIndex, animation, loop, last) {        let entry = this.trackEntryPool.obtain();        entry.reset();        entry.trackIndex = trackIndex;        entry.animation = animation;        entry.loop = loop;        entry.holdPrevious = false;        entry.eventThreshold = 0;        entry.attachmentThreshold = 0;        entry.drawOrderThreshold = 0;        entry.animationStart = 0;        entry.animationEnd = animation.duration;        entry.animationLast = -1;        entry.nextAnimationLast = -1;        entry.delay = 0;        entry.trackTime = 0;        entry.trackLast = -1;        entry.nextTrackLast = -1;        entry.trackEnd = Number.MAX_VALUE;        entry.timeScale = 1;        entry.alpha = 1;        entry.interruptAlpha = 1;        entry.mixTime = 0;        entry.mixDuration = !last ? 0 : this.data.getMix(last.animation, animation);        entry.mixBlend = MixBlend.replace;        return entry;      }      clearNext(entry) {        let next = entry.next;        while (next) {          this.queue.dispose(next);          next = next.next;        }        entry.next = null;      }      _animationsChanged() {        this.animationsChanged = false;        this.propertyIDs.clear();        let tracks = this.tracks;        for (let i = 0, n = tracks.length; i < n; i++) {          let entry = tracks[i];          if (!entry)            continue;          while (entry.mixingFrom)            entry = entry.mixingFrom;          do {            if (!entry.mixingTo || entry.mixBlend != MixBlend.add)              this.computeHold(entry);            entry = entry.mixingTo;          } while (entry);        }      }      computeHold(entry) {        let to = entry.mixingTo;        let timelines = entry.animation.timelines;        let timelinesCount = entry.animation.timelines.length;        let timelineMode = entry.timelineMode;        timelineMode.length = timelinesCount;        let timelineHoldMix = entry.timelineHoldMix;        timelineHoldMix.length = 0;        let propertyIDs = this.propertyIDs;        if (to && to.holdPrevious) {          for (let i = 0; i < timelinesCount; i++)            timelineMode[i] = propertyIDs.addAll(timelines[i].getPropertyIds()) ? HOLD_FIRST : HOLD_SUBSEQUENT;          return;        }        outer:          for (let i = 0; i < timelinesCount; i++) {            let timeline = timelines[i];            let ids = timeline.getPropertyIds();            if (!propertyIDs.addAll(ids))              timelineMode[i] = SUBSEQUENT;            else if (!to || timeline instanceof AttachmentTimeline || timeline instanceof DrawOrderTimeline || timeline instanceof EventTimeline || !to.animation.hasTimeline(ids)) {              timelineMode[i] = FIRST;            } else {              for (let next = to.mixingTo; next; next = next.mixingTo) {                if (next.animation.hasTimeline(ids))                  continue;                if (entry.mixDuration > 0) {                  timelineMode[i] = HOLD_MIX;                  timelineHoldMix[i] = next;                  continue outer;                }                break;              }              timelineMode[i] = HOLD_FIRST;            }          }      }      getCurrent(trackIndex) {        if (trackIndex >= this.tracks.length)          return null;        return this.tracks[trackIndex];      }      addListener(listener) {        if (!listener)          throw new Error("listener cannot be null.");        this.listeners.push(listener);      }      removeListener(listener) {        let index = this.listeners.indexOf(listener);        if (index >= 0)          this.listeners.splice(index, 1);      }      clearListeners() {        this.listeners.length = 0;      }      clearListenerNotifications() {        this.queue.clear();      }    };    var TrackEntry = class {      constructor() {        this.animation = null;        this.previous = null;        this.next = null;        this.mixingFrom = null;        this.mixingTo = null;        this.listener = null;        this.trackIndex = 0;        this.loop = false;        this.holdPrevious = false;        this.reverse = false;        this.eventThreshold = 0;        this.attachmentThreshold = 0;        this.drawOrderThreshold = 0;        this.animationStart = 0;        this.animationEnd = 0;        this.animationLast = 0;        this.nextAnimationLast = 0;        this.delay = 0;        this.trackTime = 0;        this.trackLast = 0;        this.nextTrackLast = 0;        this.trackEnd = 0;        this.timeScale = 0;        this.alpha = 0;        this.mixTime = 0;        this.mixDuration = 0;        this.interruptAlpha = 0;        this.totalAlpha = 0;        this.mixBlend = MixBlend.replace;        this.timelineMode = new Array();        this.timelineHoldMix = new Array();        this.timelinesRotation = new Array();      }      reset() {        this.next = null;        this.previous = null;        this.mixingFrom = null;        this.mixingTo = null;        this.animation = null;        this.listener = null;        this.timelineMode.length = 0;        this.timelineHoldMix.length = 0;        this.timelinesRotation.length = 0;      }      getAnimationTime() {        if (this.loop) {          let duration = this.animationEnd - this.animationStart;          if (duration == 0)            return this.animationStart;          return this.trackTime % duration + this.animationStart;        }        return Math.min(this.trackTime + this.animationStart, this.animationEnd);      }      setAnimationLast(animationLast) {        this.animationLast = animationLast;        this.nextAnimationLast = animationLast;      }      isComplete() {        return this.trackTime >= this.animationEnd - this.animationStart;      }      resetRotationDirections() {        this.timelinesRotation.length = 0;      }      getTrackComplete() {        let duration = this.animationEnd - this.animationStart;        if (duration != 0) {          if (this.loop)            return duration * (1 + (this.trackTime / duration | 0));          if (this.trackTime < duration)            return duration;        }        return this.trackTime;      }    };    var EventQueue = class {      constructor(animState) {        this.objects = [];        this.drainDisabled = false;        this.animState = null;        this.animState = animState;      }      start(entry) {        this.objects.push(EventType.start);        this.objects.push(entry);        this.animState.animationsChanged = true;      }      interrupt(entry) {        this.objects.push(EventType.interrupt);        this.objects.push(entry);      }      end(entry) {        this.objects.push(EventType.end);        this.objects.push(entry);        this.animState.animationsChanged = true;      }      dispose(entry) {        this.objects.push(EventType.dispose);        this.objects.push(entry);      }      complete(entry) {        this.objects.push(EventType.complete);        this.objects.push(entry);      }      event(entry, event) {        this.objects.push(EventType.event);        this.objects.push(entry);        this.objects.push(event);      }      drain() {        if (this.drainDisabled)          return;        this.drainDisabled = true;        let objects = this.objects;        let listeners = this.animState.listeners;        for (let i = 0; i < objects.length; i += 2) {          let type = objects[i];          let entry = objects[i + 1];          switch (type) {            case EventType.start:              if (entry.listener && entry.listener.start)                entry.listener.start(entry);              for (let ii = 0; ii < listeners.length; ii++)                if (listeners[ii].start)                  listeners[ii].start(entry);              break;            case EventType.interrupt:              if (entry.listener && entry.listener.interrupt)                entry.listener.interrupt(entry);              for (let ii = 0; ii < listeners.length; ii++)                if (listeners[ii].interrupt)                  listeners[ii].interrupt(entry);              break;            case EventType.end:              if (entry.listener && entry.listener.end)                entry.listener.end(entry);              for (let ii = 0; ii < listeners.length; ii++)                if (listeners[ii].end)                  listeners[ii].end(entry);            case EventType.dispose:              if (entry.listener && entry.listener.dispose)                entry.listener.dispose(entry);              for (let ii = 0; ii < listeners.length; ii++)                if (listeners[ii].dispose)                  listeners[ii].dispose(entry);              this.animState.trackEntryPool.free(entry);              break;            case EventType.complete:              if (entry.listener && entry.listener.complete)                entry.listener.complete(entry);              for (let ii = 0; ii < listeners.length; ii++)                if (listeners[ii].complete)                  listeners[ii].complete(entry);              break;            case EventType.event:              let event = objects[i++ + 2];              if (entry.listener && entry.listener.event)                entry.listener.event(entry, event);              for (let ii = 0; ii < listeners.length; ii++)                if (listeners[ii].event)                  listeners[ii].event(entry, event);              break;          }        }        this.clear();        this.drainDisabled = false;      }      clear() {        this.objects.length = 0;      }    };    var EventType;    (function(EventType2) {      EventType2[EventType2["start"] = 0] = "start";      EventType2[EventType2["interrupt"] = 1] = "interrupt";      EventType2[EventType2["end"] = 2] = "end";      EventType2[EventType2["dispose"] = 3] = "dispose";      EventType2[EventType2["complete"] = 4] = "complete";      EventType2[EventType2["event"] = 5] = "event";    })(EventType || (EventType = {}));    var AnimationStateAdapter = class {      start(entry) {      }      interrupt(entry) {      }      end(entry) {      }      dispose(entry) {      }      complete(entry) {      }      event(entry, event) {      }    };    var SUBSEQUENT = 0;    var FIRST = 1;    var HOLD_SUBSEQUENT = 2;    var HOLD_FIRST = 3;    var HOLD_MIX = 4;    var SETUP = 1;    var CURRENT = 2;    var _emptyAnimation = null;      // spine-core/src/AnimationStateData.ts    var AnimationStateData = class {      constructor(skeletonData) {        this.skeletonData = null;        this.animationToMixTime = {};        this.defaultMix = 0;        if (!skeletonData)          throw new Error("skeletonData cannot be null.");        this.skeletonData = skeletonData;      }      setMix(fromName, toName, duration) {        let from = this.skeletonData.findAnimation(fromName);        if (!from)          throw new Error("Animation not found: " + fromName);        let to = this.skeletonData.findAnimation(toName);        if (!to)          throw new Error("Animation not found: " + toName);        this.setMixWith(from, to, duration);      }      setMixWith(from, to, duration) {        if (!from)          throw new Error("from cannot be null.");        if (!to)          throw new Error("to cannot be null.");        let key = from.name + "." + to.name;        this.animationToMixTime[key] = duration;      }      getMix(from, to) {        let key = from.name + "." + to.name;        let value = this.animationToMixTime[key];        return value === void 0 ? this.defaultMix : value;      }    };      // spine-core/src/attachments/BoundingBoxAttachment.ts    var BoundingBoxAttachment = class extends VertexAttachment {      constructor(name) {        super(name);        this.color = new Color(1, 1, 1, 1);      }      copy() {        let copy = new BoundingBoxAttachment(this.name);        this.copyTo(copy);        copy.color.setFromColor(this.color);        return copy;      }    };      // spine-core/src/attachments/ClippingAttachment.ts    var ClippingAttachment = class extends VertexAttachment {      constructor(name) {        super(name);        this.endSlot = null;        this.color = new Color(0.2275, 0.2275, 0.8078, 1);      }      copy() {        let copy = new ClippingAttachment(this.name);        this.copyTo(copy);        copy.endSlot = this.endSlot;        copy.color.setFromColor(this.color);        return copy;      }    };      // spine-core/src/Texture.ts    var Texture = class {      constructor(image) {        this._image = image;      }      getImage() {        return this._image;      }    };    var TextureFilter;    (function(TextureFilter2) {      TextureFilter2[TextureFilter2["Nearest"] = 9728] = "Nearest";      TextureFilter2[TextureFilter2["Linear"] = 9729] = "Linear";      TextureFilter2[TextureFilter2["MipMap"] = 9987] = "MipMap";      TextureFilter2[TextureFilter2["MipMapNearestNearest"] = 9984] = "MipMapNearestNearest";      TextureFilter2[TextureFilter2["MipMapLinearNearest"] = 9985] = "MipMapLinearNearest";      TextureFilter2[TextureFilter2["MipMapNearestLinear"] = 9986] = "MipMapNearestLinear";      TextureFilter2[TextureFilter2["MipMapLinearLinear"] = 9987] = "MipMapLinearLinear";    })(TextureFilter || (TextureFilter = {}));    var TextureWrap;    (function(TextureWrap3) {      TextureWrap3[TextureWrap3["MirroredRepeat"] = 33648] = "MirroredRepeat";      TextureWrap3[TextureWrap3["ClampToEdge"] = 33071] = "ClampToEdge";      TextureWrap3[TextureWrap3["Repeat"] = 10497] = "Repeat";    })(TextureWrap || (TextureWrap = {}));    var TextureRegion = class {      constructor() {        this.u = 0;        this.v = 0;        this.u2 = 0;        this.v2 = 0;        this.width = 0;        this.height = 0;        this.degrees = 0;        this.offsetX = 0;        this.offsetY = 0;        this.originalWidth = 0;        this.originalHeight = 0;      }    };    var FakeTexture = class extends Texture {      setFilters(minFilter, magFilter) {      }      setWraps(uWrap, vWrap) {      }      dispose() {      }    };      // spine-core/src/TextureAtlas.ts    var TextureAtlas = class {      constructor(atlasText) {        this.pages = new Array();        this.regions = new Array();        let reader = new TextureAtlasReader(atlasText);        let entry = new Array(4);        let page = null;        let region = null;        let pageFields = {};        pageFields["size"] = () => {          page.width = parseInt(entry[1]);          page.height = parseInt(entry[2]);        };        pageFields["format"] = () => {        };        pageFields["filter"] = () => {          page.minFilter = Utils.enumValue(TextureFilter, entry[1]);          page.magFilter = Utils.enumValue(TextureFilter, entry[2]);        };        pageFields["repeat"] = () => {          if (entry[1].indexOf("x") != -1)            page.uWrap = TextureWrap.Repeat;          if (entry[1].indexOf("y") != -1)            page.vWrap = TextureWrap.Repeat;        };        pageFields["pma"] = () => {          page.pma = entry[1] == "true";        };        var regionFields = {};        regionFields["xy"] = () => {          region.x = parseInt(entry[1]);          region.y = parseInt(entry[2]);        };        regionFields["size"] = () => {          region.width = parseInt(entry[1]);          region.height = parseInt(entry[2]);        };        regionFields["bounds"] = () => {          region.x = parseInt(entry[1]);          region.y = parseInt(entry[2]);          region.width = parseInt(entry[3]);          region.height = parseInt(entry[4]);        };        regionFields["offset"] = () => {          region.offsetX = parseInt(entry[1]);          region.offsetY = parseInt(entry[2]);        };        regionFields["orig"] = () => {          region.originalWidth = parseInt(entry[1]);          region.originalHeight = parseInt(entry[2]);        };        regionFields["offsets"] = () => {          region.offsetX = parseInt(entry[1]);          region.offsetY = parseInt(entry[2]);          region.originalWidth = parseInt(entry[3]);          region.originalHeight = parseInt(entry[4]);        };        regionFields["rotate"] = () => {          let value = entry[1];          if (value == "true")            region.degrees = 90;          else if (value != "false")            region.degrees = parseInt(value);        };        regionFields["index"] = () => {          region.index = parseInt(entry[1]);        };        let line = reader.readLine();        while (line && line.trim().length == 0)          line = reader.readLine();        while (true) {          if (!line || line.trim().length == 0)            break;          if (reader.readEntry(entry, line) == 0)            break;          line = reader.readLine();        }        let names = null;        let values = null;        while (true) {          if (line === null)            break;          if (line.trim().length == 0) {            page = null;            line = reader.readLine();          } else if (!page) {            page = new TextureAtlasPage();            page.name = line.trim();            while (true) {              if (reader.readEntry(entry, line = reader.readLine()) == 0)                break;              let field = pageFields[entry[0]];              if (field)                field();            }            this.pages.push(page);          } else {            region = new TextureAtlasRegion();            region.page = page;            region.name = line;            while (true) {              let count = reader.readEntry(entry, line = reader.readLine());              if (count == 0)                break;              let field = regionFields[entry[0]];              if (field)                field();              else {                if (!names) {                  names = [];                  values = [];                }                names.push(entry[0]);                let entryValues = [];                for (let i = 0; i < count; i++)                  entryValues.push(parseInt(entry[i + 1]));                values.push(entryValues);              }            }            if (region.originalWidth == 0 && region.originalHeight == 0) {              region.originalWidth = region.width;              region.originalHeight = region.height;            }            if (names && names.length > 0) {              region.names = names;              region.values = values;              names = null;              values = null;            }            region.u = region.x / page.width;            region.v = region.y / page.height;            if (region.degrees == 90) {              region.u2 = (region.x + region.height) / page.width;              region.v2 = (region.y + region.width) / page.height;            } else {              region.u2 = (region.x + region.width) / page.width;              region.v2 = (region.y + region.height) / page.height;            }            this.regions.push(region);          }        }      }      findRegion(name) {        for (let i = 0; i < this.regions.length; i++) {          if (this.regions[i].name == name) {            return this.regions[i];          }        }        return null;      }      setTextures(assetManager, pathPrefix = "") {        for (let page of this.pages)          page.setTexture(assetManager.get(pathPrefix + page.name));      }      dispose() {        for (let i = 0; i < this.pages.length; i++) {          this.pages[i].texture.dispose();        }      }    };    var TextureAtlasReader = class {      constructor(text) {        this.lines = null;        this.index = 0;        this.lines = text.split(/\r\n|\r|\n/);      }      readLine() {        if (this.index >= this.lines.length)          return null;        return this.lines[this.index++];      }      readEntry(entry, line) {        if (!line)          return 0;        line = line.trim();        if (line.length == 0)          return 0;        let colon = line.indexOf(":");        if (colon == -1)          return 0;        entry[0] = line.substr(0, colon).trim();        for (let i = 1, lastMatch = colon + 1; ; i++) {          let comma = line.indexOf(",", lastMatch);          if (comma == -1) {            entry[i] = line.substr(lastMatch).trim();            return i;          }          entry[i] = line.substr(lastMatch, comma - lastMatch).trim();          lastMatch = comma + 1;          if (i == 4)            return 4;        }      }    };    var TextureAtlasPage = class {      constructor() {        this.name = null;        this.minFilter = TextureFilter.Nearest;        this.magFilter = TextureFilter.Nearest;        this.uWrap = TextureWrap.ClampToEdge;        this.vWrap = TextureWrap.ClampToEdge;        this.texture = null;        this.width = 0;        this.height = 0;        this.pma = false;      }      setTexture(texture) {        this.texture = texture;        texture.setFilters(this.minFilter, this.magFilter);        texture.setWraps(this.uWrap, this.vWrap);      }    };    var TextureAtlasRegion = class extends TextureRegion {      constructor() {        super(...arguments);        this.page = null;        this.name = null;        this.x = 0;        this.y = 0;        this.offsetX = 0;        this.offsetY = 0;        this.originalWidth = 0;        this.originalHeight = 0;        this.index = 0;        this.degrees = 0;        this.names = null;        this.values = null;      }    };      // spine-core/src/attachments/MeshAttachment.ts    var MeshAttachment = class extends VertexAttachment {      constructor(name) {        super(name);        this.region = null;        this.path = null;        this.regionUVs = null;        this.uvs = null;        this.triangles = null;        this.color = new Color(1, 1, 1, 1);        this.width = 0;        this.height = 0;        this.hullLength = 0;        this.edges = null;        this.parentMesh = null;        this.tempColor = new Color(0, 0, 0, 0);      }      updateUVs() {        let regionUVs = this.regionUVs;        if (!this.uvs || this.uvs.length != regionUVs.length)          this.uvs = Utils.newFloatArray(regionUVs.length);        let uvs = this.uvs;        let n = this.uvs.length;        let u = this.region.u, v = this.region.v, width = 0, height = 0;        if (this.region instanceof TextureAtlasRegion) {          let region = this.region, image = region.page.texture.getImage();          let textureWidth = image.width, textureHeight = image.height;          switch (region.degrees) {            case 90:              u -= (region.originalHeight - region.offsetY - region.height) / textureWidth;              v -= (region.originalWidth - region.offsetX - region.width) / textureHeight;              width = region.originalHeight / textureWidth;              height = region.originalWidth / textureHeight;              for (let i = 0; i < n; i += 2) {                uvs[i] = u + regionUVs[i + 1] * width;                uvs[i + 1] = v + (1 - regionUVs[i]) * height;              }              return;            case 180:              u -= (region.originalWidth - region.offsetX - region.width) / textureWidth;              v -= region.offsetY / textureHeight;              width = region.originalWidth / textureWidth;              height = region.originalHeight / textureHeight;              for (let i = 0; i < n; i += 2) {                uvs[i] = u + (1 - regionUVs[i]) * width;                uvs[i + 1] = v + (1 - regionUVs[i + 1]) * height;              }              return;            case 270:              u -= region.offsetY / textureWidth;              v -= region.offsetX / textureHeight;              width = region.originalHeight / textureWidth;              height = region.originalWidth / textureHeight;              for (let i = 0; i < n; i += 2) {                uvs[i] = u + (1 - regionUVs[i + 1]) * width;                uvs[i + 1] = v + regionUVs[i] * height;              }              return;          }          u -= region.offsetX / textureWidth;          v -= (region.originalHeight - region.offsetY - region.height) / textureHeight;          width = region.originalWidth / textureWidth;          height = region.originalHeight / textureHeight;        } else if (!this.region) {          u = v = 0;          width = height = 1;        } else {          width = this.region.u2 - u;          height = this.region.v2 - v;        }        for (let i = 0; i < n; i += 2) {          uvs[i] = u + regionUVs[i] * width;          uvs[i + 1] = v + regionUVs[i + 1] * height;        }      }      getParentMesh() {        return this.parentMesh;      }      setParentMesh(parentMesh) {        this.parentMesh = parentMesh;        if (parentMesh) {          this.bones = parentMesh.bones;          this.vertices = parentMesh.vertices;          this.worldVerticesLength = parentMesh.worldVerticesLength;          this.regionUVs = parentMesh.regionUVs;          this.triangles = parentMesh.triangles;          this.hullLength = parentMesh.hullLength;          this.worldVerticesLength = parentMesh.worldVerticesLength;        }      }      copy() {        if (this.parentMesh)          return this.newLinkedMesh();        let copy = new MeshAttachment(this.name);        copy.region = this.region;        copy.path = this.path;        copy.color.setFromColor(this.color);        this.copyTo(copy);        copy.regionUVs = new Array(this.regionUVs.length);        Utils.arrayCopy(this.regionUVs, 0, copy.regionUVs, 0, this.regionUVs.length);        copy.uvs = new Array(this.uvs.length);        Utils.arrayCopy(this.uvs, 0, copy.uvs, 0, this.uvs.length);        copy.triangles = new Array(this.triangles.length);        Utils.arrayCopy(this.triangles, 0, copy.triangles, 0, this.triangles.length);        copy.hullLength = this.hullLength;        if (this.edges) {          copy.edges = new Array(this.edges.length);          Utils.arrayCopy(this.edges, 0, copy.edges, 0, this.edges.length);        }        copy.width = this.width;        copy.height = this.height;        return copy;      }      newLinkedMesh() {        let copy = new MeshAttachment(this.name);        copy.region = this.region;        copy.path = this.path;        copy.color.setFromColor(this.color);        copy.deformAttachment = this.deformAttachment;        copy.setParentMesh(this.parentMesh ? this.parentMesh : this);        copy.updateUVs();        return copy;      }    };      // spine-core/src/attachments/PathAttachment.ts    var PathAttachment = class extends VertexAttachment {      constructor(name) {        super(name);        this.lengths = null;        this.closed = false;        this.constantSpeed = false;        this.color = new Color(1, 1, 1, 1);      }      copy() {        let copy = new PathAttachment(this.name);        this.copyTo(copy);        copy.lengths = new Array(this.lengths.length);        Utils.arrayCopy(this.lengths, 0, copy.lengths, 0, this.lengths.length);        copy.closed = closed;        copy.constantSpeed = this.constantSpeed;        copy.color.setFromColor(this.color);        return copy;      }    };      // spine-core/src/attachments/PointAttachment.ts    var PointAttachment = class extends VertexAttachment {      constructor(name) {        super(name);        this.x = 0;        this.y = 0;        this.rotation = 0;        this.color = new Color(0.38, 0.94, 0, 1);      }      computeWorldPosition(bone, point) {        point.x = this.x * bone.a + this.y * bone.b + bone.worldX;        point.y = this.x * bone.c + this.y * bone.d + bone.worldY;        return point;      }      computeWorldRotation(bone) {        let cos = MathUtils.cosDeg(this.rotation), sin = MathUtils.sinDeg(this.rotation);        let x = cos * bone.a + sin * bone.b;        let y = cos * bone.c + sin * bone.d;        return Math.atan2(y, x) * MathUtils.radDeg;      }      copy() {        let copy = new PointAttachment(this.name);        copy.x = this.x;        copy.y = this.y;        copy.rotation = this.rotation;        copy.color.setFromColor(this.color);        return copy;      }    };      // spine-core/src/attachments/RegionAttachment.ts    var _RegionAttachment = class extends Attachment {      constructor(name) {        super(name);        this.x = 0;        this.y = 0;        this.scaleX = 1;        this.scaleY = 1;        this.rotation = 0;        this.width = 0;        this.height = 0;        this.color = new Color(1, 1, 1, 1);        this.path = null;        this.rendererObject = null;        this.region = null;        this.offset = Utils.newFloatArray(8);        this.uvs = Utils.newFloatArray(8);        this.tempColor = new Color(1, 1, 1, 1);      }      updateOffset() {        let region = this.region;        let regionScaleX = this.width / this.region.originalWidth * this.scaleX;        let regionScaleY = this.height / this.region.originalHeight * this.scaleY;        let localX = -this.width / 2 * this.scaleX + this.region.offsetX * regionScaleX;        let localY = -this.height / 2 * this.scaleY + this.region.offsetY * regionScaleY;        let localX2 = localX + this.region.width * regionScaleX;        let localY2 = localY + this.region.height * regionScaleY;        let radians = this.rotation * Math.PI / 180;        let cos = Math.cos(radians);        let sin = Math.sin(radians);        let x = this.x, y = this.y;        let localXCos = localX * cos + x;        let localXSin = localX * sin;        let localYCos = localY * cos + y;        let localYSin = localY * sin;        let localX2Cos = localX2 * cos + x;        let localX2Sin = localX2 * sin;        let localY2Cos = localY2 * cos + y;        let localY2Sin = localY2 * sin;        let offset = this.offset;        offset[0] = localXCos - localYSin;        offset[1] = localYCos + localXSin;        offset[2] = localXCos - localY2Sin;        offset[3] = localY2Cos + localXSin;        offset[4] = localX2Cos - localY2Sin;        offset[5] = localY2Cos + localX2Sin;        offset[6] = localX2Cos - localYSin;        offset[7] = localYCos + localX2Sin;      }      setRegion(region) {        this.region = region;        let uvs = this.uvs;        if (region.degrees == 90) {          uvs[2] = region.u;          uvs[3] = region.v2;          uvs[4] = region.u;          uvs[5] = region.v;          uvs[6] = region.u2;          uvs[7] = region.v;          uvs[0] = region.u2;          uvs[1] = region.v2;        } else {          uvs[0] = region.u;          uvs[1] = region.v2;          uvs[2] = region.u;          uvs[3] = region.v;          uvs[4] = region.u2;          uvs[5] = region.v;          uvs[6] = region.u2;          uvs[7] = region.v2;        }      }      computeWorldVertices(bone, worldVertices, offset, stride) {        let vertexOffset = this.offset;        let x = bone.worldX, y = bone.worldY;        let a = bone.a, b = bone.b, c = bone.c, d = bone.d;        let offsetX = 0, offsetY = 0;        offsetX = vertexOffset[0];        offsetY = vertexOffset[1];        worldVertices[offset] = offsetX * a + offsetY * b + x;        worldVertices[offset + 1] = offsetX * c + offsetY * d + y;        offset += stride;        offsetX = vertexOffset[2];        offsetY = vertexOffset[3];        worldVertices[offset] = offsetX * a + offsetY * b + x;        worldVertices[offset + 1] = offsetX * c + offsetY * d + y;        offset += stride;        offsetX = vertexOffset[4];        offsetY = vertexOffset[5];        worldVertices[offset] = offsetX * a + offsetY * b + x;        worldVertices[offset + 1] = offsetX * c + offsetY * d + y;        offset += stride;        offsetX = vertexOffset[6];        offsetY = vertexOffset[7];        worldVertices[offset] = offsetX * a + offsetY * b + x;        worldVertices[offset + 1] = offsetX * c + offsetY * d + y;      }      copy() {        let copy = new _RegionAttachment(this.name);        copy.region = this.region;        copy.rendererObject = this.rendererObject;        copy.path = this.path;        copy.x = this.x;        copy.y = this.y;        copy.scaleX = this.scaleX;        copy.scaleY = this.scaleY;        copy.rotation = this.rotation;        copy.width = this.width;        copy.height = this.height;        Utils.arrayCopy(this.uvs, 0, copy.uvs, 0, 8);        Utils.arrayCopy(this.offset, 0, copy.offset, 0, 8);        copy.color.setFromColor(this.color);        return copy;      }    };    var RegionAttachment = _RegionAttachment;    RegionAttachment.X1 = 0;    RegionAttachment.Y1 = 1;    RegionAttachment.C1R = 2;    RegionAttachment.C1G = 3;    RegionAttachment.C1B = 4;    RegionAttachment.C1A = 5;    RegionAttachment.U1 = 6;    RegionAttachment.V1 = 7;    RegionAttachment.X2 = 8;    RegionAttachment.Y2 = 9;    RegionAttachment.C2R = 10;    RegionAttachment.C2G = 11;    RegionAttachment.C2B = 12;    RegionAttachment.C2A = 13;    RegionAttachment.U2 = 14;    RegionAttachment.V2 = 15;    RegionAttachment.X3 = 16;    RegionAttachment.Y3 = 17;    RegionAttachment.C3R = 18;    RegionAttachment.C3G = 19;    RegionAttachment.C3B = 20;    RegionAttachment.C3A = 21;    RegionAttachment.U3 = 22;    RegionAttachment.V3 = 23;    RegionAttachment.X4 = 24;    RegionAttachment.Y4 = 25;    RegionAttachment.C4R = 26;    RegionAttachment.C4G = 27;    RegionAttachment.C4B = 28;    RegionAttachment.C4A = 29;    RegionAttachment.U4 = 30;    RegionAttachment.V4 = 31;      // spine-core/src/AtlasAttachmentLoader.ts    var AtlasAttachmentLoader = class {      constructor(atlas) {        this.atlas = null;        this.atlas = atlas;      }      newRegionAttachment(skin, name, path) {        let region = this.atlas.findRegion(path);        if (!region)          throw new Error("Region not found in atlas: " + path + " (region attachment: " + name + ")");        region.renderObject = region;        let attachment = new RegionAttachment(name);        attachment.setRegion(region);        return attachment;      }      newMeshAttachment(skin, name, path) {        let region = this.atlas.findRegion(path);        if (!region)          throw new Error("Region not found in atlas: " + path + " (mesh attachment: " + name + ")");        region.renderObject = region;        let attachment = new MeshAttachment(name);        attachment.region = region;        return attachment;      }      newBoundingBoxAttachment(skin, name) {        return new BoundingBoxAttachment(name);      }      newPathAttachment(skin, name) {        return new PathAttachment(name);      }      newPointAttachment(skin, name) {        return new PointAttachment(name);      }      newClippingAttachment(skin, name) {        return new ClippingAttachment(name);      }    };      // spine-core/src/BoneData.ts    var BoneData = class {      constructor(index, name, parent) {        this.index = 0;        this.name = null;        this.parent = null;        this.length = 0;        this.x = 0;        this.y = 0;        this.rotation = 0;        this.scaleX = 1;        this.scaleY = 1;        this.shearX = 0;        this.shearY = 0;        this.transformMode = TransformMode.Normal;        this.skinRequired = false;        this.color = new Color();        if (index < 0)          throw new Error("index must be >= 0.");        if (!name)          throw new Error("name cannot be null.");        this.index = index;        this.name = name;        this.parent = parent;      }    };    var TransformMode;    (function(TransformMode2) {      TransformMode2[TransformMode2["Normal"] = 0] = "Normal";      TransformMode2[TransformMode2["OnlyTranslation"] = 1] = "OnlyTranslation";      TransformMode2[TransformMode2["NoRotationOrReflection"] = 2] = "NoRotationOrReflection";      TransformMode2[TransformMode2["NoScale"] = 3] = "NoScale";      TransformMode2[TransformMode2["NoScaleOrReflection"] = 4] = "NoScaleOrReflection";    })(TransformMode || (TransformMode = {}));      // spine-core/src/Bone.ts    var Bone = class {      constructor(data, skeleton, parent) {        this.data = null;        this.skeleton = null;        this.parent = null;        this.children = new Array();        this.x = 0;        this.y = 0;        this.rotation = 0;        this.scaleX = 0;        this.scaleY = 0;        this.shearX = 0;        this.shearY = 0;        this.ax = 0;        this.ay = 0;        this.arotation = 0;        this.ascaleX = 0;        this.ascaleY = 0;        this.ashearX = 0;        this.ashearY = 0;        this.a = 0;        this.b = 0;        this.c = 0;        this.d = 0;        this.worldY = 0;        this.worldX = 0;        this.sorted = false;        this.active = false;        if (!data)          throw new Error("data cannot be null.");        if (!skeleton)          throw new Error("skeleton cannot be null.");        this.data = data;        this.skeleton = skeleton;        this.parent = parent;        this.setToSetupPose();      }      isActive() {        return this.active;      }      update() {        this.updateWorldTransformWith(this.ax, this.ay, this.arotation, this.ascaleX, this.ascaleY, this.ashearX, this.ashearY);      }      updateWorldTransform() {        this.updateWorldTransformWith(this.x, this.y, this.rotation, this.scaleX, this.scaleY, this.shearX, this.shearY);      }      updateWorldTransformWith(x, y, rotation, scaleX, scaleY, shearX, shearY) {        this.ax = x;        this.ay = y;        this.arotation = rotation;        this.ascaleX = scaleX;        this.ascaleY = scaleY;        this.ashearX = shearX;        this.ashearY = shearY;        let parent = this.parent;        if (!parent) {          let skeleton = this.skeleton;          let rotationY = rotation + 90 + shearY;          let sx = skeleton.scaleX;          let sy = skeleton.scaleY;          this.a = MathUtils.cosDeg(rotation + shearX) * scaleX * sx;          this.b = MathUtils.cosDeg(rotationY) * scaleY * sx;          this.c = MathUtils.sinDeg(rotation + shearX) * scaleX * sy;          this.d = MathUtils.sinDeg(rotationY) * scaleY * sy;          this.worldX = x * sx + skeleton.x;          this.worldY = y * sy + skeleton.y;          return;        }        let pa = parent.a, pb = parent.b, pc = parent.c, pd = parent.d;        this.worldX = pa * x + pb * y + parent.worldX;        this.worldY = pc * x + pd * y + parent.worldY;        switch (this.data.transformMode) {          case TransformMode.Normal: {            let rotationY = rotation + 90 + shearY;            let la = MathUtils.cosDeg(rotation + shearX) * scaleX;            let lb = MathUtils.cosDeg(rotationY) * scaleY;            let lc = MathUtils.sinDeg(rotation + shearX) * scaleX;            let ld = MathUtils.sinDeg(rotationY) * scaleY;            this.a = pa * la + pb * lc;            this.b = pa * lb + pb * ld;            this.c = pc * la + pd * lc;            this.d = pc * lb + pd * ld;            return;          }          case TransformMode.OnlyTranslation: {            let rotationY = rotation + 90 + shearY;            this.a = MathUtils.cosDeg(rotation + shearX) * scaleX;            this.b = MathUtils.cosDeg(rotationY) * scaleY;            this.c = MathUtils.sinDeg(rotation + shearX) * scaleX;            this.d = MathUtils.sinDeg(rotationY) * scaleY;            break;          }          case TransformMode.NoRotationOrReflection: {            let s = pa * pa + pc * pc;            let prx = 0;            if (s > 1e-4) {              s = Math.abs(pa * pd - pb * pc) / s;              pa /= this.skeleton.scaleX;              pc /= this.skeleton.scaleY;              pb = pc * s;              pd = pa * s;              prx = Math.atan2(pc, pa) * MathUtils.radDeg;            } else {              pa = 0;              pc = 0;              prx = 90 - Math.atan2(pd, pb) * MathUtils.radDeg;            }            let rx = rotation + shearX - prx;            let ry = rotation + shearY - prx + 90;            let la = MathUtils.cosDeg(rx) * scaleX;            let lb = MathUtils.cosDeg(ry) * scaleY;            let lc = MathUtils.sinDeg(rx) * scaleX;            let ld = MathUtils.sinDeg(ry) * scaleY;            this.a = pa * la - pb * lc;            this.b = pa * lb - pb * ld;            this.c = pc * la + pd * lc;            this.d = pc * lb + pd * ld;            break;          }          case TransformMode.NoScale:          case TransformMode.NoScaleOrReflection: {            let cos = MathUtils.cosDeg(rotation);            let sin = MathUtils.sinDeg(rotation);            let za = (pa * cos + pb * sin) / this.skeleton.scaleX;            let zc = (pc * cos + pd * sin) / this.skeleton.scaleY;            let s = Math.sqrt(za * za + zc * zc);            if (s > 1e-5)              s = 1 / s;            za *= s;            zc *= s;            s = Math.sqrt(za * za + zc * zc);            if (this.data.transformMode == TransformMode.NoScale && pa * pd - pb * pc < 0 != (this.skeleton.scaleX < 0 != this.skeleton.scaleY < 0))              s = -s;            let r = Math.PI / 2 + Math.atan2(zc, za);            let zb = Math.cos(r) * s;            let zd = Math.sin(r) * s;            let la = MathUtils.cosDeg(shearX) * scaleX;            let lb = MathUtils.cosDeg(90 + shearY) * scaleY;            let lc = MathUtils.sinDeg(shearX) * scaleX;            let ld = MathUtils.sinDeg(90 + shearY) * scaleY;            this.a = za * la + zb * lc;            this.b = za * lb + zb * ld;            this.c = zc * la + zd * lc;            this.d = zc * lb + zd * ld;            break;          }        }        this.a *= this.skeleton.scaleX;        this.b *= this.skeleton.scaleX;        this.c *= this.skeleton.scaleY;        this.d *= this.skeleton.scaleY;      }      setToSetupPose() {        let data = this.data;        this.x = data.x;        this.y = data.y;        this.rotation = data.rotation;        this.scaleX = data.scaleX;        this.scaleY = data.scaleY;        this.shearX = data.shearX;        this.shearY = data.shearY;      }      getWorldRotationX() {        return Math.atan2(this.c, this.a) * MathUtils.radDeg;      }      getWorldRotationY() {        return Math.atan2(this.d, this.b) * MathUtils.radDeg;      }      getWorldScaleX() {        return Math.sqrt(this.a * this.a + this.c * this.c);      }      getWorldScaleY() {        return Math.sqrt(this.b * this.b + this.d * this.d);      }      updateAppliedTransform() {        let parent = this.parent;        if (!parent) {          this.ax = this.worldX - this.skeleton.x;          this.ay = this.worldY - this.skeleton.y;          this.arotation = Math.atan2(this.c, this.a) * MathUtils.radDeg;          this.ascaleX = Math.sqrt(this.a * this.a + this.c * this.c);          this.ascaleY = Math.sqrt(this.b * this.b + this.d * this.d);          this.ashearX = 0;          this.ashearY = Math.atan2(this.a * this.b + this.c * this.d, this.a * this.d - this.b * this.c) * MathUtils.radDeg;          return;        }        let pa = parent.a, pb = parent.b, pc = parent.c, pd = parent.d;        let pid = 1 / (pa * pd - pb * pc);        let dx = this.worldX - parent.worldX, dy = this.worldY - parent.worldY;        this.ax = dx * pd * pid - dy * pb * pid;        this.ay = dy * pa * pid - dx * pc * pid;        let ia = pid * pd;        let id = pid * pa;        let ib = pid * pb;        let ic = pid * pc;        let ra = ia * this.a - ib * this.c;        let rb = ia * this.b - ib * this.d;        let rc = id * this.c - ic * this.a;        let rd = id * this.d - ic * this.b;        this.ashearX = 0;        this.ascaleX = Math.sqrt(ra * ra + rc * rc);        if (this.ascaleX > 1e-4) {          let det = ra * rd - rb * rc;          this.ascaleY = det / this.ascaleX;          this.ashearY = Math.atan2(ra * rb + rc * rd, det) * MathUtils.radDeg;          this.arotation = Math.atan2(rc, ra) * MathUtils.radDeg;        } else {          this.ascaleX = 0;          this.ascaleY = Math.sqrt(rb * rb + rd * rd);          this.ashearY = 0;          this.arotation = 90 - Math.atan2(rd, rb) * MathUtils.radDeg;        }      }      worldToLocal(world) {        let invDet = 1 / (this.a * this.d - this.b * this.c);        let x = world.x - this.worldX, y = world.y - this.worldY;        world.x = x * this.d * invDet - y * this.b * invDet;        world.y = y * this.a * invDet - x * this.c * invDet;        return world;      }      localToWorld(local) {        let x = local.x, y = local.y;        local.x = x * this.a + y * this.b + this.worldX;        local.y = x * this.c + y * this.d + this.worldY;        return local;      }      worldToLocalRotation(worldRotation) {        let sin = MathUtils.sinDeg(worldRotation), cos = MathUtils.cosDeg(worldRotation);        return Math.atan2(this.a * sin - this.c * cos, this.d * cos - this.b * sin) * MathUtils.radDeg + this.rotation - this.shearX;      }      localToWorldRotation(localRotation) {        localRotation -= this.rotation - this.shearX;        let sin = MathUtils.sinDeg(localRotation), cos = MathUtils.cosDeg(localRotation);        return Math.atan2(cos * this.c + sin * this.d, cos * this.a + sin * this.b) * MathUtils.radDeg;      }      rotateWorld(degrees) {        let a = this.a, b = this.b, c = this.c, d = this.d;        let cos = MathUtils.cosDeg(degrees), sin = MathUtils.sinDeg(degrees);        this.a = cos * a - sin * c;        this.b = cos * b - sin * d;        this.c = sin * a + cos * c;        this.d = sin * b + cos * d;      }    };      // spine-core/src/ConstraintData.ts    var ConstraintData = class {      constructor(name, order, skinRequired) {        this.name = name;        this.order = order;        this.skinRequired = skinRequired;      }    };      // spine-core/src/AssetManagerBase.ts    var AssetManagerBase = class {      constructor(textureLoader, pathPrefix = "", downloader = null) {        this.pathPrefix = null;        this.assets = {};        this.errors = {};        this.toLoad = 0;        this.loaded = 0;        this.textureLoader = textureLoader;        this.pathPrefix = pathPrefix;        this.downloader = downloader || new Downloader();      }      start(path) {        this.toLoad++;        return this.pathPrefix + path;      }      success(callback, path, asset) {        this.toLoad--;        this.loaded++;        this.assets[path] = asset;        if (callback)          callback(path, asset);      }      error(callback, path, message) {        this.toLoad--;        this.loaded++;        this.errors[path] = message;        if (callback)          callback(path, message);      }      loadAll() {        let promise = new Promise((resolve, reject) => {          let check = () => {            if (this.isLoadingComplete()) {              if (this.hasErrors())                reject(this.errors);              else                resolve(this);              return;            }            requestAnimationFrame(check);          };          requestAnimationFrame(check);        });        return promise;      }      setRawDataURI(path, data) {        this.downloader.rawDataUris[this.pathPrefix + path] = data;      }      loadBinary(path, success = null, error = null) {        path = this.start(path);        this.downloader.downloadBinary(path, (data) => {          this.success(success, path, data);        }, (status, responseText) => {          this.error(error, path, `Couldn't load binary ${path}: status ${status}, ${responseText}`);        });      }      loadText(path, success = null, error = null) {        path = this.start(path);        this.downloader.downloadText(path, (data) => {          this.success(success, path, data);        }, (status, responseText) => {          this.error(error, path, `Couldn't load text ${path}: status ${status}, ${responseText}`);        });      }      loadJson(path, success = null, error = null) {        path = this.start(path);        this.downloader.downloadJson(path, (data) => {          this.success(success, path, data);        }, (status, responseText) => {          this.error(error, path, `Couldn't load JSON ${path}: status ${status}, ${responseText}`);        });      }      loadTexture(path, success = null, error = null) {        path = this.start(path);        let isBrowser = !!(typeof window !== "undefined" && typeof navigator !== "undefined" && window.document);        let isWebWorker = !isBrowser;        if (isWebWorker) {          fetch(path, { mode: "cors" }).then((response) => {            if (response.ok)              return response.blob();            this.error(error, path, `Couldn't load image: ${path}`);            return null;          }).then((blob) => {            return blob ? createImageBitmap(blob, { premultiplyAlpha: "none", colorSpaceConversion: "none" }) : null;          }).then((bitmap) => {            if (bitmap)              this.success(success, path, this.textureLoader(bitmap));          });        } else {          let image = new Image();          image.crossOrigin = "anonymous";          image.onload = () => {            this.success(success, path, this.textureLoader(image));          };          image.onerror = () => {            this.error(error, path, `Couldn't load image: ${path}`);          };          if (this.downloader.rawDataUris[path])            path = this.downloader.rawDataUris[path];          image.src = path;        }      }      loadTextureAtlas(path, success = null, error = null, fileAlias = null) {        let index = path.lastIndexOf("/");        let parent = index >= 0 ? path.substring(0, index + 1) : "";        path = this.start(path);        this.downloader.downloadText(path, (atlasText) => {          try {            let atlas = new TextureAtlas(atlasText);            let toLoad = atlas.pages.length, abort = false;            for (let page of atlas.pages) {              this.loadTexture(fileAlias == null ? parent + page.name : fileAlias[page.name], (imagePath, texture) => {                if (!abort) {                  page.setTexture(texture);                  if (--toLoad == 0)                    this.success(success, path, atlas);                }              }, (imagePath, message) => {                if (!abort)                  this.error(error, path, `Couldn't load texture atlas ${path} page image: ${imagePath}`);                abort = true;              });            }          } catch (e) {            this.error(error, path, `Couldn't parse texture atlas ${path}: ${e.message}`);          }        }, (status, responseText) => {          this.error(error, path, `Couldn't load texture atlas ${path}: status ${status}, ${responseText}`);        });      }      get(path) {        return this.assets[this.pathPrefix + path];      }      require(path) {        path = this.pathPrefix + path;        let asset = this.assets[path];        if (asset)          return asset;        let error = this.errors[path];        throw Error("Asset not found: " + path + (error ? "\n" + error : ""));      }      remove(path) {        path = this.pathPrefix + path;        let asset = this.assets[path];        if (asset.dispose)          asset.dispose();        delete this.assets[path];        return asset;      }      removeAll() {        for (let key in this.assets) {          let asset = this.assets[key];          if (asset.dispose)            asset.dispose();        }        this.assets = {};      }      isLoadingComplete() {        return this.toLoad == 0;      }      getToLoad() {        return this.toLoad;      }      getLoaded() {        return this.loaded;      }      dispose() {        this.removeAll();      }      hasErrors() {        return Object.keys(this.errors).length > 0;      }      getErrors() {        return this.errors;      }    };    var Downloader = class {      constructor() {        this.callbacks = {};        this.rawDataUris = {};      }      dataUriToString(dataUri) {        if (!dataUri.startsWith("data:")) {          throw new Error("Not a data URI.");        }        let base64Idx = dataUri.indexOf("base64,");        if (base64Idx != -1) {          base64Idx += "base64,".length;          return atob(dataUri.substr(base64Idx));        } else {          return dataUri.substr(dataUri.indexOf(",") + 1);        }      }      base64ToUint8Array(base64) {        var binary_string = window.atob(base64);        var len = binary_string.length;        var bytes = new Uint8Array(len);        for (var i = 0; i < len; i++) {          bytes[i] = binary_string.charCodeAt(i);        }        return bytes;      }      dataUriToUint8Array(dataUri) {        if (!dataUri.startsWith("data:")) {          throw new Error("Not a data URI.");        }        let base64Idx = dataUri.indexOf("base64,");        if (base64Idx == -1)          throw new Error("Not a binary data URI.");        base64Idx += "base64,".length;        return this.base64ToUint8Array(dataUri.substr(base64Idx));      }      downloadText(url, success, error) {        if (this.start(url, success, error))          return;        if (this.rawDataUris[url]) {          try {            let dataUri = this.rawDataUris[url];            this.finish(url, 200, this.dataUriToString(dataUri));          } catch (e) {            this.finish(url, 400, JSON.stringify(e));          }          return;        }        let request = new XMLHttpRequest();        request.overrideMimeType("text/html");        request.open("GET", url, true);        let done = () => {          this.finish(url, request.status, request.responseText);        };        request.onload = done;        request.onerror = done;        request.send();      }      downloadJson(url, success, error) {        this.downloadText(url, (data) => {          success(JSON.parse(data));        }, error);      }      downloadBinary(url, success, error) {        if (this.start(url, success, error))          return;        if (this.rawDataUris[url]) {          try {            let dataUri = this.rawDataUris[url];            this.finish(url, 200, this.dataUriToUint8Array(dataUri));          } catch (e) {            this.finish(url, 400, JSON.stringify(e));          }          return;        }        let request = new XMLHttpRequest();        request.open("GET", url, true);        request.responseType = "arraybuffer";        let onerror = () => {          this.finish(url, request.status, request.response);        };        request.onload = () => {          if (request.status == 200 || request.status == 0)            this.finish(url, 200, new Uint8Array(request.response));          else            onerror();        };        request.onerror = onerror;        request.send();      }      start(url, success, error) {        let callbacks = this.callbacks[url];        try {          if (callbacks)            return true;          this.callbacks[url] = callbacks = [];        } finally {          callbacks.push(success, error);        }      }      finish(url, status, data) {        let callbacks = this.callbacks[url];        delete this.callbacks[url];        let args = status == 200 || status == 0 ? [data] : [status, data];        for (let i = args.length - 1, n = callbacks.length; i < n; i += 2)          callbacks[i].apply(null, args);      }    };      // spine-core/src/Event.ts    var Event = class {      constructor(time, data) {        this.data = null;        this.intValue = 0;        this.floatValue = 0;        this.stringValue = null;        this.time = 0;        this.volume = 0;        this.balance = 0;        if (!data)          throw new Error("data cannot be null.");        this.time = time;        this.data = data;      }    };      // spine-core/src/EventData.ts    var EventData = class {      constructor(name) {        this.name = null;        this.intValue = 0;        this.floatValue = 0;        this.stringValue = null;        this.audioPath = null;        this.volume = 0;        this.balance = 0;        this.name = name;      }    };      // spine-core/src/IkConstraint.ts    var IkConstraint = class {      constructor(data, skeleton) {        this.data = null;        this.bones = null;        this.target = null;        this.bendDirection = 0;        this.compress = false;        this.stretch = false;        this.mix = 1;        this.softness = 0;        this.active = false;        if (!data)          throw new Error("data cannot be null.");        if (!skeleton)          throw new Error("skeleton cannot be null.");        this.data = data;        this.mix = data.mix;        this.softness = data.softness;        this.bendDirection = data.bendDirection;        this.compress = data.compress;        this.stretch = data.stretch;        this.bones = new Array();        for (let i = 0; i < data.bones.length; i++)          this.bones.push(skeleton.findBone(data.bones[i].name));        this.target = skeleton.findBone(data.target.name);      }      isActive() {        return this.active;      }      update() {        if (this.mix == 0)          return;        let target = this.target;        let bones = this.bones;        switch (bones.length) {          case 1:            this.apply1(bones[0], target.worldX, target.worldY, this.compress, this.stretch, this.data.uniform, this.mix);            break;          case 2:            this.apply2(bones[0], bones[1], target.worldX, target.worldY, this.bendDirection, this.stretch, this.data.uniform, this.softness, this.mix);            break;        }      }      apply1(bone, targetX, targetY, compress, stretch, uniform, alpha) {        let p = bone.parent;        let pa = p.a, pb = p.b, pc = p.c, pd = p.d;        let rotationIK = -bone.ashearX - bone.arotation, tx = 0, ty = 0;        switch (bone.data.transformMode) {          case TransformMode.OnlyTranslation:            tx = targetX - bone.worldX;            ty = targetY - bone.worldY;            break;          case TransformMode.NoRotationOrReflection:            let s = Math.abs(pa * pd - pb * pc) / (pa * pa + pc * pc);            let sa = pa / bone.skeleton.scaleX;            let sc = pc / bone.skeleton.scaleY;            pb = -sc * s * bone.skeleton.scaleX;            pd = sa * s * bone.skeleton.scaleY;            rotationIK += Math.atan2(sc, sa) * MathUtils.radDeg;          default:            let x = targetX - p.worldX, y = targetY - p.worldY;            let d = pa * pd - pb * pc;            tx = (x * pd - y * pb) / d - bone.ax;            ty = (y * pa - x * pc) / d - bone.ay;        }        rotationIK += Math.atan2(ty, tx) * MathUtils.radDeg;        if (bone.ascaleX < 0)          rotationIK += 180;        if (rotationIK > 180)          rotationIK -= 360;        else if (rotationIK < -180)          rotationIK += 360;        let sx = bone.ascaleX, sy = bone.ascaleY;        if (compress || stretch) {          switch (bone.data.transformMode) {            case TransformMode.NoScale:            case TransformMode.NoScaleOrReflection:              tx = targetX - bone.worldX;              ty = targetY - bone.worldY;          }          let b = bone.data.length * sx, dd = Math.sqrt(tx * tx + ty * ty);          if (compress && dd < b || stretch && dd > b && b > 1e-4) {            let s = (dd / b - 1) * alpha + 1;            sx *= s;            if (uniform)              sy *= s;          }        }        bone.updateWorldTransformWith(bone.ax, bone.ay, bone.arotation + rotationIK * alpha, sx, sy, bone.ashearX, bone.ashearY);      }      apply2(parent, child, targetX, targetY, bendDir, stretch, uniform, softness, alpha) {        let px = parent.ax, py = parent.ay, psx = parent.ascaleX, psy = parent.ascaleY, sx = psx, sy = psy, csx = child.ascaleX;        let os1 = 0, os2 = 0, s2 = 0;        if (psx < 0) {          psx = -psx;          os1 = 180;          s2 = -1;        } else {          os1 = 0;          s2 = 1;        }        if (psy < 0) {          psy = -psy;          s2 = -s2;        }        if (csx < 0) {          csx = -csx;          os2 = 180;        } else          os2 = 0;        let cx = child.ax, cy = 0, cwx = 0, cwy = 0, a = parent.a, b = parent.b, c = parent.c, d = parent.d;        let u = Math.abs(psx - psy) <= 1e-4;        if (!u || stretch) {          cy = 0;          cwx = a * cx + parent.worldX;          cwy = c * cx + parent.worldY;        } else {          cy = child.ay;          cwx = a * cx + b * cy + parent.worldX;          cwy = c * cx + d * cy + parent.worldY;        }        let pp = parent.parent;        a = pp.a;        b = pp.b;        c = pp.c;        d = pp.d;        let id = 1 / (a * d - b * c), x = cwx - pp.worldX, y = cwy - pp.worldY;        let dx = (x * d - y * b) * id - px, dy = (y * a - x * c) * id - py;        let l1 = Math.sqrt(dx * dx + dy * dy), l2 = child.data.length * csx, a1, a2;        if (l1 < 1e-4) {          this.apply1(parent, targetX, targetY, false, stretch, false, alpha);          child.updateWorldTransformWith(cx, cy, 0, child.ascaleX, child.ascaleY, child.ashearX, child.ashearY);          return;        }        x = targetX - pp.worldX;        y = targetY - pp.worldY;        let tx = (x * d - y * b) * id - px, ty = (y * a - x * c) * id - py;        let dd = tx * tx + ty * ty;        if (softness != 0) {          softness *= psx * (csx + 1) * 0.5;          let td = Math.sqrt(dd), sd = td - l1 - l2 * psx + softness;          if (sd > 0) {            let p = Math.min(1, sd / (softness * 2)) - 1;            p = (sd - softness * (1 - p * p)) / td;            tx -= p * tx;            ty -= p * ty;            dd = tx * tx + ty * ty;          }        }        outer:          if (u) {            l2 *= psx;            let cos = (dd - l1 * l1 - l2 * l2) / (2 * l1 * l2);            if (cos < -1) {              cos = -1;              a2 = Math.PI * bendDir;            } else if (cos > 1) {              cos = 1;              a2 = 0;              if (stretch) {                a = (Math.sqrt(dd) / (l1 + l2) - 1) * alpha + 1;                sx *= a;                if (uniform)                  sy *= a;              }            } else              a2 = Math.acos(cos) * bendDir;            a = l1 + l2 * cos;            b = l2 * Math.sin(a2);            a1 = Math.atan2(ty * a - tx * b, tx * a + ty * b);          } else {            a = psx * l2;            b = psy * l2;            let aa = a * a, bb = b * b, ta = Math.atan2(ty, tx);            c = bb * l1 * l1 + aa * dd - aa * bb;            let c1 = -2 * bb * l1, c2 = bb - aa;            d = c1 * c1 - 4 * c2 * c;            if (d >= 0) {              let q = Math.sqrt(d);              if (c1 < 0)                q = -q;              q = -(c1 + q) * 0.5;              let r0 = q / c2, r1 = c / q;              let r = Math.abs(r0) < Math.abs(r1) ? r0 : r1;              if (r * r <= dd) {                y = Math.sqrt(dd - r * r) * bendDir;                a1 = ta - Math.atan2(y, r);                a2 = Math.atan2(y / psy, (r - l1) / psx);                break outer;              }            }            let minAngle = MathUtils.PI, minX = l1 - a, minDist = minX * minX, minY = 0;            let maxAngle = 0, maxX = l1 + a, maxDist = maxX * maxX, maxY = 0;            c = -a * l1 / (aa - bb);            if (c >= -1 && c <= 1) {              c = Math.acos(c);              x = a * Math.cos(c) + l1;              y = b * Math.sin(c);              d = x * x + y * y;              if (d < minDist) {                minAngle = c;                minDist = d;                minX = x;                minY = y;              }              if (d > maxDist) {                maxAngle = c;                maxDist = d;                maxX = x;                maxY = y;              }            }            if (dd <= (minDist + maxDist) * 0.5) {              a1 = ta - Math.atan2(minY * bendDir, minX);              a2 = minAngle * bendDir;            } else {              a1 = ta - Math.atan2(maxY * bendDir, maxX);              a2 = maxAngle * bendDir;            }          }        let os = Math.atan2(cy, cx) * s2;        let rotation = parent.arotation;        a1 = (a1 - os) * MathUtils.radDeg + os1 - rotation;        if (a1 > 180)          a1 -= 360;        else if (a1 < -180)          a1 += 360;        parent.updateWorldTransformWith(px, py, rotation + a1 * alpha, sx, sy, 0, 0);        rotation = child.arotation;        a2 = ((a2 + os) * MathUtils.radDeg - child.ashearX) * s2 + os2 - rotation;        if (a2 > 180)          a2 -= 360;        else if (a2 < -180)          a2 += 360;        child.updateWorldTransformWith(cx, cy, rotation + a2 * alpha, child.ascaleX, child.ascaleY, child.ashearX, child.ashearY);      }    };      // spine-core/src/IkConstraintData.ts    var IkConstraintData = class extends ConstraintData {      constructor(name) {        super(name, 0, false);        this.bones = new Array();        this.target = null;        this.bendDirection = 1;        this.compress = false;        this.stretch = false;        this.uniform = false;        this.mix = 1;        this.softness = 0;      }    };      // spine-core/src/PathConstraintData.ts    var PathConstraintData = class extends ConstraintData {      constructor(name) {        super(name, 0, false);        this.bones = new Array();        this.target = null;        this.positionMode = null;        this.spacingMode = null;        this.rotateMode = null;        this.offsetRotation = 0;        this.position = 0;        this.spacing = 0;        this.mixRotate = 0;        this.mixX = 0;        this.mixY = 0;      }    };    var PositionMode;    (function(PositionMode2) {      PositionMode2[PositionMode2["Fixed"] = 0] = "Fixed";      PositionMode2[PositionMode2["Percent"] = 1] = "Percent";    })(PositionMode || (PositionMode = {}));    var SpacingMode;    (function(SpacingMode2) {      SpacingMode2[SpacingMode2["Length"] = 0] = "Length";      SpacingMode2[SpacingMode2["Fixed"] = 1] = "Fixed";      SpacingMode2[SpacingMode2["Percent"] = 2] = "Percent";      SpacingMode2[SpacingMode2["Proportional"] = 3] = "Proportional";    })(SpacingMode || (SpacingMode = {}));    var RotateMode;    (function(RotateMode2) {      RotateMode2[RotateMode2["Tangent"] = 0] = "Tangent";      RotateMode2[RotateMode2["Chain"] = 1] = "Chain";      RotateMode2[RotateMode2["ChainScale"] = 2] = "ChainScale";    })(RotateMode || (RotateMode = {}));      // spine-core/src/PathConstraint.ts    var _PathConstraint = class {      constructor(data, skeleton) {        this.data = null;        this.bones = null;        this.target = null;        this.position = 0;        this.spacing = 0;        this.mixRotate = 0;        this.mixX = 0;        this.mixY = 0;        this.spaces = new Array();        this.positions = new Array();        this.world = new Array();        this.curves = new Array();        this.lengths = new Array();        this.segments = new Array();        this.active = false;        if (!data)          throw new Error("data cannot be null.");        if (!skeleton)          throw new Error("skeleton cannot be null.");        this.data = data;        this.bones = new Array();        for (let i = 0, n = data.bones.length; i < n; i++)          this.bones.push(skeleton.findBone(data.bones[i].name));        this.target = skeleton.findSlot(data.target.name);        this.position = data.position;        this.spacing = data.spacing;        this.mixRotate = data.mixRotate;        this.mixX = data.mixX;        this.mixY = data.mixY;      }      isActive() {        return this.active;      }      update() {        let attachment = this.target.getAttachment();        if (!(attachment instanceof PathAttachment))          return;        let mixRotate = this.mixRotate, mixX = this.mixX, mixY = this.mixY;        if (mixRotate == 0 && mixX == 0 && mixY == 0)          return;        let data = this.data;        let tangents = data.rotateMode == RotateMode.Tangent, scale = data.rotateMode == RotateMode.ChainScale;        let bones = this.bones;        let boneCount = bones.length, spacesCount = tangents ? boneCount : boneCount + 1;        let spaces = Utils.setArraySize(this.spaces, spacesCount), lengths = scale ? this.lengths = Utils.setArraySize(this.lengths, boneCount) : null;        let spacing = this.spacing;        switch (data.spacingMode) {          case SpacingMode.Percent:            if (scale) {              for (let i = 0, n = spacesCount - 1; i < n; i++) {                let bone = bones[i];                let setupLength = bone.data.length;                if (setupLength < _PathConstraint.epsilon)                  lengths[i] = 0;                else {                  let x = setupLength * bone.a, y = setupLength * bone.c;                  lengths[i] = Math.sqrt(x * x + y * y);                }              }            }            Utils.arrayFill(spaces, 1, spacesCount, spacing);            break;          case SpacingMode.Proportional:            let sum = 0;            for (let i = 0, n = spacesCount - 1; i < n; ) {              let bone = bones[i];              let setupLength = bone.data.length;              if (setupLength < _PathConstraint.epsilon) {                if (scale)                  lengths[i] = 0;                spaces[++i] = spacing;              } else {                let x = setupLength * bone.a, y = setupLength * bone.c;                let length = Math.sqrt(x * x + y * y);                if (scale)                  lengths[i] = length;                spaces[++i] = length;                sum += length;              }            }            if (sum > 0) {              sum = spacesCount / sum * spacing;              for (let i = 1; i < spacesCount; i++)                spaces[i] *= sum;            }            break;          default:            let lengthSpacing = data.spacingMode == SpacingMode.Length;            for (let i = 0, n = spacesCount - 1; i < n; ) {              let bone = bones[i];              let setupLength = bone.data.length;              if (setupLength < _PathConstraint.epsilon) {                if (scale)                  lengths[i] = 0;                spaces[++i] = spacing;              } else {                let x = setupLength * bone.a, y = setupLength * bone.c;                let length = Math.sqrt(x * x + y * y);                if (scale)                  lengths[i] = length;                spaces[++i] = (lengthSpacing ? setupLength + spacing : spacing) * length / setupLength;              }            }        }        let positions = this.computeWorldPositions(attachment, spacesCount, tangents);        let boneX = positions[0], boneY = positions[1], offsetRotation = data.offsetRotation;        let tip = false;        if (offsetRotation == 0)          tip = data.rotateMode == RotateMode.Chain;        else {          tip = false;          let p = this.target.bone;          offsetRotation *= p.a * p.d - p.b * p.c > 0 ? MathUtils.degRad : -MathUtils.degRad;        }        for (let i = 0, p = 3; i < boneCount; i++, p += 3) {          let bone = bones[i];          bone.worldX += (boneX - bone.worldX) * mixX;          bone.worldY += (boneY - bone.worldY) * mixY;          let x = positions[p], y = positions[p + 1], dx = x - boneX, dy = y - boneY;          if (scale) {            let length = lengths[i];            if (length != 0) {              let s = (Math.sqrt(dx * dx + dy * dy) / length - 1) * mixRotate + 1;              bone.a *= s;              bone.c *= s;            }          }          boneX = x;          boneY = y;          if (mixRotate > 0) {            let a = bone.a, b = bone.b, c = bone.c, d = bone.d, r = 0, cos = 0, sin = 0;            if (tangents)              r = positions[p - 1];            else if (spaces[i + 1] == 0)              r = positions[p + 2];            else              r = Math.atan2(dy, dx);            r -= Math.atan2(c, a);            if (tip) {              cos = Math.cos(r);              sin = Math.sin(r);              let length = bone.data.length;              boneX += (length * (cos * a - sin * c) - dx) * mixRotate;              boneY += (length * (sin * a + cos * c) - dy) * mixRotate;            } else {              r += offsetRotation;            }            if (r > MathUtils.PI)              r -= MathUtils.PI2;            else if (r < -MathUtils.PI)              r += MathUtils.PI2;            r *= mixRotate;            cos = Math.cos(r);            sin = Math.sin(r);            bone.a = cos * a - sin * c;            bone.b = cos * b - sin * d;            bone.c = sin * a + cos * c;            bone.d = sin * b + cos * d;          }          bone.updateAppliedTransform();        }      }      computeWorldPositions(path, spacesCount, tangents) {        let target = this.target;        let position = this.position;        let spaces = this.spaces, out = Utils.setArraySize(this.positions, spacesCount * 3 + 2), world = null;        let closed2 = path.closed;        let verticesLength = path.worldVerticesLength, curveCount = verticesLength / 6, prevCurve = _PathConstraint.NONE;        if (!path.constantSpeed) {          let lengths = path.lengths;          curveCount -= closed2 ? 1 : 2;          let pathLength2 = lengths[curveCount];          if (this.data.positionMode == PositionMode.Percent)            position *= pathLength2;          let multiplier2;          switch (this.data.spacingMode) {            case SpacingMode.Percent:              multiplier2 = pathLength2;              break;            case SpacingMode.Proportional:              multiplier2 = pathLength2 / spacesCount;              break;            default:              multiplier2 = 1;          }          world = Utils.setArraySize(this.world, 8);          for (let i = 0, o = 0, curve = 0; i < spacesCount; i++, o += 3) {            let space = spaces[i] * multiplier2;            position += space;            let p = position;            if (closed2) {              p %= pathLength2;              if (p < 0)                p += pathLength2;              curve = 0;            } else if (p < 0) {              if (prevCurve != _PathConstraint.BEFORE) {                prevCurve = _PathConstraint.BEFORE;                path.computeWorldVertices(target, 2, 4, world, 0, 2);              }              this.addBeforePosition(p, world, 0, out, o);              continue;            } else if (p > pathLength2) {              if (prevCurve != _PathConstraint.AFTER) {                prevCurve = _PathConstraint.AFTER;                path.computeWorldVertices(target, verticesLength - 6, 4, world, 0, 2);              }              this.addAfterPosition(p - pathLength2, world, 0, out, o);              continue;            }            for (; ; curve++) {              let length = lengths[curve];              if (p > length)                continue;              if (curve == 0)                p /= length;              else {                let prev = lengths[curve - 1];                p = (p - prev) / (length - prev);              }              break;            }            if (curve != prevCurve) {              prevCurve = curve;              if (closed2 && curve == curveCount) {                path.computeWorldVertices(target, verticesLength - 4, 4, world, 0, 2);                path.computeWorldVertices(target, 0, 4, world, 4, 2);              } else                path.computeWorldVertices(target, curve * 6 + 2, 8, world, 0, 2);            }            this.addCurvePosition(p, world[0], world[1], world[2], world[3], world[4], world[5], world[6], world[7], out, o, tangents || i > 0 && space == 0);          }          return out;        }        if (closed2) {          verticesLength += 2;          world = Utils.setArraySize(this.world, verticesLength);          path.computeWorldVertices(target, 2, verticesLength - 4, world, 0, 2);          path.computeWorldVertices(target, 0, 2, world, verticesLength - 4, 2);          world[verticesLength - 2] = world[0];          world[verticesLength - 1] = world[1];        } else {          curveCount--;          verticesLength -= 4;          world = Utils.setArraySize(this.world, verticesLength);          path.computeWorldVertices(target, 2, verticesLength, world, 0, 2);        }        let curves = Utils.setArraySize(this.curves, curveCount);        let pathLength = 0;        let x1 = world[0], y1 = world[1], cx1 = 0, cy1 = 0, cx2 = 0, cy2 = 0, x2 = 0, y2 = 0;        let tmpx = 0, tmpy = 0, dddfx = 0, dddfy = 0, ddfx = 0, ddfy = 0, dfx = 0, dfy = 0;        for (let i = 0, w = 2; i < curveCount; i++, w += 6) {          cx1 = world[w];          cy1 = world[w + 1];          cx2 = world[w + 2];          cy2 = world[w + 3];          x2 = world[w + 4];          y2 = world[w + 5];          tmpx = (x1 - cx1 * 2 + cx2) * 0.1875;          tmpy = (y1 - cy1 * 2 + cy2) * 0.1875;          dddfx = ((cx1 - cx2) * 3 - x1 + x2) * 0.09375;          dddfy = ((cy1 - cy2) * 3 - y1 + y2) * 0.09375;          ddfx = tmpx * 2 + dddfx;          ddfy = tmpy * 2 + dddfy;          dfx = (cx1 - x1) * 0.75 + tmpx + dddfx * 0.16666667;          dfy = (cy1 - y1) * 0.75 + tmpy + dddfy * 0.16666667;          pathLength += Math.sqrt(dfx * dfx + dfy * dfy);          dfx += ddfx;          dfy += ddfy;          ddfx += dddfx;          ddfy += dddfy;          pathLength += Math.sqrt(dfx * dfx + dfy * dfy);          dfx += ddfx;          dfy += ddfy;          pathLength += Math.sqrt(dfx * dfx + dfy * dfy);          dfx += ddfx + dddfx;          dfy += ddfy + dddfy;          pathLength += Math.sqrt(dfx * dfx + dfy * dfy);          curves[i] = pathLength;          x1 = x2;          y1 = y2;        }        if (this.data.positionMode == PositionMode.Percent)          position *= pathLength;        let multiplier;        switch (this.data.spacingMode) {          case SpacingMode.Percent:            multiplier = pathLength;            break;          case SpacingMode.Proportional:            multiplier = pathLength / spacesCount;            break;          default:            multiplier = 1;        }        let segments = this.segments;        let curveLength = 0;        for (let i = 0, o = 0, curve = 0, segment = 0; i < spacesCount; i++, o += 3) {          let space = spaces[i] * multiplier;          position += space;          let p = position;          if (closed2) {            p %= pathLength;            if (p < 0)              p += pathLength;            curve = 0;          } else if (p < 0) {            this.addBeforePosition(p, world, 0, out, o);            continue;          } else if (p > pathLength) {            this.addAfterPosition(p - pathLength, world, verticesLength - 4, out, o);            continue;          }          for (; ; curve++) {            let length = curves[curve];            if (p > length)              continue;            if (curve == 0)              p /= length;            else {              let prev = curves[curve - 1];              p = (p - prev) / (length - prev);            }            break;          }          if (curve != prevCurve) {            prevCurve = curve;            let ii = curve * 6;            x1 = world[ii];            y1 = world[ii + 1];            cx1 = world[ii + 2];            cy1 = world[ii + 3];            cx2 = world[ii + 4];            cy2 = world[ii + 5];            x2 = world[ii + 6];            y2 = world[ii + 7];            tmpx = (x1 - cx1 * 2 + cx2) * 0.03;            tmpy = (y1 - cy1 * 2 + cy2) * 0.03;            dddfx = ((cx1 - cx2) * 3 - x1 + x2) * 6e-3;            dddfy = ((cy1 - cy2) * 3 - y1 + y2) * 6e-3;            ddfx = tmpx * 2 + dddfx;            ddfy = tmpy * 2 + dddfy;            dfx = (cx1 - x1) * 0.3 + tmpx + dddfx * 0.16666667;            dfy = (cy1 - y1) * 0.3 + tmpy + dddfy * 0.16666667;            curveLength = Math.sqrt(dfx * dfx + dfy * dfy);            segments[0] = curveLength;            for (ii = 1; ii < 8; ii++) {              dfx += ddfx;              dfy += ddfy;              ddfx += dddfx;              ddfy += dddfy;              curveLength += Math.sqrt(dfx * dfx + dfy * dfy);              segments[ii] = curveLength;            }            dfx += ddfx;            dfy += ddfy;            curveLength += Math.sqrt(dfx * dfx + dfy * dfy);            segments[8] = curveLength;            dfx += ddfx + dddfx;            dfy += ddfy + dddfy;            curveLength += Math.sqrt(dfx * dfx + dfy * dfy);            segments[9] = curveLength;            segment = 0;          }          p *= curveLength;          for (; ; segment++) {            let length = segments[segment];            if (p > length)              continue;            if (segment == 0)              p /= length;            else {              let prev = segments[segment - 1];              p = segment + (p - prev) / (length - prev);            }            break;          }          this.addCurvePosition(p * 0.1, x1, y1, cx1, cy1, cx2, cy2, x2, y2, out, o, tangents || i > 0 && space == 0);        }        return out;      }      addBeforePosition(p, temp, i, out, o) {        let x1 = temp[i], y1 = temp[i + 1], dx = temp[i + 2] - x1, dy = temp[i + 3] - y1, r = Math.atan2(dy, dx);        out[o] = x1 + p * Math.cos(r);        out[o + 1] = y1 + p * Math.sin(r);        out[o + 2] = r;      }      addAfterPosition(p, temp, i, out, o) {        let x1 = temp[i + 2], y1 = temp[i + 3], dx = x1 - temp[i], dy = y1 - temp[i + 1], r = Math.atan2(dy, dx);        out[o] = x1 + p * Math.cos(r);        out[o + 1] = y1 + p * Math.sin(r);        out[o + 2] = r;      }      addCurvePosition(p, x1, y1, cx1, cy1, cx2, cy2, x2, y2, out, o, tangents) {        if (p == 0 || isNaN(p)) {          out[o] = x1;          out[o + 1] = y1;          out[o + 2] = Math.atan2(cy1 - y1, cx1 - x1);          return;        }        let tt = p * p, ttt = tt * p, u = 1 - p, uu = u * u, uuu = uu * u;        let ut = u * p, ut3 = ut * 3, uut3 = u * ut3, utt3 = ut3 * p;        let x = x1 * uuu + cx1 * uut3 + cx2 * utt3 + x2 * ttt, y = y1 * uuu + cy1 * uut3 + cy2 * utt3 + y2 * ttt;        out[o] = x;        out[o + 1] = y;        if (tangents) {          if (p < 1e-3)            out[o + 2] = Math.atan2(cy1 - y1, cx1 - x1);          else            out[o + 2] = Math.atan2(y - (y1 * uu + cy1 * ut * 2 + cy2 * tt), x - (x1 * uu + cx1 * ut * 2 + cx2 * tt));        }      }    };    var PathConstraint = _PathConstraint;    PathConstraint.NONE = -1;    PathConstraint.BEFORE = -2;    PathConstraint.AFTER = -3;    PathConstraint.epsilon = 1e-5;      // spine-core/src/Slot.ts    var Slot = class {      constructor(data, bone) {        this.data = null;        this.bone = null;        this.color = null;        this.darkColor = null;        this.attachment = null;        this.attachmentTime = 0;        this.attachmentState = 0;        this.deform = new Array();        if (!data)          throw new Error("data cannot be null.");        if (!bone)          throw new Error("bone cannot be null.");        this.data = data;        this.bone = bone;        this.color = new Color();        this.darkColor = !data.darkColor ? null : new Color();        this.setToSetupPose();      }      getSkeleton() {        return this.bone.skeleton;      }      getAttachment() {        return this.attachment;      }      setAttachment(attachment) {        if (this.attachment == attachment)          return;        if (!(attachment instanceof VertexAttachment) || !(this.attachment instanceof VertexAttachment) || attachment.deformAttachment != this.attachment.deformAttachment) {          this.deform.length = 0;        }        this.attachment = attachment;        this.attachmentTime = this.bone.skeleton.time;      }      setAttachmentTime(time) {        this.attachmentTime = this.bone.skeleton.time - time;      }      getAttachmentTime() {        return this.bone.skeleton.time - this.attachmentTime;      }      setToSetupPose() {        this.color.setFromColor(this.data.color);        if (this.darkColor)          this.darkColor.setFromColor(this.data.darkColor);        if (!this.data.attachmentName)          this.attachment = null;        else {          this.attachment = null;          this.setAttachment(this.bone.skeleton.getAttachment(this.data.index, this.data.attachmentName));        }      }    };      // spine-core/src/TransformConstraint.ts    var TransformConstraint = class {      constructor(data, skeleton) {        this.data = null;        this.bones = null;        this.target = null;        this.mixRotate = 0;        this.mixX = 0;        this.mixY = 0;        this.mixScaleX = 0;        this.mixScaleY = 0;        this.mixShearY = 0;        this.temp = new Vector2();        this.active = false;        if (!data)          throw new Error("data cannot be null.");        if (!skeleton)          throw new Error("skeleton cannot be null.");        this.data = data;        this.mixRotate = data.mixRotate;        this.mixX = data.mixX;        this.mixY = data.mixY;        this.mixScaleX = data.mixScaleX;        this.mixScaleY = data.mixScaleY;        this.mixShearY = data.mixShearY;        this.bones = new Array();        for (let i = 0; i < data.bones.length; i++)          this.bones.push(skeleton.findBone(data.bones[i].name));        this.target = skeleton.findBone(data.target.name);      }      isActive() {        return this.active;      }      update() {        if (this.mixRotate == 0 && this.mixX == 0 && this.mixY == 0 && this.mixScaleX == 0 && this.mixScaleX == 0 && this.mixShearY == 0)          return;        if (this.data.local) {          if (this.data.relative)            this.applyRelativeLocal();          else            this.applyAbsoluteLocal();        } else {          if (this.data.relative)            this.applyRelativeWorld();          else            this.applyAbsoluteWorld();        }      }      applyAbsoluteWorld() {        let mixRotate = this.mixRotate, mixX = this.mixX, mixY = this.mixY, mixScaleX = this.mixScaleX, mixScaleY = this.mixScaleY, mixShearY = this.mixShearY;        let translate = mixX != 0 || mixY != 0;        let target = this.target;        let ta = target.a, tb = target.b, tc = target.c, td = target.d;        let degRadReflect = ta * td - tb * tc > 0 ? MathUtils.degRad : -MathUtils.degRad;        let offsetRotation = this.data.offsetRotation * degRadReflect;        let offsetShearY = this.data.offsetShearY * degRadReflect;        let bones = this.bones;        for (let i = 0, n = bones.length; i < n; i++) {          let bone = bones[i];          if (mixRotate != 0) {            let a = bone.a, b = bone.b, c = bone.c, d = bone.d;            let r = Math.atan2(tc, ta) - Math.atan2(c, a) + offsetRotation;            if (r > MathUtils.PI)              r -= MathUtils.PI2;            else if (r < -MathUtils.PI)              r += MathUtils.PI2;            r *= mixRotate;            let cos = Math.cos(r), sin = Math.sin(r);            bone.a = cos * a - sin * c;            bone.b = cos * b - sin * d;            bone.c = sin * a + cos * c;            bone.d = sin * b + cos * d;          }          if (translate) {            let temp = this.temp;            target.localToWorld(temp.set(this.data.offsetX, this.data.offsetY));            bone.worldX += (temp.x - bone.worldX) * mixX;            bone.worldY += (temp.y - bone.worldY) * mixY;          }          if (mixScaleX != 0) {            let s = Math.sqrt(bone.a * bone.a + bone.c * bone.c);            if (s != 0)              s = (s + (Math.sqrt(ta * ta + tc * tc) - s + this.data.offsetScaleX) * mixScaleX) / s;            bone.a *= s;            bone.c *= s;          }          if (mixScaleY != 0) {            let s = Math.sqrt(bone.b * bone.b + bone.d * bone.d);            if (s != 0)              s = (s + (Math.sqrt(tb * tb + td * td) - s + this.data.offsetScaleY) * mixScaleY) / s;            bone.b *= s;            bone.d *= s;          }          if (mixShearY > 0) {            let b = bone.b, d = bone.d;            let by = Math.atan2(d, b);            let r = Math.atan2(td, tb) - Math.atan2(tc, ta) - (by - Math.atan2(bone.c, bone.a));            if (r > MathUtils.PI)              r -= MathUtils.PI2;            else if (r < -MathUtils.PI)              r += MathUtils.PI2;            r = by + (r + offsetShearY) * mixShearY;            let s = Math.sqrt(b * b + d * d);            bone.b = Math.cos(r) * s;            bone.d = Math.sin(r) * s;          }          bone.updateAppliedTransform();        }      }      applyRelativeWorld() {        let mixRotate = this.mixRotate, mixX = this.mixX, mixY = this.mixY, mixScaleX = this.mixScaleX, mixScaleY = this.mixScaleY, mixShearY = this.mixShearY;        let translate = mixX != 0 || mixY != 0;        let target = this.target;        let ta = target.a, tb = target.b, tc = target.c, td = target.d;        let degRadReflect = ta * td - tb * tc > 0 ? MathUtils.degRad : -MathUtils.degRad;        let offsetRotation = this.data.offsetRotation * degRadReflect, offsetShearY = this.data.offsetShearY * degRadReflect;        let bones = this.bones;        for (let i = 0, n = bones.length; i < n; i++) {          let bone = bones[i];          if (mixRotate != 0) {            let a = bone.a, b = bone.b, c = bone.c, d = bone.d;            let r = Math.atan2(tc, ta) + offsetRotation;            if (r > MathUtils.PI)              r -= MathUtils.PI2;            else if (r < -MathUtils.PI)              r += MathUtils.PI2;            r *= mixRotate;            let cos = Math.cos(r), sin = Math.sin(r);            bone.a = cos * a - sin * c;            bone.b = cos * b - sin * d;            bone.c = sin * a + cos * c;            bone.d = sin * b + cos * d;          }          if (translate) {            let temp = this.temp;            target.localToWorld(temp.set(this.data.offsetX, this.data.offsetY));            bone.worldX += temp.x * mixX;            bone.worldY += temp.y * mixY;          }          if (mixScaleX != 0) {            let s = (Math.sqrt(ta * ta + tc * tc) - 1 + this.data.offsetScaleX) * mixScaleX + 1;            bone.a *= s;            bone.c *= s;          }          if (mixScaleY != 0) {            let s = (Math.sqrt(tb * tb + td * td) - 1 + this.data.offsetScaleY) * mixScaleY + 1;            bone.b *= s;            bone.d *= s;          }          if (mixShearY > 0) {            let r = Math.atan2(td, tb) - Math.atan2(tc, ta);            if (r > MathUtils.PI)              r -= MathUtils.PI2;            else if (r < -MathUtils.PI)              r += MathUtils.PI2;            let b = bone.b, d = bone.d;            r = Math.atan2(d, b) + (r - MathUtils.PI / 2 + offsetShearY) * mixShearY;            let s = Math.sqrt(b * b + d * d);            bone.b = Math.cos(r) * s;            bone.d = Math.sin(r) * s;          }          bone.updateAppliedTransform();        }      }      applyAbsoluteLocal() {        let mixRotate = this.mixRotate, mixX = this.mixX, mixY = this.mixY, mixScaleX = this.mixScaleX, mixScaleY = this.mixScaleY, mixShearY = this.mixShearY;        let target = this.target;        let bones = this.bones;        for (let i = 0, n = bones.length; i < n; i++) {          let bone = bones[i];          let rotation = bone.arotation;          if (mixRotate != 0) {            let r = target.arotation - rotation + this.data.offsetRotation;            r -= (16384 - (16384.499999999996 - r / 360 | 0)) * 360;            rotation += r * mixRotate;          }          let x = bone.ax, y = bone.ay;          x += (target.ax - x + this.data.offsetX) * mixX;          y += (target.ay - y + this.data.offsetY) * mixY;          let scaleX = bone.ascaleX, scaleY = bone.ascaleY;          if (mixScaleX != 0 && scaleX != 0)            scaleX = (scaleX + (target.ascaleX - scaleX + this.data.offsetScaleX) * mixScaleX) / scaleX;          if (mixScaleY != 0 && scaleY != 0)            scaleY = (scaleY + (target.ascaleY - scaleY + this.data.offsetScaleY) * mixScaleY) / scaleY;          let shearY = bone.ashearY;          if (mixShearY != 0) {            let r = target.ashearY - shearY + this.data.offsetShearY;            r -= (16384 - (16384.499999999996 - r / 360 | 0)) * 360;            shearY += r * mixShearY;          }          bone.updateWorldTransformWith(x, y, rotation, scaleX, scaleY, bone.ashearX, shearY);        }      }      applyRelativeLocal() {        let mixRotate = this.mixRotate, mixX = this.mixX, mixY = this.mixY, mixScaleX = this.mixScaleX, mixScaleY = this.mixScaleY, mixShearY = this.mixShearY;        let target = this.target;        let bones = this.bones;        for (let i = 0, n = bones.length; i < n; i++) {          let bone = bones[i];          let rotation = bone.arotation + (target.arotation + this.data.offsetRotation) * mixRotate;          let x = bone.ax + (target.ax + this.data.offsetX) * mixX;          let y = bone.ay + (target.ay + this.data.offsetY) * mixY;          let scaleX = bone.ascaleX * ((target.ascaleX - 1 + this.data.offsetScaleX) * mixScaleX + 1);          let scaleY = bone.ascaleY * ((target.ascaleY - 1 + this.data.offsetScaleY) * mixScaleY + 1);          let shearY = bone.ashearY + (target.ashearY + this.data.offsetShearY) * mixShearY;          bone.updateWorldTransformWith(x, y, rotation, scaleX, scaleY, bone.ashearX, shearY);        }      }    };      // spine-core/src/Skeleton.ts    var Skeleton = class {      constructor(data) {        this.data = null;        this.bones = null;        this.slots = null;        this.drawOrder = null;        this.ikConstraints = null;        this.transformConstraints = null;        this.pathConstraints = null;        this._updateCache = new Array();        this.skin = null;        this.color = null;        this.time = 0;        this.scaleX = 1;        this.scaleY = 1;        this.x = 0;        this.y = 0;        if (!data)          throw new Error("data cannot be null.");        this.data = data;        this.bones = new Array();        for (let i = 0; i < data.bones.length; i++) {          let boneData = data.bones[i];          let bone;          if (!boneData.parent)            bone = new Bone(boneData, this, null);          else {            let parent = this.bones[boneData.parent.index];            bone = new Bone(boneData, this, parent);            parent.children.push(bone);          }          this.bones.push(bone);        }        this.slots = new Array();        this.drawOrder = new Array();        for (let i = 0; i < data.slots.length; i++) {          let slotData = data.slots[i];          let bone = this.bones[slotData.boneData.index];          let slot = new Slot(slotData, bone);          this.slots.push(slot);          this.drawOrder.push(slot);        }        this.ikConstraints = new Array();        for (let i = 0; i < data.ikConstraints.length; i++) {          let ikConstraintData = data.ikConstraints[i];          this.ikConstraints.push(new IkConstraint(ikConstraintData, this));        }        this.transformConstraints = new Array();        for (let i = 0; i < data.transformConstraints.length; i++) {          let transformConstraintData = data.transformConstraints[i];          this.transformConstraints.push(new TransformConstraint(transformConstraintData, this));        }        this.pathConstraints = new Array();        for (let i = 0; i < data.pathConstraints.length; i++) {          let pathConstraintData = data.pathConstraints[i];          this.pathConstraints.push(new PathConstraint(pathConstraintData, this));        }        this.color = new Color(1, 1, 1, 1);        this.updateCache();      }      updateCache() {        let updateCache = this._updateCache;        updateCache.length = 0;        let bones = this.bones;        for (let i = 0, n = bones.length; i < n; i++) {          let bone = bones[i];          bone.sorted = bone.data.skinRequired;          bone.active = !bone.sorted;        }        if (this.skin) {          let skinBones = this.skin.bones;          for (let i = 0, n = this.skin.bones.length; i < n; i++) {            let bone = this.bones[skinBones[i].index];            do {              bone.sorted = false;              bone.active = true;              bone = bone.parent;            } while (bone);          }        }        let ikConstraints = this.ikConstraints;        let transformConstraints = this.transformConstraints;        let pathConstraints = this.pathConstraints;        let ikCount = ikConstraints.length, transformCount = transformConstraints.length, pathCount = pathConstraints.length;        let constraintCount = ikCount + transformCount + pathCount;        outer:          for (let i = 0; i < constraintCount; i++) {            for (let ii = 0; ii < ikCount; ii++) {              let constraint = ikConstraints[ii];              if (constraint.data.order == i) {                this.sortIkConstraint(constraint);                continue outer;              }            }            for (let ii = 0; ii < transformCount; ii++) {              let constraint = transformConstraints[ii];              if (constraint.data.order == i) {                this.sortTransformConstraint(constraint);                continue outer;              }            }            for (let ii = 0; ii < pathCount; ii++) {              let constraint = pathConstraints[ii];              if (constraint.data.order == i) {                this.sortPathConstraint(constraint);                continue outer;              }            }          }        for (let i = 0, n = bones.length; i < n; i++)          this.sortBone(bones[i]);      }      sortIkConstraint(constraint) {        constraint.active = constraint.target.isActive() && (!constraint.data.skinRequired || this.skin && Utils.contains(this.skin.constraints, constraint.data, true));        if (!constraint.active)          return;        let target = constraint.target;        this.sortBone(target);        let constrained = constraint.bones;        let parent = constrained[0];        this.sortBone(parent);        if (constrained.length == 1) {          this._updateCache.push(constraint);          this.sortReset(parent.children);        } else {          let child = constrained[constrained.length - 1];          this.sortBone(child);          this._updateCache.push(constraint);          this.sortReset(parent.children);          child.sorted = true;        }      }      sortPathConstraint(constraint) {        constraint.active = constraint.target.bone.isActive() && (!constraint.data.skinRequired || this.skin && Utils.contains(this.skin.constraints, constraint.data, true));        if (!constraint.active)          return;        let slot = constraint.target;        let slotIndex = slot.data.index;        let slotBone = slot.bone;        if (this.skin)          this.sortPathConstraintAttachment(this.skin, slotIndex, slotBone);        if (this.data.defaultSkin && this.data.defaultSkin != this.skin)          this.sortPathConstraintAttachment(this.data.defaultSkin, slotIndex, slotBone);        for (let i = 0, n = this.data.skins.length; i < n; i++)          this.sortPathConstraintAttachment(this.data.skins[i], slotIndex, slotBone);        let attachment = slot.getAttachment();        if (attachment instanceof PathAttachment)          this.sortPathConstraintAttachmentWith(attachment, slotBone);        let constrained = constraint.bones;        let boneCount = constrained.length;        for (let i = 0; i < boneCount; i++)          this.sortBone(constrained[i]);        this._updateCache.push(constraint);        for (let i = 0; i < boneCount; i++)          this.sortReset(constrained[i].children);        for (let i = 0; i < boneCount; i++)          constrained[i].sorted = true;      }      sortTransformConstraint(constraint) {        constraint.active = constraint.target.isActive() && (!constraint.data.skinRequired || this.skin && Utils.contains(this.skin.constraints, constraint.data, true));        if (!constraint.active)          return;        this.sortBone(constraint.target);        let constrained = constraint.bones;        let boneCount = constrained.length;        if (constraint.data.local) {          for (let i = 0; i < boneCount; i++) {            let child = constrained[i];            this.sortBone(child.parent);            this.sortBone(child);          }        } else {          for (let i = 0; i < boneCount; i++) {            this.sortBone(constrained[i]);          }        }        this._updateCache.push(constraint);        for (let i = 0; i < boneCount; i++)          this.sortReset(constrained[i].children);        for (let i = 0; i < boneCount; i++)          constrained[i].sorted = true;      }      sortPathConstraintAttachment(skin, slotIndex, slotBone) {        let attachments = skin.attachments[slotIndex];        if (!attachments)          return;        for (let key in attachments) {          this.sortPathConstraintAttachmentWith(attachments[key], slotBone);        }      }      sortPathConstraintAttachmentWith(attachment, slotBone) {        if (!(attachment instanceof PathAttachment))          return;        let pathBones = attachment.bones;        if (!pathBones)          this.sortBone(slotBone);        else {          let bones = this.bones;          for (let i = 0, n = pathBones.length; i < n; ) {            let nn = pathBones[i++];            nn += i;            while (i < nn)              this.sortBone(bones[pathBones[i++]]);          }        }      }      sortBone(bone) {        if (bone.sorted)          return;        let parent = bone.parent;        if (parent)          this.sortBone(parent);        bone.sorted = true;        this._updateCache.push(bone);      }      sortReset(bones) {        for (let i = 0, n = bones.length; i < n; i++) {          let bone = bones[i];          if (!bone.active)            continue;          if (bone.sorted)            this.sortReset(bone.children);          bone.sorted = false;        }      }      updateWorldTransform() {        let bones = this.bones;        for (let i = 0, n = bones.length; i < n; i++) {          let bone = bones[i];          bone.ax = bone.x;          bone.ay = bone.y;          bone.arotation = bone.rotation;          bone.ascaleX = bone.scaleX;          bone.ascaleY = bone.scaleY;          bone.ashearX = bone.shearX;          bone.ashearY = bone.shearY;        }        let updateCache = this._updateCache;        for (let i = 0, n = updateCache.length; i < n; i++)          updateCache[i].update();      }      updateWorldTransformWith(parent) {        let rootBone = this.getRootBone();        let pa = parent.a, pb = parent.b, pc = parent.c, pd = parent.d;        rootBone.worldX = pa * this.x + pb * this.y + parent.worldX;        rootBone.worldY = pc * this.x + pd * this.y + parent.worldY;        let rotationY = rootBone.rotation + 90 + rootBone.shearY;        let la = MathUtils.cosDeg(rootBone.rotation + rootBone.shearX) * rootBone.scaleX;        let lb = MathUtils.cosDeg(rotationY) * rootBone.scaleY;        let lc = MathUtils.sinDeg(rootBone.rotation + rootBone.shearX) * rootBone.scaleX;        let ld = MathUtils.sinDeg(rotationY) * rootBone.scaleY;        rootBone.a = (pa * la + pb * lc) * this.scaleX;        rootBone.b = (pa * lb + pb * ld) * this.scaleX;        rootBone.c = (pc * la + pd * lc) * this.scaleY;        rootBone.d = (pc * lb + pd * ld) * this.scaleY;        let updateCache = this._updateCache;        for (let i = 0, n = updateCache.length; i < n; i++) {          let updatable = updateCache[i];          if (updatable != rootBone)            updatable.update();        }      }      setToSetupPose() {        this.setBonesToSetupPose();        this.setSlotsToSetupPose();      }      setBonesToSetupPose() {        let bones = this.bones;        for (let i = 0, n = bones.length; i < n; i++)          bones[i].setToSetupPose();        let ikConstraints = this.ikConstraints;        for (let i = 0, n = ikConstraints.length; i < n; i++) {          let constraint = ikConstraints[i];          constraint.mix = constraint.data.mix;          constraint.softness = constraint.data.softness;          constraint.bendDirection = constraint.data.bendDirection;          constraint.compress = constraint.data.compress;          constraint.stretch = constraint.data.stretch;        }        let transformConstraints = this.transformConstraints;        for (let i = 0, n = transformConstraints.length; i < n; i++) {          let constraint = transformConstraints[i];          let data = constraint.data;          constraint.mixRotate = data.mixRotate;          constraint.mixX = data.mixX;          constraint.mixY = data.mixY;          constraint.mixScaleX = data.mixScaleX;          constraint.mixScaleY = data.mixScaleY;          constraint.mixShearY = data.mixShearY;        }        let pathConstraints = this.pathConstraints;        for (let i = 0, n = pathConstraints.length; i < n; i++) {          let constraint = pathConstraints[i];          let data = constraint.data;          constraint.position = data.position;          constraint.spacing = data.spacing;          constraint.mixRotate = data.mixRotate;          constraint.mixX = data.mixX;          constraint.mixY = data.mixY;        }      }      setSlotsToSetupPose() {        let slots = this.slots;        Utils.arrayCopy(slots, 0, this.drawOrder, 0, slots.length);        for (let i = 0, n = slots.length; i < n; i++)          slots[i].setToSetupPose();      }      getRootBone() {        if (this.bones.length == 0)          return null;        return this.bones[0];      }      findBone(boneName) {        if (!boneName)          throw new Error("boneName cannot be null.");        let bones = this.bones;        for (let i = 0, n = bones.length; i < n; i++) {          let bone = bones[i];          if (bone.data.name == boneName)            return bone;        }        return null;      }      findSlot(slotName) {        if (!slotName)          throw new Error("slotName cannot be null.");        let slots = this.slots;        for (let i = 0, n = slots.length; i < n; i++) {          let slot = slots[i];          if (slot.data.name == slotName)            return slot;        }        return null;      }      setSkinByName(skinName) {        let skin = this.data.findSkin(skinName);        if (!skin)          throw new Error("Skin not found: " + skinName);        this.setSkin(skin);      }      setSkin(newSkin) {        if (newSkin == this.skin)          return;        if (newSkin) {          if (this.skin)            newSkin.attachAll(this, this.skin);          else {            let slots = this.slots;            for (let i = 0, n = slots.length; i < n; i++) {              let slot = slots[i];              let name = slot.data.attachmentName;              if (name) {                let attachment = newSkin.getAttachment(i, name);                if (attachment)                  slot.setAttachment(attachment);              }            }          }        }        this.skin = newSkin;        this.updateCache();      }      getAttachmentByName(slotName, attachmentName) {        return this.getAttachment(this.data.findSlot(slotName).index, attachmentName);      }      getAttachment(slotIndex, attachmentName) {        if (!attachmentName)          throw new Error("attachmentName cannot be null.");        if (this.skin) {          let attachment = this.skin.getAttachment(slotIndex, attachmentName);          if (attachment)            return attachment;        }        if (this.data.defaultSkin)          return this.data.defaultSkin.getAttachment(slotIndex, attachmentName);        return null;      }      setAttachment(slotName, attachmentName) {        if (!slotName)          throw new Error("slotName cannot be null.");        let slots = this.slots;        for (let i = 0, n = slots.length; i < n; i++) {          let slot = slots[i];          if (slot.data.name == slotName) {            let attachment = null;            if (attachmentName) {              attachment = this.getAttachment(i, attachmentName);              if (!attachment)                throw new Error("Attachment not found: " + attachmentName + ", for slot: " + slotName);            }            slot.setAttachment(attachment);            return;          }        }        throw new Error("Slot not found: " + slotName);      }      findIkConstraint(constraintName) {        if (!constraintName)          throw new Error("constraintName cannot be null.");        let ikConstraints = this.ikConstraints;        for (let i = 0, n = ikConstraints.length; i < n; i++) {          let ikConstraint = ikConstraints[i];          if (ikConstraint.data.name == constraintName)            return ikConstraint;        }        return null;      }      findTransformConstraint(constraintName) {        if (!constraintName)          throw new Error("constraintName cannot be null.");        let transformConstraints = this.transformConstraints;        for (let i = 0, n = transformConstraints.length; i < n; i++) {          let constraint = transformConstraints[i];          if (constraint.data.name == constraintName)            return constraint;        }        return null;      }      findPathConstraint(constraintName) {        if (!constraintName)          throw new Error("constraintName cannot be null.");        let pathConstraints = this.pathConstraints;        for (let i = 0, n = pathConstraints.length; i < n; i++) {          let constraint = pathConstraints[i];          if (constraint.data.name == constraintName)            return constraint;        }        return null;      }      getBoundsRect() {        let offset = new Vector2();        let size = new Vector2();        this.getBounds(offset, size);        return { x: offset.x, y: offset.y, width: size.x, height: size.y };      }      getBounds(offset, size, temp = new Array(2)) {        if (!offset)          throw new Error("offset cannot be null.");        if (!size)          throw new Error("size cannot be null.");        let drawOrder = this.drawOrder;        let minX = Number.POSITIVE_INFINITY, minY = Number.POSITIVE_INFINITY, maxX = Number.NEGATIVE_INFINITY, maxY = Number.NEGATIVE_INFINITY;        for (let i = 0, n = drawOrder.length; i < n; i++) {          let slot = drawOrder[i];          if (!slot.bone.active)            continue;          let verticesLength = 0;          let vertices = null;          let attachment = slot.getAttachment();          if (attachment instanceof RegionAttachment) {            verticesLength = 8;            vertices = Utils.setArraySize(temp, verticesLength, 0);            attachment.computeWorldVertices(slot.bone, vertices, 0, 2);          } else if (attachment instanceof MeshAttachment) {            let mesh = attachment;            verticesLength = mesh.worldVerticesLength;            vertices = Utils.setArraySize(temp, verticesLength, 0);            mesh.computeWorldVertices(slot, 0, verticesLength, vertices, 0, 2);          }          if (vertices) {            for (let ii = 0, nn = vertices.length; ii < nn; ii += 2) {              let x = vertices[ii], y = vertices[ii + 1];              minX = Math.min(minX, x);              minY = Math.min(minY, y);              maxX = Math.max(maxX, x);              maxY = Math.max(maxY, y);            }          }        }        offset.set(minX, minY);        size.set(maxX - minX, maxY - minY);      }      update(delta) {        this.time += delta;      }    };      // spine-core/src/SkeletonData.ts    var SkeletonData = class {      constructor() {        this.name = null;        this.bones = new Array();        this.slots = new Array();        this.skins = new Array();        this.defaultSkin = null;        this.events = new Array();        this.animations = new Array();        this.ikConstraints = new Array();        this.transformConstraints = new Array();        this.pathConstraints = new Array();        this.x = 0;        this.y = 0;        this.width = 0;        this.height = 0;        this.version = null;        this.hash = null;        this.fps = 0;        this.imagesPath = null;        this.audioPath = null;      }      findBone(boneName) {        if (!boneName)          throw new Error("boneName cannot be null.");        let bones = this.bones;        for (let i = 0, n = bones.length; i < n; i++) {          let bone = bones[i];          if (bone.name == boneName)            return bone;        }        return null;      }      findSlot(slotName) {        if (!slotName)          throw new Error("slotName cannot be null.");        let slots = this.slots;        for (let i = 0, n = slots.length; i < n; i++) {          let slot = slots[i];          if (slot.name == slotName)            return slot;        }        return null;      }      findSkin(skinName) {        if (!skinName)          throw new Error("skinName cannot be null.");        let skins = this.skins;        for (let i = 0, n = skins.length; i < n; i++) {          let skin = skins[i];          if (skin.name == skinName)            return skin;        }        return null;      }      findEvent(eventDataName) {        if (!eventDataName)          throw new Error("eventDataName cannot be null.");        let events = this.events;        for (let i = 0, n = events.length; i < n; i++) {          let event = events[i];          if (event.name == eventDataName)            return event;        }        return null;      }      findAnimation(animationName) {        if (!animationName)          throw new Error("animationName cannot be null.");        let animations = this.animations;        for (let i = 0, n = animations.length; i < n; i++) {          let animation = animations[i];          if (animation.name == animationName)            return animation;        }        return null;      }      findIkConstraint(constraintName) {        if (!constraintName)          throw new Error("constraintName cannot be null.");        let ikConstraints = this.ikConstraints;        for (let i = 0, n = ikConstraints.length; i < n; i++) {          let constraint = ikConstraints[i];          if (constraint.name == constraintName)            return constraint;        }        return null;      }      findTransformConstraint(constraintName) {        if (!constraintName)          throw new Error("constraintName cannot be null.");        let transformConstraints = this.transformConstraints;        for (let i = 0, n = transformConstraints.length; i < n; i++) {          let constraint = transformConstraints[i];          if (constraint.name == constraintName)            return constraint;        }        return null;      }      findPathConstraint(constraintName) {        if (!constraintName)          throw new Error("constraintName cannot be null.");        let pathConstraints = this.pathConstraints;        for (let i = 0, n = pathConstraints.length; i < n; i++) {          let constraint = pathConstraints[i];          if (constraint.name == constraintName)            return constraint;        }        return null;      }    };      // spine-core/src/Skin.ts    var SkinEntry = class {      constructor(slotIndex = 0, name = null, attachment = null) {        this.slotIndex = slotIndex;        this.name = name;        this.attachment = attachment;      }    };    var Skin = class {      constructor(name) {        this.name = null;        this.attachments = new Array();        this.bones = Array();        this.constraints = new Array();        if (!name)          throw new Error("name cannot be null.");        this.name = name;      }      setAttachment(slotIndex, name, attachment) {        if (!attachment)          throw new Error("attachment cannot be null.");        let attachments = this.attachments;        if (slotIndex >= attachments.length)          attachments.length = slotIndex + 1;        if (!attachments[slotIndex])          attachments[slotIndex] = {};        attachments[slotIndex][name] = attachment;      }      addSkin(skin) {        for (let i = 0; i < skin.bones.length; i++) {          let bone = skin.bones[i];          let contained = false;          for (let ii = 0; ii < this.bones.length; ii++) {            if (this.bones[ii] == bone) {              contained = true;              break;            }          }          if (!contained)            this.bones.push(bone);        }        for (let i = 0; i < skin.constraints.length; i++) {          let constraint = skin.constraints[i];          let contained = false;          for (let ii = 0; ii < this.constraints.length; ii++) {            if (this.constraints[ii] == constraint) {              contained = true;              break;            }          }          if (!contained)            this.constraints.push(constraint);        }        let attachments = skin.getAttachments();        for (let i = 0; i < attachments.length; i++) {          var attachment = attachments[i];          this.setAttachment(attachment.slotIndex, attachment.name, attachment.attachment);        }      }      copySkin(skin) {        for (let i = 0; i < skin.bones.length; i++) {          let bone = skin.bones[i];          let contained = false;          for (let ii = 0; ii < this.bones.length; ii++) {            if (this.bones[ii] == bone) {              contained = true;              break;            }          }          if (!contained)            this.bones.push(bone);        }        for (let i = 0; i < skin.constraints.length; i++) {          let constraint = skin.constraints[i];          let contained = false;          for (let ii = 0; ii < this.constraints.length; ii++) {            if (this.constraints[ii] == constraint) {              contained = true;              break;            }          }          if (!contained)            this.constraints.push(constraint);        }        let attachments = skin.getAttachments();        for (let i = 0; i < attachments.length; i++) {          var attachment = attachments[i];          if (!attachment.attachment)            continue;          if (attachment.attachment instanceof MeshAttachment) {            attachment.attachment = attachment.attachment.newLinkedMesh();            this.setAttachment(attachment.slotIndex, attachment.name, attachment.attachment);          } else {            attachment.attachment = attachment.attachment.copy();            this.setAttachment(attachment.slotIndex, attachment.name, attachment.attachment);          }        }      }      getAttachment(slotIndex, name) {        let dictionary = this.attachments[slotIndex];        return dictionary ? dictionary[name] : null;      }      removeAttachment(slotIndex, name) {        let dictionary = this.attachments[slotIndex];        if (dictionary)          dictionary[name] = null;      }      getAttachments() {        let entries = new Array();        for (var i = 0; i < this.attachments.length; i++) {          let slotAttachments = this.attachments[i];          if (slotAttachments) {            for (let name in slotAttachments) {              let attachment = slotAttachments[name];              if (attachment)                entries.push(new SkinEntry(i, name, attachment));            }          }        }        return entries;      }      getAttachmentsForSlot(slotIndex, attachments) {        let slotAttachments = this.attachments[slotIndex];        if (slotAttachments) {          for (let name in slotAttachments) {            let attachment = slotAttachments[name];            if (attachment)              attachments.push(new SkinEntry(slotIndex, name, attachment));          }        }      }      clear() {        this.attachments.length = 0;        this.bones.length = 0;        this.constraints.length = 0;      }      attachAll(skeleton, oldSkin) {        let slotIndex = 0;        for (let i = 0; i < skeleton.slots.length; i++) {          let slot = skeleton.slots[i];          let slotAttachment = slot.getAttachment();          if (slotAttachment && slotIndex < oldSkin.attachments.length) {            let dictionary = oldSkin.attachments[slotIndex];            for (let key in dictionary) {              let skinAttachment = dictionary[key];              if (slotAttachment == skinAttachment) {                let attachment = this.getAttachment(slotIndex, key);                if (attachment)                  slot.setAttachment(attachment);                break;              }            }          }          slotIndex++;        }      }    };      // spine-core/src/SlotData.ts    var SlotData = class {      constructor(index, name, boneData) {        this.index = 0;        this.name = null;        this.boneData = null;        this.color = new Color(1, 1, 1, 1);        this.darkColor = null;        this.attachmentName = null;        this.blendMode = null;        if (index < 0)          throw new Error("index must be >= 0.");        if (!name)          throw new Error("name cannot be null.");        if (!boneData)          throw new Error("boneData cannot be null.");        this.index = index;        this.name = name;        this.boneData = boneData;      }    };    var BlendMode;    (function(BlendMode3) {      BlendMode3[BlendMode3["Normal"] = 0] = "Normal";      BlendMode3[BlendMode3["Additive"] = 1] = "Additive";      BlendMode3[BlendMode3["Multiply"] = 2] = "Multiply";      BlendMode3[BlendMode3["Screen"] = 3] = "Screen";    })(BlendMode || (BlendMode = {}));      // spine-core/src/TransformConstraintData.ts    var TransformConstraintData = class extends ConstraintData {      constructor(name) {        super(name, 0, false);        this.bones = new Array();        this.target = null;        this.mixRotate = 0;        this.mixX = 0;        this.mixY = 0;        this.mixScaleX = 0;        this.mixScaleY = 0;        this.mixShearY = 0;        this.offsetRotation = 0;        this.offsetX = 0;        this.offsetY = 0;        this.offsetScaleX = 0;        this.offsetScaleY = 0;        this.offsetShearY = 0;        this.relative = false;        this.local = false;      }    };      // spine-core/src/SkeletonBinary.ts    var SkeletonBinary = class {      constructor(attachmentLoader) {        this.scale = 1;        this.attachmentLoader = null;        this.linkedMeshes = new Array();        this.attachmentLoader = attachmentLoader;      }      readSkeletonData(binary) {        let scale = this.scale;        let skeletonData = new SkeletonData();        skeletonData.name = "";        let input = new BinaryInput(binary);        let lowHash = input.readInt32();        let highHash = input.readInt32();        skeletonData.hash = highHash == 0 && lowHash == 0 ? null : highHash.toString(16) + lowHash.toString(16);        skeletonData.version = input.readString();        skeletonData.x = input.readFloat();        skeletonData.y = input.readFloat();        skeletonData.width = input.readFloat();        skeletonData.height = input.readFloat();        let nonessential = input.readBoolean();        if (nonessential) {          skeletonData.fps = input.readFloat();          skeletonData.imagesPath = input.readString();          skeletonData.audioPath = input.readString();        }        let n = 0;        n = input.readInt(true);        for (let i = 0; i < n; i++)          input.strings.push(input.readString());        n = input.readInt(true);        for (let i = 0; i < n; i++) {          let name = input.readString();          let parent = i == 0 ? null : skeletonData.bones[input.readInt(true)];          let data = new BoneData(i, name, parent);          data.rotation = input.readFloat();          data.x = input.readFloat() * scale;          data.y = input.readFloat() * scale;          data.scaleX = input.readFloat();          data.scaleY = input.readFloat();          data.shearX = input.readFloat();          data.shearY = input.readFloat();          data.length = input.readFloat() * scale;          data.transformMode = input.readInt(true);          data.skinRequired = input.readBoolean();          if (nonessential)            Color.rgba8888ToColor(data.color, input.readInt32());          skeletonData.bones.push(data);        }        n = input.readInt(true);        for (let i = 0; i < n; i++) {          let slotName = input.readString();          let boneData = skeletonData.bones[input.readInt(true)];          let data = new SlotData(i, slotName, boneData);          Color.rgba8888ToColor(data.color, input.readInt32());          let darkColor = input.readInt32();          if (darkColor != -1)            Color.rgb888ToColor(data.darkColor = new Color(), darkColor);          data.attachmentName = input.readStringRef();          data.blendMode = input.readInt(true);          skeletonData.slots.push(data);        }        n = input.readInt(true);        for (let i = 0, nn; i < n; i++) {          let data = new IkConstraintData(input.readString());          data.order = input.readInt(true);          data.skinRequired = input.readBoolean();          nn = input.readInt(true);          for (let ii = 0; ii < nn; ii++)            data.bones.push(skeletonData.bones[input.readInt(true)]);          data.target = skeletonData.bones[input.readInt(true)];          data.mix = input.readFloat();          data.softness = input.readFloat() * scale;          data.bendDirection = input.readByte();          data.compress = input.readBoolean();          data.stretch = input.readBoolean();          data.uniform = input.readBoolean();          skeletonData.ikConstraints.push(data);        }        n = input.readInt(true);        for (let i = 0, nn; i < n; i++) {          let data = new TransformConstraintData(input.readString());          data.order = input.readInt(true);          data.skinRequired = input.readBoolean();          nn = input.readInt(true);          for (let ii = 0; ii < nn; ii++)            data.bones.push(skeletonData.bones[input.readInt(true)]);          data.target = skeletonData.bones[input.readInt(true)];          data.local = input.readBoolean();          data.relative = input.readBoolean();          data.offsetRotation = input.readFloat();          data.offsetX = input.readFloat() * scale;          data.offsetY = input.readFloat() * scale;          data.offsetScaleX = input.readFloat();          data.offsetScaleY = input.readFloat();          data.offsetShearY = input.readFloat();          data.mixRotate = input.readFloat();          data.mixX = input.readFloat();          data.mixY = input.readFloat();          data.mixScaleX = input.readFloat();          data.mixScaleY = input.readFloat();          data.mixShearY = input.readFloat();          skeletonData.transformConstraints.push(data);        }        n = input.readInt(true);        for (let i = 0, nn; i < n; i++) {          let data = new PathConstraintData(input.readString());          data.order = input.readInt(true);          data.skinRequired = input.readBoolean();          nn = input.readInt(true);          for (let ii = 0; ii < nn; ii++)            data.bones.push(skeletonData.bones[input.readInt(true)]);          data.target = skeletonData.slots[input.readInt(true)];          data.positionMode = input.readInt(true);          data.spacingMode = input.readInt(true);          data.rotateMode = input.readInt(true);          data.offsetRotation = input.readFloat();          data.position = input.readFloat();          if (data.positionMode == PositionMode.Fixed)            data.position *= scale;          data.spacing = input.readFloat();          if (data.spacingMode == SpacingMode.Length || data.spacingMode == SpacingMode.Fixed)            data.spacing *= scale;          data.mixRotate = input.readFloat();          data.mixX = input.readFloat();          data.mixY = input.readFloat();          skeletonData.pathConstraints.push(data);        }        let defaultSkin = this.readSkin(input, skeletonData, true, nonessential);        if (defaultSkin) {          skeletonData.defaultSkin = defaultSkin;          skeletonData.skins.push(defaultSkin);        }        {          let i = skeletonData.skins.length;          Utils.setArraySize(skeletonData.skins, n = i + input.readInt(true));          for (; i < n; i++)            skeletonData.skins[i] = this.readSkin(input, skeletonData, false, nonessential);        }        n = this.linkedMeshes.length;        for (let i = 0; i < n; i++) {          let linkedMesh = this.linkedMeshes[i];          let skin = !linkedMesh.skin ? skeletonData.defaultSkin : skeletonData.findSkin(linkedMesh.skin);          let parent = skin.getAttachment(linkedMesh.slotIndex, linkedMesh.parent);          linkedMesh.mesh.deformAttachment = linkedMesh.inheritDeform ? parent : linkedMesh.mesh;          linkedMesh.mesh.setParentMesh(parent);          linkedMesh.mesh.updateUVs();        }        this.linkedMeshes.length = 0;        n = input.readInt(true);        for (let i = 0; i < n; i++) {          let data = new EventData(input.readStringRef());          data.intValue = input.readInt(false);          data.floatValue = input.readFloat();          data.stringValue = input.readString();          data.audioPath = input.readString();          if (data.audioPath) {            data.volume = input.readFloat();            data.balance = input.readFloat();          }          skeletonData.events.push(data);        }        n = input.readInt(true);        for (let i = 0; i < n; i++)          skeletonData.animations.push(this.readAnimation(input, input.readString(), skeletonData));        return skeletonData;      }      readSkin(input, skeletonData, defaultSkin, nonessential) {        let skin = null;        let slotCount = 0;        if (defaultSkin) {          slotCount = input.readInt(true);          if (slotCount == 0)            return null;          skin = new Skin("default");        } else {          skin = new Skin(input.readStringRef());          skin.bones.length = input.readInt(true);          for (let i = 0, n = skin.bones.length; i < n; i++)            skin.bones[i] = skeletonData.bones[input.readInt(true)];          for (let i = 0, n = input.readInt(true); i < n; i++)            skin.constraints.push(skeletonData.ikConstraints[input.readInt(true)]);          for (let i = 0, n = input.readInt(true); i < n; i++)            skin.constraints.push(skeletonData.transformConstraints[input.readInt(true)]);          for (let i = 0, n = input.readInt(true); i < n; i++)            skin.constraints.push(skeletonData.pathConstraints[input.readInt(true)]);          slotCount = input.readInt(true);        }        for (let i = 0; i < slotCount; i++) {          let slotIndex = input.readInt(true);          for (let ii = 0, nn = input.readInt(true); ii < nn; ii++) {            let name = input.readStringRef();            let attachment = this.readAttachment(input, skeletonData, skin, slotIndex, name, nonessential);            if (attachment)              skin.setAttachment(slotIndex, name, attachment);          }        }        return skin;      }      readAttachment(input, skeletonData, skin, slotIndex, attachmentName, nonessential) {        let scale = this.scale;        let name = input.readStringRef();        if (!name)          name = attachmentName;        switch (input.readByte()) {          case AttachmentType.Region: {            let path = input.readStringRef();            let rotation = input.readFloat();            let x = input.readFloat();            let y = input.readFloat();            let scaleX = input.readFloat();            let scaleY = input.readFloat();            let width = input.readFloat();            let height = input.readFloat();            let color = input.readInt32();            if (!path)              path = name;            let region = this.attachmentLoader.newRegionAttachment(skin, name, path);            if (!region)              return null;            region.path = path;            region.x = x * scale;            region.y = y * scale;            region.scaleX = scaleX;            region.scaleY = scaleY;            region.rotation = rotation;            region.width = width * scale;            region.height = height * scale;            Color.rgba8888ToColor(region.color, color);            region.updateOffset();            return region;          }          case AttachmentType.BoundingBox: {            let vertexCount = input.readInt(true);            let vertices = this.readVertices(input, vertexCount);            let color = nonessential ? input.readInt32() : 0;            let box = this.attachmentLoader.newBoundingBoxAttachment(skin, name);            if (!box)              return null;            box.worldVerticesLength = vertexCount << 1;            box.vertices = vertices.vertices;            box.bones = vertices.bones;            if (nonessential)              Color.rgba8888ToColor(box.color, color);            return box;          }          case AttachmentType.Mesh: {            let path = input.readStringRef();            let color = input.readInt32();            let vertexCount = input.readInt(true);            let uvs = this.readFloatArray(input, vertexCount << 1, 1);            let triangles = this.readShortArray(input);            let vertices = this.readVertices(input, vertexCount);            let hullLength = input.readInt(true);            let edges = null;            let width = 0, height = 0;            if (nonessential) {              edges = this.readShortArray(input);              width = input.readFloat();              height = input.readFloat();            }            if (!path)              path = name;            let mesh = this.attachmentLoader.newMeshAttachment(skin, name, path);            if (!mesh)              return null;            mesh.path = path;            Color.rgba8888ToColor(mesh.color, color);            mesh.bones = vertices.bones;            mesh.vertices = vertices.vertices;            mesh.worldVerticesLength = vertexCount << 1;            mesh.triangles = triangles;            mesh.regionUVs = uvs;            mesh.updateUVs();            mesh.hullLength = hullLength << 1;            if (nonessential) {              mesh.edges = edges;              mesh.width = width * scale;              mesh.height = height * scale;            }            return mesh;          }          case AttachmentType.LinkedMesh: {            let path = input.readStringRef();            let color = input.readInt32();            let skinName = input.readStringRef();            let parent = input.readStringRef();            let inheritDeform = input.readBoolean();            let width = 0, height = 0;            if (nonessential) {              width = input.readFloat();              height = input.readFloat();            }            if (!path)              path = name;            let mesh = this.attachmentLoader.newMeshAttachment(skin, name, path);            if (!mesh)              return null;            mesh.path = path;            Color.rgba8888ToColor(mesh.color, color);            if (nonessential) {              mesh.width = width * scale;              mesh.height = height * scale;            }            this.linkedMeshes.push(new LinkedMesh(mesh, skinName, slotIndex, parent, inheritDeform));            return mesh;          }          case AttachmentType.Path: {            let closed2 = input.readBoolean();            let constantSpeed = input.readBoolean();            let vertexCount = input.readInt(true);            let vertices = this.readVertices(input, vertexCount);            let lengths = Utils.newArray(vertexCount / 3, 0);            for (let i = 0, n = lengths.length; i < n; i++)              lengths[i] = input.readFloat() * scale;            let color = nonessential ? input.readInt32() : 0;            let path = this.attachmentLoader.newPathAttachment(skin, name);            if (!path)              return null;            path.closed = closed2;            path.constantSpeed = constantSpeed;            path.worldVerticesLength = vertexCount << 1;            path.vertices = vertices.vertices;            path.bones = vertices.bones;            path.lengths = lengths;            if (nonessential)              Color.rgba8888ToColor(path.color, color);            return path;          }          case AttachmentType.Point: {            let rotation = input.readFloat();            let x = input.readFloat();            let y = input.readFloat();            let color = nonessential ? input.readInt32() : 0;            let point = this.attachmentLoader.newPointAttachment(skin, name);            if (!point)              return null;            point.x = x * scale;            point.y = y * scale;            point.rotation = rotation;            if (nonessential)              Color.rgba8888ToColor(point.color, color);            return point;          }          case AttachmentType.Clipping: {            let endSlotIndex = input.readInt(true);            let vertexCount = input.readInt(true);            let vertices = this.readVertices(input, vertexCount);            let color = nonessential ? input.readInt32() : 0;            let clip = this.attachmentLoader.newClippingAttachment(skin, name);            if (!clip)              return null;            clip.endSlot = skeletonData.slots[endSlotIndex];            clip.worldVerticesLength = vertexCount << 1;            clip.vertices = vertices.vertices;            clip.bones = vertices.bones;            if (nonessential)              Color.rgba8888ToColor(clip.color, color);            return clip;          }        }        return null;      }      readVertices(input, vertexCount) {        let scale = this.scale;        let verticesLength = vertexCount << 1;        let vertices = new Vertices();        if (!input.readBoolean()) {          vertices.vertices = this.readFloatArray(input, verticesLength, scale);          return vertices;        }        let weights = new Array();        let bonesArray = new Array();        for (let i = 0; i < vertexCount; i++) {          let boneCount = input.readInt(true);          bonesArray.push(boneCount);          for (let ii = 0; ii < boneCount; ii++) {            bonesArray.push(input.readInt(true));            weights.push(input.readFloat() * scale);            weights.push(input.readFloat() * scale);            weights.push(input.readFloat());          }        }        vertices.vertices = Utils.toFloatArray(weights);        vertices.bones = bonesArray;        return vertices;      }      readFloatArray(input, n, scale) {        let array = new Array(n);        if (scale == 1) {          for (let i = 0; i < n; i++)            array[i] = input.readFloat();        } else {          for (let i = 0; i < n; i++)            array[i] = input.readFloat() * scale;        }        return array;      }      readShortArray(input) {        let n = input.readInt(true);        let array = new Array(n);        for (let i = 0; i < n; i++)          array[i] = input.readShort();        return array;      }      readAnimation(input, name, skeletonData) {        input.readInt(true);        let timelines = new Array();        let scale = this.scale;        let tempColor1 = new Color();        let tempColor2 = new Color();        for (let i = 0, n = input.readInt(true); i < n; i++) {          let slotIndex = input.readInt(true);          for (let ii = 0, nn = input.readInt(true); ii < nn; ii++) {            let timelineType = input.readByte();            let frameCount = input.readInt(true);            let frameLast = frameCount - 1;            switch (timelineType) {              case SLOT_ATTACHMENT: {                let timeline = new AttachmentTimeline(frameCount, slotIndex);                for (let frame = 0; frame < frameCount; frame++)                  timeline.setFrame(frame, input.readFloat(), input.readStringRef());                timelines.push(timeline);                break;              }              case SLOT_RGBA: {                let bezierCount = input.readInt(true);                let timeline = new RGBATimeline(frameCount, bezierCount, slotIndex);                let time = input.readFloat();                let r = input.readUnsignedByte() / 255;                let g = input.readUnsignedByte() / 255;                let b = input.readUnsignedByte() / 255;                let a = input.readUnsignedByte() / 255;                for (let frame = 0, bezier = 0; ; frame++) {                  timeline.setFrame(frame, time, r, g, b, a);                  if (frame == frameLast)                    break;                  let time2 = input.readFloat();                  let r2 = input.readUnsignedByte() / 255;                  let g2 = input.readUnsignedByte() / 255;                  let b2 = input.readUnsignedByte() / 255;                  let a2 = input.readUnsignedByte() / 255;                  switch (input.readByte()) {                    case CURVE_STEPPED:                      timeline.setStepped(frame);                      break;                    case CURVE_BEZIER:                      setBezier(input, timeline, bezier++, frame, 0, time, time2, r, r2, 1);                      setBezier(input, timeline, bezier++, frame, 1, time, time2, g, g2, 1);                      setBezier(input, timeline, bezier++, frame, 2, time, time2, b, b2, 1);                      setBezier(input, timeline, bezier++, frame, 3, time, time2, a, a2, 1);                  }                  time = time2;                  r = r2;                  g = g2;                  b = b2;                  a = a2;                }                timelines.push(timeline);                break;              }              case SLOT_RGB: {                let bezierCount = input.readInt(true);                let timeline = new RGBTimeline(frameCount, bezierCount, slotIndex);                let time = input.readFloat();                let r = input.readUnsignedByte() / 255;                let g = input.readUnsignedByte() / 255;                let b = input.readUnsignedByte() / 255;                for (let frame = 0, bezier = 0; ; frame++) {                  timeline.setFrame(frame, time, r, g, b);                  if (frame == frameLast)                    break;                  let time2 = input.readFloat();                  let r2 = input.readUnsignedByte() / 255;                  let g2 = input.readUnsignedByte() / 255;                  let b2 = input.readUnsignedByte() / 255;                  switch (input.readByte()) {                    case CURVE_STEPPED:                      timeline.setStepped(frame);                      break;                    case CURVE_BEZIER:                      setBezier(input, timeline, bezier++, frame, 0, time, time2, r, r2, 1);                      setBezier(input, timeline, bezier++, frame, 1, time, time2, g, g2, 1);                      setBezier(input, timeline, bezier++, frame, 2, time, time2, b, b2, 1);                  }                  time = time2;                  r = r2;                  g = g2;                  b = b2;                }                timelines.push(timeline);                break;              }              case SLOT_RGBA2: {                let bezierCount = input.readInt(true);                let timeline = new RGBA2Timeline(frameCount, bezierCount, slotIndex);                let time = input.readFloat();                let r = input.readUnsignedByte() / 255;                let g = input.readUnsignedByte() / 255;                let b = input.readUnsignedByte() / 255;                let a = input.readUnsignedByte() / 255;                let r2 = input.readUnsignedByte() / 255;                let g2 = input.readUnsignedByte() / 255;                let b2 = input.readUnsignedByte() / 255;                for (let frame = 0, bezier = 0; ; frame++) {                  timeline.setFrame(frame, time, r, g, b, a, r2, g2, b2);                  if (frame == frameLast)                    break;                  let time2 = input.readFloat();                  let nr = input.readUnsignedByte() / 255;                  let ng = input.readUnsignedByte() / 255;                  let nb = input.readUnsignedByte() / 255;                  let na = input.readUnsignedByte() / 255;                  let nr2 = input.readUnsignedByte() / 255;                  let ng2 = input.readUnsignedByte() / 255;                  let nb2 = input.readUnsignedByte() / 255;                  switch (input.readByte()) {                    case CURVE_STEPPED:                      timeline.setStepped(frame);                      break;                    case CURVE_BEZIER:                      setBezier(input, timeline, bezier++, frame, 0, time, time2, r, nr, 1);                      setBezier(input, timeline, bezier++, frame, 1, time, time2, g, ng, 1);                      setBezier(input, timeline, bezier++, frame, 2, time, time2, b, nb, 1);                      setBezier(input, timeline, bezier++, frame, 3, time, time2, a, na, 1);                      setBezier(input, timeline, bezier++, frame, 4, time, time2, r2, nr2, 1);                      setBezier(input, timeline, bezier++, frame, 5, time, time2, g2, ng2, 1);                      setBezier(input, timeline, bezier++, frame, 6, time, time2, b2, nb2, 1);                  }                  time = time2;                  r = nr;                  g = ng;                  b = nb;                  a = na;                  r2 = nr2;                  g2 = ng2;                  b2 = nb2;                }                timelines.push(timeline);                break;              }              case SLOT_RGB2: {                let bezierCount = input.readInt(true);                let timeline = new RGB2Timeline(frameCount, bezierCount, slotIndex);                let time = input.readFloat();                let r = input.readUnsignedByte() / 255;                let g = input.readUnsignedByte() / 255;                let b = input.readUnsignedByte() / 255;                let r2 = input.readUnsignedByte() / 255;                let g2 = input.readUnsignedByte() / 255;                let b2 = input.readUnsignedByte() / 255;                for (let frame = 0, bezier = 0; ; frame++) {                  timeline.setFrame(frame, time, r, g, b, r2, g2, b2);                  if (frame == frameLast)                    break;                  let time2 = input.readFloat();                  let nr = input.readUnsignedByte() / 255;                  let ng = input.readUnsignedByte() / 255;                  let nb = input.readUnsignedByte() / 255;                  let nr2 = input.readUnsignedByte() / 255;                  let ng2 = input.readUnsignedByte() / 255;                  let nb2 = input.readUnsignedByte() / 255;                  switch (input.readByte()) {                    case CURVE_STEPPED:                      timeline.setStepped(frame);                      break;                    case CURVE_BEZIER:                      setBezier(input, timeline, bezier++, frame, 0, time, time2, r, nr, 1);                      setBezier(input, timeline, bezier++, frame, 1, time, time2, g, ng, 1);                      setBezier(input, timeline, bezier++, frame, 2, time, time2, b, nb, 1);                      setBezier(input, timeline, bezier++, frame, 3, time, time2, r2, nr2, 1);                      setBezier(input, timeline, bezier++, frame, 4, time, time2, g2, ng2, 1);                      setBezier(input, timeline, bezier++, frame, 5, time, time2, b2, nb2, 1);                  }                  time = time2;                  r = nr;                  g = ng;                  b = nb;                  r2 = nr2;                  g2 = ng2;                  b2 = nb2;                }                timelines.push(timeline);                break;              }              case SLOT_ALPHA: {                let timeline = new AlphaTimeline(frameCount, input.readInt(true), slotIndex);                let time = input.readFloat(), a = input.readUnsignedByte() / 255;                for (let frame = 0, bezier = 0; ; frame++) {                  timeline.setFrame(frame, time, a);                  if (frame == frameLast)                    break;                  let time2 = input.readFloat();                  let a2 = input.readUnsignedByte() / 255;                  switch (input.readByte()) {                    case CURVE_STEPPED:                      timeline.setStepped(frame);                      break;                    case CURVE_BEZIER:                      setBezier(input, timeline, bezier++, frame, 0, time, time2, a, a2, 1);                  }                  time = time2;                  a = a2;                }                timelines.push(timeline);                break;              }            }          }        }        for (let i = 0, n = input.readInt(true); i < n; i++) {          let boneIndex = input.readInt(true);          for (let ii = 0, nn = input.readInt(true); ii < nn; ii++) {            let type = input.readByte(), frameCount = input.readInt(true), bezierCount = input.readInt(true);            switch (type) {              case BONE_ROTATE:                timelines.push(readTimeline1(input, new RotateTimeline(frameCount, bezierCount, boneIndex), 1));                break;              case BONE_TRANSLATE:                timelines.push(readTimeline2(input, new TranslateTimeline(frameCount, bezierCount, boneIndex), scale));                break;              case BONE_TRANSLATEX:                timelines.push(readTimeline1(input, new TranslateXTimeline(frameCount, bezierCount, boneIndex), scale));                break;              case BONE_TRANSLATEY:                timelines.push(readTimeline1(input, new TranslateYTimeline(frameCount, bezierCount, boneIndex), scale));                break;              case BONE_SCALE:                timelines.push(readTimeline2(input, new ScaleTimeline(frameCount, bezierCount, boneIndex), 1));                break;              case BONE_SCALEX:                timelines.push(readTimeline1(input, new ScaleXTimeline(frameCount, bezierCount, boneIndex), 1));                break;              case BONE_SCALEY:                timelines.push(readTimeline1(input, new ScaleYTimeline(frameCount, bezierCount, boneIndex), 1));                break;              case BONE_SHEAR:                timelines.push(readTimeline2(input, new ShearTimeline(frameCount, bezierCount, boneIndex), 1));                break;              case BONE_SHEARX:                timelines.push(readTimeline1(input, new ShearXTimeline(frameCount, bezierCount, boneIndex), 1));                break;              case BONE_SHEARY:                timelines.push(readTimeline1(input, new ShearYTimeline(frameCount, bezierCount, boneIndex), 1));            }          }        }        for (let i = 0, n = input.readInt(true); i < n; i++) {          let index = input.readInt(true), frameCount = input.readInt(true), frameLast = frameCount - 1;          let timeline = new IkConstraintTimeline(frameCount, input.readInt(true), index);          let time = input.readFloat(), mix = input.readFloat(), softness = input.readFloat() * scale;          for (let frame = 0, bezier = 0; ; frame++) {            timeline.setFrame(frame, time, mix, softness, input.readByte(), input.readBoolean(), input.readBoolean());            if (frame == frameLast)              break;            let time2 = input.readFloat(), mix2 = input.readFloat(), softness2 = input.readFloat() * scale;            switch (input.readByte()) {              case CURVE_STEPPED:                timeline.setStepped(frame);                break;              case CURVE_BEZIER:                setBezier(input, timeline, bezier++, frame, 0, time, time2, mix, mix2, 1);                setBezier(input, timeline, bezier++, frame, 1, time, time2, softness, softness2, scale);            }            time = time2;            mix = mix2;            softness = softness2;          }          timelines.push(timeline);        }        for (let i = 0, n = input.readInt(true); i < n; i++) {          let index = input.readInt(true), frameCount = input.readInt(true), frameLast = frameCount - 1;          let timeline = new TransformConstraintTimeline(frameCount, input.readInt(true), index);          let time = input.readFloat(), mixRotate = input.readFloat(), mixX = input.readFloat(), mixY = input.readFloat(), mixScaleX = input.readFloat(), mixScaleY = input.readFloat(), mixShearY = input.readFloat();          for (let frame = 0, bezier = 0; ; frame++) {            timeline.setFrame(frame, time, mixRotate, mixX, mixY, mixScaleX, mixScaleY, mixShearY);            if (frame == frameLast)              break;            let time2 = input.readFloat(), mixRotate2 = input.readFloat(), mixX2 = input.readFloat(), mixY2 = input.readFloat(), mixScaleX2 = input.readFloat(), mixScaleY2 = input.readFloat(), mixShearY2 = input.readFloat();            switch (input.readByte()) {              case CURVE_STEPPED:                timeline.setStepped(frame);                break;              case CURVE_BEZIER:                setBezier(input, timeline, bezier++, frame, 0, time, time2, mixRotate, mixRotate2, 1);                setBezier(input, timeline, bezier++, frame, 1, time, time2, mixX, mixX2, 1);                setBezier(input, timeline, bezier++, frame, 2, time, time2, mixY, mixY2, 1);                setBezier(input, timeline, bezier++, frame, 3, time, time2, mixScaleX, mixScaleX2, 1);                setBezier(input, timeline, bezier++, frame, 4, time, time2, mixScaleY, mixScaleY2, 1);                setBezier(input, timeline, bezier++, frame, 5, time, time2, mixShearY, mixShearY2, 1);            }            time = time2;            mixRotate = mixRotate2;            mixX = mixX2;            mixY = mixY2;            mixScaleX = mixScaleX2;            mixScaleY = mixScaleY2;            mixShearY = mixShearY2;          }          timelines.push(timeline);        }        for (let i = 0, n = input.readInt(true); i < n; i++) {          let index = input.readInt(true);          let data = skeletonData.pathConstraints[index];          for (let ii = 0, nn = input.readInt(true); ii < nn; ii++) {            switch (input.readByte()) {              case PATH_POSITION:                timelines.push(readTimeline1(input, new PathConstraintPositionTimeline(input.readInt(true), input.readInt(true), index), data.positionMode == PositionMode.Fixed ? scale : 1));                break;              case PATH_SPACING:                timelines.push(readTimeline1(input, new PathConstraintSpacingTimeline(input.readInt(true), input.readInt(true), index), data.spacingMode == SpacingMode.Length || data.spacingMode == SpacingMode.Fixed ? scale : 1));                break;              case PATH_MIX:                let timeline = new PathConstraintMixTimeline(input.readInt(true), input.readInt(true), index);                let time = input.readFloat(), mixRotate = input.readFloat(), mixX = input.readFloat(), mixY = input.readFloat();                for (let frame = 0, bezier = 0, frameLast = timeline.getFrameCount() - 1; ; frame++) {                  timeline.setFrame(frame, time, mixRotate, mixX, mixY);                  if (frame == frameLast)                    break;                  let time2 = input.readFloat(), mixRotate2 = input.readFloat(), mixX2 = input.readFloat(), mixY2 = input.readFloat();                  switch (input.readByte()) {                    case CURVE_STEPPED:                      timeline.setStepped(frame);                      break;                    case CURVE_BEZIER:                      setBezier(input, timeline, bezier++, frame, 0, time, time2, mixRotate, mixRotate2, 1);                      setBezier(input, timeline, bezier++, frame, 1, time, time2, mixX, mixX2, 1);                      setBezier(input, timeline, bezier++, frame, 2, time, time2, mixY, mixY2, 1);                  }                  time = time2;                  mixRotate = mixRotate2;                  mixX = mixX2;                  mixY = mixY2;                }                timelines.push(timeline);            }          }        }        for (let i = 0, n = input.readInt(true); i < n; i++) {          let skin = skeletonData.skins[input.readInt(true)];          for (let ii = 0, nn = input.readInt(true); ii < nn; ii++) {            let slotIndex = input.readInt(true);            for (let iii = 0, nnn = input.readInt(true); iii < nnn; iii++) {              let attachmentName = input.readStringRef();              let attachment = skin.getAttachment(slotIndex, attachmentName);              let weighted = attachment.bones;              let vertices = attachment.vertices;              let deformLength = weighted ? vertices.length / 3 * 2 : vertices.length;              let frameCount = input.readInt(true);              let frameLast = frameCount - 1;              let bezierCount = input.readInt(true);              let timeline = new DeformTimeline(frameCount, bezierCount, slotIndex, attachment);              let time = input.readFloat();              for (let frame = 0, bezier = 0; ; frame++) {                let deform;                let end = input.readInt(true);                if (end == 0)                  deform = weighted ? Utils.newFloatArray(deformLength) : vertices;                else {                  deform = Utils.newFloatArray(deformLength);                  let start = input.readInt(true);                  end += start;                  if (scale == 1) {                    for (let v = start; v < end; v++)                      deform[v] = input.readFloat();                  } else {                    for (let v = start; v < end; v++)                      deform[v] = input.readFloat() * scale;                  }                  if (!weighted) {                    for (let v = 0, vn = deform.length; v < vn; v++)                      deform[v] += vertices[v];                  }                }                timeline.setFrame(frame, time, deform);                if (frame == frameLast)                  break;                let time2 = input.readFloat();                switch (input.readByte()) {                  case CURVE_STEPPED:                    timeline.setStepped(frame);                    break;                  case CURVE_BEZIER:                    setBezier(input, timeline, bezier++, frame, 0, time, time2, 0, 1, 1);                }                time = time2;              }              timelines.push(timeline);            }          }        }        let drawOrderCount = input.readInt(true);        if (drawOrderCount > 0) {          let timeline = new DrawOrderTimeline(drawOrderCount);          let slotCount = skeletonData.slots.length;          for (let i = 0; i < drawOrderCount; i++) {            let time = input.readFloat();            let offsetCount = input.readInt(true);            let drawOrder = Utils.newArray(slotCount, 0);            for (let ii = slotCount - 1; ii >= 0; ii--)              drawOrder[ii] = -1;            let unchanged = Utils.newArray(slotCount - offsetCount, 0);            let originalIndex = 0, unchangedIndex = 0;            for (let ii = 0; ii < offsetCount; ii++) {              let slotIndex = input.readInt(true);              while (originalIndex != slotIndex)                unchanged[unchangedIndex++] = originalIndex++;              drawOrder[originalIndex + input.readInt(true)] = originalIndex++;            }            while (originalIndex < slotCount)              unchanged[unchangedIndex++] = originalIndex++;            for (let ii = slotCount - 1; ii >= 0; ii--)              if (drawOrder[ii] == -1)                drawOrder[ii] = unchanged[--unchangedIndex];            timeline.setFrame(i, time, drawOrder);          }          timelines.push(timeline);        }        let eventCount = input.readInt(true);        if (eventCount > 0) {          let timeline = new EventTimeline(eventCount);          for (let i = 0; i < eventCount; i++) {            let time = input.readFloat();            let eventData = skeletonData.events[input.readInt(true)];            let event = new Event(time, eventData);            event.intValue = input.readInt(false);            event.floatValue = input.readFloat();            event.stringValue = input.readBoolean() ? input.readString() : eventData.stringValue;            if (event.data.audioPath) {              event.volume = input.readFloat();              event.balance = input.readFloat();            }            timeline.setFrame(i, event);          }          timelines.push(timeline);        }        let duration = 0;        for (let i = 0, n = timelines.length; i < n; i++)          duration = Math.max(duration, timelines[i].getDuration());        return new Animation(name, timelines, duration);      }    };    var BinaryInput = class {      constructor(data, strings = new Array(), index = 0, buffer = new DataView(data.buffer)) {        this.strings = strings;        this.index = index;        this.buffer = buffer;      }      readByte() {        return this.buffer.getInt8(this.index++);      }      readUnsignedByte() {        return this.buffer.getUint8(this.index++);      }      readShort() {        let value = this.buffer.getInt16(this.index);        this.index += 2;        return value;      }      readInt32() {        let value = this.buffer.getInt32(this.index);        this.index += 4;        return value;      }      readInt(optimizePositive) {        let b = this.readByte();        let result = b & 127;        if ((b & 128) != 0) {          b = this.readByte();          result |= (b & 127) << 7;          if ((b & 128) != 0) {            b = this.readByte();            result |= (b & 127) << 14;            if ((b & 128) != 0) {              b = this.readByte();              result |= (b & 127) << 21;              if ((b & 128) != 0) {                b = this.readByte();                result |= (b & 127) << 28;              }            }          }        }        return optimizePositive ? result : result >>> 1 ^ -(result & 1);      }      readStringRef() {        let index = this.readInt(true);        return index == 0 ? null : this.strings[index - 1];      }      readString() {        let byteCount = this.readInt(true);        switch (byteCount) {          case 0:            return null;          case 1:            return "";        }        byteCount--;        let chars = "";        let charCount = 0;        for (let i = 0; i < byteCount; ) {          let b = this.readUnsignedByte();          switch (b >> 4) {            case 12:            case 13:              chars += String.fromCharCode((b & 31) << 6 | this.readByte() & 63);              i += 2;              break;            case 14:              chars += String.fromCharCode((b & 15) << 12 | (this.readByte() & 63) << 6 | this.readByte() & 63);              i += 3;              break;            default:              chars += String.fromCharCode(b);              i++;          }        }        return chars;      }      readFloat() {        let value = this.buffer.getFloat32(this.index);        this.index += 4;        return value;      }      readBoolean() {        return this.readByte() != 0;      }    };    var LinkedMesh = class {      constructor(mesh, skin, slotIndex, parent, inheritDeform) {        this.mesh = mesh;        this.skin = skin;        this.slotIndex = slotIndex;        this.parent = parent;        this.inheritDeform = inheritDeform;      }    };    var Vertices = class {      constructor(bones = null, vertices = null) {        this.bones = bones;        this.vertices = vertices;      }    };    var AttachmentType;    (function(AttachmentType2) {      AttachmentType2[AttachmentType2["Region"] = 0] = "Region";      AttachmentType2[AttachmentType2["BoundingBox"] = 1] = "BoundingBox";      AttachmentType2[AttachmentType2["Mesh"] = 2] = "Mesh";      AttachmentType2[AttachmentType2["LinkedMesh"] = 3] = "LinkedMesh";      AttachmentType2[AttachmentType2["Path"] = 4] = "Path";      AttachmentType2[AttachmentType2["Point"] = 5] = "Point";      AttachmentType2[AttachmentType2["Clipping"] = 6] = "Clipping";    })(AttachmentType || (AttachmentType = {}));    function readTimeline1(input, timeline, scale) {      let time = input.readFloat(), value = input.readFloat() * scale;      for (let frame = 0, bezier = 0, frameLast = timeline.getFrameCount() - 1; ; frame++) {        timeline.setFrame(frame, time, value);        if (frame == frameLast)          break;        let time2 = input.readFloat(), value2 = input.readFloat() * scale;        switch (input.readByte()) {          case CURVE_STEPPED:            timeline.setStepped(frame);            break;          case CURVE_BEZIER:            setBezier(input, timeline, bezier++, frame, 0, time, time2, value, value2, scale);        }        time = time2;        value = value2;      }      return timeline;    }    function readTimeline2(input, timeline, scale) {      let time = input.readFloat(), value1 = input.readFloat() * scale, value2 = input.readFloat() * scale;      for (let frame = 0, bezier = 0, frameLast = timeline.getFrameCount() - 1; ; frame++) {        timeline.setFrame(frame, time, value1, value2);        if (frame == frameLast)          break;        let time2 = input.readFloat(), nvalue1 = input.readFloat() * scale, nvalue2 = input.readFloat() * scale;        switch (input.readByte()) {          case CURVE_STEPPED:            timeline.setStepped(frame);            break;          case CURVE_BEZIER:            setBezier(input, timeline, bezier++, frame, 0, time, time2, value1, nvalue1, scale);            setBezier(input, timeline, bezier++, frame, 1, time, time2, value2, nvalue2, scale);        }        time = time2;        value1 = nvalue1;        value2 = nvalue2;      }      return timeline;    }    function setBezier(input, timeline, bezier, frame, value, time1, time2, value1, value2, scale) {      timeline.setBezier(bezier, frame, value, time1, value1, input.readFloat(), input.readFloat() * scale, input.readFloat(), input.readFloat() * scale, time2, value2);    }    var BONE_ROTATE = 0;    var BONE_TRANSLATE = 1;    var BONE_TRANSLATEX = 2;    var BONE_TRANSLATEY = 3;    var BONE_SCALE = 4;    var BONE_SCALEX = 5;    var BONE_SCALEY = 6;    var BONE_SHEAR = 7;    var BONE_SHEARX = 8;    var BONE_SHEARY = 9;    var SLOT_ATTACHMENT = 0;    var SLOT_RGBA = 1;    var SLOT_RGB = 2;    var SLOT_RGBA2 = 3;    var SLOT_RGB2 = 4;    var SLOT_ALPHA = 5;    var PATH_POSITION = 0;    var PATH_SPACING = 1;    var PATH_MIX = 2;    var CURVE_STEPPED = 1;    var CURVE_BEZIER = 2;      // spine-core/src/SkeletonBounds.ts    var SkeletonBounds = class {      constructor() {        this.minX = 0;        this.minY = 0;        this.maxX = 0;        this.maxY = 0;        this.boundingBoxes = new Array();        this.polygons = new Array();        this.polygonPool = new Pool(() => {          return Utils.newFloatArray(16);        });      }      update(skeleton, updateAabb) {        if (!skeleton)          throw new Error("skeleton cannot be null.");        let boundingBoxes = this.boundingBoxes;        let polygons = this.polygons;        let polygonPool = this.polygonPool;        let slots = skeleton.slots;        let slotCount = slots.length;        boundingBoxes.length = 0;        polygonPool.freeAll(polygons);        polygons.length = 0;        for (let i = 0; i < slotCount; i++) {          let slot = slots[i];          if (!slot.bone.active)            continue;          let attachment = slot.getAttachment();          if (attachment instanceof BoundingBoxAttachment) {            let boundingBox = attachment;            boundingBoxes.push(boundingBox);            let polygon = polygonPool.obtain();            if (polygon.length != boundingBox.worldVerticesLength) {              polygon = Utils.newFloatArray(boundingBox.worldVerticesLength);            }            polygons.push(polygon);            boundingBox.computeWorldVertices(slot, 0, boundingBox.worldVerticesLength, polygon, 0, 2);          }        }        if (updateAabb) {          this.aabbCompute();        } else {          this.minX = Number.POSITIVE_INFINITY;          this.minY = Number.POSITIVE_INFINITY;          this.maxX = Number.NEGATIVE_INFINITY;          this.maxY = Number.NEGATIVE_INFINITY;        }      }      aabbCompute() {        let minX = Number.POSITIVE_INFINITY, minY = Number.POSITIVE_INFINITY, maxX = Number.NEGATIVE_INFINITY, maxY = Number.NEGATIVE_INFINITY;        let polygons = this.polygons;        for (let i = 0, n = polygons.length; i < n; i++) {          let polygon = polygons[i];          let vertices = polygon;          for (let ii = 0, nn = polygon.length; ii < nn; ii += 2) {            let x = vertices[ii];            let y = vertices[ii + 1];            minX = Math.min(minX, x);            minY = Math.min(minY, y);            maxX = Math.max(maxX, x);            maxY = Math.max(maxY, y);          }        }        this.minX = minX;        this.minY = minY;        this.maxX = maxX;        this.maxY = maxY;      }      aabbContainsPoint(x, y) {        return x >= this.minX && x <= this.maxX && y >= this.minY && y <= this.maxY;      }      aabbIntersectsSegment(x1, y1, x2, y2) {        let minX = this.minX;        let minY = this.minY;        let maxX = this.maxX;        let maxY = this.maxY;        if (x1 <= minX && x2 <= minX || y1 <= minY && y2 <= minY || x1 >= maxX && x2 >= maxX || y1 >= maxY && y2 >= maxY)          return false;        let m = (y2 - y1) / (x2 - x1);        let y = m * (minX - x1) + y1;        if (y > minY && y < maxY)          return true;        y = m * (maxX - x1) + y1;        if (y > minY && y < maxY)          return true;        let x = (minY - y1) / m + x1;        if (x > minX && x < maxX)          return true;        x = (maxY - y1) / m + x1;        if (x > minX && x < maxX)          return true;        return false;      }      aabbIntersectsSkeleton(bounds) {        return this.minX < bounds.maxX && this.maxX > bounds.minX && this.minY < bounds.maxY && this.maxY > bounds.minY;      }      containsPoint(x, y) {        let polygons = this.polygons;        for (let i = 0, n = polygons.length; i < n; i++)          if (this.containsPointPolygon(polygons[i], x, y))            return this.boundingBoxes[i];        return null;      }      containsPointPolygon(polygon, x, y) {        let vertices = polygon;        let nn = polygon.length;        let prevIndex = nn - 2;        let inside = false;        for (let ii = 0; ii < nn; ii += 2) {          let vertexY = vertices[ii + 1];          let prevY = vertices[prevIndex + 1];          if (vertexY < y && prevY >= y || prevY < y && vertexY >= y) {            let vertexX = vertices[ii];            if (vertexX + (y - vertexY) / (prevY - vertexY) * (vertices[prevIndex] - vertexX) < x)              inside = !inside;          }          prevIndex = ii;        }        return inside;      }      intersectsSegment(x1, y1, x2, y2) {        let polygons = this.polygons;        for (let i = 0, n = polygons.length; i < n; i++)          if (this.intersectsSegmentPolygon(polygons[i], x1, y1, x2, y2))            return this.boundingBoxes[i];        return null;      }      intersectsSegmentPolygon(polygon, x1, y1, x2, y2) {        let vertices = polygon;        let nn = polygon.length;        let width12 = x1 - x2, height12 = y1 - y2;        let det1 = x1 * y2 - y1 * x2;        let x3 = vertices[nn - 2], y3 = vertices[nn - 1];        for (let ii = 0; ii < nn; ii += 2) {          let x4 = vertices[ii], y4 = vertices[ii + 1];          let det2 = x3 * y4 - y3 * x4;          let width34 = x3 - x4, height34 = y3 - y4;          let det3 = width12 * height34 - height12 * width34;          let x = (det1 * width34 - width12 * det2) / det3;          if ((x >= x3 && x <= x4 || x >= x4 && x <= x3) && (x >= x1 && x <= x2 || x >= x2 && x <= x1)) {            let y = (det1 * height34 - height12 * det2) / det3;            if ((y >= y3 && y <= y4 || y >= y4 && y <= y3) && (y >= y1 && y <= y2 || y >= y2 && y <= y1))              return true;          }          x3 = x4;          y3 = y4;        }        return false;      }      getPolygon(boundingBox) {        if (!boundingBox)          throw new Error("boundingBox cannot be null.");        let index = this.boundingBoxes.indexOf(boundingBox);        return index == -1 ? null : this.polygons[index];      }      getWidth() {        return this.maxX - this.minX;      }      getHeight() {        return this.maxY - this.minY;      }    };      // spine-core/src/Triangulator.ts    var Triangulator = class {      constructor() {        this.convexPolygons = new Array();        this.convexPolygonsIndices = new Array();        this.indicesArray = new Array();        this.isConcaveArray = new Array();        this.triangles = new Array();        this.polygonPool = new Pool(() => {          return new Array();        });        this.polygonIndicesPool = new Pool(() => {          return new Array();        });      }      triangulate(verticesArray) {        let vertices = verticesArray;        let vertexCount = verticesArray.length >> 1;        let indices = this.indicesArray;        indices.length = 0;        for (let i = 0; i < vertexCount; i++)          indices[i] = i;        let isConcave = this.isConcaveArray;        isConcave.length = 0;        for (let i = 0, n = vertexCount; i < n; ++i)          isConcave[i] = Triangulator.isConcave(i, vertexCount, vertices, indices);        let triangles = this.triangles;        triangles.length = 0;        while (vertexCount > 3) {          let previous = vertexCount - 1, i = 0, next = 1;          while (true) {            outer:              if (!isConcave[i]) {                let p1 = indices[previous] << 1, p2 = indices[i] << 1, p3 = indices[next] << 1;                let p1x = vertices[p1], p1y = vertices[p1 + 1];                let p2x = vertices[p2], p2y = vertices[p2 + 1];                let p3x = vertices[p3], p3y = vertices[p3 + 1];                for (let ii = (next + 1) % vertexCount; ii != previous; ii = (ii + 1) % vertexCount) {                  if (!isConcave[ii])                    continue;                  let v = indices[ii] << 1;                  let vx = vertices[v], vy = vertices[v + 1];                  if (Triangulator.positiveArea(p3x, p3y, p1x, p1y, vx, vy)) {                    if (Triangulator.positiveArea(p1x, p1y, p2x, p2y, vx, vy)) {                      if (Triangulator.positiveArea(p2x, p2y, p3x, p3y, vx, vy))                        break outer;                    }                  }                }                break;              }            if (next == 0) {              do {                if (!isConcave[i])                  break;                i--;              } while (i > 0);              break;            }            previous = i;            i = next;            next = (next + 1) % vertexCount;          }          triangles.push(indices[(vertexCount + i - 1) % vertexCount]);          triangles.push(indices[i]);          triangles.push(indices[(i + 1) % vertexCount]);          indices.splice(i, 1);          isConcave.splice(i, 1);          vertexCount--;          let previousIndex = (vertexCount + i - 1) % vertexCount;          let nextIndex = i == vertexCount ? 0 : i;          isConcave[previousIndex] = Triangulator.isConcave(previousIndex, vertexCount, vertices, indices);          isConcave[nextIndex] = Triangulator.isConcave(nextIndex, vertexCount, vertices, indices);        }        if (vertexCount == 3) {          triangles.push(indices[2]);          triangles.push(indices[0]);          triangles.push(indices[1]);        }        return triangles;      }      decompose(verticesArray, triangles) {        let vertices = verticesArray;        let convexPolygons = this.convexPolygons;        this.polygonPool.freeAll(convexPolygons);        convexPolygons.length = 0;        let convexPolygonsIndices = this.convexPolygonsIndices;        this.polygonIndicesPool.freeAll(convexPolygonsIndices);        convexPolygonsIndices.length = 0;        let polygonIndices = this.polygonIndicesPool.obtain();        polygonIndices.length = 0;        let polygon = this.polygonPool.obtain();        polygon.length = 0;        let fanBaseIndex = -1, lastWinding = 0;        for (let i = 0, n = triangles.length; i < n; i += 3) {          let t1 = triangles[i] << 1, t2 = triangles[i + 1] << 1, t3 = triangles[i + 2] << 1;          let x1 = vertices[t1], y1 = vertices[t1 + 1];          let x2 = vertices[t2], y2 = vertices[t2 + 1];          let x3 = vertices[t3], y3 = vertices[t3 + 1];          let merged = false;          if (fanBaseIndex == t1) {            let o = polygon.length - 4;            let winding1 = Triangulator.winding(polygon[o], polygon[o + 1], polygon[o + 2], polygon[o + 3], x3, y3);            let winding2 = Triangulator.winding(x3, y3, polygon[0], polygon[1], polygon[2], polygon[3]);            if (winding1 == lastWinding && winding2 == lastWinding) {              polygon.push(x3);              polygon.push(y3);              polygonIndices.push(t3);              merged = true;            }          }          if (!merged) {            if (polygon.length > 0) {              convexPolygons.push(polygon);              convexPolygonsIndices.push(polygonIndices);            } else {              this.polygonPool.free(polygon);              this.polygonIndicesPool.free(polygonIndices);            }            polygon = this.polygonPool.obtain();            polygon.length = 0;            polygon.push(x1);            polygon.push(y1);            polygon.push(x2);            polygon.push(y2);            polygon.push(x3);            polygon.push(y3);            polygonIndices = this.polygonIndicesPool.obtain();            polygonIndices.length = 0;            polygonIndices.push(t1);            polygonIndices.push(t2);            polygonIndices.push(t3);            lastWinding = Triangulator.winding(x1, y1, x2, y2, x3, y3);            fanBaseIndex = t1;          }        }        if (polygon.length > 0) {          convexPolygons.push(polygon);          convexPolygonsIndices.push(polygonIndices);        }        for (let i = 0, n = convexPolygons.length; i < n; i++) {          polygonIndices = convexPolygonsIndices[i];          if (polygonIndices.length == 0)            continue;          let firstIndex = polygonIndices[0];          let lastIndex = polygonIndices[polygonIndices.length - 1];          polygon = convexPolygons[i];          let o = polygon.length - 4;          let prevPrevX = polygon[o], prevPrevY = polygon[o + 1];          let prevX = polygon[o + 2], prevY = polygon[o + 3];          let firstX = polygon[0], firstY = polygon[1];          let secondX = polygon[2], secondY = polygon[3];          let winding = Triangulator.winding(prevPrevX, prevPrevY, prevX, prevY, firstX, firstY);          for (let ii = 0; ii < n; ii++) {            if (ii == i)              continue;            let otherIndices = convexPolygonsIndices[ii];            if (otherIndices.length != 3)              continue;            let otherFirstIndex = otherIndices[0];            let otherSecondIndex = otherIndices[1];            let otherLastIndex = otherIndices[2];            let otherPoly = convexPolygons[ii];            let x3 = otherPoly[otherPoly.length - 2], y3 = otherPoly[otherPoly.length - 1];            if (otherFirstIndex != firstIndex || otherSecondIndex != lastIndex)              continue;            let winding1 = Triangulator.winding(prevPrevX, prevPrevY, prevX, prevY, x3, y3);            let winding2 = Triangulator.winding(x3, y3, firstX, firstY, secondX, secondY);            if (winding1 == winding && winding2 == winding) {              otherPoly.length = 0;              otherIndices.length = 0;              polygon.push(x3);              polygon.push(y3);              polygonIndices.push(otherLastIndex);              prevPrevX = prevX;              prevPrevY = prevY;              prevX = x3;              prevY = y3;              ii = 0;            }          }        }        for (let i = convexPolygons.length - 1; i >= 0; i--) {          polygon = convexPolygons[i];          if (polygon.length == 0) {            convexPolygons.splice(i, 1);            this.polygonPool.free(polygon);            polygonIndices = convexPolygonsIndices[i];            convexPolygonsIndices.splice(i, 1);            this.polygonIndicesPool.free(polygonIndices);          }        }        return convexPolygons;      }      static isConcave(index, vertexCount, vertices, indices) {        let previous = indices[(vertexCount + index - 1) % vertexCount] << 1;        let current = indices[index] << 1;        let next = indices[(index + 1) % vertexCount] << 1;        return !this.positiveArea(vertices[previous], vertices[previous + 1], vertices[current], vertices[current + 1], vertices[next], vertices[next + 1]);      }      static positiveArea(p1x, p1y, p2x, p2y, p3x, p3y) {        return p1x * (p3y - p2y) + p2x * (p1y - p3y) + p3x * (p2y - p1y) >= 0;      }      static winding(p1x, p1y, p2x, p2y, p3x, p3y) {        let px = p2x - p1x, py = p2y - p1y;        return p3x * py - p3y * px + px * p1y - p1x * py >= 0 ? 1 : -1;      }    };      // spine-core/src/SkeletonClipping.ts    var SkeletonClipping = class {      constructor() {        this.triangulator = new Triangulator();        this.clippingPolygon = new Array();        this.clipOutput = new Array();        this.clippedVertices = new Array();        this.clippedTriangles = new Array();        this.scratch = new Array();      }      clipStart(slot, clip) {        if (this.clipAttachment)          return 0;        this.clipAttachment = clip;        let n = clip.worldVerticesLength;        let vertices = Utils.setArraySize(this.clippingPolygon, n);        clip.computeWorldVertices(slot, 0, n, vertices, 0, 2);        let clippingPolygon = this.clippingPolygon;        SkeletonClipping.makeClockwise(clippingPolygon);        let clippingPolygons = this.clippingPolygons = this.triangulator.decompose(clippingPolygon, this.triangulator.triangulate(clippingPolygon));        for (let i = 0, n2 = clippingPolygons.length; i < n2; i++) {          let polygon = clippingPolygons[i];          SkeletonClipping.makeClockwise(polygon);          polygon.push(polygon[0]);          polygon.push(polygon[1]);        }        return clippingPolygons.length;      }      clipEndWithSlot(slot) {        if (this.clipAttachment && this.clipAttachment.endSlot == slot.data)          this.clipEnd();      }      clipEnd() {        if (!this.clipAttachment)          return;        this.clipAttachment = null;        this.clippingPolygons = null;        this.clippedVertices.length = 0;        this.clippedTriangles.length = 0;        this.clippingPolygon.length = 0;      }      isClipping() {        return this.clipAttachment != null;      }      clipTriangles(vertices, verticesLength, triangles, trianglesLength, uvs, light, dark, twoColor) {        let clipOutput = this.clipOutput, clippedVertices = this.clippedVertices;        let clippedTriangles = this.clippedTriangles;        let polygons = this.clippingPolygons;        let polygonsCount = this.clippingPolygons.length;        let vertexSize = twoColor ? 12 : 8;        let index = 0;        clippedVertices.length = 0;        clippedTriangles.length = 0;        outer:          for (let i = 0; i < trianglesLength; i += 3) {            let vertexOffset = triangles[i] << 1;            let x1 = vertices[vertexOffset], y1 = vertices[vertexOffset + 1];            let u1 = uvs[vertexOffset], v1 = uvs[vertexOffset + 1];            vertexOffset = triangles[i + 1] << 1;            let x2 = vertices[vertexOffset], y2 = vertices[vertexOffset + 1];            let u2 = uvs[vertexOffset], v2 = uvs[vertexOffset + 1];            vertexOffset = triangles[i + 2] << 1;            let x3 = vertices[vertexOffset], y3 = vertices[vertexOffset + 1];            let u3 = uvs[vertexOffset], v3 = uvs[vertexOffset + 1];            for (let p = 0; p < polygonsCount; p++) {              let s = clippedVertices.length;              if (this.clip(x1, y1, x2, y2, x3, y3, polygons[p], clipOutput)) {                let clipOutputLength = clipOutput.length;                if (clipOutputLength == 0)                  continue;                let d0 = y2 - y3, d1 = x3 - x2, d2 = x1 - x3, d4 = y3 - y1;                let d = 1 / (d0 * d2 + d1 * (y1 - y3));                let clipOutputCount = clipOutputLength >> 1;                let clipOutputItems = this.clipOutput;                let clippedVerticesItems = Utils.setArraySize(clippedVertices, s + clipOutputCount * vertexSize);                for (let ii = 0; ii < clipOutputLength; ii += 2) {                  let x = clipOutputItems[ii], y = clipOutputItems[ii + 1];                  clippedVerticesItems[s] = x;                  clippedVerticesItems[s + 1] = y;                  clippedVerticesItems[s + 2] = light.r;                  clippedVerticesItems[s + 3] = light.g;                  clippedVerticesItems[s + 4] = light.b;                  clippedVerticesItems[s + 5] = light.a;                  let c0 = x - x3, c1 = y - y3;                  let a = (d0 * c0 + d1 * c1) * d;                  let b = (d4 * c0 + d2 * c1) * d;                  let c = 1 - a - b;                  clippedVerticesItems[s + 6] = u1 * a + u2 * b + u3 * c;                  clippedVerticesItems[s + 7] = v1 * a + v2 * b + v3 * c;                  if (twoColor) {                    clippedVerticesItems[s + 8] = dark.r;                    clippedVerticesItems[s + 9] = dark.g;                    clippedVerticesItems[s + 10] = dark.b;                    clippedVerticesItems[s + 11] = dark.a;                  }                  s += vertexSize;                }                s = clippedTriangles.length;                let clippedTrianglesItems = Utils.setArraySize(clippedTriangles, s + 3 * (clipOutputCount - 2));                clipOutputCount--;                for (let ii = 1; ii < clipOutputCount; ii++) {                  clippedTrianglesItems[s] = index;                  clippedTrianglesItems[s + 1] = index + ii;                  clippedTrianglesItems[s + 2] = index + ii + 1;                  s += 3;                }                index += clipOutputCount + 1;              } else {                let clippedVerticesItems = Utils.setArraySize(clippedVertices, s + 3 * vertexSize);                clippedVerticesItems[s] = x1;                clippedVerticesItems[s + 1] = y1;                clippedVerticesItems[s + 2] = light.r;                clippedVerticesItems[s + 3] = light.g;                clippedVerticesItems[s + 4] = light.b;                clippedVerticesItems[s + 5] = light.a;                if (!twoColor) {                  clippedVerticesItems[s + 6] = u1;                  clippedVerticesItems[s + 7] = v1;                  clippedVerticesItems[s + 8] = x2;                  clippedVerticesItems[s + 9] = y2;                  clippedVerticesItems[s + 10] = light.r;                  clippedVerticesItems[s + 11] = light.g;                  clippedVerticesItems[s + 12] = light.b;                  clippedVerticesItems[s + 13] = light.a;                  clippedVerticesItems[s + 14] = u2;                  clippedVerticesItems[s + 15] = v2;                  clippedVerticesItems[s + 16] = x3;                  clippedVerticesItems[s + 17] = y3;                  clippedVerticesItems[s + 18] = light.r;                  clippedVerticesItems[s + 19] = light.g;                  clippedVerticesItems[s + 20] = light.b;                  clippedVerticesItems[s + 21] = light.a;                  clippedVerticesItems[s + 22] = u3;                  clippedVerticesItems[s + 23] = v3;                } else {                  clippedVerticesItems[s + 6] = u1;                  clippedVerticesItems[s + 7] = v1;                  clippedVerticesItems[s + 8] = dark.r;                  clippedVerticesItems[s + 9] = dark.g;                  clippedVerticesItems[s + 10] = dark.b;                  clippedVerticesItems[s + 11] = dark.a;                  clippedVerticesItems[s + 12] = x2;                  clippedVerticesItems[s + 13] = y2;                  clippedVerticesItems[s + 14] = light.r;                  clippedVerticesItems[s + 15] = light.g;                  clippedVerticesItems[s + 16] = light.b;                  clippedVerticesItems[s + 17] = light.a;                  clippedVerticesItems[s + 18] = u2;                  clippedVerticesItems[s + 19] = v2;                  clippedVerticesItems[s + 20] = dark.r;                  clippedVerticesItems[s + 21] = dark.g;                  clippedVerticesItems[s + 22] = dark.b;                  clippedVerticesItems[s + 23] = dark.a;                  clippedVerticesItems[s + 24] = x3;                  clippedVerticesItems[s + 25] = y3;                  clippedVerticesItems[s + 26] = light.r;                  clippedVerticesItems[s + 27] = light.g;                  clippedVerticesItems[s + 28] = light.b;                  clippedVerticesItems[s + 29] = light.a;                  clippedVerticesItems[s + 30] = u3;                  clippedVerticesItems[s + 31] = v3;                  clippedVerticesItems[s + 32] = dark.r;                  clippedVerticesItems[s + 33] = dark.g;                  clippedVerticesItems[s + 34] = dark.b;                  clippedVerticesItems[s + 35] = dark.a;                }                s = clippedTriangles.length;                let clippedTrianglesItems = Utils.setArraySize(clippedTriangles, s + 3);                clippedTrianglesItems[s] = index;                clippedTrianglesItems[s + 1] = index + 1;                clippedTrianglesItems[s + 2] = index + 2;                index += 3;                continue outer;              }            }          }      }      clip(x1, y1, x2, y2, x3, y3, clippingArea, output) {        let originalOutput = output;        let clipped = false;        let input = null;        if (clippingArea.length % 4 >= 2) {          input = output;          output = this.scratch;        } else          input = this.scratch;        input.length = 0;        input.push(x1);        input.push(y1);        input.push(x2);        input.push(y2);        input.push(x3);        input.push(y3);        input.push(x1);        input.push(y1);        output.length = 0;        let clippingVertices = clippingArea;        let clippingVerticesLast = clippingArea.length - 4;        for (let i = 0; ; i += 2) {          let edgeX = clippingVertices[i], edgeY = clippingVertices[i + 1];          let edgeX2 = clippingVertices[i + 2], edgeY2 = clippingVertices[i + 3];          let deltaX = edgeX - edgeX2, deltaY = edgeY - edgeY2;          let inputVertices = input;          let inputVerticesLength = input.length - 2, outputStart = output.length;          for (let ii = 0; ii < inputVerticesLength; ii += 2) {            let inputX = inputVertices[ii], inputY = inputVertices[ii + 1];            let inputX2 = inputVertices[ii + 2], inputY2 = inputVertices[ii + 3];            let side2 = deltaX * (inputY2 - edgeY2) - deltaY * (inputX2 - edgeX2) > 0;            if (deltaX * (inputY - edgeY2) - deltaY * (inputX - edgeX2) > 0) {              if (side2) {                output.push(inputX2);                output.push(inputY2);                continue;              }              let c0 = inputY2 - inputY, c2 = inputX2 - inputX;              let s = c0 * (edgeX2 - edgeX) - c2 * (edgeY2 - edgeY);              if (Math.abs(s) > 1e-6) {                let ua = (c2 * (edgeY - inputY) - c0 * (edgeX - inputX)) / s;                output.push(edgeX + (edgeX2 - edgeX) * ua);                output.push(edgeY + (edgeY2 - edgeY) * ua);              } else {                output.push(edgeX);                output.push(edgeY);              }            } else if (side2) {              let c0 = inputY2 - inputY, c2 = inputX2 - inputX;              let s = c0 * (edgeX2 - edgeX) - c2 * (edgeY2 - edgeY);              if (Math.abs(s) > 1e-6) {                let ua = (c2 * (edgeY - inputY) - c0 * (edgeX - inputX)) / s;                output.push(edgeX + (edgeX2 - edgeX) * ua);                output.push(edgeY + (edgeY2 - edgeY) * ua);              } else {                output.push(edgeX);                output.push(edgeY);              }              output.push(inputX2);              output.push(inputY2);            }            clipped = true;          }          if (outputStart == output.length) {            originalOutput.length = 0;            return true;          }          output.push(output[0]);          output.push(output[1]);          if (i == clippingVerticesLast)            break;          let temp = output;          output = input;          output.length = 0;          input = temp;        }        if (originalOutput != output) {          originalOutput.length = 0;          for (let i = 0, n = output.length - 2; i < n; i++)            originalOutput[i] = output[i];        } else          originalOutput.length = originalOutput.length - 2;        return clipped;      }      static makeClockwise(polygon) {        let vertices = polygon;        let verticeslength = polygon.length;        let area = vertices[verticeslength - 2] * vertices[1] - vertices[0] * vertices[verticeslength - 1], p1x = 0, p1y = 0, p2x = 0, p2y = 0;        for (let i = 0, n = verticeslength - 3; i < n; i += 2) {          p1x = vertices[i];          p1y = vertices[i + 1];          p2x = vertices[i + 2];          p2y = vertices[i + 3];          area += p1x * p2y - p2x * p1y;        }        if (area < 0)          return;        for (let i = 0, lastX = verticeslength - 2, n = verticeslength >> 1; i < n; i += 2) {          let x = vertices[i], y = vertices[i + 1];          let other = lastX - i;          vertices[i] = vertices[other];          vertices[i + 1] = vertices[other + 1];          vertices[other] = x;          vertices[other + 1] = y;        }      }    };      // spine-core/src/SkeletonJson.ts    var SkeletonJson = class {      constructor(attachmentLoader) {        this.attachmentLoader = null;        this.scale = 1;        this.linkedMeshes = new Array();        this.attachmentLoader = attachmentLoader;      }      readSkeletonData(json) {        let scale = this.scale;        let skeletonData = new SkeletonData();        let root = typeof json === "string" ? JSON.parse(json) : json;        let skeletonMap = root.skeleton;        if (skeletonMap) {          skeletonData.hash = skeletonMap.hash;          skeletonData.version = skeletonMap.spine;          skeletonData.x = skeletonMap.x;          skeletonData.y = skeletonMap.y;          skeletonData.width = skeletonMap.width;          skeletonData.height = skeletonMap.height;          skeletonData.fps = skeletonMap.fps;          skeletonData.imagesPath = skeletonMap.images;        }        if (root.bones) {          for (let i = 0; i < root.bones.length; i++) {            let boneMap = root.bones[i];            let parent = null;            let parentName = getValue(boneMap, "parent", null);            if (parentName)              parent = skeletonData.findBone(parentName);            let data = new BoneData(skeletonData.bones.length, boneMap.name, parent);            data.length = getValue(boneMap, "length", 0) * scale;            data.x = getValue(boneMap, "x", 0) * scale;            data.y = getValue(boneMap, "y", 0) * scale;            data.rotation = getValue(boneMap, "rotation", 0);            data.scaleX = getValue(boneMap, "scaleX", 1);            data.scaleY = getValue(boneMap, "scaleY", 1);            data.shearX = getValue(boneMap, "shearX", 0);            data.shearY = getValue(boneMap, "shearY", 0);            data.transformMode = Utils.enumValue(TransformMode, getValue(boneMap, "transform", "Normal"));            data.skinRequired = getValue(boneMap, "skin", false);            let color = getValue(boneMap, "color", null);            if (color)              data.color.setFromString(color);            skeletonData.bones.push(data);          }        }        if (root.slots) {          for (let i = 0; i < root.slots.length; i++) {            let slotMap = root.slots[i];            let boneData = skeletonData.findBone(slotMap.bone);            let data = new SlotData(skeletonData.slots.length, slotMap.name, boneData);            let color = getValue(slotMap, "color", null);            if (color)              data.color.setFromString(color);            let dark = getValue(slotMap, "dark", null);            if (dark)              data.darkColor = Color.fromString(dark);            data.attachmentName = getValue(slotMap, "attachment", null);            data.blendMode = Utils.enumValue(BlendMode, getValue(slotMap, "blend", "normal"));            skeletonData.slots.push(data);          }        }        if (root.ik) {          for (let i = 0; i < root.ik.length; i++) {            let constraintMap = root.ik[i];            let data = new IkConstraintData(constraintMap.name);            data.order = getValue(constraintMap, "order", 0);            data.skinRequired = getValue(constraintMap, "skin", false);            for (let ii = 0; ii < constraintMap.bones.length; ii++)              data.bones.push(skeletonData.findBone(constraintMap.bones[ii]));            data.target = skeletonData.findBone(constraintMap.target);            data.mix = getValue(constraintMap, "mix", 1);            data.softness = getValue(constraintMap, "softness", 0) * scale;            data.bendDirection = getValue(constraintMap, "bendPositive", true) ? 1 : -1;            data.compress = getValue(constraintMap, "compress", false);            data.stretch = getValue(constraintMap, "stretch", false);            data.uniform = getValue(constraintMap, "uniform", false);            skeletonData.ikConstraints.push(data);          }        }        if (root.transform) {          for (let i = 0; i < root.transform.length; i++) {            let constraintMap = root.transform[i];            let data = new TransformConstraintData(constraintMap.name);            data.order = getValue(constraintMap, "order", 0);            data.skinRequired = getValue(constraintMap, "skin", false);            for (let ii = 0; ii < constraintMap.bones.length; ii++)              data.bones.push(skeletonData.findBone(constraintMap.bones[ii]));            let targetName = constraintMap.target;            data.target = skeletonData.findBone(targetName);            data.local = getValue(constraintMap, "local", false);            data.relative = getValue(constraintMap, "relative", false);            data.offsetRotation = getValue(constraintMap, "rotation", 0);            data.offsetX = getValue(constraintMap, "x", 0) * scale;            data.offsetY = getValue(constraintMap, "y", 0) * scale;            data.offsetScaleX = getValue(constraintMap, "scaleX", 0);            data.offsetScaleY = getValue(constraintMap, "scaleY", 0);            data.offsetShearY = getValue(constraintMap, "shearY", 0);            data.mixRotate = getValue(constraintMap, "mixRotate", 1);            data.mixX = getValue(constraintMap, "mixX", 1);            data.mixY = getValue(constraintMap, "mixY", data.mixX);            data.mixScaleX = getValue(constraintMap, "mixScaleX", 1);            data.mixScaleY = getValue(constraintMap, "mixScaleY", data.mixScaleX);            data.mixShearY = getValue(constraintMap, "mixShearY", 1);            skeletonData.transformConstraints.push(data);          }        }        if (root.path) {          for (let i = 0; i < root.path.length; i++) {            let constraintMap = root.path[i];            let data = new PathConstraintData(constraintMap.name);            data.order = getValue(constraintMap, "order", 0);            data.skinRequired = getValue(constraintMap, "skin", false);            for (let ii = 0; ii < constraintMap.bones.length; ii++)              data.bones.push(skeletonData.findBone(constraintMap.bones[ii]));            let targetName = constraintMap.target;            data.target = skeletonData.findSlot(targetName);            data.positionMode = Utils.enumValue(PositionMode, getValue(constraintMap, "positionMode", "Percent"));            data.spacingMode = Utils.enumValue(SpacingMode, getValue(constraintMap, "spacingMode", "Length"));            data.rotateMode = Utils.enumValue(RotateMode, getValue(constraintMap, "rotateMode", "Tangent"));            data.offsetRotation = getValue(constraintMap, "rotation", 0);            data.position = getValue(constraintMap, "position", 0);            if (data.positionMode == PositionMode.Fixed)              data.position *= scale;            data.spacing = getValue(constraintMap, "spacing", 0);            if (data.spacingMode == SpacingMode.Length || data.spacingMode == SpacingMode.Fixed)              data.spacing *= scale;            data.mixRotate = getValue(constraintMap, "mixRotate", 1);            data.mixX = getValue(constraintMap, "mixX", 1);            data.mixY = getValue(constraintMap, "mixY", data.mixX);            skeletonData.pathConstraints.push(data);          }        }        if (root.skins) {          for (let i = 0; i < root.skins.length; i++) {            let skinMap = root.skins[i];            let skin = new Skin(skinMap.name);            if (skinMap.bones) {              for (let ii = 0; ii < skinMap.bones.length; ii++)                skin.bones.push(skeletonData.findBone(skinMap.bones[ii]));            }            if (skinMap.ik) {              for (let ii = 0; ii < skinMap.ik.length; ii++)                skin.constraints.push(skeletonData.findIkConstraint(skinMap.ik[ii]));            }            if (skinMap.transform) {              for (let ii = 0; ii < skinMap.transform.length; ii++)                skin.constraints.push(skeletonData.findTransformConstraint(skinMap.transform[ii]));            }            if (skinMap.path) {              for (let ii = 0; ii < skinMap.path.length; ii++)                skin.constraints.push(skeletonData.findPathConstraint(skinMap.path[ii]));            }            for (let slotName in skinMap.attachments) {              let slot = skeletonData.findSlot(slotName);              let slotMap = skinMap.attachments[slotName];              for (let entryName in slotMap) {                let attachment = this.readAttachment(slotMap[entryName], skin, slot.index, entryName, skeletonData);                if (attachment)                  skin.setAttachment(slot.index, entryName, attachment);              }            }            skeletonData.skins.push(skin);            if (skin.name == "default")              skeletonData.defaultSkin = skin;          }        }        for (let i = 0, n = this.linkedMeshes.length; i < n; i++) {          let linkedMesh = this.linkedMeshes[i];          let skin = !linkedMesh.skin ? skeletonData.defaultSkin : skeletonData.findSkin(linkedMesh.skin);          let parent = skin.getAttachment(linkedMesh.slotIndex, linkedMesh.parent);          linkedMesh.mesh.deformAttachment = linkedMesh.inheritDeform ? parent : linkedMesh.mesh;          linkedMesh.mesh.setParentMesh(parent);          linkedMesh.mesh.updateUVs();        }        this.linkedMeshes.length = 0;        if (root.events) {          for (let eventName in root.events) {            let eventMap = root.events[eventName];            let data = new EventData(eventName);            data.intValue = getValue(eventMap, "int", 0);            data.floatValue = getValue(eventMap, "float", 0);            data.stringValue = getValue(eventMap, "string", "");            data.audioPath = getValue(eventMap, "audio", null);            if (data.audioPath) {              data.volume = getValue(eventMap, "volume", 1);              data.balance = getValue(eventMap, "balance", 0);            }            skeletonData.events.push(data);          }        }        if (root.animations) {          for (let animationName in root.animations) {            let animationMap = root.animations[animationName];            this.readAnimation(animationMap, animationName, skeletonData);          }        }        return skeletonData;      }      readAttachment(map, skin, slotIndex, name, skeletonData) {        let scale = this.scale;        name = getValue(map, "name", name);        switch (getValue(map, "type", "region")) {          case "region": {            let path = getValue(map, "path", name);            let region = this.attachmentLoader.newRegionAttachment(skin, name, path);            if (!region)              return null;            region.path = path;            region.x = getValue(map, "x", 0) * scale;            region.y = getValue(map, "y", 0) * scale;            region.scaleX = getValue(map, "scaleX", 1);            region.scaleY = getValue(map, "scaleY", 1);            region.rotation = getValue(map, "rotation", 0);            region.width = map.width * scale;            region.height = map.height * scale;            let color = getValue(map, "color", null);            if (color)              region.color.setFromString(color);            region.updateOffset();            return region;          }          case "boundingbox": {            let box = this.attachmentLoader.newBoundingBoxAttachment(skin, name);            if (!box)              return null;            this.readVertices(map, box, map.vertexCount << 1);            let color = getValue(map, "color", null);            if (color)              box.color.setFromString(color);            return box;          }          case "mesh":          case "linkedmesh": {            let path = getValue(map, "path", name);            let mesh = this.attachmentLoader.newMeshAttachment(skin, name, path);            if (!mesh)              return null;            mesh.path = path;            let color = getValue(map, "color", null);            if (color)              mesh.color.setFromString(color);            mesh.width = getValue(map, "width", 0) * scale;            mesh.height = getValue(map, "height", 0) * scale;            let parent = getValue(map, "parent", null);            if (parent) {              this.linkedMeshes.push(new LinkedMesh2(mesh, getValue(map, "skin", null), slotIndex, parent, getValue(map, "deform", true)));              return mesh;            }            let uvs = map.uvs;            this.readVertices(map, mesh, uvs.length);            mesh.triangles = map.triangles;            mesh.regionUVs = uvs;            mesh.updateUVs();            mesh.edges = getValue(map, "edges", null);            mesh.hullLength = getValue(map, "hull", 0) * 2;            return mesh;          }          case "path": {            let path = this.attachmentLoader.newPathAttachment(skin, name);            if (!path)              return null;            path.closed = getValue(map, "closed", false);            path.constantSpeed = getValue(map, "constantSpeed", true);            let vertexCount = map.vertexCount;            this.readVertices(map, path, vertexCount << 1);            let lengths = Utils.newArray(vertexCount / 3, 0);            for (let i = 0; i < map.lengths.length; i++)              lengths[i] = map.lengths[i] * scale;            path.lengths = lengths;            let color = getValue(map, "color", null);            if (color)              path.color.setFromString(color);            return path;          }          case "point": {            let point = this.attachmentLoader.newPointAttachment(skin, name);            if (!point)              return null;            point.x = getValue(map, "x", 0) * scale;            point.y = getValue(map, "y", 0) * scale;            point.rotation = getValue(map, "rotation", 0);            let color = getValue(map, "color", null);            if (color)              point.color.setFromString(color);            return point;          }          case "clipping": {            let clip = this.attachmentLoader.newClippingAttachment(skin, name);            if (!clip)              return null;            let end = getValue(map, "end", null);            if (end)              clip.endSlot = skeletonData.findSlot(end);            let vertexCount = map.vertexCount;            this.readVertices(map, clip, vertexCount << 1);            let color = getValue(map, "color", null);            if (color)              clip.color.setFromString(color);            return clip;          }        }        return null;      }      readVertices(map, attachment, verticesLength) {        let scale = this.scale;        attachment.worldVerticesLength = verticesLength;        let vertices = map.vertices;        if (verticesLength == vertices.length) {          let scaledVertices = Utils.toFloatArray(vertices);          if (scale != 1) {            for (let i = 0, n = vertices.length; i < n; i++)              scaledVertices[i] *= scale;          }          attachment.vertices = scaledVertices;          return;        }        let weights = new Array();        let bones = new Array();        for (let i = 0, n = vertices.length; i < n; ) {          let boneCount = vertices[i++];          bones.push(boneCount);          for (let nn = i + boneCount * 4; i < nn; i += 4) {            bones.push(vertices[i]);            weights.push(vertices[i + 1] * scale);            weights.push(vertices[i + 2] * scale);            weights.push(vertices[i + 3]);          }        }        attachment.bones = bones;        attachment.vertices = Utils.toFloatArray(weights);      }      readAnimation(map, name, skeletonData) {        let scale = this.scale;        let timelines = new Array();        if (map.slots) {          for (let slotName in map.slots) {            let slotMap = map.slots[slotName];            let slotIndex = skeletonData.findSlot(slotName).index;            for (let timelineName in slotMap) {              let timelineMap = slotMap[timelineName];              if (!timelineMap)                continue;              let frames = timelineMap.length;              if (timelineName == "attachment") {                let timeline = new AttachmentTimeline(frames, slotIndex);                for (let frame = 0; frame < frames; frame++) {                  let keyMap = timelineMap[frame];                  timeline.setFrame(frame, getValue(keyMap, "time", 0), keyMap.name);                }                timelines.push(timeline);              } else if (timelineName == "rgba") {                let timeline = new RGBATimeline(frames, frames << 2, slotIndex);                let keyMap = timelineMap[0];                let time = getValue(keyMap, "time", 0);                let color = Color.fromString(keyMap.color);                for (let frame = 0, bezier = 0; ; frame++) {                  timeline.setFrame(frame, time, color.r, color.g, color.b, color.a);                  let nextMap = timelineMap[frame + 1];                  if (!nextMap) {                    timeline.shrink(bezier);                    break;                  }                  let time2 = getValue(nextMap, "time", 0);                  let newColor = Color.fromString(nextMap.color);                  let curve = keyMap.curve;                  if (curve) {                    bezier = readCurve(curve, timeline, bezier, frame, 0, time, time2, color.r, newColor.r, 1);                    bezier = readCurve(curve, timeline, bezier, frame, 1, time, time2, color.g, newColor.g, 1);                    bezier = readCurve(curve, timeline, bezier, frame, 2, time, time2, color.b, newColor.b, 1);                    bezier = readCurve(curve, timeline, bezier, frame, 3, time, time2, color.a, newColor.a, 1);                  }                  time = time2;                  color = newColor;                  keyMap = nextMap;                }                timelines.push(timeline);              } else if (timelineName == "rgb") {                let timeline = new RGBTimeline(frames, frames * 3, slotIndex);                let keyMap = timelineMap[0];                let time = getValue(keyMap, "time", 0);                let color = Color.fromString(keyMap.color);                for (let frame = 0, bezier = 0; ; frame++) {                  timeline.setFrame(frame, time, color.r, color.g, color.b);                  let nextMap = timelineMap[frame + 1];                  if (!nextMap) {                    timeline.shrink(bezier);                    break;                  }                  let time2 = getValue(nextMap, "time", 0);                  let newColor = Color.fromString(nextMap.color);                  let curve = keyMap.curve;                  if (curve) {                    bezier = readCurve(curve, timeline, bezier, frame, 0, time, time2, color.r, newColor.r, 1);                    bezier = readCurve(curve, timeline, bezier, frame, 1, time, time2, color.g, newColor.g, 1);                    bezier = readCurve(curve, timeline, bezier, frame, 2, time, time2, color.b, newColor.b, 1);                  }                  time = time2;                  color = newColor;                  keyMap = nextMap;                }                timelines.push(timeline);              } else if (timelineName == "alpha") {                timelines.push(readTimeline12(timelineMap, new AlphaTimeline(frames, frames, slotIndex), 0, 1));              } else if (timelineName == "rgba2") {                let timeline = new RGBA2Timeline(frames, frames * 7, slotIndex);                let keyMap = timelineMap[0];                let time = getValue(keyMap, "time", 0);                let color = Color.fromString(keyMap.light);                let color2 = Color.fromString(keyMap.dark);                for (let frame = 0, bezier = 0; ; frame++) {                  timeline.setFrame(frame, time, color.r, color.g, color.b, color.a, color2.r, color2.g, color2.b);                  let nextMap = timelineMap[frame + 1];                  if (!nextMap) {                    timeline.shrink(bezier);                    break;                  }                  let time2 = getValue(nextMap, "time", 0);                  let newColor = Color.fromString(nextMap.light);                  let newColor2 = Color.fromString(nextMap.dark);                  let curve = keyMap.curve;                  if (curve) {                    bezier = readCurve(curve, timeline, bezier, frame, 0, time, time2, color.r, newColor.r, 1);                    bezier = readCurve(curve, timeline, bezier, frame, 1, time, time2, color.g, newColor.g, 1);                    bezier = readCurve(curve, timeline, bezier, frame, 2, time, time2, color.b, newColor.b, 1);                    bezier = readCurve(curve, timeline, bezier, frame, 3, time, time2, color.a, newColor.a, 1);                    bezier = readCurve(curve, timeline, bezier, frame, 4, time, time2, color2.r, newColor2.r, 1);                    bezier = readCurve(curve, timeline, bezier, frame, 5, time, time2, color2.g, newColor2.g, 1);                    bezier = readCurve(curve, timeline, bezier, frame, 6, time, time2, color2.b, newColor2.b, 1);                  }                  time = time2;                  color = newColor;                  color2 = newColor2;                  keyMap = nextMap;                }                timelines.push(timeline);              } else if (timelineName == "rgb2") {                let timeline = new RGB2Timeline(frames, frames * 6, slotIndex);                let keyMap = timelineMap[0];                let time = getValue(keyMap, "time", 0);                let color = Color.fromString(keyMap.light);                let color2 = Color.fromString(keyMap.dark);                for (let frame = 0, bezier = 0; ; frame++) {                  timeline.setFrame(frame, time, color.r, color.g, color.b, color2.r, color2.g, color2.b);                  let nextMap = timelineMap[frame + 1];                  if (!nextMap) {                    timeline.shrink(bezier);                    break;                  }                  let time2 = getValue(nextMap, "time", 0);                  let newColor = Color.fromString(nextMap.light);                  let newColor2 = Color.fromString(nextMap.dark);                  let curve = keyMap.curve;                  if (curve) {                    bezier = readCurve(curve, timeline, bezier, frame, 0, time, time2, color.r, newColor.r, 1);                    bezier = readCurve(curve, timeline, bezier, frame, 1, time, time2, color.g, newColor.g, 1);                    bezier = readCurve(curve, timeline, bezier, frame, 2, time, time2, color.b, newColor.b, 1);                    bezier = readCurve(curve, timeline, bezier, frame, 3, time, time2, color2.r, newColor2.r, 1);                    bezier = readCurve(curve, timeline, bezier, frame, 4, time, time2, color2.g, newColor2.g, 1);                    bezier = readCurve(curve, timeline, bezier, frame, 5, time, time2, color2.b, newColor2.b, 1);                  }                  time = time2;                  color = newColor;                  color2 = newColor2;                  keyMap = nextMap;                }                timelines.push(timeline);              }            }          }        }        if (map.bones) {          for (let boneName in map.bones) {            let boneMap = map.bones[boneName];            let boneIndex = skeletonData.findBone(boneName).index;            for (let timelineName in boneMap) {              let timelineMap = boneMap[timelineName];              let frames = timelineMap.length;              if (frames == 0)                continue;              if (timelineName === "rotate") {                timelines.push(readTimeline12(timelineMap, new RotateTimeline(frames, frames, boneIndex), 0, 1));              } else if (timelineName === "translate") {                let timeline = new TranslateTimeline(frames, frames << 1, boneIndex);                timelines.push(readTimeline22(timelineMap, timeline, "x", "y", 0, scale));              } else if (timelineName === "translatex") {                let timeline = new TranslateXTimeline(frames, frames, boneIndex);                timelines.push(readTimeline12(timelineMap, timeline, 0, scale));              } else if (timelineName === "translatey") {                let timeline = new TranslateYTimeline(frames, frames, boneIndex);                timelines.push(readTimeline12(timelineMap, timeline, 0, scale));              } else if (timelineName === "scale") {                let timeline = new ScaleTimeline(frames, frames << 1, boneIndex);                timelines.push(readTimeline22(timelineMap, timeline, "x", "y", 1, 1));              } else if (timelineName === "scalex") {                let timeline = new ScaleXTimeline(frames, frames, boneIndex);                timelines.push(readTimeline12(timelineMap, timeline, 1, 1));              } else if (timelineName === "scaley") {                let timeline = new ScaleYTimeline(frames, frames, boneIndex);                timelines.push(readTimeline12(timelineMap, timeline, 1, 1));              } else if (timelineName === "shear") {                let timeline = new ShearTimeline(frames, frames << 1, boneIndex);                timelines.push(readTimeline22(timelineMap, timeline, "x", "y", 0, 1));              } else if (timelineName === "shearx") {                let timeline = new ShearXTimeline(frames, frames, boneIndex);                timelines.push(readTimeline12(timelineMap, timeline, 0, 1));              } else if (timelineName === "sheary") {                let timeline = new ShearYTimeline(frames, frames, boneIndex);                timelines.push(readTimeline12(timelineMap, timeline, 0, 1));              }            }          }        }        if (map.ik) {          for (let constraintName in map.ik) {            let constraintMap = map.ik[constraintName];            let keyMap = constraintMap[0];            if (!keyMap)              continue;            let constraint = skeletonData.findIkConstraint(constraintName);            let constraintIndex = skeletonData.ikConstraints.indexOf(constraint);            let timeline = new IkConstraintTimeline(constraintMap.length, constraintMap.length << 1, constraintIndex);            let time = getValue(keyMap, "time", 0);            let mix = getValue(keyMap, "mix", 1);            let softness = getValue(keyMap, "softness", 0) * scale;            for (let frame = 0, bezier = 0; ; frame++) {              timeline.setFrame(frame, time, mix, softness, getValue(keyMap, "bendPositive", true) ? 1 : -1, getValue(keyMap, "compress", false), getValue(keyMap, "stretch", false));              let nextMap = constraintMap[frame + 1];              if (!nextMap) {                timeline.shrink(bezier);                break;              }              let time2 = getValue(nextMap, "time", 0);              let mix2 = getValue(nextMap, "mix", 1);              let softness2 = getValue(nextMap, "softness", 0) * scale;              let curve = keyMap.curve;              if (curve) {                bezier = readCurve(curve, timeline, bezier, frame, 0, time, time2, mix, mix2, 1);                bezier = readCurve(curve, timeline, bezier, frame, 1, time, time2, softness, softness2, scale);              }              time = time2;              mix = mix2;              softness = softness2;              keyMap = nextMap;            }            timelines.push(timeline);          }        }        if (map.transform) {          for (let constraintName in map.transform) {            let timelineMap = map.transform[constraintName];            let keyMap = timelineMap[0];            if (!keyMap)              continue;            let constraint = skeletonData.findTransformConstraint(constraintName);            let constraintIndex = skeletonData.transformConstraints.indexOf(constraint);            let timeline = new TransformConstraintTimeline(timelineMap.length, timelineMap.length * 6, constraintIndex);            let time = getValue(keyMap, "time", 0);            let mixRotate = getValue(keyMap, "mixRotate", 1);            let mixX = getValue(keyMap, "mixX", 1);            let mixY = getValue(keyMap, "mixY", mixX);            let mixScaleX = getValue(keyMap, "mixScaleX", 1);            let mixScaleY = getValue(keyMap, "mixScaleY", mixScaleX);            let mixShearY = getValue(keyMap, "mixShearY", 1);            for (let frame = 0, bezier = 0; ; frame++) {              timeline.setFrame(frame, time, mixRotate, mixX, mixY, mixScaleX, mixScaleY, mixShearY);              let nextMap = timelineMap[frame + 1];              if (!nextMap) {                timeline.shrink(bezier);                break;              }              let time2 = getValue(nextMap, "time", 0);              let mixRotate2 = getValue(nextMap, "mixRotate", 1);              let mixX2 = getValue(nextMap, "mixX", 1);              let mixY2 = getValue(nextMap, "mixY", mixX2);              let mixScaleX2 = getValue(nextMap, "mixScaleX", 1);              let mixScaleY2 = getValue(nextMap, "mixScaleY", mixScaleX2);              let mixShearY2 = getValue(nextMap, "mixShearY", 1);              let curve = keyMap.curve;              if (curve) {                bezier = readCurve(curve, timeline, bezier, frame, 0, time, time2, mixRotate, mixRotate2, 1);                bezier = readCurve(curve, timeline, bezier, frame, 1, time, time2, mixX, mixX2, 1);                bezier = readCurve(curve, timeline, bezier, frame, 2, time, time2, mixY, mixY2, 1);                bezier = readCurve(curve, timeline, bezier, frame, 3, time, time2, mixScaleX, mixScaleX2, 1);                bezier = readCurve(curve, timeline, bezier, frame, 4, time, time2, mixScaleY, mixScaleY2, 1);                bezier = readCurve(curve, timeline, bezier, frame, 5, time, time2, mixShearY, mixShearY2, 1);              }              time = time2;              mixRotate = mixRotate2;              mixX = mixX2;              mixY = mixY2;              mixScaleX = mixScaleX2;              mixScaleY = mixScaleY2;              mixScaleX = mixScaleX2;              keyMap = nextMap;            }            timelines.push(timeline);          }        }        if (map.path) {          for (let constraintName in map.path) {            let constraintMap = map.path[constraintName];            let constraint = skeletonData.findPathConstraint(constraintName);            let constraintIndex = skeletonData.pathConstraints.indexOf(constraint);            for (let timelineName in constraintMap) {              let timelineMap = constraintMap[timelineName];              let keyMap = timelineMap[0];              if (!keyMap)                continue;              let frames = timelineMap.length;              if (timelineName === "position") {                let timeline = new PathConstraintPositionTimeline(frames, frames, constraintIndex);                timelines.push(readTimeline12(timelineMap, timeline, 0, constraint.positionMode == PositionMode.Fixed ? scale : 1));              } else if (timelineName === "spacing") {                let timeline = new PathConstraintSpacingTimeline(frames, frames, constraintIndex);                timelines.push(readTimeline12(timelineMap, timeline, 0, constraint.spacingMode == SpacingMode.Length || constraint.spacingMode == SpacingMode.Fixed ? scale : 1));              } else if (timelineName === "mix") {                let timeline = new PathConstraintMixTimeline(frames, frames * 3, constraintIndex);                let time = getValue(keyMap, "time", 0);                let mixRotate = getValue(keyMap, "mixRotate", 1);                let mixX = getValue(keyMap, "mixX", 1);                let mixY = getValue(keyMap, "mixY", mixX);                for (let frame = 0, bezier = 0; ; frame++) {                  timeline.setFrame(frame, time, mixRotate, mixX, mixY);                  let nextMap = timelineMap[frame + 1];                  if (!nextMap) {                    timeline.shrink(bezier);                    break;                  }                  let time2 = getValue(nextMap, "time", 0);                  let mixRotate2 = getValue(nextMap, "mixRotate", 1);                  let mixX2 = getValue(nextMap, "mixX", 1);                  let mixY2 = getValue(nextMap, "mixY", mixX2);                  let curve = keyMap.curve;                  if (curve) {                    bezier = readCurve(curve, timeline, bezier, frame, 0, time, time2, mixRotate, mixRotate2, 1);                    bezier = readCurve(curve, timeline, bezier, frame, 1, time, time2, mixX, mixX2, 1);                    bezier = readCurve(curve, timeline, bezier, frame, 2, time, time2, mixY, mixY2, 1);                  }                  time = time2;                  mixRotate = mixRotate2;                  mixX = mixX2;                  mixY = mixY2;                  keyMap = nextMap;                }                timelines.push(timeline);              }            }          }        }        if (map.deform) {          for (let deformName in map.deform) {            let deformMap = map.deform[deformName];            let skin = skeletonData.findSkin(deformName);            for (let slotName in deformMap) {              let slotMap = deformMap[slotName];              let slotIndex = skeletonData.findSlot(slotName).index;              for (let timelineName in slotMap) {                let timelineMap = slotMap[timelineName];                let keyMap = timelineMap[0];                if (!keyMap)                  continue;                let attachment = skin.getAttachment(slotIndex, timelineName);                let weighted = attachment.bones;                let vertices = attachment.vertices;                let deformLength = weighted ? vertices.length / 3 * 2 : vertices.length;                let timeline = new DeformTimeline(timelineMap.length, timelineMap.length, slotIndex, attachment);                let time = getValue(keyMap, "time", 0);                for (let frame = 0, bezier = 0; ; frame++) {                  let deform;                  let verticesValue = getValue(keyMap, "vertices", null);                  if (!verticesValue)                    deform = weighted ? Utils.newFloatArray(deformLength) : vertices;                  else {                    deform = Utils.newFloatArray(deformLength);                    let start = getValue(keyMap, "offset", 0);                    Utils.arrayCopy(verticesValue, 0, deform, start, verticesValue.length);                    if (scale != 1) {                      for (let i = start, n = i + verticesValue.length; i < n; i++)                        deform[i] *= scale;                    }                    if (!weighted) {                      for (let i = 0; i < deformLength; i++)                        deform[i] += vertices[i];                    }                  }                  timeline.setFrame(frame, time, deform);                  let nextMap = timelineMap[frame + 1];                  if (!nextMap) {                    timeline.shrink(bezier);                    break;                  }                  let time2 = getValue(nextMap, "time", 0);                  let curve = keyMap.curve;                  if (curve)                    bezier = readCurve(curve, timeline, bezier, frame, 0, time, time2, 0, 1, 1);                  time = time2;                  keyMap = nextMap;                }                timelines.push(timeline);              }            }          }        }        if (map.drawOrder) {          let timeline = new DrawOrderTimeline(map.drawOrder.length);          let slotCount = skeletonData.slots.length;          let frame = 0;          for (let i = 0; i < map.drawOrder.length; i++, frame++) {            let drawOrderMap = map.drawOrder[i];            let drawOrder = null;            let offsets = getValue(drawOrderMap, "offsets", null);            if (offsets) {              drawOrder = Utils.newArray(slotCount, -1);              let unchanged = Utils.newArray(slotCount - offsets.length, 0);              let originalIndex = 0, unchangedIndex = 0;              for (let ii = 0; ii < offsets.length; ii++) {                let offsetMap = offsets[ii];                let slotIndex = skeletonData.findSlot(offsetMap.slot).index;                while (originalIndex != slotIndex)                  unchanged[unchangedIndex++] = originalIndex++;                drawOrder[originalIndex + offsetMap.offset] = originalIndex++;              }              while (originalIndex < slotCount)                unchanged[unchangedIndex++] = originalIndex++;              for (let ii = slotCount - 1; ii >= 0; ii--)                if (drawOrder[ii] == -1)                  drawOrder[ii] = unchanged[--unchangedIndex];            }            timeline.setFrame(frame, getValue(drawOrderMap, "time", 0), drawOrder);          }          timelines.push(timeline);        }        if (map.events) {          let timeline = new EventTimeline(map.events.length);          let frame = 0;          for (let i = 0; i < map.events.length; i++, frame++) {            let eventMap = map.events[i];            let eventData = skeletonData.findEvent(eventMap.name);            let event = new Event(Utils.toSinglePrecision(getValue(eventMap, "time", 0)), eventData);            event.intValue = getValue(eventMap, "int", eventData.intValue);            event.floatValue = getValue(eventMap, "float", eventData.floatValue);            event.stringValue = getValue(eventMap, "string", eventData.stringValue);            if (event.data.audioPath) {              event.volume = getValue(eventMap, "volume", 1);              event.balance = getValue(eventMap, "balance", 0);            }            timeline.setFrame(frame, event);          }          timelines.push(timeline);        }        let duration = 0;        for (let i = 0, n = timelines.length; i < n; i++)          duration = Math.max(duration, timelines[i].getDuration());        skeletonData.animations.push(new Animation(name, timelines, duration));      }    };    var LinkedMesh2 = class {      constructor(mesh, skin, slotIndex, parent, inheritDeform) {        this.mesh = mesh;        this.skin = skin;        this.slotIndex = slotIndex;        this.parent = parent;        this.inheritDeform = inheritDeform;      }    };    function readTimeline12(keys, timeline, defaultValue, scale) {      let keyMap = keys[0];      let time = getValue(keyMap, "time", 0);      let value = getValue(keyMap, "value", defaultValue) * scale;      let bezier = 0;      for (let frame = 0; ; frame++) {        timeline.setFrame(frame, time, value);        let nextMap = keys[frame + 1];        if (!nextMap) {          timeline.shrink(bezier);          return timeline;        }        let time2 = getValue(nextMap, "time", 0);        let value2 = getValue(nextMap, "value", defaultValue) * scale;        if (keyMap.curve)          bezier = readCurve(keyMap.curve, timeline, bezier, frame, 0, time, time2, value, value2, scale);        time = time2;        value = value2;        keyMap = nextMap;      }    }    function readTimeline22(keys, timeline, name1, name2, defaultValue, scale) {      let keyMap = keys[0];      let time = getValue(keyMap, "time", 0);      let value1 = getValue(keyMap, name1, defaultValue) * scale;      let value2 = getValue(keyMap, name2, defaultValue) * scale;      let bezier = 0;      for (let frame = 0; ; frame++) {        timeline.setFrame(frame, time, value1, value2);        let nextMap = keys[frame + 1];        if (!nextMap) {          timeline.shrink(bezier);          return timeline;        }        let time2 = getValue(nextMap, "time", 0);        let nvalue1 = getValue(nextMap, name1, defaultValue) * scale;        let nvalue2 = getValue(nextMap, name2, defaultValue) * scale;        let curve = keyMap.curve;        if (curve) {          bezier = readCurve(curve, timeline, bezier, frame, 0, time, time2, value1, nvalue1, scale);          bezier = readCurve(curve, timeline, bezier, frame, 1, time, time2, value2, nvalue2, scale);        }        time = time2;        value1 = nvalue1;        value2 = nvalue2;        keyMap = nextMap;      }    }    function readCurve(curve, timeline, bezier, frame, value, time1, time2, value1, value2, scale) {      if (curve == "stepped") {        timeline.setStepped(frame);        return bezier;      }      let i = value << 2;      let cx1 = curve[i];      let cy1 = curve[i + 1] * scale;      let cx2 = curve[i + 2];      let cy2 = curve[i + 3] * scale;      timeline.setBezier(bezier, frame, value, time1, value1, cx1, cy1, cx2, cy2, time2, value2);      return bezier + 1;    }    function getValue(map, property, defaultValue) {      return map[property] !== void 0 ? map[property] : defaultValue;    }      // spine-core/src/polyfills.ts    (() => {      if (typeof Math.fround === "undefined") {        Math.fround = function(array) {          return function(x) {            return array[0] = x, array[0];          };        }(new Float32Array(1));      }    })();      // spine-core/src/vertexeffects/JitterEffect.ts    var JitterEffect = class {      constructor(jitterX, jitterY) {        this.jitterX = 0;        this.jitterY = 0;        this.jitterX = jitterX;        this.jitterY = jitterY;      }      begin(skeleton) {      }      transform(position, uv, light, dark) {        position.x += MathUtils.randomTriangular(-this.jitterX, this.jitterY);        position.y += MathUtils.randomTriangular(-this.jitterX, this.jitterY);      }      end() {      }    };      // spine-core/src/vertexeffects/SwirlEffect.ts    var _SwirlEffect = class {      constructor(radius) {        this.centerX = 0;        this.centerY = 0;        this.radius = 0;        this.angle = 0;        this.worldX = 0;        this.worldY = 0;        this.radius = radius;      }      begin(skeleton) {        this.worldX = skeleton.x + this.centerX;        this.worldY = skeleton.y + this.centerY;      }      transform(position, uv, light, dark) {        let radAngle = this.angle * MathUtils.degreesToRadians;        let x = position.x - this.worldX;        let y = position.y - this.worldY;        let dist = Math.sqrt(x * x + y * y);        if (dist < this.radius) {          let theta = _SwirlEffect.interpolation.apply(0, radAngle, (this.radius - dist) / this.radius);          let cos = Math.cos(theta);          let sin = Math.sin(theta);          position.x = cos * x - sin * y + this.worldX;          position.y = sin * x + cos * y + this.worldY;        }      }      end() {      }    };    var SwirlEffect = _SwirlEffect;    SwirlEffect.interpolation = new PowOut(2);      // spine-webgl/src/WebGL.ts    var ManagedWebGLRenderingContext = class {      constructor(canvasOrContext, contextConfig = { alpha: "true" }) {        this.restorables = new Array();        if (!(canvasOrContext instanceof WebGLRenderingContext || typeof WebGL2RenderingContext !== "undefined" && canvasOrContext instanceof WebGL2RenderingContext))          this.setupCanvas(canvasOrContext, contextConfig);        else {          this.gl = canvasOrContext;          this.canvas = this.gl.canvas;        }      }      setupCanvas(canvas, contextConfig) {        this.gl = canvas.getContext("webgl2", contextConfig) || canvas.getContext("webgl", contextConfig);        this.canvas = canvas;        canvas.addEventListener("webglcontextlost", (e) => {          let event = e;          if (e)            e.preventDefault();        });        canvas.addEventListener("webglcontextrestored", (e) => {          for (let i = 0, n = this.restorables.length; i < n; i++)            this.restorables[i].restore();        });      }      addRestorable(restorable) {        this.restorables.push(restorable);      }      removeRestorable(restorable) {        let index = this.restorables.indexOf(restorable);        if (index > -1)          this.restorables.splice(index, 1);      }    };    var ONE = 1;    var ONE_MINUS_SRC_COLOR = 769;    var SRC_ALPHA = 770;    var ONE_MINUS_SRC_ALPHA = 771;    var DST_COLOR = 774;    var WebGLBlendModeConverter = class {      static getDestGLBlendMode(blendMode) {        switch (blendMode) {          case BlendMode.Normal:            return ONE_MINUS_SRC_ALPHA;          case BlendMode.Additive:            return ONE;          case BlendMode.Multiply:            return ONE_MINUS_SRC_ALPHA;          case BlendMode.Screen:            return ONE_MINUS_SRC_ALPHA;          default:            throw new Error("Unknown blend mode: " + blendMode);        }      }      static getSourceColorGLBlendMode(blendMode, premultipliedAlpha = false) {        switch (blendMode) {          case BlendMode.Normal:            return premultipliedAlpha ? ONE : SRC_ALPHA;          case BlendMode.Additive:            return premultipliedAlpha ? ONE : SRC_ALPHA;          case BlendMode.Multiply:            return DST_COLOR;          case BlendMode.Screen:            return ONE;          default:            throw new Error("Unknown blend mode: " + blendMode);        }      }      static getSourceAlphaGLBlendMode(blendMode) {        switch (blendMode) {          case BlendMode.Normal:            return ONE;          case BlendMode.Additive:            return ONE;          case BlendMode.Multiply:            return ONE_MINUS_SRC_ALPHA;          case BlendMode.Screen:            return ONE_MINUS_SRC_COLOR;          default:            throw new Error("Unknown blend mode: " + blendMode);        }      }    };      // spine-webgl/src/GLTexture.ts    var _GLTexture = class extends Texture {      constructor(context, image, useMipMaps = false) {        super(image);        this.texture = null;        this.boundUnit = 0;        this.useMipMaps = false;        this.context = context instanceof ManagedWebGLRenderingContext ? context : new ManagedWebGLRenderingContext(context);        this.useMipMaps = useMipMaps;        this.restore();        this.context.addRestorable(this);      }      setFilters(minFilter, magFilter) {        let gl = this.context.gl;        this.bind();        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, minFilter);        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, _GLTexture.validateMagFilter(magFilter));      }      static validateMagFilter(magFilter) {        switch (magFilter) {          case TextureFilter.MipMap:          case TextureFilter.MipMapLinearLinear:          case TextureFilter.MipMapLinearNearest:          case TextureFilter.MipMapNearestLinear:          case TextureFilter.MipMapNearestNearest:            return TextureFilter.Linear;          default:            return magFilter;        }      }      setWraps(uWrap, vWrap) {        let gl = this.context.gl;        this.bind();        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, uWrap);        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, vWrap);      }      update(useMipMaps) {        let gl = this.context.gl;        if (!this.texture)          this.texture = this.context.gl.createTexture();        this.bind();        if (_GLTexture.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL)          gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, false);        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this._image);        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, useMipMaps ? gl.LINEAR_MIPMAP_LINEAR : gl.LINEAR);        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);        if (useMipMaps)          gl.generateMipmap(gl.TEXTURE_2D);      }      restore() {        this.texture = null;        this.update(this.useMipMaps);      }      bind(unit = 0) {        let gl = this.context.gl;        this.boundUnit = unit;        gl.activeTexture(gl.TEXTURE0 + unit);        gl.bindTexture(gl.TEXTURE_2D, this.texture);      }      unbind() {        let gl = this.context.gl;        gl.activeTexture(gl.TEXTURE0 + this.boundUnit);        gl.bindTexture(gl.TEXTURE_2D, null);      }      dispose() {        this.context.removeRestorable(this);        let gl = this.context.gl;        gl.deleteTexture(this.texture);      }    };    var GLTexture = _GLTexture;    GLTexture.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL = false;      // spine-webgl/src/AssetManager.ts    var AssetManager = class extends AssetManagerBase {      constructor(context, pathPrefix = "", downloader = null) {        super((image) => {          return new GLTexture(context, image);        }, pathPrefix, downloader);      }    };      // spine-webgl/src/Vector3.ts    var Vector3 = class {      constructor(x = 0, y = 0, z = 0) {        this.x = 0;        this.y = 0;        this.z = 0;        this.x = x;        this.y = y;        this.z = z;      }      setFrom(v) {        this.x = v.x;        this.y = v.y;        this.z = v.z;        return this;      }      set(x, y, z) {        this.x = x;        this.y = y;        this.z = z;        return this;      }      add(v) {        this.x += v.x;        this.y += v.y;        this.z += v.z;        return this;      }      sub(v) {        this.x -= v.x;        this.y -= v.y;        this.z -= v.z;        return this;      }      scale(s) {        this.x *= s;        this.y *= s;        this.z *= s;        return this;      }      normalize() {        let len = this.length();        if (len == 0)          return this;        len = 1 / len;        this.x *= len;        this.y *= len;        this.z *= len;        return this;      }      cross(v) {        return this.set(this.y * v.z - this.z * v.y, this.z * v.x - this.x * v.z, this.x * v.y - this.y * v.x);      }      multiply(matrix) {        let l_mat = matrix.values;        return this.set(this.x * l_mat[M00] + this.y * l_mat[M01] + this.z * l_mat[M02] + l_mat[M03], this.x * l_mat[M10] + this.y * l_mat[M11] + this.z * l_mat[M12] + l_mat[M13], this.x * l_mat[M20] + this.y * l_mat[M21] + this.z * l_mat[M22] + l_mat[M23]);      }      project(matrix) {        let l_mat = matrix.values;        let l_w = 1 / (this.x * l_mat[M30] + this.y * l_mat[M31] + this.z * l_mat[M32] + l_mat[M33]);        return this.set((this.x * l_mat[M00] + this.y * l_mat[M01] + this.z * l_mat[M02] + l_mat[M03]) * l_w, (this.x * l_mat[M10] + this.y * l_mat[M11] + this.z * l_mat[M12] + l_mat[M13]) * l_w, (this.x * l_mat[M20] + this.y * l_mat[M21] + this.z * l_mat[M22] + l_mat[M23]) * l_w);      }      dot(v) {        return this.x * v.x + this.y * v.y + this.z * v.z;      }      length() {        return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);      }      distance(v) {        let a = v.x - this.x;        let b = v.y - this.y;        let c = v.z - this.z;        return Math.sqrt(a * a + b * b + c * c);      }    };      // spine-webgl/src/Matrix4.ts    var M00 = 0;    var M01 = 4;    var M02 = 8;    var M03 = 12;    var M10 = 1;    var M11 = 5;    var M12 = 9;    var M13 = 13;    var M20 = 2;    var M21 = 6;    var M22 = 10;    var M23 = 14;    var M30 = 3;    var M31 = 7;    var M32 = 11;    var M33 = 15;    var _Matrix4 = class {      constructor() {        this.temp = new Float32Array(16);        this.values = new Float32Array(16);        let v = this.values;        v[M00] = 1;        v[M11] = 1;        v[M22] = 1;        v[M33] = 1;      }      set(values) {        this.values.set(values);        return this;      }      transpose() {        let t = this.temp;        let v = this.values;        t[M00] = v[M00];        t[M01] = v[M10];        t[M02] = v[M20];        t[M03] = v[M30];        t[M10] = v[M01];        t[M11] = v[M11];        t[M12] = v[M21];        t[M13] = v[M31];        t[M20] = v[M02];        t[M21] = v[M12];        t[M22] = v[M22];        t[M23] = v[M32];        t[M30] = v[M03];        t[M31] = v[M13];        t[M32] = v[M23];        t[M33] = v[M33];        return this.set(t);      }      identity() {        let v = this.values;        v[M00] = 1;        v[M01] = 0;        v[M02] = 0;        v[M03] = 0;        v[M10] = 0;        v[M11] = 1;        v[M12] = 0;        v[M13] = 0;        v[M20] = 0;        v[M21] = 0;        v[M22] = 1;        v[M23] = 0;        v[M30] = 0;        v[M31] = 0;        v[M32] = 0;        v[M33] = 1;        return this;      }      invert() {        let v = this.values;        let t = this.temp;        let l_det = v[M30] * v[M21] * v[M12] * v[M03] - v[M20] * v[M31] * v[M12] * v[M03] - v[M30] * v[M11] * v[M22] * v[M03] + v[M10] * v[M31] * v[M22] * v[M03] + v[M20] * v[M11] * v[M32] * v[M03] - v[M10] * v[M21] * v[M32] * v[M03] - v[M30] * v[M21] * v[M02] * v[M13] + v[M20] * v[M31] * v[M02] * v[M13] + v[M30] * v[M01] * v[M22] * v[M13] - v[M00] * v[M31] * v[M22] * v[M13] - v[M20] * v[M01] * v[M32] * v[M13] + v[M00] * v[M21] * v[M32] * v[M13] + v[M30] * v[M11] * v[M02] * v[M23] - v[M10] * v[M31] * v[M02] * v[M23] - v[M30] * v[M01] * v[M12] * v[M23] + v[M00] * v[M31] * v[M12] * v[M23] + v[M10] * v[M01] * v[M32] * v[M23] - v[M00] * v[M11] * v[M32] * v[M23] - v[M20] * v[M11] * v[M02] * v[M33] + v[M10] * v[M21] * v[M02] * v[M33] + v[M20] * v[M01] * v[M12] * v[M33] - v[M00] * v[M21] * v[M12] * v[M33] - v[M10] * v[M01] * v[M22] * v[M33] + v[M00] * v[M11] * v[M22] * v[M33];        if (l_det == 0)          throw new Error("non-invertible matrix");        let inv_det = 1 / l_det;        t[M00] = v[M12] * v[M23] * v[M31] - v[M13] * v[M22] * v[M31] + v[M13] * v[M21] * v[M32] - v[M11] * v[M23] * v[M32] - v[M12] * v[M21] * v[M33] + v[M11] * v[M22] * v[M33];        t[M01] = v[M03] * v[M22] * v[M31] - v[M02] * v[M23] * v[M31] - v[M03] * v[M21] * v[M32] + v[M01] * v[M23] * v[M32] + v[M02] * v[M21] * v[M33] - v[M01] * v[M22] * v[M33];        t[M02] = v[M02] * v[M13] * v[M31] - v[M03] * v[M12] * v[M31] + v[M03] * v[M11] * v[M32] - v[M01] * v[M13] * v[M32] - v[M02] * v[M11] * v[M33] + v[M01] * v[M12] * v[M33];        t[M03] = v[M03] * v[M12] * v[M21] - v[M02] * v[M13] * v[M21] - v[M03] * v[M11] * v[M22] + v[M01] * v[M13] * v[M22] + v[M02] * v[M11] * v[M23] - v[M01] * v[M12] * v[M23];        t[M10] = v[M13] * v[M22] * v[M30] - v[M12] * v[M23] * v[M30] - v[M13] * v[M20] * v[M32] + v[M10] * v[M23] * v[M32] + v[M12] * v[M20] * v[M33] - v[M10] * v[M22] * v[M33];        t[M11] = v[M02] * v[M23] * v[M30] - v[M03] * v[M22] * v[M30] + v[M03] * v[M20] * v[M32] - v[M00] * v[M23] * v[M32] - v[M02] * v[M20] * v[M33] + v[M00] * v[M22] * v[M33];        t[M12] = v[M03] * v[M12] * v[M30] - v[M02] * v[M13] * v[M30] - v[M03] * v[M10] * v[M32] + v[M00] * v[M13] * v[M32] + v[M02] * v[M10] * v[M33] - v[M00] * v[M12] * v[M33];        t[M13] = v[M02] * v[M13] * v[M20] - v[M03] * v[M12] * v[M20] + v[M03] * v[M10] * v[M22] - v[M00] * v[M13] * v[M22] - v[M02] * v[M10] * v[M23] + v[M00] * v[M12] * v[M23];        t[M20] = v[M11] * v[M23] * v[M30] - v[M13] * v[M21] * v[M30] + v[M13] * v[M20] * v[M31] - v[M10] * v[M23] * v[M31] - v[M11] * v[M20] * v[M33] + v[M10] * v[M21] * v[M33];        t[M21] = v[M03] * v[M21] * v[M30] - v[M01] * v[M23] * v[M30] - v[M03] * v[M20] * v[M31] + v[M00] * v[M23] * v[M31] + v[M01] * v[M20] * v[M33] - v[M00] * v[M21] * v[M33];        t[M22] = v[M01] * v[M13] * v[M30] - v[M03] * v[M11] * v[M30] + v[M03] * v[M10] * v[M31] - v[M00] * v[M13] * v[M31] - v[M01] * v[M10] * v[M33] + v[M00] * v[M11] * v[M33];        t[M23] = v[M03] * v[M11] * v[M20] - v[M01] * v[M13] * v[M20] - v[M03] * v[M10] * v[M21] + v[M00] * v[M13] * v[M21] + v[M01] * v[M10] * v[M23] - v[M00] * v[M11] * v[M23];        t[M30] = v[M12] * v[M21] * v[M30] - v[M11] * v[M22] * v[M30] - v[M12] * v[M20] * v[M31] + v[M10] * v[M22] * v[M31] + v[M11] * v[M20] * v[M32] - v[M10] * v[M21] * v[M32];        t[M31] = v[M01] * v[M22] * v[M30] - v[M02] * v[M21] * v[M30] + v[M02] * v[M20] * v[M31] - v[M00] * v[M22] * v[M31] - v[M01] * v[M20] * v[M32] + v[M00] * v[M21] * v[M32];        t[M32] = v[M02] * v[M11] * v[M30] - v[M01] * v[M12] * v[M30] - v[M02] * v[M10] * v[M31] + v[M00] * v[M12] * v[M31] + v[M01] * v[M10] * v[M32] - v[M00] * v[M11] * v[M32];        t[M33] = v[M01] * v[M12] * v[M20] - v[M02] * v[M11] * v[M20] + v[M02] * v[M10] * v[M21] - v[M00] * v[M12] * v[M21] - v[M01] * v[M10] * v[M22] + v[M00] * v[M11] * v[M22];        v[M00] = t[M00] * inv_det;        v[M01] = t[M01] * inv_det;        v[M02] = t[M02] * inv_det;        v[M03] = t[M03] * inv_det;        v[M10] = t[M10] * inv_det;        v[M11] = t[M11] * inv_det;        v[M12] = t[M12] * inv_det;        v[M13] = t[M13] * inv_det;        v[M20] = t[M20] * inv_det;        v[M21] = t[M21] * inv_det;        v[M22] = t[M22] * inv_det;        v[M23] = t[M23] * inv_det;        v[M30] = t[M30] * inv_det;        v[M31] = t[M31] * inv_det;        v[M32] = t[M32] * inv_det;        v[M33] = t[M33] * inv_det;        return this;      }      determinant() {        let v = this.values;        return v[M30] * v[M21] * v[M12] * v[M03] - v[M20] * v[M31] * v[M12] * v[M03] - v[M30] * v[M11] * v[M22] * v[M03] + v[M10] * v[M31] * v[M22] * v[M03] + v[M20] * v[M11] * v[M32] * v[M03] - v[M10] * v[M21] * v[M32] * v[M03] - v[M30] * v[M21] * v[M02] * v[M13] + v[M20] * v[M31] * v[M02] * v[M13] + v[M30] * v[M01] * v[M22] * v[M13] - v[M00] * v[M31] * v[M22] * v[M13] - v[M20] * v[M01] * v[M32] * v[M13] + v[M00] * v[M21] * v[M32] * v[M13] + v[M30] * v[M11] * v[M02] * v[M23] - v[M10] * v[M31] * v[M02] * v[M23] - v[M30] * v[M01] * v[M12] * v[M23] + v[M00] * v[M31] * v[M12] * v[M23] + v[M10] * v[M01] * v[M32] * v[M23] - v[M00] * v[M11] * v[M32] * v[M23] - v[M20] * v[M11] * v[M02] * v[M33] + v[M10] * v[M21] * v[M02] * v[M33] + v[M20] * v[M01] * v[M12] * v[M33] - v[M00] * v[M21] * v[M12] * v[M33] - v[M10] * v[M01] * v[M22] * v[M33] + v[M00] * v[M11] * v[M22] * v[M33];      }      translate(x, y, z) {        let v = this.values;        v[M03] += x;        v[M13] += y;        v[M23] += z;        return this;      }      copy() {        return new _Matrix4().set(this.values);      }      projection(near, far, fovy, aspectRatio) {        this.identity();        let l_fd = 1 / Math.tan(fovy * (Math.PI / 180) / 2);        let l_a1 = (far + near) / (near - far);        let l_a2 = 2 * far * near / (near - far);        let v = this.values;        v[M00] = l_fd / aspectRatio;        v[M10] = 0;        v[M20] = 0;        v[M30] = 0;        v[M01] = 0;        v[M11] = l_fd;        v[M21] = 0;        v[M31] = 0;        v[M02] = 0;        v[M12] = 0;        v[M22] = l_a1;        v[M32] = -1;        v[M03] = 0;        v[M13] = 0;        v[M23] = l_a2;        v[M33] = 0;        return this;      }      ortho2d(x, y, width, height) {        return this.ortho(x, x + width, y, y + height, 0, 1);      }      ortho(left, right, bottom, top, near, far) {        this.identity();        let x_orth = 2 / (right - left);        let y_orth = 2 / (top - bottom);        let z_orth = -2 / (far - near);        let tx = -(right + left) / (right - left);        let ty = -(top + bottom) / (top - bottom);        let tz = -(far + near) / (far - near);        let v = this.values;        v[M00] = x_orth;        v[M10] = 0;        v[M20] = 0;        v[M30] = 0;        v[M01] = 0;        v[M11] = y_orth;        v[M21] = 0;        v[M31] = 0;        v[M02] = 0;        v[M12] = 0;        v[M22] = z_orth;        v[M32] = 0;        v[M03] = tx;        v[M13] = ty;        v[M23] = tz;        v[M33] = 1;        return this;      }      multiply(matrix) {        let t = this.temp;        let v = this.values;        let m = matrix.values;        t[M00] = v[M00] * m[M00] + v[M01] * m[M10] + v[M02] * m[M20] + v[M03] * m[M30];        t[M01] = v[M00] * m[M01] + v[M01] * m[M11] + v[M02] * m[M21] + v[M03] * m[M31];        t[M02] = v[M00] * m[M02] + v[M01] * m[M12] + v[M02] * m[M22] + v[M03] * m[M32];        t[M03] = v[M00] * m[M03] + v[M01] * m[M13] + v[M02] * m[M23] + v[M03] * m[M33];        t[M10] = v[M10] * m[M00] + v[M11] * m[M10] + v[M12] * m[M20] + v[M13] * m[M30];        t[M11] = v[M10] * m[M01] + v[M11] * m[M11] + v[M12] * m[M21] + v[M13] * m[M31];        t[M12] = v[M10] * m[M02] + v[M11] * m[M12] + v[M12] * m[M22] + v[M13] * m[M32];        t[M13] = v[M10] * m[M03] + v[M11] * m[M13] + v[M12] * m[M23] + v[M13] * m[M33];        t[M20] = v[M20] * m[M00] + v[M21] * m[M10] + v[M22] * m[M20] + v[M23] * m[M30];        t[M21] = v[M20] * m[M01] + v[M21] * m[M11] + v[M22] * m[M21] + v[M23] * m[M31];        t[M22] = v[M20] * m[M02] + v[M21] * m[M12] + v[M22] * m[M22] + v[M23] * m[M32];        t[M23] = v[M20] * m[M03] + v[M21] * m[M13] + v[M22] * m[M23] + v[M23] * m[M33];        t[M30] = v[M30] * m[M00] + v[M31] * m[M10] + v[M32] * m[M20] + v[M33] * m[M30];        t[M31] = v[M30] * m[M01] + v[M31] * m[M11] + v[M32] * m[M21] + v[M33] * m[M31];        t[M32] = v[M30] * m[M02] + v[M31] * m[M12] + v[M32] * m[M22] + v[M33] * m[M32];        t[M33] = v[M30] * m[M03] + v[M31] * m[M13] + v[M32] * m[M23] + v[M33] * m[M33];        return this.set(this.temp);      }      multiplyLeft(matrix) {        let t = this.temp;        let v = this.values;        let m = matrix.values;        t[M00] = m[M00] * v[M00] + m[M01] * v[M10] + m[M02] * v[M20] + m[M03] * v[M30];        t[M01] = m[M00] * v[M01] + m[M01] * v[M11] + m[M02] * v[M21] + m[M03] * v[M31];        t[M02] = m[M00] * v[M02] + m[M01] * v[M12] + m[M02] * v[M22] + m[M03] * v[M32];        t[M03] = m[M00] * v[M03] + m[M01] * v[M13] + m[M02] * v[M23] + m[M03] * v[M33];        t[M10] = m[M10] * v[M00] + m[M11] * v[M10] + m[M12] * v[M20] + m[M13] * v[M30];        t[M11] = m[M10] * v[M01] + m[M11] * v[M11] + m[M12] * v[M21] + m[M13] * v[M31];        t[M12] = m[M10] * v[M02] + m[M11] * v[M12] + m[M12] * v[M22] + m[M13] * v[M32];        t[M13] = m[M10] * v[M03] + m[M11] * v[M13] + m[M12] * v[M23] + m[M13] * v[M33];        t[M20] = m[M20] * v[M00] + m[M21] * v[M10] + m[M22] * v[M20] + m[M23] * v[M30];        t[M21] = m[M20] * v[M01] + m[M21] * v[M11] + m[M22] * v[M21] + m[M23] * v[M31];        t[M22] = m[M20] * v[M02] + m[M21] * v[M12] + m[M22] * v[M22] + m[M23] * v[M32];        t[M23] = m[M20] * v[M03] + m[M21] * v[M13] + m[M22] * v[M23] + m[M23] * v[M33];        t[M30] = m[M30] * v[M00] + m[M31] * v[M10] + m[M32] * v[M20] + m[M33] * v[M30];        t[M31] = m[M30] * v[M01] + m[M31] * v[M11] + m[M32] * v[M21] + m[M33] * v[M31];        t[M32] = m[M30] * v[M02] + m[M31] * v[M12] + m[M32] * v[M22] + m[M33] * v[M32];        t[M33] = m[M30] * v[M03] + m[M31] * v[M13] + m[M32] * v[M23] + m[M33] * v[M33];        return this.set(this.temp);      }      lookAt(position, direction, up) {        _Matrix4.initTemps();        let xAxis = _Matrix4.xAxis, yAxis = _Matrix4.yAxis, zAxis = _Matrix4.zAxis;        zAxis.setFrom(direction).normalize();        xAxis.setFrom(direction).normalize();        xAxis.cross(up).normalize();        yAxis.setFrom(xAxis).cross(zAxis).normalize();        this.identity();        let val = this.values;        val[M00] = xAxis.x;        val[M01] = xAxis.y;        val[M02] = xAxis.z;        val[M10] = yAxis.x;        val[M11] = yAxis.y;        val[M12] = yAxis.z;        val[M20] = -zAxis.x;        val[M21] = -zAxis.y;        val[M22] = -zAxis.z;        _Matrix4.tmpMatrix.identity();        _Matrix4.tmpMatrix.values[M03] = -position.x;        _Matrix4.tmpMatrix.values[M13] = -position.y;        _Matrix4.tmpMatrix.values[M23] = -position.z;        this.multiply(_Matrix4.tmpMatrix);        return this;      }      static initTemps() {        if (_Matrix4.xAxis === null)          _Matrix4.xAxis = new Vector3();        if (_Matrix4.yAxis === null)          _Matrix4.yAxis = new Vector3();        if (_Matrix4.zAxis === null)          _Matrix4.zAxis = new Vector3();      }    };    var Matrix42 = _Matrix4;    Matrix42.xAxis = null;    Matrix42.yAxis = null;    Matrix42.zAxis = null;    Matrix42.tmpMatrix = new _Matrix4();      // spine-webgl/src/Camera.ts    var OrthoCamera = class {      constructor(viewportWidth, viewportHeight) {        this.position = new Vector3(0, 0, 0);        this.direction = new Vector3(0, 0, -1);        this.up = new Vector3(0, 1, 0);        this.near = 0;        this.far = 100;        this.zoom = 1;        this.viewportWidth = 0;        this.viewportHeight = 0;        this.projectionView = new Matrix42();        this.inverseProjectionView = new Matrix42();        this.projection = new Matrix42();        this.view = new Matrix42();        this.viewportWidth = viewportWidth;        this.viewportHeight = viewportHeight;        this.update();      }      update() {        let projection = this.projection;        let view = this.view;        let projectionView = this.projectionView;        let inverseProjectionView = this.inverseProjectionView;        let zoom = this.zoom, viewportWidth = this.viewportWidth, viewportHeight = this.viewportHeight;        projection.ortho(zoom * (-viewportWidth / 2), zoom * (viewportWidth / 2), zoom * (-viewportHeight / 2), zoom * (viewportHeight / 2), this.near, this.far);        view.lookAt(this.position, this.direction, this.up);        projectionView.set(projection.values);        projectionView.multiply(view);        inverseProjectionView.set(projectionView.values).invert();      }      screenToWorld(screenCoords, screenWidth, screenHeight) {        let x = screenCoords.x, y = screenHeight - screenCoords.y - 1;        screenCoords.x = 2 * x / screenWidth - 1;        screenCoords.y = 2 * y / screenHeight - 1;        screenCoords.z = 2 * screenCoords.z - 1;        screenCoords.project(this.inverseProjectionView);        return screenCoords;      }      worldToScreen(worldCoords, screenWidth, screenHeight) {        worldCoords.project(this.projectionView);        worldCoords.x = screenWidth * (worldCoords.x + 1) / 2;        worldCoords.y = screenHeight * (worldCoords.y + 1) / 2;        worldCoords.z = (worldCoords.z + 1) / 2;        return worldCoords;      }      setViewport(viewportWidth, viewportHeight) {        this.viewportWidth = viewportWidth;        this.viewportHeight = viewportHeight;      }    };      // spine-webgl/src/Input.ts    var Input = class {      constructor(element) {        this.mouseX = 0;        this.mouseY = 0;        this.buttonDown = false;        this.touch0 = null;        this.touch1 = null;        this.initialPinchDistance = 0;        this.listeners = new Array();        this.eventListeners = [];        this.element = element;        this.setupCallbacks(element);      }      setupCallbacks(element) {        let mouseDown = (ev) => {          if (ev instanceof MouseEvent) {            let rect = element.getBoundingClientRect();            this.mouseX = ev.clientX - rect.left;            ;            this.mouseY = ev.clientY - rect.top;            this.buttonDown = true;            this.listeners.map((listener) => {              if (listener.down)                listener.down(this.mouseX, this.mouseY);            });            document.addEventListener("mousemove", mouseMove);            document.addEventListener("mouseup", mouseUp);          }        };        let mouseMove = (ev) => {          if (ev instanceof MouseEvent) {            let rect = element.getBoundingClientRect();            this.mouseX = ev.clientX - rect.left;            ;            this.mouseY = ev.clientY - rect.top;            this.listeners.map((listener) => {              if (this.buttonDown) {                if (listener.dragged)                  listener.dragged(this.mouseX, this.mouseY);              } else {                if (listener.moved)                  listener.moved(this.mouseX, this.mouseY);              }            });          }        };        let mouseUp = (ev) => {          if (ev instanceof MouseEvent) {            let rect = element.getBoundingClientRect();            this.mouseX = ev.clientX - rect.left;            ;            this.mouseY = ev.clientY - rect.top;            this.buttonDown = false;            this.listeners.map((listener) => {              if (listener.up)                listener.up(this.mouseX, this.mouseY);            });            document.removeEventListener("mousemove", mouseMove);            document.removeEventListener("mouseup", mouseUp);          }        };        let mouseWheel = (e) => {          e.preventDefault();          let deltaY = e.deltaY;          if (e.deltaMode == WheelEvent.DOM_DELTA_LINE)            deltaY *= 8;          if (e.deltaMode == WheelEvent.DOM_DELTA_PAGE)            deltaY *= 24;          this.listeners.map((listener) => {            if (listener.wheel)              listener.wheel(e.deltaY);          });        };        element.addEventListener("mousedown", mouseDown, true);        element.addEventListener("mousemove", mouseMove, true);        element.addEventListener("mouseup", mouseUp, true);        element.addEventListener("wheel", mouseWheel, true);        element.addEventListener("touchstart", (ev) => {          if (!this.touch0 || !this.touch1) {            var touches = ev.changedTouches;            let nativeTouch = touches.item(0);            let rect = element.getBoundingClientRect();            let x = nativeTouch.clientX - rect.left;            let y = nativeTouch.clientY - rect.top;            let touch = new Touch(nativeTouch.identifier, x, y);            this.mouseX = x;            this.mouseY = y;            this.buttonDown = true;            if (!this.touch0) {              this.touch0 = touch;              this.listeners.map((listener) => {                if (listener.down)                  listener.down(touch.x, touch.y);              });            } else if (!this.touch1) {              this.touch1 = touch;              let dx = this.touch1.x - this.touch0.x;              let dy = this.touch1.x - this.touch0.x;              this.initialPinchDistance = Math.sqrt(dx * dx + dy * dy);              this.listeners.map((listener) => {                if (listener.zoom)                  listener.zoom(this.initialPinchDistance, this.initialPinchDistance);              });            }          }          ev.preventDefault();        }, false);        element.addEventListener("touchmove", (ev) => {          if (this.touch0) {            var touches = ev.changedTouches;            let rect = element.getBoundingClientRect();            for (var i = 0; i < touches.length; i++) {              var nativeTouch = touches[i];              let x = nativeTouch.clientX - rect.left;              let y = nativeTouch.clientY - rect.top;              if (this.touch0.identifier === nativeTouch.identifier) {                this.touch0.x = this.mouseX = x;                this.touch0.y = this.mouseY = y;                this.listeners.map((listener) => {                  if (listener.dragged)                    listener.dragged(x, y);                });              }              if (this.touch1 && this.touch1.identifier === nativeTouch.identifier) {                this.touch1.x = this.mouseX = x;                this.touch1.y = this.mouseY = y;              }            }            if (this.touch0 && this.touch1) {              let dx = this.touch1.x - this.touch0.x;              let dy = this.touch1.x - this.touch0.x;              let distance = Math.sqrt(dx * dx + dy * dy);              this.listeners.map((listener) => {                if (listener.zoom)                  listener.zoom(this.initialPinchDistance, distance);              });            }          }          ev.preventDefault();        }, false);        let touchEnd = (ev) => {          if (this.touch0) {            var touches = ev.changedTouches;            let rect = element.getBoundingClientRect();            for (var i = 0; i < touches.length; i++) {              var nativeTouch = touches[i];              let x = nativeTouch.clientX - rect.left;              let y = nativeTouch.clientY - rect.top;              if (this.touch0.identifier === nativeTouch.identifier) {                this.touch0 = null;                this.mouseX = x;                this.mouseY = y;                this.listeners.map((listener) => {                  if (listener.up)                    listener.up(x, y);                });                if (!this.touch1) {                  this.buttonDown = false;                  break;                } else {                  this.touch0 = this.touch1;                  this.touch1 = null;                  this.mouseX = this.touch0.x;                  this.mouseX = this.touch0.x;                  this.buttonDown = true;                  this.listeners.map((listener) => {                    if (listener.down)                      listener.down(this.touch0.x, this.touch0.y);                  });                }              }              if (this.touch1 && this.touch1.identifier) {                this.touch1 = null;              }            }          }          ev.preventDefault();        };        element.addEventListener("touchend", touchEnd, false);        element.addEventListener("touchcancel", touchEnd);      }      addListener(listener) {        this.listeners.push(listener);      }      removeListener(listener) {        let idx = this.listeners.indexOf(listener);        if (idx > -1) {          this.listeners.splice(idx, 1);        }      }    };    var Touch = class {      constructor(identifier, x, y) {        this.identifier = identifier;        this.x = x;        this.y = y;      }    };      // spine-webgl/src/CameraController.ts    var CameraController = class {      constructor(canvas, camera) {        this.canvas = canvas;        this.camera = camera;        let cameraX = 0, cameraY = 0, cameraZoom = 0;        let mouseX = 0, mouseY = 0;        let lastX = 0, lastY = 0;        let initialZoom = 0;        new Input(canvas).addListener({          down: (x, y) => {            cameraX = camera.position.x;            cameraY = camera.position.y;            mouseX = lastX = x;            mouseY = lastY = y;            initialZoom = camera.zoom;          },          dragged: (x, y) => {            let deltaX = x - mouseX;            let deltaY = y - mouseY;            let originWorld = camera.screenToWorld(new Vector3(0, 0), canvas.clientWidth, canvas.clientHeight);            let deltaWorld = camera.screenToWorld(new Vector3(deltaX, deltaY), canvas.clientWidth, canvas.clientHeight).sub(originWorld);            camera.position.set(cameraX - deltaWorld.x, cameraY - deltaWorld.y, 0);            camera.update();            lastX = x;            lastY = y;          },          wheel: (delta) => {            let zoomAmount = delta / 200 * camera.zoom;            let newZoom = camera.zoom + zoomAmount;            if (newZoom > 0) {              let x = 0, y = 0;              if (delta < 0) {                x = lastX;                y = lastY;              } else {                let viewCenter = new Vector3(canvas.clientWidth / 2 + 15, canvas.clientHeight / 2);                let mouseToCenterX = lastX - viewCenter.x;                let mouseToCenterY = canvas.clientHeight - 1 - lastY - viewCenter.y;                x = viewCenter.x - mouseToCenterX;                y = canvas.clientHeight - 1 - viewCenter.y + mouseToCenterY;              }              let oldDistance = camera.screenToWorld(new Vector3(x, y), canvas.clientWidth, canvas.clientHeight);              camera.zoom = newZoom;              camera.update();              let newDistance = camera.screenToWorld(new Vector3(x, y), canvas.clientWidth, canvas.clientHeight);              camera.position.add(oldDistance.sub(newDistance));              camera.update();            }          },          zoom: (initialDistance, distance) => {            let newZoom = initialDistance / distance;            camera.zoom = initialZoom * newZoom;          },          up: (x, y) => {            lastX = x;            lastY = y;          },          moved: (x, y) => {            lastX = x;            lastY = y;          }        });      }    };      // spine-webgl/src/Shader.ts    var _Shader = class {      constructor(context, vertexShader, fragmentShader) {        this.vertexShader = vertexShader;        this.fragmentShader = fragmentShader;        this.vs = null;        this.fs = null;        this.program = null;        this.tmp2x2 = new Float32Array(2 * 2);        this.tmp3x3 = new Float32Array(3 * 3);        this.tmp4x4 = new Float32Array(4 * 4);        this.vsSource = vertexShader;        this.fsSource = fragmentShader;        this.context = context instanceof ManagedWebGLRenderingContext ? context : new ManagedWebGLRenderingContext(context);        this.context.addRestorable(this);        this.compile();      }      getProgram() {        return this.program;      }      getVertexShader() {        return this.vertexShader;      }      getFragmentShader() {        return this.fragmentShader;      }      getVertexShaderSource() {        return this.vsSource;      }      getFragmentSource() {        return this.fsSource;      }      compile() {        let gl = this.context.gl;        try {          this.vs = this.compileShader(gl.VERTEX_SHADER, this.vertexShader);          this.fs = this.compileShader(gl.FRAGMENT_SHADER, this.fragmentShader);          this.program = this.compileProgram(this.vs, this.fs);        } catch (e) {          this.dispose();          throw e;        }      }      compileShader(type, source) {        let gl = this.context.gl;        let shader = gl.createShader(type);        gl.shaderSource(shader, source);        gl.compileShader(shader);        if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {          let error = "Couldn't compile shader: " + gl.getShaderInfoLog(shader);          gl.deleteShader(shader);          if (!gl.isContextLost())            throw new Error(error);        }        return shader;      }      compileProgram(vs, fs) {        let gl = this.context.gl;        let program = gl.createProgram();        gl.attachShader(program, vs);        gl.attachShader(program, fs);        gl.linkProgram(program);        if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {          let error = "Couldn't compile shader program: " + gl.getProgramInfoLog(program);          gl.deleteProgram(program);          if (!gl.isContextLost())            throw new Error(error);        }        return program;      }      restore() {        this.compile();      }      bind() {        this.context.gl.useProgram(this.program);      }      unbind() {        this.context.gl.useProgram(null);      }      setUniformi(uniform, value) {        this.context.gl.uniform1i(this.getUniformLocation(uniform), value);      }      setUniformf(uniform, value) {        this.context.gl.uniform1f(this.getUniformLocation(uniform), value);      }      setUniform2f(uniform, value, value2) {        this.context.gl.uniform2f(this.getUniformLocation(uniform), value, value2);      }      setUniform3f(uniform, value, value2, value3) {        this.context.gl.uniform3f(this.getUniformLocation(uniform), value, value2, value3);      }      setUniform4f(uniform, value, value2, value3, value4) {        this.context.gl.uniform4f(this.getUniformLocation(uniform), value, value2, value3, value4);      }      setUniform2x2f(uniform, value) {        let gl = this.context.gl;        this.tmp2x2.set(value);        gl.uniformMatrix2fv(this.getUniformLocation(uniform), false, this.tmp2x2);      }      setUniform3x3f(uniform, value) {        let gl = this.context.gl;        this.tmp3x3.set(value);        gl.uniformMatrix3fv(this.getUniformLocation(uniform), false, this.tmp3x3);      }      setUniform4x4f(uniform, value) {        let gl = this.context.gl;        this.tmp4x4.set(value);        gl.uniformMatrix4fv(this.getUniformLocation(uniform), false, this.tmp4x4);      }      getUniformLocation(uniform) {        let gl = this.context.gl;        let location = gl.getUniformLocation(this.program, uniform);        if (!location && !gl.isContextLost())          throw new Error(`Couldn't find location for uniform ${uniform}`);        return location;      }      getAttributeLocation(attribute) {        let gl = this.context.gl;        let location = gl.getAttribLocation(this.program, attribute);        if (location == -1 && !gl.isContextLost())          throw new Error(`Couldn't find location for attribute ${attribute}`);        return location;      }      dispose() {        this.context.removeRestorable(this);        let gl = this.context.gl;        if (this.vs) {          gl.deleteShader(this.vs);          this.vs = null;        }        if (this.fs) {          gl.deleteShader(this.fs);          this.fs = null;        }        if (this.program) {          gl.deleteProgram(this.program);          this.program = null;        }      }      static newColoredTextured(context) {        let vs = `                  attribute vec4 ${_Shader.POSITION};                  attribute vec4 ${_Shader.COLOR};                  attribute vec2 ${_Shader.TEXCOORDS};                  uniform mat4 ${_Shader.MVP_MATRIX};                  varying vec4 v_color;                  varying vec2 v_texCoords;                    void main () {                      v_color = ${_Shader.COLOR};                      v_texCoords = ${_Shader.TEXCOORDS};                      gl_Position = ${_Shader.MVP_MATRIX} * ${_Shader.POSITION};                  }              `;        let fs = `                  #ifdef GL_ES                      #define LOWP lowp                      precision mediump float;                  #else                      #define LOWP                  #endif                  varying LOWP vec4 v_color;                  varying vec2 v_texCoords;                  uniform sampler2D u_texture;                    void main () {                      gl_FragColor = v_color * texture2D(u_texture, v_texCoords);                  }              `;        return new _Shader(context, vs, fs);      }      static newTwoColoredTextured(context) {        let vs = `                  attribute vec4 ${_Shader.POSITION};                  attribute vec4 ${_Shader.COLOR};                  attribute vec4 ${_Shader.COLOR2};                  attribute vec2 ${_Shader.TEXCOORDS};                  uniform mat4 ${_Shader.MVP_MATRIX};                  varying vec4 v_light;                  varying vec4 v_dark;                  varying vec2 v_texCoords;                    void main () {                      v_light = ${_Shader.COLOR};                      v_dark = ${_Shader.COLOR2};                      v_texCoords = ${_Shader.TEXCOORDS};                      gl_Position = ${_Shader.MVP_MATRIX} * ${_Shader.POSITION};                  }              `;        let fs = `                  #ifdef GL_ES                      #define LOWP lowp                      precision mediump float;                  #else                      #define LOWP                  #endif                  varying LOWP vec4 v_light;                  varying LOWP vec4 v_dark;                  varying vec2 v_texCoords;                  uniform sampler2D u_texture;                    void main () {                      vec4 texColor = texture2D(u_texture, v_texCoords);                      gl_FragColor.a = texColor.a * v_light.a;                      gl_FragColor.rgb = ((texColor.a - 1.0) * v_dark.a + 1.0 - texColor.rgb) * v_dark.rgb + texColor.rgb * v_light.rgb;                  }              `;        return new _Shader(context, vs, fs);      }      static newColored(context) {        let vs = `                  attribute vec4 ${_Shader.POSITION};                  attribute vec4 ${_Shader.COLOR};                  uniform mat4 ${_Shader.MVP_MATRIX};                  varying vec4 v_color;                    void main () {                      v_color = ${_Shader.COLOR};                      gl_Position = ${_Shader.MVP_MATRIX} * ${_Shader.POSITION};                  }              `;        let fs = `                  #ifdef GL_ES                      #define LOWP lowp                      precision mediump float;                  #else                      #define LOWP                  #endif                  varying LOWP vec4 v_color;                    void main () {                      gl_FragColor = v_color;                  }              `;        return new _Shader(context, vs, fs);      }    };    var Shader = _Shader;    Shader.MVP_MATRIX = "u_projTrans";    Shader.POSITION = "a_position";    Shader.COLOR = "a_color";    Shader.COLOR2 = "a_color2";    Shader.TEXCOORDS = "a_texCoords";    Shader.SAMPLER = "u_texture";      // spine-webgl/src/Mesh.ts    var Mesh = class {      constructor(context, attributes, maxVertices, maxIndices) {        this.attributes = attributes;        this.verticesLength = 0;        this.dirtyVertices = false;        this.indicesLength = 0;        this.dirtyIndices = false;        this.elementsPerVertex = 0;        this.context = context instanceof ManagedWebGLRenderingContext ? context : new ManagedWebGLRenderingContext(context);        this.elementsPerVertex = 0;        for (let i = 0; i < attributes.length; i++) {          this.elementsPerVertex += attributes[i].numElements;        }        this.vertices = new Float32Array(maxVertices * this.elementsPerVertex);        this.indices = new Uint16Array(maxIndices);        this.context.addRestorable(this);      }      getAttributes() {        return this.attributes;      }      maxVertices() {        return this.vertices.length / this.elementsPerVertex;      }      numVertices() {        return this.verticesLength / this.elementsPerVertex;      }      setVerticesLength(length) {        this.dirtyVertices = true;        this.verticesLength = length;      }      getVertices() {        return this.vertices;      }      maxIndices() {        return this.indices.length;      }      numIndices() {        return this.indicesLength;      }      setIndicesLength(length) {        this.dirtyIndices = true;        this.indicesLength = length;      }      getIndices() {        return this.indices;      }      getVertexSizeInFloats() {        let size = 0;        for (var i = 0; i < this.attributes.length; i++) {          let attribute = this.attributes[i];          size += attribute.numElements;        }        return size;      }      setVertices(vertices) {        this.dirtyVertices = true;        if (vertices.length > this.vertices.length)          throw Error("Mesh can't store more than " + this.maxVertices() + " vertices");        this.vertices.set(vertices, 0);        this.verticesLength = vertices.length;      }      setIndices(indices) {        this.dirtyIndices = true;        if (indices.length > this.indices.length)          throw Error("Mesh can't store more than " + this.maxIndices() + " indices");        this.indices.set(indices, 0);        this.indicesLength = indices.length;      }      draw(shader, primitiveType) {        this.drawWithOffset(shader, primitiveType, 0, this.indicesLength > 0 ? this.indicesLength : this.verticesLength / this.elementsPerVertex);      }      drawWithOffset(shader, primitiveType, offset, count) {        let gl = this.context.gl;        if (this.dirtyVertices || this.dirtyIndices)          this.update();        this.bind(shader);        if (this.indicesLength > 0) {          gl.drawElements(primitiveType, count, gl.UNSIGNED_SHORT, offset * 2);        } else {          gl.drawArrays(primitiveType, offset, count);        }        this.unbind(shader);      }      bind(shader) {        let gl = this.context.gl;        gl.bindBuffer(gl.ARRAY_BUFFER, this.verticesBuffer);        let offset = 0;        for (let i = 0; i < this.attributes.length; i++) {          let attrib = this.attributes[i];          let location = shader.getAttributeLocation(attrib.name);          gl.enableVertexAttribArray(location);          gl.vertexAttribPointer(location, attrib.numElements, gl.FLOAT, false, this.elementsPerVertex * 4, offset * 4);          offset += attrib.numElements;        }        if (this.indicesLength > 0)          gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indicesBuffer);      }      unbind(shader) {        let gl = this.context.gl;        for (let i = 0; i < this.attributes.length; i++) {          let attrib = this.attributes[i];          let location = shader.getAttributeLocation(attrib.name);          gl.disableVertexAttribArray(location);        }        gl.bindBuffer(gl.ARRAY_BUFFER, null);        if (this.indicesLength > 0)          gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);      }      update() {        let gl = this.context.gl;        if (this.dirtyVertices) {          if (!this.verticesBuffer) {            this.verticesBuffer = gl.createBuffer();          }          gl.bindBuffer(gl.ARRAY_BUFFER, this.verticesBuffer);          gl.bufferData(gl.ARRAY_BUFFER, this.vertices.subarray(0, this.verticesLength), gl.DYNAMIC_DRAW);          this.dirtyVertices = false;        }        if (this.dirtyIndices) {          if (!this.indicesBuffer) {            this.indicesBuffer = gl.createBuffer();          }          gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indicesBuffer);          gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, this.indices.subarray(0, this.indicesLength), gl.DYNAMIC_DRAW);          this.dirtyIndices = false;        }      }      restore() {        this.verticesBuffer = null;        this.indicesBuffer = null;        this.update();      }      dispose() {        this.context.removeRestorable(this);        let gl = this.context.gl;        gl.deleteBuffer(this.verticesBuffer);        gl.deleteBuffer(this.indicesBuffer);      }    };    var VertexAttribute = class {      constructor(name, type, numElements) {        this.name = name;        this.type = type;        this.numElements = numElements;      }    };    var Position2Attribute = class extends VertexAttribute {      constructor() {        super(Shader.POSITION, VertexAttributeType.Float, 2);      }    };    var Position3Attribute = class extends VertexAttribute {      constructor() {        super(Shader.POSITION, VertexAttributeType.Float, 3);      }    };    var TexCoordAttribute = class extends VertexAttribute {      constructor(unit = 0) {        super(Shader.TEXCOORDS + (unit == 0 ? "" : unit), VertexAttributeType.Float, 2);      }    };    var ColorAttribute = class extends VertexAttribute {      constructor() {        super(Shader.COLOR, VertexAttributeType.Float, 4);      }    };    var Color2Attribute = class extends VertexAttribute {      constructor() {        super(Shader.COLOR2, VertexAttributeType.Float, 4);      }    };    var VertexAttributeType;    (function(VertexAttributeType2) {      VertexAttributeType2[VertexAttributeType2["Float"] = 0] = "Float";    })(VertexAttributeType || (VertexAttributeType = {}));      // spine-webgl/src/PolygonBatcher.ts    var PolygonBatcher = class {      constructor(context, twoColorTint = true, maxVertices = 10920) {        this.isDrawing = false;        this.shader = null;        this.lastTexture = null;        this.verticesLength = 0;        this.indicesLength = 0;        if (maxVertices > 10920)          throw new Error("Can't have more than 10920 triangles per batch: " + maxVertices);        this.context = context instanceof ManagedWebGLRenderingContext ? context : new ManagedWebGLRenderingContext(context);        let attributes = twoColorTint ? [new Position2Attribute(), new ColorAttribute(), new TexCoordAttribute(), new Color2Attribute()] : [new Position2Attribute(), new ColorAttribute(), new TexCoordAttribute()];        this.mesh = new Mesh(context, attributes, maxVertices, maxVertices * 3);        let gl = this.context.gl;        this.srcColorBlend = gl.SRC_ALPHA;        this.srcAlphaBlend = gl.ONE;        this.dstBlend = gl.ONE_MINUS_SRC_ALPHA;      }      begin(shader) {        if (this.isDrawing)          throw new Error("PolygonBatch is already drawing. Call PolygonBatch.end() before calling PolygonBatch.begin()");        this.drawCalls = 0;        this.shader = shader;        this.lastTexture = null;        this.isDrawing = true;        let gl = this.context.gl;        gl.enable(gl.BLEND);        gl.blendFuncSeparate(this.srcColorBlend, this.dstBlend, this.srcAlphaBlend, this.dstBlend);      }      setBlendMode(srcColorBlend, srcAlphaBlend, dstBlend) {        if (this.srcColorBlend == srcColorBlend && this.srcAlphaBlend == srcAlphaBlend && this.dstBlend == dstBlend)          return;        this.srcColorBlend = srcColorBlend;        this.srcAlphaBlend = srcAlphaBlend;        this.dstBlend = dstBlend;        if (this.isDrawing) {          this.flush();          let gl = this.context.gl;          gl.blendFuncSeparate(srcColorBlend, dstBlend, srcAlphaBlend, dstBlend);        }      }      draw(texture, vertices, indices) {        if (texture != this.lastTexture) {          this.flush();          this.lastTexture = texture;        } else if (this.verticesLength + vertices.length > this.mesh.getVertices().length || this.indicesLength + indices.length > this.mesh.getIndices().length) {          this.flush();        }        let indexStart = this.mesh.numVertices();        this.mesh.getVertices().set(vertices, this.verticesLength);        this.verticesLength += vertices.length;        this.mesh.setVerticesLength(this.verticesLength);        let indicesArray = this.mesh.getIndices();        for (let i = this.indicesLength, j = 0; j < indices.length; i++, j++)          indicesArray[i] = indices[j] + indexStart;        this.indicesLength += indices.length;        this.mesh.setIndicesLength(this.indicesLength);      }      flush() {        if (this.verticesLength == 0)          return;        this.lastTexture.bind();        this.mesh.draw(this.shader, this.context.gl.TRIANGLES);        this.verticesLength = 0;        this.indicesLength = 0;        this.mesh.setVerticesLength(0);        this.mesh.setIndicesLength(0);        this.drawCalls++;      }      end() {        if (!this.isDrawing)          throw new Error("PolygonBatch is not drawing. Call PolygonBatch.begin() before calling PolygonBatch.end()");        if (this.verticesLength > 0 || this.indicesLength > 0)          this.flush();        this.shader = null;        this.lastTexture = null;        this.isDrawing = false;        let gl = this.context.gl;        gl.disable(gl.BLEND);      }      getDrawCalls() {        return this.drawCalls;      }      dispose() {        this.mesh.dispose();      }    };      // spine-webgl/src/ShapeRenderer.ts    var ShapeRenderer = class {      constructor(context, maxVertices = 10920) {        this.isDrawing = false;        this.shapeType = ShapeType.Filled;        this.color = new Color(1, 1, 1, 1);        this.vertexIndex = 0;        this.tmp = new Vector2();        if (maxVertices > 10920)          throw new Error("Can't have more than 10920 triangles per batch: " + maxVertices);        this.context = context instanceof ManagedWebGLRenderingContext ? context : new ManagedWebGLRenderingContext(context);        this.mesh = new Mesh(context, [new Position2Attribute(), new ColorAttribute()], maxVertices, 0);        let gl = this.context.gl;        this.srcColorBlend = gl.SRC_ALPHA;        this.srcAlphaBlend = gl.ONE;        this.dstBlend = gl.ONE_MINUS_SRC_ALPHA;      }      begin(shader) {        if (this.isDrawing)          throw new Error("ShapeRenderer.begin() has already been called");        this.shader = shader;        this.vertexIndex = 0;        this.isDrawing = true;        let gl = this.context.gl;        gl.enable(gl.BLEND);        gl.blendFuncSeparate(this.srcColorBlend, this.dstBlend, this.srcAlphaBlend, this.dstBlend);      }      setBlendMode(srcColorBlend, srcAlphaBlend, dstBlend) {        this.srcColorBlend = srcColorBlend;        this.srcAlphaBlend = srcAlphaBlend;        this.dstBlend = dstBlend;        if (this.isDrawing) {          this.flush();          let gl = this.context.gl;          gl.blendFuncSeparate(srcColorBlend, dstBlend, srcAlphaBlend, dstBlend);        }      }      setColor(color) {        this.color.setFromColor(color);      }      setColorWith(r, g, b, a) {        this.color.set(r, g, b, a);      }      point(x, y, color = null) {        this.check(ShapeType.Point, 1);        if (color === null)          color = this.color;        this.vertex(x, y, color);      }      line(x, y, x2, y2, color = null) {        this.check(ShapeType.Line, 2);        let vertices = this.mesh.getVertices();        let idx = this.vertexIndex;        if (color === null)          color = this.color;        this.vertex(x, y, color);        this.vertex(x2, y2, color);      }      triangle(filled, x, y, x2, y2, x3, y3, color = null, color2 = null, color3 = null) {        this.check(filled ? ShapeType.Filled : ShapeType.Line, 3);        let vertices = this.mesh.getVertices();        let idx = this.vertexIndex;        if (color === null)          color = this.color;        if (color2 === null)          color2 = this.color;        if (color3 === null)          color3 = this.color;        if (filled) {          this.vertex(x, y, color);          this.vertex(x2, y2, color2);          this.vertex(x3, y3, color3);        } else {          this.vertex(x, y, color);          this.vertex(x2, y2, color2);          this.vertex(x2, y2, color);          this.vertex(x3, y3, color2);          this.vertex(x3, y3, color);          this.vertex(x, y, color2);        }      }      quad(filled, x, y, x2, y2, x3, y3, x4, y4, color = null, color2 = null, color3 = null, color4 = null) {        this.check(filled ? ShapeType.Filled : ShapeType.Line, 3);        let vertices = this.mesh.getVertices();        let idx = this.vertexIndex;        if (color === null)          color = this.color;        if (color2 === null)          color2 = this.color;        if (color3 === null)          color3 = this.color;        if (color4 === null)          color4 = this.color;        if (filled) {          this.vertex(x, y, color);          this.vertex(x2, y2, color2);          this.vertex(x3, y3, color3);          this.vertex(x3, y3, color3);          this.vertex(x4, y4, color4);          this.vertex(x, y, color);        } else {          this.vertex(x, y, color);          this.vertex(x2, y2, color2);          this.vertex(x2, y2, color2);          this.vertex(x3, y3, color3);          this.vertex(x3, y3, color3);          this.vertex(x4, y4, color4);          this.vertex(x4, y4, color4);          this.vertex(x, y, color);        }      }      rect(filled, x, y, width, height, color = null) {        this.quad(filled, x, y, x + width, y, x + width, y + height, x, y + height, color, color, color, color);      }      rectLine(filled, x1, y1, x2, y2, width, color = null) {        this.check(filled ? ShapeType.Filled : ShapeType.Line, 8);        if (color === null)          color = this.color;        let t = this.tmp.set(y2 - y1, x1 - x2);        t.normalize();        width *= 0.5;        let tx = t.x * width;        let ty = t.y * width;        if (!filled) {          this.vertex(x1 + tx, y1 + ty, color);          this.vertex(x1 - tx, y1 - ty, color);          this.vertex(x2 + tx, y2 + ty, color);          this.vertex(x2 - tx, y2 - ty, color);          this.vertex(x2 + tx, y2 + ty, color);          this.vertex(x1 + tx, y1 + ty, color);          this.vertex(x2 - tx, y2 - ty, color);          this.vertex(x1 - tx, y1 - ty, color);        } else {          this.vertex(x1 + tx, y1 + ty, color);          this.vertex(x1 - tx, y1 - ty, color);          this.vertex(x2 + tx, y2 + ty, color);          this.vertex(x2 - tx, y2 - ty, color);          this.vertex(x2 + tx, y2 + ty, color);          this.vertex(x1 - tx, y1 - ty, color);        }      }      x(x, y, size) {        this.line(x - size, y - size, x + size, y + size);        this.line(x - size, y + size, x + size, y - size);      }      polygon(polygonVertices, offset, count, color = null) {        if (count < 3)          throw new Error("Polygon must contain at least 3 vertices");        this.check(ShapeType.Line, count * 2);        if (color === null)          color = this.color;        let vertices = this.mesh.getVertices();        let idx = this.vertexIndex;        offset <<= 1;        count <<= 1;        let firstX = polygonVertices[offset];        let firstY = polygonVertices[offset + 1];        let last = offset + count;        for (let i = offset, n = offset + count - 2; i < n; i += 2) {          let x1 = polygonVertices[i];          let y1 = polygonVertices[i + 1];          let x2 = 0;          let y2 = 0;          if (i + 2 >= last) {            x2 = firstX;            y2 = firstY;          } else {            x2 = polygonVertices[i + 2];            y2 = polygonVertices[i + 3];          }          this.vertex(x1, y1, color);          this.vertex(x2, y2, color);        }      }      circle(filled, x, y, radius, color = null, segments = 0) {        if (segments === 0)          segments = Math.max(1, 6 * MathUtils.cbrt(radius) | 0);        if (segments <= 0)          throw new Error("segments must be > 0.");        if (color === null)          color = this.color;        let angle = 2 * MathUtils.PI / segments;        let cos = Math.cos(angle);        let sin = Math.sin(angle);        let cx = radius, cy = 0;        if (!filled) {          this.check(ShapeType.Line, segments * 2 + 2);          for (let i = 0; i < segments; i++) {            this.vertex(x + cx, y + cy, color);            let temp2 = cx;            cx = cos * cx - sin * cy;            cy = sin * temp2 + cos * cy;            this.vertex(x + cx, y + cy, color);          }          this.vertex(x + cx, y + cy, color);        } else {          this.check(ShapeType.Filled, segments * 3 + 3);          segments--;          for (let i = 0; i < segments; i++) {            this.vertex(x, y, color);            this.vertex(x + cx, y + cy, color);            let temp2 = cx;            cx = cos * cx - sin * cy;            cy = sin * temp2 + cos * cy;            this.vertex(x + cx, y + cy, color);          }          this.vertex(x, y, color);          this.vertex(x + cx, y + cy, color);        }        let temp = cx;        cx = radius;        cy = 0;        this.vertex(x + cx, y + cy, color);      }      curve(x1, y1, cx1, cy1, cx2, cy2, x2, y2, segments, color = null) {        this.check(ShapeType.Line, segments * 2 + 2);        if (color === null)          color = this.color;        let subdiv_step = 1 / segments;        let subdiv_step2 = subdiv_step * subdiv_step;        let subdiv_step3 = subdiv_step * subdiv_step * subdiv_step;        let pre1 = 3 * subdiv_step;        let pre2 = 3 * subdiv_step2;        let pre4 = 6 * subdiv_step2;        let pre5 = 6 * subdiv_step3;        let tmp1x = x1 - cx1 * 2 + cx2;        let tmp1y = y1 - cy1 * 2 + cy2;        let tmp2x = (cx1 - cx2) * 3 - x1 + x2;        let tmp2y = (cy1 - cy2) * 3 - y1 + y2;        let fx = x1;        let fy = y1;        let dfx = (cx1 - x1) * pre1 + tmp1x * pre2 + tmp2x * subdiv_step3;        let dfy = (cy1 - y1) * pre1 + tmp1y * pre2 + tmp2y * subdiv_step3;        let ddfx = tmp1x * pre4 + tmp2x * pre5;        let ddfy = tmp1y * pre4 + tmp2y * pre5;        let dddfx = tmp2x * pre5;        let dddfy = tmp2y * pre5;        while (segments-- > 0) {          this.vertex(fx, fy, color);          fx += dfx;          fy += dfy;          dfx += ddfx;          dfy += ddfy;          ddfx += dddfx;          ddfy += dddfy;          this.vertex(fx, fy, color);        }        this.vertex(fx, fy, color);        this.vertex(x2, y2, color);      }      vertex(x, y, color) {        let idx = this.vertexIndex;        let vertices = this.mesh.getVertices();        vertices[idx++] = x;        vertices[idx++] = y;        vertices[idx++] = color.r;        vertices[idx++] = color.g;        vertices[idx++] = color.b;        vertices[idx++] = color.a;        this.vertexIndex = idx;      }      end() {        if (!this.isDrawing)          throw new Error("ShapeRenderer.begin() has not been called");        this.flush();        let gl = this.context.gl;        gl.disable(gl.BLEND);        this.isDrawing = false;      }      flush() {        if (this.vertexIndex == 0)          return;        this.mesh.setVerticesLength(this.vertexIndex);        this.mesh.draw(this.shader, this.shapeType);        this.vertexIndex = 0;      }      check(shapeType, numVertices) {        if (!this.isDrawing)          throw new Error("ShapeRenderer.begin() has not been called");        if (this.shapeType == shapeType) {          if (this.mesh.maxVertices() - this.mesh.numVertices() < numVertices)            this.flush();          else            return;        } else {          this.flush();          this.shapeType = shapeType;        }      }      dispose() {        this.mesh.dispose();      }    };    var ShapeType;    (function(ShapeType2) {      ShapeType2[ShapeType2["Point"] = 0] = "Point";      ShapeType2[ShapeType2["Line"] = 1] = "Line";      ShapeType2[ShapeType2["Filled"] = 4] = "Filled";    })(ShapeType || (ShapeType = {}));      // spine-webgl/src/SkeletonDebugRenderer.ts    var _SkeletonDebugRenderer = class {      constructor(context) {        this.boneLineColor = new Color(1, 0, 0, 1);        this.boneOriginColor = new Color(0, 1, 0, 1);        this.attachmentLineColor = new Color(0, 0, 1, 0.5);        this.triangleLineColor = new Color(1, 0.64, 0, 0.5);        this.pathColor = new Color().setFromString("FF7F00");        this.clipColor = new Color(0.8, 0, 0, 2);        this.aabbColor = new Color(0, 1, 0, 0.5);        this.drawBones = true;        this.drawRegionAttachments = true;        this.drawBoundingBoxes = true;        this.drawMeshHull = true;        this.drawMeshTriangles = true;        this.drawPaths = true;        this.drawSkeletonXY = false;        this.drawClipping = true;        this.premultipliedAlpha = false;        this.scale = 1;        this.boneWidth = 2;        this.bounds = new SkeletonBounds();        this.temp = new Array();        this.vertices = Utils.newFloatArray(2 * 1024);        this.context = context instanceof ManagedWebGLRenderingContext ? context : new ManagedWebGLRenderingContext(context);      }      draw(shapes, skeleton, ignoredBones = null) {        let skeletonX = skeleton.x;        let skeletonY = skeleton.y;        let gl = this.context.gl;        let srcFunc = this.premultipliedAlpha ? gl.ONE : gl.SRC_ALPHA;        shapes.setBlendMode(srcFunc, gl.ONE, gl.ONE_MINUS_SRC_ALPHA);        let bones = skeleton.bones;        if (this.drawBones) {          shapes.setColor(this.boneLineColor);          for (let i = 0, n = bones.length; i < n; i++) {            let bone = bones[i];            if (ignoredBones && ignoredBones.indexOf(bone.data.name) > -1)              continue;            if (!bone.parent)              continue;            let x = skeletonX + bone.data.length * bone.a + bone.worldX;            let y = skeletonY + bone.data.length * bone.c + bone.worldY;            shapes.rectLine(true, skeletonX + bone.worldX, skeletonY + bone.worldY, x, y, this.boneWidth * this.scale);          }          if (this.drawSkeletonXY)            shapes.x(skeletonX, skeletonY, 4 * this.scale);        }        if (this.drawRegionAttachments) {          shapes.setColor(this.attachmentLineColor);          let slots = skeleton.slots;          for (let i = 0, n = slots.length; i < n; i++) {            let slot = slots[i];            let attachment = slot.getAttachment();            if (attachment instanceof RegionAttachment) {              let regionAttachment = attachment;              let vertices = this.vertices;              regionAttachment.computeWorldVertices(slot.bone, vertices, 0, 2);              shapes.line(vertices[0], vertices[1], vertices[2], vertices[3]);              shapes.line(vertices[2], vertices[3], vertices[4], vertices[5]);              shapes.line(vertices[4], vertices[5], vertices[6], vertices[7]);              shapes.line(vertices[6], vertices[7], vertices[0], vertices[1]);            }          }        }        if (this.drawMeshHull || this.drawMeshTriangles) {          let slots = skeleton.slots;          for (let i = 0, n = slots.length; i < n; i++) {            let slot = slots[i];            if (!slot.bone.active)              continue;            let attachment = slot.getAttachment();            if (!(attachment instanceof MeshAttachment))              continue;            let mesh = attachment;            let vertices = this.vertices;            mesh.computeWorldVertices(slot, 0, mesh.worldVerticesLength, vertices, 0, 2);            let triangles = mesh.triangles;            let hullLength = mesh.hullLength;            if (this.drawMeshTriangles) {              shapes.setColor(this.triangleLineColor);              for (let ii = 0, nn = triangles.length; ii < nn; ii += 3) {                let v1 = triangles[ii] * 2, v2 = triangles[ii + 1] * 2, v3 = triangles[ii + 2] * 2;                shapes.triangle(false, vertices[v1], vertices[v1 + 1], vertices[v2], vertices[v2 + 1], vertices[v3], vertices[v3 + 1]);              }            }            if (this.drawMeshHull && hullLength > 0) {              shapes.setColor(this.attachmentLineColor);              hullLength = (hullLength >> 1) * 2;              let lastX = vertices[hullLength - 2], lastY = vertices[hullLength - 1];              for (let ii = 0, nn = hullLength; ii < nn; ii += 2) {                let x = vertices[ii], y = vertices[ii + 1];                shapes.line(x, y, lastX, lastY);                lastX = x;                lastY = y;              }            }          }        }        if (this.drawBoundingBoxes) {          let bounds = this.bounds;          bounds.update(skeleton, true);          shapes.setColor(this.aabbColor);          shapes.rect(false, bounds.minX, bounds.minY, bounds.getWidth(), bounds.getHeight());          let polygons = bounds.polygons;          let boxes = bounds.boundingBoxes;          for (let i = 0, n = polygons.length; i < n; i++) {            let polygon = polygons[i];            shapes.setColor(boxes[i].color);            shapes.polygon(polygon, 0, polygon.length);          }        }        if (this.drawPaths) {          let slots = skeleton.slots;          for (let i = 0, n = slots.length; i < n; i++) {            let slot = slots[i];            if (!slot.bone.active)              continue;            let attachment = slot.getAttachment();            if (!(attachment instanceof PathAttachment))              continue;            let path = attachment;            let nn = path.worldVerticesLength;            let world = this.temp = Utils.setArraySize(this.temp, nn, 0);            path.computeWorldVertices(slot, 0, nn, world, 0, 2);            let color = this.pathColor;            let x1 = world[2], y1 = world[3], x2 = 0, y2 = 0;            if (path.closed) {              shapes.setColor(color);              let cx1 = world[0], cy1 = world[1], cx2 = world[nn - 2], cy2 = world[nn - 1];              x2 = world[nn - 4];              y2 = world[nn - 3];              shapes.curve(x1, y1, cx1, cy1, cx2, cy2, x2, y2, 32);              shapes.setColor(_SkeletonDebugRenderer.LIGHT_GRAY);              shapes.line(x1, y1, cx1, cy1);              shapes.line(x2, y2, cx2, cy2);            }            nn -= 4;            for (let ii = 4; ii < nn; ii += 6) {              let cx1 = world[ii], cy1 = world[ii + 1], cx2 = world[ii + 2], cy2 = world[ii + 3];              x2 = world[ii + 4];              y2 = world[ii + 5];              shapes.setColor(color);              shapes.curve(x1, y1, cx1, cy1, cx2, cy2, x2, y2, 32);              shapes.setColor(_SkeletonDebugRenderer.LIGHT_GRAY);              shapes.line(x1, y1, cx1, cy1);              shapes.line(x2, y2, cx2, cy2);              x1 = x2;              y1 = y2;            }          }        }        if (this.drawBones) {          shapes.setColor(this.boneOriginColor);          for (let i = 0, n = bones.length; i < n; i++) {            let bone = bones[i];            if (ignoredBones && ignoredBones.indexOf(bone.data.name) > -1)              continue;            shapes.circle(true, skeletonX + bone.worldX, skeletonY + bone.worldY, 3 * this.scale, _SkeletonDebugRenderer.GREEN, 8);          }        }        if (this.drawClipping) {          let slots = skeleton.slots;          shapes.setColor(this.clipColor);          for (let i = 0, n = slots.length; i < n; i++) {            let slot = slots[i];            if (!slot.bone.active)              continue;            let attachment = slot.getAttachment();            if (!(attachment instanceof ClippingAttachment))              continue;            let clip = attachment;            let nn = clip.worldVerticesLength;            let world = this.temp = Utils.setArraySize(this.temp, nn, 0);            clip.computeWorldVertices(slot, 0, nn, world, 0, 2);            for (let i2 = 0, n2 = world.length; i2 < n2; i2 += 2) {              let x = world[i2];              let y = world[i2 + 1];              let x2 = world[(i2 + 2) % world.length];              let y2 = world[(i2 + 3) % world.length];              shapes.line(x, y, x2, y2);            }          }        }      }      dispose() {      }    };    var SkeletonDebugRenderer = _SkeletonDebugRenderer;    SkeletonDebugRenderer.LIGHT_GRAY = new Color(192 / 255, 192 / 255, 192 / 255, 1);    SkeletonDebugRenderer.GREEN = new Color(0, 1, 0, 1);      // spine-webgl/src/SkeletonRenderer.ts    var Renderable = class {      constructor(vertices, numVertices, numFloats) {        this.vertices = vertices;        this.numVertices = numVertices;        this.numFloats = numFloats;      }    };    var _SkeletonRenderer = class {      constructor(context, twoColorTint = true) {        this.premultipliedAlpha = false;        this.vertexEffect = null;        this.tempColor = new Color();        this.tempColor2 = new Color();        this.vertexSize = 2 + 2 + 4;        this.twoColorTint = false;        this.renderable = new Renderable(null, 0, 0);        this.clipper = new SkeletonClipping();        this.temp = new Vector2();        this.temp2 = new Vector2();        this.temp3 = new Color();        this.temp4 = new Color();        this.twoColorTint = twoColorTint;        if (twoColorTint)          this.vertexSize += 4;        this.vertices = Utils.newFloatArray(this.vertexSize * 1024);      }      draw(batcher, skeleton, slotRangeStart = -1, slotRangeEnd = -1) {        let clipper = this.clipper;        let premultipliedAlpha = this.premultipliedAlpha;        let twoColorTint = this.twoColorTint;        let blendMode = null;        let tempPos = this.temp;        let tempUv = this.temp2;        let tempLight = this.temp3;        let tempDark = this.temp4;        let renderable = this.renderable;        let uvs = null;        let triangles = null;        let drawOrder = skeleton.drawOrder;        let attachmentColor = null;        let skeletonColor = skeleton.color;        let vertexSize = twoColorTint ? 12 : 8;        let inRange = false;        if (slotRangeStart == -1)          inRange = true;        for (let i = 0, n = drawOrder.length; i < n; i++) {          let clippedVertexSize = clipper.isClipping() ? 2 : vertexSize;          let slot = drawOrder[i];          if (!slot.bone.active) {            clipper.clipEndWithSlot(slot);            continue;          }          if (slotRangeStart >= 0 && slotRangeStart == slot.data.index) {            inRange = true;          }          if (!inRange) {            clipper.clipEndWithSlot(slot);            continue;          }          if (slotRangeEnd >= 0 && slotRangeEnd == slot.data.index) {            inRange = false;          }          let attachment = slot.getAttachment();          let texture = null;          if (attachment instanceof RegionAttachment) {            let region = attachment;            renderable.vertices = this.vertices;            renderable.numVertices = 4;            renderable.numFloats = clippedVertexSize << 2;            region.computeWorldVertices(slot.bone, renderable.vertices, 0, clippedVertexSize);            triangles = _SkeletonRenderer.QUAD_TRIANGLES;            uvs = region.uvs;            texture = region.region.renderObject.page.texture;            attachmentColor = region.color;          } else if (attachment instanceof MeshAttachment) {            let mesh = attachment;            renderable.vertices = this.vertices;            renderable.numVertices = mesh.worldVerticesLength >> 1;            renderable.numFloats = renderable.numVertices * clippedVertexSize;            if (renderable.numFloats > renderable.vertices.length) {              renderable.vertices = this.vertices = Utils.newFloatArray(renderable.numFloats);            }            mesh.computeWorldVertices(slot, 0, mesh.worldVerticesLength, renderable.vertices, 0, clippedVertexSize);            triangles = mesh.triangles;            texture = mesh.region.renderObject.page.texture;            uvs = mesh.uvs;            attachmentColor = mesh.color;          } else if (attachment instanceof ClippingAttachment) {            let clip = attachment;            clipper.clipStart(slot, clip);            continue;          } else {            clipper.clipEndWithSlot(slot);            continue;          }          if (texture) {            let slotColor = slot.color;            let finalColor = this.tempColor;            finalColor.r = skeletonColor.r * slotColor.r * attachmentColor.r;            finalColor.g = skeletonColor.g * slotColor.g * attachmentColor.g;            finalColor.b = skeletonColor.b * slotColor.b * attachmentColor.b;            finalColor.a = skeletonColor.a * slotColor.a * attachmentColor.a;            if (premultipliedAlpha) {              finalColor.r *= finalColor.a;              finalColor.g *= finalColor.a;              finalColor.b *= finalColor.a;            }            let darkColor = this.tempColor2;            if (!slot.darkColor)              darkColor.set(0, 0, 0, 1);            else {              if (premultipliedAlpha) {                darkColor.r = slot.darkColor.r * finalColor.a;                darkColor.g = slot.darkColor.g * finalColor.a;                darkColor.b = slot.darkColor.b * finalColor.a;              } else {                darkColor.setFromColor(slot.darkColor);              }              darkColor.a = premultipliedAlpha ? 1 : 0;            }            let slotBlendMode = slot.data.blendMode;            if (slotBlendMode != blendMode) {              blendMode = slotBlendMode;              batcher.setBlendMode(WebGLBlendModeConverter.getSourceColorGLBlendMode(blendMode, premultipliedAlpha), WebGLBlendModeConverter.getSourceAlphaGLBlendMode(blendMode), WebGLBlendModeConverter.getDestGLBlendMode(blendMode));            }            if (clipper.isClipping()) {              clipper.clipTriangles(renderable.vertices, renderable.numFloats, triangles, triangles.length, uvs, finalColor, darkColor, twoColorTint);              let clippedVertices = new Float32Array(clipper.clippedVertices);              let clippedTriangles = clipper.clippedTriangles;              if (this.vertexEffect) {                let vertexEffect = this.vertexEffect;                let verts = clippedVertices;                if (!twoColorTint) {                  for (let v = 0, n2 = clippedVertices.length; v < n2; v += vertexSize) {                    tempPos.x = verts[v];                    tempPos.y = verts[v + 1];                    tempLight.set(verts[v + 2], verts[v + 3], verts[v + 4], verts[v + 5]);                    tempUv.x = verts[v + 6];                    tempUv.y = verts[v + 7];                    tempDark.set(0, 0, 0, 0);                    vertexEffect.transform(tempPos, tempUv, tempLight, tempDark);                    verts[v] = tempPos.x;                    verts[v + 1] = tempPos.y;                    verts[v + 2] = tempLight.r;                    verts[v + 3] = tempLight.g;                    verts[v + 4] = tempLight.b;                    verts[v + 5] = tempLight.a;                    verts[v + 6] = tempUv.x;                    verts[v + 7] = tempUv.y;                  }                } else {                  for (let v = 0, n2 = clippedVertices.length; v < n2; v += vertexSize) {                    tempPos.x = verts[v];                    tempPos.y = verts[v + 1];                    tempLight.set(verts[v + 2], verts[v + 3], verts[v + 4], verts[v + 5]);                    tempUv.x = verts[v + 6];                    tempUv.y = verts[v + 7];                    tempDark.set(verts[v + 8], verts[v + 9], verts[v + 10], verts[v + 11]);                    vertexEffect.transform(tempPos, tempUv, tempLight, tempDark);                    verts[v] = tempPos.x;                    verts[v + 1] = tempPos.y;                    verts[v + 2] = tempLight.r;                    verts[v + 3] = tempLight.g;                    verts[v + 4] = tempLight.b;                    verts[v + 5] = tempLight.a;                    verts[v + 6] = tempUv.x;                    verts[v + 7] = tempUv.y;                    verts[v + 8] = tempDark.r;                    verts[v + 9] = tempDark.g;                    verts[v + 10] = tempDark.b;                    verts[v + 11] = tempDark.a;                  }                }              }              batcher.draw(texture, clippedVertices, clippedTriangles);            } else {              let verts = renderable.vertices;              if (this.vertexEffect) {                let vertexEffect = this.vertexEffect;                if (!twoColorTint) {                  for (let v = 0, u = 0, n2 = renderable.numFloats; v < n2; v += vertexSize, u += 2) {                    tempPos.x = verts[v];                    tempPos.y = verts[v + 1];                    tempUv.x = uvs[u];                    tempUv.y = uvs[u + 1];                    tempLight.setFromColor(finalColor);                    tempDark.set(0, 0, 0, 0);                    vertexEffect.transform(tempPos, tempUv, tempLight, tempDark);                    verts[v] = tempPos.x;                    verts[v + 1] = tempPos.y;                    verts[v + 2] = tempLight.r;                    verts[v + 3] = tempLight.g;                    verts[v + 4] = tempLight.b;                    verts[v + 5] = tempLight.a;                    verts[v + 6] = tempUv.x;                    verts[v + 7] = tempUv.y;                  }                } else {                  for (let v = 0, u = 0, n2 = renderable.numFloats; v < n2; v += vertexSize, u += 2) {                    tempPos.x = verts[v];                    tempPos.y = verts[v + 1];                    tempUv.x = uvs[u];                    tempUv.y = uvs[u + 1];                    tempLight.setFromColor(finalColor);                    tempDark.setFromColor(darkColor);                    vertexEffect.transform(tempPos, tempUv, tempLight, tempDark);                    verts[v] = tempPos.x;                    verts[v + 1] = tempPos.y;                    verts[v + 2] = tempLight.r;                    verts[v + 3] = tempLight.g;                    verts[v + 4] = tempLight.b;                    verts[v + 5] = tempLight.a;                    verts[v + 6] = tempUv.x;                    verts[v + 7] = tempUv.y;                    verts[v + 8] = tempDark.r;                    verts[v + 9] = tempDark.g;                    verts[v + 10] = tempDark.b;                    verts[v + 11] = tempDark.a;                  }                }              } else {                if (!twoColorTint) {                  for (let v = 2, u = 0, n2 = renderable.numFloats; v < n2; v += vertexSize, u += 2) {                    verts[v] = finalColor.r;                    verts[v + 1] = finalColor.g;                    verts[v + 2] = finalColor.b;                    verts[v + 3] = finalColor.a;                    verts[v + 4] = uvs[u];                    verts[v + 5] = uvs[u + 1];                  }                } else {                  for (let v = 2, u = 0, n2 = renderable.numFloats; v < n2; v += vertexSize, u += 2) {                    verts[v] = finalColor.r;                    verts[v + 1] = finalColor.g;                    verts[v + 2] = finalColor.b;                    verts[v + 3] = finalColor.a;                    verts[v + 4] = uvs[u];                    verts[v + 5] = uvs[u + 1];                    verts[v + 6] = darkColor.r;                    verts[v + 7] = darkColor.g;                    verts[v + 8] = darkColor.b;                    verts[v + 9] = darkColor.a;                  }                }              }              let view = renderable.vertices.subarray(0, renderable.numFloats);              batcher.draw(texture, view, triangles);            }          }          clipper.clipEndWithSlot(slot);        }        clipper.clipEnd();      }    };    var SkeletonRenderer = _SkeletonRenderer;    SkeletonRenderer.QUAD_TRIANGLES = [0, 1, 2, 2, 3, 0];      // spine-webgl/src/SceneRenderer.ts    var quad = [      0,      0,      1,      1,      1,      1,      0,      0,      0,      0,      1,      1,      1,      1,      0,      0,      0,      0,      1,      1,      1,      1,      0,      0,      0,      0,      1,      1,      1,      1,      0,      0    ];    var QUAD_TRIANGLES = [0, 1, 2, 2, 3, 0];    var WHITE = new Color(1, 1, 1, 1);    var SceneRenderer = class {      constructor(canvas, context, twoColorTint = true) {        this.twoColorTint = false;        this.canvas = canvas;        this.context = context instanceof ManagedWebGLRenderingContext ? context : new ManagedWebGLRenderingContext(context);        this.twoColorTint = twoColorTint;        this.camera = new OrthoCamera(canvas.width, canvas.height);        this.batcherShader = twoColorTint ? Shader.newTwoColoredTextured(this.context) : Shader.newColoredTextured(this.context);        this.batcher = new PolygonBatcher(this.context, twoColorTint);        this.shapesShader = Shader.newColored(this.context);        this.shapes = new ShapeRenderer(this.context);        this.skeletonRenderer = new SkeletonRenderer(this.context, twoColorTint);        this.skeletonDebugRenderer = new SkeletonDebugRenderer(this.context);      }      dispose() {        this.batcher.dispose();        this.batcherShader.dispose();        this.shapes.dispose();        this.shapesShader.dispose();        this.skeletonDebugRenderer.dispose();      }      begin() {        this.camera.update();        this.enableRenderer(this.batcher);      }      drawSkeleton(skeleton, premultipliedAlpha = false, slotRangeStart = -1, slotRangeEnd = -1) {        this.enableRenderer(this.batcher);        this.skeletonRenderer.premultipliedAlpha = premultipliedAlpha;        this.skeletonRenderer.draw(this.batcher, skeleton, slotRangeStart, slotRangeEnd);      }      drawSkeletonDebug(skeleton, premultipliedAlpha = false, ignoredBones = null) {        this.enableRenderer(this.shapes);        this.skeletonDebugRenderer.premultipliedAlpha = premultipliedAlpha;        this.skeletonDebugRenderer.draw(this.shapes, skeleton, ignoredBones);      }      drawTexture(texture, x, y, width, height, color = null) {        this.enableRenderer(this.batcher);        if (color === null)          color = WHITE;        var i = 0;        quad[i++] = x;        quad[i++] = y;        quad[i++] = color.r;        quad[i++] = color.g;        quad[i++] = color.b;        quad[i++] = color.a;        quad[i++] = 0;        quad[i++] = 1;        if (this.twoColorTint) {          quad[i++] = 0;          quad[i++] = 0;          quad[i++] = 0;          quad[i++] = 0;        }        quad[i++] = x + width;        quad[i++] = y;        quad[i++] = color.r;        quad[i++] = color.g;        quad[i++] = color.b;        quad[i++] = color.a;        quad[i++] = 1;        quad[i++] = 1;        if (this.twoColorTint) {          quad[i++] = 0;          quad[i++] = 0;          quad[i++] = 0;          quad[i++] = 0;        }        quad[i++] = x + width;        quad[i++] = y + height;        quad[i++] = color.r;        quad[i++] = color.g;        quad[i++] = color.b;        quad[i++] = color.a;        quad[i++] = 1;        quad[i++] = 0;        if (this.twoColorTint) {          quad[i++] = 0;          quad[i++] = 0;          quad[i++] = 0;          quad[i++] = 0;        }        quad[i++] = x;        quad[i++] = y + height;        quad[i++] = color.r;        quad[i++] = color.g;        quad[i++] = color.b;        quad[i++] = color.a;        quad[i++] = 0;        quad[i++] = 0;        if (this.twoColorTint) {          quad[i++] = 0;          quad[i++] = 0;          quad[i++] = 0;          quad[i] = 0;        }        this.batcher.draw(texture, quad, QUAD_TRIANGLES);      }      drawTextureUV(texture, x, y, width, height, u, v, u2, v2, color = null) {        this.enableRenderer(this.batcher);        if (color === null)          color = WHITE;        var i = 0;        quad[i++] = x;        quad[i++] = y;        quad[i++] = color.r;        quad[i++] = color.g;        quad[i++] = color.b;        quad[i++] = color.a;        quad[i++] = u;        quad[i++] = v;        if (this.twoColorTint) {          quad[i++] = 0;          quad[i++] = 0;          quad[i++] = 0;          quad[i++] = 0;        }        quad[i++] = x + width;        quad[i++] = y;        quad[i++] = color.r;        quad[i++] = color.g;        quad[i++] = color.b;        quad[i++] = color.a;        quad[i++] = u2;        quad[i++] = v;        if (this.twoColorTint) {          quad[i++] = 0;          quad[i++] = 0;          quad[i++] = 0;          quad[i++] = 0;        }        quad[i++] = x + width;        quad[i++] = y + height;        quad[i++] = color.r;        quad[i++] = color.g;        quad[i++] = color.b;        quad[i++] = color.a;        quad[i++] = u2;        quad[i++] = v2;        if (this.twoColorTint) {          quad[i++] = 0;          quad[i++] = 0;          quad[i++] = 0;          quad[i++] = 0;        }        quad[i++] = x;        quad[i++] = y + height;        quad[i++] = color.r;        quad[i++] = color.g;        quad[i++] = color.b;        quad[i++] = color.a;        quad[i++] = u;        quad[i++] = v2;        if (this.twoColorTint) {          quad[i++] = 0;          quad[i++] = 0;          quad[i++] = 0;          quad[i] = 0;        }        this.batcher.draw(texture, quad, QUAD_TRIANGLES);      }      drawTextureRotated(texture, x, y, width, height, pivotX, pivotY, angle, color = null) {        this.enableRenderer(this.batcher);        if (color === null)          color = WHITE;        let worldOriginX = x + pivotX;        let worldOriginY = y + pivotY;        let fx = -pivotX;        let fy = -pivotY;        let fx2 = width - pivotX;        let fy2 = height - pivotY;        let p1x = fx;        let p1y = fy;        let p2x = fx;        let p2y = fy2;        let p3x = fx2;        let p3y = fy2;        let p4x = fx2;        let p4y = fy;        let x1 = 0;        let y1 = 0;        let x2 = 0;        let y2 = 0;        let x3 = 0;        let y3 = 0;        let x4 = 0;        let y4 = 0;        if (angle != 0) {          let cos = MathUtils.cosDeg(angle);          let sin = MathUtils.sinDeg(angle);          x1 = cos * p1x - sin * p1y;          y1 = sin * p1x + cos * p1y;          x4 = cos * p2x - sin * p2y;          y4 = sin * p2x + cos * p2y;          x3 = cos * p3x - sin * p3y;          y3 = sin * p3x + cos * p3y;          x2 = x3 + (x1 - x4);          y2 = y3 + (y1 - y4);        } else {          x1 = p1x;          y1 = p1y;          x4 = p2x;          y4 = p2y;          x3 = p3x;          y3 = p3y;          x2 = p4x;          y2 = p4y;        }        x1 += worldOriginX;        y1 += worldOriginY;        x2 += worldOriginX;        y2 += worldOriginY;        x3 += worldOriginX;        y3 += worldOriginY;        x4 += worldOriginX;        y4 += worldOriginY;        var i = 0;        quad[i++] = x1;        quad[i++] = y1;        quad[i++] = color.r;        quad[i++] = color.g;        quad[i++] = color.b;        quad[i++] = color.a;        quad[i++] = 0;        quad[i++] = 1;        if (this.twoColorTint) {          quad[i++] = 0;          quad[i++] = 0;          quad[i++] = 0;          quad[i++] = 0;        }        quad[i++] = x2;        quad[i++] = y2;        quad[i++] = color.r;        quad[i++] = color.g;        quad[i++] = color.b;        quad[i++] = color.a;        quad[i++] = 1;        quad[i++] = 1;        if (this.twoColorTint) {          quad[i++] = 0;          quad[i++] = 0;          quad[i++] = 0;          quad[i++] = 0;        }        quad[i++] = x3;        quad[i++] = y3;        quad[i++] = color.r;        quad[i++] = color.g;        quad[i++] = color.b;        quad[i++] = color.a;        quad[i++] = 1;        quad[i++] = 0;        if (this.twoColorTint) {          quad[i++] = 0;          quad[i++] = 0;          quad[i++] = 0;          quad[i++] = 0;        }        quad[i++] = x4;        quad[i++] = y4;        quad[i++] = color.r;        quad[i++] = color.g;        quad[i++] = color.b;        quad[i++] = color.a;        quad[i++] = 0;        quad[i++] = 0;        if (this.twoColorTint) {          quad[i++] = 0;          quad[i++] = 0;          quad[i++] = 0;          quad[i] = 0;        }        this.batcher.draw(texture, quad, QUAD_TRIANGLES);      }      drawRegion(region, x, y, width, height, color = null) {        this.enableRenderer(this.batcher);        if (color === null)          color = WHITE;        var i = 0;        quad[i++] = x;        quad[i++] = y;        quad[i++] = color.r;        quad[i++] = color.g;        quad[i++] = color.b;        quad[i++] = color.a;        quad[i++] = region.u;        quad[i++] = region.v2;        if (this.twoColorTint) {          quad[i++] = 0;          quad[i++] = 0;          quad[i++] = 0;          quad[i++] = 0;        }        quad[i++] = x + width;        quad[i++] = y;        quad[i++] = color.r;        quad[i++] = color.g;        quad[i++] = color.b;        quad[i++] = color.a;        quad[i++] = region.u2;        quad[i++] = region.v2;        if (this.twoColorTint) {          quad[i++] = 0;          quad[i++] = 0;          quad[i++] = 0;          quad[i++] = 0;        }        quad[i++] = x + width;        quad[i++] = y + height;        quad[i++] = color.r;        quad[i++] = color.g;        quad[i++] = color.b;        quad[i++] = color.a;        quad[i++] = region.u2;        quad[i++] = region.v;        if (this.twoColorTint) {          quad[i++] = 0;          quad[i++] = 0;          quad[i++] = 0;          quad[i++] = 0;        }        quad[i++] = x;        quad[i++] = y + height;        quad[i++] = color.r;        quad[i++] = color.g;        quad[i++] = color.b;        quad[i++] = color.a;        quad[i++] = region.u;        quad[i++] = region.v;        if (this.twoColorTint) {          quad[i++] = 0;          quad[i++] = 0;          quad[i++] = 0;          quad[i] = 0;        }        this.batcher.draw(region.page.texture, quad, QUAD_TRIANGLES);      }      line(x, y, x2, y2, color = null, color2 = null) {        this.enableRenderer(this.shapes);        this.shapes.line(x, y, x2, y2, color);      }      triangle(filled, x, y, x2, y2, x3, y3, color = null, color2 = null, color3 = null) {        this.enableRenderer(this.shapes);        this.shapes.triangle(filled, x, y, x2, y2, x3, y3, color, color2, color3);      }      quad(filled, x, y, x2, y2, x3, y3, x4, y4, color = null, color2 = null, color3 = null, color4 = null) {        this.enableRenderer(this.shapes);        this.shapes.quad(filled, x, y, x2, y2, x3, y3, x4, y4, color, color2, color3, color4);      }      rect(filled, x, y, width, height, color = null) {        this.enableRenderer(this.shapes);        this.shapes.rect(filled, x, y, width, height, color);      }      rectLine(filled, x1, y1, x2, y2, width, color = null) {        this.enableRenderer(this.shapes);        this.shapes.rectLine(filled, x1, y1, x2, y2, width, color);      }      polygon(polygonVertices, offset, count, color = null) {        this.enableRenderer(this.shapes);        this.shapes.polygon(polygonVertices, offset, count, color);      }      circle(filled, x, y, radius, color = null, segments = 0) {        this.enableRenderer(this.shapes);        this.shapes.circle(filled, x, y, radius, color, segments);      }      curve(x1, y1, cx1, cy1, cx2, cy2, x2, y2, segments, color = null) {        this.enableRenderer(this.shapes);        this.shapes.curve(x1, y1, cx1, cy1, cx2, cy2, x2, y2, segments, color);      }      end() {        if (this.activeRenderer === this.batcher)          this.batcher.end();        else if (this.activeRenderer === this.shapes)          this.shapes.end();        this.activeRenderer = null;      }      resize(resizeMode) {        let canvas = this.canvas;        var dpr = window.devicePixelRatio || 1;        var w = Math.round(canvas.clientWidth * dpr);        var h = Math.round(canvas.clientHeight * dpr);        if (canvas.width != w || canvas.height != h) {          canvas.width = w;          canvas.height = h;        }        this.context.gl.viewport(0, 0, canvas.width, canvas.height);        if (resizeMode === ResizeMode.Expand)          this.camera.setViewport(w, h);        else if (resizeMode === ResizeMode.Fit) {          let sourceWidth = canvas.width, sourceHeight = canvas.height;          let targetWidth = this.camera.viewportWidth, targetHeight = this.camera.viewportHeight;          let targetRatio = targetHeight / targetWidth;          let sourceRatio = sourceHeight / sourceWidth;          let scale = targetRatio < sourceRatio ? targetWidth / sourceWidth : targetHeight / sourceHeight;          this.camera.setViewport(sourceWidth * scale, sourceHeight * scale);        }        this.camera.update();      }      enableRenderer(renderer) {        if (this.activeRenderer === renderer)          return;        this.end();        if (renderer instanceof PolygonBatcher) {          this.batcherShader.bind();          this.batcherShader.setUniform4x4f(Shader.MVP_MATRIX, this.camera.projectionView.values);          this.batcherShader.setUniformi("u_texture", 0);          this.batcher.begin(this.batcherShader);          this.activeRenderer = this.batcher;        } else if (renderer instanceof ShapeRenderer) {          this.shapesShader.bind();          this.shapesShader.setUniform4x4f(Shader.MVP_MATRIX, this.camera.projectionView.values);          this.shapes.begin(this.shapesShader);          this.activeRenderer = this.shapes;        } else          this.activeRenderer = this.skeletonDebugRenderer;      }    };    var ResizeMode;    (function(ResizeMode2) {      ResizeMode2[ResizeMode2["Stretch"] = 0] = "Stretch";      ResizeMode2[ResizeMode2["Expand"] = 1] = "Expand";      ResizeMode2[ResizeMode2["Fit"] = 2] = "Fit";    })(ResizeMode || (ResizeMode = {}));      // spine-webgl/src/LoadingScreen.ts    var spinnerImage;    var logoImage;    var loaded = 0;    var FADE_IN = 1;    var FADE_OUT = 1;    var logoWidth = 165;    var logoHeight = 108;    var spinnerSize = 163;    var LoadingScreen = class {      constructor(renderer) {        this.logo = null;        this.spinner = null;        this.angle = 0;        this.fadeOut = 0;        this.fadeIn = 0;        this.timeKeeper = new TimeKeeper();        this.backgroundColor = new Color(0.135, 0.135, 0.135, 1);        this.tempColor = new Color();        this.renderer = renderer;        this.timeKeeper.maxDelta = 9;        if (!logoImage) {          let isSafari = navigator.userAgent.indexOf("Safari") > -1;          let onload = () => loaded++;          logoImage = new Image();          logoImage.src = SPINE_LOGO_DATA;          if (!isSafari)            logoImage.crossOrigin = "anonymous";          logoImage.onload = onload;          spinnerImage = new Image();          spinnerImage.src = SPINNER_DATA;          if (!isSafari)            spinnerImage.crossOrigin = "anonymous";          spinnerImage.onload = onload;        }      }      dispose() {        this.logo.dispose();        this.spinner.dispose();      }      draw(complete = false) {        if (loaded < 2 || complete && this.fadeOut > FADE_OUT)          return;        this.timeKeeper.update();        let a = Math.abs(Math.sin(this.timeKeeper.totalTime + 0.25));        this.angle -= this.timeKeeper.delta * 200 * (1 + 1.5 * Math.pow(a, 5));        let tempColor = this.tempColor;        let renderer = this.renderer;        let canvas = renderer.canvas;        let gl = renderer.context.gl;        renderer.resize(ResizeMode.Expand);        renderer.camera.position.set(canvas.width / 2, canvas.height / 2, 0);        renderer.batcher.setBlendMode(gl.ONE, gl.ONE, gl.ONE_MINUS_SRC_ALPHA);        if (complete) {          this.fadeOut += this.timeKeeper.delta * (this.timeKeeper.totalTime < 1 ? 2 : 1);          if (this.fadeOut > FADE_OUT)            return;          tempColor.setFromColor(this.backgroundColor);          a = 1 - this.fadeOut / FADE_OUT;          a = 1 - (a - 1) * (a - 1);          tempColor.a *= a;          if (tempColor.a > 0) {            renderer.camera.zoom = 1;            renderer.begin();            renderer.quad(true, 0, 0, canvas.width, 0, canvas.width, canvas.height, 0, canvas.height, tempColor, tempColor, tempColor, tempColor);            renderer.end();          }        } else {          this.fadeIn += this.timeKeeper.delta;          if (this.backgroundColor.a > 0) {            gl.clearColor(this.backgroundColor.r, this.backgroundColor.g, this.backgroundColor.b, this.backgroundColor.a);            gl.clear(gl.COLOR_BUFFER_BIT);          }          a = 1;        }        a *= Math.min(this.fadeIn / FADE_IN, 1);        tempColor.set(a, a, a, a);        if (!this.logo) {          this.logo = new GLTexture(renderer.context, logoImage);          this.spinner = new GLTexture(renderer.context, spinnerImage);        }        renderer.camera.zoom = Math.max(1, spinnerSize / canvas.height);        renderer.begin();        renderer.drawTexture(this.logo, (canvas.width - logoWidth) / 2, (canvas.height - logoHeight) / 2, logoWidth, logoHeight, tempColor);        renderer.drawTextureRotated(this.spinner, (canvas.width - spinnerSize) / 2, (canvas.height - spinnerSize) / 2, spinnerSize, spinnerSize, spinnerSize / 2, spinnerSize / 2, this.angle, tempColor);        renderer.end();      }    };    var SPINNER_DATA = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKMAAACjCAYAAADmbK6AAAALKElEQVR42u2de2iW5R/GPzuqcwfnnKfNmafl5tTNHWzqNi3DEMQykcAoJSsySkspjSIk0iD/07Kf4R+FnVBDUTshZGpWUEJaaiWFgZlUFmXmIe3HNXthyebeZ77P9H13ffBG8Y8H7ut7vff93N/7fu4vGGPiFZiez/Qtw9lytJajfzfw9z/j+efPOv7cV8W+lUNY2a8T/ayTCRsWFLJA5rtUO1LLkV5p9LJeJizQiHeqnlOtmVFtdTGrrZkJCxYXsTgaI6r9MY4/UpNItW4mFDaXsTlaM6qVZlBq3UwofFrJp0HMWJ9DvXUzobCznJ1BzFjWlTLrZkJh/TDWBzFjTgo51s2EgnKI0Rrx+FiOWzNzVaym91Syx5qZsGBWb2ZFa0ZN6dbMhAWTcpkUrRmXD2K5NTNhgVbH0Zpxbl/mWjMTFvRIo0e0ZpzcncnWzISKtvmiMWNRJ4qslwmVXRXsas2Ix8ZwzFqZsGFREYtaM+Oaa1ljrUzYkJ9G/ok6TlzKjJWZVFor0y7c1Zu7WjLiqiGsskamXdHopyT4vALmzS9k/t19uHtKHlOSIMn6xAtARjIZ1sFcUSZ0Y4La+G6M18hS2IlCn4a+WoC0JNL0d/dUupdnUj40g6EJ2VEdMnhrOG/p5f/jUXz8SgmvaGU6KpNRNsLVQV0OdXf24s63h/P2gWoOrBjMCr2GJFQnnxnIM3q5P1PPmaYv+4ev4/C6UtbpV2gzXCkgL5W8Bwt48OIc6ul6Tp+s4+SyASxLiI4+PYCn1bHzDZxvaQW6vZzto7MYnQIpNkf7kp5EuozYUroqEjcNKHHd0Tl9mBPN1pk+hFeieGBnBtog7UXjsj9pWg+m6duecw2cay1OC/uxMC47KmP9OIYfoz1YoC20J/rzRG4quTZK2EAyJGs20qwUbYw0aNRmUxtvfUW/uEtNzc1NB1/X8LVyd15hh82F43AvD+VlXcsSJEZa1CQ3ejleAO7oxR3RDP0XN91X4+NXYb8nkv7UNTwV7e0YTdu7I3g33t7tuaEbNwSZpps2fSyvs4M2Tjhot+jb0Xzbltj8r5j/xVt/6Z1Ob93U1ZYO691EhhzchcHeXosVjcNZysyezLw4xRZt05R+fTeuj8vOj+zKyG0j2aZcVVs6v+QalnjrMFZASQYl2nBoSyz06e3j/Xk8rgWYmMvEICu2pm1HOTuc7okV8FgRj0XukwzanhvCc/F+72TjoQjdObN1OFuDLmh0xP+WHtxiI10ukJlCprb4guiv1fP+avZrS1C7NAkliHZjDtZwMMgqbukAltpMlwuMy2FcEBPqvfLLar5Uqi0hBdEwryy+Mv5n6zkbjTBa+dlMlwvUZFETZKGiFM7tvbhdJ3gSVRO0wzIjnxmvl/J6a6JsGMYGrahtpssFeqbR841S3mhN80OjOaSDEdqd6SjaMKgzgzRK7q1ib3PT9sYyNo7JZoyNFNvRcVMZmy7WOvIuryv/Zvdmdt90+nY0bRp3AvROohFwdwW7dTG7RFlbwlqdrbOBYg005NAQmZU0HWt1rXMBH1Xw0dQ8pmqzoaPmdhun7bHZjNVe9qP9eFQfO1VkUmHjhAVUZ1GtnKFSbjrkrPfy4i4UW5t/6ZxM54J0CqxFe81KpGsQyE4h23oYY4wxxhhjjDHGGGOMMcYYY4wxxhhjjDHGGGOMMcYYY4wxxhhjjDHGGGOMMcYYY4wxxhhjjLna+bdOy+IiFquIpGq16Pb79cNYv3IIK/X/ugx+Ui6TVKvYVU9Nc8gX8od8Ir/IN/KPfCQ/yVfyl/6/pfJvLChkQdD6wyqntquCXYuKWJSfRr6D0dEAxV3xlw/khyD+kd/ku/88cHo+09tS3LBpO1HHCVUqcIA6CqB4K+6X6x35L/JM2loXurlWmUmlA5XogOIcK8/If5HncrSWo7F6cKIWPjT/RXGOlWfkv8hzaWsN4uaaysE6WIkOKM6x8oz8F3kusXqo2vxC5jtYiQ4ozrH0TeS5qIZcrB7qkrwdA8U5Vp6R/yLPZV8V+2L14Cl5THGwEh1QnGPlGfkv8lyUlIzFQ1cNYVVHrcjZ0VCcFe9Y+Eb+izy3ceclUl43aFN52DXXssYpnY6a4qFS8ZcP2uIf+e7inRh6pdFrdTGrm8uiHx/L8T2V7NGWzvJBLJ/bl7mTuzO5qBNFDoiJID/IF/KHfCK/yDfyT3O7d/KbfNfS80hNIrU0g9L6HOq1x5iTQo6FNpeLfCQ/yVfyl3xmXYwxxhhjjDHGGGOMMcYYY4wxxhhjjDHGGGOMMcYYY4wxxhhjjDHGGGOMMcYYY4wxxhhjjDHNk9z4JwJ0SqKTdQkbyEwhU393T6V7zzR6pieR3tE1ITeVXImhe6BXDGZFdRbVeank2TBhcaEMr0rwbixj49IBLL2/L/ffmMuNHfqO9tFZjJYBd1ewO3Lx+IcVfKhqna5nHZYR6XFPH+5R3eeI5t9fx/fvjeC9Jdew5OKZKqFR/RDVKL6vL/f9PJafmyvHsL+a/ff24V6NmjZQbGchVbY6UM2BluqHv1rCqzVZ1KQlkZboepCdQvacPsz5bjTfXao+yMEaDt7Wk9tSIMVGig3TejCtJSM2bSpkPjWPqd1S6Zao+lORSYWmgkOjORRNwZqd5ezMSiHLRooNr5XwWjS6/1XHX9vL2T67N7M1iyXa9JCrYjVrS1gbpJyw6hBfsmiNCYT0P9/A+Wj1/6qGr5YNYFlJBiWJogEzezLz/ZG8/9s4fgtSyuvNYbyp1IONFBtu7sHNv4/j9yAxUHWrdaWsG9+N8XHd+YxkMpSy+aySz841cC5oXbmHCnnI74yxAgZ3YbDeB4PEQCOpBpFNZWwa2ZWRcdnxLsl00crtRB0n2lLg8JNRfDKoM4NsolgBSmw/UMADba1+qpmqfyf6x1u/0a/og3I+aEunP6/i86osqmygcGarF4p54dex/Bo0LqfqOfVwIQ/HW5/RSkwV1oN2WLlHTc82TljAwM4M1O5LWwYKZTjibYXNS0N5KcjKTe10PadfLObFuJwK4ozp+UzXDBTUjL+M5ZcBnRkQV53dMIwNQTu6bSTbVEzbi5awuVByd2E/FgaN0Tc1fKOzBHHV2aAdVSdv6s5NNkp7cSH/++xAng2yyHx+CM/H21YhfdPp+0U1X0TbSZnXx8faG9Aop0MS0cToh1p+iLcpOkLj9t/JOk5eqoPHxnDsyf486an5yqCDK7XZ1O4oZ4dWyy3FSXHUAYq47uyYbMZoGmhpG3DlEFb6uNiVBhpyaHhnBO8oJmfqOROJjzIiP43hJ8UxITqqX56S2Hur2KsOnq3nrE6PPNKPRwrSKbAZrjTQNZmuE7oxYXMZmxWbw9dxWFu4W4ezVedOE6qzI7oyYkY+M7TPeWsPbk2UX1qioSN+E3OZqOR2cReKE+qQRFN0Pi7y73g/UawU1KzezJpXwLz5hczX1ueUPKYkNb6GJQZ+j7/aAfRZREsv+quGsMoamXZBW2Gt5eU0alorEzYsKmJRa/m4NdeyxlqZsCGa84DKnVorEzboC7podis69DfIJmwufHMc7famvvmxZiYsKOtKWbRm1OcW1syEBboSJFozLh/EcmtmwgIluaM14/phrLdmJixYXMTiaM24p5I91syEBTphFOR7Y2tmwgJNvUFOr+tov3UzoaAv44KYUatv62ZCoemdhtG0+hzqrZsJBR08DWLG0gxKrZu50qvpxos3U5NItW4mFPp1ot+lPlpq2lYXs9qamVBZUMiC1ox4pJYjvlfStAu6GmTLcLboMtPIV4/6im5fFfuUi9QIap2MiWP+D96R1vPmsD/fAAAAAElFTkSuQmCC";    var SPINE_LOGO_DATA = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKUAAABsCAYAAAALzHKmAAAQ7klEQVR42u3da4xdVRUA4D0zd2Y6nZY59DVtZ1puS9+lzC0YAi2UQ8AAQczFpPgA9VIeIQbirRqJ0cBUBVGjDr/QCKSNRSMmpuODxAdxqhgwxkhFjf6Sxh/+UUNVNGJCzR7uTvas7LXX2q9zzp3em6y0gTN3Zu75utZe5+yztxC9V+/Ve5X9En1Vjd7J6SFbLNF7naPw+l2jh7YHMBWssqMHtlsRdim4qsLtIawaPiHEQOLoNrA9iIkQDnRrVA1qD2LZ8ISoxYqKo13sQAtBWBayQWZUAXGRQM9JjCngDVY0UqJNDbQrMcaGmArdUKpIjbYiQLsCZCyIMQBy8QwnilR4Q5AuCpxFYvRFmBLbEiwKwpsSaWycVQGZBKMrwBjA9BhxDe57u2L2hOoKNCbOrgAZitEVYUxoKSMErQvSxYIzCkguRg5EF4AUhqUlhy/YUKSxcRaKsioYOQhD4I0yYxkR3PcJBcuFysmgsXAWBTMJyBCMIQh9kGGxXIXvexCQXbHGAMrBWTbM2CCpMSMLIxehC77lSJwXGth7M0FzoVJIXXDWQnGmhOkL0ic7YhhtWdGGkAuPAjUWGoF4faCmwBkbZmyUqUCyMqMLRA4+E6IsdTjidUHKBYrh9CnpRcH0ypKxsyOGEYNIIeTCOz91OIJ1QYoB5eAMyZo+MFNnyVTZ0YiRC9EGEMOyAgshxErHsL2XK1gOUgwohtM1a5YNM7Rsu4K0ZkcbRm4mpPBRwFZ5hg9eCqkrUB+csWGGogzNkqEgrdnRhpGLkINudaLgwvVB6oqzCjCTZElb2Y4B0gUjBtEG0ARnDRLjjoG9DwcshtQGlIPTljVjwUySLWNkyRCQVHa0ZUUTRAwgF91a33BEy0VKAcVwwqwZC2bqbOlUurllOxQkJzNyINoAYqjWhYYjWg5SCiiG05Q1U8FMjTIoS8YE6YORi1BHtJ4KIcQEEtTXUWAxpK44YVlPBdO1jCdFWTZIE8bVGEYMIRPcZGBw4HKQcoBiOE1ZMzbMgVQwU6JMAdKEEcuIJogUvg1YCCE2gsCO42DlIIVAKZwpYJaSLVNnSU6XjYHUmxhTmXaFaMO3EYkLqMC+FsLlIoVAKZzMrEnBhJeLfLNlKMrYWRIDCbOkFSSVHbHM6AKRC6/ODUewNqQ+OLlZkxpjUmV8MBbMUJSxyzY3Q1IgTRgxiBRCHdem0KDAUkBh9sRwwjEnAXMMgTnKhFlUtiwkS5rGka4g9SaGgxFmRC7AzTCEEBcyA36dDSsXqAtOLkysjGMwY5XxVChjZ0kuSCo7YlkRQsQQYtDEFsegsLoCxUp7Kpgps2UslFGzJGccSYHUmxhOZqwzEZqAbfUMCisHKIZzgsCpl3MTzMwTpi1bYp2477gyFKUxS7qWbdjY2EBS2dGE0QQRA7gNCyHEdhjE8RhUDlBT9tzgmjWZMFNlSy+Urk1OzCyJlW0XkK4YOQh1cDtcgwBrQmoDWkdgboBZE8mYsJSHlnFbJ+5bwmOPJ7lZkirbC8aRsMvmgtTHjBhGE0QbwJ2egUE1ITVlUC5OmDVdYNrKuN70xM6WoShjlW4464dbtiFIWK6x7GjESEHUUe0iYncnbMdQSE0Z1ITTNOb0hRmjjLtmS9dmJ2rp1jtuKktyyrb6YLEMCUHq2dGG0QQRQ7f72kzc+cJecerne8Wvv7JNPHPvenEkz8Sh3UtFc92QyGt9Yko/HgOLAIUZlItTz5ouMF3KuE+2jFLCQ1D6lm6fLMkBacuOJowYRBUXyfjuHjF3NhdnsfjvAfH6E9vFt9XxKgikEKgJZyyYalzOLeMu2bLbULI6bh+QGwmQ+rgRlumdGEQAao+K56bEL2woVUwOiev0r8OAUjiJrMmFCbvykGxZRAmPitK1dHM7bohyMsuyi/I8f0+e57fJYIKEZXpXo9E4mOf5XTKyLLvCBLETF8uY2SKepkC+dpX4T02Ivepr4HvZcOZ5fmee54fyPL+DmTUhzAs6n4n8bN5dr9f3YdkSg8nsxG0lPBVKVpNjG0/aGhzfLDmRZdnumZmZp8+c+cdZPV555fSr7Xb7s0jJ3i5Pcue4MxKkPPkvvXTqz/B92u32l0wYOzG1fkhcd/py8Rcbyq/vFM/KY1WA95h/3zzP71bfU6JsNpsfgj+P/FlbrdaDGExYyuXvLz8H+DudODH700ajcSM3W6Yu4alQ1spCOTd38jcKocTZbh9+9NixY99XJ8AEUkcpo9W64yH197m5k7+bnZ19QT+J09NHntQhwji/Jg58qi6++ofLxJ8gSFneVw2Ka4QQDfh1Ok4dZavVmtZ/nrm5k7/Vf55O1tRhboUw5+ZOvqyOl5+R/FyOHj32PYVU/tloNG5IXcKrhJIzngwp3fNjomazea/64BuNxts646f50lWv169utw9/DmtqdJQyZFaSJVuV6nq9fqMEof5/vV6/CYBqgJDlee+yAbF/+4i4ZWqZeNfaIfHWzn+Hx0KcEuU9+s8jv3ej0bhVlXOZydX/k0iRMeb8P0D5e6tj8zy/Xb9UJIc56h/yqVOnXul8lmuZ2bJslKmbHG7XrbpCmCXFRLvdfqQD6jTS3Jiy5I4OykM6ADV+1Eu1DmV6evopBORexzDi1L+X/HnGxsb2w3Hm9PSRJ9QxWPOTZdmlKht2hi+w6dkox5bqffI8fye3hDteGqKaHVsHXihKl0tB+h0cY+lute54AGRKDCW89LNTRynHb7ChUWVVjetOnJh9EYBUyPZeNCoOtsbFQwdXi4/esELcd+tq8cCHJ8UXp+viy9efLz7AgamjlKXc1AA1m83DoIRDlFubzeb96hhZLVTlgJ24gttutx+ONa50bHZKRenaeTs1OfpAfnr6yOOdE7EZdNwmlKocntXLNkA5JTGq47Ds+Lf94lWsyfnXleLfnIwJUN4DOnNYwuUxh2A3Ln9XULrfK8t3J27Tu3BVwiOjXJqoAy8UZej1yclGo3GTLN+gu3w+z/P3YaWbQqk3Ne12e4ZC+c8rxWsYytcPiP9RpZxCqWDKnxOiBNlyAUpOnGsoh4tA2Rm8X9xqtT6md5wyZmYe+0YRKL+1S/wYQ3n8zctBl5SBUv5djivfjMOPduIzcizeiYfr9foVvUwZG+XCuzibZKnSceZ5/v4QlKp8y7ElhnJlTeTP7BI/kllRYfzrfvHqFy4UX1vaL/aVlSmROzwbwdS29T2UcEwZF+V8ozM2lu1VY812u/15akypGh3TmFJesJbHHD167IdUxz3YJy5bNySuX1mbvy55CbMLtzU6tjGlsdFptVqfUMc0Go23F4wy1l2dSnbfvpMwVPe9WWVLDsrOJaF9MFu2Wq1PqmNkGce67xiXhTjdNwdlvV6/BgxfbPfBfVCetxi6b9/rlCup65QzM48dl2OjLMv26CibzeZ96sTIzEFdpwQXz9U1yrtVlpR/Zll2Fec65Y6l4pbbx8XHH9kknvzJlPjlHy8Tp29eKT5ou0aJoIT3w3dBlLDzVpfAJEZ1XOdaJZxnOSlvPMjPzxFljIvng914RwebsjYO7uhMyHu46sOfnf3Oz2TXDW6vvYxdFoIXz3Wc8J5zs9n8iOn2IrxTc2BM3Glqdp7dI553uaOjxrhwcob+MyuUpjs6WZZdon8OcigjPx8V+u+GTWFTSWEx3WYcdJ225jNDSE4q0GHCzlueHOyujn6bUWYgeb9ZZUaQPe+GzQ+Gc8+oOGhC+c1d4gfI16n3XDAhQ7+9qE9l01E2Go132GYKyXE1NiFDTcpoNpv3LOYJGWXNErJNW9sEp63p2RKiVPMn1bS1DgxsyhoGdGpmizj+xtXiDYnx7/vFmce3iWdW1cTVGEY4hQ2ZW0nNq8Qm/M6XbXm3S100lwGedFybuvNOibLI+ZS2ceU4eAxiEuvCkfmU8ycToDxETe6FgCBQHeqyAbFvfEhcO7BwDuXFCEbTZF840XeHK0jYcbs2OIGle0mVJ/mmnClEPQqxyTY5I8/zFhif7fSZee4bnrPOU4AssnRXHaVTCTd14dRDY3UbTIiSeFhsN/aMjgnqthFx880rxX3yATL5p3y4LPXzOaBkUyBjZMlYpbtQlIOBD475ZEusjMNSvkXe6VEoJVDkeZ2dzIfIFsRzU+JF2OyM9M9fTC/6SUYOyFQPjQ2nWiUjxnPfw5EeHqMWIqAeIFsAU847lJM2JM6xsewt1OIDLs99P7ZFHNdB/upS8XtPiD7PfLuCXJNolYyyFiNI/Zit65ItrOVafFbHcFohY7hPTN21Tjz4uc3iqfsnxKdX1MTl1OoYRFaMsToGB6Trw2JFP/OdZC2hJZ7ZkrMoAbbSGmelDJ91hFKuJeS7jlBMkJnrAqqJlgMUZS/dArPlGHNdSg5M3xXXtvquuEatvIYtDRhpxbUJuIgqsU5lGWtUploK0KuEU9mSW8YpmFQ556xNuYW7NiW13B+FkMiKHIy+C6eGgBxJvMR0oSv5hi6+z4HJyZoU0M2RVvDlrOQbcxVfX5AhZbuqy0v7ZstYMLHlAVlLTF9ALLbvu9Y5Zylpn/XOsd0ibIvxr2KCLHpp6SCUIdnSZSF+WzfOhem6GD+1KwR3Z4jNjrtDpNoZwmWd8yrupZN6Hx3fbMmFSe0Swdq2ZIPjxk1112Duo8OBGLrBkw/IoncdK2XHsdC9dHz204m50xh3tzFq1zFqtzHXrfCw7OgDsqyNnZLszVijsmXgrmNcmGtS78lIoMX2aJz03fKO2sDJddPQSCDPiQ1DfWBycY6XtXstc2PQKuxgG2McmXTPb9/9vmuJYXKyJrWjbeg+3xPM4O73nWqvbyw7xgZZSJbEUBa157cNJjdr2vb+5iA1YV3HxYscj30PDCEHIgcjtfm8K8hSsmRotkwFk5s1TTghUAopB6xrjHMBBkI0YYTZ0dZlxwLpkiWDULpmy5gwqayZgZNkA7oKQQCxctByYg0XIIEQQuRitGVHblMTA2ShKGPDpC6wu+DEgJqg2rDGDBtAF4Q6RAojp1xXGmSMbImVcR+YWNY04eQCtUG1ofUJ2/uvcETIgUhhdAE5GAlkKShjwHTNmhhODKgJqQ2sC14uOgyfD0IbRF+MlQaZAiZWyn2yJsTJATqGnHQO2Jhh+xlsACFCG0QbRtdyzQFZCZSxYPpmTS7Q5cjJHYNBYIkZpu99HoUQ/o4QIYSIZUZfjJ4ZMjZI32wZBDMU5yhy8pZTULl4XYP5fagMyEVoy4oupTpGduwnkloSlKEwY+AcQU4MhRTD6ovXBRwFzwWgCSEF0QVjJUGmgEllTS5OLlCIlIN1mS9mx/cZ5eLDALpCTI2RAhkTZQqYoTgpoCPECbaBHQ2ETL3PUl98ECAXYijG0OyYAmQoTG7W5ODkAF1CnVgm2JQx4okPA+gCMTbGskBGgRmaOblAh5GTORIrfKFx4VH4EIAxIXIxlg2SBbMvECY3e7oApbDaIgQu5/2HmeEKEINYiwSRi7EQkLFgumZOCuggctKGI4ULZN/vMeSLj0AYMytWEqMLzFg4fYDaoKaC6wvOFR4FkIPQFaILxrJAOsHsc/zlfYDWXE8qF22s8Pz5KHxcgEVALBtjJXBSSEOwFhk1Zgy4hitCT4hVw+gFs8/zwxqIBbUgyK7fcyA0PD9XX4iVxhiC0xdof6STWCsoBmKF7+cVCWFXQYyBMxRpf+STX1b0x45AhN0OMSrOGEirhrY/dfQAdjvS7oy+WCF6r1RIFxXWvlTRg1YVqFWBmxZbD99ig9pt0YPQw9rD1nstVri9V+/Ve3XrS/wfim4P5fIFxLoAAAAASUVORK5CYII=";      // spine-webgl/src/SpineCanvas.ts    var SpineCanvas = class {      constructor(canvas, config) {        this.time = new TimeKeeper();        if (config.pathPrefix === void 0)          config.pathPrefix = "";        if (config.app === void 0)          config.app = {            loadAssets: () => {            },            initialize: () => {            },            update: () => {            },            render: () => {            },            error: () => {            }          };        if (config.webglConfig === void 0)          config.webglConfig = { alpha: true };        this.htmlCanvas = canvas;        this.context = new ManagedWebGLRenderingContext(canvas, config.webglConfig);        this.renderer = new SceneRenderer(canvas, this.context);        this.gl = this.context.gl;        this.assetManager = new AssetManager(this.context, config.pathPrefix);        this.input = new Input(canvas);        config.app.loadAssets(this);        let loop = () => {          requestAnimationFrame(loop);          this.time.update();          config.app.update(this, this.time.delta);          config.app.render(this);        };        let waitForAssets = () => {          if (this.assetManager.isLoadingComplete()) {            if (this.assetManager.hasErrors()) {              config.app.error(this, this.assetManager.getErrors());            } else {              config.app.initialize(this);              loop();            }            return;          }          requestAnimationFrame(waitForAssets);        };        requestAnimationFrame(waitForAssets);      }      clear(r, g, b, a) {        this.gl.clearColor(r, g, b, a);        this.gl.clear(this.gl.COLOR_BUFFER_BIT);      }    };      // spine-player/src/Player.ts    var SpinePlayer = class {      constructor(parent, config) {        this.config = config;        this.bg = new Color();        this.bgFullscreen = new Color();        this.playTime = 0;        this.cancelId = 0;        this.paused = true;        this.speed = 1;        this.time = new TimeKeeper();        this.stopRequestAnimationFrame = false;        this.disposed = false;        this.viewport = {};        this.viewportTransitionStart = 0;        this.eventListeners = [];        this.parent = typeof parent === "string" ? document.getElementById(parent) : parent;        if (!this.parent)          throw new Error("SpinePlayer parent not found: " + parent);        if (config.showControls === void 0)          config.showControls = true;        let controls = config.showControls ? `  <div class="spine-player-controls spine-player-popup-parent spine-player-controls-hidden">  <div class="spine-player-timeline"></div>  <div class="spine-player-buttons">  <button class="spine-player-button spine-player-button-icon-pause"></button>  <div class="spine-player-button-spacer"></div>  <button class="spine-player-button spine-player-button-icon-speed"></button>  <button class="spine-player-button spine-player-button-icon-animations"></button>  <button class="spine-player-button spine-player-button-icon-skins"></button>  <button class="spine-player-button spine-player-button-icon-settings"></button>  <button class="spine-player-button spine-player-button-icon-fullscreen"></button>  <img class="spine-player-button-icon-spine-logo" src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20104%2031.16%22%3E%3Cpath%20d%3D%22M104%2012.68a1.31%201.31%200%200%201-.37%201%201.28%201.28%200%200%201-.85.31H91.57a10.51%2010.51%200%200%200%20.29%202.55%204.92%204.92%200%200%200%201%202%204.27%204.27%200%200%200%201.64%201.26%206.89%206.89%200%200%200%202.6.44%2010.66%2010.66%200%200%200%202.17-.2%2012.81%2012.81%200%200%200%201.64-.44q.69-.25%201.14-.44a1.87%201.87%200%200%201%20.68-.2.44.44%200%200%201%20.27.04.43.43%200%200%201%20.16.2%201.38%201.38%200%200%201%20.09.37%204.89%204.89%200%200%201%200%20.58%204.14%204.14%200%200%201%200%20.43v.32a.83.83%200%200%201-.09.26%201.1%201.1%200%200%201-.17.22%202.77%202.77%200%200%201-.61.34%208.94%208.94%200%200%201-1.32.46%2018.54%2018.54%200%200%201-1.88.41%2013.78%2013.78%200%200%201-2.28.18%2010.55%2010.55%200%200%201-3.68-.59%206.82%206.82%200%200%201-2.66-1.74%207.44%207.44%200%200%201-1.63-2.89%2013.48%2013.48%200%200%201-.55-4%2012.76%2012.76%200%200%201%20.57-3.94%208.35%208.35%200%200%201%201.64-3%207.15%207.15%200%200%201%202.58-1.87%208.47%208.47%200%200%201%203.39-.65%208.19%208.19%200%200%201%203.41.64%206.46%206.46%200%200%201%202.32%201.73%207%207%200%200%201%201.3%202.54%2011.17%2011.17%200%200%201%20.43%203.13zm-3.14-.93a5.69%205.69%200%200%200-1.09-3.86%204.17%204.17%200%200%200-3.42-1.4%204.52%204.52%200%200%200-2%20.44%204.41%204.41%200%200%200-1.47%201.15A5.29%205.29%200%200%200%2092%209.75a7%207%200%200%200-.36%202zM80.68%2021.94a.42.42%200%200%201-.08.26.59.59%200%200%201-.25.18%201.74%201.74%200%200%201-.47.11%206.31%206.31%200%200%201-.76%200%206.5%206.5%200%200%201-.78%200%201.74%201.74%200%200%201-.47-.11.59.59%200%200%201-.25-.18.42.42%200%200%201-.08-.26V12a9.8%209.8%200%200%200-.23-2.35%204.86%204.86%200%200%200-.66-1.53%202.88%202.88%200%200%200-1.13-1%203.57%203.57%200%200%200-1.6-.34%204%204%200%200%200-2.35.83A12.71%2012.71%200%200%200%2069.11%2010v11.9a.42.42%200%200%201-.08.26.59.59%200%200%201-.25.18%201.74%201.74%200%200%201-.47.11%206.51%206.51%200%200%201-.78%200%206.31%206.31%200%200%201-.76%200%201.88%201.88%200%200%201-.48-.11.52.52%200%200%201-.25-.18.46.46%200%200%201-.07-.26v-17a.53.53%200%200%201%20.03-.21.5.5%200%200%201%20.23-.19%201.28%201.28%200%200%201%20.44-.11%208.53%208.53%200%200%201%201.39%200%201.12%201.12%200%200%201%20.43.11.6.6%200%200%201%20.22.19.47.47%200%200%201%20.07.26V7.2a10.46%2010.46%200%200%201%202.87-2.36%206.17%206.17%200%200%201%202.88-.75%206.41%206.41%200%200%201%202.87.58%205.16%205.16%200%200%201%201.88%201.54%206.15%206.15%200%200%201%201%202.26%2013.46%2013.46%200%200%201%20.31%203.11z%22%20fill%3D%22%23fff%22%2F%3E%3Cpath%20d%3D%22M43.35%202.86c.09%202.6%201.89%204%205.48%204.61%203%20.48%205.79.24%206.69-2.37%201.75-5.09-2.4-3.82-6-4.39s-6.31-2.03-6.17%202.15zm1.08%2010.69c.33%201.94%202.14%203.06%204.91%203s4.84-1.16%205.13-3.25c.53-3.88-2.53-2.38-5.3-2.3s-5.4-1.26-4.74%202.55zM48%2022.44c.55%201.45%202.06%202.06%204.1%201.63s3.45-1.11%203.33-2.76c-.21-3.06-2.22-2.1-4.26-1.66S47%2019.6%2048%2022.44zm1.78%206.78c.16%201.22%201.22%202%202.88%201.93s2.92-.67%203.13-2c.4-2.43-1.46-1.53-3.12-1.51s-3.17-.82-2.89%201.58z%22%20fill%3D%22%23ff4000%22%2F%3E%3Cpath%20d%3D%22M35.28%2013.16a15.33%2015.33%200%200%201-.48%204%208.75%208.75%200%200%201-1.42%203%206.35%206.35%200%200%201-2.32%201.91%207.14%207.14%200%200%201-3.16.67%206.1%206.1%200%200%201-1.4-.15%205.34%205.34%200%200%201-1.26-.47%207.29%207.29%200%200%201-1.24-.81q-.61-.49-1.29-1.15v8.51a.47.47%200%200%201-.08.26.56.56%200%200%201-.25.19%201.74%201.74%200%200%201-.47.11%206.47%206.47%200%200%201-.78%200%206.26%206.26%200%200%201-.76%200%201.89%201.89%200%200%201-.48-.11.49.49%200%200%201-.25-.19.51.51%200%200%201-.07-.26V4.91a.57.57%200%200%201%20.06-.27.46.46%200%200%201%20.23-.18%201.47%201.47%200%200%201%20.44-.1%207.41%207.41%200%200%201%201.3%200%201.45%201.45%200%200%201%20.43.1.52.52%200%200%201%20.24.18.51.51%200%200%201%20.07.27V7.2a18.06%2018.06%200%200%201%201.49-1.38%209%209%200%200%201%201.45-1%206.82%206.82%200%200%201%201.49-.59%207.09%207.09%200%200%201%204.78.52%206%206%200%200%201%202.13%202%208.79%208.79%200%200%201%201.2%202.9%2015.72%2015.72%200%200%201%20.4%203.51zm-3.28.36a15.64%2015.64%200%200%200-.2-2.53%207.32%207.32%200%200%200-.69-2.17%204.06%204.06%200%200%200-1.3-1.51%203.49%203.49%200%200%200-2-.57%204.1%204.1%200%200%200-1.2.18%204.92%204.92%200%200%200-1.2.57%208.54%208.54%200%200%200-1.28%201A15.77%2015.77%200%200%200%2022.76%2010v6.77a13.53%2013.53%200%200%200%202.46%202.4%204.12%204.12%200%200%200%202.44.83%203.56%203.56%200%200%200%202-.57A4.28%204.28%200%200%200%2031%2018a7.58%207.58%200%200%200%20.77-2.12%2011.43%2011.43%200%200%200%20.23-2.36zM12%2017.3a5.39%205.39%200%200%201-.48%202.33%204.73%204.73%200%200%201-1.37%201.72%206.19%206.19%200%200%201-2.12%201.06%209.62%209.62%200%200%201-2.71.36%2010.38%2010.38%200%200%201-3.21-.5A7.63%207.63%200%200%201%201%2021.82a3.25%203.25%200%200%201-.66-.43%201.09%201.09%200%200%201-.3-.53%203.59%203.59%200%200%201-.04-.93%204.06%204.06%200%200%201%200-.61%202%202%200%200%201%20.09-.4.42.42%200%200%201%20.16-.22.43.43%200%200%201%20.24-.07%201.35%201.35%200%200%201%20.61.26q.41.26%201%20.56a9.22%209.22%200%200%200%201.41.55%206.25%206.25%200%200%200%201.87.26%205.62%205.62%200%200%200%201.44-.17%203.48%203.48%200%200%200%201.12-.5%202.23%202.23%200%200%200%20.73-.84%202.68%202.68%200%200%200%20.26-1.21%202%202%200%200%200-.37-1.21%203.55%203.55%200%200%200-1-.87%208.09%208.09%200%200%200-1.36-.66l-1.56-.61a16%2016%200%200%201-1.57-.73%206%206%200%200%201-1.37-1%204.52%204.52%200%200%201-1-1.4%204.69%204.69%200%200%201-.37-2%204.88%204.88%200%200%201%20.39-1.87%204.46%204.46%200%200%201%201.16-1.61%205.83%205.83%200%200%201%201.94-1.11A8.06%208.06%200%200%201%206.53%204a8.28%208.28%200%200%201%201.36.11%209.36%209.36%200%200%201%201.23.28%205.92%205.92%200%200%201%20.94.37%204.09%204.09%200%200%201%20.59.35%201%201%200%200%201%20.26.26.83.83%200%200%201%20.09.26%201.32%201.32%200%200%200%20.06.35%203.87%203.87%200%200%201%200%20.51%204.76%204.76%200%200%201%200%20.56%201.39%201.39%200%200%201-.09.39.5.5%200%200%201-.16.22.35.35%200%200%201-.21.07%201%201%200%200%201-.49-.21%207%207%200%200%200-.83-.44%209.26%209.26%200%200%200-1.2-.44%205.49%205.49%200%200%200-1.58-.16%204.93%204.93%200%200%200-1.4.18%202.69%202.69%200%200%200-1%20.51%202.16%202.16%200%200%200-.59.83%202.43%202.43%200%200%200-.2%201%202%202%200%200%200%20.38%201.24%203.6%203.6%200%200%200%201%20.88%208.25%208.25%200%200%200%201.38.68l1.58.62q.8.32%201.59.72a6%206%200%200%201%201.39%201%204.37%204.37%200%200%201%201%201.36%204.46%204.46%200%200%201%20.37%201.8z%22%20fill%3D%22%23fff%22%2F%3E%3C%2Fsvg%3E">  </div></div>` : "";        this.parent.appendChild(this.dom = createElement(`<div class="spine-player" style="position:relative;height:100%"><canvas class="spine-player-canvas" style="display:block;width:100%;height:100%"></canvas>${controls}</div>`));        try {          this.validateConfig(config);        } catch (e) {          this.showError(e.message, e);        }        this.initialize();        this.addEventListener(window, "resize", () => this.drawFrame(false));        requestAnimationFrame(() => this.drawFrame());      }      dispose() {        this.sceneRenderer.dispose();        if (this.loadingScreen)          this.loadingScreen.dispose();        this.assetManager.dispose();        for (var i = 0; i < this.eventListeners.length; i++) {          var eventListener = this.eventListeners[i];          eventListener.target.removeEventListener(eventListener.event, eventListener.func);        }        this.parent.removeChild(this.dom);        this.disposed = true;      }      addEventListener(target, event, func) {        this.eventListeners.push({ target, event, func });        target.addEventListener(event, func);      }      validateConfig(config) {        if (!config)          throw new Error("A configuration object must be passed to to new SpinePlayer().");        if (config.skelUrl)          config.binaryUrl = config.skelUrl;        if (!config.jsonUrl && !config.binaryUrl)          throw new Error("A URL must be specified for the skeleton JSON or binary file.");        if (!config.atlasUrl)          throw new Error("A URL must be specified for the atlas file.");        if (!config.backgroundColor)          config.backgroundColor = config.alpha ? "00000000" : "000000";        if (!config.fullScreenBackgroundColor)          config.fullScreenBackgroundColor = config.backgroundColor;        if (config.backgroundImage && !config.backgroundImage.url)          config.backgroundImage = null;        if (config.premultipliedAlpha === void 0)          config.premultipliedAlpha = true;        if (config.preserveDrawingBuffer === void 0)          config.preserveDrawingBuffer = false;        if (config.mipmaps === void 0)          config.mipmaps = true;        if (!config.debug)          config.debug = {};        if (config.animations && config.animation && config.animations.indexOf(config.animation) < 0)          throw new Error("Animation '" + config.animation + "' is not in the config animation list: " + toString(config.animations));        if (config.skins && config.skin && config.skins.indexOf(config.skin) < 0)          throw new Error("Default skin '" + config.skin + "' is not in the config skins list: " + toString(config.skins));        if (!config.viewport)          config.viewport = {};        if (!config.viewport.animations)          config.viewport.animations = {};        if (config.viewport.debugRender === void 0)          config.viewport.debugRender = false;        if (config.viewport.transitionTime === void 0)          config.viewport.transitionTime = 0.25;        if (!config.controlBones)          config.controlBones = [];        if (config.showLoading === void 0)          config.showLoading = true;        if (config.defaultMix === void 0)          config.defaultMix = 0.25;      }      initialize() {        let config = this.config;        let dom = this.dom;        if (!config.alpha) {          let hex = config.backgroundColor;          this.dom.style.backgroundColor = (hex.charAt(0) == "#" ? hex : "#" + hex).substr(0, 7);        }        try {          this.canvas = findWithClass(dom, "spine-player-canvas");          this.context = new ManagedWebGLRenderingContext(this.canvas, { alpha: config.alpha, preserveDrawingBuffer: config.preserveDrawingBuffer });          this.sceneRenderer = new SceneRenderer(this.canvas, this.context, true);          if (config.showLoading)            this.loadingScreen = new LoadingScreen(this.sceneRenderer);        } catch (e) {          this.showError("Sorry, your browser does not support \nPlease use the latest version of Firefox, Chrome, Edge, or Safari.", e);        }        this.assetManager = new AssetManager(this.context, "", config.downloader);        if (config.rawDataURIs) {          for (let path in config.rawDataURIs)            this.assetManager.setRawDataURI(path, config.rawDataURIs[path]);        }        if (config.jsonUrl)          this.assetManager.loadJson(config.jsonUrl);        else          this.assetManager.loadBinary(config.binaryUrl);        this.assetManager.loadTextureAtlas(config.atlasUrl);        if (config.backgroundImage)          this.assetManager.loadTexture(config.backgroundImage.url);        this.bg.setFromString(config.backgroundColor);        this.bgFullscreen.setFromString(config.fullScreenBackgroundColor);        if (config.showControls) {          this.playerControls = dom.children[1];          let controls = this.playerControls.children;          let timeline = controls[0];          let buttons = controls[1].children;          this.playButton = buttons[0];          let speedButton = buttons[2];          this.animationButton = buttons[3];          this.skinButton = buttons[4];          let settingsButton = buttons[5];          let fullscreenButton = buttons[6];          let logoButton = buttons[7];          this.timelineSlider = new Slider();          timeline.appendChild(this.timelineSlider.create());          this.timelineSlider.change = (percentage) => {            this.pause();            let animationDuration = this.animationState.getCurrent(0).animation.duration;            let time = animationDuration * percentage;            this.animationState.update(time - this.playTime);            this.animationState.apply(this.skeleton);            this.skeleton.updateWorldTransform();            this.playTime = time;          };          this.playButton.onclick = () => this.paused ? this.play() : this.pause();          speedButton.onclick = () => this.showSpeedDialog(speedButton);          this.animationButton.onclick = () => this.showAnimationsDialog(this.animationButton);          this.skinButton.onclick = () => this.showSkinsDialog(this.skinButton);          settingsButton.onclick = () => this.showSettingsDialog(settingsButton);          let oldWidth = this.canvas.clientWidth, oldHeight = this.canvas.clientHeight;          let oldStyleWidth = this.canvas.style.width, oldStyleHeight = this.canvas.style.height;          let isFullscreen = false;          fullscreenButton.onclick = () => {            let fullscreenChanged = () => {              isFullscreen = !isFullscreen;              if (!isFullscreen) {                this.canvas.style.width = oldWidth + "px";                this.canvas.style.height = oldHeight + "px";                this.drawFrame(false);                requestAnimationFrame(() => {                  this.canvas.style.width = oldStyleWidth;                  this.canvas.style.height = oldStyleHeight;                });              }            };            let player = dom;            player.onfullscreenchange = fullscreenChanged;            player.onwebkitfullscreenchange = fullscreenChanged;            let doc = document;            if (doc.fullscreenElement || doc.webkitFullscreenElement || doc.mozFullScreenElement || doc.msFullscreenElement) {              if (doc.exitFullscreen)                doc.exitFullscreen();              else if (doc.mozCancelFullScreen)                doc.mozCancelFullScreen();              else if (doc.webkitExitFullscreen)                doc.webkitExitFullscreen();              else if (doc.msExitFullscreen)                doc.msExitFullscreen();            } else {              oldWidth = this.canvas.clientWidth;              oldHeight = this.canvas.clientHeight;              oldStyleWidth = this.canvas.style.width;              oldStyleHeight = this.canvas.style.height;              if (player.requestFullscreen)                player.requestFullscreen();              else if (player.webkitRequestFullScreen)                player.webkitRequestFullScreen();              else if (player.mozRequestFullScreen)                player.mozRequestFullScreen();              else if (player.msRequestFullscreen)                player.msRequestFullscreen();            }          };          logoButton.onclick = () => window.open("http://esotericsoftware.com");        }        return dom;      }      loadSkeleton() {        if (this.error)          return;        if (this.assetManager.hasErrors())          this.showError("Error: Assets could not be loaded.\n" + toString(this.assetManager.getErrors()));        let config = this.config;        let atlas = this.assetManager.require(config.atlasUrl);        let gl = this.context.gl, anisotropic = gl.getExtension("EXT_texture_filter_anisotropic");        let isWebGL1 = gl.getParameter(gl.VERSION).indexOf("WebGL 1.0") != -1;        for (let page of atlas.pages) {          let minFilter = page.minFilter;          var useMipMaps = config.mipmaps;          var isPOT = MathUtils.isPowerOfTwo(page.width) && MathUtils.isPowerOfTwo(page.height);          if (isWebGL1 && !isPOT)            useMipMaps = false;          if (useMipMaps) {            if (anisotropic) {              gl.texParameterf(gl.TEXTURE_2D, anisotropic.TEXTURE_MAX_ANISOTROPY_EXT, 8);              minFilter = TextureFilter.MipMapLinearLinear;            } else              minFilter = TextureFilter.Linear;            page.texture.setFilters(minFilter, TextureFilter.Nearest);          }          if (minFilter != TextureFilter.Nearest && minFilter != TextureFilter.Linear)            page.texture.update(true);        }        let skeletonData;        if (config.jsonUrl) {          try {            let jsonData = this.assetManager.remove(config.jsonUrl);            if (!jsonData)              throw new Error("Empty JSON data.");            if (config.jsonField) {              jsonData = jsonData[config.jsonField];              if (!jsonData)                throw new Error("JSON field does not exist: " + config.jsonField);            }            let json = new SkeletonJson(new AtlasAttachmentLoader(atlas));            skeletonData = json.readSkeletonData(jsonData);          } catch (e) {            this.showError(`Error: Could not load skeleton JSON.  ${e.message}`, e);          }        } else {          let binaryData = this.assetManager.remove(config.binaryUrl);          let binary = new SkeletonBinary(new AtlasAttachmentLoader(atlas));          try {            skeletonData = binary.readSkeletonData(binaryData);          } catch (e) {            this.showError(`Error: Could not load skeleton binary.  ${e.message}`, e);          }        }        this.skeleton = new Skeleton(skeletonData);        let stateData = new AnimationStateData(skeletonData);        stateData.defaultMix = config.defaultMix;        this.animationState = new AnimationState(stateData);        config.controlBones.forEach((bone) => {          if (!skeletonData.findBone(bone))            this.showError(`Error: Control bone does not exist in skeleton: ${bone}`);        });        if (!config.skin && skeletonData.skins.length)          config.skin = skeletonData.skins[0].name;        if (config.skins && config.skin.length) {          config.skins.forEach((skin) => {            if (!this.skeleton.data.findSkin(skin))              this.showError(`Error: Skin in config list does not exist in skeleton: ${skin}`);          });        }        if (config.skin) {          if (!this.skeleton.data.findSkin(config.skin))            this.showError(`Error: Skin does not exist in skeleton: ${config.skin}`);          this.skeleton.setSkinByName(config.skin);          this.skeleton.setSlotsToSetupPose();        }        Object.getOwnPropertyNames(config.viewport.animations).forEach((animation) => {          if (!skeletonData.findAnimation(animation))            this.showError(`Error: Animation for which a viewport was specified does not exist in skeleton: ${animation}`);        });        if (config.animations && config.animations.length) {          config.animations.forEach((animation) => {            if (!this.skeleton.data.findAnimation(animation))              this.showError(`Error: Animation in config list does not exist in skeleton: ${animation}`);          });          if (!config.animation)            config.animation = config.animations[0];        }        if (config.animation && !skeletonData.findAnimation(config.animation))          this.showError(`Error: Animation does not exist in skeleton: ${config.animation}`);        this.setupInput();        if (config.showControls) {          if (skeletonData.skins.length == 1 || config.skins && config.skins.length == 1)            this.skinButton.classList.add("spine-player-hidden");          if (skeletonData.animations.length == 1 || config.animations && config.animations.length == 1)            this.animationButton.classList.add("spine-player-hidden");        }        if (config.success)          config.success(this);        let entry = this.animationState.getCurrent(0);        if (!entry) {          if (config.animation) {            entry = this.setAnimation(config.animation);            this.play();          } else {            entry = this.animationState.setEmptyAnimation(0);            entry.trackEnd = 1e8;            this.setViewport(entry.animation);            this.pause();          }        } else if (!this.currentViewport) {          this.setViewport(entry.animation);          this.play();        }      }      setupInput() {        let config = this.config;        let controlBones = config.controlBones;        if (!controlBones.length && !config.showControls)          return;        let selectedBones = this.selectedBones = new Array(controlBones.length);        let canvas = this.canvas;        let target = null;        let offset = new Vector2();        let coords = new Vector3();        let mouse = new Vector3();        let position = new Vector2();        let skeleton = this.skeleton;        let renderer = this.sceneRenderer;        let closest = function(x, y) {          mouse.set(x, canvas.clientHeight - y, 0);          offset.x = offset.y = 0;          let bestDistance = 24, index = 0;          let best;          for (let i = 0; i < controlBones.length; i++) {            selectedBones[i] = null;            let bone = skeleton.findBone(controlBones[i]);            let distance = renderer.camera.worldToScreen(coords.set(bone.worldX, bone.worldY, 0), canvas.clientWidth, canvas.clientHeight).distance(mouse);            if (distance < bestDistance) {              bestDistance = distance;              best = bone;              index = i;              offset.x = coords.x - mouse.x;              offset.y = coords.y - mouse.y;            }          }          if (best)            selectedBones[index] = best;          return best;        };        new Input(canvas).addListener({          down: (x, y) => {            target = closest(x, y);          },          up: () => {            if (target)              target = null;            else if (config.showControls)              this.paused ? this.play() : this.pause();          },          dragged: (x, y) => {            if (target) {              x = MathUtils.clamp(x + offset.x, 0, canvas.clientWidth);              y = MathUtils.clamp(y - offset.y, 0, canvas.clientHeight);              renderer.camera.screenToWorld(coords.set(x, y, 0), canvas.clientWidth, canvas.clientHeight);              if (target.parent) {                target.parent.worldToLocal(position.set(coords.x - skeleton.x, coords.y - skeleton.y));                target.x = position.x;                target.y = position.y;              } else {                target.x = coords.x - skeleton.x;                target.y = coords.y - skeleton.y;              }            }          },          moved: (x, y) => closest(x, y)        });        if (config.showControls) {          this.addEventListener(document, "mousemove", (ev) => {            if (ev instanceof MouseEvent)              handleHover(ev.clientX, ev.clientY);          });          this.addEventListener(document, "touchmove", (ev) => {            if (ev instanceof TouchEvent) {              let touches = ev.changedTouches;              if (touches.length) {                let touch = touches[0];                handleHover(touch.clientX, touch.clientY);              }            }          });          let overlap = (mouseX, mouseY, rect) => {            let x = mouseX - rect.left, y = mouseY - rect.top;            return x >= 0 && x <= rect.width && y >= 0 && y <= rect.height;          };          let mouseOverControls = true, mouseOverCanvas = false;          let handleHover = (mouseX, mouseY) => {            let popup = findWithClass(this.dom, "spine-player-popup");            mouseOverControls = overlap(mouseX, mouseY, this.playerControls.getBoundingClientRect());            mouseOverCanvas = overlap(mouseX, mouseY, canvas.getBoundingClientRect());            clearTimeout(this.cancelId);            let hide = !popup && !mouseOverControls && !mouseOverCanvas && !this.paused;            if (hide)              this.playerControls.classList.add("spine-player-controls-hidden");            else              this.playerControls.classList.remove("spine-player-controls-hidden");            if (!mouseOverControls && !popup && !this.paused) {              this.cancelId = setTimeout(() => {                if (!this.paused)                  this.playerControls.classList.add("spine-player-controls-hidden");              }, 1e3);            }          };        }      }      play() {        this.paused = false;        let config = this.config;        if (config.showControls) {          this.cancelId = setTimeout(() => {            if (!this.paused)              this.playerControls.classList.add("spine-player-controls-hidden");          }, 1e3);          this.playButton.classList.remove("spine-player-button-icon-play");          this.playButton.classList.add("spine-player-button-icon-pause");          if (!config.animation) {            if (config.animations && config.animations.length)              config.animation = config.animations[0];            else if (this.skeleton.data.animations.length)              config.animation = this.skeleton.data.animations[0].name;            if (config.animation)              this.setAnimation(config.animation);          }        }      }      pause() {        this.paused = true;        if (this.config.showControls) {          this.playerControls.classList.remove("spine-player-controls-hidden");          clearTimeout(this.cancelId);          this.playButton.classList.remove("spine-player-button-icon-pause");          this.playButton.classList.add("spine-player-button-icon-play");        }      }      setAnimation(animation, loop = true) {        animation = this.setViewport(animation);        return this.animationState.setAnimationWith(0, animation, loop);      }      addAnimation(animation, loop = true, delay = 0) {        animation = this.setViewport(animation);        return this.animationState.addAnimationWith(0, animation, loop, delay);      }      setViewport(animation) {        if (typeof animation == "string")          animation = this.skeleton.data.findAnimation(animation);        this.previousViewport = this.currentViewport;        let globalViewport = this.config.viewport;        let viewport = this.currentViewport = {          padLeft: globalViewport.padLeft !== void 0 ? globalViewport.padLeft : "10%",          padRight: globalViewport.padRight !== void 0 ? globalViewport.padRight : "10%",          padTop: globalViewport.padTop !== void 0 ? globalViewport.padTop : "10%",          padBottom: globalViewport.padBottom !== void 0 ? globalViewport.padBottom : "10%"        };        if (globalViewport.x !== void 0 && globalViewport.y !== void 0 && globalViewport.width && globalViewport.height) {          viewport.x = globalViewport.x;          viewport.y = globalViewport.y;          viewport.width = globalViewport.width;          viewport.height = globalViewport.height;        } else          this.calculateAnimationViewport(animation, viewport);        let userAnimViewport = this.config.viewport.animations[animation.name];        if (userAnimViewport) {          if (userAnimViewport.x !== void 0 && userAnimViewport.y !== void 0 && userAnimViewport.width && userAnimViewport.height) {            viewport.x = userAnimViewport.x;            viewport.y = userAnimViewport.y;            viewport.width = userAnimViewport.width;            viewport.height = userAnimViewport.height;          }          if (userAnimViewport.padLeft !== void 0)            viewport.padLeft = userAnimViewport.padLeft;          if (userAnimViewport.padRight !== void 0)            viewport.padRight = userAnimViewport.padRight;          if (userAnimViewport.padTop !== void 0)            viewport.padTop = userAnimViewport.padTop;          if (userAnimViewport.padBottom !== void 0)            viewport.padBottom = userAnimViewport.padBottom;        }        viewport.padLeft = this.percentageToWorldUnit(viewport.width, viewport.padLeft);        viewport.padRight = this.percentageToWorldUnit(viewport.width, viewport.padRight);        viewport.padBottom = this.percentageToWorldUnit(viewport.height, viewport.padBottom);        viewport.padTop = this.percentageToWorldUnit(viewport.height, viewport.padTop);        this.viewportTransitionStart = performance.now();        return animation;      }      percentageToWorldUnit(size, percentageOrAbsolute) {        if (typeof percentageOrAbsolute === "string")          return size * parseFloat(percentageOrAbsolute.substr(0, percentageOrAbsolute.length - 1)) / 100;        return percentageOrAbsolute;      }      calculateAnimationViewport(animation, viewport) {        this.skeleton.setToSetupPose();        let steps = 100, stepTime = animation.duration ? animation.duration / steps : 0, time = 0;        let minX = 1e8, maxX = -1e8, minY = 1e8, maxY = -1e8;        let offset = new Vector2(), size = new Vector2();        for (let i = 0; i < steps; i++, time += stepTime) {          animation.apply(this.skeleton, time, time, false, null, 1, MixBlend.setup, MixDirection.mixIn);          this.skeleton.updateWorldTransform();          this.skeleton.getBounds(offset, size);          if (!isNaN(offset.x) && !isNaN(offset.y) && !isNaN(size.x) && !isNaN(size.y)) {            minX = Math.min(offset.x, minX);            maxX = Math.max(offset.x + size.x, maxX);            minY = Math.min(offset.y, minY);            maxY = Math.max(offset.y + size.y, maxY);          } else            this.showError("Animation bounds are invalid: " + animation.name);        }        viewport.x = minX;        viewport.y = minY;        viewport.width = maxX - minX;        viewport.height = maxY - minY;      }      drawFrame(requestNextFrame = true) {        try {          if (this.error)            return;          if (this.disposed)            return;          if (requestNextFrame && !this.stopRequestAnimationFrame)            requestAnimationFrame(() => this.drawFrame());          let doc = document;          let isFullscreen = doc.fullscreenElement || doc.webkitFullscreenElement || doc.mozFullScreenElement || doc.msFullscreenElement;          let bg = isFullscreen ? this.bgFullscreen : this.bg;          this.time.update();          let delta = this.time.delta;          let loading = this.assetManager.isLoadingComplete();          if (!this.skeleton && loading)            this.loadSkeleton();          let skeleton = this.skeleton;          let config = this.config;          if (skeleton) {            let renderer = this.sceneRenderer;            renderer.resize(ResizeMode.Expand);            let playDelta = this.paused ? 0 : delta * this.speed;            if (config.frame)              config.frame(this, playDelta);            if (!this.paused) {              this.animationState.update(playDelta);              this.animationState.apply(skeleton);              skeleton.updateWorldTransform();              if (config.showControls) {                this.playTime += playDelta;                let entry = this.animationState.getCurrent(0);                if (entry) {                  let duration = entry.animation.duration;                  while (this.playTime >= duration && duration != 0)                    this.playTime -= duration;                  this.playTime = Math.max(0, Math.min(this.playTime, duration));                  this.timelineSlider.setValue(this.playTime / duration);                }              }            }            let viewport = this.viewport;            viewport.x = this.currentViewport.x - this.currentViewport.padLeft, viewport.y = this.currentViewport.y - this.currentViewport.padBottom, viewport.width = this.currentViewport.width + this.currentViewport.padLeft + this.currentViewport.padRight, viewport.height = this.currentViewport.height + this.currentViewport.padBottom + this.currentViewport.padTop;            if (this.previousViewport) {              let transitionAlpha = (performance.now() - this.viewportTransitionStart) / 1e3 / config.viewport.transitionTime;              if (transitionAlpha < 1) {                let x = this.previousViewport.x - this.previousViewport.padLeft;                let y = this.previousViewport.y - this.previousViewport.padBottom;                let width = this.previousViewport.width + this.previousViewport.padLeft + this.previousViewport.padRight;                let height = this.previousViewport.height + this.previousViewport.padBottom + this.previousViewport.padTop;                viewport.x = x + (viewport.x - x) * transitionAlpha;                viewport.y = y + (viewport.y - y) * transitionAlpha;                viewport.width = width + (viewport.width - width) * transitionAlpha;                viewport.height = height + (viewport.height - height) * transitionAlpha;              }            }            renderer.camera.zoom = this.canvas.height / this.canvas.width > viewport.height / viewport.width ? viewport.width / this.canvas.width : viewport.height / this.canvas.height;            renderer.camera.position.x = viewport.x + viewport.width / 2;            renderer.camera.position.y = viewport.y + viewport.height / 2;            let gl = this.context.gl;            gl.clearColor(bg.r, bg.g, bg.b, bg.a);            gl.clear(gl.COLOR_BUFFER_BIT);            if (config.update)              config.update(this, playDelta);            renderer.begin();            let bgImage = config.backgroundImage;            if (bgImage) {              let texture = this.assetManager.require(bgImage.url);              if (bgImage.x !== void 0 && bgImage.y !== void 0 && bgImage.width && bgImage.height)                renderer.drawTexture(texture, bgImage.x, bgImage.y, bgImage.width, bgImage.height);              else                renderer.drawTexture(texture, viewport.x, viewport.y, viewport.width, viewport.height);            }            renderer.drawSkeleton(skeleton, config.premultipliedAlpha);            if ((renderer.skeletonDebugRenderer.drawBones = config.debug.bones) || (renderer.skeletonDebugRenderer.drawBoundingBoxes = config.debug.bounds) || (renderer.skeletonDebugRenderer.drawClipping = config.debug.clipping) || (renderer.skeletonDebugRenderer.drawMeshHull = config.debug.hulls) || (renderer.skeletonDebugRenderer.drawPaths = config.debug.paths) || (renderer.skeletonDebugRenderer.drawRegionAttachments = config.debug.regions) || (renderer.skeletonDebugRenderer.drawMeshTriangles = config.debug.meshes)) {              renderer.drawSkeletonDebug(skeleton, config.premultipliedAlpha);            }            let controlBones = config.controlBones;            if (controlBones.length) {              let selectedBones = this.selectedBones;              gl.lineWidth(2);              for (let i = 0; i < controlBones.length; i++) {                let bone = skeleton.findBone(controlBones[i]);                if (!bone)                  continue;                let colorInner = selectedBones[i] ? BONE_INNER_OVER : BONE_INNER;                let colorOuter = selectedBones[i] ? BONE_OUTER_OVER : BONE_OUTER;                renderer.circle(true, skeleton.x + bone.worldX, skeleton.y + bone.worldY, 20, colorInner);                renderer.circle(false, skeleton.x + bone.worldX, skeleton.y + bone.worldY, 20, colorOuter);              }            }            if (config.viewport.debugRender) {              gl.lineWidth(1);              renderer.rect(false, this.currentViewport.x, this.currentViewport.y, this.currentViewport.width, this.currentViewport.height, Color.GREEN);              renderer.rect(false, viewport.x, viewport.y, viewport.width, viewport.height, Color.RED);            }            renderer.end();            if (config.draw)              config.draw(this, playDelta);          }          if (config.showLoading) {            this.loadingScreen.backgroundColor.setFromColor(bg);            this.loadingScreen.draw(loading);          }          if (loading && config.loading)            config.loading(this, delta);        } catch (e) {          this.showError(`Error: Unable to render skeleton.  ${e.message}`, e);        }      }      stopRendering() {        this.stopRequestAnimationFrame = true;      }      hidePopup(id) {        return this.popup && this.popup.hide(id);      }      showSpeedDialog(speedButton) {        let id = "speed";        if (this.hidePopup(id))          return;        let popup = new Popup(id, speedButton, this, this.playerControls, `  <div class="spine-player-popup-title">Speed</div>  <hr>  <div class="spine-player-row" style="align-items:center;padding:8px">  <div class="spine-player-column">      <div class="spine-player-speed-slider" style="margin-bottom:4px"></div>      <div class="spine-player-row" style="justify-content:space-between"><div>0.1x</div><div>1x</div><div>2x</div></div>  </div>  </div>`);        let slider = new Slider(2, 0.1, true);        findWithClass(popup.dom, "spine-player-speed-slider").appendChild(slider.create());        slider.setValue(this.speed / 2);        slider.change = (percentage) => this.speed = percentage * 2;        popup.show();      }      showAnimationsDialog(animationsButton) {        let id = "animations";        if (this.hidePopup(id))          return;        if (!this.skeleton || !this.skeleton.data.animations.length)          return;        let popup = new Popup(id, animationsButton, this, this.playerControls, `<div class="spine-player-popup-title">Animations</div><hr><ul class="spine-player-list"></ul>`);        let rows = findWithClass(popup.dom, "spine-player-list");        this.skeleton.data.animations.forEach((animation) => {          if (this.config.animations && this.config.animations.indexOf(animation.name) < 0)            return;          let row = createElement(`<li class="spine-player-list-item selectable"><div class="selectable-circle"></div><div class="selectable-text"></div></li>`);          if (animation.name == this.config.animation)            row.classList.add("selected");          findWithClass(row, "selectable-text").innerText = animation.name;          rows.appendChild(row);          row.onclick = () => {            removeClass(rows.children, "selected");            row.classList.add("selected");            this.config.animation = animation.name;            this.playTime = 0;            this.setAnimation(animation.name);            this.play();          };        });        popup.show();      }      showSkinsDialog(skinButton) {        let id = "skins";        if (this.hidePopup(id))          return;        if (!this.skeleton || !this.skeleton.data.animations.length)          return;        let popup = new Popup(id, skinButton, this, this.playerControls, `<div class="spine-player-popup-title">Skins</div><hr><ul class="spine-player-list"></ul>`);        let rows = findWithClass(popup.dom, "spine-player-list");        this.skeleton.data.skins.forEach((skin) => {          if (this.config.skins && this.config.skins.indexOf(skin.name) < 0)            return;          let row = createElement(`<li class="spine-player-list-item selectable"><div class="selectable-circle"></div><div class="selectable-text"></div></li>`);          if (skin.name == this.config.skin)            row.classList.add("selected");          findWithClass(row, "selectable-text").innerText = skin.name;          rows.appendChild(row);          row.onclick = () => {            removeClass(rows.children, "selected");            row.classList.add("selected");            this.config.skin = skin.name;            this.skeleton.setSkinByName(this.config.skin);            this.skeleton.setSlotsToSetupPose();          };        });        popup.show();      }      showSettingsDialog(settingsButton) {        let id = "settings";        if (this.hidePopup(id))          return;        if (!this.skeleton || !this.skeleton.data.animations.length)          return;        let popup = new Popup(id, settingsButton, this, this.playerControls, `<div class="spine-player-popup-title">Debug</div><hr><ul class="spine-player-list"></li>`);        let rows = findWithClass(popup.dom, "spine-player-list");        let makeItem = (label, name) => {          let row = createElement(`<li class="spine-player-list-item"></li>`);          let s = new Switch(label);          row.appendChild(s.create());          let debug = this.config.debug;          s.setEnabled(debug[name]);          s.change = (value) => debug[name] = value;          rows.appendChild(row);        };        makeItem("Bones", "bones");        makeItem("Regions", "regions");        makeItem("Meshes", "meshes");        makeItem("Bounds", "bounds");        makeItem("Paths", "paths");        makeItem("Clipping", "clipping");        makeItem("Points", "points");        makeItem("Hulls", "hulls");        popup.show();      }      showError(message, error = null) {        if (this.error) {          if (error)            throw error;        } else {          this.error = true;          this.dom.appendChild(createElement(`<div class="spine-player-error" style="background:#000;color:#fff;position:absolute;top:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;overflow:auto;z-index:999">` + message.replace("\n", "<br><br>") + `</div>`));          if (this.config.error)            this.config.error(this, message);          throw error ? error : new Error(message);        }      }    };    var Popup = class {      constructor(id, button, player, parent, htmlContent) {        this.id = id;        this.button = button;        this.player = player;        this.dom = createElement(`<div class="spine-player-popup spine-player-hidden"></div>`);        this.dom.innerHTML = htmlContent;        parent.appendChild(this.dom);        this.className = "spine-player-button-icon-" + id + "-selected";      }      dispose() {      }      hide(id) {        this.dom.remove();        this.button.classList.remove(this.className);        if (this.id == id) {          this.player.popup = null;          return true;        }      }      show() {        this.player.popup = this;        this.button.classList.add(this.className);        this.dom.classList.remove("spine-player-hidden");        let dismissed = false;        let resize = () => {          if (!dismissed)            requestAnimationFrame(resize);          let playerDom = this.player.dom;          let bottomOffset = Math.abs(playerDom.getBoundingClientRect().bottom - playerDom.getBoundingClientRect().bottom);          let rightOffset = Math.abs(playerDom.getBoundingClientRect().right - playerDom.getBoundingClientRect().right);          this.dom.style.maxHeight = playerDom.clientHeight - bottomOffset - rightOffset + "px";        };        requestAnimationFrame(resize);        let justClicked = true;        let windowClickListener = (event) => {          if (justClicked || this.player.popup != this) {            justClicked = false;            return;          }          if (!this.dom.contains(event.target)) {            this.dom.remove();            window.removeEventListener("click", windowClickListener);            this.button.classList.remove(this.className);            this.player.popup = null;            dismissed = true;          }        };        this.player.addEventListener(window, "click", windowClickListener);      }    };    var Switch = class {      constructor(text) {        this.text = text;        this.enabled = false;      }      create() {        this.switch = createElement(`  <div class="spine-player-switch">      <span class="spine-player-switch-text">${this.text}</span>      <div class="spine-player-switch-knob-area">          <div class="spine-player-switch-knob"></div>      </div>  </div>`);        this.switch.addEventListener("click", () => {          this.setEnabled(!this.enabled);          if (this.change)            this.change(this.enabled);        });        return this.switch;      }      setEnabled(enabled) {        if (enabled)          this.switch.classList.add("active");        else          this.switch.classList.remove("active");        this.enabled = enabled;      }      isEnabled() {        return this.enabled;      }    };    var Slider = class {      constructor(snaps = 0, snapPercentage = 0.1, big = false) {        this.snaps = snaps;        this.snapPercentage = snapPercentage;        this.big = big;      }      create() {        this.slider = createElement(`  <div class="spine-player-slider ${this.big ? "big" : ""}">      <div class="spine-player-slider-value"></div>      <!--<div class="spine-player-slider-knob"></div>-->  </div>`);        this.value = findWithClass(this.slider, "spine-player-slider-value");        this.setValue(0);        let dragging = false;        new Input(this.slider).addListener({          down: (x, y) => {            dragging = true;            this.value.classList.add("hovering");          },          up: (x, y) => {            dragging = false;            if (this.change)              this.change(this.setValue(x / this.slider.clientWidth));            this.value.classList.remove("hovering");          },          moved: (x, y) => {            if (dragging && this.change)              this.change(this.setValue(x / this.slider.clientWidth));          },          dragged: (x, y) => {            if (this.change)              this.change(this.setValue(x / this.slider.clientWidth));          }        });        return this.slider;      }      setValue(percentage) {        percentage = Math.max(0, Math.min(1, percentage));        if (this.snaps) {          let snap = 1 / this.snaps;          let modulo = percentage % snap;          if (modulo < snap * this.snapPercentage)            percentage = percentage - modulo;          else if (modulo > snap - snap * this.snapPercentage)            percentage = percentage - modulo + snap;          percentage = Math.max(0, Math.min(1, percentage));        }        this.value.style.width = "" + percentage * 100 + "%";        return percentage;      }    };    function findWithClass(element, className) {      return element.getElementsByClassName(className)[0];    }    function createElement(html) {      let div = document.createElement("div");      div.innerHTML = html;      return div.children[0];    }    function removeClass(elements, clazz) {      for (let i = 0; i < elements.length; i++)        elements[i].classList.remove(clazz);    }    function toString(object) {      return JSON.stringify(object).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&#34;").replace(/'/g, "&#39;");    }    var BONE_INNER_OVER = new Color(0.478, 0, 0, 0.25);    var BONE_OUTER_OVER = new Color(1, 1, 1, 1);    var BONE_INNER = new Color(0.478, 0, 0, 0.5);    var BONE_OUTER = new Color(1, 0, 0, 0.8);      // spine-player/src/PlayerEditor.ts    var _SpinePlayerEditor = class {      constructor(parent) {        this.prefix = `<html>  <head>  <style>  body { margin: 0px; }  </style>  </head>  <body>`.trim();        this.postfix = `</body>`;        this.timerId = 0;        this.render(parent);      }      render(parent) {        let dom = `                  <div class="spine-player-editor-container">                      <div class="spine-player-editor-code"></div>                      <iframe class="spine-player-editor-player"></iframe>                  </div>              `;        parent.innerHTML = dom;        let codeElement = parent.getElementsByClassName("spine-player-editor-code")[0];        this.player = parent.getElementsByClassName("spine-player-editor-player")[0];        requestAnimationFrame(() => {          this.code = CodeMirror(codeElement, {            lineNumbers: true,            tabSize: 3,            indentUnit: 3,            indentWithTabs: true,            scrollBarStyle: "native",            mode: "htmlmixed",            theme: "monokai"          });          this.code.on("change", () => {            this.startPlayer();          });          this.setCode(_SpinePlayerEditor.DEFAULT_CODE);        });      }      setPreAndPostfix(prefix, postfix) {        this.prefix = prefix;        this.postfix = postfix;        this.startPlayer();      }      setCode(code) {        this.code.setValue(code);        this.startPlayer();      }      startPlayer() {        clearTimeout(this.timerId);        this.timerId = setTimeout(() => {          let code = this.code.getDoc().getValue();          code = this.prefix + code + this.postfix;          code = window.btoa(code);          this.player.src = "";          this.player.src = "data:text/html;base64," + code;        }, 500);      }    };    var SpinePlayerEditor = _SpinePlayerEditor;    SpinePlayerEditor.DEFAULT_CODE = `  <script src="https://esotericsoftware.com/files/spine-player/4.0/spine-player.js"><\/script>  <link rel="stylesheet" href="https://esotericsoftware.com/files/spine-player/4.0/spine-player.css">    <div id="player-container" style="width: 100%; height: 100vh;"></div>    <script>  new spine.SpinePlayer("player-container", {      jsonUrl: "https://esotericsoftware.com/files/examples/4.0/spineboy/export/spineboy-pro.json",      atlasUrl: "https://esotericsoftware.com/files/examples/4.0/spineboy/export/spineboy-pma.atlas"  });  <\/script>          `.trim();    return src_exports;  })();  //# sourceMappingURL=spine-player.js.map]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/test.js"/>
      <url>/js/test.js</url>
      
        <content type="html"><![CDATA[mp8zp8.webp,x65e23.webp,1kd8p9.webp,6o9e56.webp,3z1dg9.webp,57p6e8.webp,l3pdyy.webp,6oek9w.webp,g76xee.webp,287r5y.webp,8o6rzk.webp,q21wp7.webp,jx88k5.webp,gpjj97.webp,l8qqkq.webp,5glvk5.webp,6og386.webp,7p6619.webp,7p66we.webp,968k58.webp,m9r7r1.webp,m3d119.webp,57x9l9.webp,rdkd3q.webp,57od15.webp,yx76gg.webp,m3ppwy.webp]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>友情链接</title>
      <link href="/link/index.html"/>
      <url>/link/index.html</url>
      
        <content type="html"><![CDATA[<div class="addBtn"><button onclick="roydon.linkCom()"><i class="fa-solid fa-circle-plus"></i>快速申请 (默认样式)</button> <button onclick="roydon.linkCom(&quot;bf&quot;)"><i class="fa-solid fa-circle-plus"></i>快速申请 (Butterfly)</button></div><p><h2>🔢友链排序规则</h2></p><div class="flink-desc">友链根据博文数降序展示。</div><div class="table-container"><table><thead><tr><th style="text-align:center">博文数</th><th style="text-align:center">等级</th><th style="text-align:center">预览</th></tr></thead><tbody><tr><td style="text-align:center"><code>认证</code></td><td style="text-align:center">lvp</td><td style="text-align:center"><i class="link-level iconbrand icon-vrenz"></i></td></tr><tr><td style="text-align:center"><code>100+</code></td><td style="text-align:center">lv10</td><td style="text-align:center"><i class="link-level iconbrand icon-lv10"></i></td></tr><tr><td style="text-align:center"><strong>90+</strong></td><td style="text-align:center">lv9</td><td style="text-align:center"><i class="link-level iconbrand icon-lv9"></i></td></tr><tr><td style="text-align:center"><strong>80+</strong></td><td style="text-align:center">lv8</td><td style="text-align:center"><i class="link-level iconbrand icon-lv8"></i></td></tr><tr><td style="text-align:center"><strong>70+</strong></td><td style="text-align:center">lv7</td><td style="text-align:center"><i class="link-level iconbrand icon-lv7"></i></td></tr><tr><td style="text-align:center"><strong>60+</strong></td><td style="text-align:center">lv6</td><td style="text-align:center"><i class="link-level iconbrand icon-lv6"></i></td></tr><tr><td style="text-align:center"><strong>50+</strong></td><td style="text-align:center">lv5</td><td style="text-align:center"><i class="link-level iconbrand icon-lv5"></i></td></tr><tr><td style="text-align:center"><strong>40+</strong></td><td style="text-align:center">lv4</td><td style="text-align:center"><i class="link-level iconbrand icon-lv4"></i></td></tr><tr><td style="text-align:center"><strong>30+</strong></td><td style="text-align:center">lv3</td><td style="text-align:center"><i class="link-level iconbrand icon-lv3"></i></td></tr><tr><td style="text-align:center"><strong>20+</strong></td><td style="text-align:center">lv2</td><td style="text-align:center"><i class="link-level iconbrand icon-lv2"></i></td></tr><tr><td style="text-align:center"><strong>10+</strong></td><td style="text-align:center">lv1</td><td style="text-align:center"><i class="link-level iconbrand icon-lv1"></i></td></tr><tr><td style="text-align:center"><strong>0+</strong></td><td style="text-align:center">lv0</td><td style="text-align:center"><i class="link-level iconbrand icon-lv0"></i></td></tr></tbody></table></div><p><h2>🐉我的友链关键字</h2></p><p><div class="flink-desc">复制即可添加⬇️⬇️。</div><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">- name: roydon</span><br><span class="line">  link: https:<span class="comment">//www.roydon.top</span></span><br><span class="line">  avatar: https:<span class="comment">//gcore.jsdelivr.net/gh/roydonGuo/CDN/avatar/ganyu.webp</span></span><br><span class="line">  descr: 人要走多少路才能在时光的尽头找寻到真正的自己</span><br><span class="line">  theme_color: pink</span><br><span class="line">  siteshot: https:<span class="comment">//bu.dusays.com/2023/01/04/63b5663b9c22e.png</span></span><br></pre></td></tr></table></figure></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>log</title>
      <link href="/log/index.html"/>
      <url>/log/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>电影</title>
      <link href="/movies/index.html"/>
      <url>/movies/index.html</url>
      
        <content type="html"><![CDATA[<!-- <script src='//player.polyv.net/script/player.js'></script><div id='plv_19e11a1d968a647fb6cc921805131113_1'></div><script >var player = polyvPlayer({  'wrap':'#plv_19e11a1d968a647fb6cc921805131113_1',  'width':'100%',  'height':'600',  'vid': '19e11a1d968a647fb6cc921805131113_1',  'playsafe': '' // 播放加密视频的凭证, 取值参考文档: https://help.polyv.net/index.html#/vod/api/playsafe/token/create_token });</script> --><!-- <div align="center"><img src="https://gcore.jsdelivr.net/gh/roydonGuo/roydonGuo/assets/github-contribution-grid-snake.svg"/></div>视频存放地址：[酷播云](http://v.cuplayer.com/secure/main) -->]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>音乐</title>
      <link href="/music/index.html"/>
      <url>/music/index.html</url>
      
        <content type="html"><![CDATA[<p><strong>建设中~</strong></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/shenhe/shenhe.json"/>
      <url>/shenhe/shenhe.json</url>
      
        <content type="html"><![CDATA[{"skeleton":{"hash":"pX4HqHJyfMo","spine":"4.0.33","x":-380.7,"y":-897.81,"width":1003.12,"height":1299.81},"bones":[{"name":"root"},{"name":"bone","parent":"root","rotation":-0.05,"x":225.83,"y":-1003.38,"scaleX":0.25,"scaleY":0.25},{"name":"shengti","parent":"bone","x":352.5,"y":3201.2},{"name":"shengti2","parent":"shengti","length":347.18,"rotation":74.72,"x":3.39,"y":7.02},{"name":"xiong01","parent":"shengti2","length":312.45,"rotation":7.37,"x":344.46,"y":-0.74},{"name":"shangyi01_yinying","parent":"xiong01","length":758.34,"rotation":29.42,"x":329.31,"y":0.59},{"name":"shangyi03","parent":"shangyi01_yinying","length":132.97,"rotation":-15.66,"x":759.58,"y":3.16},{"name":"脸","parent":"shangyi03","x":132.96,"y":-0.01},{"name":"r_zui","parent":"脸","x":33.57,"y":23.77},{"name":"bi","parent":"脸","x":101.37,"y":40.64},{"name":"l_yan","parent":"bi","x":89.19,"y":-154.57},{"name":"l_yan3","parent":"l_yan","x":7.66,"y":14.4},{"name":"fa02","parent":"脸","x":513.8,"y":-166.41},{"name":"yan","parent":"脸","x":203.07,"y":117.4},{"name":"yan3","parent":"yan","x":3.55,"y":4.79},{"name":"fa01","parent":"fa02","length":21.26,"rotation":-103.76,"x":14.79,"y":25.56},{"name":"fa03","parent":"fa01","length":44.45,"rotation":-82.09,"x":21.84,"y":0.08},{"name":"fa04","parent":"fa03","length":65.45,"rotation":-24.27,"x":42.7,"y":-0.58},{"name":"fa05","parent":"fa04","length":97.22,"rotation":-19.51,"x":65.45},{"name":"fa06","parent":"fa05","length":106.22,"rotation":-18.67,"x":97.22},{"name":"fa07","parent":"fa06","length":132.93,"rotation":-21.49,"x":102.57,"y":0.59},{"name":"fa10","parent":"fa02","length":62.12,"rotation":-91.4,"x":-13.92,"y":-5.34},{"name":"fa11","parent":"fa10","length":136.37,"rotation":-72.28,"x":61.32,"y":0.06},{"name":"fa12","parent":"fa11","length":152.82,"rotation":-22.18,"x":136.37},{"name":"fa13","parent":"fa12","length":137.56,"rotation":-15.26,"x":152.82},{"name":"fa14","parent":"fa13","length":110.22,"rotation":-23.47,"x":136.81,"y":-1.56},{"name":"fa15","parent":"fa14","length":80.67,"rotation":-2.77,"x":110.22},{"name":"fa16","parent":"fa15","length":93.61,"rotation":12.81,"x":80.67},{"name":"fa08","parent":"fa12","length":85.08,"rotation":-1.01,"x":68.87,"y":47.53},{"name":"fa09","parent":"fa08","length":135.57,"rotation":-12.04,"x":85.08},{"name":"fa010","parent":"fa09","length":117.66,"rotation":-32.22,"x":135.91,"y":-1.45},{"name":"fa011","parent":"fa010","length":97.68,"rotation":2.42,"x":117.66},{"name":"fa012","parent":"fa011","length":57.59,"rotation":11.61,"x":97.09,"y":-1.56},{"name":"r_datui","parent":"shengti","length":1380.88,"rotation":-75.51,"x":-329.19,"y":77.92},{"name":"r_xiaotui","parent":"r_datui","length":1136.17,"rotation":-57.89,"x":1375.41,"y":-3.22},{"name":"r_xiaotui2","parent":"r_xiaotui","length":580.35,"rotation":19.21,"x":1136.17},{"name":"l_tui","parent":"shengti","length":1406.02,"rotation":-93.92,"x":143.05,"y":-4.8},{"name":"l_mei","parent":"脸","x":278.96,"y":8.22},{"name":"honhua","parent":"shangyi01_yinying","length":258.18,"rotation":70.96,"x":727.97,"y":6.05},{"name":"r_gebo01","parent":"honhua","length":666.29,"rotation":69,"x":274.63,"y":30.04},{"name":"r_gebo03","parent":"r_gebo01","length":851.86,"rotation":-2.33,"x":635.27},{"name":"r_gebo04","parent":"r_gebo03","length":203.52,"rotation":-2.08,"x":849.56,"y":-2.06},{"name":"r_shouzhi03","parent":"r_gebo04","length":133.67,"rotation":26.8,"x":207.04,"y":-8.3},{"name":"r_shouzhi04","parent":"r_shouzhi03","length":56.13,"rotation":80.61,"x":133.67},{"name":"r_shouzhi05","parent":"r_shouzhi04","length":50.11,"rotation":57.83,"x":56.13},{"name":"r_shouzhi02","parent":"r_gebo04","length":139.53,"rotation":34.7,"x":214.05,"y":4.09},{"name":"r_shouzhi06","parent":"r_shouzhi02","length":59.73,"rotation":90.61,"x":140.12,"y":2.79},{"name":"r_shouzhi07","parent":"r_shouzhi06","length":49.99,"rotation":72.72,"x":59.73},{"name":"r_gebo05","parent":"r_gebo04","length":122.6,"rotation":39.75,"x":34.44,"y":28.89},{"name":"r_gebo06","parent":"r_gebo05","length":114.92,"rotation":-12.74,"x":122.6},{"name":"r_gebo07","parent":"r_gebo06","length":66.02,"rotation":-22.15,"x":114.92},{"name":"shangyi01_yinying2","parent":"shangyi01_yinying","length":278.62,"rotation":-119.44,"x":724.16,"y":-2.72},{"name":"l_gebo01","parent":"shangyi01_yinying2","length":742.86,"rotation":-51.58,"x":275.8,"y":-0.39},{"name":"l_shou07","parent":"l_gebo01","length":541.68,"rotation":154.3,"x":746.12,"y":1.81},{"name":"l_shou04","parent":"l_shou07","length":186.52,"rotation":11.58,"x":546.37,"y":0.76},{"name":"l_shou05","parent":"l_shou04","length":64.37,"rotation":54.82,"x":56.37,"y":37.69},{"name":"l_shou06","parent":"l_shou05","length":68.78,"rotation":-40.13,"x":64.37},{"name":"l_shou08","parent":"l_shou06","length":87.41,"rotation":-25.79,"x":67.18,"y":2.53},{"name":"l_shou09","parent":"l_shou04","length":30.99,"rotation":2.06,"x":153.04,"y":-56.83},{"name":"l_shou010","parent":"l_shou09","length":68.15,"rotation":63.3,"x":30.99},{"name":"l_shou011","parent":"l_shou010","length":47.43,"rotation":72.33,"x":68.15},{"name":"l_shou012","parent":"l_shou011","length":44.6,"rotation":40.16,"x":47.43},{"name":"l_shou013","parent":"l_shou04","length":86.41,"rotation":85.21,"x":225.54,"y":-35.74,"shearX":-1.2},{"name":"l_shou014","parent":"l_shou013","length":62.36,"rotation":83.11,"x":86.86,"y":0.27},{"name":"l_shou015","parent":"l_shou014","length":53.25,"rotation":17.72,"x":62.36},{"name":"l_shou017","parent":"l_shou04","length":107.22,"rotation":7.17,"x":188.28,"y":-12.79},{"name":"l_shou018","parent":"l_shou017","length":63.5,"rotation":1.54,"x":107.22},{"name":"l_shou019","parent":"l_shou018","length":76.54,"rotation":-8.68,"x":63.5},{"name":"l_shou020","parent":"l_shou04","length":95.34,"rotation":8.53,"x":187.73,"y":12.28},{"name":"l_shou021","parent":"l_shou020","length":64.37,"rotation":-0.62,"x":95.34},{"name":"l_shou022","parent":"l_shou021","length":70.43,"rotation":-9.03,"x":68.18,"y":-1.23},{"name":"wuqi01_baixian","parent":"r_gebo04","length":3017.34,"rotation":-14.88,"x":173.69,"y":93.02},{"name":"r_gebo02","parent":"r_gebo01","length":139.23,"rotation":-30.69,"x":477.4,"y":-74.31},{"name":"r_gebo08","parent":"r_gebo02","length":162.17,"rotation":-26.91,"x":143.11,"y":0.06},{"name":"r_gebo09","parent":"r_gebo08","length":194.62,"rotation":-5.67,"x":162.17},{"name":"r_gebo010","parent":"r_gebo09","length":241.28,"rotation":4.66,"x":194.62},{"name":"r_gebo011","parent":"r_gebo010","length":306.24,"rotation":17.27,"x":241.28},{"name":"r_gebo012","parent":"r_gebo01","length":213.68,"rotation":-24.29,"x":518.05,"y":-26.18},{"name":"r_gebo013","parent":"r_gebo012","length":262.77,"rotation":-13.64,"x":213.68},{"name":"r_gebo014","parent":"r_gebo013","length":256.58,"rotation":-2.15,"x":262.77},{"name":"r_gebo015","parent":"r_gebo014","length":270.02,"rotation":-0.02,"x":256.58},{"name":"r_gebo016","parent":"r_gebo015","length":312.57,"rotation":-2.74,"x":270.02},{"name":"r_gebo017","parent":"r_gebo016","length":322.36,"rotation":-12.02,"x":312.57},{"name":"r_gebo018","parent":"r_gebo017","length":311.5,"rotation":-14.08,"x":322.36},{"name":"r_gebo019","parent":"r_gebo018","length":249.13,"rotation":-4.67,"x":311.5},{"name":"r_gebo020","parent":"r_gebo01","length":180.57,"rotation":21.35,"x":563.72,"y":110.23},{"name":"r_gebo021","parent":"r_gebo020","length":182.35,"rotation":-5.64,"x":180.57},{"name":"r_gebo022","parent":"r_gebo021","length":164.63,"rotation":-21.53,"x":182.35},{"name":"r_gebo023","parent":"r_gebo022","length":194.51,"rotation":-19.17,"x":168.46,"y":-4.14},{"name":"r_gebo026","parent":"r_gebo01","length":195.07,"rotation":-27.9,"x":532.38,"y":-57.13},{"name":"r_gebo027","parent":"r_gebo026","length":239.89,"rotation":-13.94,"x":195.07},{"name":"r_gebo028","parent":"r_gebo027","length":270.09,"rotation":-12.46,"x":239.89},{"name":"r_gebo029","parent":"r_gebo028","length":252.16,"rotation":-4.17,"x":270.09},{"name":"xiu03","parent":"r_gebo029","length":334.97,"rotation":-17.98,"x":241.68,"y":-14.33},{"name":"xiu04","parent":"xiu03","length":270.72,"rotation":-20.42,"x":337.03,"y":0.18},{"name":"xiu05","parent":"r_gebo029","length":363.03,"rotation":-6.46,"x":239.36,"y":3.23},{"name":"xiu06","parent":"xiu05","length":378.6,"rotation":-19.53,"x":390.98,"y":7.22},{"name":"l_gebo02","parent":"l_gebo01","length":436.61,"rotation":-36.5,"x":783.74,"y":99.65},{"name":"l_gebo03","parent":"l_gebo02","length":389.99,"rotation":-6.4,"x":436.61},{"name":"l_gebo04","parent":"l_gebo03","length":393.72,"rotation":-12.17,"x":389.99},{"name":"l_gebo05","parent":"l_gebo04","length":394.54,"rotation":-25.12,"x":393.72},{"name":"l_gebo06","parent":"l_gebo05","length":395.9,"rotation":-10.28,"x":394.54},{"name":"l_gebo07","parent":"l_gebo06","length":397.6,"rotation":-6.89,"x":395.9},{"name":"houbai","parent":"l_gebo03","length":285.43,"rotation":-25.55,"x":502.99,"y":-194.76},{"name":"houbai2","parent":"houbai","length":360.5,"rotation":-21.07,"x":285.43},{"name":"houbai3","parent":"houbai2","length":322.21,"rotation":-13.09,"x":360.5},{"name":"houbai01","parent":"l_gebo01","length":298.06,"rotation":-50.78,"x":471.84,"y":-57.71},{"name":"houbai02","parent":"houbai01","length":317.01,"rotation":-6.87,"x":303.28,"y":6.31},{"name":"houbai03","parent":"houbai02","length":382.58,"rotation":-7.84,"x":317.01},{"name":"houbai04","parent":"houbai03","length":437.35,"rotation":-1.94,"x":382.58},{"name":"houbai05","parent":"houbai04","length":353.41,"rotation":-9.41,"x":437.58,"y":-5.39},{"name":"houbai06","parent":"houbai05","length":385.19,"rotation":-18.81,"x":353.41},{"name":"houbai07","parent":"houbai06","length":375.41,"rotation":-7.04,"x":385.19},{"name":"houbai08","parent":"houbai06","length":236.31,"rotation":-6.07,"x":122.46,"y":-61.69},{"name":"houbai09","parent":"houbai08","length":279.37,"rotation":-35.55,"x":241.83,"y":-0.14},{"name":"fa014","parent":"fa02","length":103.64,"rotation":177.58,"x":5.92,"y":22.97},{"name":"fa015","parent":"fa014","length":107.02,"rotation":-20.29,"x":103.64},{"name":"fa016","parent":"fa015","length":99.85,"rotation":-17.16,"x":107.02},{"name":"fa017","parent":"fa016","length":79.22,"rotation":-15.22,"x":99.85},{"name":"fa018","parent":"fa017","length":83.17,"rotation":-18.1,"x":78.23,"y":0.13},{"name":"fa019","parent":"fa018","length":64.15,"rotation":-24.93,"x":83.17},{"name":"fa020","parent":"fa019","length":55.21,"rotation":-32.16,"x":65.09,"y":-2.49},{"name":"fa013","parent":"fa02","length":64.72,"rotation":122.08,"x":19.7,"y":14.51},{"name":"fa021","parent":"fa013","length":93.35,"rotation":24.27,"x":63.67,"y":-0.13},{"name":"fa022","parent":"fa021","length":87.83,"rotation":5.18,"x":93.35},{"name":"fa023","parent":"fa022","length":88.84,"rotation":-18.61,"x":87.83},{"name":"fa024","parent":"fa023","length":73.57,"rotation":-12.48,"x":88.84},{"name":"fa025","parent":"fa024","length":72.59,"rotation":-25.56,"x":73.57},{"name":"fa026","parent":"fa025","length":62.67,"rotation":-29.87,"x":72.59},{"name":"fa028","parent":"fa02","length":67.82,"rotation":49.86,"x":28.45,"y":15.68},{"name":"fa029","parent":"fa028","length":106.23,"rotation":71.98,"x":67.82},{"name":"fa030","parent":"fa029","length":173.21,"rotation":20.84,"x":106.23},{"name":"fa031","parent":"fa030","length":168.29,"rotation":-8,"x":173.21},{"name":"fa032","parent":"fa031","length":156.44,"rotation":-19.92,"x":167.06,"y":1.18},{"name":"fa033","parent":"fa032","length":114.93,"rotation":-4.68,"x":156.44},{"name":"fa034","parent":"fa033","length":81.42,"rotation":37.8,"x":114.93},{"name":"fa035","parent":"fa034","length":64.38,"rotation":35.59,"x":79.74,"y":3.4},{"name":"fa036","parent":"fa035","length":49.45,"rotation":23.15,"x":64.38},{"name":"fa037","parent":"fa032","length":59.18,"rotation":-29.08,"x":198.23,"y":-44.16},{"name":"fa038","parent":"fa037","length":47.03,"rotation":-24.22,"x":59.18},{"name":"fa039","parent":"fa038","length":35.85,"rotation":-27.66,"x":47.02},{"name":"fa027","parent":"fa02","length":118.66,"rotation":-2.71,"x":8.31,"y":-4.1},{"name":"fa040","parent":"fa027","length":126.45,"rotation":70.1,"x":119.88,"y":-1.37},{"name":"fa041","parent":"fa040","length":216.75,"rotation":55.42,"x":126.45},{"name":"fa042","parent":"fa041","length":224.85,"rotation":20.32,"x":216.75},{"name":"fa043","parent":"fa042","length":159.04,"rotation":-3.9,"x":224.55,"y":-1.84},{"name":"fa044","parent":"fa043","length":141.87,"rotation":-2.67,"x":159.04},{"name":"er","parent":"脸","x":178.11,"y":179.03},{"name":"脸2","parent":"脸","x":146.18,"y":182.94},{"name":"erzhui","parent":"脸2","length":70.23,"rotation":154.96,"x":-1.9,"y":0.92},{"name":"erzhui2","parent":"erzhui","length":36.99,"rotation":3.76,"x":69.89,"y":-0.04},{"name":"erzhui3","parent":"erzhui2","length":42.49,"rotation":-4.45,"x":36.99},{"name":"erzhui4","parent":"erzhui3","length":59.83,"rotation":-8.66,"x":42.49},{"name":"1houfa01","parent":"fa02","length":311.59,"rotation":149.05,"x":-125.88,"y":37.44},{"name":"1houfa02","parent":"1houfa01","length":333.74,"rotation":-22.51,"x":310.08,"y":3.23},{"name":"1houfa03","parent":"1houfa02","length":266.59,"rotation":-23.23,"x":332.53,"y":-1.32},{"name":"1houfa04","parent":"1houfa03","length":267.28,"rotation":-13.8,"x":266.59},{"name":"1houfa05","parent":"1houfa04","length":409.13,"rotation":-12.58,"x":272.76,"y":5.39},{"name":"1houfa06","parent":"1houfa05","length":206.42,"rotation":-23.75,"x":412.13,"y":-0.92},{"name":"1houfa07","parent":"1houfa06","length":198.32,"rotation":-20.65,"x":206.42},{"name":"1houfa08","parent":"1houfa07","length":201.33,"rotation":-1.78,"x":194.7,"y":2.87},{"name":"houfa06","parent":"1houfa08","length":133.79,"rotation":30.19,"x":173.62,"y":38.19},{"name":"houfa07","parent":"houfa06","length":165.75,"rotation":-31.15,"x":133.79},{"name":"houfa08","parent":"houfa07","length":153.07,"rotation":-25.74,"x":165.75},{"name":"houfa09","parent":"houfa08","length":123.56,"rotation":-23.62,"x":153.07},{"name":"houfa010","parent":"1houfa08","length":138.73,"rotation":10.16,"x":157.61,"y":-0.31},{"name":"houfa011","parent":"houfa010","length":139.93,"rotation":-35.57,"x":138.73},{"name":"houfa012","parent":"houfa011","length":138.34,"rotation":-39.15,"x":139.33,"y":4.73},{"name":"houfa013","parent":"houfa012","length":132.63,"rotation":-42.78,"x":137.71,"y":-2.04},{"name":"houfa014","parent":"houfa013","length":86.83,"rotation":-27.25,"x":132.63},{"name":"houfa015","parent":"1houfa08","length":140.79,"rotation":22.06,"x":160.92,"y":12.93},{"name":"houfa016","parent":"houfa015","length":136.26,"rotation":-30.63,"x":140.79},{"name":"houfa017","parent":"houfa016","length":145.25,"rotation":-28.53,"x":136.26},{"name":"houfa018","parent":"houfa017","length":117.98,"rotation":-6.7,"x":145.67,"y":-5.43},{"name":"houfa019","parent":"houfa018","length":88.62,"rotation":33.75,"x":117.98},{"name":"houfa020","parent":"houfa019","length":68.51,"rotation":43.78,"x":88.62},{"name":"houfa021","parent":"houfa020","length":56.59,"rotation":13.11,"x":68.51},{"name":"houfa022","parent":"houfa018","length":58.27,"rotation":-9.62,"x":95.01,"y":-77.32},{"name":"houfa023","parent":"houfa022","length":59.02,"rotation":38.79,"x":58.27},{"name":"houfa024","parent":"houfa023","length":46.61,"rotation":42.6,"x":59.02},{"name":"houfa026","parent":"houfa010","length":90.21,"rotation":-56.86,"x":45,"y":-12.88},{"name":"houfa027","parent":"houfa026","length":95.76,"rotation":-17.12,"x":90.42,"y":-1.2},{"name":"houfa028","parent":"houfa027","length":98.24,"rotation":35.05,"x":95.76},{"name":"dianzhui","parent":"1houfa04","length":132.48,"rotation":-17.99,"x":181.24,"y":-70.68},{"name":"dianzhui2","parent":"dianzhui","length":138.02,"rotation":-19.52,"x":132.48},{"name":"dianzhui3","parent":"dianzhui2","length":89.32,"rotation":-15.67,"x":138.02},{"name":"2sheng02","parent":"1houfa03","x":319.27,"y":-188.08},{"name":"2sheng04","parent":"2sheng02","x":127.24,"y":35.97},{"name":"1houfa09","parent":"1houfa03","length":86.13,"rotation":-44.8,"x":385.11,"y":-160.7},{"name":"1houfa010","parent":"1houfa09","length":81.32,"rotation":-32.89,"x":86.13},{"name":"shengti3","parent":"shengti","x":1318.23,"y":-1377.14},{"name":"shengti8","parent":"shengti","x":1994.77,"y":-2213.82},{"name":"shangyi01_yinying13","parent":"shangyi01_yinying","rotation":-21.52,"x":346.09,"y":-99.5},{"name":"shangyi01_yinying3","parent":"shangyi01_yinying13","length":161.86,"rotation":150.99,"x":-37.5,"y":297.15},{"name":"shangyi01_yinying4","parent":"shangyi01_yinying3","length":133.48,"rotation":-8.79,"x":161.86},{"name":"shangyi01_yinying5","parent":"shangyi01_yinying4","length":87.51,"rotation":-4.41,"x":133.48},{"name":"baiyan","parent":"bone","x":1623.66,"y":2391.94},{"name":"baiyan2","parent":"baiyan","length":204.62,"rotation":126.87,"x":4.82,"y":5.26},{"name":"baiyan3","parent":"baiyan2","length":273.24,"rotation":-0.07,"x":210.91,"y":3.15},{"name":"baiyan4","parent":"baiyan3","length":292.65,"rotation":-6.79,"x":273.24},{"name":"baiyan5","parent":"baiyan4","length":130.95,"rotation":-133.21,"x":292.65},{"name":"baiyan6","parent":"baiyan5","length":212.21,"rotation":133,"x":130.59,"y":1.53},{"name":"baiyan7","parent":"baiyan6","length":248.39,"rotation":17.51,"x":212.21},{"name":"baiyan8","parent":"baiyan7","length":262.56,"rotation":4.99,"x":248.39},{"name":"baiyan9","parent":"baiyan8","length":215.63,"rotation":-2.27,"x":262.57},{"name":"baiyan10","parent":"baiyan9","length":140.3,"rotation":-3.22,"x":215.63},{"name":"fa046","parent":"fa02","length":206.6,"rotation":-153.24,"x":69.43,"y":-64.05},{"name":"fa047","parent":"1houfa01","length":336.9,"rotation":19.88,"x":-109.34,"y":161.26},{"name":"fa048","parent":"fa047","length":294.73,"rotation":-38.56,"x":336.9},{"name":"shangyi01_yinying6","parent":"shangyi01_yinying13","length":103.74,"rotation":-177.27,"x":-48.58,"y":-263.69},{"name":"shangyi01_yinying7","parent":"shangyi01_yinying6","length":84.78,"rotation":1.09,"x":103.74},{"name":"shangyi01_yinying8","parent":"shangyi01_yinying7","length":58.85,"rotation":0.53,"x":84.07,"y":0.05},{"name":"sui04_yinying","parent":"shangyi01_yinying5","length":40.63,"rotation":8.53,"x":88.7,"y":1.2},{"name":"sui04_yinying2","parent":"sui04_yinying","length":57.39,"rotation":-9.72,"x":36.25,"y":2.5},{"name":"sui04_yinying3","parent":"sui04_yinying2","length":67.96,"rotation":-6.3,"x":56.62,"y":0.82},{"name":"sui04_yinying4","parent":"sui04_yinying3","length":92.51,"rotation":-6.21,"x":67.96},{"name":"sui03_yinying","parent":"shangyi01_yinying8","length":37.25,"rotation":-18.02,"x":65.52,"y":-4.09},{"name":"sui03_yinying2","parent":"sui03_yinying","length":50.7,"rotation":-7.41,"x":36.23,"y":0.11},{"name":"sui03_yinying3","parent":"sui03_yinying2","length":59.5,"rotation":-2.04,"x":50.7},{"name":"sui03_yinying4","parent":"sui03_yinying3","length":76.73,"rotation":-3.82,"x":59.5},{"name":"sui02","parent":"shengti2","length":33.92,"rotation":-173.47,"x":80.59,"y":263.6},{"name":"sui03","parent":"sui02","length":57.55,"rotation":-5.79,"x":33.92},{"name":"sui04","parent":"sui03","length":52.42,"rotation":-9.26,"x":57.55},{"name":"sui05","parent":"sui04","length":54.47,"rotation":-13.51,"x":52.42},{"name":"shengti4","parent":"shengti2","length":28.47,"rotation":-154.86,"x":216.72,"y":-182.45},{"name":"shengti5","parent":"shengti4","length":52.45,"rotation":-11.2,"x":28.47},{"name":"shengti6","parent":"shengti5","length":56.21,"rotation":-13.76,"x":52.45},{"name":"shengti7","parent":"shengti6","length":52.6,"rotation":-19.52,"x":56.21},{"name":"shangyi01_yinying9","parent":"shangyi01_yinying13","length":94.08,"rotation":170.97,"x":-26.36,"y":150.88},{"name":"shangyi01_yinying10","parent":"shangyi01_yinying9","length":89.14,"rotation":-9.61,"x":93.2,"y":-1.21},{"name":"sheng02","parent":"shangyi01_yinying","x":732.34,"y":-123.64},{"name":"sheng01","parent":"shangyi01_yinying","x":830.85,"y":114.74},{"name":"honhua2","parent":"sheng01","x":-153.27,"y":57.46},{"name":"fa045","parent":"fa09","length":66.59,"rotation":-40.27,"x":164.27,"y":-48.04},{"name":"fa049","parent":"fa045","length":48.16,"rotation":-24.77,"x":66.59},{"name":"fa050","parent":"fa049","length":35.66,"rotation":-15.29,"x":48.16},{"name":"jin","parent":"fa042","x":110.57,"y":-111.64},{"name":"houbai010","parent":"houbai09","length":273.93,"rotation":-27.82,"x":283.75,"y":-0.53},{"name":"houbai011","parent":"houbai010","length":270.58,"rotation":-19.91,"x":273.93},{"name":"houbai012","parent":"houbai07","length":374.11,"rotation":-15.61,"x":381.64,"y":-14.28},{"name":"houbai013","parent":"houbai012","length":386.36,"rotation":-2.46,"x":374.11},{"name":"fa051","parent":"fa02","length":126.31,"rotation":33.31,"x":-4.45,"y":-3.35},{"name":"fa052","parent":"fa051","length":175.29,"rotation":77.44,"x":126.31},{"name":"fa053","parent":"fa052","length":218.55,"rotation":30.88,"x":175.29},{"name":"fa054","parent":"fa053","length":183.46,"rotation":-5.22,"x":218.55},{"name":"fa055","parent":"fa054","length":159.13,"rotation":6.8,"x":179,"y":1.45},{"name":"fa056","parent":"fa055","length":77.26,"rotation":41.58,"x":158.31,"y":-3.26},{"name":"fa057","parent":"fa056","length":59.57,"rotation":33.57,"x":77.26},{"name":"fa058","parent":"fa057","length":62.45,"rotation":-5.36,"x":58.72,"y":0.83},{"name":"l_gebo08","parent":"l_gebo01","length":221.19,"rotation":-39.54,"x":516.79,"y":-144.6},{"name":"l_gebo09","parent":"l_gebo08","length":166.92,"rotation":-7.16,"x":221.19},{"name":"1yu01","parent":"r_gebo01","length":165.11,"rotation":-29.87,"x":708.08,"y":-138.9},{"name":"1yu02","parent":"1yu01","length":151.19,"rotation":-18.23,"x":165.11},{"name":"1yu03","parent":"1yu02","length":100.62,"rotation":-23.33,"x":151.19},{"name":"1yu04","parent":"1yu03","length":96.08,"rotation":-14.59,"x":100.62},{"name":"xiong02","parent":"xiong01","rotation":8,"x":167.46,"y":25.86},{"name":"l_tui2","parent":"l_tui","length":1598.15,"rotation":-11.37,"x":1402.42,"y":0.52},{"name":"l_tui3","parent":"l_tui2","length":254.32,"rotation":20.22,"x":1603.16,"y":1.79},{"name":"target","parent":"bone","rotation":0.05,"x":-21.16,"y":255.62},{"name":"target2","parent":"bone","rotation":0.05,"x":1.14,"y":-5.37},{"name":"l_tui04","parent":"bone","length":190.67,"rotation":-77.81,"x":379.12,"y":2903.3},{"name":"target3","parent":"bone","rotation":0.05,"x":1337.24,"y":2064.49},{"name":"target4","parent":"bone","rotation":0.05,"x":1486.86,"y":1655.69},{"name":"shangyihou","parent":"shangyi01_yinying","x":704.54,"y":-80.19},{"name":"bone2","parent":"shangyihou","length":99.42,"rotation":134.69,"x":-232.44,"y":157.97,"scaleX":1.9369,"scaleY":1.9369},{"name":"bone3","parent":"bone2","length":114.87,"rotation":-23.39,"x":99.42},{"name":"bone4","parent":"bone3","length":76.68,"rotation":-12.51,"x":114.87},{"name":"shangyihou2","parent":"shangyihou","length":185.16,"rotation":177.34,"x":-314.29,"y":-12.43},{"name":"shangyihou3","parent":"shangyihou2","length":132.81,"rotation":10.81,"x":185.16},{"name":"shangyihou4","parent":"shangyihou3","length":100.87,"rotation":4.65,"x":132.81},{"name":"1houfa012","parent":"1houfa03","length":217.32,"rotation":-22.93,"x":16.38,"y":-212.53},{"name":"1houfa013","parent":"1houfa04","length":166.57,"rotation":9.31,"x":22.25,"y":-300.56},{"name":"1houfa014","parent":"1houfa04","length":97.38,"rotation":61.76,"x":186.77,"y":-272.72},{"name":"1houfa015","parent":"1houfa04","length":97.68,"rotation":99.56,"x":232.84,"y":-186.93},{"name":"1yu05","parent":"r_gebo01","length":83.38,"rotation":-42.49,"x":719.04,"y":-140.11},{"name":"1yu06","parent":"1yu05","length":85.78,"rotation":-5.97,"x":83.38},{"name":"1yu07","parent":"1yu06","length":102.77,"rotation":-16.74,"x":85.78},{"name":"1yu08","parent":"1yu07","length":104.84,"rotation":-22.89,"x":102.77},{"name":"1yu09","parent":"1yu08","length":85.52,"rotation":-18.95,"x":104.84},{"name":"yu01","parent":"l_gebo01","length":166.43,"rotation":117.85,"x":861.56,"y":111.76},{"name":"yu02","parent":"yu01","length":148.23,"rotation":-12.92,"x":166.43},{"name":"yu03","parent":"yu02","length":69.71,"rotation":-32.73,"x":148.23},{"name":"yu04","parent":"yu03","length":50.66,"rotation":-22.11,"x":69.71},{"name":"yu05","parent":"yu01","length":82.25,"rotation":-7.08,"x":60.93,"y":-9.15},{"name":"yu06","parent":"yu05","length":77.02,"rotation":-40.07,"x":82.25},{"name":"yu07","parent":"yu06","length":63.48,"rotation":-50.29,"x":77.02},{"name":"fa059","parent":"fa044","length":82.08,"rotation":14.92,"x":141.17,"y":0.27},{"name":"fa060","parent":"fa059","length":58.76,"rotation":30.32,"x":82.08},{"name":"r_gebo024","parent":"r_gebo011","length":250.09,"rotation":-2.13,"x":310.57,"y":-0.97},{"name":"r_gebo025","parent":"r_gebo024","length":192.78,"rotation":3.01,"x":250.09}],"slots":[{"name":"l_tui03","bone":"l_tui04","attachment":"l_tui03"},{"name":"baiyan","bone":"baiyan","attachment":"白烟"},{"name":"houbai02","bone":"bone","attachment":"houbai02"},{"name":"houbai01","bone":"houbai01","attachment":"houbai01"},{"name":"xiuzi","bone":"shengti4","attachment":"xiuzi"},{"name":"bone2","bone":"bone","attachment":"bone"},{"name":"houbai","bone":"houbai","attachment":"houbai"},{"name":"l_tui","bone":"r_datui","attachment":"l_tui"},{"name":"r_xiaotui","bone":"r_xiaotui","attachment":"r_xiaotui"},{"name":"yu02","bone":"yu05","attachment":"yu02"},{"name":"yu01","bone":"yu01","attachment":"yu01"},{"name":"l_gebo02_yinying","bone":"l_gebo01","attachment":"l_gebo02_yinying"},{"name":"shangyihou","bone":"shangyihou","attachment":"shangyihou"},{"name":"xiu03","bone":"bone","attachment":"xiu03"},{"name":"xiu02","bone":"xiu05","attachment":"xiu02"},{"name":"xiu01","bone":"bone","attachment":"xiu01"},{"name":"1yu02","bone":"1yu05","attachment":"1yu02"},{"name":"1yu01","bone":"1yu01","attachment":"1yu01"},{"name":"r_shouzhi03","bone":"r_shouzhi03","attachment":"r_shouzhi03"},{"name":"r_shouzhi02","bone":"r_shouzhi02","attachment":"r_shouzhi02"},{"name":"r_gebo02","bone":"r_gebo03","attachment":"r_gebo02"},{"name":"wuqi01_baixian2","bone":"wuqi01_baixian","attachment":"wuqi01_baixian"},{"name":"wuqi01_baixian","bone":"dianzhui"},{"name":"houfa09","bone":"houfa026","attachment":"houfa09"},{"name":"houfa08","bone":"houfa015","attachment":"houfa08"},{"name":"houfa07","bone":"houfa010","attachment":"houfa07"},{"name":"houfa06","bone":"houfa06","attachment":"houfa06"},{"name":"2sheng02","bone":"2sheng04","attachment":"2sheng02"},{"name":"2sheng01","bone":"dianzhui","attachment":"2sheng01"},{"name":"1houfa03","bone":"bone","attachment":"1houfa03"},{"name":"1houfa02","bone":"1houfa012","attachment":"1houfa02"},{"name":"1houfa01","bone":"1houfa01","attachment":"1houfa01"},{"name":"shangyi03","bone":"shangyi03","attachment":"shangyi03"},{"name":"fa09","bone":"fa046","attachment":"fa09"},{"name":"1bozi","bone":"shangyi03","attachment":"1bozi"},{"name":"r_shou01","bone":"bone","attachment":"r_shou01"},{"name":"l_gebo01","bone":"l_gebo01","attachment":"l_gebo01"},{"name":"shangyi02","bone":"bone","attachment":"shangyi02"},{"name":"shengti","bone":"shengti4","attachment":"shengti"},{"name":"bone","bone":"bone","attachment":"bone"},{"name":"r_datui","bone":"r_datui","attachment":"r_datui"},{"name":"r_gebo01","bone":"honhua","attachment":"r_gebo01"},{"name":"shangyi01_yinying","bone":"shangyi01_yinying","attachment":"shangyi01_yinying"},{"name":"sheng02","bone":"sheng02","attachment":"sheng02"},{"name":"sheng01","bone":"sheng01","attachment":"sheng01"},{"name":"honhua","bone":"honhua2","attachment":"honhua"},{"name":"er","bone":"er","attachment":"er"},{"name":"erzhui","bone":"erzhui","attachment":"erzhui"},{"name":"脸","bone":"脸","attachment":"脸"},{"name":"r_lian_yinying","bone":"fa02","attachment":"r_lian_yinying"},{"name":"r_zui","bone":"r_zui","attachment":"r_zui"},{"name":"yinying02","bone":"yan","attachment":"yinying02"},{"name":"yinying01","bone":"yan","attachment":"yinying01"},{"name":"yanzz","bone":"yan","attachment":"yanzz"},{"name":"yanbai","bone":"yan","attachment":"yanbai"},{"name":"yan","bone":"yan3","attachment":"yan"},{"name":"xiajiemao","bone":"yan","attachment":"xiajiemao"},{"name":"shangjiemao04","bone":"yan","attachment":"shangjiemao04"},{"name":"shangjiemao03","bone":"yan","attachment":"shangjiemao03"},{"name":"shangjiemao02","bone":"yan","attachment":"shangjiemao02"},{"name":"shangjiemao01","bone":"yan","attachment":"shangjiemao01"},{"name":"shuangyanpi","bone":"yan","attachment":"shuangyanpi"},{"name":"mei","bone":"l_mei","attachment":"mei"},{"name":"l_yinying02","bone":"l_yan","attachment":"l_yinying02"},{"name":"l_yinying01","bone":"l_yan","attachment":"l_yinying01"},{"name":"l_yanzz","bone":"l_yan","attachment":"l_yanzz"},{"name":"l_yanbai","bone":"l_yan","attachment":"l_yanbai"},{"name":"l_yan","bone":"l_yan3","attachment":"l_yan"},{"name":"l_xiajieao03","bone":"l_yan","attachment":"l_xiajieao03"},{"name":"l_shangjiemao05","bone":"l_yan","attachment":"l_shangjiemao05"},{"name":"l_shangjiemao04","bone":"l_yan","attachment":"l_shangjiemao04"},{"name":"l_shangjiemao03","bone":"l_yan","attachment":"l_shangjiemao03"},{"name":"l_shangjiemao02","bone":"l_yan","attachment":"l_shangjiemao02"},{"name":"l_shangjiemao01","bone":"l_yan","attachment":"l_shangjiemao01"},{"name":"l_shuangyanpi","bone":"l_yan","attachment":"l_shuangyanpi"},{"name":"l_mei","bone":"l_mei","attachment":"l_mei"},{"name":"bi","bone":"bi","attachment":"bi"},{"name":"fa10","bone":"fa10","attachment":"fa10"},{"name":"fa08","bone":"fa10","attachment":"fa08"},{"name":"fa07","bone":"fa08","attachment":"fa07"},{"name":"fa06","bone":"fa02","attachment":"fa06"},{"name":"fa04","bone":"fa014","attachment":"fa04"},{"name":"fa03","bone":"bone","attachment":"fa03"},{"name":"fa05","bone":"bone","attachment":"fa05"},{"name":"toushi02","bone":"jin","attachment":"toushi02"},{"name":"fa02","bone":"fa028","attachment":"fa02"},{"name":"fa01_yinying","bone":"bone","attachment":"fa01_yinying"},{"name":"fa01","bone":"fa01","attachment":"fa01"},{"name":"1sheng04","bone":"jin","attachment":"1sheng04"},{"name":"1sheng03","bone":"jin","attachment":"1sheng03"},{"name":"toushi01","bone":"jin","attachment":"toushi01"},{"name":"1sheng02","bone":"jin","attachment":"1sheng02"},{"name":"1sheng01","bone":"jin","attachment":"1sheng01"},{"name":"jin","bone":"jin","attachment":"jin"},{"name":"sui04_yinying","bone":"sui04_yinying","attachment":"sui04_yinying"},{"name":"sui03_yinying","bone":"sui03_yinying","attachment":"sui03_yinying"},{"name":"sui02_yinying","bone":"bone","attachment":"sui02_yinying"},{"name":"sui02","bone":"sui02","attachment":"sui02"},{"name":"sui01_yinying","bone":"bone","attachment":"sui01_yinying"},{"name":"sui01","bone":"shengti4","attachment":"sui01"},{"name":"l_shou07","bone":"l_shou07","attachment":"l_shou07"},{"name":"l_shou06","bone":"l_shou020","attachment":"l_shou06"},{"name":"l_shou05","bone":"l_shou017","attachment":"l_shou05"},{"name":"l_shou04","bone":"l_shou04","attachment":"l_shou04"},{"name":"l_shou01","bone":"bone","attachment":"l_shou01"},{"name":"l_shou03","bone":"bone","attachment":"l_shou03"},{"name":"l_shou02","bone":"bone","attachment":"l_shou02"}],"ik":[{"name":"target","bones":["l_tui","l_tui2"],"target":"target","bendPositive":false},{"name":"target2","order":1,"bones":["l_tui3"],"target":"target2"}],"transform":[{"name":"xiong02","order":2,"bones":["shangyi01_yinying3"],"target":"xiong02","mixRotate":0,"mixX":0.0818,"mixY":0,"mixScaleX":0,"mixShearY":0},{"name":"xiong03","order":3,"bones":["shangyi01_yinying9"],"target":"xiong02","mixRotate":0,"mixX":0.1041,"mixY":0,"mixScaleX":0,"mixShearY":0},{"name":"xiong04","order":4,"bones":["shangyi01_yinying6"],"target":"xiong02","mixRotate":0,"mixX":0.0669,"mixY":0,"mixScaleX":0,"mixShearY":0}],"skins":[{"name":"default","attachments":{"1bozi":{"1bozi":{"x":71.18,"y":-5.05,"rotation":-95.86,"width":275,"height":333}},"1houfa01":{"1houfa01":{"type":"mesh","uvs":[0.85638,0.03429,0.90187,0.05859,0.98316,0.17752,0.99999,0.29431,0.99999,0.38662,1,0.5103,0.8935,0.61416,0.78113,0.72372,0.61595,0.81486,0.4776,0.89119,0.34111,0.90736,0.25493,0.91757,0.18651,0.87768,0.15739,0.8318,0.12517,0.84725,0.04238,0.78833,0.01749,0.71199,0,0.65519,0.00001,0.57584,0.03742,0.55702,0.04202,0.52004,0.07203,0.44845,0.16266,0.40512,0.28245,0.34048,0.40278,0.21461,0.49277,0.07814,0.64996,0,0.80267,0.00559,0.73385,0.33561,0.51569,0.57744,0.27515,0.67656,0.61503,0.46732,0.38277,0.63221,0.11895,0.69804,0.7989,0.17566],"triangles":[2,34,1,28,34,3,3,34,2,34,0,1,24,25,28,25,26,28,28,26,34,34,27,0,34,26,27,9,29,8,8,29,7,29,31,7,7,31,6,31,28,6,6,28,3,6,4,5,4,6,3,23,24,29,29,24,31,31,24,28,10,32,9,10,30,32,9,32,29,32,30,23,32,23,29,10,11,30,11,12,30,12,13,30,13,14,33,14,15,33,13,33,30,15,16,33,33,16,17,33,17,19,19,17,18,19,20,33,33,20,22,33,22,30,22,20,21,30,22,23],"vertices":[2,154,-280.42,-115.37,0.00069,153,6.86,4,0.99931,2,154,-301.75,-65.75,0.02346,153,6.14,58,0.97654,2,154,-293.26,74.01,0.27064,153,67.48,183.87,0.72936,2,154,-234.57,165.29,0.58088,153,156.64,245.73,0.41912,2,154,-177.56,227.73,0.8209,153,233.22,281.59,0.1791,2,154,-101.17,311.41,0.97196,153,335.82,329.66,0.02804,1,154,48.07,303.96,1,2,155,-234.04,223.2,0.01659,154,205.52,296.1,0.98341,2,155,-37.81,243.38,0.39585,154,393.8,237.24,0.60415,3,156,-198.08,219.38,0.03588,155,126.54,260.29,0.8267,154,551.49,187.94,0.13742,3,156,-49.66,220.31,0.34407,155,270.9,225.8,0.64821,154,670.53,99.3,0.00773,2,156,44.05,220.9,0.65286,155,362.05,204.02,0.34714,2,156,114.35,177.59,0.8534,155,419.99,145.2,0.1466,2,156,141.78,132.81,0.96055,155,435.95,95.17,0.03945,2,156,177.81,143.63,0.99162,155,473.52,97.09,0.00838,1,156,261.95,81.52,1,1,156,282.22,9.39,1,2,156,296.19,-44.19,0.99904,155,543.7,-113.54,0.00096,2,156,289.39,-116.55,0.98773,155,519.84,-182.2,0.01227,2,156,247.47,-129.93,0.9622,155,475.94,-185.19,0.0378,2,156,239.36,-163.18,0.92434,155,460.13,-215.55,0.07566,4,156,200.89,-225.44,0.84311,155,407.93,-266.84,0.15507,154,602.11,-407.44,0.00137,153,710.37,-603.66,0.00045,4,156,99.54,-255.78,0.61554,155,302.27,-272.14,0.3548,154,502.93,-370.63,0.02212,153,632.84,-531.68,0.00753,4,156,-35.04,-302.61,0.1915,155,160.4,-285.52,0.57709,154,367.29,-326.96,0.16572,153,524.24,-439.42,0.06568,4,156,-175.45,-405.22,0.01256,155,-0.43,-351.69,0.28574,154,193.4,-324.32,0.36423,153,364.61,-370.42,0.33747,3,155,-133.44,-437.81,0.08818,154,37.2,-350.98,0.21167,153,210.1,-335.26,0.70016,3,155,-317.59,-449.59,0.0133,154,-136.66,-289.16,0.02512,153,73.14,-211.59,0.96157,2,155,-471.98,-390.51,0.00008,153,7.7,-59.79,0.99992,2,154,3.59,-0.94,0.49728,153,313.04,0.99,0.50272,2,155,-6.73,2.35,0.21637,154,327.28,3.49,0.78363,2,156,1.62,3.15,0.57312,155,268.91,2.67,0.42688,1,154,179.89,1.48,1,1,155,145.59,2.53,1,1,156,171.73,6.93,1,2,154,-147.17,-61.68,0.00163,153,150.51,2.59,0.99837],"hull":28}},"1houfa02":{"1houfa02":{"type":"mesh","uvs":[0.68279,0,0.94572,0.01772,0.99999,0.08644,1,0.15856,0.92495,0.13668,0.68056,0.09569,0.4662,0.1484,0.34671,0.22797,0.23886,0.33524,0.15885,0.45993,0.1124,0.63704,0.17385,0.86814,0.20891,1,0.17014,1,0.06823,0.94574,0,0.71239,0,0.51511,0.04923,0.35506,0.1513,0.1921,0.27809,0.09746,0.42161,0.03184,0.81646,0.05937,0.55269,0.06086,0.31466,0.15385,0.10675,0.41009,0.0491,0.67527,0.1041,0.85803],"triangles":[4,2,3,5,21,4,4,21,2,5,22,21,21,1,2,22,0,21,21,0,1,8,23,7,19,23,18,18,23,24,7,23,6,6,23,22,23,19,20,6,22,5,22,23,20,22,20,0,10,24,9,16,17,24,9,24,8,24,23,8,24,17,18,25,16,24,12,26,11,14,26,13,12,13,26,14,15,26,26,10,11,15,25,26,26,25,10,15,16,25,10,25,24],"vertices":[1,270,188.43,-14.35,1,1,270,91.88,-16.58,1,1,270,70.95,-1.98,1,1,270,69.85,14.71,1,1,270,97.67,11.45,1,1,270,187.79,7.86,1,1,271,53.67,8.7,1,2,272,-28.71,61.28,0.00068,271,100.77,15.44,0.99932,2,272,9.61,34.49,0.66137,271,145.36,29.49,0.33863,1,272,47.67,18.67,1,2,273,7.48,18.17,0.54182,272,92.16,18.94,0.45818,1,273,65.09,26.15,1,1,273,97.96,30.7,1,1,273,94.3,16.95,1,1,273,72.5,-15.94,1,2,273,13.74,-26.19,0.97958,272,124.29,-12.28,0.02042,2,273,-30.48,-14.41,0.01398,272,82.12,-30.07,0.98602,1,272,40.89,-27.85,1,1,271,168.04,-10.78,1,1,271,117.46,-20.23,1,1,271,62.65,-21.61,1,1,270,138.58,-3.83,1,1,271,17.82,-2.91,1,1,271,107.79,-4.17,1,1,272,44.45,-3.44,1,1,273,10.06,-6.56,1,1,273,56.23,2.02,1],"hull":21}},"1houfa03":{"1houfa03":{"type":"mesh","uvs":[0.1037,0.04088,0.17123,0.09847,0.24473,0.14837,0.29533,0.25886,0.41921,0.41334,0.52765,0.50137,0.61411,0.43879,0.72911,0.43699,0.82948,0.49616,0.91577,0.62008,0.96205,0.75381,0.99999,0.91353,1,0.99999,0.84566,1,0.67841,1,0.56227,0.88311,0.44173,0.88772,0.29762,0.82566,0.22035,0.70665,0.13264,0.64307,0.11675,0.44674,0.06095,0.46604,0.01552,0.41736,0.00604,0.30805,0,0.17488,0.01086,0.09906,0.03248,0.06248,0.06193,0.01766,0.44414,0.59042,0.26999,0.45573,0.1475,0.27102],"triangles":[21,22,20,20,30,29,30,20,23,20,22,23,30,24,25,25,26,30,30,23,24,1,30,26,26,27,0,30,1,2,1,26,0,19,20,29,29,30,3,30,2,3,17,18,28,18,29,28,18,19,29,29,4,28,29,3,4,12,13,11,11,13,10,9,13,14,15,16,28,16,17,28,14,15,9,15,28,9,28,5,9,7,8,5,5,6,7,28,4,5,10,13,9,9,5,8],"vertices":[2,159,368.46,-72.37,0.02274,160,176.01,-69.82,0.97726,2,159,288.61,-98.97,0.33123,160,97.02,-98.88,0.66877,3,158,355.3,-199.63,0.00242,159,209.72,-134.28,0.86425,160,19.27,-136.62,0.13333,2,158,264.57,-150.98,0.11802,159,107.66,-120.76,0.88198,3,157,449.78,-139.29,0.03157,158,90.19,-111.49,0.90474,159,-69.44,-145.32,0.06369,3,156,575.39,-147.81,0.00058,157,328.74,-83.62,0.82853,158,-43.02,-109.28,0.17088,3,156,480.92,-189.22,0.02854,157,245.55,-144.61,0.96962,158,-94.6,-198.61,0.00184,2,156,361.37,-179.44,0.19458,157,126.74,-161.1,0.80542,2,156,261.58,-122.52,0.65426,157,16.94,-127.28,0.34574,1,156,181.24,-15.39,1,2,156,143.19,95.64,0.63635,157,-146.12,59.86,0.36365,2,156,115.74,226.55,0.40269,157,-201.41,181.65,0.59731,2,156,122.2,295.42,0.3779,157,-210.11,250.28,0.6221,2,156,282.48,280.37,0.19165,157,-50.4,270.49,0.80835,2,156,456.15,264.05,0.00918,157,122.66,292.39,0.99082,2,157,254.57,214.82,0.98444,158,-231.11,134,0.01556,2,157,378.84,234.26,0.76002,158,-125.2,201.85,0.23998,3,157,534.19,203.88,0.2297,158,29.23,236.61,0.76455,159,-249.27,158.9,0.00575,3,157,626.1,119.54,0.01928,158,147.32,196.44,0.83547,159,-124.59,162.97,0.14525,3,158,251.93,199.89,0.57589,159,-27.92,203.09,0.41708,160,-228.71,193.23,0.00704,3,158,346.96,73.73,0.04074,159,105.49,118.56,0.58358,160,-92.74,112.88,0.37568,3,158,388.92,116.91,0.00106,159,129.53,173.77,0.28581,160,-70.43,168.8,0.71313,2,159,189.47,186.73,0.16008,160,-10.92,183.62,0.83992,2,159,264.17,140.19,0.01671,160,65.18,139.41,0.98329,1,160,154.48,80.97,1,1,160,196.4,35.67,1,1,160,206.44,0.12,1,2,159,410.07,-49.74,0.00043,160,216.9,-45.91,0.99957,2,157,406.21,-2.01,0.88327,158,-4.98,-3.39,0.11673,2,158,206.2,-2.33,0.48974,159,0.61,-2.26,0.51026,1,160,0.97,3.3,1],"hull":28}},"1sheng01":{"1sheng01":{"x":-89.11,"y":-48.14,"rotation":121.02,"width":72,"height":224}},"1sheng02":{"1sheng02":{"x":-154.31,"y":-20.25,"rotation":121.02,"width":119,"height":329}},"1sheng03":{"1sheng03":{"x":-246.47,"y":-34.84,"rotation":121.02,"width":153,"height":68}},"1sheng04":{"1sheng04":{"x":-348.1,"y":-17.19,"rotation":121.02,"width":122,"height":48}},"1yu01":{"1yu01":{"type":"mesh","uvs":[0.9877,0.00001,1,0.04661,1,0.08777,0.85944,0.46015,0.56875,0.91163,0.31371,1,0.16221,0.988,0.043,0.88695,0,0.72247,0.09048,0.7427,0.30265,0.71442,0.5261,0.59301,0.78286,0.2781,0.95449,0.00001,0.70687,0.54694,0.39948,0.82395,0.17664,0.83266],"triangles":[8,9,16,7,8,16,6,7,16,16,9,10,16,10,15,5,16,15,6,16,5,15,10,11,15,11,14,4,15,14,5,15,4,0,12,13,12,0,14,14,0,3,2,3,0,0,1,2,12,14,11,4,14,3],"vertices":[1,251,-9.87,0.14,1,1,251,-7.47,11.28,1,1,251,-1.64,17.83,1,1,251,98.85,34.67,1,1,252,85.77,48,1,2,252,199.76,19.24,0.00026,253,36.99,36.9,0.99974,2,253,105.92,34.29,0.49814,254,-3.51,34.51,0.50186,1,254,54.39,27.3,1,1,254,82.13,-1.7,1,1,254,41.2,-7.87,1,2,252,180.25,-38.59,0.00678,253,41.97,-23.93,0.99322,1,252,76.66,-22,1,1,251,99.15,-17.46,1,1,251,1.43,-9.9,1,2,251,163.03,2.4,0.76214,252,-2.73,1.62,0.23786,2,252,149.06,0.3,0.74026,253,-2.07,-0.57,0.25974,2,253,99.32,1.2,0.64901,254,-1.56,0.84,0.35099],"hull":14}},"1yu02":{"1yu02":{"type":"mesh","uvs":[1,0.01697,1,0.08745,0.90228,0.36757,0.77591,0.63791,0.587,0.93114,0.32962,0.96058,0.19306,0.81343,0.09699,0.59599,0,0.14247,0.0035,0.1171,0.00808,0.08383,0.14879,0.26357,0.35389,0.42248,0.54648,0.41206,0.74063,0.31789,0.88537,0.16524,0.97097,0,0.06974,0.2865,0.19603,0.54523,0.45373,0.71399,0.66382,0.56009,0.80991,0.38521,0.94395,0.14697],"triangles":[8,17,7,7,17,18,17,11,18,8,9,17,9,10,17,17,10,11,19,5,18,5,6,18,6,7,18,18,12,19,18,11,12,5,19,4,4,19,20,19,13,20,19,12,13,4,20,3,3,21,2,3,20,21,20,14,21,20,13,14,21,14,15,22,2,21,2,22,1,22,21,15,16,22,15,1,22,0,22,16,0],"vertices":[1,274,-4.87,-1.24,1,1,274,-0.53,6.59,1,1,274,53.04,17.58,1,2,274,116.65,21.59,0.00053,275,30.85,24.93,0.99947,2,275,119.3,27.81,0.01256,276,24.09,36.28,0.98744,2,276,133.23,28.03,0.07116,277,17.17,37.67,0.92884,2,277,78.12,36.35,0.99948,278,-37.07,25.71,0.00052,2,277,125.14,21.56,0.13169,278,12.2,26.98,0.86831,1,278,79.23,4.1,1,1,278,79.9,0.61,1,1,278,80.77,-3.96,1,2,277,116.11,-25.19,0.1408,278,18.84,-20.16,0.8592,2,276,115.5,-38.77,0.12241,277,26.81,-30.76,0.87759,2,275,109.37,-39.6,0.02641,276,34,-31.13,0.97359,1,275,28.75,-18.34,1,1,274,46.87,-8.38,1,1,274,4.88,-9.1,1,1,278,44.48,1.74,1,1,277,86.65,3.35,1,1,276,77.38,2.67,1,2,275,70.83,-2.8,0.98951,276,-13.51,-6.99,0.01049,1,275,5,1.04,1,1,274,23.97,1.66,1],"hull":17}},"2sheng01":{"2sheng01":{"type":"mesh","uvs":[0.10084,0.00001,0.27009,0.14879,0.31274,0.22052,0.44419,0.44158,0.62068,0.58911,0.84936,0.68596,0.94846,0.69631,1,0.77722,1,0.86557,0.97812,1,0.78866,0.98352,0.55161,0.83875,0.30615,0.63562,0.09619,0.46868,0.00427,0.33153,0.00001,0.21951,0.02399,0.07572,0.56457,0.71841,0.20156,0.36025],"triangles":[18,14,15,18,0,1,18,1,2,18,15,16,16,0,18,13,14,18,13,18,12,18,17,12,3,18,2,17,3,4,17,18,3,11,12,17,8,6,7,5,6,8,17,4,5,8,17,5,10,17,8,11,17,10,9,10,8],"vertices":[1,185,82.57,-28.99,1,2,184,145.93,-52.48,0.2252,185,21.8,-48.39,0.7748,2,184,125.96,-46.82,0.53133,185,1.04,-48.33,0.46867,1,184,64.38,-29.37,1,2,183,120.27,-30.82,0.63955,184,-1.21,-33.12,0.36045,1,183,42.97,-26.79,1,1,183,10.96,-31.68,1,1,183,-9.24,-18.38,1,1,183,-13.39,0.16,1,1,183,-12.74,29.92,1,1,183,48.3,39.96,1,2,183,130.51,26.48,0.68097,184,-10.69,24.3,0.31903,1,184,80.29,29.89,1,2,184,157.35,35.92,0.14019,185,8.91,39.81,0.85981,1,185,50.88,42.21,1,1,185,69.66,27.06,1,1,185,87.32,0.51,1,2,183,132.04,0.31,0.56469,184,-0.51,0.14,0.43531,2,184,140.66,-2.1,0.10067,185,3.12,-1.3,0.89933],"hull":17}},"2sheng02":{"2sheng02":{"type":"mesh","uvs":[0.47913,0.02882,0.72399,0.02991,1,0.24837,1,0.30825,0.98913,0.51472,0.80715,0.64922,0.53573,0.89152,0.49774,1,0.45215,1,0.28812,0.94385,0.04682,0.73895,0,0.32721,0.13701,0.17307,0.26606,0.02788,0.33505,0.76354,0.248,0.59512,0.2339,0.49194,0.3569,0.49529,0.58143,0.57205,0.39906,0.90998,0.22233,0.77857,0.09862,0.5345,0.17883,0.32987,0.34468,0.26416,0.54589,0.27918,0.75253,0.34676],"triangles":[6,7,19,9,19,8,7,8,19,9,20,19,20,14,19,19,14,6,5,25,4,4,25,3,24,1,25,3,25,2,25,1,2,10,20,9,10,21,20,20,15,14,20,21,15,14,15,17,10,11,21,21,16,15,15,16,17,17,24,18,21,22,16,21,11,22,16,23,17,17,23,24,16,22,23,11,12,22,22,12,23,23,0,24,24,0,1,12,13,23,23,13,0,6,18,5,6,14,18,14,17,18,18,25,5,18,24,25],"vertices":[4,188,99.16,-92.95,0.1568,189,61.42,-70.97,0.66153,186,70.7,-108.45,0.18165,187,-56.54,-144.42,0.00002,4,188,47.87,-117.36,0.19922,189,31.61,-119.33,0.25796,186,17.1,-89.63,0.54276,187,-110.14,-125.6,0.00005,4,188,-25.74,-111.99,0.00559,189,-33.12,-154.79,0.0251,186,-31.34,-33.94,0.96931,187,-158.58,-69.92,0,3,188,-30.1,-102.92,0.0014,189,-41.7,-149.54,0.019,186,-28.04,-24.44,0.9796,2,189,-69.97,-129.29,0.0001,186,-14.27,7.5,0.9999,4,188,-14.55,-31.92,0.47552,189,-67.21,-81.48,0.00097,186,33.03,14.98,0.52286,187,-94.21,-20.99,0.00066,2,188,24.6,32.03,0.43887,187,-21.37,-3.21,0.56113,2,188,24.66,52.28,0.00891,187,-7.06,11.11,0.99109,2,189,-74.48,19.53,0.00042,187,2.93,7.64,0.99958,3,188,72.59,64.81,0.22182,189,-46.57,47.07,0.15517,187,35.78,-13.76,0.62301,3,188,137.95,58.01,0.06062,189,12.01,76.85,0.80538,187,77.36,-64.66,0.134,2,189,76.68,50.01,0.99424,187,64.91,-133.56,0.00576,1,189,82.18,9.38,1,4,188,143.79,-71.7,0.01378,189,87.36,-28.89,0.96466,186,117.34,-124.83,0.02156,187,-9.9,-160.8,0,3,188,75.88,32.79,0.50829,189,-26.42,21.97,0.14302,187,15.55,-38.8,0.34869,3,188,106.33,16.03,0.11451,189,8.26,24.43,0.81069,187,25.34,-72.16,0.07481,3,188,116.78,1.81,0.00422,189,24.75,18.17,0.97561,187,22.74,-89.61,0.02017,3,188,90.81,-10.03,0.08746,189,9.38,-5.88,0.90955,186,123.21,-43.73,0.00299,4,188,38.27,-20.94,0.8764,189,-28.81,-43.58,0.04145,186,78.24,-14.45,0.08207,187,-49,-50.43,0.00007,3,188,51.85,48.55,0.15055,189,-55.15,22.14,0.02354,187,9.6,-10.69,0.8259,3,188,98.36,46.39,0.24305,189,-14.92,45.59,0.46217,187,41.08,-45,0.29477,3,188,141.98,21.84,0.00889,189,35.03,48.67,0.94094,187,54.74,-93.16,0.05017,2,189,54.65,14.86,0.99834,187,25.87,-119.52,0.00166,4,188,110.17,-43.81,0.05946,189,43.98,-23.73,0.90874,186,113.14,-81.34,0.0318,187,-14.1,-117.32,0,4,188,67,-61.73,0.35454,189,17.46,-62.23,0.41967,186,69.87,-63.64,0.22574,187,-57.36,-99.61,0.00005,4,188,18.86,-72.24,0.27714,189,-17.25,-97.19,0.10347,186,28.32,-37.17,0.61923,187,-98.92,-73.15,0.00016],"hull":14}},"baiyan":{"白烟":{"type":"mesh","uvs":[0,0,0.0063,0,0.03933,0.02072,0.14155,0.08481,0.227,0.13839,0.32126,0.1975,0.49091,0.30387,0.59693,0.37036,0.65825,0.42681,0.71399,0.47812,0.74742,0.54117,0.71299,0.56834,0.65744,0.55846,0.57485,0.54379,0.61916,0.6081,0.7469,0.72502,0.85068,0.8449,0.92473,0.93045,0.96537,0.98416,0.90909,0.9307,0.79224,0.81971,0.7151,0.7465,0.62962,0.6839,0.57047,0.61674,0.50525,0.53423,0.50245,0.47593,0.60311,0.49055,0.60202,0.46982,0.46774,0.35772,0.30748,0.23184,0.19443,0.15087,0.11911,0.09692,0.02671,0.03073,0,0.00513,0.8461,0.86205,0.69765,0.70337,0.59046,0.6101,0.5371,0.53031,0.56399,0.50979,0.67276,0.53022,0.57923,0.39654,0.40174,0.26824,0.21061,0.14749,0.05811,0.04523],"triangles":[0,32,33,43,0,2,43,32,0,3,43,2,2,0,1,32,43,31,42,31,43,42,3,4,42,43,3,30,31,42,30,42,29,5,42,4,41,29,42,6,41,5,41,42,5,29,41,28,40,28,41,6,40,41,7,40,6,40,7,8,39,27,40,28,40,27,8,39,40,39,26,27,8,9,39,39,9,10,11,39,10,38,25,26,38,26,39,12,13,39,12,39,11,37,25,38,24,25,37,13,38,39,37,38,13,36,13,14,37,13,36,23,37,36,24,37,23,36,14,35,22,36,35,23,36,22,14,15,35,35,20,21,22,35,21,35,15,34,34,20,35,16,34,15,34,16,17,20,34,19,18,19,34,18,34,17],"vertices":[2,204,303.79,-6.71,0,205,88.4,-1.76,1,1,205,83.49,-6.36,1,1,205,38.66,-10.2,1,2,204,114.49,-16.42,1,205,-100.06,-22.06,0,3,203,259.95,-19.73,0.63635,204,-1.83,-19.82,0.36365,205,-216.01,-31.98,0,1,203,131.56,-18.39,1,1,202,150.68,-24.58,1,2,201,229.32,-31.98,0.26322,202,6.69,-35.65,0.73678,1,201,130.81,-51.11,1,1,201,41.27,-68.49,1,2,200,206.72,3.96,0.12518,201,-50.15,-57.34,0.87482,2,200,179.23,-40.04,0.37798,201,-63.58,-7.22,0.62202,4,198,447,-79.55,0,199,181.94,-58.44,0.05592,200,118.39,-40.67,0.8822,201,-22.54,37.7,0.06188,2,198,515.71,-20.69,0,199,243.21,8.13,1,3,198,418.03,-6.75,0.00001,199,144.57,10.42,0.98605,200,93.8,-115.06,0.01394,1,198,210.21,-21.81,1,1,198,14.55,-13.97,1,1,197,85.83,-5.08,1,1,197,1.92,3.54,1,1,197,95.6,8.5,1,1,198,79.13,15.74,1,1,198,207.43,22.73,1,2,199,50.62,51.77,0.99987,200,127.99,-211.84,0.00013,3,198,439.89,41.89,0.00001,199,160.52,61.3,0.98252,200,45.79,-138.27,0.01748,3,198,570.59,31.19,0,199,291.57,66.13,0.99208,200,-47.46,-46.06,0.00792,2,199,361.01,29.46,0.76079,200,-68.28,29.65,0.23921,2,200,40.97,35.07,0.67688,201,85.65,42.67,0.32312,2,200,33.46,61.97,0.14638,201,110.44,29.82,0.85362,2,202,119.74,45.49,1,205,-605.7,7.18,0,1,203,114.96,27.2,1,2,203,277.23,14.85,0.0888,204,14.06,15.41,0.9112,1,204,122.41,11.48,1,1,205,39.27,8.87,1,1,205,83.67,3.28,1,2,197,209.91,6.92,0.17293,198,-1,3.77,0.82707,2,198,265.08,2.89,0.73492,199,-8.45,1.9,0.26508,3,198,434.25,19.43,0.00001,199,157.58,38.33,0.98288,200,64.55,-124.68,0.01711,3,198,554.41,0.76,0,199,279.1,34,0.98203,200,-15.51,-33.15,0.01797,3,199,288.64,-4.7,0.3638,200,6.17,0.3,0.63455,201,83.95,91.84,0.00165,3,199,206.67,-91.63,0.00045,200,125.65,0.08,0.65549,201,2.31,4.61,0.34406,2,201,208.15,1.95,0.61276,202,-3.29,3.08,0.38724,2,202,253.26,4.79,0.35344,203,5.26,4.35,0.64656,2,203,266.32,0.67,0.38581,204,3.72,0.82,0.61419,2,204,217.08,0.04,0.45467,205,1.44,0.12,0.54533],"hull":34}},"bi":{"bi":{"x":4.36,"y":9.52,"rotation":-95.86,"width":31,"height":49}},"er":{"er":{"x":5.96,"y":22.21,"scaleX":1.0959,"scaleY":1.1513,"rotation":-95.86,"width":74,"height":92}},"erzhui":{"erzhui":{"type":"mesh","uvs":[0.85786,0.00796,1,0.19855,0.99999,0.28592,0.88388,0.35789,0.73448,0.33718,0.70192,0.36525,0.72527,0.46112,0.66527,0.65664,0.57615,0.83017,0.47602,0.96779,0.16978,0.99999,0,0.86912,0.18206,0.7205,0.2948,0.57546,0.42064,0.39942,0.55874,0.33254,0.56287,0.29206,0.35291,0.25182,0.41165,0.11183,0.72365,0.00001,0.61489,0.33351,0.64247,0.25393,0.70424,0.26971,0.54393,0.52339,0.42454,0.71777],"triangles":[9,10,24,10,12,24,10,11,12,9,24,8,8,24,7,12,13,24,24,23,7,24,13,23,7,23,6,13,14,23,6,20,5,15,20,23,20,6,23,23,14,15,5,20,4,2,3,22,20,22,4,3,4,22,15,16,20,20,21,22,20,16,21,21,16,18,2,22,1,1,22,0,0,22,19,22,21,19,16,17,18,21,18,19],"vertices":[1,149,-3.32,5.91,1,1,149,27.02,35.28,1,1,149,43.61,41.04,1,1,149,62.04,32.09,1,2,149,64.24,13.08,0.90587,150,-4.78,13.47,0.09413,2,149,70.91,11.09,0.3894,150,1.74,11.05,0.6106,2,150,19.54,18.98,0.98046,151,-18.87,17.57,0.01954,3,150,59.42,22.2,0.00941,151,20.64,23.88,0.98267,152,-25.19,20.32,0.00792,2,151,57.23,25.26,0.15259,152,10.77,27.19,0.84741,1,152,41.05,29.42,1,1,152,65.02,-1.12,1,1,152,52.05,-32.33,1,2,151,53.25,-28.56,0.15332,152,14.94,-26.61,0.84668,3,150,56.01,-26.77,0.02232,151,21.04,-25.22,0.91435,152,-17.4,-28.16,0.06333,2,150,17.71,-21.02,0.95106,151,-17.58,-22.46,0.04894,2,149,70.58,-7.97,0.35939,150,0.16,-7.96,0.64061,2,149,62.73,-10.16,0.98351,150,-7.82,-9.62,0.01649,1,149,63.71,-37.6,1,1,149,34.72,-39.91,1,1,149,0.68,-10.46,1,2,149,68.46,-1.28,0.78178,150,-1.52,-1.14,0.21822,1,149,52.22,-3.28,1,1,149,52.68,5.06,1,2,150,37.64,0.46,0.36435,151,0.61,0.51,0.63565,2,151,42.43,-0.24,0.50631,152,-0.02,-0.25,0.49369],"hull":20}},"fa01":{"fa01":{"type":"mesh","uvs":[0.92001,0,0.97532,0.00197,1,0.12314,0.97363,0.34157,0.82819,0.60712,0.60633,0.83941,0.4756,0.93118,0.30292,1,0.15684,1,0.04061,0.87979,0,0.83779,0,0.82218,0.19843,0.82326,0.38164,0.77016,0.54924,0.68825,0.73214,0.51871,0.89559,0.27305,0.9394,0.12717,0.90282,0.07652,0.86057,0.0644,0.90584,0.03312,0.96776,0.0463,0.96881,0.19626,0.89325,0.40332,0.68769,0.66115,0.41813,0.8386,0.18034,0.88638],"triangles":[8,26,7,8,9,26,7,25,6,7,26,25,25,12,13,25,26,12,26,9,12,12,9,11,25,13,14,9,10,11,6,25,5,5,24,4,5,25,24,25,14,24,24,14,15,4,24,23,23,24,15,4,23,3,23,15,16,3,23,22,23,16,22,3,22,2,16,17,22,2,22,21,22,17,21,17,18,21,21,1,2,18,20,21,18,19,20,20,19,0,20,0,21,21,0,1],"vertices":[1,15,3.29,10.91,1,2,15,21.77,12.92,0.96593,16,-12.73,1.7,0.03407,1,16,21.32,10,1,2,16,82.7,1.14,0.00514,17,35.76,18.01,0.99486,1,18,53.69,23.41,1,2,19,47.55,31.64,0.98176,20,-62.57,8.74,0.01824,2,19,98.42,34.18,0.8806,20,-16.16,29.74,0.1194,2,19,158.81,24.49,0.31506,20,43.57,42.84,0.68494,2,19,202.32,1.78,0.01055,20,92.38,37.66,0.98945,1,20,127.65,-0.05,1,1,20,139.97,-13.23,1,1,20,139.51,-17.59,1,1,20,73.24,-10.25,1,2,19,105.48,-20.54,0.21747,20,10.45,-18.59,0.78253,1,19,44.91,-14.89,1,1,18,58.08,-17.08,1,1,17,28.99,-13.81,1,3,15,14.66,-23.59,0.10265,16,22.46,-10.36,0.81177,17,-14.43,-17.24,0.08558,2,15,0.53,-11.18,0.88851,16,8.22,-22.66,0.11149,1,15,-14,-9.76,1,1,15,-0.14,1.04,1,2,15,20.97,0.23,0.59942,16,-0.27,-0.84,0.40058,2,16,41.87,-0.48,0.20923,17,-0.8,-0.25,0.79077,2,17,62.68,0.53,0.84527,18,-2.79,-0.43,0.15473,2,18,97.31,-0.17,0.4869,19,0.14,-0.13,0.5131,1,20,0.29,1.83,1,2,19,180.56,-22.87,0.00188,20,81.16,6.75,0.99812],"hull":20}},"fa01_yinying":{"fa01_yinying":{"type":"mesh","uvs":[1,0,0.99999,0.13358,0.95631,0.35426,0.76306,0.7204,0.54161,0.90519,0.34983,1,0.19939,1,0.07941,0.95737,0,0.90524,0.00001,0.89182,0.09967,0.8894,0.26431,0.85682,0.48237,0.76628,0.66403,0.58242,0.77008,0.48514,0.8726,0.28849,0.94389,0.09244,0.97418,0,0.95985,0.20492,0.8226,0.49489,0.6023,0.7608,0.37904,0.89295,0.15,0.93036],"triangles":[22,10,11,22,11,21,9,10,22,7,9,22,8,9,7,6,22,21,7,22,6,5,6,21,13,19,20,20,12,13,21,11,12,21,12,20,4,21,20,4,20,3,5,21,4,18,19,15,19,14,15,2,19,18,14,19,13,3,19,2,19,3,20,0,16,17,0,18,16,1,18,0,15,16,18,2,18,1],"vertices":[1,16,9.27,9.02,1,2,16,44.27,9.19,0.99852,18,-67.32,-13.71,0.00148,2,16,102.16,-5.39,0.08037,18,-15.44,15.82,0.91963,2,18,99.19,35.3,0.53403,19,-9.43,34.07,0.46597,2,19,79.68,42.6,0.65198,20,-36.69,30.7,0.34802,2,19,149.02,34.79,0.37724,20,30.69,48.84,0.62276,2,19,194.48,11.34,0.01801,20,81.58,43.68,0.98199,1,20,121.04,28.46,1,1,20,146.52,12.15,1,1,20,146.16,8.65,1,1,20,112.39,11.43,1,2,19,157.67,-11.88,0.04879,20,55.84,8.58,0.95121,2,19,80.9,1.02,0.98642,20,-20.32,-7.54,0.01358,2,18,96.62,-14.04,0.41288,19,3.92,-13.49,0.58712,1,18,53.23,-5.84,1,2,16,85.06,-33.93,0.12435,18,-8.04,-16.62,0.87565,2,16,33.58,-9.94,0.99826,18,-61.81,-34.92,0.00174,1,16,9.31,0.25,1,2,16,63.02,-4.37,0.74118,18,-44.4,-10.53,0.25882,1,18,42.65,8.76,1,2,19,44,18.43,0.97599,20,-61.03,-4.85,0.02401,2,19,127.33,14.41,0.51788,20,17.98,21.94,0.48212,2,19,201.04,-12.57,0.00019,20,96.45,23.84,0.99981],"hull":18}},"fa02":{"fa02":{"type":"mesh","uvs":[0.91778,0,0.98201,0.01949,1,0.06743,1,0.08094,0.96669,0.07179,0.91639,0.05798,0.85538,0.11038,0.78764,0.2296,0.66594,0.44378,0.42933,0.64227,0.22537,0.72225,0.15181,0.78914,0.12788,0.82791,0.1252,0.91508,0.13271,0.96304,0.09072,0.94235,0.02054,0.88363,0,0.80583,0.0218,0.71975,0.07709,0.65993,0.14302,0.63359,0.09602,0.62948,0.06071,0.61098,0.03154,0.58972,0.00708,0.56768,0.00001,0.53269,0.02467,0.55888,0.07166,0.57899,0.13942,0.58948,0.21677,0.58004,0.31822,0.54407,0.43055,0.47663,0.51688,0.37859,0.66164,0.19336,0.78342,0.05012,0.87141,0,0.91153,0.01913,0.77974,0.11297,0.64685,0.31802,0.48418,0.51138,0.28472,0.62648,0.12786,0.69922,0.0717,0.80327,0.09203,0.89442,0.19304,0.60259,0.09965,0.60404,0.03522,0.57975,0.22876,0.6119],"triangles":[23,24,46,46,25,26,46,26,27,46,24,25,21,22,45,23,46,22,22,46,45,46,27,45,45,27,28,20,44,47,21,45,20,20,45,44,44,29,47,40,47,29,45,28,44,44,28,29,14,43,13,14,15,43,15,16,43,13,43,12,16,42,43,43,42,12,12,42,11,16,17,42,17,18,42,42,41,11,41,18,19,41,42,18,11,41,10,10,41,40,41,47,40,41,20,47,41,19,20,10,40,9,9,40,39,39,30,31,39,40,30,30,40,29,9,39,8,8,39,38,39,31,32,39,32,38,8,38,7,38,32,33,7,38,37,38,33,37,7,37,6,37,33,34,36,5,6,35,36,34,6,37,36,34,36,37,36,35,0,3,1,2,36,1,3,36,3,4,4,5,36,36,0,1],"vertices":[2,129,70.72,-13.22,0.66641,130,-11.67,-6.84,0.33359,1,129,28.14,-25.9,1,1,129,-0.37,-5.13,1,2,129,-5.65,2.6,0.99999,130,-20.25,70.67,0.00001,2,129,16.06,9.73,0.99748,130,-6.76,52.23,0.00252,2,129,48.84,20.5,0.54163,130,13.62,24.39,0.45837,2,130,67.64,28.55,0.96386,131,-25.91,40.41,0.03614,1,131,67.85,45.46,1,3,131,236.32,54.54,0.00166,132,54.9,62.79,0.99312,133,-126.44,19.71,0.00522,1,133,77.79,58.71,1,3,134,61.95,43.18,0.93946,135,-15.4,66.59,0.03892,136,-40.59,106.75,0.02161,3,134,125.81,63.66,0.13871,135,47.62,43.63,0.33148,136,-2.7,51.41,0.52982,2,134,151.74,80.93,0.00723,136,21.25,31.5,0.99277,2,136,80.58,19.96,0.07286,137,22.74,11.99,0.92714,1,137,53.44,-1.68,1,3,135,160.65,54.52,0.00024,136,95.55,-5.52,0.00121,137,26.49,-17.32,0.99855,3,135,144.63,-4.96,0.33915,136,47.9,-44.56,0.6452,137,-32.68,-34.5,0.01565,2,135,102.27,-40.96,0.98664,136,-7.5,-49.19,0.01336,1,135,42.41,-54.48,1,3,134,130.94,-38.4,0.33777,135,-10.88,-40.15,0.63373,138,77.12,37.41,0.0285,4,134,83.88,-35.81,0.36522,135,-46.48,-9.27,0.00692,138,33.2,20.32,0.62524,139,-32.03,7.87,0.00262,3,134,110.49,-51.92,0.00723,138,64.08,16.65,0.48736,139,-2.36,17.19,0.50541,1,139,24.05,14.34,1,2,139,47.47,8.17,0.61277,140,-3.4,7.45,0.38723,1,140,18.65,10.11,1,1,140,40.29,-1.78,1,1,140,15.95,-2.71,1,1,139,25.95,-8.89,1,2,138,34.75,-10.3,0.99634,139,-18.05,-19.41,0.00366,3,133,176.4,-49.72,0.09893,134,23.95,-47.93,0.18524,138,-16.37,-15.48,0.71584,2,133,106.16,-37.14,0.98479,138,-83.88,-38.62,0.01521,2,132,171.08,-42.48,0.68591,133,18.66,-39.68,0.31409,1,132,82.47,-41.75,1,1,131,89.78,-38.48,1,2,130,79.63,-33.5,0.99748,131,-36.78,-21.85,0.00252,1,130,12.51,-25.53,1,2,129,66.65,0.06,0.55308,130,-0.31,1.13,0.44692,2,130,108.18,-0.52,0.41018,131,1.64,-1.18,0.58982,2,131,168.56,-1.69,0.74037,132,-4.38,-2.32,0.25963,2,132,167.21,0.12,0.66259,133,0.5,-0.95,0.33741,2,133,154.24,0.77,0.61381,134,-2.25,0.59,0.38619,3,134,112.75,0.72,0.60616,135,-1.27,1.9,0.39288,136,-66.75,45.93,0.00096,2,135,79.76,0.62,0.75495,136,-1.6,-2.27,0.24505,2,136,62.91,0.72,0.57294,137,-1.07,1.24,0.42706,2,133,197.81,-44.24,0.00062,138,-0.33,-0.27,0.99938,2,138,61.22,-0.91,0.37861,139,2.24,0.01,0.62139,2,139,47.9,0.86,0.46321,140,0.37,1.16,0.53679,3,133,180.84,-26.7,0.05478,134,26.49,-24.62,0.5139,138,-23.69,6.8,0.43131],"hull":36}},"fa03":{"fa03":{"type":"mesh","uvs":[0.89125,0.00001,0.95565,0.03717,1,0.05444,1,0.10733,0.97509,0.29728,0.88644,0.55116,0.76841,0.7546,0.55629,0.9512,0.32857,0.99999,0.20088,1,0.09156,0.89933,0,0.815,0,0.80044,0.02622,0.78854,0.1436,0.76091,0.22913,0.71181,0.43238,0.49904,0.54391,0.31281,0.67239,0.07713,0.80734,0,0.82594,0.14943,0.71611,0.37145,0.6449,0.56651,0.50851,0.73463,0.35402,0.84628,0.19109,0.87323],"triangles":[10,25,9,25,10,12,25,12,13,13,14,25,12,10,11,9,25,8,8,24,7,8,25,24,25,15,24,25,14,15,24,15,23,24,23,7,7,23,6,23,22,6,15,16,23,23,16,22,6,22,5,16,17,22,22,21,5,22,17,21,5,21,4,17,18,21,21,20,4,21,18,20,4,20,3,18,19,20,20,1,3,20,0,1,20,19,0,1,2,3],"vertices":[1,122,4.65,-30.69,1,2,122,-7.66,-2.48,0.99894,123,-65.99,27.17,0.00106,2,122,-18.16,14.35,0.95587,123,-68.65,46.83,0.04413,2,122,-5.32,30.83,0.81145,123,-50.17,56.57,0.18855,3,122,49.06,83.57,0.01166,123,21.08,82.31,0.90676,124,-64.54,88.5,0.08158,3,123,127.16,96.15,0.1749,124,42.35,92.71,0.76202,125,-72.69,73.34,0.06308,3,124,135.59,77.85,0.22111,125,20.42,89.02,0.74382,126,-86.05,72.13,0.03506,3,125,137.54,73.21,0.14932,126,31.72,82,0.85021,127,-73.13,55.93,0.00046,3,126,120.22,40.94,0.14801,127,24.43,57.06,0.85181,128,-70.18,25.49,0.00018,2,127,77.12,47.08,0.74517,128,-19.52,43.08,0.25483,1,128,36.9,20.57,1,1,128,84.15,1.72,1,1,128,86.04,-3.71,1,2,127,133.65,-48.65,0.0005,128,77.18,-11.77,0.9995,4,125,195.25,-106.69,0.00034,126,126.96,-81.16,0.01041,127,83.17,-50.19,0.29717,128,34.18,-38.25,0.69207,5,124,207.1,-137.72,0.00021,125,156.99,-92.45,0.02685,126,86.52,-75.54,0.18608,127,44.27,-62.56,0.65426,128,6.61,-68.35,0.1326,5,123,197.89,-82.14,0.00011,124,96.69,-91.25,0.32864,125,37.52,-83.65,0.52772,126,-32.03,-92.76,0.12837,127,-55.25,-129.24,0.01515,5,122,195.67,-22.91,0.05053,123,110.97,-75.02,0.23795,124,10.77,-76.3,0.66634,125,-48.68,-96.9,0.04509,126,-113.32,-124.34,0.0001,3,122,95.87,-63.17,0.87078,123,3.46,-70.7,0.12698,124,-95.91,-62.3,0.00224,1,122,32.44,-52.35,1,1,123,-1.36,-0.34,1,4,122,152.86,39.81,0.00024,123,97.73,-0.24,0.0666,124,4.34,-0.63,0.93315,125,-78.93,-27.25,0.00001,2,124,86.96,1.39,0.603,125,-1.27,1.04,0.397,2,125,86.43,1.73,0.74582,126,-2.73,1.17,0.25418,3,125,162.36,-18,0.00002,126,75.67,-1.68,0.21839,127,2.62,-0.61,0.78159,3,126,137.14,-33.6,0.00008,127,71.84,-2.89,0.51905,128,0.79,-2.88,0.48087],"hull":20}},"fa04":{"fa04":{"type":"mesh","uvs":[0.90914,0,0.92142,0,0.97035,0.00945,0.99084,0.04583,1,0.15472,0.99999,0.26111,0.97213,0.4135,0.91284,0.54101,0.79141,0.72606,0.62398,0.87941,0.42951,0.98246,0.30604,0.99999,0.20463,1,0.10308,0.9689,0.04202,0.91608,0.00317,0.87246,0.00131,0.85372,0.10211,0.92958,0.21125,0.94729,0.38721,0.91186,0.55842,0.80358,0.69648,0.63717,0.77904,0.50236,0.815,0.39659,0.8252,0.21927,0.8346,0.08379,0.86372,0.01245,0.92594,0.28341,0.85075,0.54157,0.68087,0.76051,0.51517,0.89339,0.30982,0.97069,0.12624,0.96323],"triangles":[15,16,14,14,16,32,32,16,17,13,14,32,32,17,18,32,18,31,31,12,32,11,12,31,13,32,12,31,18,19,31,19,30,10,31,30,11,31,10,29,20,21,29,30,20,9,29,8,9,30,29,20,30,19,10,30,9,28,29,21,8,29,28,28,23,27,27,6,28,28,22,23,6,7,28,21,22,28,8,28,7,0,25,26,25,0,1,3,1,2,25,1,27,1,4,27,25,27,24,4,1,3,5,27,4,23,24,27,6,27,5],"vertices":[1,115,-10.93,0.19,1,1,115,-10.67,4.59,1,1,115,-5.89,21.9,1,1,115,8.9,28.38,1,1,115,52.03,29.09,1,2,115,93.97,26.57,0.88917,116,-18.28,21.57,0.11083,1,116,42.23,29.45,1,2,116,96.61,23.69,0.94708,117,-16.94,19.56,0.05292,1,117,68.04,24.32,1,2,118,47.99,21.75,0.92215,119,-35.46,11.15,0.07785,1,119,44.65,21.81,1,2,119,88.22,11.12,0.36382,120,-0.11,12.22,0.63618,1,120,36.27,13.66,1,2,120,73.19,2.82,0.46166,121,4.03,8.81,0.53834,1,121,33.9,3.99,1,1,121,55.15,-2.34,1,1,121,59.88,-8.07,1,1,121,13.09,-3.81,1,1,120,34.72,-7.24,1,1,119,47.92,-9.77,1,1,118,46.26,-16.3,1,1,117,58,-23.57,1,2,116,95.92,-26.71,0.69986,117,-2.72,-28.8,0.30014,2,115,143.41,-42.93,0.00166,116,52.2,-26.47,0.99834,2,115,73.72,-35.08,0.91972,116,-15.9,-43.28,0.08028,1,115,20.5,-28.51,1,1,115,-7,-16.38,1,2,115,101.17,-0.5,0.72721,116,-2.14,-1.32,0.27279,2,116,103.28,2.42,0.87765,117,-4.28,1.21,0.12235,2,117,101.52,-0.96,0.32663,118,1.86,-0.49,0.67337,1,118,81.19,0.43,1,2,119,82.51,0.97,0.57826,120,-1.01,0.6,0.42174,2,120,64.97,0.25,0.98891,121,-1.56,2.26,0.01109],"hull":27}},"fa05":{"fa05":{"type":"mesh","uvs":[0.90091,0.00194,0.96611,0.06904,0.98608,0.14819,0.98666,0.20095,0.90699,0.19585,0.85395,0.19009,0.76468,0.22811,0.66588,0.2864,0.54683,0.39224,0.38978,0.5551,0.23899,0.69005,0.1645,0.76661,0.1521,0.81655,0.18544,0.88019,0.28969,0.94669,0.24496,0.99765,0.18242,0.98758,0.04494,0.96543,0.00001,0.89653,0.00001,0.82184,0.04777,0.71849,0.13012,0.63147,0.27224,0.49,0.36347,0.38334,0.44132,0.27641,0.56347,0.09794,0.71194,0.00381,0.81256,0.00001,0.8622,0.05957,0.59452,0.16801,0.41017,0.41553,0.22119,0.59361,0.08693,0.77067,0.10908,0.87751,0.18975,0.9418],"triangles":[16,34,15,15,34,14,16,17,34,14,34,13,17,33,34,17,18,33,33,13,34,33,12,13,33,32,12,18,19,33,19,32,33,19,20,32,12,32,11,10,11,32,32,20,21,31,10,32,32,21,31,10,31,9,31,21,22,9,31,30,9,30,8,30,31,22,22,23,30,29,7,8,30,23,24,30,29,8,30,24,29,7,29,6,24,25,29,28,6,29,28,26,27,28,29,26,29,25,26,3,28,2,28,3,4,2,28,1,28,4,5,28,0,1,28,27,0,5,6,28],"vertices":[2,241,141.27,-46.81,0.70616,242,-42.44,-24.78,0.29384,1,241,77.17,-45.38,1,1,241,23.29,-17.04,1,1,241,-7.78,7.81,1,3,241,25.6,42.69,0.89865,242,19.77,107.58,0.10123,243,-78.24,172.15,0.00012,3,241,49.2,64.78,0.58876,242,46.47,89.35,0.40332,243,-64.69,142.81,0.00792,3,241,61.03,124.69,0.10643,242,107.51,90.82,0.72946,243,-11.54,112.73,0.16411,3,241,64.65,198.71,0.00261,242,180.56,103.39,0.23767,243,57.59,86.02,0.75973,2,243,163.54,68.26,0.98047,244,-60.99,62.97,0.01953,2,244,94.17,63.07,0.98495,245,-76.93,71.23,0.01505,1,245,57.16,45.38,1,2,245,129.8,36.44,0.97606,246,5.02,48.61,0.02394,3,245,165.95,49.36,0.28021,246,40.64,34.28,0.6512,247,-11.56,48.82,0.06858,4,245,196.77,91.29,0.00086,246,91.51,45.19,0.0615,247,36.87,29.77,0.82767,248,-24.47,26.77,0.10998,1,248,54.09,44.32,1,1,248,67.05,-0.83,1,2,247,93.6,-28.03,0.08701,248,37.42,-25.47,0.91299,3,246,138.97,-50.1,0.13617,247,23.71,-75.87,0.82016,248,-27.7,-79.63,0.04367,2,246,82.89,-67.15,0.63865,247,-32.44,-59.07,0.36135,2,246,27.55,-56.73,0.99245,247,-72.79,-19.77,0.00755,2,245,134.9,-42.69,0.43085,246,-43.69,-13.96,0.56915,3,244,235.68,-25.76,0.07103,245,53.05,-33.73,0.92847,246,-98.96,47.07,0.0005,1,244,98.79,-23.12,1,2,243,217.38,-28.75,0.50191,244,1.45,-28.73,0.49809,1,243,124.12,-32.42,1,2,242,172.21,-51.36,0.84904,243,-29.01,-42.5,0.15096,1,242,60.24,-74.65,1,2,241,176.1,-6.36,0.05459,242,4.62,-49.99,0.94541,2,241,122.35,-1.24,0.74704,242,-2.07,3.59,0.25296,2,242,179.1,4.27,0.21746,243,5.47,1.7,0.78254,2,243,222.7,8.08,0.31908,244,3.4,8.42,0.68092,2,244,179.44,0.28,0.22669,245,0.3,-1.21,0.77331,2,245,156.5,-2.19,0.47888,246,-0.65,2,0.52112,2,246,80.99,0.24,0.30942,247,3.24,-1.86,0.69058,1,248,13.33,-0.36,1],"hull":28}},"fa06":{"fa06":{"type":"mesh","uvs":[0.85912,0.00236,0.95293,0.05947,1,0.14903,0.99634,0.237,0.95071,0.33134,0.89557,0.29208,0.8328,0.2252,0.75046,0.20443,0.68163,0.21842,0.59481,0.28842,0.50294,0.43125,0.38097,0.62947,0.24356,0.76249,0.16679,0.81531,0.10036,0.87511,0.06915,0.94127,0.04143,1,0.03924,1,0,0.87931,0,0.85742,0.01657,0.81817,0.04284,0.779,0.08166,0.72167,0.20091,0.54865,0.30824,0.31488,0.44084,0.14094,0.54456,0.06254,0.68352,0,0.93909,0.127,0.75581,0.07069,0.49397,0.2693,0.33979,0.5147,0.20976,0.68407,0.08239,0.8328,0.03993,0.93791,0.59918,0.18816,0.69908,0.11324,0.0579,0.89343],"triangles":[15,16,34,16,17,34,17,18,34,34,37,15,15,37,14,34,18,37,33,37,19,37,33,14,33,19,20,37,18,19,14,33,13,20,21,33,32,13,33,33,21,22,13,32,12,32,33,22,12,32,11,22,23,32,31,32,23,31,11,32,11,31,10,23,24,31,10,31,30,31,24,30,10,30,9,24,25,30,28,4,5,9,35,8,9,30,35,30,25,35,7,8,36,8,35,36,6,7,29,7,36,29,25,26,35,35,26,36,26,27,36,36,27,29,29,27,0,28,3,4,28,5,6,3,28,2,28,6,29,28,1,2,29,0,28,28,0,1],"vertices":[1,142,77.81,-68.74,1,1,142,4.15,-46.66,1,2,142,-45.84,7.69,0.61883,141,97.05,-41.85,0.38117,2,142,-62.25,70.92,0.01531,141,32.01,-35.77,0.98469,1,12,-27.86,-3.15,1,4,142,-8.04,129.92,0.00041,141,-5.02,35.29,0.35387,143,30.62,184.47,0.00473,12,4.97,31.39,0.641,4,142,47.38,94.78,0.15665,141,46.9,75.44,0.64348,143,33.15,118.89,0.14766,12,58.72,69.04,0.05221,4,142,105.75,96.26,0.15786,141,65.37,130.83,0.15141,143,67.5,71.68,0.68798,12,79.8,123.5,0.00275,3,142,147.84,119.77,0.01169,141,57.59,178.41,0.01472,143,110.75,50.38,0.97359,2,143,189.56,53.84,0.72377,144,-6.8,59.93,0.27623,1,144,116.41,60.69,1,2,144,285.45,65,0.49215,145,56.21,70.83,0.50785,2,145,190.94,50.27,0.124,146,29.53,51.7,0.876,1,146,92.62,34.01,1,2,146,155.49,25.08,0.07911,286,20.22,20.29,0.92089,2,286,73.75,19.51,0.68777,287,2.66,21.05,0.31223,2,286,121.27,18.82,0.00008,287,43.33,-3.53,0.99992,2,286,121.85,17.44,0.00008,287,43.13,-5.02,0.99992,2,146,199.85,-27.41,0.00396,286,49.57,-41.85,0.99604,2,146,186.97,-37.32,0.04267,286,34.58,-48.11,0.95733,2,146,156.99,-46.11,0.34856,286,3.34,-48.88,0.65144,2,146,122.99,-49.6,0.85644,286,-30.41,-43.5,0.14356,1,146,73.09,-54.52,1,2,145,77.55,-64.48,0.99915,146,-78.39,-68.21,0.00085,2,144,111.05,-97.94,0.89607,145,-106.69,-103.6,0.10393,2,143,203.44,-97.41,0.76509,144,-46.31,-86.72,0.23491,2,143,111.71,-98.51,0.99997,144,-132.72,-55.91,0.00003,2,142,193.33,-35.81,0.0447,143,8.48,-75.39,0.9553,1,141,115.66,-1.15,1,2,142,130.85,0.18,0.30687,143,2.65,-3.52,0.69313,1,144,16.59,-6.5,1,1,145,2.51,-1.02,1,2,145,156.47,-2,0.63993,146,-2.48,-2.11,0.36007,2,146,138.12,-3.82,0.6855,286,-4.01,-3.16,0.3145,2,286,79.16,0.12,0.6486,287,-2.47,1.58,0.3514,1,143,140.76,-2.39,1,1,143,52.67,-3.11,1,1,286,43.97,-1.27,1],"hull":28}},"fa07":{"fa07":{"type":"mesh","uvs":[0.97587,0,1,0.01046,0.99999,0.12104,0.99287,0.30721,0.83386,0.64361,0.65011,0.83092,0.49924,0.9668,0,0.99888,0,0.90113,0.0945,0.79889,0.23441,0.72177,0.45782,0.65487,0.38732,0.66886,0.25512,0.66588,0.13149,0.63514,0.26166,0.62464,0.40661,0.60396,0.54877,0.55637,0.7334,0.437,0.85253,0.30433,0.86775,0.08439,0.9387,0,0.55005,0.61785,0.64505,0.55909,0.58329,0.57247,0.48392,0.61289,0.34469,0.64347],"triangles":[21,0,1,20,21,1,2,20,1,19,20,2,3,19,2,3,18,19,9,10,6,8,9,6,7,8,6,11,22,5,5,10,11,6,10,5,3,4,18,23,18,4,4,22,23,5,22,4,14,15,26,13,14,26,26,15,16,26,16,25,11,26,25,12,26,11,13,26,12,23,17,18,24,17,23,25,16,17,25,17,24,22,25,24,22,24,23,11,25,22],"vertices":[1,28,-7.14,3.04,1,1,28,-2.54,9.78,1,1,28,47.32,10.66,1,1,29,43.09,19.58,1,3,30,48.23,45.18,0.94459,31,-67.46,48.08,0.0071,29,200.8,11.06,0.04832,2,30,143.71,69.48,0.17798,31,28.97,68.32,0.82202,3,30,216.43,83.7,0.0001,31,102.22,79.44,0.95942,32,21.33,78.32,0.04048,1,32,105.12,-32.02,1,1,32,67.41,-54.87,1,1,32,14.46,-56.46,1,3,234,70.53,30.47,0.00176,31,70.87,-49.29,0.40284,32,-35.29,-41.47,0.5954,5,233,75.93,10.77,0.14767,234,3.96,13.69,0.45719,30,125.52,-24.27,0.04223,31,6.82,-24.58,0.35109,32,-93.06,-4.37,0.00182,2,234,24.3,15.84,0.98493,31,24.68,-34.56,0.01507,2,234,59.73,6.99,0.03699,235,9.32,9.79,0.96301,2,234,90.25,-13.62,0,235,44.2,-2.04,1,2,234,54.12,-10.84,0.12439,235,8.61,-8.88,0.87561,2,233,73.54,-16.09,0.16452,234,13.05,-11.7,0.83548,1,233,29.25,-9.86,1,3,233,-43.77,-22.58,0.17851,30,2.33,-40.52,0.54283,29,116.28,-36.98,0.27866,2,30,-63.14,-59.87,0.00022,29,50.57,-18.45,0.99978,1,28,31.43,-26.13,1,1,28,-6.96,-7.22,1,2,233,45.54,12.59,0.6139,30,95.69,-18.21,0.3861,2,233,8.68,7,0.77056,30,58.41,-18.58,0.22944,2,233,25.95,1.66,0.9631,30,74.76,-26.29,0.0369,3,233,58.83,-0.11,0.99728,30,107.07,-32.65,0.00183,31,-11.96,-32.17,0.00089,1,234,33.45,2.21,1],"hull":22}},"fa08":{"fa08":{"type":"mesh","uvs":[0.9176,0.12857,0.99991,0.36368,0.9959,0.48096,0.9068,0.63138,0.64963,0.75782,0.32904,0.86645,0.14359,0.90482,0.0347,0.92735,0.04455,0.86364,0.12978,0.79895,0.35741,0.69685,0.52287,0.55849,0.59711,0.3668,0.54175,0.17372,0.41563,0.10335,0.19161,0.08083,0.27322,0.01691,0.43225,0,0.69446,0.01124,0.55796,0.05934,0.78884,0.25124,0.7911,0.47916,0.64059,0.66963,0.37432,0.78935,0.1618,0.86644],"triangles":[6,7,24,24,7,8,6,24,5,5,23,4,5,24,23,8,9,24,24,9,23,9,10,23,4,23,22,23,10,22,4,22,3,10,11,22,3,22,21,22,11,21,3,21,2,11,12,21,2,21,1,1,21,20,21,12,20,12,13,20,20,0,1,0,20,19,20,13,19,19,18,0,19,16,17,19,15,16,13,14,19,14,15,19,19,17,18],"vertices":[1,22,63.01,68.62,1,1,23,71.44,57.33,1,2,23,153.89,56.29,0.59588,24,-13.78,54.58,0.40412,1,24,94.36,59.97,1,2,24,209.09,29.28,0.1652,25,54.02,57.07,0.8348,1,26,65.87,77.03,1,2,26,124.11,44.4,0.00307,27,52.2,33.65,0.99693,2,26,141.17,3.95,0.00002,27,59.86,-9.57,0.99998,2,26,96.04,-29.29,0.28874,27,8.48,-31.97,0.71126,3,25,155.33,-45,0.00391,26,47.24,-42.76,0.99102,27,-42.08,-34.28,0.00507,2,25,62.17,-43.54,0.98799,26,-45.89,-45.82,0.01201,3,23,208.39,-67.18,0.00335,24,71.28,-50.19,0.89722,25,-40.74,-70.7,0.09943,3,22,186.51,-72.06,0.00495,23,73.63,-47.8,0.99305,24,-63.82,-66.95,0.00201,2,21,45.6,-63.09,0.05993,22,55.37,-34.2,0.94007,2,21,16.63,-11.21,0.95711,22,-2.87,-46.01,0.04289,1,12,-3.82,34.87,1,2,21,-15.71,52.26,0.04107,12,38.71,9.09,0.95893,3,21,26.59,60.89,0.48761,12,46.3,-33.41,0.51011,22,-68.51,-14.56,0.00227,3,21,94.21,47.69,0.46304,12,31.45,-100.68,0.04305,22,-35.36,45.83,0.49391,3,21,56.06,16.75,0.83015,12,1.45,-61.79,0.05828,22,-17.5,0.07,0.11157,2,22,130.18,4.95,0.90826,23,-7.6,2.25,0.09174,2,23,152.63,2.83,0.55328,24,-0.94,2.68,0.44672,1,24,138.58,0.01,1,2,25,110.14,0.58,0.50785,26,-0.11,0.57,0.49215,2,26,77.23,-5.07,0.7853,27,-4.48,-4.18,0.2147],"hull":19}},"fa09":{"fa09":{"type":"mesh","uvs":[0.54594,0.00557,0.75909,0.12583,0.96142,0.25425,1,0.40097,0.99999,0.5685,0.92718,0.74232,0.8794,0.85641,0.57242,0.93837,0.47696,0.96386,0.42031,0.97898,0.27127,1,0.3499,0.89898,0.41163,0.81967,0.48178,0.72954,0.55257,0.63858,0.57674,0.47885,0.52802,0.31706,0.37296,0.21731,0.03105,0.1557,0,0.10787,0,0.07235,0.05648,0.03801,0.11169,0.00444,0.42453,0.10879,0.80284,0.32259,0.71669,0.74236,0.46564,0.88757,0.75873,0.53752,0.62424,0.22166,0.19618,0.06488],"triangles":[29,22,0,21,22,29,29,19,20,29,20,21,23,29,0,23,0,1,18,19,29,23,18,29,17,18,23,28,23,1,17,23,28,28,1,2,16,17,28,24,28,2,16,28,24,24,2,3,15,16,24,27,15,24,3,27,24,4,27,3,14,15,27,25,14,27,27,4,25,25,13,14,4,5,25,6,25,5,26,25,6,25,12,13,25,26,12,11,12,26,7,26,6,8,26,7,10,11,26,10,26,9,8,9,26],"vertices":[1,206,-51.02,75.08,1,1,206,61.02,73.23,1,2,207,-63.56,33.4,0.00976,206,176.89,65.36,0.99024,1,207,51.34,54.58,1,1,207,183.64,66.66,1,2,208,-47.96,37.45,0.16885,207,322.74,59.18,0.83115,2,208,26.49,90.51,0.98378,207,414.03,54.27,0.01622,1,208,145.45,81.51,1,1,208,217.43,69.01,1,1,208,297.97,41.37,1,1,208,361.02,-56.14,1,1,208,261.07,-67.2,1,1,208,146.14,-60.4,1,2,208,29.77,-58.33,0.60023,207,323.82,-64.17,0.39977,2,208,-35.83,-94.12,0.00942,207,250.21,-51.27,0.99058,2,207,123.46,-56.14,0.99933,206,269.67,-120.07,0.00067,2,207,-3.08,-81.19,0.21677,206,154.37,-62.24,0.78323,1,206,64.67,-55.64,1,1,206,-27.35,-108.79,1,1,206,-63.91,-95.56,1,1,206,-87.64,-80.38,1,1,206,-102.17,-52.57,1,1,206,-116.38,-25.38,1,1,206,-0.14,2.74,1,2,207,-5.61,-5.26,0.12316,206,198.94,-0.71,0.87684,2,208,-7.74,-4.48,0.04124,207,328.05,1.32,0.95876,1,208,123.34,25.16,1,1,207,165.23,-1.89,1,1,206,104.96,0.92,1,1,206,-63.44,-31.57,1],"hull":23}},"fa10":{"fa10":{"x":30.41,"y":-143.53,"rotation":-4.46,"width":155,"height":293}},"honhua":{"honhua":{"type":"mesh","uvs":[1,0.51897,1,0.54788,0.97826,0.71096,0.67401,1,0.48751,1,0,0.72392,0,0.536,0.27576,0.08009,0.53565,0.01702],"triangles":[2,3,1,4,6,7,1,3,4,4,7,8,4,5,6,0,1,4,4,8,0],"vertices":[3,192,214.32,302.92,0.03465,232,-20.99,-68.52,0.9244,255,728.16,288.01,0.04095,3,192,210.5,302.92,0.03678,232,-24.54,-67.12,0.92379,255,724.34,288.01,0.03943,3,192,188.98,306.16,0.04521,232,-43.38,-56.21,0.90569,255,702.82,291.29,0.0491,3,192,150.82,351.49,0.08937,232,-62.24,-0.05,0.85656,255,664.74,336.68,0.05408,3,192,150.81,379.28,0.08595,232,-52.05,25.81,0.88028,255,664.79,364.47,0.03377,3,192,187.25,451.92,0.05053,232,8.49,80.02,0.92523,255,701.35,437.05,0.02424,3,192,212.05,451.92,0.02704,232,31.57,70.92,0.94299,255,726.15,437.01,0.02997,2,232,72.49,10.62,0.96327,255,786.27,395.83,0.03673,2,232,66.03,-28.45,0.95203,255,794.53,357.09,0.04797],"hull":9}},"houbai":{"houbai":{"type":"mesh","uvs":[0.96796,0.26479,1,0.29432,0.99999,0.3792,0.88775,0.51021,0.73767,0.67628,0.56928,0.80055,0.26647,0.95706,0.05386,1,0,1,0.03811,0.89643,0.13561,0.79237,0.27921,0.70129,0.30614,0.68421,0.20401,0.68397,0.10963,0.6543,0.09994,0.42377,0.16906,0.27366,0.29554,0.29364,0.47845,0.42369,0.70009,0.36578,0.86314,0.27516,0.95038,0.24858,0.39114,0.83698,0.82792,0.39266,0.52079,0.55238,0.48103,0.65318,0.62537,0.57332],"triangles":[5,22,4,25,4,22,4,25,26,10,22,9,10,11,22,6,7,22,8,22,7,6,22,5,22,8,9,22,11,25,11,12,25,12,13,25,24,13,14,18,15,17,17,15,16,15,18,14,24,14,18,25,13,24,4,26,3,25,24,26,26,23,3,26,24,23,24,19,23,24,18,19,23,19,20,2,3,23,1,2,23,23,20,0,20,21,0,1,23,0],"vertices":[1,103,91.62,8.87,1,1,103,99.8,53.9,1,3,103,177.17,114.25,0.99267,104,-142.11,67.67,0.00726,101,-367.74,-174.15,0.00007,3,103,362.23,123.26,0.1309,104,27.34,142.63,0.77193,101,-199.55,-96.41,0.09717,2,104,248.49,233.81,0.00094,101,20.07,-1.59,0.99906,1,101,230.6,42.68,1,1,102,166.66,75.82,1,1,102,372.1,42.05,1,1,102,419.21,21.94,1,2,105,549.26,240.34,0,102,338.85,-73.94,1,3,105,424.08,154.32,0.03189,102,206.33,-148.14,0.96686,101,582.97,-171.83,0.00125,3,105,261.79,96.05,0.42706,102,39.39,-191.33,0.425,101,412.05,-194.68,0.14794,3,105,231.35,85.12,0.68934,102,8.08,-199.43,0.18023,101,380,-198.96,0.13043,3,105,323.7,55.04,0.99344,102,97.3,-237.83,0.0043,101,463.96,-247.79,0.00226,1,105,398.59,-5.16,1,2,104,618.36,-328.53,0.0032,105,325.55,-261.62,0.9968,2,104,472.72,-443.5,0.02072,105,209.72,-406.58,0.97928,2,104,381.46,-361.82,0.05305,105,102.33,-347.68,0.94695,2,104,309.65,-143.4,0.57507,105,-17.06,-151.19,0.42493,2,103,340.37,-120.16,0.0357,104,94.47,-92.37,0.9643,2,103,162.39,-62.34,0.99244,104,-92.4,-102.41,0.00756,1,103,87.13,-15.83,1,3,105,208.64,278.01,0.00292,102,3.11,-5.27,0.60181,101,398.36,-5.6,0.39528,2,103,290.09,-5.2,0.28523,104,6.21,-3.17,0.71477,3,104,351.67,4.87,0.80653,105,-9.7,2.75,0.18639,101,127.01,-228.8,0.00708,4,104,444.04,85.34,0.03576,105,62.05,102.04,0.57579,102,-158.96,-167.1,0.00217,101,218.04,-146.82,0.38628,3,104,278.84,76.8,0.72552,105,-96.93,56.32,0.00619,101,53,-158.08,0.26829],"hull":22}},"houbai01":{"houbai01":{"type":"mesh","uvs":[0.99088,0,1,0.06139,1,0.11523,0.98431,0.18385,0.94085,0.27795,0.85814,0.45703,0.72999,0.6203,0.58003,0.77105,0.49606,0.84693,0.37431,0.91379,0.26116,0.95313,0.19429,0.96741,0.13026,0.98006,0.04475,0.99273,0.00006,0.99433,0.05745,0.97635,0.152,0.94523,0.22878,0.90257,0.30012,0.83568,0.36769,0.7509,0.41069,0.65749,0.46456,0.55096,0.55122,0.4066,0.63384,0.30821,0.71539,0.22706,0.7886,0.17798,0.8464,0.10975,0.88854,0.03628,0.93342,0,0.9683,0.00001,0.92173,0.16672,0.84527,0.32121,0.72447,0.49921,0.57597,0.69176,0.4175,0.84065,0.23257,0.92786,0.94599,0.0748,0.09794,0.97512],"triangles":[16,17,35,35,37,16,11,35,10,35,12,37,16,37,15,11,12,35,37,14,15,13,37,12,37,13,14,34,19,33,18,19,34,34,35,18,9,34,8,35,17,18,9,35,34,10,35,9,20,21,33,20,33,19,34,33,8,7,8,33,33,32,6,33,21,32,7,33,6,31,23,24,32,31,5,32,23,31,22,23,32,6,32,5,32,21,22,3,30,2,4,30,3,30,31,25,31,30,4,24,25,31,5,31,4,36,28,29,27,28,36,29,0,1,36,29,1,26,27,36,36,1,2,30,26,36,30,36,2,30,25,26],"vertices":[1,106,-16.8,16.92,1,2,106,79.35,69.82,0.98543,107,-229.92,36.28,0.01457,2,106,168.65,102.82,0.7648,107,-145.21,79.72,0.2352,2,106,292.16,118.58,0.0387,107,-24.47,110.14,0.9613,1,107,158.98,116.99,1,1,108,171.58,154.89,1,2,108,539.31,132.93,0.00557,109,152.14,138.16,0.99443,2,109,526.12,84.21,0.57859,110,72.7,102.87,0.42141,3,109,723.47,44.95,0.00076,110,273.81,96.42,0.9988,111,-106.44,65.61,0.00044,1,111,140.55,81.5,1,2,111,353.16,59.69,0.8954,112,-39.11,55.31,0.1046,1,112,82.32,42.83,1,1,112,198.04,29.15,1,1,112,350.29,3.78,1,1,112,427.15,-17.94,1,1,112,319.84,-16.86,1,1,112,142.24,-17.6,1,2,111,368.08,-45.72,0.78612,112,-11.37,-47.48,0.21388,2,110,513.27,-159.55,0.01106,111,202.76,-99.5,0.98894,2,110,322.49,-184.69,0.63577,111,30.27,-184.8,0.36423,3,109,547.36,-278.17,0.01639,110,152.91,-251.15,0.9708,111,-108.83,-302.38,0.01282,3,108,710.73,-325.76,0.01448,109,339,-314.46,0.3784,110,-46.71,-321.03,0.60712,5,106,929.7,-470.43,0.00001,107,678.92,-398.42,0.00024,108,412.89,-345.32,0.39935,109,41.99,-344.09,0.51555,110,-334.88,-398.83,0.08485,5,106,715.38,-392.33,0.01335,107,456.8,-346.5,0.06428,108,185.76,-324.19,0.79954,109,-185.73,-330.67,0.11716,110,-561.72,-422.83,0.00566,4,106,530.32,-305.44,0.11688,107,262.68,-282.37,0.37128,108,-15.29,-287.14,0.50797,109,-387.92,-300.45,0.00387,3,106,403.59,-212.86,0.44665,107,125.8,-205.61,0.44934,108,-161.37,-229.78,0.10402,3,106,254.65,-157.87,0.98698,107,-28.66,-168.82,0.01254,108,-319.4,-214.4,0.00048,1,106,106.73,-132.29,1,1,106,18.76,-79.35,1,1,106,-2.81,-20.9,1,2,106,302.49,3.26,0.40425,107,-0.42,-3.12,0.59575,3,106,606.03,-30.16,0.00005,107,304.94,-0.01,0.77059,108,-11.96,-1.66,0.22937,2,108,369.57,2.07,0.80205,109,-13.08,1.63,0.19795,2,109,418.41,-5.81,0.75057,110,-18.84,-3.55,0.24943,2,110,367.66,-8.47,0.14184,111,16.22,-3.43,0.85816,2,111,380.72,-2.32,0.59425,112,-4.15,-2.85,0.40575,1,106,135.03,-12.44,1,1,112,250.33,3.18,1],"hull":30}},"houbai02":{"houbai02":{"type":"mesh","uvs":[0.39894,0,0.48653,0.15161,0.54995,0.28819,0.61054,0.44643,0.6955,0.54787,0.78388,0.60546,0.86032,0.62671,0.91718,0.5968,0.9695,0.50107,0.99094,0.56256,1,0.58855,1,0.60305,0.98412,0.68097,0.9502,0.75525,0.73646,0.91269,0.54946,0.97183,0.39543,0.99519,0.20154,1,0.06573,0.98248,0,0.96812,0.00001,0.93967,0.05494,0.85989,0.14447,0.77812,0.21907,0.73498,0.18566,0.68728,0.15872,0.61961,0.22433,0.61274,0.29004,0.62137,0.37096,0.65457,0.34023,0.60349,0.4207,0.59761,0.51333,0.66445,0.57639,0.70778,0.51997,0.65674,0.43714,0.58273,0.41591,0.54482,0.33604,0.37176,0.32005,0.29805,0.35624,0.2979,0.37054,0.30412,0.37942,0.10618,0.39146,0,0.89907,0.67242,0.81876,0.67976,0.70092,0.61923,0.6154,0.5587,0.53718,0.42664,0.47773,0.30925,0.82367,0.79617,0.56429,0.90493,0.28001,0.91248,0.71205,0.7755,0.80438,0.76395,0.88372,0.71562,0.95438,0.64827,0.41955,0.90877,0.67671,0.81146,0.48502,0.80551,0.69174,0.6819,0.52218,0.5807],"triangles":[36,39,35,35,39,47,47,39,40,0,47,40,0,40,41,36,38,39,36,37,38,47,1,2,47,0,1,33,59,32,32,59,58,59,45,58,33,34,59,59,34,46,59,46,45,46,34,35,46,3,45,45,3,4,35,47,46,46,2,3,46,47,2,32,58,51,52,43,53,52,58,43,58,44,43,58,45,44,44,5,43,43,5,6,45,4,44,44,4,5,43,6,42,54,42,9,42,6,7,54,9,11,9,42,7,9,10,11,7,8,9,17,50,16,17,18,50,19,20,18,18,20,50,50,22,23,22,50,21,50,20,21,50,23,27,27,23,26,23,24,26,24,25,26,16,55,15,16,50,55,15,49,14,15,55,49,50,28,55,50,27,28,55,57,49,55,28,57,49,57,56,57,32,56,28,30,57,57,31,32,57,30,31,28,29,30,14,48,13,14,49,48,49,56,48,48,51,52,48,56,51,56,32,51,48,52,53,51,58,52,12,13,48,54,12,53,53,12,48,53,42,54,53,43,42,12,54,11],"vertices":[1,238,273.7,-7.16,1,2,237,361.33,-100.07,0.00045,238,116.26,-64.32,0.99955,2,237,225.46,-85.36,0.78479,238,-16.5,-96.76,0.21521,2,114,328.87,-87.64,0.13188,237,80.55,-55.98,0.86812,1,114,195.32,-45.78,1,2,113,274.45,-69.89,0.06381,114,67.09,-37.79,0.93619,1,113,181.12,-20.76,1,1,113,100.27,-17.76,1,2,111,124.41,-127.3,0.00293,113,8.88,-65.04,0.99707,1,113,-3.45,-10.51,1,2,111,115.17,-48.31,0.07501,113,-8.66,12.53,0.92499,2,111,119.9,-38.11,0.18167,113,-5.04,23.17,0.81833,1,111,164.91,7.59,1,1,111,231.06,40.4,1,1,112,156.77,48.28,1,2,112,413.45,13.97,0.21334,239,23.03,35.78,0.78666,1,239,233.51,45.84,1,1,240,121.83,44.72,1,1,240,306.99,32,1,1,240,396.64,21.29,1,1,240,396.72,-0.77,1,1,240,322.15,-62.94,1,2,239,568.89,-135.35,0.0148,240,200.41,-126.87,0.9852,2,239,466.01,-164.87,0.2706,240,98.88,-160.78,0.7294,2,239,510.1,-203.55,0.3296,240,144.6,-197.53,0.6704,2,239,544.78,-257.37,0.32857,240,181.55,-249.81,0.67143,3,239,455.22,-259.27,0.37228,240,92.15,-255.55,0.6277,114,795.71,187.63,0.00002,3,239,365.98,-249.16,0.55723,240,2.56,-249.28,0.44148,114,708.02,168.2,0.00129,3,239,256.75,-219.22,0.89892,240,-107.85,-224.05,0.08659,114,594.99,161.02,0.01449,3,239,297.08,-260.39,0.93042,240,-65.79,-263.45,0.05315,114,646.52,135.19,0.01643,3,239,187.31,-260.74,0.95011,240,-175.44,-268.51,0.02198,114,542.81,99.19,0.02791,4,112,387.49,-227.89,0.00475,239,63.14,-204.15,0.87292,114,406.99,112.37,0.10255,237,56.31,157.36,0.01978,4,112,315.92,-169.64,0.09852,239,-21.47,-167.31,0.36595,114,315,119.72,0.31592,237,-28.48,120.94,0.2196,4,112,377.04,-230.81,0.00804,239,53.85,-209.77,0.05989,114,400.04,104.03,0.05815,237,54.05,146.75,0.87392,3,239,164.48,-271.41,0.00214,237,174.73,185.15,0.93889,238,-156.33,140.29,0.05897,3,239,192.28,-301.87,0.00023,237,215.96,184.54,0.86323,238,-117.36,153.76,0.13654,2,237,387.64,165.42,0.22762,238,50.57,194.26,0.77238,2,237,443.26,140.04,0.17541,238,111.51,189.34,0.82459,2,237,408.22,105.34,0.16653,238,90.38,144.78,0.83347,2,237,390.95,95.09,0.14444,238,77.64,129.26,0.85556,1,238,210.88,52.29,1,1,238,278.09,2.05,1,2,111,267.32,-47.14,0.35378,113,142.51,29.78,0.64622,3,111,369.03,-87.97,0.0072,112,-5.25,-89.29,0.01263,114,4.96,3.62,0.98017,3,112,133.34,-183.07,0.00705,239,-193.7,-229.39,0.00057,114,172.29,5.05,0.99238,3,112,229.97,-263.38,0.00046,239,-79.02,-280.73,0.00114,237,14.76,1.33,0.9984,2,239,23.6,-387.08,0.00001,237,162.53,3.28,0.99999,2,237,284.1,-4.64,0.2054,238,11.14,-0.9,0.7946,4,111,400.88,-3.3,0.09201,112,15.98,-1.35,0.89309,113,270.69,87.5,0.0029,114,-27.47,88.08,0.012,3,239,0.85,-15.26,0.98942,114,286.71,270.77,0.00982,237,-123.99,241.33,0.00076,2,239,388.26,-24.23,0.2759,240,15.18,-23.6,0.7241,3,112,155.93,-63.12,0.67161,239,-204.23,-107.79,0.00743,114,122.82,116.63,0.32096,3,111,414.24,-37.01,0.03685,112,33.37,-33.16,0.6382,114,4.9,71.75,0.32495,2,111,300.38,-25.56,0.70383,113,173.1,54.74,0.29617,2,111,191.04,-32.44,0.57354,113,65.11,36.33,0.42646,4,239,198.1,-19.83,0.62614,240,-175,-27.36,0.36867,114,474.74,330.54,0.00482,237,14.42,381.94,0.00037,6,111,587.62,-76.71,0.00389,112,210.31,-51.32,0.49889,239,-155.03,-81.78,0.27334,113,464.14,34.23,0.00012,114,160.9,157.21,0.22355,237,-182.27,82.19,0.00021,5,112,457.66,-135.61,0.00199,239,105.87,-96.39,0.79524,240,-263.85,-107.8,0.14742,114,412.4,228.17,0.04675,237,7.05,262.3,0.00859,4,112,160.11,-140.66,0.24383,239,-179.34,-181.34,0.04102,114,170.26,55.16,0.69225,237,-126.37,-3.71,0.0229,5,112,356.15,-286,0.00517,239,48.59,-268.55,0.03859,114,414.16,46.74,0.03738,237,93.28,102.66,0.91654,238,-204.82,34.99,0.00232],"hull":42}},"houfa06":{"houfa06":{"type":"mesh","uvs":[0.20873,0.00503,0.10791,0.15936,0.1027,0.39688,0.20726,0.59685,0.46477,0.78171,0.70378,0.87829,0.99999,0.93998,1,0.9805,0.90825,1,0.64006,0.96548,0.28154,0.8125,0.07098,0.6187,0.00409,0.43467,0,0.16912,0.09857,0.02347,0.17645,0.00002,0.49928,0.86412,0.13703,0.57491,0.03114,0.27331,0.90522,0.95847,0.26283,0.69341],"triangles":[15,0,1,15,18,13,14,15,13,1,18,15,11,12,17,17,18,2,2,3,17,17,12,18,12,13,18,2,18,1,16,20,4,10,11,20,11,17,20,16,10,20,17,3,20,4,20,3,9,19,8,8,19,7,19,6,7,10,16,9,9,16,19,16,5,19,19,5,6,5,16,4],"vertices":[1,164,135.91,-15.22,1,1,164,57.24,-6.59,1,1,163,90.34,-7.89,1,2,162,149.04,-12.93,0.93228,163,-9.43,-18.9,0.06772,2,161,156.13,-33.44,0.00568,162,36.42,-17.06,0.99432,1,161,78.92,-15.89,1,1,161,-5.76,-19.83,1,1,161,-13.46,-1.88,1,1,161,5.44,16.45,1,1,161,78.06,29.47,1,1,162,52.99,31.48,1,2,162,161.78,22.89,0.8418,163,-13.52,18.89,0.1582,1,163,76.94,21.28,1,1,164,45.82,20.39,1,1,164,120.28,11.36,1,1,164,136.21,-6.24,1,2,161,131.98,-0.58,0.64877,162,-1.25,-1.43,0.35123,2,162,168.61,-3.8,0.11448,163,4.22,-2.18,0.88552,2,163,152.31,0.75,0.57676,164,-0.99,0.38,0.42324,1,161,14.07,-1.63,1,1,162,102.55,2.1,1],"hull":16}},"houfa07":{"houfa07":{"type":"mesh","uvs":[0.59233,0,0.75477,0.026,0.90008,0.06963,1,0.12639,0.8371,0.12422,0.63943,0.16747,0.51902,0.23775,0.46412,0.43454,0.48359,0.6584,0.55403,0.80236,0.6205,0.93822,0.57551,1,0.47054,0.98864,0.30597,0.92205,0.16617,0.82505,0.06094,0.7096,0.0115,0.59435,0.00074,0.42656,0.02591,0.25971,0.13795,0.11429,0.35431,0.01025,0.29692,0.76672,0.21773,0.45915,0.38366,0.18297,0.72497,0.0794],"triangles":[2,24,1,4,24,3,24,2,3,6,23,5,5,23,24,5,24,4,24,23,0,24,0,1,16,17,22,17,18,22,22,18,23,22,23,7,23,18,19,7,23,6,19,20,23,23,20,0,14,15,21,8,21,22,21,15,22,15,16,22,22,7,8,10,11,9,11,21,9,21,11,12,14,21,13,21,12,13,21,8,9],"vertices":[2,167,244.54,-29.59,0.05337,168,97.12,52.33,0.94663,2,168,149.62,21.84,0.35092,169,5.1,27.2,0.64908,1,169,60.58,15.55,1,1,169,100.38,-4.14,1,2,168,163.85,-29.01,0.0028,169,41.04,-11.5,0.9972,2,168,89.07,-23.09,0.999,169,-28.15,-40.47,0.001,3,166,212.65,-125.87,0.00874,167,139.31,-54.99,0.05309,168,37.14,-37.78,0.93817,4,165,193.7,-149.06,0.00002,166,131.42,-89.26,0.51846,167,53.21,-77.88,0.38697,168,-10.51,-113.06,0.09455,4,165,120.87,-82.04,0.29138,166,33.19,-77.12,0.70822,167,-30.63,-130.48,0.0003,168,-36.33,-208.61,0.0001,2,165,58.55,-53.49,0.91919,166,-34.1,-90.16,0.08081,1,165,-0.27,-26.56,1,1,165,-6.9,4.61,1,1,165,24.59,27.34,1,1,165,88.71,47.32,1,3,165,155.39,51.31,0.4446,166,-16.3,51.42,0.55133,167,-150.17,-62.05,0.00406,3,165,218.41,40.67,0.00429,166,41.14,79.43,0.88988,167,-123.31,-4.07,0.10583,2,166,94.52,87.37,0.59153,167,-86.92,35.79,0.40847,2,166,167.88,76.88,0.0281,167,-23.42,73.97,0.9719,1,167,45.91,100.32,1,1,167,121.83,94.07,1,2,167,199.59,45.45,0.76781,168,13.16,76.88,0.23219,2,165,138.06,-0.3,0.54642,166,-0.37,-0.64,0.45358,2,166,138.33,1.55,0.69989,167,1.23,-3.1,0.30011,2,167,137.36,0.22,0.89093,168,-1.79,1.42,0.10907,3,167,236.43,-89,0,168,131.52,3.22,0.65951,169,-2.46,2.35,0.34048],"hull":21}},"houfa08":{"houfa08":{"type":"mesh","uvs":[0.45186,0.0351,0.56808,0.08902,0.62809,0.15492,0.64211,0.17529,0.64953,0.1948,0.67221,0.15162,0.64482,0.09985,0.58213,0.05863,0.50999,0.02105,0.61468,0.0384,0.72096,0.08403,0.77003,0.17167,0.72401,0.27753,0.61349,0.39097,0.5806,0.51205,0.58469,0.67383,0.70775,0.81484,0.84528,0.87561,1,0.94397,1,0.95954,0.97028,0.99257,0.80211,1,0.67078,0.96354,0.52474,0.923,0.28162,0.74418,0.21054,0.49133,0.23824,0.30062,0.2264,0.16234,0.15035,0.06871,0.06361,0.03969,0.00001,0.01834,0.03372,0.00256,0.18053,0.00072,0.57383,0.8474,0.38218,0.63856,0.4067,0.39118,0.44458,0.18856,0.31979,0.05431,0.13705,0.02323,0.64599,0.2282,0.67203,0.24819,0.725,0.15669,0.65409,0.06948],"triangles":[42,8,9,42,7,8,10,41,42,41,5,6,41,6,42,42,6,7,10,42,9,13,40,12,40,35,39,39,36,3,12,40,11,11,40,41,41,40,39,41,39,5,39,4,5,39,3,4,11,41,10,20,21,33,17,33,16,19,20,18,23,33,22,33,17,20,33,21,22,20,17,18,23,24,33,15,33,34,33,15,16,34,33,24,24,25,34,34,14,15,14,34,35,34,25,35,14,35,13,25,26,35,35,40,13,35,26,36,35,36,39,3,36,2,26,27,36,27,37,36,36,1,2,36,0,1,36,37,0,27,28,37,29,38,28,28,38,37,38,32,37,37,32,0,38,31,32,29,30,38,30,31,38],"vertices":[3,175,-33.87,-27.09,0.02146,174,82.91,-43,0.9712,177,99.52,105.73,0.00734,3,174,37.5,-62.92,0.89653,173,184.11,-31.48,0.00446,177,80.19,60.08,0.09901,3,174,-5.96,-63.19,0.48181,173,148.13,-55.85,0.12118,177,48.78,30.03,0.39701,4,174,-18.73,-61.95,0.30462,173,136.82,-61.92,0.13617,177,38.64,22.17,0.5588,178,-1.41,29.57,0.00041,4,174,-30.08,-59,0.09836,173,125.74,-65.77,0.08272,177,28.36,16.52,0.8101,178,-12.96,31.61,0.00882,4,174,-10.7,-77,0.0013,173,151.86,-69.97,0.00037,177,54.82,16.74,0.42467,178,7.8,15.21,0.57366,2,178,39.39,12.14,0.95839,179,-6.23,22.22,0.04161,2,178,69.56,22.13,0.00449,179,22.74,9.16,0.99551,2,178,98.91,35.8,0,179,53.59,-0.65,1,1,179,18.2,-6.17,1,1,178,38.66,-14.5,1,2,177,52.8,-17.38,0.93417,178,-15.15,-10.13,0.06583,3,175,-165.88,77.13,0,173,80.53,-96.08,0.04274,177,-11.15,-20.92,0.95726,4,175,-154.18,152.14,0,173,9.82,-68.45,0.7809,172,147.44,-74.56,0.02935,177,-85.48,-5.49,0.18975,5,175,-167.96,222.81,0,173,-62.17,-66.65,0.25057,172,76.16,-64.38,0.71614,171,172.43,-92.93,0.02679,177,-156.75,-15.74,0.0065,3,173,-156.38,-79.87,0.00028,172,-18.96,-66.53,0.11673,171,87.83,-49.4,0.88299,2,171,-4.32,-46.05,0.24485,170,113.61,-37.42,0.75515,1,170,56.5,-30.35,1,1,170,-7.75,-22.4,1,1,170,-12.51,-14.58,1,1,170,-14.28,7.08,1,1,170,30.57,39.49,1,2,175,-285.11,462.87,0,170,78.51,43.57,1,3,175,-231.98,456.53,0,171,-32.24,36.83,0.13817,170,131.82,48.12,0.86183,2,172,-61.17,32.53,0.00097,171,98.05,57.79,0.99903,1,172,87.31,57.1,1,4,175,-20.4,143.5,0.00023,174,-25.4,89.49,0.04922,173,47.14,60.31,0.62348,172,199.52,48.96,0.32707,4,175,10.61,68.24,0.20371,174,49.06,56.6,0.61202,173,127.33,74.32,0.17984,172,280.79,53.54,0.00443,4,176,-9.86,27.73,0.05073,175,52.61,24.78,0.89482,174,109.46,54.29,0.05354,173,178.83,105.95,0.00091,2,176,20.35,14.03,0.97297,175,85.15,18.28,0.02703,2,176,42.51,3.94,0.99979,175,109.01,13.47,0.00021,2,176,32.58,-6.55,0.99992,175,101.72,1.01,0.00008,2,176,-15.13,-13.11,0.03716,175,56.74,-16.2,0.96284,3,175,-232.2,409.26,0,171,-0.57,1.72,0.49362,170,141.18,1.78,0.50638,2,172,1.22,0.07,0.56813,171,137.36,-0.52,0.43187,3,175,-90.34,175.07,0,173,1.21,-1.17,0.99936,177,-105.2,59.4,0.00064,3,174,3.27,-0.51,0.73512,173,120.98,1.39,0.26407,177,12.45,81.94,0.00081,2,175,3.13,-1.89,0.75728,174,92.18,0.8,0.24272,3,176,-2.48,1.67,0.30926,175,65.72,1.06,0.69064,174,135.33,46.24,0.00011,4,175,-132.03,58.42,0,174,-47.12,-49.17,0.02483,173,106.11,-67.07,0.08851,177,9.23,11.96,0.88666,3,174,-61.46,-51.56,0.00017,173,95.51,-77.01,0.00115,177,0.44,0.39,0.99868,2,177,56.97,-0.7,0.58985,178,-1.45,0.27,0.41015,2,178,54.81,2.63,0.69845,179,-1.32,4.79,0.30155],"hull":33}},"houfa09":{"houfa09":{"type":"mesh","uvs":[0.60148,0.00001,0.82125,0.05559,0.95354,0.13592,0.99999,0.3235,0.94601,0.54528,0.77877,0.73744,0.65121,0.88398,0.44146,1,0.31903,1,0.09185,0.96438,0.00001,0.80608,0.03253,0.62435,0.30902,0.42116,0.49505,0.22024,0.4795,0.09663,0.34423,0.90002,0.45266,0.68201,0.79693,0.37705],"triangles":[13,0,17,14,0,13,0,1,17,2,17,1,3,17,2,12,13,17,4,17,3,17,4,16,17,16,12,5,16,4,11,12,16,10,11,16,6,16,5,15,10,16,6,15,16,9,10,15,8,9,15,7,15,6,8,15,7],"vertices":[1,182,108.16,10.38,1,1,182,88.59,-16.88,1,1,182,63.71,-31.49,1,2,181,121.83,-18.96,0.10525,182,10.45,-30.49,0.89475,1,181,62.88,-41.09,1,2,180,81.12,-46.24,0.17983,181,4.37,-45.79,0.82017,2,180,37.41,-36.54,0.87059,181,-40.26,-49.38,0.12941,2,180,0.24,-14.39,0.99992,181,-82.3,-39.16,0.00008,1,180,-2.66,1.88,1,1,180,1.85,33.83,1,1,180,43.63,53.87,1,2,180,94.85,58.53,0.96237,181,-13.35,58.38,0.03763,3,180,157.81,31.83,0.16128,181,54.68,51.4,0.66535,182,-4.12,65.67,0.17338,3,180,217.99,17.03,0.00031,181,116.55,54.97,0.04124,182,48.59,33.07,0.95845,1,182,83.41,30.4,1,1,180,25.69,3.47,1,2,180,88.79,-0.16,0.80116,181,-1.87,0.51,0.19884,2,181,95.87,-1.49,0.58097,182,-0.77,-1.28,0.41903],"hull":15}},"jin":{"jin":{"x":-23.39,"y":6.54,"rotation":121.02,"width":180,"height":185}},"l_gebo01":{"l_gebo01":{"type":"mesh","uvs":[0.04421,0,0.20492,0.02312,0.36123,0.04561,0.48661,0.1127,0.54744,0.21647,0.66823,0.14038,0.70228,0.14744,0.75635,0.29178,0.84601,0.36783,1,0.37635,1,0.37984,0.99635,0.43649,0.88566,0.47378,0.81842,0.4773,0.80077,0.59079,0.72393,0.59237,0.66756,0.66317,0.60431,0.79469,0.54516,0.91768,0.4322,0.99447,0.35475,0.98937,0.35244,0.90338,0.34954,0.7958,0.34621,0.67164,0.38201,0.54007,0.39702,0.48493,0.37938,0.43828,0.23962,0.28612,0.08829,0.12137,0,0.02525,0.00001,0.0038,0.61742,0.4904,0.51327,0.59841,0.46915,0.7396,0.41408,0.8909],"triangles":[29,30,0,1,29,0,3,28,2,2,28,1,1,28,29,14,15,13,13,15,31,13,31,8,7,31,26,7,26,4,4,6,7,4,5,6,26,31,25,13,8,12,8,31,7,12,8,11,26,27,4,11,8,10,8,9,10,3,27,28,27,3,4,18,19,34,19,20,34,20,21,34,18,34,17,21,22,34,33,34,22,33,17,34,22,23,33,17,33,16,33,32,16,33,23,32,23,24,32,16,32,15,32,24,31,32,31,15,31,24,25],"vertices":[1,5,713.53,-137.73,1,2,51,211.34,45.84,0.89714,5,660.21,-209.3,0.10286,1,51,297.45,34.9,1,2,52,78.29,62.41,0.86001,51,373.35,-22.95,0.13999,1,52,185.15,37.32,1,1,52,151.78,132.1,1,1,52,167.19,144.22,1,1,52,307.52,95.21,1,1,52,398.09,97.64,1,1,52,447.39,164.4,1,1,52,450.42,162.61,1,1,52,498.74,131.89,1,1,52,501.08,61.66,1,1,52,485.85,28.8,1,2,249,-19.56,122.71,0.25977,52,579.82,-37.52,0.74023,2,249,-11.51,82.29,0.53006,52,560.3,-73.82,0.46994,2,249,63.87,63.68,0.98217,52,606.59,-136.14,0.01783,2,249,200.37,51.08,0.87471,250,-27.02,48.09,0.12529,1,250,101.11,52.31,1,1,250,192.49,15.82,1,1,250,199.13,-25.48,1,1,250,116.07,-50.91,1,2,249,222.95,-83.6,0.51921,250,12.17,-82.73,0.48079,1,249,99.38,-105.07,1,2,249,-34.87,-107.01,0.84979,52,421.78,-204.93,0.15021,2,249,-91.13,-107.82,0.53403,52,377.88,-169.74,0.46597,2,249,-136.18,-124.56,0.26439,52,332.48,-153.98,0.73561,3,249,-276.17,-222.69,0.0053,52,162.05,-140.55,0.99221,51,266.37,-214.69,0.00249,3,52,-22.5,-126,0.18784,51,163.1,-61.06,0.69216,5,590.83,-114.75,0.12,2,51,102.84,28.57,0.41428,5,698.49,-106.33,0.58572,1,5,718.65,-114.28,1,2,249,-104.24,9.72,0.31123,52,442.59,-70.75,0.68877,1,249,12.26,-28.27,1,2,249,156.81,-29.21,0.99767,250,-60.24,-37.01,0.00233,1,250,94.74,-22.7,1],"hull":31}},"l_gebo02_yinying":{"l_gebo02_yinying":{"x":712.79,"y":16.23,"rotation":59.51,"width":496,"height":556}},"l_mei":{"l_mei":{"x":-4.19,"y":-142.78,"rotation":-95.86,"width":172,"height":43}},"l_shangjiemao01":{"l_shangjiemao01":{"type":"mesh","uvs":[1,1,0,1,0,0,1,0],"triangles":[1,2,3,1,3,0],"vertices":[16.75,-55.93,19.71,-27.08,31.65,-28.31,28.69,-57.15],"hull":4}},"l_shangjiemao02":{"l_shangjiemao02":{"type":"mesh","uvs":[0.17168,0.11146,0.29375,0.0205,0.43385,0.00244,0.60273,0.06712,0.77849,0.27067,0.9052,0.52986,0.74498,0.831,0.58686,0.79233,0.4254,0.71979,0.30572,0.68851,0.18308,0.71027,0.09957,0.77078,0.03341,1,0.01602,0.7818,0,0.58069,0.06066,0.31498,0.05307,0.6371,0.13102,0.46926,0.23228,0.37291,0.37221,0.3325,0.52213,0.38178,0.68536,0.47552,0.81663,0.5565],"triangles":[19,1,2,18,0,1,18,1,19,20,2,3,19,2,20,17,15,0,17,0,18,21,3,4,20,3,21,22,4,5,21,4,22,16,14,15,16,15,17,9,18,19,10,17,18,10,18,9,8,19,20,9,19,8,11,16,17,11,17,10,13,14,16,7,20,21,8,20,7,6,21,22,6,22,5,7,21,6,12,13,16,12,16,11],"vertices":[39.74,45.3,40.59,25.95,38.91,4.01,34.2,-22.16,25.11,-48.97,15.09,-67.94,8.37,-41.96,12.09,-17.39,16.92,7.6,19.8,26.19,21.09,45.41,20.57,58.65,14.56,69.7,21.56,71.73,28.02,73.6,35.24,63.28,25.43,65.49,29.36,52.78,30.71,36.66,29.71,14.68,25.79,-8.58,20.29,-33.78,15.69,-54.02],"hull":16}},"l_shangjiemao03":{"l_shangjiemao03":{"type":"mesh","uvs":[1,1,0,1,0,0,1,0],"triangles":[1,2,3,1,3,0],"vertices":[1.27,-79.47,4.84,-44.66,19.76,-46.19,16.19,-81],"hull":4}},"l_shangjiemao04":{"l_shangjiemao04":{"type":"mesh","uvs":[1,1,0,1,0,0,1,0],"triangles":[1,2,3,1,3,0],"vertices":[-26.51,-46.47,-25.08,-32.54,-15.13,-33.56,-16.56,-47.49],"hull":4}},"l_shangjiemao05":{"l_shangjiemao05":{"type":"mesh","uvs":[1,1,0,1,0,0,1,0],"triangles":[1,2,3,1,3,0],"vertices":[-21.18,-63.1,-18.43,-36.24,18.38,-40.01,15.63,-66.87],"hull":4}},"l_shou01":{"l_shou01":{"type":"mesh","uvs":[0.20355,0.00224,0.4571,0.08575,0.52291,0.35851,0.5303,0.38913,0.54523,0.40134,0.78428,0.59698,0.81363,0.62099,0.83958,0.64848,1,0.81835,0.99999,0.94013,0.99522,1,0.7032,0.97635,0.39374,0.87595,0.33469,0.82438,0.30859,0.80158,0.2858,0.76862,0.08423,0.47712,0.07559,0.46463,0.07181,0.44313,0,0.03505,0.58493,0.71866,0.3004,0.46399,0.63059,0.72962,0.55555,0.69236,0.32062,0.48209,0.29518,0.43909],"triangles":[16,17,21,17,18,25,18,19,25,1,25,0,0,25,19,13,20,22,13,14,20,20,15,23,20,14,15,15,24,23,15,16,24,6,22,20,20,23,6,23,5,6,23,24,5,24,4,5,16,21,24,4,21,3,4,24,21,17,25,21,21,25,3,25,2,3,25,1,2,10,11,9,8,9,11,11,12,22,8,11,22,12,13,22,22,7,8,7,22,6],"vertices":[1,57,92.97,-1.71,1,1,57,73.45,-27.92,1,2,56,69.77,-32.05,0.558,57,17.38,-30.01,0.442,2,56,64,-29.53,0.75628,57,11.08,-30.25,0.24372,2,56,61.02,-29.65,0.83754,57,8.45,-31.65,0.16246,2,55,54.15,-32.7,0.34952,56,13.26,-31.59,0.65048,2,55,49.51,-29.1,0.49442,56,7.4,-31.82,0.50558,2,55,45.01,-24.72,0.65784,56,1.13,-31.38,0.34216,2,55,17.13,2.4,1,56,-37.67,-28.61,0,2,55,9.12,25.92,1,56,-58.95,-15.79,0,1,55,5.67,37.65,1,2,55,37.64,43.44,0.99334,56,-48.44,15.99,0.00666,2,55,76.46,35.03,0.52639,56,-13.33,34.58,0.47361,3,55,86,27.16,0.2857,56,-0.96,34.71,0.71398,57,-75.36,-0.66,0.00032,3,55,90.22,23.69,0.18898,56,4.5,34.77,0.80927,57,-70.46,1.77,0.00175,3,55,94.76,18.13,0.0889,56,11.56,33.45,0.90401,57,-63.53,3.65,0.00709,2,56,73.94,21.77,0.00156,57,-2.28,20.26,0.99844,1,57,0.34,20.97,1,1,57,4.74,20.99,1,1,57,88.37,21.2,1,1,56,3.31,0.01,1,2,56,63.96,0.02,0.99897,57,-1.8,-3.66,0.00103,2,55,61.43,-1.63,0.88924,56,-1.2,-3.14,0.11076,2,56,9.57,0.01,1,57,-50.77,-27.33,0,2,56,59.65,0.01,0.99936,57,-5.68,-5.54,0.00064,1,56,68.61,-2.11,1],"hull":20}},"l_shou02":{"l_shou02":{"type":"mesh","uvs":[0.90781,0.07214,1,0.2867,1,0.45352,0.80025,0.61683,0.60585,0.53874,0.57293,0.52551,0.53782,0.51141,0.41376,0.46157,0.34305,0.57142,0.34426,0.9107,0.23187,1,0.15529,1,0.02404,0.6268,0.00001,0.58736,0.00001,0.51184,0.11241,0.07148,0.12518,0.019,0.19196,0.01712,0.79735,0,0.85908,0.01492,0.80498,0.25383,0.37875,0.17065,0.16967,0.52718,0.75625,0.23299,0.83038,0.29938,0.43173,0.16126,0.35181,0.21649,0.14696,0.55842,0.1546,0.5952],"triangles":[9,10,28,12,28,11,10,11,28,28,8,9,12,27,28,12,13,27,28,27,8,13,14,27,27,22,8,8,22,7,27,14,22,7,22,26,26,22,15,22,14,15,21,15,16,16,17,21,4,5,20,5,23,20,5,6,23,23,6,25,25,7,21,6,7,25,21,7,26,0,20,19,20,23,19,23,18,19,23,25,18,26,15,21,21,17,25,25,17,18,3,24,2,3,4,24,4,20,24,24,1,2,1,24,0,24,20,0],"vertices":[2,58,45.91,-19.75,0.352,59,-10.94,-22.21,0.648,2,58,19.41,-23.94,0.9896,59,-26.59,-0.41,0.0104,1,58,1.84,-18.08,1,3,58,-6.89,13.04,0.92992,59,-5.37,39.7,0.06996,60,15.51,82.1,0.00012,3,58,9.57,35.02,0.38886,59,21.66,34.87,0.57136,60,19.11,54.88,0.03978,4,58,12.36,38.74,0.29099,59,26.23,34.05,0.64462,60,19.72,50.27,0.0643,61,11.24,56.3,0.00009,4,58,15.33,42.71,0.20472,59,31.11,33.18,0.69139,60,20.37,45.36,0.10291,61,8.57,52.12,0.00098,4,58,25.83,56.73,0.02792,59,48.36,30.09,0.46499,60,22.67,27.99,0.45282,61,-0.88,37.36,0.05427,4,58,17.26,69.57,0.00093,59,55.99,43.52,0.07552,60,37.78,24.8,0.48845,61,8.61,25.18,0.4351,1,61,45.16,16.09,1,1,61,51.07,-0.94,1,1,61,48.55,-10.89,1,2,60,62,-10.95,0.24887,61,4.07,-17.76,0.75113,2,60,59.48,-15.76,0.43074,61,-0.96,-19.81,0.56926,2,60,51.94,-19.42,0.69331,61,-9.08,-17.75,0.30669,2,59,94.55,-6.95,0.11544,60,1.39,-27.27,0.88456,2,59,93.69,-12.96,0.16529,60,-4.59,-28.28,0.83471,2,59,84.87,-14.46,0.30304,60,-8.7,-20.32,0.69696,2,58,58.19,-8.24,0.06571,59,4.86,-28,0.93429,2,58,54,-15.56,0.1693,59,-3.56,-27.55,0.8307,2,58,31.13,-0.3,0.50765,59,-0.2,-0.27,0.49235,1,59,57.65,-1.19,1,3,59,79.68,42,0.00068,60,43.52,1.76,0.91608,61,-1.85,3.87,0.08324,1,59,6.59,-1.62,1,1,58,25.26,-1.93,1,1,59,50.77,-3.24,1,3,58,54.27,56,0.00002,59,60.49,4.37,0.79403,60,1.83,8.62,0.20595,3,59,82.2,45.87,0.00001,60,47.97,0.54,0.29044,61,0.76,0.07,0.70955,3,59,80.59,49.77,0.00003,60,51.19,3.25,0.00246,61,4.97,0.06,0.99751],"hull":20}},"l_shou03":{"l_shou03":{"type":"mesh","uvs":[0.72528,0,1,0.20034,1,0.28651,0.88837,0.50517,0.69351,0.46511,0.42563,0.41002,0.37676,0.39997,0.37089,0.42252,0.34606,0.51777,0.33967,0.54226,0.34671,0.56606,0.42787,0.84039,0.36562,0.99999,0.26463,0.99244,0.07423,0.71582,0.03676,0.66139,0.03404,0.62278,0.00899,0.26845,0.01325,0.20012,0.05393,0.14095,0.61573,0.00148,0.77232,0.25782,0.13347,0.23517,0.14057,0.29834,0.17011,0.20493,0.24438,0.65071,0.24146,0.62436,0.25214,0.68083],"triangles":[4,21,3,3,21,2,4,5,21,21,20,0,20,21,5,20,5,24,6,22,24,5,6,24,6,23,22,21,1,2,21,0,1,18,19,22,22,19,24,24,19,20,15,16,26,10,25,9,9,26,8,23,8,26,16,17,23,23,26,16,8,23,7,7,23,6,17,22,23,17,18,22,14,27,13,11,27,10,14,25,27,14,15,25,27,25,10,15,26,25,25,26,9,12,13,11,11,13,27],"vertices":[1,62,-7.15,-13.87,1,1,62,-39.25,25.5,1,1,62,-36.09,38.21,1,1,62,-12.03,66.47,1,2,63,44.26,78.25,0.00302,62,14.48,53.6,0.99698,3,64,-17.66,47.57,0.00027,63,31.06,39.94,0.1935,62,50.94,35.9,0.80623,3,64,-22.08,41.64,0.00525,63,28.65,32.95,0.3958,62,57.58,32.67,0.59895,3,64,-19.33,39.42,0.01501,63,31.95,31.66,0.53071,62,59.26,35.78,0.45428,3,64,-7.73,30.01,0.15268,63,45.86,26.23,0.73038,62,66.32,48.95,0.11695,3,64,-4.75,27.59,0.2508,63,49.44,24.83,0.68024,62,68.14,52.33,0.06896,3,64,-1.03,27.02,0.38373,63,53.16,25.42,0.57858,62,68,56.09,0.0377,1,64,41.87,20.43,1,1,64,60.02,1.89,1,1,64,52.71,-11.2,1,2,64,2.72,-19.14,0.71566,63,70.77,-17.4,0.28434,2,64,-7.12,-20.7,0.3767,63,61.88,-21.89,0.6233,2,64,-12.61,-18.61,0.2181,63,56.01,-21.56,0.7819,2,63,2.1,-18.6,0.99935,62,105.57,0.12,0.00065,2,63,-8.13,-16.7,0.89682,62,102.45,-9.8,0.10318,2,63,-16.31,-9.61,0.565,62,94.44,-17.08,0.435,1,62,8.64,-17.57,1,1,62,-4.44,25.84,1,2,63,-0.65,0.3,0.02783,62,86.48,-0.34,0.97217,2,63,9.01,0.16,0.99268,62,87.77,9.23,0.00732,1,62,80.1,-3.49,1,3,64,4.3,7.87,0.79973,63,64.06,8.81,0.1994,62,85.8,64.92,0.00088,3,64,0.48,9.16,0.51702,63,60.03,8.87,0.48012,62,85.25,60.93,0.00286,3,64,8.94,6.99,0.93551,63,68.74,9.38,0.06445,62,85.79,69.64,0.00004],"hull":21}},"l_shou04":{"l_shou04":{"type":"mesh","uvs":[0.67459,0,0.8062,0.0892,1,0.8792,1,0.92066,1,0.96602,0.94123,1,0.78355,1,0.5424,0.97951,0.17057,0.90066,0.07992,0.72178,0,0.56409,0,0.41143,0.0382,0.30343,0.12196,0.06664,0.501,0,0.50053,0.92142,0.76799,0.91893,0.7754,0.96658,0.51881,0.95375,0.4063,0.65573,0.20836,0.37625],"triangles":[9,10,19,10,11,20,8,9,19,15,8,19,8,15,18,8,18,7,7,18,17,18,15,16,16,15,19,19,1,2,1,20,14,14,0,1,10,20,19,1,19,20,11,12,20,12,13,20,20,13,14,3,4,5,7,17,6,5,6,17,18,16,17,3,5,17,17,16,3,16,2,3,16,19,2],"vertices":[1,54,205.71,-61.3,1,1,54,179.09,-80.09,1,2,53,556.04,-64.23,0.71447,54,-3.57,-65.62,0.28553,2,53,546.66,-63.45,0.80372,54,-12.6,-62.96,0.19628,2,53,536.4,-62.59,0.86196,54,-22.48,-60.06,0.13804,2,53,529.67,-50.58,0.90146,54,-26.67,-46.95,0.09854,2,53,532.22,-20.1,0.96095,54,-18.04,-17.6,0.03905,2,53,540.77,26.13,0.0632,54,-0.39,25.98,0.9368,2,54,37.11,90.14,0.00194,55,31.77,45.96,0.99806,3,54,81.03,95.57,0.00091,55,61.51,13.2,0.46761,56,-10.69,8.25,0.53148,1,56,27.97,3.07,1,2,54,152.99,90.59,0.53098,56,57.66,-14.81,0.46902,2,54,174.42,76.57,0.96286,56,74.84,-33.81,0.03714,2,54,221.42,45.83,0.8617,56,112.5,-75.46,0.1383,1,54,215.2,-28.99,1,2,53,554.59,33.12,0.00474,54,14.55,30.05,0.99526,2,53,550.82,-18.63,0.58043,54,0.47,-19.89,0.41957,2,53,539.92,-19.16,0.89442,54,-10.32,-18.22,0.10558,2,53,546.98,30.21,0.02745,54,6.51,28.72,0.97255,3,53,616.22,46.3,0.4443,54,77.57,30.59,0.53285,56,-30.51,-53.72,0.02286,2,53,682.65,79.26,0.16247,54,149.26,49.55,0.83753],"hull":15}},"l_shou05":{"l_shou05":{"type":"mesh","uvs":[0.07679,0,0.17479,0.03202,0.39527,0.25777,0.4213,0.28442,0.4491,0.31288,0.62949,0.49758,0.65402,0.5227,0.68277,0.55214,1,0.87694,1,0.94101,0.84123,0.99781,0.59495,0.98886,0.29971,0.63475,0.27954,0.61056,0.25396,0.57988,0.09534,0.38963,0.06912,0.35819,0.03624,0.31875,0.00623,0.28276,0.00873,0,0.48078,0.5957,0.4474,0.57118,0.42181,0.54309,0.26264,0.35334,0.23428,0.32359,0.22519,0.28666],"triangles":[19,0,1,18,19,1,25,18,1,2,25,1,17,18,25,3,24,25,3,25,2,17,25,24,23,24,3,16,17,24,15,16,24,23,3,4,15,24,23,22,23,4,22,4,5,15,23,22,21,22,5,21,5,6,14,15,22,21,13,14,21,14,22,12,13,21,20,21,6,20,6,7,12,21,20,20,7,8,8,11,20,8,10,11,12,20,11,9,10,8],"vertices":[1,67,84.82,-0.79,1,1,67,73.97,-9.96,1,2,66,73.93,-21.81,0.1194,67,13.6,-19.99,0.8806,2,66,66.7,-21.91,0.32949,67,6.47,-21.18,0.67051,2,66,58.99,-22.01,0.62768,67,-1.14,-22.44,0.37232,2,65,116.75,-22.43,0.17615,66,8.92,-22.67,0.82385,2,65,109.94,-22.7,0.39595,66,2.11,-22.76,0.60405,2,65,101.97,-23.02,0.69194,66,-5.87,-22.87,0.30806,1,65,13.98,-26.55,1,1,65,-0.35,-20.31,1,1,65,-5.38,2.84,1,1,65,8.52,29.28,1,2,65,102,27.52,0.66477,66,-4.48,27.65,0.33523,2,65,108.39,27.4,0.47105,66,1.9,27.36,0.52895,2,65,116.49,27.25,0.24083,66,9.99,26.99,0.75917,2,66,60.17,24.7,0.64958,67,-7.01,23.91,0.35042,2,66,68.47,24.32,0.35786,67,1.24,24.79,0.64214,2,66,78.87,23.84,0.09506,67,11.6,25.89,0.90494,2,66,88.36,23.41,0.0135,67,21.05,26.89,0.9865,1,67,87.15,7.11,1,2,65,101.99,3.63,0.93318,66,-5.14,3.77,0.06682,2,65,109.09,4.94,0.29844,66,1.99,4.89,0.70156,2,65,116.6,5.05,0.01679,66,9.51,4.79,0.98321,1,66,59.61,2.61,1,2,66,67.64,2.64,0.01515,67,3.69,3.23,0.98485,1,67,12.65,1.74,1],"hull":20}},"l_shou06":{"l_shou06":{"type":"mesh","uvs":[0.29119,0.12967,0.4366,0.29195,0.45908,0.31487,0.47704,0.33318,0.68473,0.54493,0.70742,0.56806,0.72761,0.58864,1,0.86636,1,0.94034,0.88137,1,0.74612,1,0.5275,0.95159,0.30095,0.66919,0.2822,0.64581,0.26351,0.62252,0.08813,0.4039,0.06654,0.377,0.04223,0.3467,0,0.15545,0.01472,0.03161,0.10858,0.00918,0.20624,0.03486],"triangles":[19,20,21,18,21,0,21,18,19,17,0,1,17,18,0,16,17,1,16,1,2,15,2,3,15,16,2,14,15,3,14,3,4,13,14,4,13,4,5,12,13,5,12,5,6,11,12,6,6,7,11,7,10,11,8,10,7,9,10,8],"vertices":[1,70,49.63,-17.12,1,2,69,73.23,-24.69,0.0665,70,8.67,-22.38,0.9335,2,69,67.31,-24.71,0.19769,70,2.83,-23.32,0.80231,2,69,62.59,-24.72,0.35092,70,-1.83,-24.08,0.64908,2,68,102.99,-24.98,0.21734,69,7.92,-24.9,0.78266,2,68,97.01,-24.94,0.40693,69,1.94,-24.92,0.59307,2,68,91.7,-24.9,0.59457,69,-3.37,-24.93,0.40543,1,68,20,-24.34,1,1,68,4.23,-17.02,1,1,68,-3.04,0.61,1,1,68,3.17,13.98,1,1,68,23.52,30.81,1,2,68,94.12,25.26,0.50496,69,-1.5,25.24,0.49504,2,68,99.96,24.8,0.3027,69,4.35,24.85,0.6973,2,68,105.78,24.34,0.14612,69,10.18,24.45,0.85388,2,69,64.87,20.75,0.7984,70,-6.72,21.19,0.2016,2,69,71.6,20.3,0.56094,70,0,21.8,0.43906,2,69,79.18,19.78,0.31068,70,7.57,22.48,0.68932,1,70,52.14,15.1,1,1,70,79.8,5.89,1,1,70,82.19,-5.37,1,1,70,73.57,-14.05,1],"hull":22}},"l_shou07":{"l_shou07":{"type":"mesh","uvs":[0.53826,0,0.66184,0.05247,0.67278,0.07608,0.80721,0.36622,1,0.78231,1,0.89426,0.85881,0.9966,0.48725,0.99729,0.25645,0.9184,0.20855,0.77749,0.208,0.47539,0.19999,0.23587,0.13677,0.12053,0.12324,0.08833,0.24374,0.00385,0.45006,0,0.31643,0.12347,0.56476,0.11508,0.31366,0.15139,0.5977,0.1396],"triangles":[19,17,2,16,15,17,15,0,17,16,14,15,17,1,2,17,0,1,6,7,5,4,5,7,4,7,8,8,9,4,4,10,3,4,9,10,19,3,11,11,18,19,3,10,11,19,2,3,11,12,18,18,17,19,18,16,17,18,12,16,16,13,14,16,12,13],"vertices":[1,54,55.69,-50.42,1,2,53,577.79,-66.17,0.07631,54,17.35,-71.87,0.92369,2,53,563.77,-67.78,0.16228,54,3.29,-70.64,0.83772,1,53,391.48,-87.59,1,1,53,144.41,-115.99,1,1,53,79.04,-110.51,1,1,53,22.28,-69.76,1,1,53,29.76,24.32,1,1,53,80.73,78.87,1,1,53,164.04,84.09,1,1,53,340.46,69.43,1,1,53,480.5,59.72,1,2,53,549.19,70.07,0.7923,54,16.67,67.33,0.2077,2,53,568.28,71.92,0.6312,54,35.75,65.31,0.3688,2,53,615.06,37.28,0.07334,54,74.62,21.99,0.92666,1,54,62.01,-28.93,1,2,53,543.66,24.74,0.84935,54,2.16,24.03,0.15065,2,53,543.28,-38.52,0.37654,54,-10.91,-37.87,0.62346,2,53,527.42,26.81,0.99211,54,-13.34,29.32,0.00789,2,53,528.27,-45.66,0.6124,54,-27.05,-41.85,0.3876],"hull":16}},"l_shuangyanpi":{"l_shuangyanpi":{"type":"mesh","uvs":[0.37898,0.1064,0.5645,0.25545,0.73984,0.49416,0.90405,0.70153,0.89871,0.83661,0.89494,0.93223,0.73707,0.75354,0.56011,0.57899,0.38147,0.4973,0.19947,0.5422,0.09745,0.65829,0.01476,0.82661,0.05139,0.2928,0.18671,0,0.80691,0.71357,0.6382,0.52746,0.4584,0.36567,0.29112,0.27315,0.12912,0.35479],"triangles":[17,13,0,18,12,13,18,13,17,16,0,1,17,0,16,8,17,16,15,1,2,16,1,15,9,18,17,9,17,8,7,16,15,8,16,7,18,11,12,10,18,9,14,2,3,15,2,14,6,15,14,7,15,6,10,11,18,4,14,3,5,14,4,6,14,5],"vertices":[51.96,16.31,46.13,-8.45,38.47,-31.64,31.65,-53.39,28.77,-52.36,26.73,-51.64,32.83,-30.68,39.11,-7.13,43.37,16.85,44.92,41.58,43.79,55.64,41.25,67.21,52.43,61.05,56.96,42.09,32.74,-40.22,39.15,-17.81,45.19,6.15,49.53,28.57,49.99,50.67],"hull":14}},"l_tui":{"l_tui":{"type":"mesh","uvs":[0.73742,0,0.83813,0.00001,0.90631,0.00848,0.97364,0.0333,0.99999,0.05264,0.99317,0.08787,0.98293,0.1269,0.95137,0.17869,0.77938,0.35073,0.75188,0.40929,0.72286,0.43853,0.70274,0.4588,0.68591,0.47575,0.65079,0.51114,0.60818,0.57261,0.41404,0.7694,0.39272,0.79826,0.38579,0.80736,0.38023,0.81496,0.34985,0.95902,0.33107,0.97741,0.24762,1,0.13298,0.99711,0.05599,0.97226,0.00001,0.90844,0.05754,0.84136,0.08728,0.81555,0.18595,0.78959,0.2016,0.78335,0.21514,0.77654,0.27507,0.54858,0.34035,0.50023,0.39496,0.46446,0.41814,0.44928,0.42375,0.42857,0.42889,0.40962,0.41417,0.28184,0.4257,0.15894,0.4526,0.10051,0.5061,0.06069,0.6301,0.01404,0.2645,0.80921,0.34139,0.81501,0.27961,0.79523,0.35389,0.79893,0.2726,0.80245,0.3477,0.80679,0.50803,0.46529,0.65111,0.46805,0.52549,0.44606,0.66248,0.44838,0.49387,0.47975,0.63922,0.48391,0.11074,0.88565,0.10287,0.94105,0.19229,0.97462],"triangles":[5,2,3,11,50,10,10,50,9,49,9,50,49,34,35,9,49,35,9,35,8,8,35,36,8,36,7,7,36,37,7,37,6,6,37,38,6,38,39,6,39,40,5,6,2,2,6,40,2,0,1,2,40,0,5,3,4,19,53,18,18,53,42,54,24,53,24,25,53,53,41,42,53,25,41,41,26,27,26,41,25,41,45,42,42,46,18,42,45,46,18,46,17,41,27,45,46,44,17,17,44,16,45,43,46,46,43,44,43,45,28,28,45,27,16,44,15,15,44,43,28,29,43,43,29,15,29,30,15,15,30,14,30,31,14,14,31,13,13,51,52,51,13,31,13,52,12,31,32,51,51,47,52,52,48,12,52,47,48,51,32,47,12,48,11,47,49,48,48,50,11,48,49,50,32,33,47,47,33,49,33,34,49,22,55,21,21,55,20,22,23,55,20,55,19,23,54,55,55,54,19,23,24,54,54,53,19],"vertices":[2,36,-76.72,-40.08,0.4439,2,108.31,74.47,0.5561,2,36,-83.13,54.07,0.68672,2,202.68,74.44,0.31328,2,36,-59.79,119.7,0.37714,2,266.56,46.66,0.62286,2,36,17.12,188.21,0.51143,2,329.65,-34.74,0.48857,2,36,78.71,217.17,0.78571,2,354.34,-98.17,0.21429,1,36,194.45,218.69,1,1,36,322.84,217.87,1,1,36,494.31,199.98,1,1,36,1068.3,77.76,1,1,36,1261.69,65.17,1,2,256,-51.03,34.69,0.03142,36,1359.23,44.6,0.96858,2,256,18.08,34.04,0.76289,36,1426.86,30.33,0.23711,1,256,75.85,33.49,1,1,256,196.49,32.35,1,1,256,401.52,47.01,1,1,256,1072.11,41.74,1,1,256,1168.69,47.43,1,1,256,1199.18,49.04,1,1,256,1224.63,50.59,1,1,257,129.89,107.73,1,1,257,188.49,85.06,1,1,257,255.65,0.83,1,2,257,237.02,-105.39,0.96529,256,1861.99,-15.35,0.03471,2,257,149.67,-170.32,0.89823,256,1802.4,-106.43,0.10177,2,257,-63.35,-204.72,0.11371,256,1614.33,-212.21,0.88629,1,256,1387.88,-218.24,1,1,256,1298.86,-213.68,1,1,256,1192.34,-146.96,1,1,256,1168.73,-138.21,1,1,256,1143.85,-131.85,1,1,256,407.81,-274.85,1,2,256,238.67,-257.67,0.99122,36,1585.61,-299.14,0.00878,2,256,112.03,-239.24,0.85325,36,1465.09,-256.11,0.14675,2,256,58.28,-231.42,0.67452,36,1413.93,-237.84,0.32548,2,256,-8.66,-244.27,0.39611,36,1345.78,-237.24,0.60389,2,256,-69.87,-256.02,0.19089,36,1283.45,-236.69,0.80911,1,36,866.27,-279.09,1,1,36,463.36,-295.85,1,2,36,270.43,-283.81,0.96952,2,-158.57,-255.21,0.03048,2,36,136.71,-242.72,0.82539,2,-108.44,-124.61,0.17461,2,36,-23.9,-137.26,0.68887,2,7.75,28.42,0.31113,1,256,1235.02,-58.98,1,1,256,1234.36,15.53,1,1,256,1187.06,-57.42,1,1,256,1180.4,12.92,1,1,256,1211.64,-57.51,1,1,256,1206.79,14.12,1,2,256,86.72,-136.33,0.84246,36,1460.57,-150.22,0.15754,1,256,60.09,-4.63,1,2,256,21.55,-137.19,0.5723,36,1396.5,-138.22,0.4277,2,256,-4.95,-11.37,0.40233,36,1395.33,-9.64,0.59767,2,256,135.97,-136.62,0.93792,36,1508.79,-160.22,0.06208,1,256,113.2,-1.66,1,2,257,-129.01,-94.97,0.15143,256,1514.84,-131.85,0.84857,2,257,51.44,-117.82,0.95287,256,1692.09,-91.04,0.04713,2,257,168.28,-43.73,0.99932,256,1776.2,18.81,0.00068],"hull":41}},"l_tui03":{"l_tui03":{"x":72.7,"y":-13.11,"rotation":77.81,"width":271,"height":515}},"l_xiajieao03":{"l_xiajieao03":{"type":"mesh","uvs":[1,1,0,1,0,0,1,0],"triangles":[1,2,3,1,3,0],"vertices":[-33.91,-20.58,-27.68,40.1,-15.75,38.88,-21.97,-21.8],"hull":4}},"l_yan":{"l_yan":{"x":-2.68,"y":-3.78,"rotation":-95.86,"width":76,"height":65}},"l_yanbai":{"l_yanbai":{"x":0.64,"y":7.54,"rotation":-95.86,"width":119,"height":69}},"l_yanzz":{"l_yanzz":{"type":"clipping","end":"l_yan","vertexCount":10,"vertices":[27.77,54.93,30.36,19.98,24.36,-19.96,9.04,-55.05,-10.69,-49.34,-26.9,-31.03,-28.14,-4.15,-23.43,24.64,-13.95,47.31,7.35,58.26]}},"l_yinying01":{"l_yinying01":{"type":"mesh","uvs":[0.29476,0,0.4478,0,0.65207,0.05666,0.80398,0.29307,0.92399,0.50377,1,0.63723,1,0.73164,1,0.8099,0.89259,1,0.82004,1,0.70023,0.8939,0.5537,0.76414,0.4,0.62804,0.28285,0.53945,0.13544,0.39377,0.01463,0.27378,0.00001,0.18615,0.01949,0.10321,0.13608,0.03556,0.07612,0.20325,0.21475,0.24745,0.36255,0.27407,0.53039,0.3255,0.68281,0.48016,0.83427,0.63192,0.9319,0.72073],"triangles":[19,17,18,16,17,19,20,18,0,19,18,20,15,16,19,21,0,1,20,0,21,22,1,2,21,1,22,14,19,20,15,19,14,23,2,3,22,2,23,13,20,21,14,20,13,12,21,22,13,21,12,24,3,4,23,3,24,25,4,5,24,4,25,25,5,6,11,22,23,12,22,11,25,6,7,10,23,24,11,23,10,9,10,24,8,9,24,25,8,24,8,25,7],"vertices":[37.3,-12.4,35.52,-29.76,31.56,-52.76,23.21,-69.31,15.95,-82.32,11.35,-90.56,8.72,-90.29,6.54,-90.07,2.49,-77.34,3.33,-69.12,7.68,-55.83,13,-39.58,18.58,-22.54,22.41,-9.51,28.18,6.79,32.93,20.15,35.54,21.56,37.62,19.11,38.15,5.69,34.18,12.97,31.34,-2.62,28.87,-19.31,25.49,-38.19,19.41,-55.04,13.42,-71.78,9.81,-82.6],"hull":19}},"l_yinying02":{"l_yinying02":{"type":"mesh","uvs":[0.83637,0,0.97981,0.14806,0.74636,0.47234,0.51156,0.79851,0.13959,0.96417,0,0.95475,0.08522,0.88058,0.28558,0.6918,0.40789,0.38471,0.55393,0.01801,0.68629,0.26089,0.46843,0.61583,0.2293,0.84612],"triangles":[10,9,0,10,0,1,8,9,10,2,10,1,11,8,10,2,11,10,7,8,11,3,11,2,12,7,11,3,12,11,12,6,7,5,6,12,4,5,12,4,12,3],"vertices":[15.33,-79.6,6.75,-87.8,-8.53,-71.45,-23.89,-55.01,-30.07,-30.82,-28.68,-22.12,-25.4,-27.85,-16.92,-41.41,-1.82,-50.71,16.21,-61.8,2.8,-68.81,-14.16,-53.27,-24.54,-37.07],"hull":10}},"mei":{"mei":{"x":5.66,"y":134.67,"rotation":-95.86,"width":162,"height":52}},"r_datui":{"r_datui":{"type":"mesh","uvs":[0.4346,0,0.64586,0.15149,0.75573,0.25405,0.90177,0.44604,0.96534,0.76848,0.98636,0.84662,1,0.89615,0.99837,0.92281,0.95457,0.97766,0.85453,1,0.71678,0.99998,0.60051,0.96973,0.54327,0.87389,0.57504,0.83589,0.57323,0.81985,0.28413,0.53427,0.11659,0.36675,0.01541,0.2193,0.00001,0.12522,0.07026,0.04983,0.27425,0,0.65764,0.8995,0.86161,0.94992,0.68854,0.88134,0.89784,0.91901,0.77937,0.91476,0.74669,0.93477,0.50323,0.44862,0.75758,0.42346,0.24657,0.15878,0.50338,0.12388,0.21879,0.07479],"triangles":[1,30,0,31,30,29,31,18,19,2,30,1,31,19,20,0,31,20,30,31,0,18,29,17,29,18,31,16,17,29,3,28,2,27,29,30,2,27,30,27,2,28,16,29,27,15,16,27,4,14,27,28,4,27,4,28,3,15,27,14,23,13,14,4,23,14,5,23,4,21,12,13,25,23,5,23,21,13,5,24,25,6,24,5,7,24,6,26,23,25,21,23,26,22,25,24,22,24,7,26,25,22,11,12,21,11,21,26,8,22,7,10,11,26,9,26,22,9,22,8,10,26,9],"vertices":[2,33,9.42,52.15,0.85429,2,-276.34,81.84,0.14571,2,33,269.06,158.97,0.20135,2,-107.96,-142.81,0.79865,2,33,438.23,205.7,0.68571,2,-20.4,-294.91,0.31429,2,33,743.01,247.17,0.95429,2,96,-579.63,0.04571,1,33,1218.67,176.59,1,1,33,1335.05,163.82,1,1,33,1408.89,155.97,1,1,33,1446.84,144.82,1,1,33,1516.87,90.68,1,1,33,1529,5.19,1,1,33,1501.51,-101.1,1,1,33,1434.88,-179.6,1,1,33,1285.86,-188.21,1,1,33,1237.63,-149.6,1,1,33,1214.24,-145.04,1,2,33,746.55,-262.18,0.8877,2,-396.26,-710.48,0.1123,2,33,472.61,-329.31,0.7734,2,-529.79,-462.05,0.2266,2,33,240.73,-352.68,0.57559,2,-610.43,-243.38,0.42441,2,33,102.57,-329.66,0.4296,2,-622.7,-103.86,0.5704,2,33,8.32,-247.48,0.36267,2,-566.72,7.95,0.63733,2,33,-22.55,-71.59,0.59126,2,-404.14,81.84,0.40874,1,33,1345.44,-109.46,1,1,33,1458.5,29.23,1,1,33,1325.52,-78.88,1,1,33,1421.34,68.65,1,1,33,1391.62,-21.18,1,1,33,1413.83,-53.82,1,2,33,667.26,-61.33,0.98,2,-221.64,-583.46,0.02,2,33,681.84,144.27,0.96571,2,-18.92,-546.14,0.03429,2,33,199.92,-151.85,0.57714,2,-426.2,-153.63,0.42286,2,33,201.01,59.26,0.27429,2,-221.52,-101.88,0.72571,2,33,73.78,-142.13,0.58271,2,-448.34,-29.07,0.41729],"hull":21}},"r_gebo01":{"r_gebo01":{"type":"mesh","uvs":[1,0.06581,1,0.11654,0.96241,0.2717,0.93777,0.3734,0.88628,0.58595,0.852,0.72742,0.78112,0.95374,0.78153,0.99733,0.61954,0.86588,0.53733,0.76052,0.52029,0.76407,0.38966,0.7953,0.25899,0.79082,0.00016,0.78193,0,0.77298,0.08312,0.76468,0.18381,0.75464,0.28264,0.72872,0.33394,0.70683,0.25826,0.6824,0.33579,0.65992,0.38184,0.64086,0.39357,0.63601,0.32304,0.61899,0.26913,0.58136,0.3515,0.56317,0.44351,0.51406,0.51922,0.43483,0.53072,0.28772,0.7335,0.09759,0.79535,0.09023,0.89451,0.07842,0.99132,0.06689,0.47814,0.63634,0.53651,0.62815,0.52823,0.69736,0.36423,0.73437,0.13713,0.77555,0.46924,0.64328,0.53801,0.69617,0.84071,0.12068,0.93574,0.23336,0.8735,0.10556,0.94978,0.20938],"triangles":[32,0,1,31,32,1,41,40,43,40,42,43,43,42,1,1,42,31,41,29,40,29,30,40,40,30,42,42,30,31,8,6,7,6,8,5,8,9,5,13,14,37,14,15,37,12,36,11,13,37,12,12,37,36,36,16,17,36,37,16,37,15,16,11,36,10,17,18,36,10,36,35,35,36,34,36,21,38,36,18,21,21,18,20,18,19,20,39,35,34,34,36,38,5,39,34,38,33,34,21,22,38,38,22,33,34,33,26,22,26,33,22,23,25,22,25,26,26,27,34,23,24,25,2,43,1,3,41,2,41,43,2,9,10,35,9,39,5,9,35,39,34,27,4,4,27,3,3,28,41,28,3,27,41,28,29,4,5,34],"vertices":[1,5,834.5,132.43,1,2,38,156.23,-12.83,0.03429,5,791.08,149.55,0.96571,3,39,61.23,115.68,0.79905,38,188.57,128.65,0.13238,5,667.88,226.28,0.06857,3,39,155.39,129.11,0.99651,85,-373.42,166.28,0.00075,38,209.77,221.38,0.00274,2,39,352.22,157.2,0.82842,85,-179.88,120.76,0.17158,2,39,483.22,175.89,0.26109,85,-51.07,90.46,0.73891,4,39,696.34,195.18,0,72,50.71,343.5,0,73,-237.82,264.45,0,85,154.45,30.82,1,4,39,734.27,208.19,0.00002,72,76.69,374.05,0,73,-228.48,303.44,0,85,194.51,29.13,0.99998,4,39,655.47,62.72,0.29827,72,83.18,208.73,0.00435,73,-147.88,158.96,0.00009,85,68.15,-77.66,0.69729,3,39,581.76,-22.41,0.84536,72,63.25,97.91,0.15148,73,-115.5,51.11,0.00315,3,39,588.63,-32.63,0.66261,72,74.38,92.62,0.32358,73,-103.18,51.44,0.01381,3,39,644.8,-109.84,0.03527,72,162.08,54.9,0.28274,73,-7.9,57.49,0.68199,1,73,79.53,31.64,1,1,74,92.03,-10.52,1,1,74,90.96,-18.69,1,1,74,32.53,-17.97,1,2,72,246.28,-67.15,0,73,122.42,-13.24,1,3,72,178.54,-40.21,0.01708,73,49.82,-19.87,0.98292,74,-109.83,-30.87,0,2,72,138.32,-32.1,0.77591,73,10.28,-30.84,0.22409,2,72,163.57,-83.58,0.99993,73,56.1,-65.32,0.00007,1,72,109.15,-63.93,1,1,72,73.39,-56.24,1,1,72,64.29,-54.28,1,1,72,91.28,-98.25,1,2,39,484.85,-252.02,0,72,97.11,-149.01,1,2,39,450.75,-202.9,0.00877,72,42.72,-124.17,0.99123,2,39,387.53,-156.44,0.26451,72,-35.36,-116.49,0.73549,2,39,301.65,-129.55,0.81133,72,-122.93,-137.21,0.18867,2,39,170.78,-164.95,0.99482,72,-217.4,-234.45,0.00518,2,39,-39.98,-86.49,0.62822,38,341.06,-38.27,0.37178,2,39,-60.1,-47.76,0.28908,38,297.69,-43.18,0.71092,2,38,228.18,-51.05,0.82,5,850.67,205.08,0.18,1,5,835.79,138.42,1,1,72,19.86,-15.55,1,2,39,466.47,-61.63,0.1881,72,-15.87,5.33,0.8119,2,39,528.68,-46.88,0.51181,72,30.09,49.77,0.48819,2,39,597.27,-144.45,0.00026,72,138.88,0.88,0.99974,2,73,158.62,-2.36,0.64756,74,-3.3,-2.7,0.35244,1,72,28.72,-14.76,1,2,39,525.47,-40.77,0.58608,72,24.22,53.39,0.41392,2,39,-43.58,-8.89,0.03591,38,267.32,-13.83,0.96409,2,39,33.68,86.85,0.72356,38,205.62,92.61,0.27644,1,38,243.89,-26.73,1,2,39,9.66,89.12,0.53585,38,194.89,70.99,0.46415],"hull":33}},"r_gebo02":{"r_gebo02":{"type":"mesh","uvs":[0.77952,0,0.88229,0.01318,0.91306,0.04748,0.94319,0.13621,0.95123,0.15987,0.96183,0.19108,1,0.30349,0.99077,0.425,0.65929,0.48552,0.62809,0.50297,0.52154,0.59142,0.40845,0.68529,0.37703,0.73024,0.37064,0.74264,0.37304,0.75765,0.34651,0.84708,0.19634,0.88198,0.18941,0.88542,0.18224,0.8943,0.15866,0.91893,0,0.9044,0.00333,0.87287,0.00721,0.85955,0.01335,0.84864,0.13458,0.73438,0.13656,0.72266,0.13803,0.71126,0.19103,0.64777,0.23484,0.57693,0.27638,0.43998,0.30695,0.42112,0.16696,0.33327,0.1748,0.26919,0.4085,0.16434,0.48014,0.10054,0.5189,0.08264,0.54832,0.06904,0.69774,0,0.20237,0.72022,0.31924,0.73294,0.32804,0.7212,0.21128,0.7077,0.19139,0.73233,0.31054,0.74509,0.43879,0.42765,0.56382,0.45699,0.46466,0.25456,0.81009,0.32975,0.6688,0.0916,0.84034,0.11964,0.68725,0.0745,0.82707,0.09846,0.65787,0.11929,0.82759,0.14679,0.0619,0.86268,0.15183,0.87746,0.0565,0.8724,0.15081,0.88563,0.07008,0.85399,0.15779,0.86822],"triangles":[2,0,1,2,51,0,50,37,0,51,50,0,59,43,15,16,59,15,15,43,14,55,54,59,56,22,54,21,22,56,56,54,55,55,59,16,17,55,16,57,56,55,57,55,17,18,57,17,19,57,18,56,57,19,20,21,56,19,20,56,4,53,49,53,52,49,34,35,52,53,4,5,52,46,33,52,33,34,32,33,46,53,46,52,47,53,5,47,5,6,47,46,53,46,31,32,44,30,46,30,31,46,7,47,6,47,44,46,45,44,47,8,45,47,7,8,47,9,45,8,10,44,45,10,45,9,29,30,44,28,29,44,10,28,44,11,28,10,27,28,11,40,41,27,11,40,27,12,40,11,39,41,40,39,40,12,13,39,12,43,38,39,43,39,13,43,13,14,50,36,37,48,36,50,35,36,48,52,35,48,3,49,51,48,50,51,49,48,51,3,51,2,49,52,48,4,49,3,26,27,41,38,26,41,25,26,38,42,25,38,38,41,39,24,25,42,42,38,43,58,23,24,54,23,58,22,23,54,59,24,42,59,42,43,58,24,59,59,54,58],"vertices":[2,48,-870.37,585.94,0.02403,39,471.7,-36.01,0.97597,2,48,-836.11,638.6,0.05036,39,469.18,26.76,0.94964,2,48,-787.15,642.67,0.30598,39,506.77,58.41,0.69402,2,40,-26.62,111.73,0.95492,39,613.22,112.72,0.04508,1,40,1.15,127.35,1,1,40,37.79,147.97,1,1,40,169.73,222.21,1,1,40,322.9,274.76,1,1,40,467.5,121.63,1,1,40,495.75,112.79,1,1,40,628.11,96.28,1,1,40,768.58,78.76,1,2,40,831.1,82.84,0.96073,48,-7.68,78.3,0.03927,2,40,847.87,85.22,0.86347,48,7.05,69.93,0.13653,2,40,866.05,93.65,0.63241,48,26.59,65.49,0.36759,1,48,136.11,16.11,1,3,41,205.94,65.25,0.34691,45,28.16,54.89,0.55578,48,155.1,-81.72,0.09731,3,41,211.74,63.29,0.27793,45,31.8,49.98,0.65985,48,158.3,-86.94,0.06223,3,41,224.27,64.02,0.15396,45,42.53,43.45,0.81843,48,168.4,-94.39,0.02762,3,41,259.89,64.06,0.01026,45,71.82,23.2,0.98828,48,195.81,-117.13,0.00146,2,41,278.34,-29.26,0.00466,45,33.88,-64.02,0.99534,2,41,238.91,-43.82,0.28468,45,-6.83,-53.54,0.71532,2,41,221.68,-48.63,0.58539,45,-23.74,-47.69,0.41461,2,41,206.9,-50.98,0.81739,45,-37.22,-41.21,0.18261,1,41,39,-44.74,1,1,41,24.17,-49.76,1,2,41,9.85,-54.87,0.99087,40,857.42,-57.26,0.00913,2,41,-80.16,-59.17,0.12798,40,767.31,-58.29,0.87202,1,40,669.98,-67.85,1,1,40,490.84,-110,1,1,40,460.97,-102.18,1,1,40,380.88,-220.63,1,1,40,299.48,-246.71,1,1,40,120.12,-168.24,1,1,40,25.75,-159.19,1,2,40,-4.64,-146.42,0.9974,39,624.67,-146.11,0.0026,2,40,-27.72,-136.73,0.86149,39,602.01,-135.49,0.13851,2,40,-144.88,-87.5,0.17146,39,486.95,-81.53,0.82854,1,41,6.13,-15.44,1,2,40,846.54,52.43,0.91223,48,-14.05,44.79,0.08777,2,40,830.08,51.69,0.97723,48,-27.53,54.26,0.02277,2,41,-11.27,-17.12,0.77014,40,837.69,-18.76,0.22986,1,41,23.49,-15.09,1,2,40,863.48,53.41,0.75886,48,-0.04,35.22,0.24114,1,40,441.54,-26.76,1,1,40,451.94,55.74,1,1,40,220.69,-94.65,1,1,40,242.1,130.49,1,2,40,-24.81,-59.94,0.7746,39,608.05,-58.88,0.2254,2,40,-25.76,47.45,0.82399,39,611.47,48.46,0.17601,2,40,-49.96,-57.93,0.63763,39,583,-55.85,0.36237,2,40,-49.35,30.13,0.67528,39,587.19,32.11,0.32472,2,40,11.95,-52.8,0.96998,39,645.06,-53.25,0.03002,1,40,10.7,53.33,1,2,41,213.01,-17.45,0.63076,45,-13.11,-17.12,0.36924,3,41,210.57,38.84,0.29615,45,16.93,30.55,0.68614,48,141.77,-104.98,0.01771,2,41,226.18,-15.32,0.2081,45,-1.08,-22.86,0.7919,3,41,220.82,42.53,0.17828,45,27.46,27.74,0.81054,48,152.01,-108.7,0.01118,1,41,200.48,-17.54,1,3,41,197.88,37.27,0.47875,45,5.6,36.48,0.48682,48,131,-98.08,0.03443],"hull":38}},"r_lian_yinying":{"r_lian_yinying":{"type":"mesh","uvs":[0.55727,0,0.79259,0.05864,0.98096,0.33159,1,0.56498,0.99999,0.69186,0.96113,0.81979,0.92069,0.9529,0.93164,0.81277,0.93192,0.69481,0.91494,0.58,0.85441,0.43984,0.80288,0.35683,0.78515,0.44992,0.72878,0.63328,0.59081,0.83339,0.43704,0.96806,0.26303,0.99999,0.10132,0.98731,0.03423,0.74243,0,0.61749,0,0.46442,0.07757,0.20243,0.40291,0],"triangles":[11,1,2,10,11,2,0,11,22,11,0,1,10,2,3,9,10,3,14,18,19,11,12,22,4,9,3,8,9,4,19,20,14,12,21,22,13,21,12,5,8,4,7,8,5,13,20,21,13,14,20,6,7,5,15,18,14,16,17,18,15,16,18],"vertices":[102.73,95.34,62.81,-20.26,-76.16,-101.82,-187.66,-100.07,-247.73,-93.9,-306.31,-68.13,-367.25,-41.31,-301.46,-53.63,-245.62,-59.5,-190.38,-56.53,-120.88,-32.87,-78.92,-10.96,-122.08,2.49,-205.99,39.77,-293.62,118.93,-349.46,202.88,-355.59,292.01,-341.24,372.8,-221.82,394.68,-160.89,405.84,-88.41,398.4,31.64,346.63,110.7,173.04],"hull":23}},"r_shou01":{"r_shou01":{"type":"mesh","uvs":[0.81853,0,0.99999,0.24622,0.99053,0.36647,0.96548,0.39977,0.93267,0.43689,0.85884,0.69025,0.83881,0.72786,0.78334,0.76749,0.45358,1,0.19401,0.97679,0.28082,0.73604,0.27091,0.71505,0.24917,0.68514,0.03533,0.50207,0.0077,0.48149,0,0.45244,0.00001,0.35372,0.16649,0.16813,0.6517,0,0.44739,0.74983,0.68239,0.76126,0.43827,0.77595,0.65503,0.78808,0.47507,0.72693,0.7104,0.733,0.34941,0.3807,0.7614,0.35516,0.37206,0.40846,0.75429,0.39922,0.31745,0.35205,0.75933,0.31962],"triangles":[25,14,15,18,1,17,1,18,0,16,17,29,15,16,29,8,9,21,8,22,7,22,8,21,9,10,21,22,20,7,20,22,19,22,21,19,21,10,19,7,20,6,19,23,20,20,23,24,19,10,11,25,15,29,4,5,28,27,28,5,4,28,3,27,25,28,2,3,26,3,28,26,28,25,26,20,24,6,23,19,11,6,24,5,5,24,23,5,23,12,23,11,12,5,12,27,12,13,27,13,14,27,14,25,27,29,17,30,26,25,30,1,2,30,25,29,30,2,26,30,30,17,1],"vertices":[2,48,27,60.59,0.00914,41,16.46,92.74,0.99086,2,48,104.32,57.69,0.88186,49,-30.55,52.24,0.11814,2,48,139.02,46.13,0.39984,49,5.84,48.62,0.60016,2,48,147.92,40.61,0.24485,49,15.75,45.2,0.75515,2,48,157.7,33.96,0.09684,49,26.75,40.86,0.90316,2,49,103.01,27.42,0.96306,50,-21.36,20.91,0.03694,2,49,114.26,24.45,0.78954,50,-9.82,22.39,0.21046,2,49,125.85,17.61,0.3417,50,3.49,20.43,0.6583,1,50,81.73,8.49,1,1,50,83.71,-20.35,1,3,49,112.44,-35.84,0.46259,50,11.22,-34.13,0.50009,41,245.15,126.44,0.03732,3,49,106.01,-36.45,0.61029,50,5.49,-37.12,0.32206,41,239.7,122.97,0.06765,3,49,96.77,-38.15,0.73984,50,-2.43,-42.18,0.14606,41,232.24,117.27,0.1141,3,48,148.62,-64.54,0.07926,49,39.61,-57.22,0.49955,41,189.98,74.31,0.4212,3,48,141.77,-65.59,0.09105,49,33.16,-59.75,0.40789,41,185.38,69.13,0.50106,3,48,133.08,-63.83,0.10033,49,24.29,-59.95,0.29849,41,177.57,64.92,0.60118,3,48,104.35,-55.14,0.06872,49,-5.64,-57.81,0.04388,41,149.93,53.23,0.8874,3,48,55.55,-21.61,0.00868,49,-60.64,-35.86,0,41,90.97,47.8,0.99131,2,48,21.79,43.34,0.00562,41,23.48,76.15,0.99438,2,49,117.91,-18.2,0.33033,50,9.63,-15.73,0.66967,2,49,123.18,6.87,0.18524,50,5.07,9.48,0.81476,2,49,125.76,-19.74,0.14199,50,17.49,-14.2,0.85801,2,49,131.11,3.34,0.01036,50,13.74,9.2,0.98963,2,49,111.18,-14.72,0.58264,50,2.08,-15.04,0.41736,2,49,114.83,10.5,0.66876,50,-4.04,9.69,0.33124,3,48,123.12,-21.4,0.37226,49,5.22,-20.76,0.48532,41,142.78,91.18,0.14243,2,48,128.56,23.44,0.44169,49,0.65,24.18,0.55831,3,48,131.91,-21.5,0.19242,49,13.82,-18.92,0.67546,41,149.6,96.72,0.13213,2,48,141.16,18.83,0.14132,49,13.96,22.46,0.85868,3,48,113.78,-22.18,0.54128,49,-3.71,-23.58,0.26331,41,136.11,84.6,0.19541,2,48,118.16,26.35,0.70232,49,-10.14,24.73,0.29768],"hull":19}},"r_shouzhi02":{"r_shouzhi02":{"type":"mesh","uvs":[0.48416,0.00001,0.59486,0.59833,0.59799,0.61524,0.60242,0.63367,0.66639,0.6183,0.67694,0.61125,0.68335,0.60198,0.81043,0.32602,1,0.3684,0.91968,0.84536,0.89655,0.88956,0.84874,0.91613,0.35344,1,0.27376,0.95197,0.25031,0.88486,0.14147,0.57336,0,0.1685,0,0.06622,0.27551,0,0.80256,0.62653,0.88922,0.76819,0.56982,0.70722,0.45983,0.87979,0.54411,0.70515,0.41181,0.84017,0.52209,0.69977,0.39277,0.80901,0.78534,0.64002,0.87001,0.78731,0.81077,0.61243,0.90218,0.74552],"triangles":[29,7,8,6,7,29,19,6,29,5,6,19,27,5,19,30,29,8,19,29,30,20,27,19,30,20,19,9,30,8,4,5,27,21,23,3,28,27,20,20,30,9,10,28,20,22,23,21,9,10,20,28,21,27,11,28,10,21,3,4,21,4,27,11,21,28,22,21,11,16,17,18,15,16,18,1,18,0,25,1,2,23,25,2,3,23,2,18,25,15,1,25,18,26,15,25,24,26,25,24,25,23,22,24,23,14,15,26,24,13,14,24,14,26,12,13,24,12,24,22,12,22,11],"vertices":[1,45,11.83,29.49,1,3,45,110.81,26.39,0.70937,46,23.92,29.05,0.27856,47,17.11,42.82,0.01207,3,45,113.6,26.31,0.6079,46,23.8,26.26,0.36981,47,14.4,42.11,0.02229,3,45,116.69,26.36,0.4424,46,23.83,23.18,0.5125,47,11.47,41.16,0.0451,3,45,116.25,36.58,0.10742,46,34.05,23.5,0.63572,47,14.81,31.5,0.25687,3,45,115.46,38.42,0.07495,46,35.89,24.27,0.59031,47,16.09,29.97,0.33474,3,45,114.19,39.7,0.05331,46,37.19,25.53,0.53483,47,17.68,29.11,0.41186,1,47,64.18,13.32,1,1,47,59.81,-16.54,1,2,46,64.46,-21.07,0.92388,47,-18.71,-10.78,0.07612,2,46,59.42,-27.34,0.98593,47,-26.2,-7.82,0.01407,1,46,51.25,-29.98,1,2,45,167.27,-23.59,0.92022,46,-26.67,-26.87,0.07978,2,45,157.09,-34.09,0.99153,46,-37.05,-16.58,0.00847,1,45,145.64,-35.41,1,1,45,92.49,-41.58,1,1,45,23.41,-49.58,1,1,45,7.09,-46.18,1,1,45,5.23,-2.18,1,3,45,121.87,56.97,0.00207,46,54.38,17.66,0.26639,47,15.27,10.36,0.73154,2,46,62.55,-7.77,0.66157,47,-6.58,-5,0.33843,3,45,127.39,18.97,0.3364,46,16.32,12.55,0.65502,47,-0.91,45.18,0.00858,2,45,151.45,-3.45,0.63695,46,-6.36,-11.27,0.36305,3,45,126.25,15.14,0.47108,46,12.5,13.73,0.52467,47,-0.91,49.18,0.00425,2,45,143.61,-9.42,0.99564,46,-12.25,-3.37,0.00436,3,45,124.69,11.98,0.61812,46,9.36,15.32,0.38014,47,-0.33,52.65,0.00174,1,45,138.04,-11.28,1,3,45,123.48,53.91,0.0044,46,51.3,16.09,0.40202,47,12.86,12.83,0.59359,2,46,58.97,-10.18,0.86565,47,-9.94,-2.3,0.13435,3,45,119.88,58.69,0.00124,46,56.11,19.63,0.18951,47,17.67,9.28,0.80924,2,46,65.3,-4.59,0.37167,47,-2.73,-6.69,0.62833],"hull":19}},"r_shouzhi03":{"r_shouzhi03":{"type":"mesh","uvs":[0.25207,0,0.47388,0.09507,0.46228,0.64356,0.46431,0.66006,0.47489,0.67738,0.64337,0.66746,0.67227,0.66286,0.68414,0.65505,0.81273,0.49351,1,0.49314,1,0.51709,0.78753,0.89799,0.76304,0.91012,0.73121,0.90871,0.23465,0.91802,0.17606,0.89182,0.1343,0.83849,0,0.14093,0,0.11101,0.14135,0],"triangles":[8,9,10,10,11,7,10,7,8,6,7,11,12,13,6,5,6,13,11,12,6,15,3,14,4,14,3,13,14,4,13,4,5,17,18,19,0,17,19,2,16,17,0,1,17,1,2,17,16,2,3,3,15,16],"vertices":[1,42,6.77,-1.49,1,1,42,24.9,29.96,1,3,42,116.72,22.05,0.59111,43,18.99,20.32,0.40857,44,-2.57,42.26,0.00031,3,42,119.51,22.16,0.45413,43,19.55,17.59,0.54451,44,-4.58,40.33,0.00135,3,42,122.52,23.52,0.26162,43,21.38,14.85,0.73333,44,-5.93,37.32,0.00506,3,42,122.52,48.34,0.00011,43,45.87,18.89,0.51562,44,10.53,18.74,0.48427,2,43,50.03,20.07,0.29834,44,13.74,15.85,0.70166,2,43,51.63,21.54,0.20951,44,15.84,15.28,0.79049,1,44,48.88,16.91,1,1,44,65.76,-4.83,1,1,44,62.57,-7.29,1,2,43,70.7,-17.62,0.42568,44,-7.16,-21.71,0.57432,2,43,67.31,-19.99,0.50377,44,-10.97,-20.1,0.49623,2,43,62.63,-20.21,0.62598,44,-13.65,-16.26,0.37402,2,42,160.47,-14.44,0.422,43,-9.88,-28.8,0.578,2,42,155.5,-22.74,0.58735,43,-18.87,-25.24,0.41265,2,42,146.15,-28.26,0.76664,43,-25.85,-16.92,0.23336,1,42,27.89,-40.06,1,1,42,22.88,-39.72,1,1,42,5.67,-17.73,1],"hull":20}},"r_xiaotui":{"r_xiaotui":{"type":"mesh","uvs":[0.98047,0.06077,1,0.10556,1,0.13362,0.82381,0.26271,0.56626,0.46529,0.42384,0.59362,0.38277,0.64299,0.37256,0.65526,0.35938,0.67349,0.27778,0.78507,0.20073,0.93415,0.17772,0.9673,0.10963,1,0.06641,0.99999,0.01785,0.9578,0,0.88812,0.00001,0.81477,0.01803,0.74961,0.12582,0.60774,0.15582,0.56826,0.24664,0.54888,0.26946,0.54543,0.28364,0.53885,0.33893,0.48614,0.52801,0.18065,0.64286,0.06782,0.78702,0,0.84201,0,0.90183,0.01268,0.26503,0.60507,0.33842,0.67123,0.28349,0.58485,0.34729,0.65613,0.30548,0.62401,0.29407,0.64441,0.29686,0.57843,0.31978,0.61335,0.35526,0.64137,0.12436,0.67586,0.1041,0.75554,0.06007,0.84929,0.07331,0.91412,0.12525,0.97064],"triangles":[0,1,2,3,26,27,3,27,28,2,3,28,2,28,0,25,26,3,24,25,3,4,24,3,23,24,4,35,22,23,21,22,35,31,21,35,5,23,4,35,23,5,31,29,20,31,20,21,36,35,5,36,31,35,33,31,36,29,31,33,37,36,5,6,37,5,7,37,6,37,33,36,32,37,7,32,33,37,34,29,33,34,33,32,30,34,32,8,32,7,30,32,8,38,17,18,39,17,38,29,38,18,9,34,30,9,30,8,39,16,17,40,16,39,19,20,29,18,19,29,29,34,38,9,38,34,15,16,40,10,41,40,15,40,41,39,38,9,10,39,9,10,40,39,14,15,41,10,42,41,11,42,10,13,14,41,42,13,41,12,13,42,12,42,11],"vertices":[1,34,-72.37,70.62,1,1,34,-42.04,134.35,1,1,34,-12.07,162.69,1,1,34,283.67,126.15,1,1,34,730.79,86.74,1,2,35,-106.08,123.19,0.00172,34,995.46,81.42,0.99828,2,35,-17.93,104.06,0.21839,34,1084.99,92.36,0.78161,2,35,3.98,99.31,0.38401,34,1107.25,95.09,0.61599,2,35,35.46,94.61,0.65624,34,1138.52,101.01,0.34376,1,35,228.69,64.76,1,1,35,469.75,62.89,1,1,35,526.5,55.49,1,1,35,606.81,-5.78,1,1,35,629.81,-57.23,1,1,35,599.18,-140.4,1,1,35,515.28,-203.6,1,1,35,416.92,-247.77,1,1,35,319.91,-265.59,1,2,35,72.08,-222.81,0.93021,34,1277.55,-186.68,0.06979,2,35,3.12,-210.91,0.82534,34,1208.51,-198.13,0.17466,2,35,-71.4,-114.54,0.36247,34,1106.43,-131.66,0.63753,2,35,-88.22,-89.48,0.1805,34,1082.31,-113.53,0.8195,2,35,-104.62,-76.57,0.07505,34,1062.57,-106.73,0.92495,1,34,956.75,-107.59,1,1,34,461.04,-236.99,1,1,34,237.63,-242.14,1,1,34,36.04,-174.05,1,1,34,-13.22,-121.96,1,1,34,-53.28,-52.47,1,2,35,-5.87,-58.82,0.55534,34,1149.98,-57.48,0.44466,2,35,43.63,68.31,0.76469,34,1154.89,78.86,0.23531,2,35,-42.85,-49.04,0.20547,34,1111.85,-60.41,0.79453,2,35,18.64,69.77,0.55599,34,1130.81,72.02,0.44401,2,35,-2.09,0.7,0.44279,34,1133.97,-0.03,0.55721,1,35,31.36,-0.59,1,2,35,-58.6,-37.01,0.07893,34,1093.01,-54.23,0.92107,1,34,1109.77,2.76,1,2,35,-5.41,70.36,0.3314,34,1107.91,64.66,0.6686,2,35,164.21,-183.52,0.9945,34,1351.62,-119.27,0.0055,1,35,281.88,-159.63,1,1,35,431.11,-155.54,1,1,35,510.98,-100.75,1,1,35,559.02,-4.92,1],"hull":29}},"r_zui":{"r_zui":{"x":-4.73,"y":-2.93,"rotation":-95.86,"width":75,"height":20}},"shangjiemao01":{"shangjiemao01":{"type":"mesh","uvs":[0.60415,0.0308,0.81626,0.05466,0.99496,0.37985,0.99704,0.69196,0.9065,0.74615,0.78106,0.68992,0.60668,0.69738,0.42635,0.78741,0.22784,0.9019,0.09157,0.999,0.00005,0.78125,0.00095,0.46865,0.18738,0.32995,0.382,0.16953,0.87644,0.43464,0.69866,0.34266,0.50666,0.38622,0.29864,0.55401,0.0582,0.72977],"triangles":[15,0,1,16,13,0,16,0,15,14,1,2,15,1,14,17,12,13,17,13,16,5,15,14,14,2,3,6,16,15,6,15,5,18,11,12,18,12,17,4,14,3,5,14,4,10,11,18,7,17,16,7,16,6,8,18,17,8,17,7,9,18,8,10,18,9],"vertices":[38.45,-11.84,34.81,-39.19,21.11,-61.14,10.22,-60.29,9.53,-48.39,13.16,-32.37,15.21,-9.79,14.47,13.85,13.11,39.93,11.54,57.9,20.34,68.96,31.21,67.73,33.56,43.12,36.57,17.38,20.78,-45.61,26.34,-22.95,27.37,2.03,24.29,29.53,21.36,61.26],"hull":14}},"shangjiemao02":{"shangjiemao02":{"type":"mesh","uvs":[1,1,0,1,0,0,1,0],"triangles":[1,2,3,1,3,0],"vertices":[7.77,41.1,12.06,82.88,30.96,80.95,26.67,39.17],"hull":4}},"shangjiemao03":{"shangjiemao03":{"type":"mesh","uvs":[1,1,0,1,0,0,1,0],"triangles":[1,2,3,1,3,0],"vertices":[-14.11,43.35,-11.56,68.22,23.25,64.65,20.7,39.78],"hull":4}},"shangjiemao04":{"shangjiemao04":{"type":"mesh","uvs":[1,1,0,1,0,0,1,0],"triangles":[1,2,3,1,3,0],"vertices":[-24.17,34.97,-22.85,47.9,-11.9,46.78,-13.23,33.85],"hull":4}},"shangyi01_yinying":{"shangyi01_yinying":{"type":"mesh","uvs":[0.15588,0,0.36321,0.04837,0.44658,0,0.46973,0,0.46539,0.02028,0.45363,0.09307,0.46996,0.10648,0.48328,0.11743,0.62359,0.23272,0.70499,0.33243,0.77139,0.38133,0.88226,0.44611,0.95212,0.55076,0.9628,0.67145,0.95966,0.72408,0.967,0.8377,0.96062,0.89677,0.9429,0.93784,0.91611,0.90142,0.86292,0.8291,0.74051,0.74279,0.55948,0.76245,0.47156,0.79382,0.38798,0.82925,0.36315,0.74274,0.33441,0.64263,0.31757,0.74164,0.3023,0.83141,0.17569,0.89527,0.08381,0.95105,0.00353,0.99979,0,1,0.01544,0.92486,0.04822,0.80057,0.08747,0.65181,0.05745,0.42879,0.08483,0.26582,0.12257,0.14843,0.13969,0.12324,0.14791,0.11115,0.15584,0.09948,0.12764,0,0.27551,0.1218,0.45806,0.11067,0.34695,0.23056,0.50366,0.20557,0.28182,0.6145,0.17678,0.78309,0.08175,0.90049,0.41567,0.76637,0.43403,0.69202,0.44831,0.59525,0.92694,0.63042,0.93108,0.74887,0.93867,0.85148,0.34708,0.24882,0.53166,0.21932,0.30384,0.50663,0.46747,0.51779,0.66498,0.58981,0.86394,0.50547,0.17751,0.53475,0.76505,0.51722,0.16054,0.38737,0.30476,0.36614,0.47211,0.40466,0.62454,0.47734,0.6568,0.43006,0.70901,0.38278],"triangles":[46,61,57,20,59,62,21,59,20,4,2,3,4,1,2,5,1,4,40,41,0,42,40,0,1,42,0,43,42,1,43,1,5,44,42,43,39,40,42,44,39,42,43,5,6,56,45,7,6,7,45,7,8,56,45,44,43,45,43,6,55,44,45,38,39,44,55,38,44,55,45,56,55,37,38,55,36,37,64,36,55,68,9,10,63,36,64,65,55,56,64,55,65,35,36,63,67,8,9,67,9,68,8,65,56,8,67,65,66,65,67,11,62,10,57,63,64,57,64,65,62,68,10,60,62,11,67,68,62,66,67,62,61,63,57,35,63,61,60,11,12,59,66,62,34,35,61,62,60,52,16,54,15,18,19,54,17,18,54,16,17,54,19,20,53,54,19,53,15,54,53,52,60,12,52,12,13,13,53,52,20,62,52,14,53,13,20,52,53,53,14,15,49,24,50,22,49,50,23,24,49,23,49,22,58,57,65,58,65,66,58,66,59,51,57,58,51,58,59,51,25,57,50,25,51,50,24,25,21,51,59,50,51,21,21,22,50,30,32,48,29,30,48,30,31,32,33,34,47,47,48,33,28,47,27,28,48,47,32,33,48,29,48,28,25,46,57,26,46,25,46,47,34,46,34,61,47,46,26,27,47,26],"vertices":[2,5,906.03,80.63,0.0003,6,120.1,114.13,0.9997,1,6,64.08,-48.53,1,1,6,96.13,-119.52,1,1,6,94.23,-138.14,1,2,5,799.05,-146,0,6,78.26,-132.97,1,2,5,747.75,-115.57,0.3197,6,20.65,-117.51,0.6803,2,5,732.81,-123.86,0.93165,6,8.51,-129.53,0.06835,1,5,720.63,-130.63,1,2,5,592.28,-201.89,0.9689,255,779.89,-19.94,0.0311,3,5,493.11,-233.5,0.95063,192,185.93,-70.71,0.01199,255,699.12,-85.58,0.03738,3,5,436.63,-268.89,0.88263,192,146.37,-124.36,0.0876,255,659.47,-139.16,0.02977,3,5,355.02,-333.02,0.78139,192,93.97,-213.95,0.19326,255,606.92,-228.66,0.02536,4,209,-57.21,23.58,0.3207,5,255.55,-354.48,0.36379,192,9.32,-270.41,0.27648,255,522.16,-284.97,0.03903,3,209,40.73,27.55,0.81975,192,-88.32,-279.05,0.15168,255,424.51,-293.44,0.02857,3,209,83.14,23,0.90199,210,-20.16,23.38,0.08455,255,381.93,-290.83,0.01346,3,210,71.95,23.18,0.8436,211,-11.91,23.25,0.15358,255,290.01,-296.61,0.00282,2,211,35.34,14.49,0.99962,255,242.23,-291.38,0.00038,3,210,151.49,-1.63,0.00001,211,67.4,-2.3,0.99789,255,209.02,-277.01,0.00209,3,210,120.65,-21.27,0.01358,211,36.38,-21.65,0.98344,255,238.52,-255.41,0.00298,5,209,164.29,-59.13,0.07048,210,59.41,-60.26,0.81707,211,-25.22,-60.08,0.06795,5,72.5,-204.84,0.01285,255,297.1,-212.53,0.03165,5,209,89.83,-154.6,0.21539,210,-16.84,-154.3,0.03762,5,173.74,-138.44,0.18325,192,-146.05,-99.45,0.45995,255,367.09,-113.74,0.1038,6,193,-2.69,259.59,0,228,118.48,107.1,0.3394,229,6.85,111.01,0.00209,5,212.58,3.47,0.17745,192,-161.98,46.82,0.38167,255,351.42,32.56,0.09939,5,193,53.96,209.77,0,229,53.61,51.81,0.72164,5,215.03,78.87,0.09972,192,-187.36,117.86,0.14658,255,326.16,103.64,0.03206,4,193,111.78,164.62,0,228,193.62,-21.26,0,229,102.36,-3.01,0.97688,192,-216.03,185.38,0.02311,5,193,60.31,113.13,0.02044,228,127.66,-52.07,0.09637,229,42.47,-44.4,0.8233,192,-146.05,205.46,0.02704,255,367.62,191.17,0.03285,6,193,0.75,53.54,0.48361,228,51.33,-87.73,0.28829,229,-26.84,-92.3,0.05327,5,369.46,137.11,0.00328,192,-65.07,228.69,0.11155,255,448.64,214.26,0.05999,6,193,77.39,80.49,0.87966,194,-95.77,66.63,0.008,228,132.57,-88.58,0.00489,229,53.4,-79.58,0.00028,192,-145.17,242.29,0.06662,255,368.57,228,0.04055,4,193,146.89,104.92,0.77067,194,-30.83,101.4,0.20514,192,-217.79,254.61,0.01809,255,295.97,240.45,0.0061,3,193,241.68,40.51,0.01491,194,72.7,52.24,0.96316,255,244.47,342.84,0.02193,3,194,153.85,21.25,0.11278,195,18.68,22.75,0.88515,255,199.47,417.15,0.00207,2,195,91.47,1.2,0.99997,255,160.14,482.08,0.00003,2,195,93.52,-0.8,0.99998,255,159.98,484.93,0.00002,3,194,170.98,-35.39,0.05214,195,40.12,-32.4,0.94736,255,220.74,472.36,0.0005,5,193,224.64,-86.71,0.07493,194,75.3,-76.1,0.90358,195,-52.15,-80.34,0.00556,6,-515.31,266.75,0,255,321.25,445.71,0.01592,5,193,104.01,-117.35,0.81993,194,-39.23,-124.82,0.10349,5,435.74,325.46,0.00453,192,-72.51,428.22,0.04335,255,441.55,413.8,0.0287,3,5,612.48,281.84,0.96111,192,107.91,452.49,0.02806,255,622.02,437.76,0.01083,2,5,727.02,212.91,0.98473,255,753.82,415.43,0.01527,2,5,804.19,149.71,0.9851,255,848.74,384.78,0.0149,2,5,818.08,129.37,0.98726,255,869.1,370.91,0.01274,2,6,31.3,129.72,0.98931,255,878.86,364.26,0.01069,2,6,40.04,122.37,0.992,255,888.3,357.83,0.008,2,5,914.4,101.87,0.00133,6,122.43,136.84,0.99867,2,6,12.21,28.03,0.99091,255,870.08,261.16,0.00909,2,5,733.19,-113.67,0.31927,6,6.12,-119.62,0.68073,2,5,675.88,5.42,0.96727,255,782,203.59,0.03273,1,5,648.25,-119.8,1,5,193,1.45,5.34,0.76858,228,35.52,-133.27,0.01533,229,-34.82,-139.84,0.00139,192,-42.31,271.19,0.15191,255,471.48,256.72,0.06279,4,193,161.89,-2.73,0.46918,194,0.45,-2.69,0.48991,6,-511.84,161.97,0.00001,255,335.22,341.81,0.0409,3,194,122.56,-5.14,0.87073,195,-10.49,-5.97,0.12472,255,240.37,418.75,0.00455,4,229,47.01,1.93,0.97674,5,252.25,112.74,0.00226,192,-165.16,163.02,0.013,255,348.44,148.76,0.00799,4,193,-3.36,143.31,0.00087,228,78.13,-1.96,0.94525,192,-105.01,148.19,0.0055,255,408.56,133.83,0.04838,5,193,-77.41,115.43,0.00331,228,-0.99,-2.87,0.74172,229,-92.59,-17.36,0.00005,192,-26.72,136.66,0.1544,255,486.83,122.17,0.10053,3,209,6.19,0.2,0.76958,192,-55.12,-250.08,0.17528,255,457.75,-264.52,0.05514,4,209,102.07,-1.02,0.53562,210,-1.69,-0.99,0.42402,5,112.69,-279.89,0.00025,255,361.92,-267.71,0.04011,4,210,81.54,-0.4,0.58871,211,-2.53,-0.42,0.41082,5,33.22,-255.14,0.00002,255,278.9,-273.7,0.00045,4,228,-264.92,-127.67,0.03556,229,-331.98,-184.48,0.00009,5,662.1,10.73,0.92184,255,767.23,203.5,0.04251,4,228,-311.92,15.86,0.02041,229,-402.29,-50.8,0,5,629.61,-136.76,0.97213,255,790.86,54.33,0.00746,5,228,-53.45,-129.41,0.13359,229,-123.19,-150.89,0.00079,5,480.88,119.74,0.1248,192,44.96,253.41,0.60197,255,558.71,238.79,0.13885,6,228,-65.31,2.57,0.50785,229,-156.92,-22.73,0.00004,210,-213.14,-362.33,0.00079,5,423.99,0.05,0.20963,192,35.95,121.19,0.17737,255,549.47,106.59,0.10433,6,228,-32.84,169.34,0.24412,229,-152.74,147.11,0.00002,210,-144.38,-206.97,0.01593,5,311.25,-127.05,0.2376,192,-22.3,-38.41,0.40749,255,490.94,-52.91,0.09484,6,228,-125.48,317.38,0.25922,229,-268.8,277.61,0.00002,210,-201.77,-42.02,0.01692,5,315.77,-301.64,0.47317,192,45.95,-199.16,0.1783,255,558.92,-213.78,0.07238,6,194,-158.65,-125.39,0.3395,228,-14.95,-226.65,0.27799,229,-69,-240.33,0.00165,5,497.16,223.04,0.27456,192,22.2,355.48,0.0436,255,536.14,340.89,0.0627,6,228,-103.54,239.96,0.31969,229,-234.24,204.94,0.00002,210,-197.6,-122.38,0.02087,5,336.24,-223.81,0.38316,192,36.44,-119.25,0.17381,255,549.54,-133.86,0.10246,5,228,-130.54,-258.92,0.18681,229,-177.58,-291.45,0.00111,5,613.1,192.07,0.72525,192,141.42,369.2,0.04037,255,655.38,354.41,0.04645,5,228,-165.81,-146.53,0.16488,229,-231.12,-186.52,0.00092,5,586.34,77.36,0.684,192,158.62,252.67,0.05625,255,672.37,237.85,0.09395,6,228,-156.29,-8.1,0.36802,229,-244.84,-48.44,0.00007,210,-304.21,-352.49,0.00055,5,507.76,-37.01,0.4288,192,127.47,117.45,0.08894,255,640.99,102.68,0.11362,6,228,-117.57,122.77,0.268,229,-228.51,87.05,0.00003,210,-237.35,-233.52,0.01214,5,407.89,-130.02,0.38238,192,68.69,-5.72,0.23935,255,581.99,-20.38,0.0981,6,228,-159.44,142.5,0.14189,229,-273.08,99.52,0.00002,210,-273.78,-204.97,0.00658,5,433.92,-168.3,0.6231,192,106.94,-31.78,0.12069,255,620.2,-46.51,0.10773,6,228,-203.83,178.16,0.05955,229,-322.81,127.26,0.00001,210,-309.13,-160.33,0.00276,5,454.02,-221.57,0.80115,192,145.19,-73.96,0.04548,255,658.38,-88.75,0.09105],"hull":42}},"shangyi02":{"shangyi02":{"type":"mesh","uvs":[0.74568,0,0.96809,0.04915,1,0.22517,0.99501,0.44623,0.98898,0.71369,0.92644,0.89569,0.89059,1,0.6358,0.98309,0.22221,0.93009,0,0.88191,0.00001,0.73248,0.01706,0.30659,0.17498,0,0.46778,0.00001,0.64086,0.75837,0.37075,0.43912],"triangles":[15,11,12,13,15,12,15,13,0,0,2,15,1,2,0,3,15,2,3,14,15,10,11,15,4,14,3,10,15,14,8,9,10,14,8,10,5,14,4,7,8,14,6,7,14,5,6,14],"vertices":[2,268,-90.23,158.16,0.11637,267,66.87,138.43,0.88363,2,268,-48.04,196.59,0.19182,267,101.1,184.08,0.80818,2,268,10.73,172.07,0.33931,267,163.41,171.03,0.66069,3,269,-42.87,135.66,0.03069,268,79.08,131.74,0.68552,267,238.12,144.24,0.28379,3,269,35.61,80.31,0.5244,268,161.79,82.94,0.46113,267,328.52,111.82,0.01447,2,269,80.97,30.87,0.97421,268,211.01,37.34,0.02579,1,269,106.96,2.54,1,2,269,66.9,-45.39,0.96956,268,203.17,-39.81,0.03044,3,269,-5.71,-118.01,0.26128,268,136.69,-118.08,0.71334,267,341.58,-90.34,0.02538,3,269,-50.56,-153.04,0.11442,268,94.83,-156.64,0.82084,267,307.7,-136.06,0.06474,3,269,-94.87,-122.79,0.04899,268,48.22,-130.08,0.79834,267,256.93,-118.73,0.15267,2,268,-82.58,-50.8,0.00746,267,113.58,-65.39,0.99254,1,267,21.87,6.64,1,2,268,-123.78,99.24,0.02132,267,44.96,74.25,0.97868,3,269,0.96,1.12,0.65116,268,133.68,1.19,0.34882,267,316.25,26.25,0.00002,2,268,1.48,0.65,0.68173,267,186.49,0.91,0.31827],"hull":14}},"shangyi03":{"shangyi03":{"x":19.12,"y":6.83,"rotation":-95.86,"width":260,"height":191}},"shangyihou":{"shangyihou":{"type":"mesh","uvs":[0.61771,0,0.82375,0.13471,0.97519,0.44532,1,0.61582,0.99999,0.74067,0.975,0.98952,0.71475,0.93124,0.57859,0.84174,0.45425,0.90779,0.29465,0.96415,0.13755,0.99999,0.01736,1,0.04115,0.89096,0.10267,0.69653,0.17613,0.48422,0.29993,0.21851,0.4492,0.01275,0.5336,0,0.43519,0.47529,0.29329,0.7635,0.14593,0.90691,0.74473,0.47998,0.82009,0.7277,0.8967,0.87898],"triangles":[0,21,18,21,0,1,18,16,17,18,17,0,20,19,9,20,13,19,10,11,20,10,20,9,20,11,12,12,13,20,7,18,21,19,14,18,9,19,8,8,19,7,19,18,7,13,14,19,18,15,16,14,15,18,6,22,23,23,22,4,6,23,5,5,23,4,6,7,22,4,22,3,7,21,22,3,21,2,3,22,21,21,1,2],"vertices":[5,267,-314.53,17.92,0.25393,268,-487.46,111.35,0.01473,269,-609.2,161.3,0.00042,264,-158.54,-11.31,0.02519,263,-0.93,-44.94,0.70573,5,267,-173.67,140.3,0.46053,268,-326.14,205.13,0.08235,269,-440.81,241.68,0.0106,264,-147.86,84.43,0.00335,263,-147.32,-160.64,0.44316,5,267,69.23,182.67,0.53801,268,-79.61,201.18,0.20775,269,-195.4,217.74,0.0641,264,-70.44,185.49,0,263,-391.93,-191.68,0.19013,6,267,187.81,162.7,0.42524,268,33.12,159.32,0.30367,269,-86.44,166.88,0.22788,264,-18.43,219.39,0,265,-195.25,154.59,0,263,-509.46,-166.23,0.04321,6,267,270.04,134.62,0.22217,268,108.62,116.3,0.33893,269,-14.68,117.88,0.42961,264,22.62,237.49,0.0054,265,-164.76,187.5,0.00306,263,-590.29,-134.36,0.00084,5,267,427.62,60.14,0.06711,268,249.44,13.58,0.33041,269,117.34,4.08,0.54505,264,108.51,264.33,0.0302,265,-96.58,246.23,0.02723,5,267,323.39,-119.61,0.05626,268,113.34,-143.42,0.34297,269,-31.05,-141.36,0.35765,264,131.81,159.62,0.08567,265,-33.63,159.36,0.15745,6,267,229.99,-200.37,0.06805,268,6.44,-205.22,0.28529,269,-142.61,-194.3,0.14603,264,124.59,96.28,0.11855,265,-15.11,98.36,0.37308,266,-148.2,67.87,0.009,6,267,242.04,-307.36,0.05152,268,-1.8,-312.57,0.17802,269,-159.52,-300.62,0.0176,264,166.59,59.87,0.09438,265,37.89,81.61,0.53159,266,-92.83,63,0.12689,6,267,238.78,-438.3,0.02631,268,-29.56,-440.57,0.05435,269,-197.58,-425.95,0.00029,264,211.16,9.01,0.04892,265,98.98,52.62,0.51424,266,-26.91,47.93,0.3559,5,267,222.64,-562.77,0.00443,268,-68.77,-559.81,0.00915,264,248.57,-43.9,0.01064,265,154.32,18.9,0.30195,266,34.42,27,0.67383,5,267,164.54,-739.62,0.00003,268,-159.02,-722.62,0.00035,264,288.37,-131.38,0.00544,265,225.58,-45.59,0.23995,266,117.96,-20.53,0.75422,4,264,249.3,-150.74,0.07678,265,197.4,-78.86,0.25111,266,97.66,-59.12,0.67129,263,-364.42,706.6,0.00082,4,264,166.41,-160.76,0.22713,265,125.3,-120.96,0.38689,266,36.38,-115.83,0.35591,263,-237.73,606.1,0.03006,4,264,75.71,-164.59,0.38155,265,43.56,-160.48,0.33834,266,-34.85,-172.12,0.12818,263,-108.91,486.41,0.15193,4,264,-73.02,-167.1,0.41459,265,-91.95,-221.82,0.19393,266,-153.85,-261.35,0.01156,263,97.12,285.03,0.37992,4,267,-348.77,-109.81,0.00655,264,-126.86,-71.79,0.28609,265,-179.2,-155.71,0.05175,263,39.2,81.06,0.65561,4,267,-335.81,-44.4,0.08268,264,-144.82,-42.42,0.12781,265,-207.34,-135.88,0.00191,263,23.22,16.32,0.78761,4,264,27.51,-9.9,0.41305,265,-62.08,-37.63,0.41966,266,-164.59,-75.07,0.16626,263,-256.27,209.33,0.00103,4,264,145.41,-20.59,0.27541,265,50.38,-0.65,0.3911,266,-62.81,-14.6,0.3328,263,-402.14,386.26,0.00069,4,264,216.61,-54.3,0.1102,265,129.11,-3.33,0.2298,266,14.63,-0.17,0.65973,263,-452.69,530.22,0.00027,5,267,33.75,4.1,0.41648,268,-147.96,32.43,0.41666,269,-277.22,55.1,0.16664,264,-21.45,105.27,0.00017,265,-152.73,48.65,0.00006,5,267,215.98,4.23,0.27765,268,31.06,-1.63,0.38883,269,-101.55,6.63,0.3333,264,47.7,169.07,0.00016,265,-114.58,134.65,0.00006,5,267,335,26.97,0.12115,268,152.24,-1.62,0.32505,269,19.23,-3.19,0.54521,264,84.94,219.34,0.0055,265,-100.35,195.58,0.00309],"hull":18}},"sheng01":{"sheng01":{"type":"mesh","uvs":[0.92598,0,0.93564,0.05641,0.94581,0.11575,0.96579,0.23244,1,0.43211,1,0.4895,0.72757,0.63388,0.48675,0.76151,0.24643,0.88888,0.05625,0.98967,0.03002,1,0.00013,1,0.02033,0.83986,0.25416,0.64012,0.40542,0.51091,0.53443,0.40071,0.53454,0.38935,0.51374,0.22476,0.50051,0.12008,0.62542,0.04178,0.83911,0,0.74346,0.05934,0.70817,0.16455,0.75435,0.32627,0.6684,0.48488,0.23215,0.75506],"triangles":[21,19,20,21,20,0,21,18,19,22,18,21,21,0,1,21,1,2,22,21,2,17,18,22,22,2,3,22,23,17,3,23,22,16,17,23,23,3,4,15,16,23,23,24,15,4,24,23,24,4,5,14,15,24,6,24,5,24,13,14,24,25,13,24,6,25,7,25,6,25,12,13,8,25,7,11,12,25,25,8,11,9,11,8,10,11,9],"vertices":[1,231,6.99,-16.23,1,1,231,-17.98,-7.89,1,1,231,-44.24,0.89,1,3,231,-95.88,18.16,0.9651,192,276.5,358.86,0.01411,255,790.44,343.83,0.0208,3,231,-184.26,47.7,0.85352,192,183.45,353.92,0.10557,255,697.38,339.06,0.04091,3,231,-209.13,57.51,0.80114,192,156.71,353.92,0.13929,255,670.64,339.1,0.05957,3,231,-257.34,118.68,0.75967,192,89.43,393.14,0.14342,255,603.42,378.44,0.09691,3,231,-299.95,172.76,0.81905,192,29.95,427.81,0.11068,255,544,413.22,0.07027,3,231,-342.48,226.72,0.88076,192,-29.41,462.41,0.07053,255,484.71,447.92,0.04871,3,231,-376.13,269.43,0.95989,192,-76.39,489.79,0.01088,255,437.78,475.38,0.02923,3,231,-379.22,274.7,0.96446,192,-81.2,493.57,0.00781,255,432.98,479.17,0.02773,3,231,-377.64,278.71,0.97092,192,-81.2,497.87,0.00524,255,432.98,483.47,0.02385,3,231,-309.29,248.63,0.98568,192,-6.57,494.97,0.00668,255,507.6,480.44,0.00765,3,231,-235.04,183.17,0.94308,192,86.51,461.31,0.03829,255,600.63,446.62,0.01863,3,231,-187.02,140.82,0.94412,192,146.73,439.54,0.03113,255,660.8,424.74,0.02475,2,231,-146.05,104.71,0.96196,192,198.08,420.97,0.03804,2,231,-141.13,102.75,0.9636,192,203.37,420.95,0.0364,2,231,-68.68,77.41,0.98727,192,280.07,423.96,0.01273,2,231,-22.6,61.29,0.9996,192,328.85,425.87,0.0004,1,231,4.75,31.17,1,1,231,11.57,-4.6,1,1,231,-9.1,18.36,1,2,231,-52.85,41.07,0.99233,192,308.13,395.96,0.00767,2,231,-125.4,62.52,0.9658,192,232.77,389.3,0.0342,3,231,-189.62,101.14,0.88288,192,158.86,401.67,0.07822,255,672.87,386.85,0.0389,3,231,-283.71,205.76,0.91853,192,32.95,464.48,0.05442,255,547.07,449.88,0.02705],"hull":21}},"sheng02":{"sheng02":{"type":"mesh","uvs":[0.18403,0.11676,0.3361,0.23667,0.5063,0.37087,0.76969,0.57857,0.9181,0.81512,1,0.94567,1,0.99064,0.99381,1,0.95432,1,0.87561,0.93303,0.58255,0.6837,0.32055,0.46079,0.18671,0.32436,0,0.13405,0,0.08237,0.08372,0.05189,0.12146,0.1666,0.34766,0.37096,0.57126,0.52986,0.79241,0.77059],"triangles":[6,7,5,7,4,5,7,8,9,4,7,19,10,19,9,7,9,19,19,18,3,4,19,3,10,11,18,11,17,18,19,10,18,17,2,18,3,18,2,11,12,17,17,16,1,17,1,2,13,16,12,17,12,16,1,16,0,16,14,15,16,15,0,16,13,14],"vertices":[1,230,-12.68,-25.78,1,1,230,-54.17,-47.01,1,3,230,-100.62,-70.78,0.95602,192,300.54,16.49,0.03549,255,813.88,1.42,0.00849,3,230,-172.5,-107.56,0.89424,192,247.17,-44.1,0.07914,255,760.41,-59.07,0.02662,3,230,-241.57,-117.02,0.8483,192,186.38,-78.24,0.11274,255,699.56,-93.11,0.03896,3,230,-279.69,-122.24,0.84047,192,152.83,-97.08,0.11097,255,665.98,-111.89,0.04857,3,230,-290.45,-118,0.82688,192,141.28,-97.08,0.11426,255,654.42,-111.87,0.05886,3,230,-292.16,-115.8,0.82216,192,138.87,-95.66,0.11583,255,652.02,-110.44,0.06201,3,230,-288.83,-107.35,0.80995,192,138.87,-86.58,0.12143,255,652.03,-101.36,0.06862,3,230,-266.18,-96.82,0.80029,192,156.08,-68.47,0.12961,255,669.27,-83.28,0.0701,3,230,-181.84,-57.61,0.78815,192,220.15,-1.06,0.12839,255,733.46,-15.99,0.08346,3,230,-106.45,-22.56,0.8889,192,277.43,59.21,0.07372,255,790.84,44.18,0.03738,2,230,-62.54,-6.78,0.99423,192,312.49,90,0.00577,1,230,-1.29,15.23,1,1,230,11.07,10.36,1,1,230,11.29,-10.43,1,1,230,-19.31,-7.69,1,3,230,-87.25,-36.83,0.95066,192,300.52,52.98,0.03763,255,813.92,37.91,0.01171,3,230,-144.11,-69.7,0.85953,192,259.68,1.54,0.09306,255,773,-13.45,0.04741,3,230,-220.32,-94.33,0.81902,192,197.82,-49.33,0.12276,255,711.05,-64.22,0.05821],"hull":16}},"shengti":{"shengti":{"type":"mesh","uvs":[0.3709,0.01337,0.60425,0.02205,0.67926,0.04664,0.83789,0.14541,0.95981,0.22132,0.99999,0.26567,0.99998,0.32112,0.97875,0.36458,0.94081,0.39093,0.89751,0.3987,0.89582,0.48152,0.88283,0.51105,0.86655,0.55343,0.88673,0.61943,0.89044,0.63954,0.89163,0.65759,0.90727,0.73993,0.94291,0.90318,0.81714,0.91048,0.76356,0.93821,0.51814,1,0.44439,0.99886,0.38942,0.99801,0.32985,0.99709,0.24925,0.99585,0.13057,0.97753,0.00562,0.95824,0.00251,0.86127,0.0762,0.77329,0.21423,0.65744,0.24402,0.63244,0.27025,0.61325,0.3433,0.55981,0.33949,0.52794,0.30768,0.49131,0.2278,0.38748,0.207,0.34403,0.19129,0.31377,0.19267,0.28917,0.21646,0.22677,0.24728,0.16928,0.29617,0.04378,0.53915,0.5721,0.83607,0.56251,0.55064,0.53167,0.84051,0.52572,0.52298,0.49422,0.85087,0.48454,0.76388,0.36685,0.5932,0.37939,0.85209,0.39858,0.41141,0.38527,0.27783,0.77792,0.43881,0.90735,0.79777,0.86121,0.85304,0.7598,0.29035,0.31861,0.4518,0.24741,0.62287,0.25157,0.77378,0.27628,0.92105,0.24788,0.40634,0.12245,0.56733,0.11918,0.68656,0.13836,0.75779,0.13124,0.75737,0.49271,0.74954,0.53273,0.74266,0.57242,0.31424,0.80719,0.26506,0.82895,0.13263,0.88055,0.05943,0.91904,0.04741,0.87345,0.13503,0.82933,0.20664,0.79809,0.52626,0.6657,0.81375,0.65957,0.52641,0.64566,0.81217,0.63769,0.51959,0.69224,0.81804,0.68553,0.72266,0.64019,0.7233,0.6615,0.70324,0.68812,0.25769,0.20535,0.2217,0.25821,0.2006,0.29615,0.21234,0.29873],"triangles":[38,39,85,39,40,84,8,9,7,49,57,58,7,59,6,6,59,60,6,60,5,60,4,5,19,54,18,19,20,53,22,53,21,20,21,53,22,23,53,53,23,69,19,53,54,25,70,24,23,24,69,24,70,69,26,71,25,25,71,70,71,27,72,71,26,27,71,72,70,70,72,73,72,27,28,54,55,17,18,54,17,70,73,69,73,74,69,73,72,28,69,74,52,64,63,2,63,62,2,3,64,2,62,1,2,62,0,1,40,41,61,41,0,61,61,0,62,46,51,49,65,49,48,34,35,51,50,65,48,10,50,9,7,9,50,59,7,50,35,56,51,35,36,56,49,51,57,51,56,57,49,58,48,50,48,59,48,58,59,36,87,56,36,37,87,87,85,56,57,56,84,84,56,85,37,86,87,37,38,86,87,86,85,86,38,85,58,63,59,63,64,59,59,3,60,59,64,3,85,39,84,57,62,58,58,62,63,60,3,4,84,61,57,57,61,62,84,40,61,77,32,42,81,42,67,78,43,13,78,67,43,43,12,13,42,44,67,67,66,43,67,44,66,42,32,44,43,45,12,43,66,45,32,33,44,12,45,11,66,65,45,66,44,65,33,46,44,44,46,65,33,34,46,45,47,11,45,65,47,11,47,10,34,51,46,46,49,65,47,65,50,47,50,10,54,53,79,54,79,83,69,68,53,53,68,79,55,16,17,55,83,80,55,54,83,73,28,74,69,52,68,68,52,79,74,28,52,28,29,52,52,29,79,55,80,16,80,15,16,29,30,79,79,75,83,79,30,75,80,82,76,80,83,82,83,75,82,80,76,15,30,31,75,75,77,82,75,31,77,77,81,82,82,81,76,81,78,76,76,14,15,76,78,14,31,32,77,77,42,81,81,67,78,78,13,14],"vertices":[3,5,802.16,93.01,0.04455,38,106.41,-41.75,0.9518,51,-121.71,20.87,0.00365,1,51,100.93,37.82,1,2,51,177.31,8.67,0.9912,255,813.78,36.86,0.0088,4,5,441.8,-244.31,0.63769,51,349.17,-127.16,0.26125,192,142.16,-99.59,0.04063,255,655.31,-114.38,0.06044,4,5,285.97,-308.02,0.28077,51,481.25,-231.56,0.02664,192,20.57,-216.04,0.68242,255,533.51,-230.62,0.01017,3,5,205.8,-317.66,0.18041,51,529.05,-296.64,0.01015,192,-50.48,-254.42,0.80944,4,4,574.32,-188.86,0.00899,5,123.16,-285.08,0.32186,51,541.29,-384.62,0.00979,192,-139.29,-254.4,0.65936,4,4,502.6,-178.18,0.02935,5,65.83,-240.68,0.29472,51,530.8,-456.37,0.00511,192,-208.87,-234.11,0.67082,4,4,455.87,-147.98,0.04757,5,39.84,-191.48,0.42481,51,500.73,-503.18,0.00467,192,-251.1,-197.88,0.52295,5,4,437.96,-108.69,0.10246,5,43.43,-148.46,0.61648,51,461.5,-521.2,0.00357,192,-263.54,-156.53,0.24474,255,249.43,-170.67,0.03275,5,4,306.28,-125.02,0.79844,5,-79.41,-98.3,0.16615,51,478.19,-652.84,0,192,-395.96,-155.08,0.02774,255,116.54,-168.76,0.00766,5,3,615.55,-85.15,0.0215,4,257.73,-119.12,0.90052,5,-118.87,-69.4,0.01868,192,-443.26,-142.84,0.03974,255,69.25,-156.14,0.01956,5,3,545.97,-88.04,0.24646,4,188.36,-112.89,0.69114,5,-176.33,-30.04,0.00002,192,-511.18,-127.52,0.04981,255,1.5,-140.25,0.01257,5,3,449.04,-134.48,0.34987,4,86.2,-146.26,0.62572,5,-281.06,-21.84,0,36,-418.81,63.91,0.00322,192,-616.86,-147.12,0.02119,5,3,418.89,-146.39,0.58924,4,54.75,-154.13,0.39446,5,-312.7,-14.73,0,36,-387.15,70.89,0.00542,192,-649.07,-150.78,0.01088,5,3,391.3,-155.1,0.95039,4,26.26,-159.16,0.03935,5,-340.41,-6.43,0,36,-358.53,75.12,0.00874,192,-677.98,-152.01,0.00151,4,3,267.98,-204.27,0.85228,4,-102.43,-191.78,0,36,-228.98,104.09,0.14632,255,-297.11,-178.29,0.0014,2,36,28.8,169.47,0.39714,2,308.53,-51.44,0.60286,2,36,51.88,47.75,0.36833,2,184.97,-61.49,0.63167,4,51,453.93,-1394.88,0,33,293.82,402.28,0.09283,36,101.52,1.63,0.09445,2,133.81,-105.92,0.81272,2,33,331.03,150.59,0.01429,2,-100.57,-204.91,0.98571,2,33,288.32,64.59,0.02318,2,-194.52,-185.08,0.97682,2,33,239.59,-14.36,0.0298,2,-283.15,-157.65,0.9702,2,33,184.5,-84.92,0.03697,2,-365.25,-121.96,0.96303,2,33,132.59,-134.62,0.04668,2,-426.35,-84.13,0.95332,2,33,87.96,-165.81,0.06442,2,-467.72,-48.73,0.93558,2,33,143.81,-306.56,0.42857,2,-590.02,-138.01,0.57143,2,33,-7.35,-270.58,0.37089,2,-593,17.34,0.62911,3,3,7.34,547.29,0.73964,5,-230.49,799.55,0.00036,33,-126.21,-167.18,0.26,5,3,221.79,469.71,0.82252,4,-60.13,482.45,0.06232,5,-129.25,605.57,0.00022,38,287.04,1005.91,0.00168,33,-273.86,6.62,0.11327,5,3,267.32,452.21,0.80559,4,-17.28,459.15,0.14193,5,-74.86,570.38,0.00001,38,271.52,943.02,0.00222,33,-304.69,44.41,0.05024,6,3,304.99,437.31,0.67955,4,18.12,439.46,0.26564,5,-78.67,532,0.00001,38,234,934.1,0.00881,51,-71.09,-961.98,0,33,-329.99,76.04,0.04599,5,3,404.45,391.32,0.36073,4,110.71,380.86,0.61642,5,-2.57,438.6,0.00033,38,170.54,831.69,0.02252,51,-27.15,-849.8,0,5,3,452.75,408.28,0.21687,4,160.82,391.36,0.72003,5,46.27,423.25,0.01318,38,171.96,780.51,0.04992,51,-37.79,-799.72,0,6,3,501.34,453.04,0.13367,4,214.84,429.39,0.50937,5,111.99,430,0.2264,38,199.78,720.59,0.13056,51,-75.97,-745.8,0,33,-508.26,159.86,0,6,3,641.71,570.46,0.00214,4,369.38,527.47,0.22684,5,294.73,439.96,0.66548,38,268.82,551.1,0.10546,51,-174.46,-591.56,0,33,-688.4,127.62,0.00008,7,3,700.14,606.25,0.00067,4,430.57,556.37,0.0714,5,361.23,434.34,0.73612,38,285.2,486.41,0.03319,51,-202.25,-530.89,0,33,-756.88,125.56,0.00002,39,429.85,153.64,0.15858,2,5,473.22,436.8,0.76857,39,341.24,78.74,0.23143,1,39,294.54,29.72,1,6,4,663.51,617.07,0.02285,5,593.94,372.79,0.19573,38,302.94,246.36,0.09567,51,-263.02,-297.97,0,33,-995.37,158.18,0.00001,39,209.96,50.64,0.68575,6,4,718.21,556.24,0.00819,5,613.09,294.45,0.18303,38,235.14,202.69,0.15164,51,-204.21,-242.79,0,33,-1022.17,233.08,0,39,146.41,98.6,0.65714,3,4,923.73,537.15,0.00019,5,783.01,177.28,0.01254,38,179.82,3.84,0.98727,8,3,434.73,205.7,0.13167,4,116.47,192.88,0.66037,5,-89.49,271.82,0.00002,38,-15.48,859.44,0.00281,51,160.82,-843.52,0,33,-327.64,341.51,0.00047,192,-542.12,185.06,0.0844,255,-27.43,172.44,0.12027,4,3,524.25,-63.79,0.15271,4,170.01,-86.01,0.70934,192,-525.84,-98.45,0.07222,255,-12.97,-111.15,0.06573,7,3,500.11,212.18,0.05877,4,182.14,190.75,0.71908,5,-33.25,237.84,0.00391,38,-29.24,795.2,0.00489,51,162.76,-777.85,0,192,-477.31,174.29,0.08831,255,37.33,161.2,0.12504,5,3,582.23,-52.36,0.03835,4,228.98,-82.25,0.7987,5,-125.91,-23.19,0.00185,192,-466.88,-102.51,0.07155,255,45.92,-115.65,0.08955,7,3,551.02,253.47,0.03582,4,238.01,225.03,0.66136,5,32.25,240.42,0.11506,38,-5.44,734.12,0.01108,51,128.32,-722.08,0,192,-417.3,200.93,0.07243,255,97.39,187.4,0.10425,4,4,295.68,-83.14,0.74073,5,-68.17,-56.59,0.10361,192,-400.91,-112.17,0.0666,255,111.86,-125.82,0.08906,5,4,471.27,24.66,0.09469,5,137.7,-48.44,0.58773,51,328.06,-488.26,0.00111,192,-212.59,-28.88,0.16283,255,300.68,-43.15,0.15364,8,3,746.14,237.24,0.00004,4,429.34,183.44,0.10786,5,178.79,110.57,0.63653,38,-80.38,553.23,0.00771,51,169.39,-530.63,0,33,-613.63,468.72,0.00007,192,-232.78,134.1,0.13433,255,280.89,119.88,0.11346,5,4,432.28,-65.68,0.10407,5,59.51,-108.17,0.65567,51,418.5,-527,0.00211,192,-263.38,-113.15,0.13454,255,249.68,-127.3,0.10361,7,3,691.32,402.23,0.00282,4,396.55,354.18,0.22615,5,233.7,275.53,0.62716,38,93.47,555.15,0.05573,51,-1.26,-563.89,0,192,-242.41,307.74,0.05671,255,271.89,293.47,0.03143,4,3,50.81,359.45,0.77448,5,-308,623.75,0.00255,38,245.91,1180.82,0.00001,33,-70.69,17.46,0.22296,5,3,-108.61,156.65,0.57319,33,168.37,114.37,0.02213,36,85.57,-312.02,0.00036,2,-176.33,-56.48,0.37403,255,-564.59,269.52,0.03029,3,3,53.01,-154.57,0.4069,36,-24.61,20.91,0.58458,255,-491.23,-73.4,0.00853,3,3,223.64,-162.7,0.95576,36,-191.79,56.01,0.03303,255,-328.85,-126.45,0.01121,7,3,763.88,541.9,0.00002,4,486.74,483.16,0.11411,5,375.45,343.92,0.60714,38,204.37,443.46,0.12946,51,-130.49,-474.06,0,33,-780.27,213.06,0,192,-135.56,423.37,0.14927,7,4,620.6,345.81,0.01281,5,425.03,158.65,0.3,38,45.41,336.15,0.04249,51,6.49,-339.82,0,33,-852.14,390.87,0.00001,192,-21.31,269.15,0.54178,255,492.5,254.62,0.1029,6,4,636.06,183.03,0.00024,5,358.9,9.1,0.28588,38,-117.53,349.87,0.00036,33,-804.81,547.38,0,192,-27.93,105.74,0.58258,255,485.57,91.24,0.13094,4,5,269.22,-110.45,0.52034,51,317.42,-343.25,0.01849,192,-67.5,-38.39,0.3223,255,445.75,-52.81,0.13887,4,5,259.96,-257.98,0.41829,51,450.45,-278.8,0.03349,192,-21.99,-179.02,0.47455,255,491.02,-193.53,0.07367,6,4,813.08,415.87,0.00263,5,627.18,125.61,0.41122,38,80.13,134.28,0.34142,51,-64.1,-147.53,0,192,178.9,312.55,0.16183,255,692.77,297.68,0.08291,4,5,575.66,-19.34,0.74231,51,87.46,-121.16,0.04797,192,184.15,158.8,0.11076,255,697.75,143.93,0.09896,4,5,505.31,-114,0.51546,51,204.47,-135.9,0.28375,192,153.43,44.93,0.09466,255,666.83,30.12,0.10613,4,5,490.98,-181.46,0.48337,51,270.27,-115.22,0.37382,192,164.85,-23.09,0.05825,255,678.13,-37.92,0.08456,7,4,270.66,3.57,0.60961,5,-47.59,31.29,0.1236,38,-229.17,741.36,0.00001,51,349.69,-688.81,0,33,-398.66,575.1,0.00002,192,-414.24,-22.9,0.1116,255,99.08,-36.49,0.15515,7,3,548.52,28.5,0.02318,4,206.12,2.32,0.71411,38,-218.94,805.09,0,51,351.13,-753.34,0,33,-338.45,551.83,0.00006,192,-478.38,-15.66,0.11237,255,35,-28.78,0.15029,5,3,485.44,18.08,0.15621,4,142.23,0.23,0.59269,33,-278.53,529.55,0.00001,192,-542,-9.3,0.11467,255,-28.56,-21.94,0.13642,6,3,14.79,313.65,0.84944,5,-388.18,592.91,0.0028,38,190.6,1246.54,0.00001,33,-16.69,39.34,0.06043,36,-61.19,-447.45,0.00009,2,-295.28,103.92,0.08724,6,3,-36.04,353.69,0.13022,5,-407.76,654.8,0.00043,38,242.71,1285.24,0,33,7.56,-20.66,0.83714,36,-17.24,-495.18,0.00001,2,-347.3,65.43,0.03219,6,3,-134.71,451.98,0.06467,5,-434.03,791.36,0.00021,38,363.24,1354.63,0,33,44.42,-154.96,0.37225,36,64.47,-607.75,0.00001,2,-468.11,-3.85,0.56286,6,3,-192.07,508.63,0.05848,5,-449.61,870.47,0.00019,38,432.92,1395.17,0,33,66.09,-232.62,0.3153,36,112.12,-672.79,0.00001,2,-537.87,-44.26,0.62602,6,3,-161.25,530.82,0.04755,5,-411.65,871.48,0.00007,38,446.27,1359.61,0,33,28.32,-236.57,0.40476,36,78.16,-689.8,0,2,-551.15,-8.68,0.54762,6,3,-66.09,466.82,0.23529,5,-368.94,765.05,0.00037,38,359.59,1284.52,0,33,-22.51,-133.78,0.42719,36,-5.63,-611.51,0.00001,2,-464.34,66.25,0.33714,6,3,5.42,412.5,0.45061,5,-340.35,679.92,0.00131,38,288.45,1229.72,0.00001,33,-57.62,-51.12,0.50041,36,-67.62,-546.53,0,2,-393.1,120.92,0.04766,10,3,287.17,178.54,0.61948,4,-33.37,185.23,0.12427,5,-238.91,328.02,0.00003,38,-11.1,1019.02,0.00213,51,185.31,-1001.28,0,33,-186.07,291.84,0.02266,36,-308.67,-270.82,0.00717,2,-93.18,331.08,0.03219,192,-691.69,197.2,0.08552,255,-177.2,185.53,0.10655,10,3,368.68,-84.14,0.79018,4,13.11,-85.85,0.05105,5,-319.21,64.97,0,38,-285.95,1009.11,0.00037,51,453.86,-941.92,0,33,-126.42,560.33,0.00391,36,-347.46,1.46,0.00752,2,181.7,340.5,0.00555,192,-681.34,-77.61,0.07058,255,-168.19,-89.29,0.07083,10,3,318.28,186.96,0.5634,4,-1.42,189.52,0.17878,5,-208.45,317.5,0.00003,38,-11.11,986.79,0.00284,51,179.5,-969.57,0,33,-217.26,299.97,0.01917,36,-340.73,-274.2,0.00602,2,-93.11,363.32,0.02703,192,-659.46,197.22,0.08819,255,-144.95,185.39,0.11455,10,3,402.09,-73.47,0.58987,4,47.62,-79.64,0.23244,5,-285.58,55.01,0,38,-284.4,974.07,0.00027,51,446.01,-907.74,0,33,-160.72,567.65,0.00292,36,-382.14,-3.77,0.00562,2,180.2,375.54,0.00415,192,-646.31,-76,0.07914,255,-133.19,-87.88,0.08559,10,3,244.44,173.43,0.68725,4,-76.4,185.75,0.0266,5,-277.12,347.83,0.00061,38,-4.84,1061.6,0.00207,51,186.84,-1044.29,0,33,-146.44,275.06,0.02513,36,-265.67,-272.56,0.01382,2,-99.51,288.52,0.08476,192,-734.28,203.38,0.06983,255,-219.8,191.94,0.08994,10,3,329.64,-99.06,0.87179,4,-27.55,-95.54,0.00069,5,-359.89,74.59,0,38,-290.14,1050.7,0.0003,51,465.48,-982.07,0,33,-85.12,553.9,0.00323,36,-306.54,10,0.01579,2,185.81,298.91,0.00543,192,-722.92,-81.86,0.05723,255,-209.78,-93.31,0.04554,10,3,375.84,8.11,0.48481,4,32.26,4.68,0.24363,5,-261.42,137.24,0,38,-198.79,978.06,0.00085,51,362.52,-927.11,0,33,-178.43,483.8,0.00638,36,-369.17,-88.49,0.00477,2,94.59,371.71,0.00901,192,-650.42,9.59,0.11607,255,-136.87,-2.35,0.13446,10,3,343.03,-1.5,0.67902,4,-1.52,-0.56,0.05435,5,-293.95,147.74,0.00002,38,-199.48,1012.23,0.00085,51,369.37,-960.6,0,33,-145.19,475.86,0.009,36,-335.26,-84.2,0.00683,2,95.21,337.54,0.01278,192,-684.59,8.85,0.11357,255,-171.04,-2.91,0.12359,10,3,296.87,5.75,0.67075,4,-46.34,12.66,0.05643,5,-328.05,179.69,0.00007,38,-180.4,1054.89,0.00077,51,358.3,-1006,0,33,-108.71,446.65,0.00921,36,-290.82,-98.69,0.01256,2,76.06,294.91,0.02816,192,-727.28,27.87,0.10932,255,-213.64,16.31,0.11273,7,3,932.47,620.17,0,4,662.78,540.38,0.04567,5,555.63,306.35,0.55154,38,227.64,260.89,0.36673,51,-186.33,-298.68,0,33,-965.48,228.8,0,192,46.04,454.43,0.03605,7,3,848.01,629.29,0,4,580.19,560.26,0.08562,5,493.46,364.24,0.63223,38,262.07,338.55,0.25895,51,-206.19,-381.28,0,33,-896.69,178.96,0.00003,192,-33.04,485.47,0.02317,8,3,839.63,691.26,0,4,579.83,622.8,0.02743,5,523.86,418.89,0.72489,38,323.65,327.65,0.08296,51,-268.72,-381.67,0,33,-920.17,121,0.00001,192,-24.79,547.46,0.00742,39,295.38,60.87,0.15729,8,3,771.23,620.71,0,4,502.93,561.59,0.04344,5,426.82,403.35,0.70261,38,277.3,414.29,0.0972,51,-207.49,-458.53,0,33,-825.77,148.29,0.00001,192,-109.37,497.41,0.03052,39,359.69,135.18,0.12622],"hull":42}},"shuangyanpi":{"shuangyanpi":{"type":"mesh","uvs":[0.79617,0.00001,0.89452,0.10779,0.93669,0.38966,0.87284,0.42354,0.77964,0.36727,0.65158,0.35423,0.50258,0.46526,0.34638,0.5742,0.16869,0.77513,0.07123,0.86265,0.02371,0.91823,0,0.89386,0.008,0.81781,0.06144,0.68955,0.16453,0.55423,0.31807,0.35053,0.48679,0.14867,0.64286,0.01608,0.85097,0.23056,0.72545,0.17792,0.57357,0.24636,0.42044,0.37269,0.24095,0.56219,0.11744,0.71639,0.03128,0.84027],"triangles":[19,17,0,18,0,1,19,0,18,20,16,17,20,17,19,5,20,19,4,19,18,5,19,4,21,15,16,21,16,20,18,1,2,3,18,2,4,18,3,6,21,20,6,20,5,22,14,15,22,15,21,7,22,21,7,21,6,23,13,14,23,14,22,8,23,22,8,22,7,24,12,13,24,13,23,9,24,23,9,23,8,11,12,24,10,11,24,10,24,9],"vertices":[49.19,-45.07,44.57,-57.45,35.31,-62.01,35.12,-53.65,38.09,-41.77,40.19,-25.25,38.74,-5.63,37.45,14.91,33.61,38.53,32.21,51.41,31.12,57.73,32.19,60.72,34.43,59.44,37.68,52.12,40.48,38.37,44.73,17.86,48.71,-4.59,50.73,-25.2,41.36,-51.43,44.65,-35.36,44.55,-15.51,42.69,4.7,39.22,28.51,36.11,44.97,33.43,56.5],"hull":18}},"sui01":{"sui01":{"type":"mesh","uvs":[0.72516,0,0.77282,0,0.87507,0.01505,0.90447,0.09985,0.88225,0.14063,0.94642,0.20974,0.98869,0.38009,0.97302,0.58335,0.96673,0.88923,0.96468,0.9888,0.38906,0.9914,0.04692,0.86269,0.00774,0.69445,0.12842,0.64217,0.39431,0.52698,0.47779,0.31129,0.55361,0.19021,0.58758,0.15113,0.55569,0.09478,0.58903,0,0.78725,0.17748,0.76487,0.45558,0.63342,0.72351],"triangles":[11,12,13,11,13,22,8,10,22,10,11,22,9,10,8,20,4,5,6,21,20,6,20,5,20,15,16,21,15,20,14,15,21,7,21,6,22,14,21,22,21,7,13,14,22,8,22,7,2,3,1,0,17,18,1,3,0,4,20,3,20,0,3,0,18,19,20,17,0,20,16,17],"vertices":[1,224,-6.9,0.19,1,1,224,-5.99,5.45,1,1,224,-1.12,16.23,1,2,224,15.82,16.63,0.97812,225,-15.64,13.85,0.02188,2,224,23.27,12.8,0.78491,225,-7.59,11.55,0.21509,2,224,37.84,17.56,0.09884,225,5.78,19.05,0.90116,2,226,-18.86,20.67,0.05108,225,39.05,24.56,0.94892,3,226,20.07,29.35,0.95184,225,78.92,23.73,0.04252,227,-43.87,15.58,0.00565,2,226,78.13,44.27,0.10571,227,5.87,49.06,0.89429,2,226,97.04,49.13,0.01869,227,22.06,59.95,0.98131,1,227,59.1,7.18,1,2,226,99.93,-56.55,0.05609,227,60.11,-38.69,0.94391,2,226,69.24,-69.37,0.18402,227,35.46,-61.03,0.81598,2,226,55.83,-58.99,0.29086,227,19.35,-55.72,0.70914,3,226,26.27,-36.11,0.76971,225,69.38,-41.32,0.09447,227,-16.15,-44.04,0.13581,3,224,48.46,-37.56,0.01235,226,-16.98,-38.09,0.11922,225,26.9,-32.96,0.86843,3,224,26.53,-25.12,0.35417,226,-42.1,-36.07,0.00169,225,2.98,-25.02,0.64413,2,224,19.64,-20.06,0.69095,225,-4.77,-21.4,0.30905,2,224,8.15,-21.69,0.95139,225,-15.73,-25.22,0.04861,1,224,-9.52,-14.83,1,2,224,28.56,1.08,0.50082,225,-0.12,1.08,0.49918,2,226,1.96,0.32,0.95114,225,54.43,-0.16,0.04886,2,226,56.49,-0.23,0.43237,227,0.34,-0.12,0.56763],"hull":20}},"sui01_yinying":{"sui01_yinying":{"type":"mesh","uvs":[0.98349,0,0.98596,0.25244,0.98908,0.57204,0.99169,0.83881,0.99242,0.91342,0.88174,0.97644,0.33239,1,0.27566,1,0.00001,0.86205,0.21862,0.65027,0.4424,0.44599,0.67955,0.22951,0.92555,0.00495,0.86653,0.16111,0.75035,0.40457,0.63836,0.6742],"triangles":[9,10,15,15,2,3,5,15,3,5,3,4,6,7,9,15,6,9,8,9,7,5,6,15,13,1,14,14,1,2,15,10,14,15,14,2,10,11,14,13,14,11,13,11,12,13,12,0,1,13,0],"vertices":[3,224,13.54,-10.62,0.99086,225,-12.58,-13.32,0.00003,226,-60,-28.4,0.00911,3,224,59.85,-18.38,0.16002,225,34.35,-11.93,0.38725,226,-14.74,-15.9,0.45273,1,226,42.56,-0.07,1,1,227,27.82,23.81,1,1,227,39.2,31.77,1,1,227,56.2,27.77,1,1,227,96.31,-22.64,1,2,226,141.15,-59.93,0.00003,227,100.08,-28.11,0.99997,2,226,124.77,-97.75,0.00974,227,97.28,-69.22,0.99026,2,226,80.08,-83.31,0.15036,227,50.33,-70.55,0.84964,3,225,71.82,-74.68,0.0564,226,36.58,-67.93,0.60023,227,4.19,-70.58,0.34337,4,224,49.51,-52.97,0.0469,225,30.92,-47.87,0.61377,226,-9.53,-51.62,0.3327,227,-44.71,-70.62,0.00663,3,224,13.29,-17.46,0.99784,225,-11.5,-20.07,0.00012,226,-57.35,-34.71,0.00204,3,224,40.72,-29.23,0.45291,225,17.7,-26.3,0.14158,226,-27.51,-33.81,0.40551,3,225,63.28,-38.84,0.55076,226,19.75,-35.15,0.41507,227,-22.61,-45.31,0.03417,2,226,71.59,-34.74,0.21365,227,26.1,-27.6,0.78635],"hull":13}},"sui02":{"sui02":{"type":"mesh","uvs":[0.87963,0,1,0.03835,0.99999,0.10711,0.94479,0.17569,0.94933,0.19612,0.94852,0.33554,0.89021,0.67215,0.77667,0.88224,0.71644,0.99368,0.2213,0.96643,0,0.85533,0,0.806,0.13189,0.64502,0.33903,0.48285,0.55918,0.28416,0.65743,0.18234,0.67338,0.16537,0.69044,0.14722,0.68254,0.06612,0.75741,0,0.8377,0.18368,0.70683,0.47462,0.53795,0.72006],"triangles":[9,10,11,22,11,12,8,9,22,22,9,11,7,8,22,6,21,5,22,13,21,22,21,6,12,13,22,7,22,6,5,20,4,20,14,15,20,15,16,14,20,21,20,5,21,13,14,21,2,0,1,0,17,18,2,17,0,0,18,19,2,3,17,20,17,3,16,17,20,20,3,4],"vertices":[1,220,-2.7,0.22,1,1,220,2.52,15.51,1,2,220,15.77,17.55,0.99957,221,-19.83,15.63,0.00043,2,220,29.99,13.09,0.73459,221,-5.24,12.63,0.26541,2,220,33.84,14.23,0.47075,221,-1.51,14.15,0.52925,1,221,24.83,20.88,1,3,221,90.11,30.64,0.01225,222,27.21,35.47,0.92878,223,-32.81,28.6,0.05897,2,222,70.14,39.64,0.17889,223,7.97,42.68,0.82111,2,222,92.92,41.84,0.02292,223,29.6,50.15,0.97708,1,223,61.08,0.06,1,2,222,102.63,-47.05,0.00053,223,59.81,-34.02,0.99947,2,222,93.82,-50.93,0.00593,223,52.15,-39.85,0.99407,3,221,107.63,-58.04,0.00233,222,58.77,-49.23,0.23079,223,17.67,-46.39,0.76688,3,221,70.83,-42.12,0.19555,222,19.89,-39.43,0.6926,223,-22.42,-45.95,0.11185,3,220,57.87,-29.05,0.00179,221,26.76,-26.48,0.96867,222,-26.13,-31.09,0.02954,2,220,36.47,-20.51,0.31456,221,4.6,-20.15,0.68544,2,220,32.91,-19.14,0.48083,221,0.92,-19.14,0.51917,2,220,29.1,-17.67,0.7,221,-3.01,-18.07,0.3,2,220,13.61,-21,0.99616,221,-18.09,-22.94,0.00384,1,220,-0.48,-14.16,1,2,220,33.46,0.73,0.61621,221,-0.53,0.68,0.38379,2,221,58.3,-0.16,0.32222,222,0.76,-0.03,0.67778,2,222,52.67,0.89,0.47937,223,0.03,0.92,0.52063],"hull":20}},"sui02_yinying":{"sui02_yinying":{"type":"mesh","uvs":[0.9572,0,0.99529,0.01448,0.9867,0.17759,0.98045,0.29635,0.9649,0.59167,0.95251,0.82697,0.94519,0.96591,0.64394,0.9964,0.4604,0.93667,0,0.78681,0,0.77022,0.17904,0.64054,0.41546,0.46928,0.73065,0.24098,0.8109,0.1242,0.89626,0,0.92272,0.08381,0.86838,0.21732,0.80595,0.42039,0.67,0.6799],"triangles":[11,12,19,9,10,11,5,19,4,8,11,19,7,8,19,9,11,8,19,5,7,6,7,5,12,13,18,4,18,3,19,12,18,19,18,4,16,15,0,16,0,1,14,15,16,2,16,1,17,14,16,2,17,16,13,14,17,3,17,2,18,13,17,18,17,3],"vertices":[1,221,-17.44,-9.08,1,1,221,-16.05,-3.65,1,1,221,13.75,2.94,1,1,221,35.45,7.73,1,2,222,28.29,24.51,0.97081,223,-29.19,18.2,0.02919,2,222,69.2,40.8,0.15159,223,6.78,43.59,0.84841,2,222,93.35,50.42,0.01749,223,28.01,58.59,0.98251,1,223,56.1,31.13,1,1,223,61.56,5.53,1,1,223,75.27,-58.7,1,2,222,109.05,-75.91,0.00008,223,72.8,-60.58,0.99992,2,222,77.55,-64.56,0.06192,223,39.51,-56.9,0.93808,3,221,85.05,-54.71,0.0018,222,35.94,-49.57,0.56412,223,-4.44,-52.05,0.43407,3,221,33.52,-26.06,0.81507,222,-19.53,-29.59,0.18392,223,-63.04,-45.58,0.00101,2,221,9.78,-21.52,0.99606,222,-43.69,-28.93,0.00394,1,221,-15.47,-16.69,1,1,221,-1.15,-9.46,1,2,221,24.77,-9.98,0.98122,222,-30.74,-15.12,0.01878,3,221,63.55,-8.24,0.05175,222,7.25,-7.17,0.94498,223,-42.24,-17.53,0.00328,2,222,58.73,-3.64,0.02392,223,6.98,-2.06,0.97608],"hull":16}},"sui03_yinying":{"sui03_yinying":{"type":"mesh","uvs":[0.90698,0,1,0.07282,1,0.10849,0.97637,0.16499,0.89164,0.17675,0.8664,0.18025,0.88836,0.19402,0.90888,0.2069,0.90412,0.30178,0.81877,0.54191,0.72947,0.75547,0.6446,0.95844,0.50425,0.98655,0.21436,0.96842,0.00001,0.83887,0,0.67548,0.31545,0.5438,0.47984,0.42857,0.66659,0.24414,0.73186,0.18467,0.74885,0.17134,0.78228,0.16553,0.7691,0.15647,0.70135,0.10989,0.74172,0.04449,0.83477,0,0.82574,0.18384,0.70617,0.38529,0.52515,0.6135],"triangles":[28,14,15,28,12,13,28,13,14,16,28,15,28,10,12,11,12,10,9,27,8,27,9,28,27,28,17,16,17,28,10,28,9,26,27,18,19,20,26,26,18,19,26,8,27,17,18,27,25,0,1,1,22,24,23,24,22,25,1,24,2,22,1,21,22,5,22,2,4,3,4,2,4,5,22,26,21,5,20,21,26,26,5,6,7,26,6,7,8,26],"vertices":[1,216,-7.09,-0.37,1,2,216,6.38,16.03,0.89866,217,-31.65,11.93,0.10134,2,216,14.46,17.99,0.7934,217,-23.9,14.92,0.2066,2,216,28.01,17.96,0.55459,217,-10.45,16.64,0.44541,2,216,33.42,7.32,0.46687,217,-3.71,6.79,0.53313,2,216,35.03,4.16,0.48975,217,-1.71,3.86,0.51025,2,216,37.44,7.84,0.93012,217,0.2,7.82,0.06988,2,216,39.69,11.28,0.97294,217,1.99,11.52,0.02706,3,216,61.32,15.87,0.15879,217,22.85,18.87,0.83891,218,-28.51,17.86,0.00231,3,217,79.26,28.08,0.00456,218,27.54,29.08,0.98797,219,-33.83,26.89,0.00747,2,218,78.11,37.38,0.14798,219,16.07,38.53,0.85202,1,219,63.5,49.6,1,1,219,78.05,35.42,1,1,219,92.28,-1.89,1,1,219,78.68,-41.75,1,2,218,100.22,-61.85,0.00258,219,44.74,-59,0.99742,2,218,55.03,-34.16,0.51951,219,-2.19,-34.38,0.48049,3,217,71.33,-24.74,0.00973,218,21.49,-23.99,0.98927,219,-36.33,-26.47,0.001,1,217,22.03,-16.33,1,2,216,40.39,-13.51,0.20038,217,5.88,-12.97,0.79962,2,216,36.82,-11.98,0.36954,217,2.15,-11.91,0.63046,2,216,34.42,-7.85,0.74272,217,-0.76,-8.13,0.25728,2,216,32.8,-10.1,0.89864,217,-2.08,-10.57,0.10136,1,216,24.45,-21.69,1,1,216,8.33,-19.92,1,1,216,-4.75,-9.98,1,2,216,37.16,-1.06,0.68744,217,1.07,-1.04,0.31256,3,216,86.64,-5.88,0,217,50.76,0.56,0.49092,218,0.04,0.56,0.50908,2,218,58.68,-1.36,0.66397,219,-0.73,-1.41,0.33603],"hull":26}},"sui04_yinying":{"sui04_yinying":{"type":"mesh","uvs":[0.94924,0.01499,1,0.02679,0.99613,0.14824,0.9274,0.19931,0.88026,0.18901,0.89759,0.23082,0.83544,0.35516,0.66666,0.59265,0.46807,0.83811,0.34667,1,0.22016,0.95896,0.09205,0.86282,0,0.753,0.00001,0.596,0.17297,0.52823,0.4453,0.36886,0.67166,0.17465,0.77587,0.14194,0.82649,0.15389,0.79893,0.05982,0.88474,0,0.84577,0.18551,0.6534,0.37278,0.43046,0.59126,0.85882,0.164],"triangles":[23,14,15,8,23,7,14,12,13,11,12,14,11,14,23,8,10,11,8,11,23,9,10,8,22,15,16,23,15,22,7,22,6,23,22,7,21,18,24,3,4,24,21,24,4,2,3,24,5,6,21,5,21,4,21,16,17,21,22,16,6,22,21,2,0,1,24,18,19,20,24,19,24,20,0,24,0,2,18,21,17],"vertices":[2,212,0.71,1.29,0.9963,213,-34.83,-7.2,0.0037,2,212,-3.17,11.46,0.95766,213,-40.37,2.17,0.04234,2,212,18,24.59,0.54504,213,-21.72,18.69,0.45496,2,212,34.68,18.45,0.10239,213,-4.25,15.45,0.89761,3,212,38.38,9.08,0.00062,213,0.99,6.84,0.99922,214,-55.96,-0.11,0.00015,2,213,4.73,15.37,0.99455,214,-53.18,8.77,0.00545,2,213,32.17,23.45,0.69805,214,-26.78,19.81,0.30195,2,214,31.61,34.13,0.97724,215,-39.83,30,0.02276,2,214,95.8,45.67,0.05167,215,22.74,48.42,0.94833,1,215,62.35,61.69,1,1,215,79.54,39.91,1,1,215,90.67,8.58,1,1,215,93.99,-20.85,1,1,215,75.96,-47.5,1,2,214,101.77,-42.67,0.00821,215,38.23,-38.76,0.99179,3,213,90.24,-33.86,0.10561,214,37.23,-30.78,0.84946,215,-27.22,-33.93,0.04493,2,212,60.12,-28.83,0.2386,213,28.81,-26.85,0.7614,2,212,42.46,-14.42,0.77463,213,8.97,-15.63,0.22537,1,212,38.63,-4.26,1,1,212,25.78,-19.75,1,1,212,5.63,-11.63,1,2,213,5.42,1.12,0.99995,214,-50.92,-5.32,0.00005,3,212,96.03,-9.47,0.00033,213,60.94,-1.71,0.37213,214,4.57,-2.04,0.62754,2,214,69.08,1.99,0.27739,215,0.89,2.1,0.72261,2,212,36.6,2.51,0.0123,213,0.34,0.07,0.9877],"hull":21}},"toushi01":{"toushi01":{"x":-169.44,"y":21.4,"rotation":121.02,"width":354,"height":620}},"toushi02":{"toushi02":{"type":"mesh","uvs":[0.0502,0,0.22824,0.31588,0.44966,0.36126,0.64098,0.22704,0.76184,0,0.99411,0.22207,0.98634,0.77923,0.74172,1,0.61118,1,0.32722,0.78906,0.11233,0.62943,0,0.29884,0,0.1664,0.02046,0],"triangles":[3,4,5,1,11,12,0,12,13,12,0,1,10,11,1,6,3,5,2,3,6,2,10,1,9,2,6,9,10,2,8,9,6,7,8,6],"vertices":[158.81,-54.86,191.76,0.07,179.43,36.32,142.18,51.65,96.83,48.21,110.67,102.34,196.81,152.61,251.98,137.54,263.35,118.64,255.72,58.05,249.95,12.2,209.02,-34.56,188.71,-46.78,161.4,-59.16],"hull":14}},"wuqi01_baixian2":{"wuqi01_baixian":{"type":"mesh","uvs":[1,1,0,1,0,0,1,0],"triangles":[1,2,3,1,3,0],"vertices":[731.62,2939.38,3017.82,-6.59,-674.72,-2872.15,-2960.91,73.82],"hull":4}},"xiajiemao":{"xiajiemao":{"type":"mesh","uvs":[1,1,0,1,0,0,1,0],"triangles":[1,2,3,1,3,0],"vertices":[-39.88,-31.41,-33.76,28.27,-14.85,26.34,-20.98,-33.35],"hull":4}},"xiu01":{"xiu01":{"type":"mesh","uvs":[0.93472,0,0.94725,0,0.97921,0.00954,0.98923,0.09686,0.99118,0.23301,0.99491,0.49388,0.97823,0.66358,0.95438,0.78036,0.91486,0.84154,0.87529,0.86809,0.81669,0.85288,0.76646,0.74446,0.73931,0.63852,0.70064,0.58464,0.65023,0.59193,0.58987,0.64832,0.49132,0.80481,0.40573,0.89922,0.31851,0.96042,0.22701,0.99722,0.1507,0.99999,0.07129,0.99999,0.01853,0.98546,0,0.96985,0.01981,0.96628,0.12623,0.97951,0.22073,0.95193,0.38535,0.58414,0.25179,0.59763,0.26538,0.46694,0.38116,0.31476,0.47687,0.20667,0.59225,0.11596,0.74016,0.07221,0.82436,0.07173,0.84323,0.07163,0.92775,0.00686,0.97415,0.08423,0.97851,0.3047,0.9727,0.5359,0.94027,0.69678,0.85237,0.17971,0.74449,0.35207,0.63732,0.51213,0.52443,0.67921,0.40284,0.84653,0.25598,0.95428,0.19212,0.97789,0.11403,0.99275,0.77098,0.09631,0.68314,0.11893,0.57578,0.17404,0.45734,0.34149,0.9402,0.15199,0.9068,0.37218,0.83405,0.57769,0.79231,0.68339,0.33907,0.4841],"triangles":[28,57,27,28,29,57,57,30,52,57,29,30,38,4,5,54,53,38,4,38,3,37,38,53,3,38,37,53,1,37,37,2,3,37,1,2,5,39,38,39,54,38,7,40,6,6,40,39,40,55,39,6,39,5,55,54,39,40,8,9,11,56,10,56,55,9,9,10,56,8,40,7,40,9,55,11,12,56,56,12,55,21,48,20,20,47,19,20,48,47,48,21,23,19,47,46,48,23,24,48,25,47,48,24,25,23,21,22,26,47,25,47,26,46,46,26,27,19,46,18,17,18,45,18,46,45,46,27,45,17,45,16,16,45,44,16,44,15,44,45,27,43,15,44,15,43,14,54,42,41,54,55,42,42,49,41,55,12,42,14,43,13,12,13,42,13,43,42,43,50,42,44,27,52,43,44,52,27,57,52,52,51,43,52,31,51,52,30,31,43,51,50,51,31,32,51,32,50,50,32,33,42,50,49,50,33,49,49,33,34,49,34,41,54,41,53,34,35,41,53,41,36,41,35,36,53,36,1,1,36,0],"vertices":[3,77,-17.66,27.78,0.77506,73,-176.46,8.82,0,85,-84.69,-78.37,0.22494,3,77,-35.46,47,0.51784,73,-201.89,15.11,0,85,-83.39,-52.2,0.48216,3,77,-74.91,101.5,0.12946,73,-264.79,38.99,0,85,-72,14.1,0.87054,2,73,-267.34,115.98,0,85,3.08,31.36,1,2,73,-243.57,229.18,0,85,118.73,29.71,1,2,87,-39.63,29.64,0.05402,86,156.37,42.12,0.94598,1,87,106.01,57.26,1,2,88,27.06,69.61,0.47086,87,216.88,52.72,0.52914,2,88,121.61,45.47,0.98836,87,298.26,-1.13,0.01164,2,88,194.89,1.01,1,86,485.93,-192.03,0,4,73,236.68,652.62,0,79,95.09,443.47,0.10033,78,374.39,439.6,0.03517,88,269.85,-96.69,0.8645,5,73,316.52,538.08,0,79,136.73,310.2,0.31214,78,411.01,304.86,0.09205,88,275.38,-236.21,0.59555,86,392.24,-424.35,0.00026,5,73,350.05,437.15,0,79,138.3,203.86,0.59405,78,408.6,198.54,0.08994,88,249.22,-339.29,0.31494,86,305.18,-485.44,0.00107,5,73,417.53,373.36,0,79,183.44,122.7,0.89625,78,450.67,115.75,0.01381,80,-73.19,122.67,0.00479,88,271.69,-429.4,0.08516,3,79,276.57,73.09,0.45055,80,19.97,73.09,0.54614,88,348.71,-501.54,0.00331,1,80,152.6,48.27,1,1,81,124.87,60.46,1,3,73,1079.96,484.81,0,81,320.28,45.06,0.46991,82,-1.85,45.68,0.53009,1,82,187.68,43.32,1,2,73,1462.5,475.99,0,83,51.23,31.99,1,1,83,210.7,27.26,1,1,83,376.51,19.89,1,1,83,486.12,2.68,1,1,83,524.23,-12.29,1,1,83,482.72,-13.48,1,1,83,261.03,7.62,1,3,82,381.45,-22.04,0.00119,83,62.68,-7.01,0.99796,289,405.38,201.51,0.00086,3,82,-37.55,-222.83,0.40139,83,-294.91,-303.67,0.15112,289,-50.37,111.16,0.44748,2,73,1330.89,159.06,0,289,194.77,-22.85,1,2,288,368.63,-97.21,0.00944,289,113.26,-103.31,0.99056,2,76,401.18,-102.11,0.00756,288,94.32,-97.7,0.99244,3,73,794.59,-50.34,0,76,182.1,-81.05,0.96535,288,-125.4,-84.81,0.03465,2,73,542.01,-67.27,0,75,187,-44.74,1,2,73,233,-29.19,0.00067,74,73.37,-22.04,0.99933,3,77,183.77,-100.02,0.26907,73,62.06,12.63,0.63734,78,-5.5,-104.25,0.09359,3,77,156.9,-71.15,0.6952,73,23.75,22,0.26554,78,-38.41,-82.53,0.03925,1,77,-24.66,-30.02,1,3,77,-21.22,136.84,0.01791,73,-239.32,98.01,0,85,-9.19,0.42,0.98209,2,86,-2.37,0.02,0.44609,85,178.21,0.26,0.55391,2,87,12.01,2.06,0.79079,86,194.28,-2.49,0.20921,6,73,-45.83,585.91,0,79,-194.4,464.93,0.0001,78,85.91,471.88,0.00039,88,-4.08,-0.64,0.43632,87,164.4,-3.41,0.56313,86,334.02,-63.51,0.00006,6,77,211.23,5.23,0.55983,78,-3.62,4.5,0.43433,88,-195.98,-436.11,0.0006,87,-159.86,-351.72,0.00003,86,-95.45,-268.49,0.00207,85,59.19,-257.8,0.00314,5,73,281.21,203.65,0,79,2.33,1.93,0.55217,78,265.17,1.84,0.44666,88,65.4,-498.88,0.00108,86,61.75,-486.53,0.00009,2,79,264.31,1.19,0.33693,80,7.74,1.19,0.66307,5,73,794.32,362.98,0,76,297.53,315.82,0.00087,80,283.02,-0.56,0.20519,81,13.02,0.06,0.79386,288,-24.82,316.09,0.00008,3,73,1075.09,439.93,0,81,304.13,2.91,0.68957,82,-8.85,1.09,0.31043,3,82,311.43,0.95,0.74181,83,-10.84,-1.74,0.25744,289,343.27,241.18,0.00076,1,83,123.4,12.36,1,1,83,287,17.71,1,3,73,175.37,6.13,0.23179,74,12.54,7.4,0.75074,78,99.02,-148.52,0.01747,3,74,196.98,0.2,0.4508,75,2.37,0.01,0.5486,79,8.62,-233.82,0.0006,3,73,587.25,-27.65,0,75,231.53,-4.32,0.72935,76,-10.59,-1.23,0.27065,1,76,274.86,-2.55,1,5,77,69.22,123.88,0.32173,78,-169.6,86.33,0.01056,88,-339.42,-319.2,0.00057,86,-127.94,-86.31,0.00895,85,44.77,-73.31,0.65819,8,77,253.79,199.74,0.08753,73,-44.03,301.59,0,79,-278.31,193.28,0.00322,78,-8.11,203.56,0.28798,88,-155.79,-241.1,0.10409,87,-57.86,-180.71,0.04071,86,62.19,-146.86,0.38233,85,228.03,-152.26,0.09414,6,73,145.42,434.51,0,79,-57.62,262.96,0.16681,78,215.03,264.94,0.2614,88,75.43,-231.24,0.52096,87,163.77,-247.33,0.00959,86,243.91,-290.18,0.04123,5,73,251.64,500.7,0,79,63.59,294.09,0.29429,78,337.33,291.5,0.11831,88,200.57,-232.73,0.58343,86,337.8,-372.92,0.00397,2,288,239.47,-12.04,0.71753,289,-11.23,-11.47,0.28247],"hull":37}},"xiu02":{"xiu02":{"type":"mesh","uvs":[0.46744,0.10069,0.62627,0.09012,0.81369,0.07765,0.90009,0.22917,1,0.40439,1,0.46977,0.91077,0.68005,0.77768,0.99369,0.64386,0.99674,0.50066,1,0.32648,0.91945,0.08042,0.43338,0.04765,0.28728,0,0.0748,0,0.02503,0.07595,0.10294,0.16853,0.17746,0.30551,0.20509,0.25567,0.01211,0.57819,0.59531,0.24748,0.46499,0.82475,0.52193,0.39868,0.52457,0.14242,0.27822],"triangles":[7,8,21,21,1,2,9,19,8,21,8,19,7,21,6,6,21,5,21,3,5,21,2,3,3,4,5,23,15,16,11,23,20,23,16,20,11,12,23,23,12,14,23,14,15,13,14,12,10,22,9,9,22,19,10,11,20,10,20,22,21,19,1,22,0,19,19,0,1,20,17,22,22,17,0,20,16,17,17,18,0],"vertices":[2,93,122.43,-114.3,0.99999,92,322.85,-160.84,0.00001,2,93,-37,-130.87,0.5532,92,166.09,-127.38,0.4468,3,93,-225.11,-150.42,0.00179,91,244.88,-86.3,0.60212,92,-18.87,-87.9,0.39609,1,91,173,-23.64,1,1,91,89.89,48.83,1,1,91,94.81,64.75,1,2,91,196.66,89.39,0.93123,92,-79.72,83.82,0.06877,2,91,348.58,126.14,0.0671,92,69.12,131.51,0.9329,1,92,200.86,101.86,1,2,93,69.17,111.26,0.46437,92,341.82,70.14,0.53563,2,93,246.04,106.02,0.99593,92,508.43,10.55,0.00407,1,94,155.24,61.91,1,1,94,201.08,42.43,1,1,94,267.75,14.09,1,1,94,273.19,2.63,1,1,94,195.44,-12.28,1,2,93,421.2,-68.67,0.01641,94,102.91,-35.16,0.98359,3,93,282.9,-73.63,0.99913,94,-24.98,-88.05,0.00085,92,488.03,-171.7,0.00002,2,93,337.26,-118.29,0.99997,92,525.94,-230.96,0.00003,2,93,0.18,1.67,0.9125,92,242.37,-12.8,0.0875,2,93,335.49,-2.53,1,92,560,-120.31,0,2,91,267.68,25.23,0.57077,92,-4.24,24.99,0.42923,1,93,182.18,-0.61,1,2,93,445.22,-40.79,0.00003,94,115.68,-0.65,0.99997],"hull":19}},"xiu03":{"xiu03":{"type":"mesh","uvs":[0.56245,0.00308,0.71322,0.05932,0.86417,0.11564,0.92165,0.13708,0.99367,0.16395,0.99999,0.22384,0.98378,0.29662,0.8851,0.41587,0.75252,0.59956,0.64974,0.76813,0.56046,0.91236,0.37641,1,0.22646,0.99999,0.11296,0.98669,0.00001,0.95412,0.00001,0.89486,0.10784,0.65331,0.22283,0.53515,0.3475,0.44771,0.43472,0.42144,0.54079,0.4234,0.68552,0.3835,0.71621,0.35888,0.67523,0.37228,0.5919,0.4011,0.49299,0.41495,0.43459,0.37214,0.35305,0.27328,0.27173,0.07133,0.27981,0.04342,0.3671,0.0004,0.60523,0.2074,0.97964,0.22399,0.80046,0.42428,0.64855,0.5791,0.43147,0.69747,0.26091,0.76769,0.07007,0.86071,0.77621,0.1694,0.42881,0.1185,0.73714,0.34681,0.86901,0.2517],"triangles":[7,33,32,8,33,7,32,4,5,6,32,5,32,6,7,16,17,36,37,16,36,37,15,16,14,15,37,13,37,36,14,37,13,12,13,36,35,18,19,36,17,18,36,18,35,11,36,35,11,35,10,12,36,11,34,20,21,33,34,21,8,34,33,35,19,20,35,20,34,9,34,8,10,35,34,9,10,34,39,30,0,29,30,39,39,0,31,27,29,39,28,29,27,25,26,39,27,39,26,39,31,25,24,31,23,24,25,31,33,21,40,38,1,2,38,2,3,31,0,1,31,1,38,4,41,3,41,38,3,32,41,4,31,38,23,40,38,41,38,40,23,40,22,23,21,22,40,32,33,41,33,40,41],"vertices":[2,95,424.28,-109.27,0.41583,96,70.33,-98.65,0.58417,2,95,252.76,-59.49,0.74917,96,-107.97,-109.07,0.25083,3,95,81.02,-9.65,0.95997,80,296.06,-230.2,0.0332,81,37.02,-228.69,0.00683,4,95,15.62,9.33,0.82051,82,-282.94,-250.96,0.00018,80,244.68,-185.52,0.16983,81,-16.45,-186.51,0.00948,4,95,-66.33,33.11,0.54444,82,-359.47,-213.22,0.0001,80,180.29,-129.52,0.39705,81,-83.44,-133.66,0.05841,3,95,-127.94,87.37,0.16942,80,147.16,-54.41,0.827,81,-120.12,-60.22,0.00357,3,95,-154.5,180.05,0.03289,80,161.96,40.86,0.6412,81,-109.89,35.65,0.32591,4,95,-17.45,254.88,0.00006,82,-272.6,-3.42,0.01222,80,317.76,51.22,0.3407,81,45.24,53.45,0.64702,3,82,-34.6,34.58,0.34555,80,557.58,27.32,0.00743,81,285.93,41.03,0.64702,2,82,109.81,29.21,0.67888,81,426.06,5.7,0.32112,2,82,239.05,22.84,0.66667,83,-86.36,1.9,0.33333,3,82,458.35,5.95,0.33333,83,130.46,38.84,0.53759,84,-183.6,23.99,0.12908,2,83,305.43,31.06,0.53759,84,-8.58,30.47,0.46241,2,83,437.55,18.12,0.20425,84,124.15,28.32,0.79574,1,84,256.63,15.91,1,2,83,567.18,-36.45,0.0288,84,257.8,-15.53,0.9712,3,82,706.28,-260.18,0.00513,83,435.67,-159,0.24409,84,136.69,-148.37,0.75078,4,95,850.63,126.12,0.00003,82,559.63,-281.88,0.06151,83,298.7,-215.71,0.50547,84,4.79,-216.04,0.43298,5,95,700.67,96.62,0.00136,82,406.82,-284.73,0.19635,83,151.17,-255.64,0.66314,84,-139.01,-267.83,0.13913,81,651.15,-363.23,0.00002,5,95,597.87,94.39,0.0135,82,305.21,-268.95,0.43003,83,48.78,-265.05,0.53259,84,-240.3,-285.54,0.0167,81,555.06,-326.63,0.00717,5,95,474.9,109.58,0.07933,82,186.79,-232.52,0.5731,83,-74.95,-258.5,0.28075,84,-364.14,-289.08,0.00117,81,446.83,-266.33,0.06565,6,95,304.55,107.83,0.46031,96,-115.09,65.93,0.00552,82,18.76,-204.47,0.33048,83,-244.76,-272.17,0.00954,80,548.26,-217.43,0.00174,81,288.32,-203.89,0.19242,6,95,267.43,98.93,0.66381,96,-147.1,45.14,0.06049,82,-19.34,-206.74,0.08713,83,-281.16,-283.64,0.00318,80,510.84,-209.92,0.00198,81,250.58,-198.18,0.18341,6,95,315.81,100.54,0.56128,96,-102.04,62.83,0.28127,82,28.57,-213.61,0.04381,83,-233.02,-278.65,0.00036,80,555.42,-228.78,0.00185,81,296.01,-214.88,0.11144,5,95,414.26,104.63,0.27427,96,-10.62,99.59,0.70114,82,126.21,-226.79,0.00978,83,-135.1,-267.68,0.00001,81,388.77,-248.11,0.01481,4,95,529.86,98.74,0.03281,96,100.3,132.68,0.96691,82,239.01,-252.79,0.00013,81,493.67,-297.03,0.00015,1,96,171.87,125.84,1,1,96,276.46,96.06,1,1,96,393.09,12.88,1,1,96,387.22,-3.67,1,2,95,650.8,-136.73,0.0825,96,293,-48.82,0.9175,4,95,387.04,4.22,0.35459,96,-2.71,-4.14,0.64293,82,81.87,-320.9,0.00024,81,325.8,-330.91,0.00224,3,95,-64.77,117.18,0.34252,80,217,-53.88,0.42889,81,-50.38,-56.35,0.22858,5,95,78.54,155.98,0.25692,82,-195.38,-117.56,0.25799,83,-473.58,-239.94,0.00759,80,363.35,-78.83,0.28593,81,96.99,-74.28,0.19157,6,95,359.31,206.09,0.11231,82,89.84,-117.29,0.65112,83,-197.01,-170.32,0.13302,84,-492.97,-211.12,0.00018,80,639.22,-151.25,0.00703,81,376.01,-133.43,0.09633,5,95,618.38,239.58,0.0288,82,350.78,-129.59,0.35262,83,59.08,-118.78,0.50863,84,-241.92,-138.92,0.07077,81,628.65,-199.81,0.03918,4,95,820.55,253.87,0.00023,82,552.33,-150.84,0.09463,83,259.76,-90.38,0.50112,84,-44.22,-94.29,0.40402,3,82,780.04,-167.27,0.00179,83,484.62,-50.93,0.26119,84,176.69,-36.68,0.73702,5,95,186.33,6.98,0.64789,96,-192.79,-68.63,0.3096,82,-115.27,-283.1,0.00024,80,398.63,-259.32,0.0332,81,140.86,-252.88,0.00907,2,95,586.36,-66.2,0.02374,96,208.68,-3.89,0.97626,6,95,235.38,94.07,0.60097,96,-175.68,29.85,0.047,82,-51.75,-205.92,0.08276,83,-312.8,-290.73,0.00247,80,479.71,-200.87,0.12204,81,219.05,-190.63,0.14475,6,95,83.64,62.77,0.56047,96,-308.23,-50.37,0.02146,82,-206.62,-210.23,0.05581,83,-461.97,-332.57,0.00113,80,328.86,-165.57,0.26434,81,66.68,-162.57,0.09679],"hull":31}},"xiuzi":{"xiuzi":{"type":"mesh","uvs":[0.78289,0,0.92345,0.02041,0.99652,0.06995,0.99894,0.20102,1,0.29587,0.918,0.51033,0.86319,0.59831,0.79217,0.66306,0.66626,0.78096,0.45271,0.90103,0.29111,0.95058,0.34725,0.99329,0.34544,0.99774,0.28957,0.94988,0.25705,0.95837,0.00226,1,0,0.99973,0.0784,0.9613,0.17518,0.87957,0.25815,0.72978,0.26692,0.62841,0.27318,0.4015,0.38365,0.205,0.46963,0.05208,0.56803,0.01824,0.68407,0,0.82966,0.38472,0.71845,0.59886,0.54657,0.80513,0.1465,0.96019,0.89295,0.13889,0.91255,0.06276],"triangles":[29,17,18,15,16,17,15,17,29,15,29,14,18,28,29,13,29,28,10,13,9,28,9,13,14,29,13,12,10,11,13,10,12,27,28,20,8,27,7,28,19,20,27,8,28,18,19,28,9,28,8,5,26,4,5,27,26,6,27,5,27,21,26,20,21,27,7,27,6,31,0,1,31,1,2,31,25,0,30,31,2,30,2,3,31,30,25,4,26,30,4,30,3,30,24,25,30,23,24,30,22,23,26,22,30,26,21,22],"vertices":[1,97,-216.06,-113.9,1,1,97,-192.93,2.31,1,1,97,-114.2,69.74,1,1,97,110.18,95.32,1,1,97,272.62,113.28,1,1,98,199.49,109.23,1,2,98,357.01,98.71,0.86858,99,-53.06,89.53,0.13142,2,98,478.25,66.84,0.03232,99,72.17,83.95,0.96768,1,99,299.08,76.28,1,1,100,146.85,75.49,1,1,100,301.28,56.46,1,1,100,314.41,141.81,1,1,100,320.48,146.7,1,1,100,301.45,54.73,1,1,100,330.87,48.95,1,1,101,142.09,-3.7,1,1,101,143.43,-5.02,1,2,100,443.82,-40.21,0.00967,101,55.66,-30.77,0.99033,2,99,618.03,-212.53,0.00595,100,293.31,-97.22,0.99405,3,98,682.9,-328.31,0.03867,99,355.55,-259.16,0.54003,100,75.45,-250.85,0.4213,4,97,904.22,-413.63,0.0072,98,510.8,-358.94,0.25157,99,193.78,-325.39,0.66743,100,-42.91,-379.49,0.0738,3,97,514.88,-449.54,0.32274,98,127.88,-438.02,0.5884,99,-163.85,-483.44,0.08886,3,97,168.86,-396.54,0.89245,98,-221.89,-423.91,0.10732,99,-508.72,-543.42,0.00023,2,97,-100.43,-355.3,0.9983,98,-494.09,-412.93,0.0017,1,97,-166.69,-282.63,1,1,97,-207.73,-193.02,1,2,97,439.23,-7.06,0.42796,98,3.4,-6.73,0.57204,3,97,815.54,-57.48,0.00001,98,382.98,-14.89,0.66238,99,-3.72,-16.03,0.33761,2,99,377.03,5.99,0.94929,100,-17.65,-1.66,0.05071,2,100,400.77,-6.22,0.30574,101,7.23,-5.01,0.69426,1,97,12.66,-0.74,1,1,97,-119.45,1.22,1],"hull":26}},"yan":{"yan":{"x":-0.89,"y":1.15,"rotation":-95.86,"width":75,"height":63}},"yanbai":{"yanbai":{"x":-0.24,"y":2.22,"rotation":-95.86,"width":105,"height":60}},"yanzz":{"yanzz":{"type":"clipping","end":"yan","vertexCount":9,"vertices":[16.03,57.58,24.33,27.39,25.13,-14.2,16.73,-49.79,-4.16,-49.54,-22.9,-31.46,-27.32,-3.44,-26.51,29.12,-6.98,50.08]}},"yinying01":{"yinying01":{"type":"mesh","uvs":[0.72562,0.27997,0.97386,0.36598,0.97422,0.45261,0.97449,0.51905,0.75575,0.53254,0.58525,0.54305,0.35596,0.67173,0.26442,0.8435,0.18101,1,0.05627,0.96357,0,0.82834,0.14327,0.63197,0.31185,0.45836,0.49622,0.31542,0.85736,0.42426,0.64245,0.41992,0.41805,0.52706,0.27096,0.67199,0.16514,0.80261],"triangles":[15,13,0,14,0,1,15,0,14,14,1,2,16,12,13,16,13,15,4,15,14,3,4,14,3,14,2,5,16,15,5,15,4,16,17,12,6,16,5,17,11,12,6,17,16,18,11,17,10,11,18,7,18,17,7,17,6,9,10,18,8,18,7,9,18,8],"vertices":[39.3,5.43,32.18,-21.79,27.87,-21.38,24.56,-21.08,26.39,3.36,27.82,22.41,24.04,48.62,16.54,59.69,9.71,69.78,12.94,83.5,20.31,89.08,28.44,72.11,35.15,52.44,40.15,31.17,30.61,-8.51,33.29,15.41,30.52,40.96,24.99,58.09,19.71,70.54],"hull":14}},"yinying02":{"yinying02":{"type":"mesh","uvs":[0.35433,0.0172,0.39419,0.25419,0.56374,0.48409,0.76079,0.67614,0.94753,0.82486,0.824,0.97404,0.54288,0.98681,0.36909,0.80121,0.24788,0.66026,0.07236,0.37505,0.00001,0.16659,0.13197,0.02341,0.18845,0.18894,0.32409,0.47088,0.57277,0.70632,0.80789,0.82985],"triangles":[12,11,0,10,11,12,12,0,1,9,10,12,13,12,1,9,12,13,13,1,2,8,9,13,14,2,3,13,2,14,7,13,14,8,13,7,15,3,4,14,3,15,5,15,4,6,7,14,6,14,15,6,15,5],"vertices":[23.28,55.9,8.1,54.21,-7.71,42.03,-21.38,27.38,-32.24,13.29,-40.57,24.2,-39.05,46.94,-25.98,59.75,-16.14,68.61,3.18,80.92,16.84,85.41,24.73,73.86,13.88,70.37,-4.91,61.25,-21.72,42.73,-31.4,24.58],"hull":12}},"yu01":{"yu01":{"type":"mesh","uvs":[0.75587,0,1,0.08027,1,0.10153,0.71496,0.16978,0.52755,0.33909,0.27236,0.70083,0.04774,1,0.00178,1,0.00319,0.92768,0.13733,0.62197,0.2943,0.26422,0.45718,0.0573,0.62739,0.00001,0.27623,0.47391,0.59016,0.10333,0.82484,0.06221],"triangles":[1,15,0,15,1,2,3,15,2,14,12,0,14,0,15,3,14,15,14,11,12,11,14,10,4,14,3,14,13,10,14,4,13,13,9,10,13,7,9,5,13,4,7,8,9,13,5,7,6,7,5],"vertices":[2,281,54.63,22.15,0.99957,282,-22.31,14.85,0.00043,1,282,58.9,4.15,1,1,282,59.93,-2.08,1,3,280,161.03,-36.93,0.07641,281,30.74,-24.15,0.92298,282,-27.02,-37.05,0.00061,1,280,82.99,-29.37,1,1,279,106.31,-33.83,1,1,279,-7.17,-19.09,1,1,279,-14.91,-6.53,1,1,279,3.61,4.36,1,1,279,103.5,15.35,1,1,280,46.28,39.57,1,2,280,126.75,45.46,0.99478,281,-42.64,26.63,0.00522,2,280,177.22,18.48,0.06743,281,14.4,31.22,0.93257,2,279,164.33,0.48,0.78791,280,-2.15,0,0.21209,2,280,146.97,5.45,0.71543,281,-4,3.91,0.28457,2,281,72.17,-0.74,0.17025,282,2.55,0.24,0.82975],"hull":13}},"yu02":{"yu02":{"type":"mesh","uvs":[0.67844,0.01776,0.81488,0.12905,0.93499,0.34503,1,0.58203,0.99706,0.65784,0.86758,0.50643,0.70851,0.51672,0.53111,0.55248,0.31584,0.71813,0.16792,0.96681,0.03326,1,0,0.82999,0,0.6855,0.1047,0.30348,0.27417,0.10037,0.48212,0,0.30463,0.34802,0.68944,0.23442],"triangles":[3,4,2,1,2,17,6,17,5,5,17,4,17,2,4,6,7,17,7,16,17,17,15,0,17,16,15,16,14,15,17,0,1,8,9,16,16,9,10,13,16,12,12,16,11,11,16,10,8,16,7,13,14,16],"vertices":[2,284,74.01,22.78,0.97185,285,-19.44,12.24,0.02815,2,284,97.33,5.68,0.03024,285,8.61,19.26,0.96976,1,285,41.49,15.36,1,1,285,67.61,3,1,1,285,72.43,-3.83,1,2,284,99.2,-37,0.00115,285,42.64,-6.58,0.99885,2,284,69.02,-32.18,0.39028,285,19.65,-26.71,0.60972,3,283,89.97,-44.96,0.06443,284,34.85,-29.43,0.89991,285,-4.3,-51.25,0.03566,2,283,49.9,-24.12,0.90977,284,-9.24,-39.29,0.09023,1,283,10.79,-19.08,1,1,283,-8.24,-1.2,1,1,283,2.35,15.48,1,1,283,14.75,25.43,1,1,283,60.11,36.04,1,2,283,97.9,24.64,0.43983,284,-3.9,28.93,0.56017,1,284,37.41,32.01,1,2,283,80.31,3.04,0.97382,284,-3.45,1.07,0.02618,2,284,71.46,-1.01,0.96291,285,-2.77,-4.92,0.03709],"hull":16}},"脸":{"脸":{"x":284.44,"y":-10.89,"rotation":-95.86,"width":512,"height":673}}}}],"animations":{"animation":{"bones":{"shengti":{"translate":[{"x":20.2,"y":-14.77,"curve":[0.444,20.2,0.889,-62.58,0.444,-14.77,0.889,31.02]},{"time":1.3333,"x":-62.58,"y":31.02,"curve":[1.778,-62.58,2.222,20.2,1.778,31.02,2.222,-14.77]},{"time":2.6667,"x":20.2,"y":-14.77}]},"shengti2":{"translate":[{"x":0.12,"y":-8.92,"curve":[0.267,0.12,1.067,0,0.267,-8.92,1.067,0]},{"time":1.3333,"curve":[1.6,0,2.222,0.12,1.6,0,2.222,-8.92]},{"time":2.6667,"x":0.12,"y":-8.92}]},"xiong01":{"rotate":[{"curve":[0.444,0,0.889,-3.8]},{"time":1.3333,"value":-3.8,"curve":[1.778,-3.8,2.222,0]},{"time":2.6667}],"translate":[{"x":-14.67,"y":-2.29,"curve":[0.444,-14.67,0.889,13.04,0.444,-2.29,0.889,3.41]},{"time":1.3333,"x":13.04,"y":3.41,"curve":[1.778,13.04,2.222,-14.67,1.778,3.41,2.222,-2.29]},{"time":2.6667,"x":-14.67,"y":-2.29}]},"shangyi01_yinying":{"rotate":[{"value":0.68,"curve":[0.444,0.68,0.889,4.11]},{"time":1.3333,"value":4.11,"curve":[1.778,4.11,2.222,0.68]},{"time":2.6667,"value":0.68}],"translate":[{"x":-23.96,"y":0.25,"curve":[0.114,-26.54,0.224,-28.46,0.114,-0.04,0.224,-0.25]},{"time":0.3333,"x":-28.46,"y":-0.25,"curve":[0.778,-28.46,1.222,-0.36,0.778,-0.25,1.222,2.86]},{"time":1.6667,"x":-0.36,"y":2.86,"curve":[2.001,-0.36,2.333,-16.44,2.001,2.86,2.333,1.08]},{"time":2.6667,"x":-23.96,"y":0.25}]},"脸":{"rotate":[{"curve":[0.444,0,0.889,-0.62]},{"time":1.3333,"value":-0.62,"curve":[1.778,-0.62,2.222,0]},{"time":2.6667}],"translate":[{"x":-2.25,"y":0.23,"curve":[0.225,-3.36,0.446,-4.49,0.225,0.34,0.446,0.46]},{"time":0.6667,"x":-4.49,"y":0.46,"curve":[1.111,-4.49,1.556,0,1.111,0.46,1.556,0]},{"time":2,"curve":[2.224,0,2.444,-1.15,2.224,0,2.444,0.12]},{"time":2.6667,"x":-2.25,"y":0.23}]},"shangyi03":{"translate":[{"x":-0.03,"y":0.01,"curve":"stepped"},{"time":2.6667,"x":-0.03,"y":0.01}]},"r_gebo01":{"rotate":[{"value":0.07,"curve":[0.114,0.31,0.224,0.5]},{"time":0.3333,"value":0.5,"curve":[0.778,0.5,1.222,-2.2]},{"time":1.6667,"value":-2.2,"curve":[2.001,-2.2,2.333,-0.66]},{"time":2.6667,"value":0.07}]},"r_gebo03":{"rotate":[{"value":-0.71,"curve":[0.225,0.18,0.446,1.07]},{"time":0.6667,"value":1.07,"curve":[1.111,1.07,1.556,-2.48]},{"time":2,"value":-2.48,"curve":[2.224,-2.48,2.444,-1.58]},{"time":2.6667,"value":-0.71}]},"r_gebo04":{"rotate":[{"value":-0.68,"curve":[0.113,-0.6,0.224,-0.5]},{"time":0.3333,"value":-0.4,"curve":[0.559,-0.2,0.779,0]},{"time":1,"curve":[1.444,0,1.889,-0.8]},{"time":2.3333,"value":-0.8,"curve":[2.445,-0.8,2.556,-0.75]},{"time":2.6667,"value":-0.68}]},"r_datui":{"rotate":[{"value":-1.76,"curve":[0.114,-2.04,0.224,-2.25]},{"time":0.3333,"value":-2.25,"curve":[0.778,-2.25,1.222,0.8]},{"time":1.6667,"value":0.8,"curve":[2.001,0.8,2.333,-0.94]},{"time":2.6667,"value":-1.76}],"translate":[{"x":0.56,"y":-1.04,"curve":[0.114,3.5,0.224,5.69,0.114,-0.44,0.224,0]},{"time":0.3333,"x":5.69,"curve":[0.778,5.69,1.222,-26.35,0.778,0,1.222,-6.5]},{"time":1.6667,"x":-26.35,"y":-6.5,"curve":[2.001,-26.35,2.333,-8.02,2.001,-6.5,2.333,-2.78]},{"time":2.6667,"x":0.56,"y":-1.04}]},"r_xiaotui":{"rotate":[{"value":-1.06,"curve":[0.225,-2.07,0.446,-3.1]},{"time":0.6667,"value":-3.1,"curve":[1.111,-3.1,1.556,0.98]},{"time":2,"value":0.98,"curve":[2.224,0.98,2.444,-0.06]},{"time":2.6667,"value":-1.06}]},"r_xiaotui2":{"rotate":[{"value":1.21,"curve":[0.113,1.08,0.224,0.9]},{"time":0.3333,"value":0.72,"curve":[0.559,0.36,0.779,0]},{"time":1,"curve":[1.444,0,1.889,1.44]},{"time":2.3333,"value":1.44,"curve":[2.445,1.44,2.556,1.35]},{"time":2.6667,"value":1.21}]},"target":{"translate":[{"curve":[0.444,0,0.889,0,0.444,0,0.889,8.85]},{"time":1.3333,"y":8.85,"curve":[1.778,0,2.222,0,1.778,8.85,2.222,0]},{"time":2.6667}]},"target2":{"translate":[{"curve":[0.444,0,0.889,0,0.444,0,0.889,5.54]},{"time":1.3333,"y":5.54,"curve":[1.778,0,2.222,0,1.778,5.54,2.222,0]},{"time":2.6667}]},"shangyi01_yinying13":{"translate":[{"x":-1.13,"y":-1.67,"curve":[0.225,-8.41,0.446,-15.79,0.225,2.25,0.446,6.23]},{"time":0.6667,"x":-15.79,"y":6.23,"curve":[1.111,-15.79,1.556,13.54,1.111,6.23,1.556,-9.58]},{"time":2,"x":13.54,"y":-9.58,"curve":[2.224,13.54,2.444,6.06,2.224,-9.58,2.444,-5.55]},{"time":2.6667,"x":-1.13,"y":-1.67}]},"xiong02":{"translate":[{"x":-4.05,"y":28.81,"curve":[0.114,-1.73,0.224,0,0.114,12.3,0.224,0]},{"time":0.3333,"curve":[0.778,0,1.222,-25.3,0.778,0,1.222,180.03]},{"time":1.6667,"x":-25.3,"y":180.03,"curve":[2.001,-25.3,2.333,-10.83,2.001,180.03,2.333,77.03]},{"time":2.6667,"x":-4.05,"y":28.81}]},"shangyi01_yinying3":{"translate":[{"x":-2.94,"y":3.2,"curve":[0.114,-3.26,0.224,-3.5,0.114,2.48,0.224,1.94]},{"time":0.3333,"x":-3.5,"y":1.94,"curve":[0.778,-3.5,1.222,0.04,0.778,1.94,1.222,9.82]},{"time":1.6667,"x":0.04,"y":9.82,"curve":[2.001,0.04,2.333,-1.99,2.001,9.82,2.333,5.31]},{"time":2.6667,"x":-2.94,"y":3.2}]},"shangyi01_yinying4":{"translate":[{"x":4.78,"y":-0.74,"curve":[0.113,5.98,0.223,7.2,0.113,-0.93,0.223,-1.11]},{"time":0.3333,"x":8.1,"y":-1.25,"curve":[0.447,8.98,0.557,9.64,0.447,-1.39,0.557,-1.49]},{"time":0.6667,"x":9.64,"y":-1.49,"curve":[1.111,9.64,1.556,0,1.111,-1.49,1.556,0]},{"time":2,"curve":[2.223,0,2.444,2.41,2.223,0,2.444,-0.37]},{"time":2.6667,"x":4.78,"y":-0.74}]},"shangyi01_yinying5":{"translate":[{"x":1.71,"y":-0.13,"curve":[0.113,2.74,0.224,4.14,0.113,-0.21,0.224,-0.32]},{"time":0.3333,"x":5.53,"y":-0.43,"curve":[0.559,8.28,0.779,11.06,0.559,-0.64,0.779,-0.85]},{"time":1,"x":11.06,"y":-0.85,"curve":[1.444,11.06,1.889,0,1.444,-0.85,1.889,0]},{"time":2.3333,"curve":[2.445,0,2.556,0.69,2.445,0,2.556,-0.05]},{"time":2.6667,"x":1.71,"y":-0.13}]},"shangyi01_yinying6":{"translate":[{"x":-4.22,"y":0.35,"curve":[0.169,-4.1,0.296,-4,0.169,0.05,0.296,-0.19]},{"time":0.3333,"x":-4,"y":-0.19,"curve":[0.778,-4,1.222,-4.82,0.778,-0.19,1.222,1.8]},{"time":1.6667,"x":-4.82,"y":1.8,"curve":[1.888,-4.82,2.333,-4.47,1.888,1.8,2.333,0.95]},{"time":2.6667,"x":-4.22,"y":0.35}]},"shangyi01_yinying7":{"translate":[{"x":4.84,"y":0.09,"curve":[0.113,6.05,0.223,7.28,0.113,0.11,0.223,0.14]},{"time":0.3333,"x":8.19,"y":0.16,"curve":[0.447,9.09,0.557,9.75,0.447,0.17,0.557,0.19]},{"time":0.6667,"x":9.75,"y":0.19,"curve":[1.111,9.75,1.556,0,1.111,0.19,1.556,0]},{"time":2,"curve":[2.223,0,2.444,2.44,2.223,0,2.444,0.05]},{"time":2.6667,"x":4.84,"y":0.09}]},"shangyi01_yinying8":{"translate":[{"x":1.71,"y":0.02,"curve":[0.113,2.75,0.224,4.15,0.113,0.03,0.224,0.04]},{"time":0.3333,"x":5.55,"y":0.05,"curve":[0.559,8.3,0.779,11.09,0.559,0.08,0.779,0.1]},{"time":1,"x":11.09,"y":0.1,"curve":[1.444,11.09,1.889,0,1.444,0.1,1.889,0]},{"time":2.3333,"curve":[2.445,0,2.556,0.69,2.445,0,2.556,0.01]},{"time":2.6667,"x":1.71,"y":0.02}]},"l_gebo01":{"rotate":[{"value":-0.54,"curve":[0.114,-0.82,0.224,-1.02]},{"time":0.3333,"value":-1.02,"curve":[0.778,-1.02,1.222,1.96]},{"time":1.6667,"value":1.96,"curve":[2.001,1.96,2.333,0.26]},{"time":2.6667,"value":-0.54}]},"l_shou07":{"rotate":[{"value":-1.59,"curve":[0.114,-1.26,0.224,-1.02]},{"time":0.3333,"value":-1.02,"curve":[0.778,-1.02,1.222,-4.6]},{"time":1.6667,"value":-4.6,"curve":[2.001,-4.6,2.333,-2.55]},{"time":2.6667,"value":-1.59}]},"l_shou010":{"rotate":[{"value":2.8,"curve":[0.114,2.93,0.224,3.03]},{"time":0.3333,"value":3.03,"curve":[0.778,3.03,1.222,1.59]},{"time":1.6667,"value":1.59,"curve":[2.001,1.59,2.333,2.41]},{"time":2.6667,"value":2.8}]},"l_shou013":{"rotate":[{"value":2.8,"curve":[0.114,2.93,0.224,3.03]},{"time":0.3333,"value":3.03,"curve":[0.778,3.03,1.222,1.59]},{"time":1.6667,"value":1.59,"curve":[2.001,1.59,2.333,2.41]},{"time":2.6667,"value":2.8}]},"l_shou014":{"rotate":[{"value":2.31,"curve":[0.225,2.67,0.446,3.03]},{"time":0.6667,"value":3.03,"curve":[1.111,3.03,1.556,1.59]},{"time":2,"value":1.59,"curve":[2.224,1.59,2.444,1.96]},{"time":2.6667,"value":2.31}]},"l_shou015":{"rotate":[{"value":1.82,"curve":[0.113,1.95,0.224,2.13]},{"time":0.3333,"value":2.31,"curve":[0.559,2.67,0.779,3.03]},{"time":1,"value":3.03,"curve":[1.444,3.03,1.889,1.59]},{"time":2.3333,"value":1.59,"curve":[2.445,1.59,2.556,1.68]},{"time":2.6667,"value":1.82}]},"l_shou011":{"rotate":[{"value":2.31,"curve":[0.225,2.67,0.446,3.03]},{"time":0.6667,"value":3.03,"curve":[1.111,3.03,1.556,1.59]},{"time":2,"value":1.59,"curve":[2.224,1.59,2.444,1.96]},{"time":2.6667,"value":2.31}]},"l_shou012":{"rotate":[{"value":1.82,"curve":[0.113,1.95,0.224,2.13]},{"time":0.3333,"value":2.31,"curve":[0.559,2.67,0.779,3.03]},{"time":1,"value":3.03,"curve":[1.444,3.03,1.889,1.59]},{"time":2.3333,"value":1.59,"curve":[2.445,1.59,2.556,1.68]},{"time":2.6667,"value":1.82}]},"l_shou017":{"rotate":[{"value":-0.23,"curve":[0.114,-0.1,0.224,0]},{"time":0.3333,"curve":[0.778,0,1.222,-1.44]},{"time":1.6667,"value":-1.44,"curve":[2.001,-1.44,2.333,-0.62]},{"time":2.6667,"value":-0.23}]},"l_shou020":{"rotate":[{"value":-0.23,"curve":[0.114,-0.1,0.224,0]},{"time":0.3333,"curve":[0.778,0,1.222,-1.44]},{"time":1.6667,"value":-1.44,"curve":[2.001,-1.44,2.333,-0.62]},{"time":2.6667,"value":-0.23}]},"l_shou021":{"rotate":[{"value":-0.72,"curve":[0.225,-0.36,0.446,0]},{"time":0.6667,"curve":[1.111,0,1.556,-1.44]},{"time":2,"value":-1.44,"curve":[2.224,-1.44,2.444,-1.07]},{"time":2.6667,"value":-0.72}]},"l_shou018":{"rotate":[{"value":-0.72,"curve":[0.225,-0.36,0.446,0]},{"time":0.6667,"curve":[1.111,0,1.556,-1.44]},{"time":2,"value":-1.44,"curve":[2.224,-1.44,2.444,-1.07]},{"time":2.6667,"value":-0.72}]},"l_shou019":{"rotate":[{"value":-1.21,"curve":[0.336,-0.8,0.668,0]},{"time":1,"curve":[1.444,0,1.889,-1.44]},{"time":2.3333,"value":-1.44,"curve":[2.446,-1.44,2.556,-1.34]},{"time":2.6667,"value":-1.21}]},"l_shou022":{"rotate":[{"value":-1.21,"curve":[0.336,-0.8,0.668,0]},{"time":1,"curve":[1.444,0,1.889,-1.44]},{"time":2.3333,"value":-1.44,"curve":[2.446,-1.44,2.556,-1.34]},{"time":2.6667,"value":-1.21}]},"l_shou05":{"rotate":[{"value":0.02,"curve":[0.114,-0.16,0.224,-0.27]},{"time":0.3333,"value":-0.27,"curve":[0.778,-0.27,1.222,1.64]},{"time":1.6667,"value":1.64,"curve":[2.001,1.64,2.333,0.53]},{"time":2.6667,"value":0.02}]},"l_shou06":{"rotate":[{"value":0.68,"curve":[0.113,0.44,0.223,0.21]},{"time":0.3333,"value":0.03,"curve":[0.447,-0.14,0.557,-0.27]},{"time":0.6667,"value":-0.27,"curve":[1.111,-0.27,1.556,1.64]},{"time":2,"value":1.64,"curve":[2.223,1.64,2.444,1.15]},{"time":2.6667,"value":0.68}]},"l_shou08":{"rotate":[{"value":1.33,"curve":[0.113,1.15,0.224,0.93]},{"time":0.3333,"value":0.69,"curve":[0.559,0.21,0.779,-0.27]},{"time":1,"value":-0.27,"curve":[1.444,-0.27,1.889,1.64]},{"time":2.3333,"value":1.64,"curve":[2.445,1.64,2.556,1.51]},{"time":2.6667,"value":1.33}]},"yan3":{"translate":[{"time":0.8667,"curve":[0.889,0,0.856,0,0.889,0,0.856,1.9]},{"time":0.9,"y":1.9,"curve":"stepped"},{"time":2.0667,"y":1.9,"curve":[2.089,0,2.056,0,2.089,1.9,2.056,-1.27]},{"time":2.1,"y":-1.27,"curve":"stepped"},{"time":2.3333,"y":-1.27,"curve":[2.556,0,2.356,0,2.556,-1.27,2.356,0]},{"time":2.3667}],"scale":[{"time":0.2667,"curve":[0.311,1,0.356,1.196,0.311,1,0.356,1.196]},{"time":0.4,"x":1.196,"y":1.196,"curve":[0.444,1.196,0.489,1,0.444,1.196,0.489,1]},{"time":0.5333}]},"l_yan3":{"translate":[{"time":0.8667,"curve":[0.889,0,0.856,0,0.889,0,0.856,1.9]},{"time":0.9,"y":1.9,"curve":"stepped"},{"time":2.0667,"y":1.9,"curve":[2.089,0,2.056,0,2.089,1.9,2.056,-1.27]},{"time":2.1,"y":-1.27,"curve":"stepped"},{"time":2.3333,"y":-1.27,"curve":[2.556,0,2.356,0,2.556,-1.27,2.356,0]},{"time":2.3667}],"scale":[{"time":0.2667,"curve":[0.311,1,0.356,1.196,0.311,1,0.356,1.196]},{"time":0.4,"x":1.196,"y":1.196,"curve":[0.444,1.196,0.489,1,0.444,1.196,0.489,1]},{"time":0.5333}]},"l_mei":{"translate":[{"time":0.2667,"curve":[0.311,0,0.356,-15.08,0.311,0,0.356,0]},{"time":0.4,"x":-15.08,"curve":[0.444,-15.08,0.489,0,0.444,0,0.489,0]},{"time":0.5333}]},"l_tui04":{"rotate":[{"value":-2.25,"curve":[0.113,-1.73,0.224,-1.03]},{"time":0.3333,"value":-0.33,"curve":[0.559,1.04,0.779,2.43]},{"time":1,"value":2.43,"curve":[1.444,2.43,1.889,-3.1]},{"time":2.3333,"value":-3.1,"curve":[2.445,-3.1,2.556,-2.76]},{"time":2.6667,"value":-2.25}]},"target3":{"translate":[{"curve":[0.444,0,0.889,10.98,0.444,0,0.889,0]},{"time":1.3333,"x":10.98,"curve":[1.778,10.98,2.222,0,1.778,0,2.222,0]},{"time":2.6667}]},"baiyan2":{"translate":[{"x":-0.24,"y":-15.93,"curve":[0.225,-0.12,0.446,0,0.225,-8.02,0.446,0]},{"time":0.6667,"curve":[1.111,0,1.556,-0.48,1.111,0,1.556,-31.85]},{"time":2,"x":-0.48,"y":-31.85,"curve":[2.224,-0.48,2.444,-0.36,2.224,-31.85,2.444,-23.73]},{"time":2.6667,"x":-0.24,"y":-15.93}]},"baiyan3":{"translate":[{"x":-33.62,"y":1.25,"curve":[0.223,-18.12,0.445,-1.86,0.223,0.67,0.445,0.07]},{"time":0.6667,"x":-0.44,"y":0.02,"curve":[0.679,-0.37,0.69,0,0.679,0.01,0.69,0]},{"time":0.7,"curve":[1.144,0,1.589,-62.33,1.144,0,1.589,2.32]},{"time":2.0333,"x":-62.33,"y":2.32,"curve":[2.245,-62.33,2.456,-48.31,2.245,2.32,2.456,1.79]},{"time":2.6667,"x":-33.62,"y":1.25}]},"baiyan4":{"translate":[{"x":-46.29,"y":-2.37,"curve":[0.225,-26.67,0.446,-4.91,0.225,-1.36,0.446,-0.25]},{"time":0.6667,"x":-1.12,"y":-0.06,"curve":[0.689,-0.74,0.711,0,0.689,-0.04,0.711,0]},{"time":0.7333,"curve":[1.178,0,1.622,-80.2,1.178,0,1.622,-4.1]},{"time":2.0667,"x":-80.2,"y":-4.1,"curve":[2.268,-80.2,2.467,-63.75,2.268,-4.1,2.467,-3.26]},{"time":2.6667,"x":-46.29,"y":-2.37}]},"baiyan5":{"translate":[{"x":3.2,"y":2.89,"curve":[0.224,2.01,0.445,0.58,0.224,1.82,0.445,0.52]},{"time":0.6667,"x":0.14,"y":0.12,"curve":[0.711,0.05,0.756,0,0.711,0.04,0.756,0]},{"time":0.8,"curve":[1.244,0,1.689,4.94,1.244,0,1.689,4.46]},{"time":2.1333,"x":4.94,"y":4.46,"curve":[2.312,4.94,2.489,4.13,2.312,4.46,2.489,3.73]},{"time":2.6667,"x":3.2,"y":2.89}]},"baiyan6":{"translate":[{"x":3.28,"y":-1.36,"curve":[0.223,2.33,0.445,1,0.223,-0.96,0.445,-0.41]},{"time":0.6667,"x":0.37,"y":-0.15,"curve":[0.746,0.15,0.823,0,0.746,-0.06,0.823,0]},{"time":0.9,"curve":[1.344,0,1.789,4.35,1.344,0,1.789,-1.8]},{"time":2.2333,"x":4.35,"y":-1.8,"curve":[2.378,4.35,2.522,3.89,2.378,-1.8,2.522,-1.61]},{"time":2.6667,"x":3.28,"y":-1.36}]},"baiyan7":{"translate":[{"x":-69.2,"y":-17.19,"curve":[0.223,-55.41,0.445,-30.75,0.223,-13.76,0.445,-7.64]},{"time":0.6667,"x":-14.93,"y":-3.71,"curve":[0.79,-6.31,0.912,0,0.79,-1.57,0.912,0]},{"time":1.0333,"curve":[1.478,0,1.922,-79.43,1.478,0,1.922,-19.73]},{"time":2.3667,"x":-79.43,"y":-19.73,"curve":[2.467,-79.43,2.567,-75.38,2.467,-19.73,2.567,-18.72]},{"time":2.6667,"x":-69.2,"y":-17.19}]},"baiyan8":{"translate":[{"x":-96.32,"y":0.58,"curve":[0.225,-89.43,0.446,-62.07,0.225,0.54,0.446,0.37]},{"time":0.6667,"x":-38.14,"y":0.23,"curve":[0.857,-17.88,1.045,0,0.857,0.11,1.045,0]},{"time":1.2333,"curve":[1.678,0,2.122,-98.05,1.678,0,2.122,0.59]},{"time":2.5667,"x":-98.05,"y":0.59,"curve":[2.601,-98.05,2.633,-97.35,2.601,0.59,2.633,0.58]},{"time":2.6667,"x":-96.32,"y":0.58}]},"baiyan9":{"translate":[{"x":-85.18,"y":3.56,"curve":[0.044,-86.76,0.089,-87.64,0.044,3.63,0.089,3.66]},{"time":0.1333,"x":-87.64,"y":3.66,"curve":[0.313,-87.64,0.492,-73.8,0.313,3.66,0.492,3.09]},{"time":0.6667,"x":-56.79,"y":2.37,"curve":[0.936,-31.62,1.201,0,0.936,1.32,1.201,0]},{"time":1.4667,"curve":[1.867,0,2.267,-70.99,1.867,0,2.267,2.97]},{"time":2.6667,"x":-85.18,"y":3.56}]},"baiyan10":{"translate":[{"x":-59.94,"y":1.43,"curve":[0.16,-72.54,0.316,-82.56,0.16,1.73,0.316,1.97]},{"time":0.4667,"x":-82.56,"y":1.97,"curve":[0.535,-82.56,0.603,-80.4,0.535,1.97,0.603,1.92]},{"time":0.6667,"x":-77.11,"y":1.84,"curve":[1.047,-58.96,1.424,0,1.047,1.4,1.424,0]},{"time":1.8,"curve":[2.065,0,2.378,-37.13,2.065,0,2.378,0.88]},{"time":2.6667,"x":-59.94,"y":1.43}]},"honhua":{"translate":[{"x":0.6,"y":2,"curve":[0.114,0.26,0.224,0,0.114,0.86,0.224,0]},{"time":0.3333,"curve":[0.778,0,1.222,3.78,0.778,0,1.222,12.52]},{"time":1.6667,"x":3.78,"y":12.52,"curve":[2.001,3.78,2.333,1.62,2.001,12.52,2.333,5.36]},{"time":2.6667,"x":0.6,"y":2}]},"shangyi01_yinying2":{"translate":[{"x":-0.66,"y":-0.73,"curve":[0.114,-0.28,0.224,0,0.114,-0.31,0.224,0]},{"time":0.3333,"curve":[0.778,0,1.222,-4.1,0.778,0,1.222,-4.57]},{"time":1.6667,"x":-4.1,"y":-4.57,"curve":[2.001,-4.1,2.333,-1.75,2.001,-4.57,2.333,-1.95]},{"time":2.6667,"x":-0.66,"y":-0.73}]},"l_tui":{"translate":[{"x":-5.24,"y":-0.09,"curve":[0.114,-7.13,0.224,-8.53,0.114,-0.04,0.224,-0.01]},{"time":0.3333,"x":-8.53,"y":-0.01,"curve":[0.778,-8.53,1.222,12.06,0.778,-0.01,1.222,-0.51]},{"time":1.6667,"x":12.06,"y":-0.51,"curve":[2.001,12.06,2.333,0.28,2.001,-0.51,2.333,-0.22]},{"time":2.6667,"x":-5.24,"y":-0.09}]},"sui02":{"translate":[{"x":-0.31,"y":1.02,"curve":[0.114,-0.13,0.224,0,0.114,0.44,0.224,0]},{"time":0.3333,"curve":[0.778,0,1.222,-1.92,0.778,0,1.222,6.4]},{"time":1.6667,"x":-1.92,"y":6.4,"curve":[2.001,-1.92,2.333,-0.82,2.001,6.4,2.333,2.74]},{"time":2.6667,"x":-0.31,"y":1.02}]},"shengti4":{"translate":[{"x":-0.17,"y":-0.05,"curve":[0.114,-0.07,0.224,0,0.114,-0.02,0.224,0]},{"time":0.3333,"curve":[0.778,0,1.222,-1.06,0.778,0,1.222,-0.29]},{"time":1.6667,"x":-1.06,"y":-0.29,"curve":[2.001,-1.06,2.333,-0.45,2.001,-0.29,2.333,-0.12]},{"time":2.6667,"x":-0.17,"y":-0.05}]},"baiyan":{"translate":[{"curve":[0.444,0,0.889,-126.08,0.444,0,0.889,121.12]},{"time":1.3333,"x":-126.08,"y":121.12,"curve":[1.778,-126.08,2.222,0,1.778,121.12,2.222,0]},{"time":2.6667}]}},"deform":{"default":{"l_shangjiemao01":{"l_shangjiemao01":[{"offset":2,"vertices":[0.04419,0.38916],"curve":"stepped"},{"time":0.2667,"offset":2,"vertices":[0.04419,0.38916],"curve":[0.311,0,0.356,1]},{"time":0.4,"vertices":[-38.98816,4.14972,-38.94397,4.53888,-61.69495,6.93298,-64.46692,7.24982],"curve":[0.444,0,0.489,1]},{"time":0.5333,"offset":2,"vertices":[0.04419,0.38916],"curve":"stepped"},{"time":2.6667,"offset":2,"vertices":[0.04419,0.38916]}]},"l_shangjiemao02":{"l_shangjiemao02":[{"offset":44,"vertices":[0.02173,0.19482],"curve":"stepped"},{"time":0.2667,"offset":44,"vertices":[0.02173,0.19482],"curve":[0.311,0,0.356,1]},{"time":0.4,"vertices":[-38.02747,4.36057,-43.52722,3.30756,-44.37866,3.57953,-42.31787,2.35153,-30.46362,3.00342,-27.1051,2.77869,-38.08423,0.03491,-44.17798,3.56427,-45.9176,2.9303,-46.16394,2.52502,-43.50623,2.15472,-37.8811,0.34509,-27.1051,2.77869,-27.1051,2.77869,-27.1051,2.77869,-35.13208,2.53003,-32.33105,3.70935,-38.14465,3.87424,-42.62695,2.55402,-45.68201,2.07025,-45.76709,4.2457,-39.67664,5.04919,-31.271,2.78577],"curve":[0.444,0,0.489,1]},{"time":0.5333,"offset":44,"vertices":[0.02173,0.19482],"curve":"stepped"},{"time":2.6667,"offset":44,"vertices":[0.02173,0.19482]}]},"l_shangjiemao03":{"l_shangjiemao03":[{"offset":4,"vertices":[0.45532,0.53949],"curve":"stepped"},{"time":0.2667,"offset":4,"vertices":[0.45532,0.53949],"curve":[0.311,0,0.356,1]},{"time":0.4,"vertices":[-27.1051,2.77869,-27.1051,2.77869,-26.64978,3.31818,-27.1051,2.77869],"curve":[0.444,0,0.489,1]},{"time":0.5333,"offset":4,"vertices":[0.45532,0.53949],"curve":"stepped"},{"time":2.6667,"offset":4,"vertices":[0.45532,0.53949]}]},"l_shangjiemao05":{"l_shangjiemao05":[{"offset":4,"vertices":[0.14819,-0.40625],"curve":"stepped"},{"time":0.2667,"offset":4,"vertices":[0.14819,-0.40625],"curve":[0.311,0,0.356,1]},{"time":0.4,"offset":2,"vertices":[-2.61279,0.29968,-28.44409,3.71466,-27.46216,6.73318],"curve":[0.444,0,0.489,1]},{"time":0.5333,"offset":4,"vertices":[0.14819,-0.40625],"curve":"stepped"},{"time":2.6667,"offset":4,"vertices":[0.14819,-0.40625]}]},"l_shuangyanpi":{"l_shuangyanpi":[{"offset":34,"vertices":[-0.08887,-0.77814],"curve":"stepped"},{"time":0.2667,"offset":34,"vertices":[-0.08887,-0.77814],"curve":[0.311,0,0.356,1]},{"time":0.4,"vertices":[-38.65198,4.53598,-37.09045,4.35748,-33.32251,3.70062,-27.14404,4.35037,-27.09961,2.763,-26.92737,2.2912,-33.80127,1.49469,-40.06836,4.01971,-42.76465,6.13651,-41.35339,3.57532,-37.96375,1.26358,-34.0686,3.10773,-37.32043,2.34912,-41.01831,5.79947,-30.89343,3.19678,-35.28625,2.34277,-40.05408,3.77383,-42.40015,3.02777,-40.95508,2.8028],"curve":[0.444,0,0.489,1]},{"time":0.5333,"offset":34,"vertices":[-0.08887,-0.77814],"curve":"stepped"},{"time":2.6667,"offset":34,"vertices":[-0.08887,-0.77814]}]},"l_yanzz":{"l_yanzz":[{"offset":4,"vertices":[-0.17688,0.48364],"curve":"stepped"},{"time":0.2667,"offset":4,"vertices":[-0.17688,0.48364],"curve":[0.311,0,0.356,1]},{"time":0.4,"vertices":[-36.26086,0.58984,-42.42114,8.91531,-41.15894,6.43991,-26.64014,9.93839,-8.49695,0.16052,1.64868,0.24359,2.14526,-0.13727,1.39844,-0.05188,0,0,-15.41248,0.74622],"curve":[0.444,0,0.489,1]},{"time":0.5333,"offset":4,"vertices":[-0.17688,0.48364],"curve":"stepped"},{"time":2.6667,"offset":4,"vertices":[-0.17688,0.48364]}]},"l_yinying01":{"l_yinying01":[{"offset":26,"vertices":[0.08813,0.77319],"curve":"stepped"},{"time":0.2667,"offset":26,"vertices":[0.08813,0.77319],"curve":[0.311,0,0.356,1]},{"time":0.4,"vertices":[-41.72522,4.2677,-36.61719,3.10117,-30.09937,4.39377,-19.56616,3.16367,-17.98022,1.84393,-17.98022,1.84393,-17.98022,1.84393,-17.98022,1.84393,-17.98022,1.84393,-20.04822,1.54962,-25.44031,1.53241,-32.06702,2.14429,-35.99231,3.46677,-37.73291,3.52014,-40.99084,4.32861,-41.86792,4.28406,-40.77502,11.29248,-41.07642,2.3009,-42.94971,1.20471,-41.9834,3.2782,-41.38708,4.66583,-41.60071,2.79791,-38.11902,2.6908,-30.26135,2.66565,-22.36487,3.07281,-17.98022,1.84393],"curve":[0.444,0,0.489,1]},{"time":0.5333,"offset":26,"vertices":[0.08813,0.77319],"curve":"stepped"},{"time":2.6667,"offset":26,"vertices":[0.08813,0.77319]}]},"l_yinying02":{"l_yinying02":[{"offset":16,"vertices":[-0.34497,0.43353],"curve":"stepped"},{"time":0.2667,"offset":16,"vertices":[-0.34497,0.43353],"curve":[0.311,0,0.356,1]},{"time":0.4,"vertices":[-23.14282,16.03604,-16.84338,13.61826,-9.41919,6.64569,-0.7146,2.11798,0,0,0,0,0,0,-1.91431,2.06094,-12.21216,4.96298,-24.36792,11.40103,-18.05945,12.86041,-5.30017,3.77863],"curve":[0.444,0,0.489,1]},{"time":0.5333,"offset":16,"vertices":[-0.34497,0.43353],"curve":"stepped"},{"time":2.6667,"offset":16,"vertices":[-0.34497,0.43353]}]},"shangjiemao01":{"shangjiemao01":[{"offset":30,"vertices":[0.23755,0.3645],"curve":"stepped"},{"time":0.2667,"offset":30,"vertices":[0.23755,0.3645],"curve":[0.311,0,0.356,1]},{"time":0.4,"vertices":[-47.37891,2.11591,-42.79102,-0.81125,-30.83472,1.05356,-30.83472,1.05356,-32.91833,-0.60297,-40.10828,0.32077,-48.09595,-0.71545,-46.9425,4.01651,-40.11267,2.54709,-32.78271,3.20935,-32.6842,1.70438,-33.35291,1.34131,-37.05896,1.71399,-43.88171,0.54434,-38.4552,2.40115,-45.2533,-0.38638,-47.70398,0.53015,-42.71899,2.40332,-35.21899,0.95444],"curve":[0.444,0,0.489,1]},{"time":0.5333,"offset":30,"vertices":[0.23755,0.3645],"curve":"stepped"},{"time":2.6667,"offset":30,"vertices":[0.23755,0.3645]}]},"shangjiemao02":{"shangjiemao02":[{"vertices":[-0.03247,-0.28796],"curve":"stepped"},{"time":0.2667,"vertices":[-0.03247,-0.28796],"curve":[0.311,0,0.356,1]},{"time":0.4,"vertices":[-34.22729,-2.0535,-34.19482,-1.76553,-34.19482,-1.76553,-34.19482,-1.76553],"curve":[0.444,0,0.489,1]},{"time":0.5333,"vertices":[-0.03247,-0.28796],"curve":"stepped"},{"time":2.6667,"vertices":[-0.03247,-0.28796]}]},"shangjiemao03":{"shangjiemao03":[{"offset":6,"vertices":[0.37793,-0.24609],"curve":"stepped"},{"time":0.2667,"offset":6,"vertices":[0.37793,-0.24609],"curve":[0.311,0,0.356,1]},{"time":0.4,"vertices":[-3.39844,-4.89114,-6.54346,-4.30121,-27.17615,5.63501,-28.40051,-7.39508],"curve":[0.444,0,0.489,1]},{"time":0.5333,"offset":6,"vertices":[0.37793,-0.24609],"curve":"stepped"},{"time":2.6667,"offset":6,"vertices":[0.37793,-0.24609]}]},"shuangyanpi":{"shuangyanpi":[{"offset":40,"vertices":[0.02209,0.19324],"curve":"stepped"},{"time":0.2667,"offset":40,"vertices":[0.02209,0.19324],"curve":[0.311,0,0.356,1]},{"time":0.4,"vertices":[-35.71191,3.21841,-31.78271,3.25986,-31.78271,3.25986,-35.91479,1.44296,-38.49158,3.69296,-42.22522,4.94418,-40.61768,2.47684,-37.14697,3.06152,-31.78271,3.25986,-29.8009,2.6716,-28.40686,3.19595,-28.65259,3.86813,-28.70337,3.06839,-29.06921,3.3923,-31.78271,3.25986,-34.90906,3.45959,-38.77002,4.38568,-39.31421,4.61154,-35.57507,3.681,-39.48926,3.82608,-41.34412,4.86951,-39.38452,4.62555,-34.4248,3.56161,-31.78271,3.25986,-29.43494,3.00983],"curve":[0.444,0,0.489,1]},{"time":0.5333,"offset":40,"vertices":[0.02209,0.19324],"curve":"stepped"},{"time":2.6667,"offset":40,"vertices":[0.02209,0.19324]}]},"yanzz":{"yanzz":[{"offset":4,"vertices":[0.43091,0.92679],"curve":"stepped"},{"time":0.2667,"offset":4,"vertices":[0.43091,0.92679],"curve":[0.311,0,0.356,1]},{"time":0.4,"vertices":[-28.18445,-2.40659,-42.98816,-4.7005,-41.10046,0.75031,-32.19177,7.66785,-12.48132,-0.44946,0,0,0,0,0,0,-8.95569,-0.38342],"curve":[0.444,0,0.489,1]},{"time":0.5333,"offset":4,"vertices":[0.43091,0.92679],"curve":"stepped"},{"time":2.6667,"offset":4,"vertices":[0.43091,0.92679]}]},"yinying01":{"yinying01":[{"offset":10,"vertices":[-0.89148,0.48041],"curve":"stepped"},{"time":0.2667,"offset":10,"vertices":[-0.89148,0.48041],"curve":[0.311,0,0.356,1]},{"time":0.4,"vertices":[-44.29736,-5.6636,-40.15491,3.2377,-39.76904,-9.00891,-39.29517,-8.76556,-41.47791,-7.02789,-39.32812,-3.85107,-37.34448,-7.68329,-28.93726,-7.37601,-25.90356,-7.46912,-22.4198,-10.28998,-18.97009,-6.73978,-25.90356,-7.46912,-32.52173,-5.44409,-37.05066,-2.89645,-42.77002,-7.92157,-41.87268,-7.87543,-37.2876,-7.18243,-31.7207,-7.31152,-25.90356,-7.46912],"curve":[0.444,0,0.489,1]},{"time":0.5333,"offset":10,"vertices":[-0.89148,0.48041],"curve":"stepped"},{"time":2.6667,"offset":10,"vertices":[-0.89148,0.48041]}]},"yinying02":{"yinying02":[{"offset":24,"vertices":[-0.39417,-0.14392],"curve":"stepped"},{"time":0.2667,"offset":24,"vertices":[-0.39417,-0.14392],"curve":[0.311,0,0.356,1]},{"time":0.4,"vertices":[-27.23499,-5.84256,-15.13818,-7.25803,-4.3468,-2.62326,0,0,0,0,0,0,0,0,0,0,0,0,-15.7478,-10.47781,-22.63367,-9.45593,-30.43323,-9.02286,-25.46252,-11.07129,-10.06458,-7.36942],"curve":[0.444,0,0.489,1]},{"time":0.5333,"offset":24,"vertices":[-0.39417,-0.14392],"curve":"stepped"},{"time":2.6667,"offset":24,"vertices":[-0.39417,-0.14392]}]}}}}},"extra":{"fa015":{"rootBoneName":"fa015","endBoneName":"","animation":{"default":{"name":"default","mode":1,"rotateCenter":0,"rotateTime":2.67,"rotateRange":1.5,"rotateOffset":0.3,"childOffset":0.25,"spring":0,"affectByLevel":0.4,"springLevel":0}}},"fa022":{"rootBoneName":"fa022","endBoneName":"","animation":{"default":{"name":"default","mode":1,"rotateCenter":0,"rotateTime":2.67,"rotateRange":1.5,"rotateOffset":0.25,"childOffset":0.25,"spring":0,"affectByLevel":0.5,"springLevel":0.8}}},"fa043":{"rootBoneName":"fa043","endBoneName":"","animation":{"default":{"name":"default","mode":1,"rotateCenter":10,"rotateTime":2.67,"rotateRange":7,"rotateOffset":0,"childOffset":0.35,"spring":0,"affectByLevel":0.8,"springLevel":0}}},"fa030":{"rootBoneName":"fa030","endBoneName":"","animation":{"default":{"name":"default","mode":1,"rotateCenter":3,"rotateTime":2.67,"rotateRange":3,"rotateOffset":0.4,"childOffset":0.3,"spring":0,"affectByLevel":0.8,"springLevel":0}}},"fa053":{"rootBoneName":"fa053","endBoneName":"","animation":{"default":{"name":"default","mode":1,"rotateCenter":1,"rotateTime":2.67,"rotateRange":4,"rotateOffset":0.2,"childOffset":0.45,"spring":0,"affectByLevel":0.8,"springLevel":0}}},"1houfa01":{"rootBoneName":"1houfa01","endBoneName":"","animation":{"default":{"name":"default","mode":1,"rotateCenter":0,"rotateTime":2.67,"rotateRange":1.5,"rotateOffset":1.4,"childOffset":0.25,"spring":0,"affectByLevel":0.8,"springLevel":0}}},"r_gebo02":{"rootBoneName":"r_gebo02","endBoneName":"","animation":{"default":{"name":"default","mode":1,"rotateCenter":0,"rotateTime":2.67,"rotateRange":2,"rotateOffset":2.35,"childOffset":0.25,"spring":0,"affectByLevel":0.8,"springLevel":0}}},"r_gebo012":{"rootBoneName":"r_gebo012","endBoneName":"","animation":{"default":{"name":"default","mode":1,"rotateCenter":0,"rotateTime":2.67,"rotateRange":4,"rotateOffset":2,"childOffset":0.35,"spring":0,"affectByLevel":0.8,"springLevel":0}}},"r_gebo020":{"rootBoneName":"r_gebo020","endBoneName":"","animation":{"default":{"name":"default","mode":1,"rotateCenter":-2,"rotateTime":2.67,"rotateRange":5,"rotateOffset":1.45,"childOffset":0.25,"spring":0,"affectByLevel":0.5,"springLevel":0}}},"l_gebo02":{"rootBoneName":"l_gebo02","endBoneName":"","animation":{"default":{"name":"default","mode":1,"rotateCenter":2,"rotateTime":2.67,"rotateRange":3,"rotateOffset":2.6,"childOffset":0.35,"spring":0,"affectByLevel":0.8,"springLevel":0}}},"houbai01":{"rootBoneName":"houbai01","endBoneName":"","animation":{"default":{"name":"default","mode":1,"rotateCenter":-1.3,"rotateTime":2.67,"rotateRange":2.5,"rotateOffset":1.95,"childOffset":0.33,"spring":0,"affectByLevel":0.5,"springLevel":0}}},"shangyi01_yinying3":{"rootBoneName":"shangyi01_yinying3","endBoneName":"","animation":{"default":{"name":"default","mode":1,"rotateCenter":0,"rotateTime":2.67,"rotateRange":3,"rotateOffset":0.6,"childOffset":0.25,"spring":0,"affectByLevel":1,"springLevel":0}}},"sui02":{"rootBoneName":"sui02","endBoneName":"","animation":{"default":{"name":"default","mode":1,"rotateCenter":1,"rotateTime":2.67,"rotateRange":11,"rotateOffset":4.6,"childOffset":0.55,"spring":0,"affectByLevel":0.4,"springLevel":0}}},"shengti4":{"rootBoneName":"shengti4","endBoneName":"","animation":{"default":{"name":"default","mode":1,"rotateCenter":-1,"rotateTime":2.67,"rotateRange":11,"rotateOffset":3.75,"childOffset":0.55,"spring":0,"affectByLevel":0.4,"springLevel":0}}},"erzhui":{"rootBoneName":"erzhui","endBoneName":"","animation":{"default":{"name":"default","mode":1,"rotateCenter":-4,"rotateTime":2.67,"rotateRange":10,"rotateOffset":2.4,"childOffset":0.55,"spring":0,"affectByLevel":0.8,"springLevel":0}}},"shangyi01_yinying6":{"rootBoneName":"shangyi01_yinying6","endBoneName":"","animation":{"default":{"name":"default","mode":1,"rotateCenter":2,"rotateTime":2.67,"rotateRange":4,"rotateOffset":-2.77,"childOffset":0.25,"spring":0,"affectByLevel":0.4,"springLevel":0}}},"shangyi01_yinying9":{"rootBoneName":"shangyi01_yinying9","endBoneName":"","animation":{"default":{"name":"default","mode":1,"rotateCenter":-1,"rotateTime":2.67,"rotateRange":3,"rotateOffset":0.4,"childOffset":0.25,"spring":0,"affectByLevel":0.8,"springLevel":0}}},"baiyan2":{"rootBoneName":"baiyan2","endBoneName":"","animation":{"default":{"name":"default","mode":1,"rotateCenter":0,"rotateTime":2.67,"rotateRange":1,"rotateOffset":5.15,"childOffset":0.25,"spring":0,"affectByLevel":0.4,"springLevel":0}}},"r_gebo026":{"rootBoneName":"r_gebo026","endBoneName":"","animation":{"default":{"name":"default","mode":1,"rotateCenter":-1,"rotateTime":2.67,"rotateRange":3,"rotateOffset":-0.7,"childOffset":0.35,"spring":0,"affectByLevel":1,"springLevel":0}}},"1yu01":{"rootBoneName":"1yu01","endBoneName":"","animation":{"default":{"name":"default","mode":1,"rotateCenter":0,"rotateTime":2.67,"rotateRange":3,"rotateOffset":8.5,"childOffset":0.35,"spring":0,"affectByLevel":0.8,"springLevel":0}}},"1yu05":{"rootBoneName":"1yu05","endBoneName":"","animation":{"default":{"name":"default","mode":1,"rotateCenter":0,"rotateTime":2.67,"rotateRange":3,"rotateOffset":0,"childOffset":0.35,"spring":0,"affectByLevel":0.8,"springLevel":0}}},"yu01":{"rootBoneName":"yu01","endBoneName":"","animation":{"default":{"name":"default","mode":1,"rotateCenter":0,"rotateTime":2.67,"rotateRange":3,"rotateOffset":9.5,"childOffset":0.25,"spring":0,"affectByLevel":0.8,"springLevel":0}}},"bone2":{"rootBoneName":"bone2","endBoneName":"","animation":{"default":{"name":"default","mode":1,"rotateCenter":-2,"rotateTime":2.67,"rotateRange":3,"rotateOffset":9.25,"childOffset":0.45,"spring":0,"affectByLevel":0.5,"springLevel":0}}},"shangyihou2":{"rootBoneName":"shangyihou2","endBoneName":"","animation":{"default":{"name":"default","mode":1,"rotateCenter":3,"rotateTime":2.67,"rotateRange":3,"rotateOffset":8.4,"childOffset":0.45,"spring":0,"affectByLevel":0.5,"springLevel":0}}},"l_gebo08":{"rootBoneName":"l_gebo08","endBoneName":"","animation":{"default":{"name":"default","mode":1,"rotateCenter":0,"rotateTime":2.67,"rotateRange":3,"rotateOffset":0,"childOffset":0.35,"spring":0,"affectByLevel":0.8,"springLevel":0}}},"fa04":{"rootBoneName":"fa04","endBoneName":"","animation":{"default":{"name":"default","mode":1,"rotateCenter":0,"rotateTime":2.67,"rotateRange":1,"rotateOffset":1.89,"childOffset":0.35,"spring":0.5,"affectByLevel":0.7,"springLevel":0.8}}},"fa08":{"rootBoneName":"fa08","endBoneName":"","animation":{"default":{"name":"default","mode":1,"rotateCenter":0,"rotateTime":2.67,"rotateRange":3,"rotateOffset":10.65,"childOffset":0.45,"spring":0,"affectByLevel":0.8,"springLevel":0}}},"fa13":{"rootBoneName":"fa13","endBoneName":"","animation":{"default":{"name":"default","mode":1,"rotateCenter":1,"rotateTime":2.67,"rotateRange":5,"rotateOffset":10.65,"childOffset":0.45,"spring":0,"affectByLevel":0.8,"springLevel":0}}}}}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/shenhe/shenhelh.json"/>
      <url>/shenhe/shenhelh.json</url>
      
        <content type="html"><![CDATA[{"skeleton":{"hash":"euOZySj9M5Q","spine":"4.0.33","x":-138.28,"y":-478.08,"width":1302.2,"height":1313.38},"bones":[{"name":"root"},{"name":"bone","parent":"root","rotation":-0.05,"x":225.83,"y":-1003.38,"scaleX":0.25,"scaleY":0.25},{"name":"xiasheng","parent":"bone","x":1124.84,"y":4164.09},{"name":"xiasheng2","parent":"xiasheng","length":160.85,"rotation":9.71,"x":10,"y":4.28},{"name":"xiasheng3","parent":"xiasheng2","length":267.89,"rotation":12.1,"x":160.37,"y":-2.82},{"name":"xiasheng4","parent":"xiasheng3","length":545.22,"rotation":77.62,"x":390.5,"y":2.6},{"name":"xiasheng5","parent":"xiasheng4","length":129.24,"rotation":-59.16,"x":551.58,"y":-5.41},{"name":"lian","parent":"xiasheng5","x":123.29,"y":1.45},{"name":"qianfa03","parent":"lian","x":439.28,"y":364.75},{"name":"fuzhou","parent":"qianfa03","x":-148.68,"y":-261.45},{"name":"fuzhou2","parent":"fuzhou","x":-122.57,"y":86.23},{"name":"fuzhou3","parent":"fuzhou","x":92.78,"y":-59.04},{"name":"fuzhou4","parent":"fuzhou","length":159.68,"rotation":-122.78,"x":-2.37,"y":-11.43},{"name":"fuzhou5","parent":"fuzhou4","length":144.76,"rotation":-11.35,"x":159.68},{"name":"fuzhou6","parent":"fuzhou5","length":139.21,"rotation":-14.77,"x":144.76},{"name":"qianfa01","parent":"qianfa03","length":119.45,"rotation":176.34,"x":-39.12,"y":7.66},{"name":"qianfa02","parent":"qianfa01","length":173.37,"rotation":26.63,"x":119.45},{"name":"qianfa04","parent":"qianfa02","length":184.97,"rotation":8.2,"x":173.37},{"name":"qianfa05","parent":"qianfa04","length":113.71,"rotation":-12.63,"x":184.97},{"name":"qianfa06","parent":"qianfa05","length":130.51,"rotation":-37.89,"x":113.71},{"name":"qianfa08","parent":"qianfa03","length":134.34,"rotation":171.8,"x":-127.77,"y":138.28},{"name":"qianfa09","parent":"qianfa08","length":189.02,"rotation":28.07,"x":134.34},{"name":"qianfa010","parent":"qianfa09","length":160.21,"rotation":-11.68,"x":189.02},{"name":"qianfa011","parent":"qianfa010","length":151.72,"rotation":-28.57,"x":160.21},{"name":"qianfa012","parent":"qianfa011","length":132.92,"rotation":-26.44,"x":151.72},{"name":"ysheng01","parent":"qianfa012","length":100.55,"rotation":-39.12,"x":143.67,"y":0.55},{"name":"houfa02","parent":"ysheng01","length":144.17,"rotation":-16.77,"x":111.56,"y":1.74},{"name":"houfa03","parent":"houfa02","length":172.2,"rotation":-89.13,"x":144.17},{"name":"houfa04","parent":"houfa03","length":219.59,"rotation":-29.88,"x":172.2},{"name":"houfa05","parent":"houfa04","length":157.49,"rotation":-10.26,"x":218.2,"y":-0.03},{"name":"houfa025","parent":"houfa05","length":190.71,"rotation":-5.67,"x":156.13,"y":-0.28},{"name":"houfa029","parent":"houfa025","length":237.34,"rotation":12.1,"x":197,"y":6.02},{"name":"houfa031","parent":"houfa029","length":218.34,"rotation":2.89,"x":239.65,"y":-5.26},{"name":"houfa032","parent":"houfa031","length":223.64,"rotation":-15.61,"x":218.34},{"name":"houfa033","parent":"houfa032","length":129.11,"rotation":-62.28,"x":223.64},{"name":"houfa034","parent":"houfa033","length":97.65,"rotation":-33.91,"x":129.11},{"name":"houfa035","parent":"houfa034","length":82.31,"rotation":-35.29,"x":97.65},{"name":"houfa036","parent":"houfa032","length":136.41,"rotation":27.46,"x":118.83,"y":70.14},{"name":"houfa037","parent":"houfa036","length":67.54,"rotation":18.24,"x":136.41},{"name":"ysheng03","parent":"ysheng01","length":97.9,"rotation":91.13,"x":95.84,"y":-18.07},{"name":"ysheng04","parent":"ysheng03","length":105.38,"rotation":-69.9,"x":97.9},{"name":"ysheng05","parent":"ysheng04","length":89.39,"rotation":37.12,"x":105.38},{"name":"ysheng06","parent":"ysheng05","length":60.2,"rotation":22.74,"x":89.39},{"name":"ysheng07","parent":"ysheng06","length":59.76,"rotation":16.25,"x":60.2},{"name":"xiasheng6","parent":"xiasheng4","length":331.79,"rotation":53.15,"x":445.69,"y":-17.38},{"name":"r_yshou02","parent":"xiasheng6","length":585.47,"rotation":60.29,"x":323.5,"y":3.99},{"name":"r_yshou03","parent":"r_yshou02","length":387.12,"rotation":-0.7,"x":585.42,"y":1.17},{"name":"xiasheng7","parent":"xiasheng6","length":283.31,"rotation":-136.53,"x":-4.09,"y":-1.05},{"name":"l_yshou02","parent":"xiasheng7","length":604.39,"rotation":-137.94,"x":287.33,"y":-7.27},{"name":"l_yshou03","parent":"l_yshou02","length":539.28,"rotation":37.52,"x":604.39},{"name":"l_tui01","parent":"xiasheng","length":1049.25,"rotation":-47.79,"x":19.67,"y":-31.03},{"name":"l_tui03","parent":"l_tui01","length":775.18,"rotation":-147.68,"x":1040.87,"y":-3.25},{"name":"r_tui01","parent":"xiasheng","length":1217.24,"rotation":-69.03,"x":-244.27,"y":63.78},{"name":"r_tui02","parent":"r_tui01","length":1384.26,"rotation":-7.95,"x":1219.38,"y":2.65},{"name":"r_tui03","parent":"r_tui02","length":430.31,"rotation":6.96,"x":1389.12,"y":1.55},{"name":"l_yshou01","parent":"l_yshou03","length":337.19,"rotation":11.24,"x":526.95,"y":-3.57},{"name":"qiang03","parent":"l_yshou01","length":2689.26,"rotation":28.81,"x":288.54,"y":-60.63},{"name":"r_yshou01","parent":"r_yshou03","length":233.8,"rotation":-42.45,"x":383.67,"y":1.27},{"name":"qianfa013","parent":"qianfa03","length":121.35,"rotation":-117.61,"x":-0.87,"y":-118.61},{"name":"qianfa014","parent":"qianfa013","length":130.35,"rotation":-26.84,"x":105.9,"y":-1.98},{"name":"qianfa015","parent":"qianfa014","length":116.78,"rotation":-33.59,"x":130.35},{"name":"qianfa016","parent":"qianfa015","length":109.35,"rotation":-32.42,"x":116.78},{"name":"qianfa017","parent":"qianfa016","length":110.68,"rotation":-25.45,"x":109.35},{"name":"qianfa07","parent":"qianfa03","length":131.9,"rotation":-133.42,"x":-18.03,"y":-75.11},{"name":"qianfa018","parent":"qianfa07","length":139.54,"rotation":-25.86,"x":131.9},{"name":"qianfa019","parent":"qianfa018","length":130.77,"rotation":-34.67,"x":137.9,"y":0.47},{"name":"qianfa020","parent":"qianfa019","length":83.59,"rotation":-30.47,"x":130.77},{"name":"qianfa022","parent":"qianfa03","length":216.79,"rotation":-133.25,"x":53.18,"y":-277.29},{"name":"qianfa023","parent":"qianfa022","length":165.64,"rotation":-18.17,"x":215.61,"y":1.07},{"name":"qianfa024","parent":"qianfa023","length":101.34,"rotation":-13.42,"x":165.64},{"name":"qianfa025","parent":"qianfa024","length":119.76,"rotation":-17.69,"x":101.34},{"name":"qianfa026","parent":"qianfa03","length":154.13,"rotation":-120.49,"x":-100.51,"y":-397.45},{"name":"qianfa027","parent":"qianfa026","length":117.78,"rotation":-14.88,"x":154.13},{"name":"qianfa028","parent":"qianfa027","length":91.13,"rotation":-38.5,"x":117.78},{"name":"qianfa029","parent":"qianfa026","length":124.39,"rotation":2.92,"x":132.36,"y":37.77},{"name":"qianfa030","parent":"qianfa029","length":53.52,"rotation":-32.29,"x":124.2,"y":-0.83},{"name":"qianfa031","parent":"qianfa030","length":25.49,"rotation":-30.85,"x":53.52},{"name":"houfa039","parent":"houfa032","length":99.67,"rotation":-32.76,"x":287.36,"y":46.03},{"name":"houfa040","parent":"houfa039","length":53.1,"rotation":-49.87,"x":99.67},{"name":"houfa041","parent":"houfa040","length":50.27,"rotation":-57.81,"x":53.09},{"name":"qiang04","parent":"qiang03","length":169.99,"rotation":-172.55,"x":919.79,"y":264.69},{"name":"qiang013","parent":"qiang04","length":160.32,"rotation":-6.7,"x":169.99},{"name":"qiang014","parent":"qiang013","length":192.7,"rotation":-5.01,"x":160.32},{"name":"dianzhui4","parent":"xiasheng","x":816.62,"y":-781.69},{"name":"houfa038","parent":"houfa037","length":34.67,"rotation":74.01,"x":67.31,"y":-0.02},{"name":"houfa042","parent":"houfa038","length":34.34,"rotation":40.03,"x":34.67},{"name":"houfa01","parent":"qianfa09","length":164.41,"rotation":-113.64,"x":340.11,"y":73.15},{"name":"houfa030","parent":"qianfa011","length":194.07,"rotation":-22.5,"x":-25.65,"y":-80.7},{"name":"houfa043","parent":"ysheng01","length":238.01,"rotation":59.23,"x":34.95,"y":-149.15},{"name":"houfa045","parent":"houfa02","length":153.91,"rotation":-53.57,"x":138.26,"y":162.71},{"name":"houfa044","parent":"houfa02","length":147.92,"rotation":41.67,"x":27.76,"y":64.38},{"name":"qianfa021","parent":"qianfa017","length":61.57,"rotation":-40.86,"x":109.22,"y":0.84},{"name":"target","parent":"bone","rotation":0.05,"x":-21.16,"y":255.62},{"name":"target2","parent":"bone","rotation":0.05,"x":1.14,"y":-5.37},{"name":"l_tui04","parent":"l_tui03","length":190.67,"rotation":117.66,"x":1008.96,"y":88.89},{"name":"target3","parent":"xiasheng","rotation":0.05,"x":477.31,"y":-2433.52},{"name":"target4","parent":"xiasheng","rotation":0.05,"x":626.93,"y":-2842.33},{"name":"xiasheng8","parent":"xiasheng4","x":214.88,"y":21.97},{"name":"dianzhui5","parent":"xiasheng","x":816.62,"y":-781.69}],"slots":[{"name":"houfa02","bone":"houfa02","attachment":"houfa02"},{"name":"遮罩","bone":"bone","attachment":"遮罩"},{"name":"qiang06","bone":"qiang03","attachment":"qiang03"},{"name":"qiang03","bone":"qiang03"},{"name":"l_yshou02","bone":"l_yshou02","attachment":"l_yshou02"},{"name":"l_yshou01","bone":"l_yshou01","attachment":"l_yshou01"},{"name":"l_tui03","bone":"l_tui04","attachment":"l_tui03"},{"name":"l_tui02","bone":"l_tui03","attachment":"l_tui02"},{"name":"l_tui01","bone":"l_tui01","attachment":"l_tui01"},{"name":"xiasheng","bone":"xiasheng","attachment":"xiasheng"},{"name":"r_tui01","bone":"r_tui01","attachment":"r_tui01"},{"name":"houfa04","bone":"bone","attachment":"houfa04"},{"name":"xiong","bone":"bone","attachment":"xiong"},{"name":"ybozi","bone":"bone","attachment":"ybozi"},{"name":"ysheng02","bone":"ysheng03","attachment":"ysheng02"},{"name":"ysheng01","bone":"ysheng01","attachment":"ysheng01"},{"name":"houfa03","bone":"houfa031"},{"name":"houfa01","bone":"houfa01","attachment":"houfa01"},{"name":"qianfa06","bone":"lian","attachment":"qianfa06"},{"name":"qianfa05","bone":"qianfa026","attachment":"qianfa05"},{"name":"qianfa04","bone":"qianfa022","attachment":"qianfa04"},{"name":"lian","bone":"lian","attachment":"lian"},{"name":"qianfa03","bone":"qianfa013","attachment":"qianfa03"},{"name":"qianfa02","bone":"qianfa08","attachment":"qianfa02"},{"name":"r_yshou02","bone":"r_yshou02","attachment":"r_yshou02"},{"name":"r_yshou01","bone":"r_yshou01","attachment":"r_yshou01"},{"name":"qianfa01","bone":"qianfa01","attachment":"qianfa01"},{"name":"fuzhou","bone":"fuzhou","attachment":"fuzhou"},{"name":"dianzhui","bone":"dianzhui4","attachment":"dianzhui"},{"name":"dianzhui2","bone":"dianzhui5","attachment":"dianzhui"}],"ik":[{"name":"target3","bones":["r_tui01","r_tui02"],"target":"target3","bendPositive":false},{"name":"target4","order":1,"bones":["r_tui03"],"target":"target4"}],"skins":[{"name":"default","attachments":{"dianzhui":{"dianzhui":{"x":-1652.6,"y":978.33,"width":3496,"height":2162}},"dianzhui2":{"dianzhui":{"x":-5.5,"y":1919.5,"scaleX":-1,"rotation":59.94,"width":3496,"height":2162}},"fuzhou":{"fuzhou":{"type":"mesh","uvs":[0.94572,0,1,0.23854,1,0.43277,0.98936,0.60064,0.92246,0.7299,0.84284,0.85094,0.52762,0.95402,0.28765,0.98709,0.00001,1,0.04399,0.92598,0.12021,0.83272,0.16699,0.74733,0.19096,0.61714,0.18676,0.49009,0.18063,0.30441,0.13213,0.06083,0.58331,0.02205,0.67779,0.37067,0.64449,0.66618,0.66936,0.53146,0.57272,0.83889,0.61066,0.12297],"triangles":[20,7,8,8,9,10,6,7,20,6,20,5,10,11,20,8,10,20,4,5,18,5,20,18,20,11,18,11,12,18,4,18,3,18,19,3,18,12,19,12,13,19,3,19,2,19,17,2,19,13,17,13,14,17,17,1,2,14,21,17,17,21,1,21,0,1,21,16,0,21,15,16,21,14,15],"vertices":[3,9,107.7,-61.83,0.33333,12,-17.22,119.83,0.62228,13,-197.02,82.69,0.04439,2,12,103.49,123,0.7034,13,-79.29,109.54,0.2966,3,12,199.78,110.33,0.37168,13,17.6,116.07,0.60601,14,-152.53,79.83,0.02231,3,12,282.51,95.71,0.08274,13,101.6,118.01,0.73894,14,-71.8,103.11,0.17832,3,12,343.55,64.2,0.00162,13,167.65,99.12,0.5193,14,-3.12,101.68,0.47908,2,13,229.89,75.54,0.15742,14,63.08,94.74,0.84258,2,13,288.68,-30.45,0.02443,14,146.93,7.24,0.97557,1,14,189.26,-66.62,1,2,13,323.95,-212.1,0.00098,14,227.33,-159.42,0.99902,3,9,-431.01,-212.23,0.00009,13,286,-199.31,0.01803,14,187.38,-156.74,0.98189,4,9,-380.63,-193.8,0.00122,12,358.11,-219.31,0.00043,13,237.69,-175.98,0.07753,14,134.72,-146.48,0.92082,4,9,-340.61,-171.75,0.00989,12,317.9,-197.59,0.01085,13,194,-162.6,0.24106,14,89.06,-144.68,0.73819,4,9,-292.16,-127.47,0.04138,12,254.44,-180.83,0.057,13,128.49,-158.65,0.43248,14,24.71,-157.56,0.46914,4,9,-252.21,-78.06,0.16418,12,191.27,-173.99,0.16221,13,65.21,-164.38,0.4745,14,-35.03,-179.22,0.1991,4,9,-193.83,-5.85,0.43608,12,98.95,-164,0.1896,13,-27.28,-172.74,0.32461,14,-122.33,-210.88,0.04971,4,9,-127.98,97.99,0.73784,12,-24,-164.84,0.14345,13,-147.66,-197.76,0.11648,14,-232.36,-265.75,0.00223,3,9,4.35,11.29,0.467,12,-22.74,-6.65,0.52174,13,-177.55,-42.41,0.01126,3,9,-83.24,-142.96,0.00877,12,154.36,3.21,0.61558,13,-5.85,2.11,0.37565,2,13,142.36,0.46,0.56227,14,-2.44,-0.16,0.43773,3,12,233.69,-10.18,0.29107,13,74.57,4.58,0.60453,14,-69.04,-13.46,0.1044,2,13,230.2,-18.66,0.15691,14,87.38,3.74,0.84309,3,9,-21,-33.36,0.3421,12,28.53,-3.79,0.61558,13,-127.85,-29.52,0.04232],"hull":17}},"houfa01":{"houfa01":{"type":"mesh","uvs":[0.72565,0.00742,0.88849,0.1357,0.94569,0.3843,1,0.62036,1,0.74485,0.9861,0.95606,0.92764,1,0.88714,1,0.81909,0.51575,0.75621,0.38919,0.56241,0.53288,0.35953,0.69955,0.08048,0.62468,0.00971,0.60569,0,0.39949,0,0.29605,0.08845,0.25926,0.1878,0.21793,0.3546,0.13926,0.5323,0.00001,0.82835,0.22892,0.52468,0.2222,0.19325,0.43864,0.36582,0.36452,0.08767,0.36869,0.69165,0.16043,0.91684,0.63681],"triangles":[12,22,11,12,24,22,12,13,24,13,14,24,22,24,17,24,16,17,14,15,24,24,15,16,10,23,21,10,11,23,11,22,23,23,17,18,23,22,17,23,18,21,21,19,25,21,18,19,10,21,25,10,25,9,9,25,20,25,0,20,25,19,0,20,0,1,5,6,26,6,7,26,7,8,26,5,26,4,26,3,4,2,26,20,20,26,8,26,2,3,2,20,1,8,9,20],"vertices":[3,86,242.14,30.37,0.32929,87,72.6,-41.15,0.46941,88,-133.97,-4.29,0.2013,2,86,155.66,-44.08,0.66262,87,-39.72,-21.02,0.33738,2,86,92.66,-46.22,0.99595,87,-81.13,26.51,0.00405,1,86,32.84,-48.25,1,1,86,12.88,-33.57,1,1,86,-15.34,-1.01,1,1,86,1.28,36.34,1,2,86,17.68,58.62,0.94721,87,-47.09,150.82,0.05279,2,86,122.84,38.93,0.64192,87,3.98,56.81,0.35808,3,86,168.58,58.59,0.30859,87,48.09,33.73,0.54664,88,-136.65,74.45,0.14477,3,86,224.01,182.15,0.02805,87,178.92,68.67,0.49385,88,-1.26,71.57,0.4781,3,87,315.73,108.48,0.18856,88,141.22,71.7,0.4781,90,-120.37,4.6,0.33333,2,88,323.16,13,0.33333,90,62.97,58.77,0.66667,1,90,109.47,72.5,1,1,90,130.32,36.55,1,1,90,137.67,17.32,1,2,88,301,-56.47,0.13426,90,83.86,-11.1,0.86574,2,88,233.09,-48.73,0.4676,90,23.42,-43.02,0.5324,3,87,324.47,-2.73,0.13203,88,118.63,-37.54,0.6689,90,-77.4,-98.34,0.19907,2,87,204.58,-36.26,0.46536,88,-5.85,-36.35,0.53464,2,86,165.06,0,0.48703,87,0.41,-0.51,0.51297,2,87,207.64,8.15,0.35387,88,9.47,5.45,0.64613,2,88,239.65,-5.15,0.41914,90,4.25,-3.33,0.58086,3,87,314.65,41.67,0.02054,88,121.58,7.84,0.73194,90,-100.57,-59.2,0.24752,2,88,306.57,-35.41,0.08581,90,76.58,9.43,0.91419,3,86,231.38,67.12,0.1537,87,94.33,-9.62,0.5335,88,-104.32,19.94,0.3128,2,86,63.87,-0.56,0.82037,87,-63.87,77.65,0.17963],"hull":20}},"houfa02":{"houfa02":{"type":"mesh","uvs":[0.22948,0,0.29096,0.08986,0.30518,0.07391,0.34454,0.07336,0.41169,0.20132,0.43037,0.19152,0.52116,0.2079,0.59956,0.26897,0.6292,0.28757,0.7276,0.3088,0.85211,0.33567,0.86861,0.33753,0.90477,0.31272,0.95318,0.26468,0.96638,0.22032,0.95701,0.17541,0.94814,0.13954,0.96363,0.1505,0.9842,0.21259,0.98067,0.31433,0.92151,0.35531,0.89733,0.35679,0.90845,0.36771,0.9357,0.39447,0.9753,0.48568,0.99999,0.59459,0.99999,0.70376,0.99868,0.76266,0.9741,0.80152,0.95103,0.78199,0.96363,0.74946,0.96842,0.70137,0.95812,0.62222,0.94812,0.57584,0.95659,0.71577,0.94229,0.87398,0.88454,1,0.86422,1,0.86489,0.7781,0.85262,0.68435,0.82191,0.58806,0.79091,0.53802,0.73252,0.49409,0.72068,0.47583,0.60426,0.45352,0.5459,0.41083,0.4682,0.38095,0.34581,0.32783,0.34485,0.30685,0.30739,0.38721,0.28452,0.3642,0.27995,0.34076,0.1701,0.56023,0.14618,0.58206,0.06415,0.65692,0.00029,0.54261,0.00125,0.36818,0.07153,0.08466,0.19777,0,0.85997,0.36783,0.86178,0.35194,0.9443,0.31301,0.97645,0.24742,0.96794,0.1879,0.10345,0.31901,0.20051,0.16244,0.3105,0.17951,0.40381,0.23633,0.5161,0.3328,0.64506,0.37711,0.78264,0.40661,0.91078,0.54414,0.9125,0.79826,0.89022,0.9335,0.91865,0.44453,0.87504,0.39497,0.95157,0.49688,0.98563,0.63754,0.98088,0.75071],"triangles":[36,73,35,36,37,73,37,38,73,73,72,35,73,38,72,28,78,27,28,29,78,72,39,71,34,35,72,34,72,71,29,30,78,33,34,71,72,38,39,27,78,26,30,31,78,26,78,77,78,31,77,26,77,25,31,32,77,39,40,71,55,56,54,54,64,53,54,56,64,25,77,24,76,77,32,76,24,77,33,76,32,71,40,70,53,64,52,76,33,74,52,65,51,52,64,65,59,75,70,70,75,71,33,71,74,71,75,74,42,70,41,59,70,10,41,70,40,74,23,76,76,23,24,42,43,70,44,69,43,43,69,70,44,45,69,75,22,74,74,22,23,46,68,45,45,68,69,69,9,70,70,9,10,75,59,22,47,67,46,46,67,68,68,7,69,7,8,69,69,8,9,56,57,64,59,21,22,59,60,21,59,10,60,49,66,48,20,21,61,20,61,19,61,21,60,60,12,61,60,11,12,60,10,11,49,50,51,49,51,66,51,65,66,68,67,5,67,4,5,68,6,7,68,5,6,47,48,67,64,57,65,61,62,19,19,62,18,62,13,14,62,61,13,61,12,13,48,66,67,18,62,63,66,3,67,67,3,4,62,14,63,14,15,63,63,16,17,18,63,17,66,65,1,65,0,1,1,2,66,66,2,3,63,15,16,57,58,65,65,58,0],"vertices":[2,27,276.28,45.41,0.02384,28,67.63,91.22,0.97616,2,28,174.17,46.81,0.97193,29,-51.67,38.26,0.02807,2,28,198.32,55.79,0.70748,29,-29.5,51.39,0.29252,2,28,265.74,57.78,0.03166,29,36.49,65.36,0.96834,2,29,162.81,23.06,0.38926,30,4.34,23.89,0.61074,2,30,33.36,38.35,0.99883,31,-153.23,65.93,0.00117,2,30,184.42,76.63,0.11003,31,2.51,71.68,0.88997,1,31,139.27,52.17,1,2,31,190.74,47.14,1,84,102.33,582.23,0,3,31,359.72,51.56,0.02045,32,122.78,50.7,0.97955,84,57.21,419.33,0,3,33,101.64,75.66,0.01359,37,-12.7,12.82,0.98641,84,0.13,213.21,0,1,37,15.03,7.21,1,2,37,78.3,9.85,1,84,-6.41,122.39,0,2,38,33.05,11.26,0.97109,84,1.41,36.04,0.02891,4,38,63.89,21.33,0.05571,37,190.42,40.25,0.00007,85,-5.66,16.73,0.04439,84,19.58,9.17,0.89982,1,85,21.52,8.2,1,1,85,45.1,2.85,1,1,85,20.7,-9.07,1,1,84,17.34,-21.55,1,1,38,62.67,-33.67,1,2,37,102.94,-16.88,1,84,-34.09,98.83,0,4,33,178.77,89.08,0.06142,77,-114.61,-22.57,0.03175,38,-74.14,13.02,0.0001,37,61.92,-10.83,0.90673,4,33,198.67,89.52,0.21754,77,-98.12,-11.42,0.18467,38,-59.92,-0.91,0.00001,37,79.79,-19.61,0.59778,4,33,247.42,90.61,0.20311,34,-69.15,63.2,0.00431,77,-57.71,15.87,0.60295,37,123.55,-41.12,0.18963,2,77,22.25,38.2,1,84,-119.69,22.41,0,3,78,-30.82,17.54,0.09518,77,93.21,34.87,0.90482,84,-184.15,-7.45,0,2,78,25.4,28.08,1,84,-240.17,4.16,0,3,79,-25.09,19.4,0.23481,78,56.15,31.57,0.76519,84,-269.94,12.61,0,3,79,21.58,22.85,0.99544,78,83.93,-6.09,0.00456,84,-281.33,58,0,1,79,54.6,-1.21,1,5,33,350.41,-71.52,0,79,28.24,-9.12,0.98758,78,60.42,-28.76,0.01193,77,116.63,-64.73,0.00048,37,140.19,-232.47,0,5,33,350.44,-45.01,0.00001,79,11.34,-29.54,0.24748,78,34.14,-25.33,0.62941,77,102.31,-42.43,0.1231,37,152.44,-208.97,0,6,33,320.84,-11.02,0.00002,34,54.97,80.92,0.01932,79,12.51,-74.6,0.01723,78,-3.37,-50.33,0.08344,77,59.02,-29.87,0.87998,37,141.84,-165.15,0,2,34,28.12,68.12,0.3156,77,29.36,-27.77,0.6844,3,34,102.85,70.05,0.8864,35,-60.88,43.49,0.04703,77,95.33,-62.91,0.06656,2,34,180.41,31.87,0.10434,35,24.79,55.07,0.89566,1,36,27.51,9.47,1,3,33,228.91,-249.02,0.00001,36,57.52,-8.23,0.99999,84,-344.95,263.53,0,5,33,194.09,-138.07,0.14713,34,108.48,-90.38,0.3934,35,33.29,-86.52,0.37471,36,-2.54,-107.8,0.08476,84,-231.33,238.81,0,5,33,158.91,-97.85,0.52534,34,56.51,-102.82,0.38774,35,-2.9,-125.83,0.07855,36,-9.37,-160.8,0.00837,84,-178.96,249.44,0,4,33,93.26,-66.12,0.94051,34,-2.12,-146.17,0.0567,35,-27.37,-194.52,0.00279,84,-118.87,290.74,0,4,32,236.19,-64.78,0.15008,33,34.62,-57.59,0.84776,34,-36.94,-194.11,0.00216,84,-82.41,337.45,0,2,32,135.25,-45.95,0.99901,33,-67.67,-66.61,0.00099,1,32,114.57,-37.24,1,2,31,156.17,-43.38,0.91607,32,-85.29,-33.86,0.08393,2,31,54.51,-30.3,1,84,68.05,735.14,0,2,30,124.89,-37.01,1,84,110.4,862.37,0,5,90,-349.32,-274.44,0,28,271.29,-75.47,0.0586,29,65.68,-64.77,0.94113,30,-83.64,-73.11,0.00027,84,180.21,1062.15,0,4,90,-343.88,-284.14,0.00001,28,269.37,-64.51,0.0882,29,61.83,-54.34,0.91179,84,191.32,1061.53,0,5,90,-298.8,-222,0.00024,26,-47.88,-300.1,0.00339,28,206.27,-108.24,0.63895,29,7.52,-108.6,0.35741,84,163.11,1132.93,0,6,90,-257.87,-219.36,0.00061,26,-19.05,-270.92,0.01509,27,268.4,-167.33,0.00467,28,166.77,-97.17,0.80734,29,-33.31,-104.74,0.17228,84,182.87,1168.87,0,6,90,-246.19,-228.07,0.00083,26,-4.54,-269.66,0.02281,27,267.36,-152.8,0.00912,28,158.63,-85.09,0.86331,29,-43.47,-94.3,0.10393,84,196.48,1174.04,0,4,90,-110.95,-53.73,0.01612,26,-19.4,-49.52,0.82665,27,47.02,-164.31,0.09088,28,-26.69,-204.83,0.06635,3,26,-10.58,-7.89,0.98833,27,5.53,-154.85,0.00686,28,-67.38,-217.3,0.00481,1,90,40.85,58.06,1,2,90,164.43,40.9,0.79352,89,-42.23,12.71,0.20648,1,89,40.62,51.33,1,3,89,226.97,8.25,0.62033,27,17.07,135.26,0.37967,84,400.36,1496.63,0,3,89,361.75,-166.74,0.00164,27,228.47,71.28,0.24603,28,13.29,89.84,0.75233,3,33,119.65,63.79,0.02692,77,-150.65,-75.83,0.00003,37,-2.2,-6.01,0.97306,2,37,2.24,1.69,1,84,-11.59,198.72,0,2,38,7.81,-4.09,0.77805,37,145.11,-1.44,0.22195,2,38,72.57,0.73,0.35826,84,2.17,-4.85,0.64174,4,38,74.15,35.13,0.00009,37,195.85,56.57,0.00001,85,2.77,1.74,0.59066,84,35.67,3.11,0.40925,4,89,140.62,-94.79,0.00056,26,145.5,-6.72,0.35092,27,6.74,1.22,0.64853,84,269.02,1467.96,0,3,89,287.32,-208.3,0.00004,27,192.09,-5.81,0.01814,28,20.14,4.87,0.98182,2,28,208.83,0.7,0.73774,29,-9.35,-0.95,0.26226,2,29,153.31,2.35,0.57351,30,-3.07,2.34,0.42649,1,31,-0.11,5.72,1,2,31,222.13,2.91,1,84,50.86,565.13,0,4,32,219.17,3.42,0.49033,33,-0.12,3.52,0.50766,37,-136.26,-4.27,0.00202,84,-12.12,337.35,0,4,33,231.03,2.83,0.37077,34,0.94,7.86,0.56838,77,-23.99,-66.82,0.05397,37,68.53,-111.46,0.00687,5,33,274.97,-122.91,0.0044,34,132.68,-11.74,0.27233,35,9.51,-7.75,0.71955,36,-67.46,-57.25,0.00372,84,-258.23,161.04,0,5,33,260.53,-202.11,0.00133,34,196.07,-61.35,0.0049,35,89.8,-13.56,0.59523,36,1.43,-15.61,0.39854,84,-319.87,212.82,0,4,33,227.73,56.63,0.33764,34,-48.23,29.96,0.04599,77,-55.89,-23.36,0.3852,37,90.41,-62.19,0.23117,3,33,148.62,58.25,0.19183,77,-123.29,-64.81,0.00473,37,20.95,-24.28,0.80344,2,77,1.05,2.99,1,84,-117.18,63.43,0,6,33,368.17,-4.09,0,79,-28.39,-49.79,0.00004,78,-4.17,-2.5,0.3689,77,95.08,1.58,0.63106,37,187.03,-180.83,0,84,-201.2,21.21,0,3,79,0.99,2.36,0.55347,78,55.62,0.42,0.44653,84,-257.61,41.22,0],"hull":59}},"houfa04":{"houfa04":{"type":"mesh","uvs":[0.82904,0,0.94216,0.10897,0.97367,0.20919,1,0.29291,1,0.39182,0.97759,0.60005,0.86122,0.87671,0.66075,1,0.48315,1,0.22485,0.95997,0.05027,0.82692,0,0.69091,0,0.59149,0.029,0.4352,0.11093,0.22385,0.24367,0.25949,0.45148,0.3153,0.62135,0.24602,0.78265,0,0.14605,0.39621,0.2872,0.58313,0.49324,0.65941,0.77526,0.51164],"triangles":[20,10,11,20,11,19,13,19,12,19,11,12,19,15,20,13,14,19,19,14,15,21,9,20,9,10,20,20,15,16,8,21,7,7,21,22,8,9,21,20,16,21,21,16,17,7,22,6,6,22,5,21,17,22,22,17,18,1,18,0,1,22,18,5,22,4,3,4,22,22,1,2,22,2,3],"vertices":[2,16,122.09,-143.31,0.10856,21,81.63,31.97,0.89144,2,16,106.54,-46.22,0.71377,21,60.88,128.08,0.28623,2,16,142.01,3.67,0.99181,21,93.6,179.81,0.00819,3,16,166.26,46.85,0.94858,22,-117.42,204.69,0.04845,23,-341.71,46.99,0.00296,3,16,212.52,111.03,0.83529,22,-89.06,278.55,0.14987,23,-352.13,125.42,0.01484,3,16,343.68,209.19,0.58675,22,12.74,406.91,0.33276,23,-324.12,286.83,0.08049,4,16,554.51,191.34,0.3244,22,221.15,443.42,0.38084,23,-158.56,418.57,0.28635,24,-464.2,236.62,0.0084,5,16,668.28,-0.28,0.14938,22,380.02,287.16,0.22521,23,55.7,357.31,0.52887,24,-245.08,277.18,0.09203,25,-476.14,-30.65,0.0045,5,16,708.1,-142.64,0.05035,22,454.83,159.66,0.06313,23,182.38,281.12,0.51992,24,-97.73,265.36,0.30474,25,-354.36,53.15,0.06185,4,16,747.01,-335.61,0.00107,23,343.13,167.49,0.08179,24,96.8,235.21,0.46914,25,-184.41,152.48,0.448,3,23,444.04,61.53,0.00026,24,234.34,185.26,0.14794,25,-46.19,200.51,0.8518,2,24,279.42,123.22,0.03844,25,27.93,180.81,0.96156,2,24,284.99,74.72,0.00649,25,62.85,146.7,0.99351,1,25,102.55,77.52,1,2,24,222.96,-114.11,0.02835,25,133.85,-38.94,0.97165,3,23,212.88,-151.13,0.01496,24,122.05,-108.09,0.62367,25,51.77,-97.93,0.36137,3,22,192.03,-99.71,0.00233,23,75.63,-72.35,0.82973,24,-35.92,-98.67,0.16794,2,22,82.08,-26.92,0.9739,23,-55.75,-61.01,0.0261,2,16,137.76,-174.37,0.01346,21,98.95,1.8,0.98654,1,25,54.91,1.34,1,4,16,560.74,-377.19,0.00004,23,236.22,9.41,0.00268,24,71.47,46.05,0.84736,25,-84.72,-10.25,0.14993,5,16,524.59,-222.35,0.02749,22,297.71,35.78,0.03234,23,103.64,97.19,0.76747,24,-86.33,65.61,0.15694,25,-219.49,-94.64,0.01576,5,16,364.55,-66.18,0.32172,21,319.58,122.06,0.00808,22,103.14,145.98,0.56094,23,-119.94,100.9,0.10913,24,-288.17,-30.62,0.00013],"hull":19}},"lian":{"lian":{"x":139.29,"y":101.03,"rotation":-40.27,"width":442,"height":556}},"l_tui01":{"l_tui01":{"x":562.41,"y":6.9,"rotation":47.79,"width":947,"height":994}},"l_tui02":{"l_tui02":{"x":345.54,"y":25.91,"rotation":-164.52,"width":869,"height":414}},"l_tui03":{"l_tui03":{"x":72.7,"y":-13.11,"rotation":77.81,"width":271,"height":515}},"l_yshou01":{"l_yshou01":{"x":147.4,"y":4.76,"rotation":73.13,"width":227,"height":453}},"l_yshou02":{"l_yshou02":{"type":"mesh","uvs":[0.67812,0,0.68681,0.00047,0.89563,0.04537,0.93508,0.05934,1,0.10354,1,0.15134,0.96573,0.21802,0.97757,0.35673,0.9958,0.36721,0.96232,0.40258,0.94561,0.37546,0.74883,0.39271,0.55504,0.43959,0.5035,0.48546,0.49727,0.50346,0.51976,0.51796,0.63231,0.59058,0.57926,0.65799,0.42776,0.7386,0.43852,0.84859,0.49056,0.86897,0.45715,0.98913,0.41148,1,0.37442,1,0.31047,0.97901,0.29818,0.97212,0.166,0.72795,0.05556,0.67309,0,0.61111,0.00001,0.56784,0.03993,0.52141,0.07761,0.48546,0.10517,0.45918,0.14879,0.43182,0.23917,0.36469,0.27644,0.17071,0.28032,0.17045,0.4949,0.0499,0.59878,0.00168,0.19211,0.51837,0.28748,0.5431,0.41985,0.53499,0.41252,0.50951,0.3203,0.51182,0.23274,0.48763,0.16178,0.54844,0.28459,0.57125,0.42171,0.55525],"triangles":[5,2,3,37,38,0,1,37,0,2,37,1,36,37,6,2,6,37,34,35,36,3,4,5,6,2,5,7,11,6,10,7,8,7,10,11,11,36,6,9,10,8,11,34,36,11,12,34,13,34,12,44,33,34,34,42,44,32,33,44,34,13,42,14,42,13,43,44,42,39,32,44,31,32,39,41,42,14,41,14,15,40,44,43,39,44,40,41,40,43,41,43,42,39,45,31,45,39,40,47,41,15,40,41,47,47,15,16,45,30,31,29,30,45,46,45,40,46,40,47,17,47,16,45,28,29,27,28,45,46,27,45,26,27,46,17,46,47,18,46,17,26,46,18,19,25,26,19,26,18,25,19,20,21,24,25,20,21,25,23,24,21,22,23,21],"vertices":[1,47,230.37,139.08,1,1,47,234.91,137.2,1,2,48,-75.29,-15.01,0.11106,47,333.18,54.31,0.88894,2,48,-73.14,12.45,0.32229,47,349.97,32.48,0.67771,2,48,-48.54,70.72,0.8803,47,370.74,-27.26,0.1197,1,48,-1.09,100.24,1,1,48,75.27,125.06,1,1,48,209.43,216.36,1,1,48,214.43,231.53,1,1,48,259.47,237.4,1,1,48,237.52,212.69,1,1,48,313.06,129.43,1,2,49,-108.4,166.32,0.00028,48,417.12,65.91,0.99972,2,49,-57.88,132.23,0.05486,48,477.95,69.64,0.94514,2,49,-37.28,126.69,0.15417,48,497.67,77.78,0.84583,2,49,-19.17,137.6,0.29067,48,505.39,97.47,0.70933,2,49,71.51,192.23,0.6936,48,544.05,196.02,0.3064,2,49,147.02,154.83,0.85639,48,626.72,212.34,0.14361,2,49,232.44,60.85,0.99721,48,751.7,189.82,0.00279,1,49,360.99,54.26,1,1,49,387.58,81.03,1,1,49,525.52,48.57,1,1,49,535.65,21.78,1,1,49,533.61,1.05,1,1,49,505.66,-32.31,1,1,49,496.97,-38.39,1,1,49,205.63,-84.32,1,1,49,135.72,-139.81,1,2,49,60.54,-163.78,0.96212,48,752.14,-93.04,0.03788,2,49,10.22,-158.81,0.86645,48,709.2,-119.75,0.13355,2,49,-41.6,-131.16,0.61771,48,651.26,-129.37,0.38229,3,49,-81.35,-105.96,0.33216,48,604.39,-133.59,0.66784,47,-250.9,-312.96,0,3,49,-110.4,-87.54,0.16414,48,570.13,-136.67,0.8352,47,-227.52,-287.72,0.00066,3,49,-139.83,-60,0.04717,48,530.01,-132.75,0.9476,47,-195.11,-263.76,0.00523,2,48,436.55,-131.08,0.91704,47,-124.6,-202.39,0.08296,2,48,232.94,-233.08,0.02014,47,-41.76,9.73,0.97986,2,48,231.54,-231.39,0.02026,47,-39.58,9.42,0.97974,1,47,115.28,111.49,1,1,47,186.98,149.52,1,2,49,-36.75,-45.7,0.34387,48,603.06,-58.63,0.65613,2,49,-2.73,4.8,0.32147,48,599.29,2.15,0.67853,2,49,-4.87,79.77,0.26969,48,551.95,60.31,0.73031,2,49,-34.92,78.59,0.09852,48,528.83,41.07,0.90148,1,48,558.5,-1.5,1,3,49,-70.28,-19.45,0.06054,48,560.48,-58.23,0.93919,47,-167.81,-339.5,0.00027,2,49,-3.45,-66.11,0.71294,48,641.91,-54.54,0.28706,1,49,29.86,-0.04,1,2,49,18.8,78.49,0.45532,48,571.5,73.7,0.54468],"hull":39}},"qianfa01":{"qianfa01":{"type":"mesh","uvs":[0.9593,0,0.97579,0,1,0.06341,1,0.11876,0.94197,0.16882,0.82692,0.26806,0.75188,0.42776,0.69927,0.60392,0.64949,0.77061,0.53565,0.87442,0.39793,1,0.30949,1,0.13463,0.90926,0.00078,0.83979,0.0061,0.79804,0.13043,0.75137,0.27513,0.69955,0.35852,0.63929,0.41255,0.53159,0.48484,0.37333,0.54672,0.23786,0.78543,0.00318,0.77832,0.13315,0.61231,0.3923,0.47863,0.68809,0.33835,0.84866],"triangles":[15,16,25,12,15,25,13,14,15,12,13,15,11,12,25,10,11,25,9,10,25,24,25,16,24,16,17,9,24,8,25,24,9,7,23,6,18,19,23,23,7,24,23,24,18,17,18,24,8,24,7,23,20,22,5,23,22,19,20,23,6,23,5,2,22,1,22,21,0,22,0,1,2,4,22,3,4,2,22,20,21,5,22,4],"vertices":[1,15,1.94,-15.52,1,1,15,-4.31,-10.88,1,1,15,9.32,26.63,1,2,15,29.22,53.42,0.98799,16,-56.72,88.2,0.01201,2,15,69.21,61.32,0.84488,16,-17.44,77.33,0.15512,2,15,148.49,76.97,0.05281,16,60.45,55.8,0.94719,2,16,162.38,67.55,0.54274,17,-1.24,68.43,0.45726,2,17,107.36,78.71,0.99479,18,-92.95,59.84,0.00521,2,17,210.12,88.45,0.38425,18,5.2,91.81,0.61575,3,17,286.57,57.44,0.00862,18,86.58,78.27,0.8742,19,-69.48,45.11,0.11717,2,18,185.02,61.9,0.0546,19,18.26,92.65,0.9454,2,18,206.65,26.19,0.00091,19,57.26,77.75,0.99909,1,19,114.83,-2.81,1,1,19,158.9,-64.49,1,2,18,176.66,-159.38,0.00587,19,147.57,-87.12,0.99413,2,18,122.19,-123.76,0.16006,19,82.7,-92.46,0.83994,3,17,225.77,-92.69,0.03515,18,60.08,-81.53,0.70213,19,7.75,-97.28,0.26272,3,17,178.79,-66.96,0.44923,18,8.61,-66.69,0.53219,19,-41.98,-117.18,0.01858,2,17,109.11,-63.46,0.9865,18,-60.15,-78.52,0.0135,2,16,189.85,-59.77,0.34483,17,7.78,-61.51,0.65517,2,16,103.76,-70.48,0.99886,17,-78.96,-59.84,0.00114,2,15,68.96,-62.92,0.9982,16,-73.33,-33.62,0.0018,2,15,118.39,-2.01,0.61118,16,-1.85,-1.32,0.38882,2,16,172.96,-0.9,0.53308,17,-0.53,-0.83,0.46692,3,17,188.63,-3.85,0.1987,18,4.41,-2.95,0.80126,19,-84.44,-69.46,0.00004,2,18,121.53,-9.43,0.02777,19,11.97,-2.63,0.97223],"hull":22}},"qianfa02":{"qianfa02":{"type":"mesh","uvs":[0.6856,0,0.78721,0.01547,0.89946,0.16084,0.92727,0.19686,0.94244,0.2165,0.98089,0.31618,1,0.36572,1,0.43988,0.97136,0.6293,0.89361,0.75136,0.81065,0.83255,0.66581,0.87554,0.57835,0.85653,0.46867,0.94761,0.32892,1,0.21251,1,0.04041,0.89873,0,0.81685,0,0.78957,0.18757,0.73482,0.34112,0.55963,0.42479,0.35313,0.49762,0.17335,0.62215,0,0.66487,0.10025,0.52103,0.23751,0.41738,0.52742,0.30118,0.73233,0.13488,0.81368,0.64035,0.75888,0.71191,0.65805,0.83186,0.38428,0.90896,0.48811,0.82877,0.70444,0.69319,0.81524,0.86308,0.28109,0.78239,0.5248],"triangles":[28,16,18,16,17,18,13,14,27,16,28,15,14,15,27,15,28,27,28,19,27,28,18,19,13,27,26,27,19,20,27,20,26,26,20,21,26,25,30,30,25,36,26,21,25,25,24,36,21,22,25,36,24,31,0,31,24,35,0,1,25,22,24,22,23,24,24,23,0,35,1,2,12,13,26,11,34,10,11,12,34,12,29,34,12,26,29,34,29,30,29,26,30,10,33,9,34,30,33,10,34,33,9,33,8,30,36,33,33,32,8,33,36,32,8,32,7,36,31,32,35,31,0,31,35,32,7,32,6,3,4,32,3,32,35,32,4,5,32,5,6,35,2,3],"vertices":[2,8,-76.37,164.13,0.08621,20,-47.19,-32.91,0.91379,2,8,-14.91,100.7,0.52293,20,-117.06,21.1,0.47707,2,63,-53.89,-17.16,0.27154,8,6.55,-24.17,0.72846,2,63,-35.07,7.97,0.78464,8,11.87,-55.11,0.21536,2,63,-24.81,21.67,0.93637,8,14.77,-71.99,0.06363,1,63,29.1,57.95,1,1,63,55.89,75.98,1,3,63,97.36,78.26,0.95154,64,-65.22,55.36,0.04489,65,-198.28,-70.38,0.00356,3,63,204.63,59.36,0.04963,64,39.56,85.13,0.74279,65,-129.03,13.7,0.20758,2,64,131.96,59.46,0.18352,65,-38.43,45.14,0.81648,2,64,206.52,18.75,0.59515,65,46.04,54.06,0.40485,2,65,169.01,20.07,0.00901,66,22.78,36.69,0.99099,3,66,99.01,31.55,0.92519,22,51.98,230.01,0.06603,23,-205.05,150.24,0.00878,3,66,189.95,89.27,0.4445,22,153.08,192.83,0.39083,23,-98.49,165.94,0.16468,3,66,308.39,127.27,0.11504,22,255.2,121.81,0.19403,23,25.16,152.41,0.69093,4,66,408.82,134.55,0.01674,22,321.98,46.45,0.00672,23,119.85,118.16,0.95584,24,-81.15,91.6,0.0207,1,24,73.22,52.26,1,1,24,113.18,10.7,1,1,24,114.93,-4.47,1,1,23,89.63,-28.83,1,2,21,244.47,-46.02,0.0045,22,63.62,-33.84,0.9955,1,21,108.15,-40.83,1,2,20,142.14,-37,0.67375,21,-10.53,-36.31,0.32625,1,20,-0.68,-62.06,1,7,63,-76.62,-221.64,0.00131,64,-90.99,-290.39,0.00049,65,-22.82,-369.42,0.00017,66,54.97,-396.28,0.00012,8,-126.34,132.89,0.01295,20,-2.18,5.13,0.98407,21,-118.06,68.77,0.0009,1,21,10.55,-0.87,1,6,63,174,-422.25,0.00001,64,222.03,-361.62,0.00002,65,275.15,-249.96,0.00008,66,251.2,-142.22,0.00337,21,195.99,2.2,0.1147,22,6.38,3.57,0.88182,3,66,343.16,-20.5,0.0028,22,158.93,4.44,0.62814,23,-3.25,3.29,0.36905,2,23,147.51,-2.8,0.72526,24,-2.53,-4.38,0.27474,8,63,292.83,-222.55,0.00196,64,241.87,-130.09,0.004,65,159.78,-48.25,0.05119,66,49.47,-26.87,0.90968,8,-380.95,-134.81,0.00021,20,211.65,306.41,0.00182,21,212.38,234,0.03023,22,-24.51,233.88,0.0009,7,63,233.04,-163.85,0.02233,64,162.47,-103.34,0.10024,65,79.25,-71.4,0.57886,66,-8.19,-87.67,0.19713,8,-297.21,-131.75,0.00389,20,129.21,291.43,0.01699,21,132.59,259.57,0.08056,7,63,74.26,-68.67,0.63019,64,-21.92,-86.94,0.15309,65,-81.73,-162.79,0.01427,66,-100.59,-248.07,0.00792,8,-118.95,-81.84,0.09445,20,-40.12,216.62,0.06884,21,-52.02,273.23,0.03123,2,63,128.65,1.11,0.67752,64,-3.41,-0.42,0.32248,7,63,253.43,-61.48,0.00016,64,136.17,-2.33,0.64035,65,0.18,-3.29,0.35908,66,-110.89,-69.06,0.00012,8,-236.88,-216.91,0.00002,20,57.35,367.12,0.00007,21,104.79,360.18,0.0002,3,64,247.31,-74.81,0.00002,65,132.81,0.31,0.40335,66,1.6,1.3,0.59663,7,63,15.08,-44.88,0.70038,64,-85.56,-91.34,0.01651,65,-131.57,-202.61,0.00168,66,-123.35,-307.66,0.0012,8,-60.99,-55.21,0.23012,20,-93.69,181.99,0.04211,21,-115.59,267.88,0.00801,7,63,155.19,-107.07,0.16955,64,67.65,-86.2,0.50492,65,-8.48,-111.24,0.14049,66,-63.6,-166.5,0.03928,8,-202.46,-114.22,0.02484,20,37.92,260.58,0.05055,21,37.52,275.3,0.07037],"hull":24}},"qianfa03":{"qianfa03":{"type":"mesh","uvs":[0.99999,0.21146,0.99999,0.3439,0.95883,0.60635,0.80593,0.85698,0.62701,0.97024,0.44492,1,0.18659,1,0.07983,0.90561,0,0.83503,0,0.80068,0.00347,0.78616,0.10774,0.83814,0.25367,0.92168,0.49881,0.89869,0.71486,0.75704,0.84614,0.53163,0.87256,0.32235,0.87461,0.16343,0.84781,0,0.87488,0,0.92494,0.03272,0.1022,0.87412,0.34143,0.96941,0.63822,0.91457,0.86173,0.69001,0.94444,0.31247],"triangles":[10,21,9,9,21,8,6,22,5,7,21,6,6,21,22,21,12,22,22,12,13,21,11,12,7,8,21,10,11,21,4,5,23,23,5,22,22,13,23,4,23,3,3,23,24,23,13,14,24,23,14,3,24,2,14,15,24,2,24,25,15,25,24,16,25,15,1,2,25,25,0,1,16,17,25,0,25,20,20,25,19,25,17,19,17,18,19],"vertices":[1,58,69.82,24.88,1,1,58,114.79,14.77,1,1,59,92.7,26.37,1,1,60,55.13,27.18,1,2,60,131.3,11.27,0.06055,61,6.22,17.3,0.93945,1,61,75.27,15.87,1,1,62,55.69,25.81,1,2,62,103.09,4.98,0.91458,91,-7.34,-0.88,0.08542,2,62,138.55,-10.6,0.00001,91,29.67,10.53,0.99999,2,62,141.77,-22.11,0,91,39.64,3.94,1,1,91,43.13,0.07,1,2,62,99.35,-20.45,0.77575,91,6.47,-22.56,0.22425,1,62,38.81,-7.22,1,2,60,150.16,-39.48,0.00069,61,49.35,-15.43,0.99931,1,60,57.04,-21.53,1,2,59,77.84,-20.97,0.99971,60,-32.14,-46.52,0.00029,2,58,97,-30.21,0.19736,59,4.8,-29.21,0.80264,2,58,43.21,-17.33,0.99955,59,-49.01,-42.01,0.00045,1,58,-14.49,-14.67,1,1,58,-12.26,-4.77,1,1,58,2.97,11.06,1,2,62,97.97,-7.84,0.9511,91,-2.83,-13.92,0.0489,2,61,111.69,-1.23,0.248,62,2.64,-0.1,0.752,2,60,115.16,-0.25,0.64538,61,-1.23,-1.08,0.35462,2,59,129.84,-1.8,0.50265,60,0.58,-1.78,0.49735,2,58,99.55,-3.15,0.80391,59,-5.14,-3.91,0.19609],"hull":21}},"qianfa04":{"qianfa04":{"type":"mesh","uvs":[0.27249,0,0.54301,0.03087,0.85635,0.17863,1,0.33889,1,0.51182,0.92613,0.69854,0.75334,0.87222,0.60351,0.92127,0.43648,0.97596,0.34692,1,0.33659,1,0.41262,0.96172,0.56973,0.8826,0.62505,0.82144,0.7294,0.66653,0.78356,0.50361,0.79135,0.40018,0.76517,0.30276,0.65225,0.21517,0.4918,0.16259,0.31928,0.13878,0.01386,0.12763,0,0.07812,0,0.04404,0.16656,0,0.92653,0.32795,0.88052,0.59041,0.76589,0.76703,0.62024,0.88803,0.48044,0.94556],"triangles":[28,12,13,28,29,12,7,28,6,7,29,28,12,29,11,29,10,11,8,29,7,8,10,29,9,10,8,27,28,13,27,6,28,27,14,26,5,27,26,13,14,27,6,27,5,22,23,24,21,22,24,21,24,20,20,0,1,24,0,20,19,20,1,18,19,1,2,18,1,17,18,2,3,25,2,17,2,25,16,17,25,16,25,15,26,25,4,25,26,15,25,3,4,14,15,26,5,26,4],"vertices":[2,8,10.98,118.95,0.57679,20,-140.09,-0.65,0.42321,3,67,-240.62,-179.09,0.02969,8,87.62,20.68,0.96547,20,-229.96,85.69,0.00484,2,67,-126.38,-31.63,0.61654,8,116.74,-163.57,0.38346,1,67,2.12,39.94,1,2,67,144.42,47.35,0.94885,68,-82.07,21.78,0.05115,1,68,73.44,46.22,1,1,69,61.65,40.6,1,1,70,28.03,17.23,1,1,70,115.19,6.77,1,1,70,159.25,-2.28,1,1,70,162.94,-5.13,1,1,70,116.51,-9.1,1,2,69,115.69,-22.73,0.06247,70,20.58,-17.29,0.93753,2,69,60.03,-30.78,0.9992,70,-30,-41.88,0.0008,2,67,278.08,-67.89,0.08679,68,80.86,-46.05,0.91321,1,67,142.74,-50.48,1,2,67,57.45,-51.41,0.9996,8,-23.63,-283.91,0.0004,2,67,-22.1,-67.37,0.87374,8,19.25,-215.02,0.12626,2,67,-91.53,-121.99,0.43676,8,27.05,-127.03,0.56324,2,67,-131.03,-196.5,0.07724,8,-0.16,-47.2,0.92276,2,8,-46.84,18.06,0.80661,20,-97.25,107.45,0.19339,2,8,-146,114.11,0.01246,20,14.6,26.52,0.98754,1,20,-1.78,-11.37,1,2,8,-106.24,170.71,0.0207,20,-16.68,-35.16,0.9793,2,8,-25.47,149.84,0.33968,20,-99.61,-26.02,0.66032,2,67,-5.16,6.38,0.99821,8,61.36,-277.9,0.00179,2,67,211.89,-3.09,0.99185,68,-2.23,-5.11,0.00815,1,68,152.15,-0.82,1,2,69,106.45,-1.43,0.23413,70,5.3,0.19,0.76587,1,70,84.18,-0.91,1],"hull":25}},"qianfa05":{"qianfa05":{"type":"mesh","uvs":[0.42819,0,0.63642,0.09772,0.74909,0.2486,0.8971,0.44679,1,0.61707,0.99999,0.82686,0.87694,0.91038,0.66619,0.95146,0.75361,0.90197,0.8508,0.80077,0.80282,0.66847,0.73829,0.55763,0.76149,0.74325,0.65552,0.87593,0.39975,0.95918,0.02125,0.9995,0,0.99555,0,0.99305,0.22051,0.86604,0.33309,0.77388,0.36769,0.53043,0.34907,0.38784,0.25431,0.06688,0.33807,0,0.55518,0.47994,0.48923,0.80172,0.20772,0.95197,0.63368,0.35429,0.82601,0.88642,0.94394,0.73619,0.7717,0.38694],"triangles":[28,7,8,28,6,7,28,8,9,6,28,5,5,28,29,28,9,29,5,29,4,29,9,10,30,3,4,29,10,11,30,4,29,30,29,11,30,11,27,3,30,2,13,25,12,11,12,25,24,11,25,20,25,19,25,20,24,20,21,24,11,24,27,15,26,14,26,15,17,15,16,17,26,17,18,14,25,13,14,26,25,25,18,19,25,26,18,23,0,27,21,23,24,24,23,27,22,23,21,2,0,1,0,2,30,30,27,0],"vertices":[1,71,-10.83,8.27,1,2,71,28.13,34.09,0.99814,74,-104.28,1.64,0.00186,2,71,82.82,42.27,0.77498,74,-49.25,7.02,0.22502,1,74,23.05,14.1,1,1,74,84.34,16.53,1,2,74,155.56,0.48,0.13275,75,25.81,17.86,0.86725,2,75,59.54,9.75,0.3848,76,0.17,11.46,0.6152,1,76,34.3,1.81,1,2,75,63.15,-9.12,0.00122,76,12.95,-2.89,0.99878,1,75,24.95,-6.83,1,2,74,95.11,-17.03,0.90396,75,-15.94,-29.23,0.09604,2,72,27.49,30.45,0.40312,74,55.3,-18.24,0.59688,3,73,-45.3,14.75,0.00464,72,91.51,39.75,0.99536,74,119.1,-28.96,0,2,73,-0.61,34.78,0.75319,72,138.96,27.6,0.24681,1,73,47.53,26.24,1,1,73,97.89,-6.29,1,1,73,99.15,-9.61,1,1,73,98.52,-10.21,1,1,73,43.1,-16.1,1,2,73,7.91,-25.67,0.4492,72,108,-25.01,0.5508,2,71,169.49,-32.27,0.09674,72,23.14,-27.24,0.90326,2,71,120.1,-26.67,0.9786,72,-26.03,-34.51,0.0214,1,71,7.56,-22.07,1,1,71,-13.19,-5.41,1,3,71,157.08,-0.83,0.17201,72,3.07,-0.05,0.8266,74,22.72,-39.81,0.0014,2,73,-1.65,-1.57,0.26924,72,115.51,-0.2,0.73076,1,73,66.11,3.09,1,2,71,116.05,18.51,0.6693,74,-17.27,-18.4,0.3307,2,75,54.32,-0.43,0.40723,76,0.91,0.04,0.59277,2,74,122.88,-1.01,0.02412,75,-1.03,-0.85,0.97588,2,71,130.85,37.52,0.01389,74,-1.52,-0.16,0.98611],"hull":24}},"qianfa06":{"qianfa06":{"x":389.02,"y":122.74,"rotation":-40.27,"width":227,"height":430}},"qiang06":{"qiang03":{"type":"mesh","uvs":[0.06444,0.02458,0.60483,0.57437,0.70956,0.67922,0.70887,0.68113,0.75987,0.72094,0.76418,0.73654,0.77512,0.74747,0.7913,0.75492,0.80073,0.75264,0.79637,0.74103,0.7869,0.73378,0.77346,0.72831,0.76904,0.71487,0.75451,0.69726,0.73988,0.67952,0.72229,0.6582,0.70427,0.63635,0.69753,0.62798,0.69046,0.61755,0.69983,0.62542,0.70746,0.63123,0.7265,0.64664,0.75366,0.66515,0.76098,0.66501,0.76525,0.64917,0.79527,0.66146,0.82632,0.7066,0.84013,0.80804,0.85427,0.82475,0.87544,0.82216,0.97275,0.95078,1,0.99092,1,0.99579,0.98622,0.99802,0.82279,0.86958,0.70869,0.81064,0.67833,0.78737,0.64625,0.74746,0.71064,0.7698,0.73399,0.78662,0.71223,0.73356,0.68381,0.70315,0.35981,0.37848,0.34179,0.36052,0.29227,0.40257,0.30611,0.38835,0.34141,0.36014,0.30634,0.32482,0.02306,0.06068,0,0.00067,0.7684,0.68645,0.73714,0.66296,0.71165,0.63971],"triangles":[20,52,19,52,16,17,18,19,52,52,17,18,51,52,21,22,51,21,16,52,15,51,15,52,21,52,20,13,14,50,15,51,14,50,14,51,33,34,30,29,30,34,34,28,29,32,33,31,33,30,31,35,39,34,27,34,39,39,6,7,27,39,7,34,27,28,27,7,8,35,38,39,35,36,38,8,26,27,36,37,38,5,39,40,39,5,6,5,40,4,8,9,26,9,10,26,26,10,12,41,3,40,40,3,4,10,11,12,13,50,12,12,50,26,50,25,26,42,1,41,3,41,2,50,51,22,22,23,50,50,23,25,2,41,1,23,24,25,43,45,46,43,44,45,1,42,43,1,43,46,1,46,47,48,0,47,1,47,0,48,49,0],"vertices":[1,56,-3571.3,134.47,1,1,56,20.48,101.67,1,1,56,711.12,100.91,1,1,56,714.91,92.35,1,1,56,1015.05,129.06,1,1,56,1079.77,91.85,1,1,56,1151.85,91.82,1,1,56,1230.39,120.56,1,1,56,1254.85,159.12,1,1,56,1202.78,183.01,1,1,56,1147.5,175.74,1,1,56,1084.59,149.54,1,1,56,1026.44,179.27,1,3,56,920.73,189.49,0.45332,80,8.82,74.69,0.54668,82,-332.68,26.44,0,2,80,113.02,50.69,0.99992,82,-225.78,24.08,0.00008,1,81,65.22,29.67,1,2,81,196.15,15.29,0.0645,82,34.36,18.36,0.9355,1,82,84.32,16.66,1,2,81,303.04,-2.64,0.0427,82,142.4,9.83,0.9573,1,82,85.99,0.7,1,2,81,201.51,-12.19,0.01546,82,42.1,-8.54,0.98454,1,81,87.58,-22.59,1,2,56,814.55,292.5,0.45714,80,100.75,-41.23,0.54286,1,56,838.77,317.06,1,1,56,802.14,383.34,1,1,56,942.95,441.71,1,1,56,1192.95,395.17,1,2,56,1566,106.26,0.99151,80,-620.21,240.88,0.00849,1,56,1667.5,97.74,1,1,56,1730.53,175.99,1,1,56,2472.65,72.47,1,1,56,2693.74,29.87,1,1,56,2709.41,13.83,1,1,56,2670.12,-38.9,1,1,56,1705.64,-153.69,1,1,56,1131.19,-335.11,1,1,56,953.91,-358.35,1,1,56,717.31,-332.47,1,1,56,1006.29,-194.08,1,1,56,1139.2,-172.62,1,1,56,895,-69.38,1,1,56,701.29,-62.74,1,1,56,-1436.24,-59.48,1,1,56,-1554.77,-59.6,1,1,56,-1586.44,-361.27,1,1,56,-1585.54,-268.8,1,1,56,-1557.3,-59.61,1,1,56,-1789.23,-58.65,1,1,56,-3594.65,-120.8,1,1,56,-3865.56,1.08,1,1,56,932.78,270.84,1,2,80,169.12,-2.6,0.50332,81,-0.56,-2.68,0.49668,3,80,329.48,-16.18,0.00002,81,160.29,2.53,0.49989,82,-0.25,2.52,0.50009],"hull":50}},"r_tui01":{"r_tui01":{"type":"mesh","uvs":[0.16686,0,0.2679,0.01462,0.37304,0.04489,0.47205,0.16908,0.533,0.30119,0.58008,0.35623,0.58519,0.37695,0.58645,0.40359,0.59277,0.42721,0.63926,0.48454,0.74533,0.61674,0.84097,0.75867,0.85767,0.78979,0.87002,0.80136,0.87818,0.81805,0.93151,0.90605,0.95368,0.91623,0.98621,0.93469,0.99353,0.96259,0.96137,0.99623,0.89572,0.99999,0.81683,1,0.72368,0.95866,0.66961,0.87757,0.68747,0.8417,0.68943,0.8282,0.68891,0.81442,0.65669,0.76532,0.64559,0.75447,0.57265,0.69839,0.3947,0.57719,0.36425,0.52439,0.34664,0.42938,0.34651,0.41022,0.33144,0.38692,0.29926,0.33717,0.26094,0.30919,0.07414,0.16504,0.00919,0.08792,0,0.06103,0,0.01979,0.06762,0.00766,0.12236,0,0.42227,0.42125,0.42292,0.40058,0.40173,0.37699,0.48944,0.36459,0.51135,0.38944,0.5154,0.41125,0.72767,0.80803,0.72986,0.82149,0.73631,0.8349,0.78677,0.79828,0.79527,0.81063,0.80034,0.82598],"triangles":[20,21,16,19,20,18,16,22,15,22,16,21,17,20,16,20,17,18,15,23,51,51,54,15,54,14,15,15,22,23,51,23,24,24,25,51,51,50,54,54,53,14,53,13,14,44,34,45,44,45,46,34,35,45,45,35,46,46,5,6,5,46,4,46,35,4,35,36,4,36,3,4,36,37,3,37,2,3,37,1,2,1,37,0,0,38,42,0,37,38,41,42,39,42,38,39,39,40,41,25,50,51,25,26,50,50,53,54,26,49,50,50,49,53,26,27,49,49,52,53,53,12,13,53,52,12,49,27,52,52,11,12,52,27,11,27,28,11,11,29,10,11,28,29,10,29,30,43,9,31,10,30,9,8,43,48,43,8,9,9,30,31,31,32,43,32,33,43,48,7,8,43,44,48,43,33,44,44,47,48,48,47,7,44,33,34,47,6,7,44,46,47,47,46,6],"vertices":[1,52,-5.46,-2.39,1,1,52,71.85,101.54,1,1,52,205.28,190.02,1,1,52,614.19,176.06,1,1,52,1014.36,117.59,1,2,53,-43.24,107.79,0.0203,52,1191.47,115.39,0.9797,2,53,19.21,100.18,0.83479,52,1252.26,99.21,0.16521,1,53,97.92,83.66,1,1,53,169.25,75.62,1,1,53,351.53,95.65,1,1,53,772.37,136.89,1,2,53,1217.2,158.65,0.88757,54,-151.63,176.76,0.11243,2,53,1315.43,166.49,0.6953,54,-53.18,172.65,0.3047,2,53,1351.17,173.09,0.42366,54,-16.9,174.87,0.57634,2,53,1402.66,172.1,0.11576,54,34.1,167.66,0.88424,1,54,307.5,142.2,1,1,54,346.27,158.84,1,1,54,413.12,179.64,1,1,54,495.54,159.83,1,1,54,576.69,85.74,1,1,54,558.12,1.47,1,1,54,523.03,-95.14,1,1,54,364.27,-166.58,1,1,54,110.11,-149.15,1,2,53,1416.23,-86.09,0.24991,54,16.3,-90.28,0.75008,2,53,1377.11,-74.43,0.72578,54,-21.13,-73.96,0.27422,1,53,1336.43,-65.71,1,1,53,1182.54,-73.22,1,1,53,1147.35,-79.93,1,1,53,961,-134.38,1,1,53,550.89,-265.68,1,1,53,386.65,-268.42,1,2,53,101.19,-218.68,0.85848,52,1288.79,-227.92,0.14152,2,53,44.79,-205.81,0.69379,52,1234.71,-207.37,0.30621,2,53,-29.31,-198.86,0.41539,52,1162.01,-190.22,0.58461,2,53,-182.9,-225.51,0.0478,52,1006.75,-195.37,0.9522,2,53,-276.44,-255.13,0.00263,52,910.01,-211.77,0.99737,1,52,416.53,-283.26,1,1,52,185.92,-280.03,1,1,52,88.46,-264.34,1,1,52,-27.51,-226.8,1,1,52,-30.17,-131.41,1,1,52,-26.22,-56.53,1,2,53,101.69,-136.78,0.88084,52,1301.16,-146.88,0.11916,2,53,41.08,-121.89,0.70844,52,1243.19,-123.75,0.29156,2,53,-34.55,-132.75,0.35983,52,1166.79,-124.04,0.64017,1,52,1172.76,-3.93,1,1,53,34.25,-2.05,1,2,53,99.6,-11.75,0.99785,52,1316.39,-22.77,0.00215,1,53,1328.99,-12.15,1,1,53,1369.23,-18.54,1,1,54,18.74,-23.46,1,2,53,1317.66,69.51,0.72298,54,-62.71,76.12,0.27702,2,53,1356.49,71.89,0.43354,54,-23.87,73.78,0.56646,2,53,1403.13,67.89,0.10047,54,21.94,64.16,0.89953],"hull":43}},"r_yshou01":{"r_yshou01":{"x":196.78,"y":13.15,"rotation":-169.73,"width":456,"height":244}},"r_yshou02":{"r_yshou02":{"type":"mesh","uvs":[0.7507,0.15624,0.78368,0.10961,0.85091,0.07905,0.94844,0.09268,0.9996,0.19026,0.99867,0.30402,0.91279,0.45275,0.78829,0.49496,0.74943,0.53247,0.64552,0.62719,0.56721,0.76251,0.54554,0.79996,0.52409,0.83702,0.48316,0.90775,0.39137,1,0.36944,1,0.24609,0.96643,0.21524,0.93852,0.09369,1,0.04565,1,0,0.94123,0,0.89598,0.00525,0.85491,0.10571,0.78271,0.13644,0.74046,0.16093,0.60113,0.23213,0.47166,0.37813,0.45154,0.40744,0.4475,0.43226,0.4234,0.51208,0.34589,0.57625,0.23518,0.62596,0.1091,0.64959,0.00121,0.689,0,0.40636,0.60751,0.43113,0.57565,0.37428,0.62452],"triangles":[4,5,2,5,6,2,4,2,3,6,0,2,14,15,13,13,15,37,17,18,23,18,19,21,23,18,22,22,18,21,37,15,16,19,20,21,23,24,17,17,24,37,16,17,37,37,25,26,25,37,24,13,37,12,37,35,12,12,35,11,35,36,11,37,27,35,37,26,27,28,35,27,11,36,10,10,36,9,30,9,36,30,36,29,9,30,8,8,30,31,7,8,31,28,36,35,0,31,32,34,0,32,36,28,29,7,31,0,34,32,33,7,0,6,0,1,2],"vertices":[2,45,130.61,-84.1,0.93689,44,461.27,75.75,0.06311,2,45,83.89,-93.44,0.72133,44,446.23,30.55,0.27867,2,45,13.58,-73.91,0.18466,44,394.42,-20.84,0.81534,2,45,-66.02,-10.92,0,44,300.26,-58.76,1,2,45,-72.81,76.21,0.00066,44,221.23,-21.48,0.99934,1,44,184.78,50.86,1,2,45,104.17,184.35,0.35133,44,215,185.83,0.64867,2,45,228.81,139.58,0.8949,44,315.65,271.9,0.1051,2,45,277.11,140.16,0.99973,44,339.09,314.14,0.00027,2,45,404.13,138.37,0.99037,46,-182.94,134.99,0.00963,2,45,524.57,175.25,0.70116,46,-62.96,173.33,0.29884,2,45,557.9,185.45,0.54284,46,-29.76,183.94,0.45716,2,45,590.88,195.55,0.38711,46,3.1,194.44,0.61289,2,45,653.83,214.83,0.17202,46,65.81,214.48,0.82798,2,45,769.35,218.38,0.01831,46,181.28,219.43,0.98169,2,45,788.43,206.05,0.01149,46,200.51,207.33,0.98851,1,46,295.94,119.04,1,1,46,312.41,85.2,1,1,46,442.31,55.19,1,1,46,484.42,28.68,1,1,46,502.17,-31.92,1,1,46,485.01,-59.19,1,1,46,464.84,-81.04,1,1,46,349.37,-69.13,1,1,46,306.4,-77.63,1,1,46,232.1,-148.08,1,2,45,703.71,-187.11,0.00647,46,120.57,-186.82,0.99353,2,45,568.9,-117.04,0.48821,46,-15.08,-118.4,0.51179,2,45,541.83,-102.97,0.74582,46,-42.32,-104.66,0.25418,2,45,510.93,-103.42,0.92111,46,-73.21,-105.49,0.07889,1,45,411.52,-104.89,1,1,45,312.9,-135,1,1,45,220.92,-182.44,1,1,45,158.66,-233.66,1,2,45,123.91,-212.23,0.99998,44,569.24,6.44,0.00002,2,45,604.62,-7.9,0.0217,46,19.31,-8.83,0.9783,2,45,570.75,-13.02,0.91324,46,-14.49,-14.36,0.08676,1,46,53.88,-16.27,1],"hull":35}},"xiasheng":{"xiasheng":{"type":"mesh","uvs":[0.76884,0,0.81102,0,0.94888,0.09802,1,0.25917,0.99999,0.3238,1,0.34337,0.99238,0.41113,0.98723,0.43918,0.97963,0.48053,0.96155,0.56526,0.95351,0.60296,0.87876,0.66193,0.76748,0.74971,0.52533,0.94073,0.45165,0.96379,0.33928,0.99896,0.19369,0.9984,0.05568,0.90824,0,0.77515,0,0.65729,0.04187,0.46579,0.13491,0.34638,0.19012,0.27552,0.38684,0.13319,0.51543,0.06099,0.54093,0.04667,0.6052,0.0041,0.39912,0.44422,0.57306,0.58552,0.73867,0.60497,0.53812,0.42159,0.77481,0.54058,0.6039,0.36064,0.79655,0.49316,0.92574,0.47191,0.91385,0.52506,0.89291,0.58425,0.5118,0.43632,0.76102,0.56468,0.90492,0.54335,0.28313,0.4172,0.42224,0.73164,0.78263,0.68999,0.59656,0.83615],"triangles":[9,10,11,14,15,41,41,15,16,16,17,41,14,41,13,13,43,12,13,41,43,41,17,18,41,18,40,40,20,21,19,20,40,40,18,19,12,42,11,32,25,26,32,26,0,33,32,0,42,9,11,9,42,36,9,36,8,36,38,39,8,36,39,8,39,7,39,31,35,31,33,35,7,39,35,35,33,34,33,4,34,33,0,1,6,7,35,6,35,34,2,33,1,34,5,6,5,34,4,33,3,4,2,3,33,36,42,29,31,32,33,12,43,42,21,22,40,38,31,39,28,37,38,42,43,29,37,30,38,24,30,37,30,25,32,24,37,23,30,24,25,29,28,38,43,28,29,29,38,36,38,30,31,30,32,31,37,27,23,40,22,23,41,28,43,41,27,28,27,37,28,40,23,27,40,27,41],"vertices":[1,4,122,324.35,1,1,4,153.99,311.55,1,3,3,345.83,252,0.262,4,234.77,210.27,0.7377,52,-59.38,602.49,0.0003,2,3,369.24,141.23,0.13006,4,234.44,97.05,0.86994,2,3,362.11,99.63,0.06839,4,218.74,57.87,0.93161,2,3,359.97,87.04,0.0511,4,214,46.01,0.9489,2,3,346.37,44.48,0.00496,4,191.78,7.24,0.99504,1,4,181.07,-8.2,1,2,3,328.45,1.57,0,4,165.27,-30.96,1,3,3,304.56,-50.48,0,4,130.99,-76.84,0.62858,50,173.54,246.31,0.37142,3,3,293.93,-73.64,0,4,115.74,-97.25,0.40556,50,187.36,224.91,0.59444,5,2,251.07,-57.21,0.01253,3,227.24,-101.29,0.00457,4,44.74,-110.3,0.35299,52,271.72,431.47,0.05376,50,174.85,153.81,0.57613,5,2,160.15,-114.53,0.04846,3,127.95,-142.45,0.01769,4,-60.97,-129.73,0.38446,52,297.28,327.07,0.20788,50,156.23,47.95,0.34152,5,2,-37.68,-239.27,0.15621,3,-88.09,-232.02,0.05701,4,-290.99,-172.01,0.03888,52,352.89,99.91,0.67004,50,115.72,-182.39,0.07786,4,2,-97.89,-254.33,0.10232,3,-149.97,-236.71,0.03734,4,-352.48,-163.62,0.02547,52,348.1,38.04,0.83488,4,2,-189.69,-277.3,0.00002,3,-244.33,-243.85,0.00001,4,-446.24,-150.83,0,52,340.79,-56.32,0.99997,4,2,-308.64,-276.93,0.00001,3,-361.51,-223.42,0,4,-556.53,-106.28,0,52,302.75,-169.02,0.99998,4,2,-421.39,-218.05,0.00001,3,-462.72,-146.37,0,4,-639.33,-9.72,0,52,211.18,-257.3,0.99999,4,2,-466.88,-131.15,0.00001,3,-492.89,-53.03,0,4,-649.27,87.87,0,52,114.34,-272.91,0.99999,4,2,-466.88,-54.18,0,3,-479.91,22.83,0,4,-620.66,159.32,0,52,41.34,-248.52,1,4,2,-432.67,70.86,0,3,-425.09,140.31,0,4,-542.43,262.7,0,52,-66.42,-176.45,1,4,2,-356.66,148.84,0.18414,3,-337.01,204.34,0.4528,4,-442.89,306.84,0,52,-116.29,-79.64,0.36306,3,2,-311.55,195.11,0.26403,3,-284.74,242.34,0.64924,52,-145.88,-22.2,0.08673,3,2,-150.83,288.06,0.2401,3,-110.65,306.84,0.73176,4,-200.06,359.6,0.02814,3,2,-45.77,335.2,0.10539,3,0.86,335.58,0.75562,4,-85.01,364.32,0.139,3,2,-24.94,344.55,0.06404,3,22.97,341.28,0.56773,4,-62.19,365.26,0.36824,3,2,27.56,372.35,0.01769,3,79.41,359.82,0.26625,4,-3.12,371.55,0.71605,3,2,-140.8,84.95,0.63646,3,-135.03,104.95,0.21251,52,12.71,104.84,0.15103,4,2,1.31,-7.32,0.90025,3,-10.52,-9.97,0.08659,4,-168.59,28.84,0.00424,52,145.25,210.39,0.00892,1,3,120.7,-45.32,1,4,2,-27.23,99.73,0.36093,3,-20.6,100.36,0.59224,4,-155.31,138.82,0.0033,52,34.68,217.24,0.04352,2,3,156.9,-8.85,0.54517,4,-4.66,-5.18,0.45483,4,2,26.5,139.53,0.04647,3,39.09,130.52,0.3635,4,-90.63,155.8,0.58187,52,13.95,280.82,0.00816,2,3,179.63,18.67,0.25156,4,23.34,16.97,0.74844,1,4,126.48,-9.37,1,2,3,270.58,-18.03,0,4,104.57,-37.98,1,3,3,247.19,-53.24,0,4,74.32,-67.51,0.85209,50,145.04,196.45,0.14791,4,2,-48.74,90.11,0.4983,3,-43.42,94.51,0.43929,4,-178.85,137.89,0.00103,52,36.98,193.79,0.06138,1,3,143.13,-22.46,1,2,3,261.37,-28.57,0,4,93.36,-46.36,1,4,2,-235.57,102.59,0.59262,3,-225.46,138.33,0.22035,4,-347.65,218.91,0,52,-34.06,20.55,0.18703,4,2,-121.91,-102.74,0.3378,3,-148.08,-83.23,0.05157,4,-318.45,-13.95,0.00121,52,196.7,63.28,0.60942,5,2,172.52,-75.54,0.04108,3,146.73,-106.1,0.11157,4,-34.99,-98.13,0.59972,52,264.21,351.17,0.17241,50,135.66,83.32,0.07522,5,2,20.51,-170.98,0.21006,3,-19.21,-174.52,0.07583,4,-211.59,-130.24,0.18356,52,306.56,176.74,0.48226,50,104.22,-93.4,0.04829],"hull":27}},"xiong":{"xiong":{"type":"mesh","uvs":[0.28525,0,0.4294,0.04193,0.56527,0.06686,0.68082,0.08806,0.74875,0.10051,0.78654,0.11883,0.83868,0.17142,0.86235,0.24059,0.91022,0.37845,0.95608,0.51049,0.98475,0.62846,0.97097,0.76917,0.91003,0.90162,0.77586,0.92757,0.67688,0.88472,0.63874,0.86559,0.5907,0.889,0.50698,0.94073,0.41105,1,0.35546,1,0.21819,0.99692,0.09965,0.93996,0.0442,0.87377,0.00145,0.78189,0.00091,0.64986,0.00401,0.65678,0.03242,0.44785,0.06289,0.22375,0.07389,0.18408,0.08412,0.14839,0.13096,0.05213,0.20299,0,0.44523,0.89174,0.25166,0.85642,0.18352,0.65941,0.19489,0.38043,0.44394,0.90974,0.23617,0.86707,0.1622,0.66882,0.16198,0.39178,0.35965,0.60456,0.65476,0.60864,0.85284,0.5875,0.04315,0.71634,0.09846,0.86924,0.18035,0.93903,0.37447,0.96342,0.21851,0.76057,0.37713,0.73473,0.65689,0.74691,0.85349,0.73566,0.18976,0.50638,0.37957,0.43719,0.6217,0.45312,0.80942,0.4392,0.39069,0.3315,0.6066,0.34977,0.76568,0.33444],"triangles":[34,40,48,37,47,33,36,33,32,48,41,49,33,48,32,48,49,32,41,42,50,12,50,11,12,13,50,11,50,10,13,14,50,50,42,10,33,47,48,49,15,32,48,40,41,15,49,14,49,41,50,14,49,50,15,16,32,47,34,48,57,4,5,57,5,6,57,6,7,3,4,57,56,2,3,56,3,57,57,7,8,52,35,55,55,0,1,55,1,2,55,2,56,30,0,29,29,55,35,28,29,35,27,28,35,31,0,30,55,29,0,39,27,35,26,27,39,51,39,35,51,35,52,38,39,51,41,54,42,42,9,10,54,57,8,53,56,57,53,57,54,52,55,56,53,52,56,54,8,9,42,54,9,40,51,52,41,53,54,40,52,53,41,40,53,34,38,51,34,51,40,38,34,47,38,26,39,25,26,43,38,43,26,23,25,43,38,47,37,44,43,38,44,38,37,23,43,44,22,23,44,36,32,16,37,33,36,45,44,37,21,44,45,22,44,21,17,36,16,46,37,36,45,37,46,46,36,17,20,45,46,21,45,20,19,20,46,18,46,17,19,46,18,23,24,25],"vertices":[1,44,302.55,-53.05,1,3,5,619.7,89.54,0.01565,6,-46.61,107.17,0.03001,44,189.92,-75.11,0.95434,4,5,583.75,-9.71,0.01114,6,20.19,25.42,0.10412,44,88.94,-105.87,0.54826,47,4.61,140.07,0.33648,4,5,553.18,-94.12,0.0073,6,76.99,-44.1,0.16715,44,3.06,-132.03,0.20293,47,84.93,99.97,0.62263,3,5,535.21,-143.75,0.00504,6,110.39,-84.96,0.20418,47,132.15,76.4,0.79078,2,6,123.3,-114.38,0.09001,47,155.99,54.87,0.90999,2,6,127.51,-171.03,0.00034,47,183.08,4.93,0.99966,3,5,414.57,-211.68,0.0788,6,106.88,-223.36,0,47,185.73,-51.25,0.9212,3,5,303.87,-230.36,0.43186,6,66.18,-327.99,0,47,191.52,-163.37,0.56814,4,5,197.83,-248.25,0.64023,6,27.18,-428.21,0,47,197.07,-270.77,0.1912,97,-17.05,-270.22,0.16857,4,5,104.62,-254.97,0.30232,6,-14.82,-511.69,0,47,193,-364.13,0.04625,97,-110.25,-276.94,0.65142,2,5,-0.52,-226.82,0.09143,97,-215.4,-248.79,0.90857,4,5,-93.5,-164.17,0.20779,6,-194.34,-635.26,0,47,79.98,-550.46,0.00078,97,-308.38,-186.14,0.79143,4,5,-96.41,-59.78,0.33135,6,-285.47,-584.25,0,47,-24.05,-541.32,0.00008,97,-311.29,-81.75,0.66857,4,4,370.28,-45.65,0.00491,5,-51.46,9.41,0.32119,6,-321.84,-510.19,0,97,-266.34,-12.56,0.6739,3,4,348.7,-21.15,0.13085,5,-32.16,35.74,0.28138,97,-247.04,13.77,0.58777,2,4,307.92,-24.24,0.58329,5,-43.92,74.9,0.41671,1,4,233.75,-37.44,1,2,3,316.82,-23.04,0.25694,4,148.74,-52.58,0.74306,2,3,274.96,-15.87,0.10077,4,109.31,-36.79,0.89923,2,3,171.99,4.15,0.196,4,12.83,4.38,0.804,3,3,90.12,62.67,0.25379,4,-54.95,78.76,0.74621,5,-21.13,451.42,0,2,3,56.96,120.05,0.27663,4,-75.34,141.82,0.72337,2,3,36.7,195.29,0.4327,4,-79.37,219.63,0.5673,2,3,53.45,295.57,0.55527,4,-41.97,314.17,0.44473,2,3,54.89,289.92,0.53007,4,-41.75,308.34,0.46993,3,4,38.18,449.63,0.72863,5,361.1,439.97,0.04006,44,315.22,342,0.23131,3,4,123.92,601.18,0.09864,5,527.5,388.72,0.05275,44,374.02,178.11,0.84862,3,4,143.07,626.41,0.07037,5,556.25,375.42,0.03569,44,380.62,147.13,0.89395,3,4,160.54,649.02,0.04927,5,582.08,363.21,0.023,44,386.34,119.13,0.92773,3,4,221.31,704.53,0.00956,5,649.33,315.75,0.00241,44,388.7,36.86,0.98804,1,44,358.34,-24.11,1,4,4,203.96,15.11,0.21536,5,-27.78,184.88,0.09993,44,-122.13,500.17,0.00022,97,-242.66,162.91,0.68449,4,4,76.78,95.32,0.21353,5,23.3,326.31,0.08304,44,21.67,544.13,0.00692,97,-191.58,304.34,0.69652,4,4,84.82,255.5,0.17301,5,181.47,352.8,0.4667,44,137.74,433.45,0.0436,97,-33.41,330.83,0.31668,3,4,172.71,451.7,0.2143,5,391.95,309.01,0.17819,44,228.94,238.76,0.60752,3,4,197.89,2.61,0.88158,5,-41.29,188.13,0.11831,44,-127.64,512.93,0.00011,3,4,62.74,92.1,0.66554,5,17.14,339.33,0.31432,44,28.39,556.86,0.02014,3,4,67,254.83,0.53457,5,177,370.05,0.37455,44,148.86,447.38,0.09088,3,4,146.13,452.93,0.24256,5,387.46,335.25,0.1639,44,247.24,258.09,0.59354,4,4,225.44,244.7,0.00868,5,201.07,213.13,0.51105,44,37.73,333.99,0.00451,97,-13.8,191.16,0.47576,4,5,161.01,-8.77,0.54231,6,-197.32,-337.07,0,47,-45.06,-279.74,0.00017,97,-53.87,-30.74,0.45752,4,5,152.27,-160.72,0.46859,6,-71.33,-422.47,0,47,104.88,-305.94,0.0498,97,-62.61,-182.69,0.48161,3,3,76.63,239.67,0.07103,4,-31.03,254.66,0.92888,5,155.81,465.77,0.00009,3,4,-35.55,129.65,0.99961,5,32.74,443.39,0.00022,44,121.02,606.79,0.00018,3,4,2.55,56.51,0.99152,5,-30.53,390.48,0.00524,44,40.74,625.68,0.00324,1,4,133.26,-16.04,1,4,4,80.69,173.25,0.12662,5,100.25,339.2,0.18797,44,78.14,490.28,0.01268,97,-114.62,317.23,0.67273,4,4,200.59,146.69,0.03534,5,100.01,216.39,0.11314,44,-20.27,416.81,0.00066,97,-114.87,194.42,0.85085,5,4,395.53,58.54,0.00975,5,55.72,7.08,0.14463,6,-264.9,-419.36,0,47,-72.93,-382.51,0.00003,97,-159.16,-14.89,0.84559,5,4,538.2,10.77,0.00003,5,39.64,-142.51,0.09236,6,-144.69,-509.84,0,47,73.8,-415.71,0.00009,97,-175.24,-164.48,0.90752,3,4,133.03,363.12,0.20665,5,296.93,328.78,0.43764,44,187.77,326.65,0.35571,5,4,287.47,358.69,0.00985,5,325.71,176.99,0.58463,6,-272.39,-100.44,0.00862,44,83.57,212.58,0.27924,97,110.83,155.02,0.11767,6,4,454.64,278.55,0.00141,5,283.28,-3.49,0.6239,6,-139.18,-229.38,0.03668,44,-86.29,138.29,0.08297,47,-36.21,-157.67,0.13219,97,68.4,-25.46,0.12286,5,5,270.35,-146.72,0.43429,6,-22.82,-313.9,0.04185,44,-208.66,62.73,0.05081,47,104.58,-187.03,0.23162,97,55.47,-168.69,0.24143,4,4,325.6,431.08,0.00897,5,404.6,155.26,0.53532,6,-213.3,-43.84,0.01375,44,113.5,136.43,0.44197,5,4,473.51,356.72,0.00118,5,363.68,-5.15,0.52394,6,-96.54,-161.2,0.05848,44,-39.4,72.96,0.21598,47,-25.29,-78,0.20041,4,5,355.4,-126.98,0.4235,6,3.82,-230.76,0.08469,44,-141.85,6.52,0.10282,47,94.77,-100.27,0.38899],"hull":32}},"ybozi":{"ybozi":{"type":"mesh","uvs":[0.73954,0,0.93914,0.11628,1,0.32268,1,0.44719,0.74831,0.93776,0.60897,1,0.44983,1,0.10209,0.8278,0,0.61929,0,0.5338,0.12588,0.37126,0.38329,0.03889,0.57529,0,0.25977,0.69217,0.55796,0.77666,0.77366,0.48391],"triangles":[13,11,15,11,12,15,12,0,15,13,9,10,13,10,11,3,15,2,15,0,1,15,1,2,4,5,14,5,6,14,6,13,14,4,15,3,4,14,15,14,13,15,7,13,6,7,8,13,13,8,9],"vertices":[2,47,245.86,279.27,0.08755,6,297.3,53.4,0.91245,2,47,317.66,216.25,0.23182,6,336.94,-33.52,0.76818,2,47,323.01,139.54,0.37604,6,310.35,-105.67,0.62396,2,47,310.96,97.66,0.46566,6,282.18,-138.92,0.53434,1,47,158.74,-37.2,1,2,44,-101.36,-36.15,0.00255,47,94.74,-41.45,0.99745,2,44,-40.19,-4.42,0.24634,47,28.52,-22.39,0.75366,1,44,121.22,11.42,1,3,5,588.5,118.1,0.04505,44,194.06,-33.01,0.69225,6,-87.13,95.02,0.2627,3,5,618.02,113.2,0.04276,44,207.84,-59.57,0.59578,6,-67.79,117.85,0.36146,3,5,665.2,50.1,0.01232,44,185.66,-135.17,0.22357,6,10.57,126.02,0.76411,2,44,140.28,-289.75,0.00068,6,170.81,142.73,0.99932,2,47,177.51,298.93,0.01806,6,243.04,99.38,0.98194,2,5,544.9,11.33,0.94025,44,82.47,-62.16,0.05975,3,5,494.56,-111.19,0.03831,47,95.13,39.78,0.78637,6,61.6,-103.18,0.17532,2,47,213.22,112.42,0.45853,6,199.09,-85.37,0.54147],"hull":13}},"ysheng01":{"ysheng01":{"x":31.25,"y":-57.27,"rotation":-134.33,"width":230,"height":113}},"ysheng02":{"ysheng02":{"type":"mesh","uvs":[0.9784,0.00274,1,0.14984,1,0.26144,0.87647,0.7449,0.68564,0.92104,0.51099,0.79686,0.45834,0.53705,0.45122,0.50191,0.43926,0.51121,0.35123,0.57973,0.28214,0.75009,0.23319,0.99999,0.08875,1,0.05744,0.97437,0,0.92734,0,0.7169,0.0916,0.52851,0.23808,0.22723,0.54665,0.1379,0.69455,0.30578,0.89823,0.00704,0.13912,0.64357,0.26373,0.39455,0.49561,0.26649,0.58732,0.51226,0.74486,0.55325],"triangles":[0,1,2,25,20,0,2,3,25,2,25,0,24,18,19,23,18,24,25,19,20,24,19,25,5,6,24,4,24,25,4,25,3,5,24,4,21,16,22,15,13,14,21,15,16,21,13,15,11,21,10,12,13,21,11,12,21,22,17,23,16,17,22,10,22,9,21,22,10,23,17,18,23,8,22,7,8,23,6,7,23,24,6,23,9,22,8],"vertices":[1,39,-17.19,1.39,1,1,39,-7.48,22.35,1,1,39,4.21,33.86,1,2,40,-51.13,7.57,0.03415,39,87.44,50.61,0.96585,3,41,-44.53,110.01,0.00024,40,3.48,60.84,0.94871,39,156.23,17.64,0.05105,2,41,15.53,77.79,0.1088,40,70.82,71.39,0.8912,2,41,26.46,36.18,0.5459,40,104.64,44.82,0.4541,3,41,27.94,30.55,0.71112,42,-44.87,51.93,0.00025,40,109.22,41.22,0.28863,3,41,32.62,30.9,0.81661,42,-40.42,50.44,0.00173,40,112.74,44.33,0.18167,4,41,67.13,33.46,0.75174,42,-7.6,39.46,0.24458,43,-54.05,56.86,0.00317,40,138.71,67.19,0.00051,3,41,97.97,52.19,0.0956,42,28.08,44.82,0.72565,43,-18.29,52.02,0.17875,2,42,64.37,64.09,0.37741,43,21.94,60.36,0.62259,2,42,108.63,32.62,0.01299,43,55.63,17.76,0.98701,2,42,116.04,22.73,0.00061,43,59.97,6.19,0.99939,1,43,67.94,-15.04,1,1,43,43.68,-34.22,1,2,42,67.59,-23.24,0.36172,43,0.59,-24.39,0.63828,2,41,97.26,-26.43,0.41606,42,-2.96,-27.42,0.58394,2,41,-18.81,-13.78,0.03186,40,98.7,-22.34,0.96814,2,40,37.85,-22.89,0.83022,39,89.42,-43.41,0.16978,1,39,4.4,-19.65,1,2,42,62.83,0.9,0.13623,43,2.78,0.12,0.86377,2,41,93.25,-0.32,0.07409,42,3.43,-1.79,0.92591,2,41,4.06,0.45,0.9638,40,108.34,2.81,0.0362,2,41,-21.65,43.27,0.03707,40,62,21.43,0.96293,1,40,5.58,2.4,1],"hull":21}}}}],"animations":{"animation":{"slots":{"dianzhui":{"rgba":[{"color":"ffffffff","curve":[0.439,1,0.861,1,0.439,1,0.861,1,0.439,1,0.861,1,0.439,1,0.861,0]},{"time":1.3,"color":"ffffff00","curve":"stepped"},{"time":1.3333,"color":"ffffff00","curve":[1.772,1,2.222,1,1.772,1,2.222,1,1.772,1,2.222,1,1.772,0,2.222,1]},{"time":2.6667,"color":"ffffffff"}]},"dianzhui2":{"rgba":[{"color":"ffffff00","curve":[0.439,1,0.894,1,0.439,1,0.894,1,0.439,1,0.894,1,0.439,0,0.894,1]},{"time":1.3333,"color":"ffffffff","curve":[1.772,1,2.194,1,1.772,1,2.194,1,1.772,1,2.194,1,1.772,1,2.194,0]},{"time":2.6333,"color":"ffffff00","curve":"stepped"},{"time":2.6667,"color":"ffffff00"}]}},"bones":{"target":{"translate":[{"curve":[0.444,0,0.889,0,0.444,0,0.889,8.85]},{"time":1.3333,"y":8.85,"curve":[1.778,0,2.222,0,1.778,8.85,2.222,0]},{"time":2.6667}]},"target2":{"translate":[{"curve":[0.444,0,0.889,0,0.444,0,0.889,5.54]},{"time":1.3333,"y":5.54,"curve":[1.778,0,2.222,0,1.778,5.54,2.222,0]},{"time":2.6667}]},"xiasheng":{"translate":[{"x":-16.48,"curve":[0.444,-16.48,0.889,29.27,0.444,0,0.889,5.73]},{"time":1.3333,"x":29.27,"y":5.73,"curve":[1.778,29.27,2.222,-16.48,1.778,5.73,2.222,0]},{"time":2.6667,"x":-16.48}]},"xiasheng2":{"translate":[{"curve":[0.444,0,0.889,0.67,0.444,0,0.889,6.1]},{"time":1.3333,"x":0.67,"y":6.1,"curve":[1.778,0.67,2.222,0,1.778,6.1,2.222,0]},{"time":2.6667}]},"xiasheng3":{"rotate":[{"curve":[0.444,0,0.889,-3.09]},{"time":1.3333,"value":-3.09,"curve":[1.778,-3.09,2.222,0]},{"time":2.6667}],"translate":[{"curve":[0.444,0,0.889,2.05,0.444,0,0.889,12.02]},{"time":1.3333,"x":2.05,"y":12.02,"curve":[1.778,2.05,2.222,0,1.778,12.02,2.222,0]},{"time":2.6667}]},"xiasheng4":{"rotate":[{"curve":[0.444,0,0.889,2.97]},{"time":1.3333,"value":2.97,"curve":[1.778,2.97,2.222,0]},{"time":2.6667}],"translate":[{"x":1.66,"y":6.2,"curve":[0.114,0.71,0.224,0,0.114,2.65,0.224,0]},{"time":0.3333,"curve":[0.778,0,1.222,10.4,0.778,0,1.222,38.77]},{"time":1.6667,"x":10.4,"y":38.77,"curve":[2.001,10.4,2.333,4.45,2.001,38.77,2.333,16.59]},{"time":2.6667,"x":1.66,"y":6.2}]},"lian":{"rotate":[{"value":2.32,"curve":[0.444,2.32,0.889,1.69]},{"time":1.3333,"value":1.69,"curve":[1.778,1.69,2.222,2.32]},{"time":2.6667,"value":2.32}],"translate":[{"x":2.74,"y":0.23,"curve":[0.225,1.38,0.446,0,0.225,0.12,0.446,0]},{"time":0.6667,"curve":[1.111,0,1.556,5.48,1.111,0,1.556,0.47]},{"time":2,"x":5.48,"y":0.47,"curve":[2.224,5.48,2.444,4.08,2.224,0.47,2.444,0.35]},{"time":2.6667,"x":2.74,"y":0.23}]},"xiasheng8":{"translate":[{"x":-13.79,"y":5.69,"curve":[0.225,-20.64,0.446,-27.58,0.225,8.52,0.446,11.38]},{"time":0.6667,"x":-27.58,"y":11.38,"curve":[1.111,-27.58,1.556,0,1.111,11.38,1.556,0]},{"time":2,"curve":[2.224,0,2.444,-7.03,2.224,0,2.444,2.9]},{"time":2.6667,"x":-13.79,"y":5.69}]},"r_yshou02":{"rotate":[{"value":-0.87,"curve":[0.114,-0.37,0.224,0]},{"time":0.3333,"curve":[0.778,0,1.222,-5.47]},{"time":1.6667,"value":-5.47,"curve":[2.001,-5.47,2.333,-2.34]},{"time":2.6667,"value":-0.87}]},"r_yshou03":{"rotate":[{"value":-2.73,"curve":[0.225,-1.38,0.446,0]},{"time":0.6667,"curve":[1.111,0,1.556,-5.47]},{"time":2,"value":-5.47,"curve":[2.224,-5.47,2.444,-4.07]},{"time":2.6667,"value":-2.73}]},"l_yshou02":{"rotate":[{"value":0.32,"curve":[0.114,0.14,0.224,0]},{"time":0.3333,"curve":[0.778,0,1.222,1.99]},{"time":1.6667,"value":1.99,"curve":[2.001,1.99,2.333,0.85]},{"time":2.6667,"value":0.32}]},"l_yshou03":{"rotate":[{"value":0.99,"curve":[0.225,0.5,0.446,0]},{"time":0.6667,"curve":[1.111,0,1.556,1.99]},{"time":2,"value":1.99,"curve":[2.224,1.99,2.444,1.48]},{"time":2.6667,"value":0.99}]},"l_tui01":{"rotate":[{"value":1.55,"curve":[0.114,2.06,0.224,2.43]},{"time":0.3333,"value":2.43,"curve":[0.778,2.43,1.222,-3.1]},{"time":1.6667,"value":-3.1,"curve":[2.001,-3.1,2.333,0.07]},{"time":2.6667,"value":1.55}]},"l_tui03":{"rotate":[{"value":-0.36,"curve":[0.113,0.33,0.223,1.03]},{"time":0.3333,"value":1.55,"curve":[0.447,2.06,0.557,2.43]},{"time":0.6667,"value":2.43,"curve":[1.111,2.43,1.556,-3.1]},{"time":2,"value":-3.1,"curve":[2.223,-3.1,2.444,-1.71]},{"time":2.6667,"value":-0.36}]},"l_tui04":{"rotate":[{"value":-2.25,"curve":[0.113,-1.73,0.224,-1.03]},{"time":0.3333,"value":-0.33,"curve":[0.559,1.04,0.779,2.43]},{"time":1,"value":2.43,"curve":[1.444,2.43,1.889,-3.1]},{"time":2.3333,"value":-3.1,"curve":[2.445,-3.1,2.556,-2.76]},{"time":2.6667,"value":-2.25}]},"target3":{"translate":[{"curve":[0.444,0,0.889,10.98,0.444,0,0.889,0]},{"time":1.3333,"x":10.98,"curve":[1.778,10.98,2.222,0,1.778,0,2.222,0]},{"time":2.6667}]},"dianzhui4":{"scale":[{"x":1.304,"y":1.304,"curve":[0.589,1.452,1.165,1.6,0.589,1.452,1.165,1.6]},{"time":1.3,"x":1.6,"y":1.6},{"time":1.3333,"curve":[1.472,1,2.222,1.193,1.472,1,2.222,1.193]},{"time":2.6667,"x":1.304,"y":1.304}]},"dianzhui5":{"scale":[{"curve":[0.274,1,2.359,1.6,0.274,1,2.359,1.6]},{"time":2.6333,"x":1.6,"y":1.6},{"time":2.6667}]},"qianfa010":{"translate":[{"x":-9.6,"y":-5.01,"curve":[0.444,-9.6,0.889,9.31,0.444,-5.01,0.889,7.22]},{"time":1.3333,"x":9.31,"y":7.22,"curve":[1.778,9.31,2.222,-9.6,1.778,7.22,2.222,-5.01]},{"time":2.6667,"x":-9.6,"y":-5.01}]},"qianfa011":{"translate":[{"x":-9.64,"y":-7.88,"curve":[0.013,-9.66,0.023,-9.78,0.013,-7.9,0.023,-8]},{"time":0.0333,"x":-9.78,"y":-8,"curve":[0.478,-9.78,0.922,10.38,0.478,-8,0.922,8.72]},{"time":1.3667,"x":10.38,"y":8.72,"curve":[1.801,10.38,2.233,-8.9,1.801,8.72,2.233,-7.27]},{"time":2.6667,"x":-9.64,"y":-7.88}]},"qianfa012":{"translate":[{"x":-5.17,"y":-12.83,"curve":[0.022,-5.26,0.044,-5.45,0.022,-13.01,0.044,-13.37]},{"time":0.0667,"x":-5.45,"y":-13.37,"curve":[0.511,-5.45,0.956,14.2,0.511,-13.37,0.956,25.63]},{"time":1.4,"x":14.2,"y":25.63,"curve":[1.822,14.2,2.244,-3.4,1.822,25.63,2.244,-9.31]},{"time":2.6667,"x":-5.17,"y":-12.83}]},"ysheng01":{"translate":[{"x":-0.72,"y":-13.66,"curve":[0.035,-0.72,0.067,-0.72,0.035,-14.07,0.067,-14.53]},{"time":0.1,"x":-0.72,"y":-14.53,"curve":[0.544,-0.72,0.989,-0.45,0.544,-14.53,0.989,27.18]},{"time":1.4333,"x":-0.45,"y":27.18,"curve":[1.845,-0.45,2.256,-0.68,1.845,27.18,2.256,-8.75]},{"time":2.6667,"x":-0.72,"y":-13.66}]},"houfa02":{"translate":[{"x":8.87,"y":-16.55,"curve":[0.057,9.34,0.112,9.71,0.057,-17.45,0.112,-18.14]},{"time":0.1667,"x":9.71,"y":-18.14,"curve":[0.611,9.71,1.056,-8.1,0.611,-18.14,1.056,15.86]},{"time":1.5,"x":-8.1,"y":15.86,"curve":[1.89,-8.1,2.278,5.63,1.89,15.86,2.278,-10.36]},{"time":2.6667,"x":8.87,"y":-16.55}]},"houfa03":{"translate":[{"x":12.95,"y":-7.87,"curve":[0.079,14.53,0.156,15.66,0.079,-8.51,0.156,-8.98]},{"time":0.2333,"x":15.66,"y":-8.98,"curve":[0.678,15.66,1.122,-16.24,0.678,-8.98,1.122,4.09]},{"time":1.5667,"x":-16.24,"y":4.09,"curve":[1.934,-16.24,2.3,5.62,1.934,4.09,2.3,-4.86]},{"time":2.6667,"x":12.95,"y":-7.87}]},"houfa04":{"translate":[{"x":6.56,"y":11.5,"curve":[0.101,8.66,0.201,10.13,0.101,14.77,0.201,17.07]},{"time":0.3,"x":10.13,"y":17.07,"curve":[0.744,10.13,1.189,-16.94,0.744,17.07,1.189,-25.09]},{"time":1.6333,"x":-16.94,"y":-25.09,"curve":[1.979,-16.94,2.322,-0.56,1.979,-25.09,2.322,0.42]},{"time":2.6667,"x":6.56,"y":11.5}]},"houfa05":{"translate":[{"x":0.4,"y":9.82,"curve":[0.136,0.31,0.268,0.23,0.136,13.5,0.268,16.24]},{"time":0.4,"x":0.23,"y":16.24,"curve":[0.844,0.23,1.289,1.02,0.844,16.24,1.289,-13.47]},{"time":1.7333,"x":1.02,"y":-13.47,"curve":[2.046,1.02,2.356,0.63,2.046,-13.47,2.356,1.43]},{"time":2.6667,"x":0.4,"y":9.82}]},"houfa025":{"translate":[{"x":3.39,"y":4.6,"curve":[0.168,1.37,0.334,-0.29,0.168,9.08,0.334,12.76]},{"time":0.5,"x":-0.29,"y":12.76,"curve":[0.944,-0.29,1.389,11.27,0.944,12.76,1.389,-12.89]},{"time":1.8333,"x":11.27,"y":-12.89,"curve":[2.112,11.27,2.389,6.72,2.112,-12.89,2.389,-2.8]},{"time":2.6667,"x":3.39,"y":4.6}]},"houfa029":{"translate":[{"x":7.9,"y":-4.22,"curve":[0.213,2.3,0.423,-3.1,0.213,3.78,0.423,11.47]},{"time":0.6333,"x":-3.1,"y":11.47,"curve":[1.078,-3.1,1.522,20.65,1.078,11.47,1.522,-22.41]},{"time":1.9667,"x":20.65,"y":-22.41,"curve":[2.201,20.65,2.433,14.05,2.201,-22.41,2.433,-12.99]},{"time":2.6667,"x":7.9,"y":-4.22}]},"houfa031":{"translate":[{"x":2.42,"y":-7.56,"curve":[0.27,1,0.535,-0.78,0.27,2.36,0.535,14.83]},{"time":0.8,"x":-0.78,"y":14.83,"curve":[1.244,-0.78,1.689,4.15,1.244,14.83,1.689,-19.72]},{"time":2.1333,"x":4.15,"y":-19.72,"curve":[2.313,4.15,2.489,3.35,2.313,-19.72,2.489,-14.1]},{"time":2.6667,"x":2.42,"y":-7.56}]},"houfa032":{"translate":[{"x":1.81,"y":-22.37,"curve":[0.336,1.74,0.668,1.58,0.336,-11.61,0.668,9.63]},{"time":1,"x":1.58,"y":9.63,"curve":[1.444,1.58,1.889,1.86,1.444,9.63,1.889,-28.47]},{"time":2.3333,"x":1.86,"y":-28.47,"curve":[2.446,1.86,2.556,1.84,2.446,-28.47,2.556,-25.93]},{"time":2.6667,"x":1.81,"y":-22.37}]},"houfa033":{"translate":[{"x":7.81,"y":-10.36,"curve":[0.444,7.81,0.889,-5.19,0.444,-10.36,0.889,12.31]},{"time":1.3333,"x":-5.19,"y":12.31,"curve":[1.778,-5.19,2.222,7.81,1.778,12.31,2.222,-10.36]},{"time":2.6667,"x":7.81,"y":-10.36}]},"houfa036":{"translate":[{"x":4.36,"y":-14.73,"curve":[0.444,4.36,0.889,-5.7,0.444,-14.73,0.889,8.39]},{"time":1.3333,"x":-5.7,"y":8.39,"curve":[1.778,-5.7,2.222,4.36,1.778,8.39,2.222,-14.73]},{"time":2.6667,"x":4.36,"y":-14.73}]},"qianfa09":{"translate":[{"curve":[0.444,0,0.889,21.55,0.444,0,0.889,14.87]},{"time":1.3333,"x":21.55,"y":14.87,"curve":[1.778,21.55,2.222,0,1.778,14.87,2.222,0]},{"time":2.6667}]},"qiang04":{"scale":[{"x":0.969,"curve":[0.444,0.969,0.889,1.178,0.444,1,0.889,1]},{"time":1.3333,"x":1.178,"curve":[1.778,1.178,2.222,0.969,1.778,1,2.222,1]},{"time":2.6667,"x":0.969}]},"qiang013":{"scale":[{"x":1.002,"curve":[0.114,0.983,0.224,0.969,0.114,1,0.224,1]},{"time":0.3333,"x":0.969,"curve":[0.778,0.969,1.222,1.178,0.778,1,1.222,1]},{"time":1.6667,"x":1.178,"curve":[2.001,1.178,2.333,1.058,2.001,1,2.333,1]},{"time":2.6667,"x":1.002}]},"qiang014":{"scale":[{"x":1.145,"curve":[0.336,1.085,0.668,0.969,0.336,1,0.668,1]},{"time":1,"x":0.969,"curve":[1.444,0.969,1.889,1.178,1.444,1,1.889,1]},{"time":2.3333,"x":1.178,"curve":[2.446,1.178,2.556,1.164,2.446,1,2.556,1]},{"time":2.6667,"x":1.145}]},"fuzhou4":{"translate":[{"curve":[0.444,0,0.889,-2.16,0.444,0,0.889,-3.36]},{"time":1.3333,"x":-2.16,"y":-3.36,"curve":[1.778,-2.16,2.222,0,1.778,-3.36,2.222,0]},{"time":2.6667}],"scale":[{"curve":[0.444,1,0.889,1.064,0.444,1,0.889,1]},{"time":1.3333,"x":1.064,"curve":[1.778,1.064,2.222,1,1.778,1,2.222,1]},{"time":2.6667}],"shear":[{"x":-1.94,"y":4.16,"curve":[0.444,-1.94,0.889,3.57,0.444,4.16,0.889,-8.07]},{"time":1.3333,"x":3.57,"y":-8.07,"curve":[1.778,3.57,2.222,-1.94,1.778,-8.07,2.222,4.16]},{"time":2.6667,"x":-1.94,"y":4.16}]},"fuzhou5":{"translate":[{"x":2.16,"y":-0.43,"curve":[0.114,0.92,0.224,0,0.114,-0.19,0.224,0]},{"time":0.3333,"curve":[0.778,0,1.222,13.5,0.778,0,1.222,-2.71]},{"time":1.6667,"x":13.5,"y":-2.71,"curve":[2.001,13.5,2.333,5.78,2.001,-2.71,2.333,-1.16]},{"time":2.6667,"x":2.16,"y":-0.43}],"scale":[{"x":1.01,"y":1.003,"curve":[0.114,1.004,0.224,1,0.114,1.001,0.224,1]},{"time":0.3333,"curve":[0.778,1,1.222,1.064,0.778,1,1.222,1.019]},{"time":1.6667,"x":1.064,"y":1.019,"curve":[2.001,1.064,2.333,1.027,2.001,1.019,2.333,1.008]},{"time":2.6667,"x":1.01,"y":1.003}],"shear":[{"x":-1.06,"y":2.2,"curve":[0.114,-1.57,0.224,-1.94,0.114,3.32,0.224,4.16]},{"time":0.3333,"x":-1.94,"y":4.16,"curve":[0.778,-1.94,1.222,3.57,0.778,4.16,1.222,-8.07]},{"time":1.6667,"x":3.57,"y":-8.07,"curve":[2.001,3.57,2.333,0.41,2.001,-8.07,2.333,-1.07]},{"time":2.6667,"x":-1.06,"y":2.2}]},"fuzhou6":{"translate":[{"x":9.42,"y":-2.48,"curve":[0.336,6.25,0.668,0,0.336,-1.65,0.668,0]},{"time":1,"curve":[1.444,0,1.889,11.22,1.444,0,1.889,-2.96]},{"time":2.3333,"x":11.22,"y":-2.96,"curve":[2.446,11.22,2.556,10.47,2.446,-2.96,2.556,-2.76]},{"time":2.6667,"x":9.42,"y":-2.48}],"scale":[{"x":1.054,"y":1.102,"curve":[0.336,1.036,0.668,1,0.336,1.067,0.668,1]},{"time":1,"curve":[1.444,1,1.889,1.064,1.444,1,1.889,1.121]},{"time":2.3333,"x":1.064,"y":1.121,"curve":[2.446,1.064,2.556,1.06,2.446,1.121,2.556,1.113]},{"time":2.6667,"x":1.054,"y":1.102}],"shear":[{"x":2.68,"y":-6.11,"curve":[0.336,1.13,0.668,-1.94,0.336,-2.66,0.668,4.16]},{"time":1,"x":-1.94,"y":4.16,"curve":[1.444,-1.94,1.889,3.57,1.444,4.16,1.889,-8.07]},{"time":2.3333,"x":3.57,"y":-8.07,"curve":[2.446,3.57,2.556,3.2,2.446,-8.07,2.556,-7.25]},{"time":2.6667,"x":2.68,"y":-6.11}]}}}},"extra":{"qianfa02":{"rootBoneName":"qianfa02","endBoneName":"","animation":{"default":{"name":"default","mode":1,"rotateCenter":0,"rotateTime":2.67,"rotateRange":3,"rotateOffset":0.4,"childOffset":0.25,"spring":0,"affectByLevel":0.8,"springLevel":0}}},"qianfa018":{"rootBoneName":"qianfa018","endBoneName":"","animation":{"default":{"name":"default","mode":1,"rotateCenter":0,"rotateTime":2.67,"rotateRange":3,"rotateOffset":0.3,"childOffset":0.25,"spring":0,"affectByLevel":0.8,"springLevel":0}}},"qianfa014":{"rootBoneName":"qianfa014","endBoneName":"","animation":{"default":{"name":"default","mode":1,"rotateCenter":0,"rotateTime":2.67,"rotateRange":2,"rotateOffset":0.2,"childOffset":0.25,"spring":0,"affectByLevel":0.8,"springLevel":0}}},"qianfa08":{"rootBoneName":"qianfa08","endBoneName":"","animation":{"default":{"name":"default","mode":1,"rotateCenter":-1,"rotateTime":2.67,"rotateRange":0.7,"rotateOffset":0,"childOffset":0.43,"spring":0,"affectByLevel":1,"springLevel":0}}},"fuzhou4":{"rootBoneName":"fuzhou4","endBoneName":"","animation":{"default":{"name":"default","mode":1,"rotateCenter":-3,"rotateTime":2.67,"rotateRange":4,"rotateOffset":0,"childOffset":0.5,"spring":0,"affectByLevel":0.7,"springLevel":0}}},"qianfa022":{"rootBoneName":"qianfa022","endBoneName":"","animation":{"default":{"name":"default","mode":1,"rotateCenter":-1,"rotateTime":2.67,"rotateRange":5,"rotateOffset":10.75,"childOffset":0.45,"spring":0,"affectByLevel":0.6,"springLevel":0}}},"qianfa026":{"rootBoneName":"qianfa026","endBoneName":"","animation":{"default":{"name":"default","mode":1,"rotateCenter":-4,"rotateTime":2.67,"rotateRange":5,"rotateOffset":11.4,"childOffset":0.45,"spring":0,"affectByLevel":0.8,"springLevel":0}}},"qiang04":{"rootBoneName":"qiang04","endBoneName":"","animation":{"default":{"name":"default","mode":1,"rotateCenter":0,"rotateTime":2.67,"rotateRange":1,"rotateOffset":0,"childOffset":0.65,"spring":0,"affectByLevel":0.8,"springLevel":0}}}}}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>stats</title>
      <link href="/stats/index.html"/>
      <url>/stats/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>标签</title>
      <link href="/tags/index.html"/>
      <url>/tags/index.html</url>
      
        <content type="html"><![CDATA[<!-- "data-length" = how many tags to show, default 10 --><!-- <div id="tags-chart" data-length="20" class="js-pjax"></div> -->]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>工具</title>
      <link href="/tools/index.html"/>
      <url>/tools/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>原神</title>
      <link href="/Gallery/genshin/index.html"/>
      <url>/Gallery/genshin/index.html</url>
      
        <content type="html"><![CDATA[<div class="fj-gallery"><p><img src="http://cdn-ali-img-shstaticbz.shanhutech.cn/bizhi/staticwp/202208/6344076dae411b431846a960c67c42d1--395853005.jpg" alt=""></p>          </div>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>MINECRAFT</title>
      <link href="/Gallery/minecraft/index.html"/>
      <url>/Gallery/minecraft/index.html</url>
      
        <content type="html"><![CDATA[<div class="fj-gallery"><p><img src="https://w.wallhaven.cc/full/eo/wallhaven-eo2k68.jpg" alt=""></p>          </div>]]></content>
      
    </entry>
    
    
  
</search>
