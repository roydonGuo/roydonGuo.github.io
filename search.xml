<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>HTML5</title>
      <link href="/posts/HTML5.html"/>
      <url>/posts/HTML5.html</url>
      
        <content type="html"><![CDATA[<h1 id="一、基础认识"><a href="#一、基础认识" class="headerlink" title="一、基础认识"></a>一、基础认识</h1><p>浏览器：网页运行，显示平台、五大浏览器</p><p><img src="https://img-blog.csdnimg.cn/da2e72992a5440a9818bbf59ded2bf8a.png#pic_center" alt="在这里插入图片描述"></p><p>浏览器渲染引擎</p><p><img src="https://img-blog.csdnimg.cn/fba5618d57d643b39972dfec6470566f.png#pic_center" alt="在这里插入图片描述"></p><p>不同浏览器遵循一个Web标准</p><p><img src="https://img-blog.csdnimg.cn/1b401de747764ce3ac9002a840c983ff.png#pic_center" alt="在这里插入图片描述"></p><h1 id="二、HTML"><a href="#二、HTML" class="headerlink" title="二、HTML"></a>二、HTML</h1><p>(Hyper Text Markup Lanuage)&#x3D;&#x3D;&gt;超文本标记语言</p><p>注释：</p><!--  --><p>标签：</p><ul><li><p>双标签：</p><p>eg：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">strong</span>&gt;</span>自体加粗<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>单标签：不可包裹内容</p></li></ul><h2 id="排版标签"><a href="#排版标签" class="headerlink" title="排版标签"></a>排版标签</h2><p>标题标签：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>一级标题<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>二级标题<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">。。。。。</span><br><span class="line"><span class="tag">&lt;<span class="name">h6</span>&gt;</span>六级标题<span class="tag">&lt;/<span class="name">h6</span>&gt;</span></span><br></pre></td></tr></table></figure><p>段落标签：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>段落内容。。。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><p>若(。・・)ノvsCode段落标签中内容过多，可<code>ALT + Z</code>自动换行</p><p>换行标签：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br></pre></td></tr></table></figure><p>水平线标签：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="文本格式化标签"><a href="#文本格式化标签" class="headerlink" title="文本格式化标签"></a>文本格式化标签</h2><p><img src="https://img-blog.csdnimg.cn/39c2e328f27142bdab51149031943383.png#pic_center" alt="在这里插入图片描述"></p><h2 id="媒体标签"><a href="#媒体标签" class="headerlink" title="媒体标签"></a>媒体标签</h2><p>图片标签：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;路径&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;替换文本（src失效显示）&quot;</span> <span class="attr">title</span>=<span class="string">&quot;鼠标悬停提示文本&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p>更多属性：width、height（只设置一个会保持原图比例，两个都设置自定义图片比例）</p><blockquote><p>路径：</p><ol><li>相对路径：（当前文件）</li></ol><ul><li>同级文件：<img src="https://img-blog.csdnimg.cn/7a75edb601da4909b94dc6ad613de8c4.png#pic_center" alt="在这里插入图片描述"></li></ul></blockquote><blockquote><ul><li>引用下级文件：<img src="https://img-blog.csdnimg.cn/b0eac75407a74332a4364be40a158fa0.png#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/f6b096de06944cc2baf340dc0286048d.png#pic_center" alt="在这里插入图片描述">或<code>&lt;img src=&quot;./images/图片.jpg&quot;&gt;</code></li></ul></blockquote><blockquote><ul><li>引用上级文件：<code>&lt;img src=&quot;../目标文件.gif&quot;&gt;</code></li></ul><ol start="2"><li>绝对路径：</li></ol><p>目录下的绝对位置，可直接到达目标位置，通常&#x3D;&#x3D;从盘符开始&#x3D;&#x3D;的路径</p><p><img src="https://img-blog.csdnimg.cn/6877a19463d7490ea3720c49db0f1289.png#pic_center" alt="在这里插入图片描述"></p></blockquote><p>音频标签（双标签）：</p><p><img src="https://img-blog.csdnimg.cn/673fd4e81398406a98d7122f6f7b3e25.png#pic_center" alt="在这里插入图片描述"></p><p>常见属性：<br><img src="https://img-blog.csdnimg.cn/d3be733e7aaf405b8638a7f8cfe707cd.png#pic_center" alt="在这里插入图片描述"></p><p><img src="https://img-blog.csdnimg.cn/c0a37b2004d847088f66c13ce3a01583.png#pic_center" alt="在这里插入图片描述"></p><p>目前此标签支支持三种格式：&#x3D;&#x3D;MP3、Wav、Ogg&#x3D;&#x3D;</p><p>视频标签：（常见属性见音频标签）</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">video</span> <span class="attr">src</span>=<span class="string">&quot;&quot;</span> <span class="attr">controls</span>&gt;</span><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/ecb24a5d5e8848a1a28985a0a2335cf3.png#pic_center" alt="在这里插入图片描述"></p><p><img src="https://img-blog.csdnimg.cn/c426ec70fc76450eb52ba251a86a8a6e.png#pic_center" alt="在这里插入图片描述"></p><h2 id="连接标签"><a href="#连接标签" class="headerlink" title="连接标签"></a>连接标签</h2><p><img src="https://img-blog.csdnimg.cn/f15e613158d04fe0a80bdb6fab74abc5.png#pic_center" alt="在这里插入图片描述"></p><p>href&#x3D;”#”表示空链接，还没有确定目标页面</p><p>属性：</p><ul><li>target：（打开网页的形式）</li></ul><p><img src="https://img-blog.csdnimg.cn/7e55eb2acd7c4e898ee9efe9d818ccd1.png#pic_center" alt="在这里插入图片描述"></p><p><img src="https://img-blog.csdnimg.cn/c1c1b90c77ae4ae7b7c89e2db1d156dc.png#pic_center" alt="在这里插入图片描述"></p><h2 id="列表标签"><a href="#列表标签" class="headerlink" title="列表标签"></a>列表标签</h2><p>无序(点)，有序(序号)，自定义列表</p><p><img src="https://img-blog.csdnimg.cn/66615d8a069c42a4a1f89eaf9c8af15f.png#pic_center" alt="在这里插入图片描述"></p><h3 id="无序列表"><a href="#无序列表" class="headerlink" title="无序列表"></a>无序列表</h3><p><img src="https://img-blog.csdnimg.cn/3868dbcbf9fb46fbbbf32f1a3f41531e.png#pic_center" alt="在这里插入图片描述"></p><h3 id="有序列表"><a href="#有序列表" class="headerlink" title="有序列表"></a>有序列表</h3><p><img src="https://img-blog.csdnimg.cn/232109ebbbfa4ecd9aac6de03ff9c308.png#pic_center" alt="在这里插入图片描述"></p><h3 id="自定义列表"><a href="#自定义列表" class="headerlink" title="自定义列表"></a>自定义列表</h3><p><img src="https://img-blog.csdnimg.cn/9c51d22c54c1452ca0632c555f7401cb.png#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/cb100e2355224b089e2de98d48752de7.png#pic_center" alt="在这里插入图片描述"></p><p><img src="https://img-blog.csdnimg.cn/b20ef47781264e388eac413a76eeed37.png#pic_center" alt="在这里插入图片描述"></p><h3 id="表格"><a href="#表格" class="headerlink" title="表格"></a>表格</h3><p><img src="https://img-blog.csdnimg.cn/ce5dcfdae3bd4b4b91e4fda0c77947d6.png#pic_center" alt="在这里插入图片描述"></p><p>标题标签<th>，caption表格大标题</p><p>常见属性：</p><p><img src="https://img-blog.csdnimg.cn/1284e314ea03454c8d5e45ef9478a6c4.png#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/08d4024e71de48e4b744c3f0f3ccccf8.png#pic_center" alt="在这里插入图片描述"></p><p><img src="https://img-blog.csdnimg.cn/0a80af9a27164fba8c4f49b71b68882f.png#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/6c5673b1f0dd47e1844f1ce5efcd4f7c.png#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/a32f77ef9d8f46578c537fdac9cd2bd1.png#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/f3cf44cf323a4c919ab0ea5057bda74c.png#pic_center" alt="在这里插入图片描述"></p><h2 id="表单标签"><a href="#表单标签" class="headerlink" title="表单标签"></a>表单标签</h2><p><img src="https://img-blog.csdnimg.cn/f9dbce3af58f4424b5ae979dd116b788.png#pic_center" alt="在这里插入图片描述"></p><h3 id="input"><a href="#input" class="headerlink" title="input"></a>input</h3><p><img src="https://img-blog.csdnimg.cn/2927d31fbff24502aff27f3449637875.png#pic_center" alt="在这里插入图片描述"></p><p>常用属性：</p><p><img src="https://img-blog.csdnimg.cn/495cb7b91b9d4b5b8370030799f0f15a.png#pic_center" alt="在这里插入图片描述"></p><p>单选功能：</p><p><img src="https://img-blog.csdnimg.cn/7a8385061d504c87b143abc517dfeced.png#pic_center" alt="在这里插入图片描述"></p><p>checked默认选中（也适用于多选）</p><p>文件上传功能：多文件上传属性：multiple</p><p>按钮功能：需要在同一域下<code>&lt;form&gt;&lt;/form&gt;</code><br><img src="https://img-blog.csdnimg.cn/d9f3cafa64c7437094117dd37ee83e0a.png#pic_center" alt="在这里插入图片描述"></p><p>按钮加value属性，显示按钮文字显示</p><h3 id="button"><a href="#button" class="headerlink" title="button"></a>button</h3><p>(双标签)</p><p><img src="https://img-blog.csdnimg.cn/80636e22f15e4ab7aeee17a7aa33e338.png#pic_center" alt="在这里插入图片描述"></p><h3 id="select"><a href="#select" class="headerlink" title="select"></a>select</h3><p>下拉菜单，selected默认选中<br><img src="https://img-blog.csdnimg.cn/47e52ed9bc3447848b27b6cdde58287f.png#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/f1f2a524622b49f5a2e37f17c519f956.png#pic_center" alt="在这里插入图片描述"></p><h3 id="textarea"><a href="#textarea" class="headerlink" title="textarea"></a>textarea</h3><p>文本域标签，（简介输入框）<br><img src="https://img-blog.csdnimg.cn/ff76e3e1e47d4a17a1e3239e7fdd68d2.png#pic_center" alt="在这里插入图片描述"></p><p>实际开发会使用CSS</p><h3 id="label"><a href="#label" class="headerlink" title="label"></a>label</h3><p>场景：不止点按钮触发，点按钮对应的文字也会触发<br><img src="https://img-blog.csdnimg.cn/d89600bdf66748909bb92f630c1162d2.png#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/553acd7ce3674a85a89c705ff62d8853.png#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/e8216efb2cac4e998c49205aab75ac39.png#pic_center" alt="在这里插入图片描述"></p><h2 id="语义化标签"><a href="#语义化标签" class="headerlink" title="语义化标签"></a>语义化标签</h2><h3 id="无语义布局标签"><a href="#无语义布局标签" class="headerlink" title="无语义布局标签"></a>无语义布局标签</h3><p><img src="https://img-blog.csdnimg.cn/fd4d4c3729824ef7905b7ff9a6749e2d.png#pic_center" alt="在这里插入图片描述"></p><h3 id="有语义布局标签"><a href="#有语义布局标签" class="headerlink" title="有语义布局标签"></a>有语义布局标签</h3><p>html5新版本加入，和<code>&lt;div&gt;</code>一致<br><img src="https://img-blog.csdnimg.cn/2bdd7306db0f4854acb4056f62b6b66a.png#pic_center" alt="在这里插入图片描述"><img src="https://img-blog.csdnimg.cn/8422842bd9dd44c1950eda708abeddee.png#pic_center" alt="在这里插入图片描述"></p><h2 id="字符实体"><a href="#字符实体" class="headerlink" title="字符实体"></a>字符实体</h2><p><img src="https://img-blog.csdnimg.cn/b933b4ca88eb4be58b5149c7a49973f9.png#pic_center" alt="在这里插入图片描述"></p><hr><p><a href="https://www.bilibili.com/video/BV1Kg411T7t9?p=43&spm_id_from=pageDriver&vd_source=616a9dd528080cf576646147166fe033">表格案例</a></p><p><a href="https://www.bilibili.com/video/BV1Kg411T7t9?p=44&spm_id_from=pageDriver&vd_source=616a9dd528080cf576646147166fe033">表单案例</a></p><hr><h1 id=""><a href="#" class="headerlink" title=""></a></h1>]]></content>
      
      
      
        <tags>
            
            <tag> HTML </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>简易的安卓天气app(四)——搜索城市、完善页面</title>
      <link href="/posts/004.html"/>
      <url>/posts/004.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>✅<a href="https://blog.csdn.net/m0_51390535/article/details/125302624?spm=1001.2014.3001.5502">简易的安卓天气app(一)——解析Json数据、数据类封装</a><br>✅<a href="https://blog.csdn.net/m0_51390535/article/details/125350399?spm=1001.2014.3001.5502">简易的安卓天气app(二)——适配器、每小时数据展示</a><br>✅<a href="https://blog.csdn.net/m0_51390535/article/details/125362820?spm=1001.2014.3001.5502">简易的安卓天气app(三)——城市管理、数据库操作</a><br>📌<a href="https://blog.csdn.net/m0_51390535/article/details/125397512?spm=1001.2014.3001.5502">简易的安卓天气app(四)——搜索城市、完善页面</a></p></blockquote><h1 id="需求🏷️"><a href="#需求🏷️" class="headerlink" title="需求🏷️"></a>需求🏷️</h1><p>前三篇重要的功能已经实现的差不多了，完成了api获取数据，封装数据，展示数据，和一些数据库操作，接着就是按照自己的意愿，搜索城市，查看此城市天气，并决定将此城市加入数据库操作，方法是尽可能地简化的，本次项目共涉及三个页面之间的跳转，逻辑清晰，条理明朗，后续更多复杂化操作，和更多重复性操作有待探索，本质上都是已有代码的延申。<br>先获取到全国各个城市的信息，展示在搜索城市页面，方便查找。<br>实现步骤：</p><ol><li>AutoCompleteTextView输入提示文本框</li><li>实现读取全部城市展示</li><li>搜索框搜索指定城市</li></ol><p>实现效果：<br><img src="https://img-blog.csdnimg.cn/1daeeee9ec194ef8bc751f68fdfc5b8a.gif#pic_center" alt="gif"></p><h1 id="涉及内容"><a href="#涉及内容" class="headerlink" title="涉及内容"></a>涉及内容</h1><ul><li>AutoCompleteTextView输入提示文本框</li><li>文件读取，Json数据封装，RecyclerView数据展示</li><li>根据城市名称刷新天气</li></ul><h1 id="项目结构"><a href="#项目结构" class="headerlink" title="项目结构"></a>项目结构</h1><p><img src="https://img-blog.csdnimg.cn/ba7f393616774876bfecf8394e4a7cdd.png#pic_center" alt="2">此文为项目开发第四篇文章，故前面文章已经讲完一部分内容，想了解详细步骤移步页首，每一篇文章都已经给出独立源码，可自行根据需要模拟；；</p><h1 id="界面设计"><a href="#界面设计" class="headerlink" title="界面设计"></a>界面设计</h1><p>搜索页面设计：<br><img src="https://img-blog.csdnimg.cn/2d3bd218d46a424bbc488527b9d79ed3.png#pic_center" alt="4">大概就是三层的线性布局：<br>第一层TextView接受主页面传进来的当前天气的城市名称。<br>第二层就是一个搜索框，使用到的是AutoCompleteTextView，带有提示信息的输入框，EditView也可以，右边搜索图标设置点击监听事件。<br>第三层就是一个RecyclerView展示全部城市名称，也可以设置点击事件监听，或者输入框输入，此处作为提示出现，都是可行方案</p><p>搜索城市页面输入框代码：<br>输入框AutoCompleteTextView此次用到的属性：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">android:completionThreshold=&quot;1&quot; //输入一个字符就给出提示</span><br><span class="line">android:dropDownHorizontalOffset：//提示菜单与文本起始的水平间距</span><br><span class="line">android:dropDownHeight：//设置提示框的高度，太小可能会遮盖部分提示，不过可以上下滚动显示</span><br><span class="line">android:dropDownWidth：//设置提示框的宽度，太小可能会遮盖部分提示</span><br><span class="line">android:imeOptions=&quot;actionSearch&quot; //键盘点击搜索事件</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">       <span class="attr">android:layout_width</span>=<span class="string">&quot;380dp&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">android:layout_height</span>=<span class="string">&quot;40dp&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">android:gravity</span>=<span class="string">&quot;center_vertical&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">android:background</span>=<span class="string">&quot;@drawable/blackground&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">           <span class="attr">android:layout_width</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">           <span class="attr">android:layout_height</span>=<span class="string">&quot;30dp&quot;</span></span></span><br><span class="line"><span class="tag">           <span class="attr">android:layout_marginRight</span>=<span class="string">&quot;12dp&quot;</span></span></span><br><span class="line"><span class="tag">           <span class="attr">android:layout_weight</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">           <span class="attr">android:gravity</span>=<span class="string">&quot;center_vertical&quot;</span></span></span><br><span class="line"><span class="tag">           <span class="attr">android:paddingLeft</span>=<span class="string">&quot;12dp&quot;</span></span></span><br><span class="line"><span class="tag">           <span class="attr">android:paddingRight</span>=<span class="string">&quot;12dp&quot;</span>&gt;</span></span><br><span class="line">           <span class="comment">&lt;!--输入框--&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">AutoCompleteTextView</span></span></span><br><span class="line"><span class="tag">               <span class="attr">android:id</span>=<span class="string">&quot;@+id/edit_query&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">android:layout_weight</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">android:background</span>=<span class="string">&quot;@null&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">android:completionThreshold</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">android:dropDownHorizontalOffset</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">android:dropDownWidth</span>=<span class="string">&quot;200dp&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">android:hint</span>=<span class="string">&quot;请输入城市名称&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">android:imeOptions</span>=<span class="string">&quot;actionSearch&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">android:paddingLeft</span>=<span class="string">&quot;8dp&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">android:paddingRight</span>=<span class="string">&quot;4dp&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">android:textColor</span>=<span class="string">&quot;@color/white&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">android:singleLine</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">android:textSize</span>=<span class="string">&quot;18sp&quot;</span> /&gt;</span></span><br><span class="line">           <span class="comment">&lt;!--搜索图标--&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">               <span class="attr">android:layout_width</span>=<span class="string">&quot;26dp&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">android:layout_height</span>=<span class="string">&quot;26dp&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">android:id</span>=<span class="string">&quot;@+id/iv_search&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">android:src</span>=<span class="string">&quot;@mipmap/icon_search&quot;</span> /&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><p>输入城市显示提示文本：<br><img src="https://img-blog.csdnimg.cn/b6ced96ab0884a2ca50f0a0685e8d9cb.png#pic_center" alt="5"></p><h1 id="省、城市数据类封装"><a href="#省、城市数据类封装" class="headerlink" title="省、城市数据类封装"></a>省、城市数据类封装</h1><p>既然需求中需要输入一个字就给出相关城市提示信息，那么就要有全部城市数据，才能以此为根据提示城市名称，由于获取全国全部城市的API太难找，而且免费版的还有使用上限，所以此处直接根据文件读取，并封装。前几篇文章由于网络请求api封装用到的是Gson第三方工具，也提到了使用JsonObject等封装，所以此文会使用JsonArray，JsonObject来进行Json数据封装。<br>给出的City.txt文件放在main文件夹下的assets文件夹(res同级)下<img src="https://img-blog.csdnimg.cn/8f5ce60f799e4b57870edc23d49bcb69.png#pic_center" alt="6">里面给出的就是全国省份，各省下辖市，以及市下的区和县。<br>例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">[&#123;</span><br><span class="line"><span class="string">&quot;pname&quot;</span>: <span class="string">&quot;北京市&quot;</span>,</span><br><span class="line"><span class="string">&quot;city&quot;</span>: [&#123;</span><br><span class="line"><span class="string">&quot;name&quot;</span>: <span class="string">&quot;北京市&quot;</span>,</span><br><span class="line"><span class="string">&quot;area&quot;</span>: [</span><br><span class="line"><span class="string">&quot;东城区&quot;</span>,</span><br><span class="line"><span class="string">&quot;西城区&quot;</span>,</span><br><span class="line">.........</span><br><span class="line">]</span><br><span class="line">&#125;]</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line"><span class="string">&quot;pname&quot;</span>: <span class="string">&quot;天津市&quot;</span>,</span><br><span class="line"><span class="string">&quot;city&quot;</span>: [&#123;</span><br><span class="line"><span class="string">&quot;name&quot;</span>: <span class="string">&quot;天津市&quot;</span>,</span><br><span class="line"><span class="string">&quot;area&quot;</span>: [</span><br><span class="line"><span class="string">&quot;和平区&quot;</span>,</span><br><span class="line"><span class="string">&quot;河东区&quot;</span>,</span><br><span class="line">.........</span><br><span class="line">]</span><br><span class="line">&#125;]</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line"><span class="string">&quot;pname&quot;</span>: <span class="string">&quot;河北省&quot;</span>,</span><br><span class="line"><span class="string">&quot;city&quot;</span>: [&#123;</span><br><span class="line"><span class="string">&quot;name&quot;</span>: <span class="string">&quot;石家庄市&quot;</span>,</span><br><span class="line"><span class="string">&quot;area&quot;</span>: [</span><br><span class="line"><span class="string">&quot;长安区&quot;</span>,</span><br><span class="line"><span class="string">&quot;桥西区&quot;</span>,</span><br><span class="line">.........</span><br><span class="line">]</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line"><span class="string">&quot;name&quot;</span>: <span class="string">&quot;唐山市&quot;</span>,</span><br><span class="line"><span class="string">&quot;area&quot;</span>: [</span><br><span class="line"><span class="string">&quot;路北区&quot;</span>,</span><br><span class="line"><span class="string">&quot;路南区&quot;</span>,</span><br><span class="line">.........</span><br><span class="line">]</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line"><span class="string">&quot;name&quot;</span>: <span class="string">&quot;秦皇岛市&quot;</span>,</span><br><span class="line"><span class="string">&quot;area&quot;</span>: [</span><br><span class="line"><span class="string">&quot;海港区&quot;</span>,</span><br><span class="line"><span class="string">&quot;山海关区&quot;</span>,</span><br><span class="line">.........</span><br><span class="line">]</span><br><span class="line">&#125;,</span><br><span class="line">.........</span><br></pre></td></tr></table></figure><blockquote><p>前往下面地址自取(永久有效):<br>1.百度网盘：<a href="https://pan.baidu.com/s/1y8Gy4YDKTPZGJ05mY2ShVw?pwd=mnmp">City.txt</a></p><ul><li>提取码：mnmp</li></ul><p>2.阿里云盘：<a href="https://www.aliyundrive.com/s/2UkVwXQuw5u">City.txt</a></p><ul><li>提取码:<strong>su08</strong></li></ul></blockquote><p>前往<a href="https://www.json.cn/">json在线解析网站</a>观察此文件结构</p><ol><li>先观察省，此处就以北京和天津为例，前面文章也提到了观察法，先是一个中括号”[“括住了全部省份，每个省份都是一个Object对象(大括号”{“阔了起来)。</li><li>再观察市，每个省里面的city属性名表示此省下辖的市，也是”[“包裹起来，表示是个数组，里面包含了省下全部市的信息(包括name市名称，area数组：区&#x2F;县)，这里就解析到各个城市，因为套法一样。<br><img src="https://img-blog.csdnimg.cn/cde53d3528ff4c8e8487ee40dec07d23.png#pic_center" alt="6">接着就是封装（连带着省份也一起封装吧），需要两个数据类，因为只封装到各个省下的城市。<br><img src="https://img-blog.csdnimg.cn/b0b4a12d7a9f420eabe6f3d5b9aaa989.png" alt="7"><br>ProvinceBean封装省份名称pname和市city，市是集合List</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProvinceBean</span> &#123;<span class="comment">//省</span></span><br><span class="line">    <span class="keyword">private</span> String pname;</span><br><span class="line">    <span class="keyword">private</span> List&lt;CityBean&gt; city;</span><br><span class="line"><span class="comment">//set、get、toString、构造。。。。。。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>CityBean封装市名称name和区&#x2F;县area，县是数组String[]</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CityBean</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String[] area;<span class="comment">//县/区</span></span><br><span class="line">    <span class="keyword">private</span> String tem;<span class="comment">//方便数据库操作</span></span><br><span class="line">    <span class="keyword">private</span> String updateTime;<span class="comment">//方便数据库操作</span></span><br><span class="line">    <span class="comment">//set、get、toString、构造。。。。。。</span></span><br></pre></td></tr></table></figure><h1 id="Json数据解析"><a href="#Json数据解析" class="headerlink" title="Json数据解析"></a>Json数据解析</h1><p>接着就是从文件City.txt读取信息<br>下面是读取方法</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> getResources().getAssets().open(<span class="string">&quot;City.txt&quot;</span>);</span><br><span class="line"><span class="type">BufferedReader</span> <span class="variable">bufferedReader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(inputStream));</span><br><span class="line"><span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line"><span class="type">String</span> <span class="variable">lines</span> <span class="operator">=</span> bufferedReader.readLine();</span><br><span class="line"><span class="keyword">while</span> (lines != <span class="literal">null</span>) &#123;</span><br><span class="line">sb.append(lines);</span><br><span class="line">lines = bufferedReader.readLine();</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">String</span> <span class="variable">resultCity</span> <span class="operator">=</span> sb.toString();</span><br><span class="line">Log.d(<span class="string">&quot;SelectCity&quot;</span>, <span class="string">&quot;resultCity&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&quot;</span> + resultCity);</span><br></pre></td></tr></table></figure><p>控制台显示(原txt有空格和换行，这样的格式很正常)：<img src="https://img-blog.csdnimg.cn/5eac5c344a7044ddbfd165e69e3b3ff9.png" alt="7">然后得到了一个字符串resultCity ，接着就是根据resultCity 进行数据封装</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">JSONArray ja= <span class="keyword">new</span> <span class="title class_">JSONArray</span>(resultCity);</span><br><span class="line"><span class="comment">//获取省，封装</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; ja.length(); i++) &#123;<span class="comment">//这个长度就是省的个数</span></span><br><span class="line"><span class="type">JSONObject</span> <span class="variable">provinceJsonObject</span> <span class="operator">=</span> ja.getJSONObject(i);</span><br><span class="line"><span class="type">String</span> <span class="variable">provinceName</span> <span class="operator">=</span> provinceJsonObject.getString(<span class="string">&quot;pname&quot;</span>);</span><br><span class="line"><span class="type">ProvinceBean</span> <span class="variable">provinceBean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ProvinceBean</span>();</span><br><span class="line">provinceBean.setPname(provinceName);</span><br><span class="line">mProvinceBeanList.add(provinceBean);</span><br><span class="line"><span class="comment">//添加市,也可以用省里封装的List&lt;CityBean&gt;，直接set，以后不免用到CityBean，就1并封装了</span></span><br><span class="line"><span class="type">JSONArray</span> <span class="variable">cityArray</span> <span class="operator">=</span> provinceJsonObject.getJSONArray(<span class="string">&quot;city&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; cityArray.length(); j++) &#123;</span><br><span class="line"><span class="type">JSONObject</span> <span class="variable">cityObj</span> <span class="operator">=</span> cityArray.getJSONObject(j);</span><br><span class="line"><span class="type">String</span> <span class="variable">cityName</span> <span class="operator">=</span> cityObj.getString(<span class="string">&quot;name&quot;</span>);</span><br><span class="line"><span class="type">CityBean</span> <span class="variable">cityBean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CityBean</span>();</span><br><span class="line">cityBean.setName(cityName);</span><br><span class="line">mCityBeanList.add(cityBean);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 添加区/县待拓展。。。。。。。。。</span></span><br><span class="line">&#125;</span><br><span class="line">Log.d(<span class="string">&quot;SelectCity&quot;</span>, <span class="string">&quot;mCityBeanList&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&quot;</span> + mCityBeanList.toString());</span><br></pre></td></tr></table></figure><p>到此省和市的数据就已经封装好了，可以查看控制台，发现area&#x3D;null，因为用不到此数据，就没有对area进行封装，需要封装直接cityBean.set完事，没有难度。</p><p>数据解析封装好，就是设置适配器，既然用到RecyclerView展示城市，那么城市的适配器就得写，毕竟封装好的城市数据不是String数组，是一个集合，为了规范(凑复杂度)直接写适配器吧（<em>List转成String数组就可以不用写适配器，直接用ArrayAdapter</em>）。</p><p><strong>CityAdapter</strong>适配器：</p><p>前面文章提到过，略过过了就，，</p><blockquote><p>指路&#x3D;&#x3D;&gt;适配器写法：<br><a href="https://blog.csdn.net/m0_51390535/article/details/125350399?spm=1001.2014.3001.5502">简易的安卓天气app(二)——适配器、每小时数据展示</a><br>根据目录<code>适配器HourWeatherAdapter</code>索引</p></blockquote><p>&#x2F;**<strong>也可以在此适配器添加点击事件，拿到天气，此方法<a href="https://blog.csdn.net/m0_51390535/article/details/125362820?spm=1001.2014.3001.5502">前面文章</a>(根据目录<code>适配器AddCityAdapter</code>索引)也提到过，此处略过</strong>&#x2F;</p><h1 id="SelectCityActivity-java"><a href="#SelectCityActivity-java" class="headerlink" title="SelectCityActivity.java"></a>SelectCityActivity.java</h1><h2 id="搜索框"><a href="#搜索框" class="headerlink" title="搜索框"></a>搜索框</h2><p>搜索城市页面首先我们来设计搜索框输入文字提示框，首先，我们已经在xml布局中运用了<strong>AutoCompleteTextView</strong>，会自动根据输入的一个字匹配传入的值，有就显示提示，如下，这个弹出提示框其实是可以自定义样式的，这里就用默认了。后续会更新，适配器也是安卓提供的ArrayAdapter，传入的是全国所有市的String[]数组。<br><img src="https://img-blog.csdnimg.cn/48d810a0a0ef41ed9db33808387b3ab6.png" alt="8"><br>现在，先在SelectCityActivity.java中定义AutoCompleteTextView；<br><code>private AutoCompleteTextView query;</code><br>然后绑定组件</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">query = (AutoCompleteTextView) findViewById(R.id.edit_query);</span><br></pre></td></tr></table></figure><p>接着就是设置一个<strong>ArrayAdapter</strong>适配器，里面设置样式为<strong>android.R.layout.simple_list_item_1</strong>安卓提供的样式，就是简单的白框，然后传入城市的数组；<br>在此之前，这个城市数组还得定义好，前面Json数据解析我们已经知道，从City.txt文件已经拿到了全部城市，并成功传值给<strong>mCityBeanList</strong>；<br><img src="https://img-blog.csdnimg.cn/5eac5c344a7044ddbfd165e69e3b3ff9.png" alt="72">然后我们把这个List转成String数组，放在适配器ArrayAdapter中；</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">String[] cityArray = <span class="keyword">new</span> <span class="title class_">String</span>[mCityBeanList.size()];</span><br><span class="line">       <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; mCityBeanList.size(); i++) &#123;</span><br><span class="line">       <span class="comment">//城市名称定义为一个数组</span></span><br><span class="line">           cityArray[i] = mCityBeanList.get(i).getName().substring(<span class="number">0</span>, mCityBeanList.get(i).getName().length() - <span class="number">1</span>);</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure><p>这里带了substring方法，主要是由于我们的天气api查询城市时传入的城市名称不能带市，只能北京，天津，上海，不可北京市，上海市。<br>然后适配器就可以传参了，如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">adapter = <span class="keyword">new</span> <span class="title class_">ArrayAdapter</span>&lt;String&gt;(<span class="built_in">this</span>, android.R.layout.simple_list_item_1, cityArray);</span><br><span class="line">query.setAdapter(adapter);<span class="comment">//</span></span><br></pre></td></tr></table></figure><p>然后添加输入框右面的搜索图标的点击事件，输入框的城市名就传到了主页并显示天气</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">ivSearch = (ImageView) findViewById(R.id.iv_search);</span><br><span class="line">        ivSearch.setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View view)</span> &#123;</span><br><span class="line">            <span class="comment">//拿到输入框的值</span></span><br><span class="line">                <span class="type">String</span> <span class="variable">cityName</span> <span class="operator">=</span> query.getText().toString();</span><br><span class="line"><span class="comment">//                ToastUtil.showLongToast(SelectCityActivity.this, cityName);</span></span><br><span class="line">                <span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(SelectCityActivity.<span class="built_in">this</span>, MainActivity.class);</span><br><span class="line">                intent.putExtra(<span class="string">&quot;inputCity&quot;</span>, cityName);</span><br><span class="line">                setResult(<span class="number">200</span>, intent);</span><br><span class="line">                finish();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure><h2 id="城市显示"><a href="#城市显示" class="headerlink" title="城市显示"></a>城市显示</h2><p>用到RecyclerView，只要把此类中已经封装好的全部城市集合传进去就行了，前面文章已经讲述过RecyclerView的用法，同时，也可以实现点击item跳转到主页获取天气的操作，前面文章也已经提到，不想过多赘述了；</p><blockquote><p>若是嫌弃城市列表太多，都显示在一个页面还得滑动屏幕一个个找；<br>那么，二级RecyclerView不妨考虑一下：先显示全部省，点击省时，弹出市；<br>亦或者Spinner、两个RecyclerView联动，等等方法；&#x3D;&#x3D;（源码已给，自行探索）&#x3D;&#x3D;</p></blockquote><p><img src="https://img-blog.csdnimg.cn/489029a861bd49dbb423e75933e6b950.gif#pic_center" alt="9">&gt;实现上图的效果，用到了左右两个RecyclerView，点击左面，就对应显示有点数据，把数据解析那一步改改就行，省和市完整封装在一起，省不止要serPname了，还要把此省的全部市封装一下provinceBean.setCity(mCityBeanList);<br>下面是封装部分的源码，都是ArrayList，查询速度快。<br>为了保证搜索框还有提示功能，重新定义actureCityBeanList，传入集合actureCityBeanList转的数组；；</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="type">JSONArray</span> <span class="variable">Data</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JSONArray</span>(resultCity);</span><br><span class="line">            <span class="comment">//获取省，封装</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; Data.length(); i++) &#123;</span><br><span class="line">                <span class="type">JSONObject</span> <span class="variable">provinceJsonObject</span> <span class="operator">=</span> Data.getJSONObject(i);</span><br><span class="line">                <span class="type">String</span> <span class="variable">provinceName</span> <span class="operator">=</span> provinceJsonObject.getString(<span class="string">&quot;pname&quot;</span>);</span><br><span class="line">                <span class="type">ProvinceBean</span> <span class="variable">provinceBean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ProvinceBean</span>();</span><br><span class="line">                provinceBean.setPname(provinceName);</span><br><span class="line">                mCityBeanList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">                <span class="comment">//添加市</span></span><br><span class="line">                <span class="keyword">final</span> <span class="type">JSONArray</span> <span class="variable">cityArray</span> <span class="operator">=</span> provinceJsonObject.getJSONArray(<span class="string">&quot;city&quot;</span>);</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; cityArray.length(); j++) &#123;</span><br><span class="line">                    <span class="type">JSONObject</span> <span class="variable">cityObj</span> <span class="operator">=</span> cityArray.getJSONObject(j);</span><br><span class="line">                    <span class="type">String</span> <span class="variable">cityName</span> <span class="operator">=</span> cityObj.getString(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">                    <span class="type">CityBean</span> <span class="variable">cityBean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CityBean</span>();</span><br><span class="line">                    cityBean.setName(cityName);</span><br><span class="line"><span class="comment">//                    mCityNameList.add(cityName);</span></span><br><span class="line">                    mCityBeanList.add(cityBean);</span><br><span class="line">                    actureCityBeanList.add(cityBean);</span><br><span class="line">                &#125;</span><br><span class="line">                provinceBean.setCity(mCityBeanList);</span><br><span class="line">                mProvinceBeanList.add(provinceBean);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 添加县待拓展。。。。。。。。。</span></span><br><span class="line">            &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> Java </tag>
            
            <tag> API </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>简易的安卓天气app(三)——城市管理、数据库操作</title>
      <link href="/posts/003.html"/>
      <url>/posts/003.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>✅<a href="https://blog.csdn.net/m0_51390535/article/details/125302624?spm=1001.2014.3001.5502">简易的安卓天气app(一)——解析Json数据、数据类封装</a><br>✅<a href="https://blog.csdn.net/m0_51390535/article/details/125350399?spm=1001.2014.3001.5502">简易的安卓天气app(二)——适配器、每小时数据展示</a><br>📌<a href="https://blog.csdn.net/m0_51390535/article/details/125362820?spm=1001.2014.3001.5502">简易的安卓天气app(三)——城市管理、数据库操作</a><br>✅<a href="https://blog.csdn.net/m0_51390535/article/details/125397512?spm=1001.2014.3001.5502">简易的安卓天气app(四)——搜索城市、完善页面</a></p></blockquote><h1 id="需求🏷️"><a href="#需求🏷️" class="headerlink" title="需求🏷️"></a>需求🏷️</h1><p>当我们查看天气时，我们都拥有自己的手机，都知道现在的智能手机已经可以根据定位来自动查询所在位置的天气信息，这个依靠的就是手机的定位功能，此处的项目纯属练手，不会涉及定位操作，那一大堆步骤我直接放弃，所以这个功能我们可以偷鸡摸，，，不对，投机取巧从天气api接口想办法搞到。（源码见页尾✨）</p><blockquote><p>本项目用到的天气api接口<a href="https://tianqiapi.com/">天气api</a><br><code>详细操作内容见第一篇--&gt;</code>🧿<a href="https://blog.csdn.net/m0_51390535/article/details/125302624?spm=1001.2014.3001.5501">简易的安卓天气app（一）——解析Json数据</a><code>&lt;--</code></p></blockquote><p>此接口当我们默认不拼接参数，直接访问会得到当前位置的温度Json数据，这不就弥补了我们在定位方面的缺陷了吗，那么很好，当我们加上参数之后（此api根据城市查询的参数需＋<code>&amp;city=(城市名称)</code>）那么，当我们只加了参数却没有加参数值（&amp;city&#x3D;）他还是会根据当前位置进行定位，简直是太妙了。<br>所以接下来就是进行安卓SQLite数据库的一些操作，把当前位置信息保存到数据库中（城市名，城市温度，更新时间）<br>待实现效果：<br><img src="https://img-blog.csdnimg.cn/fcafcd55adc74eb6b531003e1493e9e1.gif#pic_center" alt="gif"></p><p>数据库成功插入当前位置数据信息（之前测试插入过几条的测试对照用数据）：<br>位置商丘的信息成功插入，插入之后，后续要进行的操作就是实时更新数据库<br><img src="https://img-blog.csdnimg.cn/b3caa833fa254387928af6c19121b459.png" alt="mancity"></p><h1 id="涉及内容"><a href="#涉及内容" class="headerlink" title="涉及内容"></a>涉及内容</h1><ul><li>SQLite数据库操作，创建数据库，新建表，增删查改操作</li><li>适配器adapter添加点击事件</li><li>页面传值跳转</li></ul><h1 id="项目结构"><a href="#项目结构" class="headerlink" title="项目结构"></a>项目结构</h1><p><img src="https://img-blog.csdnimg.cn/aca91ce40f824349a2d1f561f9a08502.png#pic_center" alt="3"><br>其他内容暂不涉及，本文章只包含城市管理，添加城市到数据库等的一系列操作，前面基础内容移步到页首地址</p><h1 id="界面设计"><a href="#界面设计" class="headerlink" title="界面设计"></a>界面设计</h1><p>城市管理的界面设计city_manager.xml<br><img src="https://img-blog.csdnimg.cn/ffed26d4e54947b585218a5ed1775cf5.png#pic_center" alt="city_manager"><br>city_manager.xml界面布局源码：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:background</span>=<span class="string">&quot;@mipmap/bg&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/iv_add&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;35dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;30dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:src</span>=<span class="string">&quot;@drawable/add&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;城市管理&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_weight</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textColor</span>=<span class="string">&quot;@color/purple_200&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;20dp&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/iv_more&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;35dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;30dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginRight</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:src</span>=<span class="string">&quot;@drawable/more&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">View</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;390dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;8px&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginBottom</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:alpha</span>=<span class="string">&quot;0.6&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;@color/white&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">androidx.recyclerview.widget.RecyclerView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/city_manager&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><p>added_city.xml页面表示要展示的一个个城市数据：<br><img src="https://img-blog.csdnimg.cn/7f1380d0d3484d8b884f6593ca496b12.png#pic_center" alt="city"></p><p>源码：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;55dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:textSize</span>=<span class="string">&quot;20sp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;40dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_marginRight</span>=<span class="string">&quot;40dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:background</span>=<span class="string">&quot;@drawable/blackground&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:gravity</span>=<span class="string">&quot;center_vertical&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:paddingLeft</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;220dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/city_city&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;22dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textColor</span>=<span class="string">&quot;@color/white&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;西安&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;16°C&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;24dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textColor</span>=<span class="string">&quot;@color/white&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/city_tem&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><p>最终从数据库拿到信息呈现出的效果：<br><img src="https://img-blog.csdnimg.cn/53fa076739ea4862be407a915ab8a872.png#pic_center" alt="result"></p><h1 id="适配器AddCityAdapter"><a href="#适配器AddCityAdapter" class="headerlink" title="适配器AddCityAdapter"></a>适配器AddCityAdapter</h1><p>界面布局设计完成接下来就是适配器AddCityAdapter<br><code>public class AddCityAdapter extends RecyclerView.Adapter&lt;AddCityAdapter.AddViewHolder&gt;</code></p><p>适配器就是决定在此城市管理页面的RecyclerView中展示哪个页面，跟之前一样，前几篇文章都有篇幅概括，基本的一些操作就是，<br>添加一个构造方法，</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> Context mContext;</span><br><span class="line">   <span class="keyword">private</span> List&lt;CityBean&gt; mCityBeans;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="title function_">AddCityAdapter</span><span class="params">(Context context, List&lt;CityBean&gt; cityBeans)</span> &#123;</span><br><span class="line">       mContext = context;</span><br><span class="line">       <span class="built_in">this</span>.mCityBeans = cityBeans;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>创建一个类<code>class AddViewHolder extends RecyclerView.ViewHolder</code>来绑定控件，此时在城市管理页面要求点击某个城市，需要传值到MainActivity，并获取指定点击城市的天气信息<br>所以适配器中添加一个点击事件，首先在适配器中添加接口</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">OnItemClickListener</span> &#123;</span><br><span class="line"></span><br><span class="line">       <span class="comment">/**</span></span><br><span class="line"><span class="comment">        * 当RecyclerView某个被点击的时候回调</span></span><br><span class="line"><span class="comment">        * <span class="doctag">@param</span> view 点击item的视图</span></span><br><span class="line"><span class="comment">        * <span class="doctag">@param</span> position 点击得到的数据，参数自定义</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">       <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onItemClick</span><span class="params">(View view, <span class="type">int</span> position)</span>;</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> OnItemClickListener onItemClickListener;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setOnItemClickListener</span><span class="params">(OnItemClickListener onItemClickListener)</span> &#123;</span><br><span class="line">       <span class="built_in">this</span>.onItemClickListener = onItemClickListener;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>然后在适配器中的类<strong>AddViewHolder</strong>中绑定点击事件</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">AddViewHolder</span> <span class="keyword">extends</span> <span class="title class_">RecyclerView</span>.ViewHolder &#123;</span><br><span class="line"></span><br><span class="line">       TextView cityCity,cityTem;<span class="comment">//城市名，温度</span></span><br><span class="line"></span><br><span class="line">       <span class="keyword">public</span> <span class="title function_">AddViewHolder</span><span class="params">(<span class="meta">@NonNull</span> View itemView)</span> &#123;</span><br><span class="line">           <span class="built_in">super</span>(itemView);</span><br><span class="line">           <span class="comment">//绑定控件</span></span><br><span class="line">           cityCity=itemView.findViewById(R.id.city_city);</span><br><span class="line">           cityTem = itemView.findViewById(R.id.city_tem);</span><br><span class="line">           <span class="comment">//绑定点击事件</span></span><br><span class="line">           itemView.setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123;</span><br><span class="line">               <span class="meta">@Override</span></span><br><span class="line">               <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View view)</span> &#123;</span><br><span class="line">                   <span class="keyword">if</span> (onItemClickListener!=<span class="literal">null</span>) &#123;</span><br><span class="line">                       onItemClickListener.onItemClick(view,getLayoutPosition());</span><br><span class="line">                   &#125;</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>然后就是一如既往的重写三个方法</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@NonNull</span></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> AddViewHolder <span class="title function_">onCreateViewHolder</span><span class="params">(<span class="meta">@NonNull</span> ViewGroup parent, <span class="type">int</span> viewType)</span> &#123;</span><br><span class="line">   <span class="comment">//绑定控件，哪个页面展示在RecyclerView中，R.layout.added_city</span></span><br><span class="line">       <span class="type">View</span> <span class="variable">view</span> <span class="operator">=</span> LayoutInflater.from(mContext).inflate(R.layout.added_city, parent, <span class="literal">false</span>);</span><br><span class="line">       <span class="type">AddViewHolder</span> <span class="variable">cityViewHolder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AddViewHolder</span>(view);</span><br><span class="line">       <span class="keyword">return</span> cityViewHolder;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onBindViewHolder</span><span class="params">(<span class="meta">@NonNull</span> AddViewHolder holder, <span class="type">int</span> position)</span> &#123;</span><br><span class="line">       <span class="type">CityBean</span> <span class="variable">cityBean</span> <span class="operator">=</span> mCityBeans.get(position);</span><br><span class="line">       <span class="comment">//控件传值</span></span><br><span class="line">       holder.cityCity.setText(cityBean.getName());</span><br><span class="line">       holder.cityTem.setText(cityBean.getTem());</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getItemCount</span><span class="params">()</span> &#123;</span><br><span class="line">       <span class="keyword">return</span> (mCityBeans == <span class="literal">null</span>) ? <span class="number">0</span> : mCityBeans.size();</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>适配器AddCityAdapter源码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AddCityAdapter</span> <span class="keyword">extends</span> <span class="title class_">RecyclerView</span>.Adapter&lt;AddCityAdapter.AddViewHolder&gt;&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Context mContext;</span><br><span class="line">    <span class="keyword">private</span> List&lt;CityBean&gt; mCityBeans;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">AddCityAdapter</span><span class="params">(Context context, List&lt;CityBean&gt; cityBeans)</span> &#123;</span><br><span class="line">        mContext = context;</span><br><span class="line">        <span class="built_in">this</span>.mCityBeans = cityBeans;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@NonNull</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> AddViewHolder <span class="title function_">onCreateViewHolder</span><span class="params">(<span class="meta">@NonNull</span> ViewGroup parent, <span class="type">int</span> viewType)</span> &#123;</span><br><span class="line">        <span class="type">View</span> <span class="variable">view</span> <span class="operator">=</span> LayoutInflater.from(mContext).inflate(R.layout.added_city, parent, <span class="literal">false</span>);</span><br><span class="line">        <span class="type">AddViewHolder</span> <span class="variable">cityViewHolder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AddViewHolder</span>(view);</span><br><span class="line">        <span class="keyword">return</span> cityViewHolder;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onBindViewHolder</span><span class="params">(<span class="meta">@NonNull</span> AddViewHolder holder, <span class="type">int</span> position)</span> &#123;</span><br><span class="line">        <span class="type">CityBean</span> <span class="variable">cityBean</span> <span class="operator">=</span> mCityBeans.get(position);</span><br><span class="line"></span><br><span class="line">        holder.cityCity.setText(cityBean.getName());</span><br><span class="line">        holder.cityTem.setText(cityBean.getTem());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getItemCount</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (mCityBeans == <span class="literal">null</span>) ? <span class="number">0</span> : mCityBeans.size();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">AddViewHolder</span> <span class="keyword">extends</span> <span class="title class_">RecyclerView</span>.ViewHolder &#123;</span><br><span class="line"></span><br><span class="line">        TextView cityCity,cityTem;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">AddViewHolder</span><span class="params">(<span class="meta">@NonNull</span> View itemView)</span> &#123;</span><br><span class="line">            <span class="built_in">super</span>(itemView);</span><br><span class="line"></span><br><span class="line">            cityCity=itemView.findViewById(R.id.city_city);</span><br><span class="line">            cityTem = itemView.findViewById(R.id.city_tem);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//绑定点击事件</span></span><br><span class="line">            itemView.setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View view)</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (onItemClickListener!=<span class="literal">null</span>) &#123;</span><br><span class="line">                        onItemClickListener.onItemClick(view,getLayoutPosition());</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 点击响应事件</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">OnItemClickListener</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 当RecyclerView某个被点击的时候回调</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> view 点击item的视图</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> position 点击得到的数据</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onItemClick</span><span class="params">(View view, <span class="type">int</span> position)</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> OnItemClickListener onItemClickListener;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setOnItemClickListener</span><span class="params">(OnItemClickListener onItemClickListener)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.onItemClickListener = onItemClickListener;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="操作数据库"><a href="#操作数据库" class="headerlink" title="操作数据库"></a>操作数据库</h1><p>然后进行数据库工具的构建，要操作数据库，一般的方法得需要实体类吧，接着就是城市实体类的封装，当获取当前定位天气信息时，把此数据类保存到数据库<br>所以先构建城市实体类CityBean</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CityBean</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;<span class="comment">//城市名称</span></span><br><span class="line">    <span class="keyword">private</span> String[] area;<span class="comment">//县/区</span></span><br><span class="line">    <span class="keyword">private</span> String tem;<span class="comment">//温度</span></span><br><span class="line">    <span class="keyword">private</span> String updateTime;<span class="comment">//更新时间</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//构造方法自定义，主要看数据库操作和new时传值</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">CityBean</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">CityBean</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">CityBean</span><span class="params">(String name, String tem, String updateTime)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.tem = tem;</span><br><span class="line">        <span class="built_in">this</span>.updateTime = updateTime;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//get和set、toString注释</span></span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/a498a4b6b70248e7b9769bb4f37d3423.png" alt="db"></p><p>接着就是数据库的CityDatabaseConfig，有数据库名，表名的信息，以防操作数据库写错名称，故写在此配置下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CityDatabaseConfig</span> &#123;</span><br><span class="line">    <span class="comment">//数据库的名字</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">DATABASE_NAME</span> <span class="operator">=</span> <span class="string">&quot;cityDb&quot;</span>;</span><br><span class="line">    <span class="comment">//表名</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">TABLE_NAME</span> <span class="operator">=</span> <span class="string">&quot;city_weather&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>然后是<code>CityDbHelper</code>继承自<strong>SQLiteOpenHelper</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CityDbHelper</span> <span class="keyword">extends</span> <span class="title class_">SQLiteOpenHelper</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">CityDbHelper</span><span class="params">(Context context)</span> &#123;</span><br><span class="line">    <span class="comment">//创建数据库CityDatabaseConfig.DATABASE_NAME</span></span><br><span class="line">        <span class="built_in">super</span>(context, CityDatabaseConfig.DATABASE_NAME, <span class="literal">null</span>, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(SQLiteDatabase db)</span> &#123;</span><br><span class="line">    <span class="comment">//创建表，字段(cityName text,tem text,updateTime text)</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;create table if not exists &quot;</span>+CityDatabaseConfig.TABLE_NAME+<span class="string">&quot;(cityName text,tem text,updateTime text)&quot;</span>;</span><br><span class="line">        db.execSQL(sql);</span><br><span class="line">        Log.i(CityDatabaseConfig.DATABASE_NAME,<span class="string">&quot;created success!!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onUpgrade</span><span class="params">(SQLiteDatabase db, <span class="type">int</span> oldVersion, <span class="type">int</span> newVersion)</span> &#123;</span><br><span class="line"></span><br><span class="line">        Log.i(CityDatabaseConfig.DATABASE_NAME,<span class="string">&quot;updated success!!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>接着是数据库一些操作的工具，里面写一些能用到的方法，自行扩展即可</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DBUtils</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Context context;</span><br><span class="line">    <span class="keyword">private</span> CityDbHelper helper;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 单例模式</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> context</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">DBUtils</span><span class="params">(Context context)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.context = context;</span><br><span class="line">        helper = <span class="keyword">new</span> <span class="title class_">CityDbHelper</span>(context) &#123;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 向表中插入</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">insertData</span><span class="params">(String cityName,String tem,String updateTime)</span> &#123;</span><br><span class="line">        <span class="type">SQLiteDatabase</span> <span class="variable">db</span> <span class="operator">=</span> helper.getReadableDatabase();</span><br><span class="line">        <span class="type">ContentValues</span> <span class="variable">values</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ContentValues</span>();</span><br><span class="line"></span><br><span class="line">        values.put(<span class="string">&quot;cityName&quot;</span>, cityName);</span><br><span class="line">        values.put(<span class="string">&quot;tem&quot;</span>, tem);</span><br><span class="line">        values.put(<span class="string">&quot;updateTime&quot;</span>, updateTime);</span><br><span class="line">        <span class="type">long</span> <span class="variable">insert</span> <span class="operator">=</span> db.insert(CityDatabaseConfig.TABLE_NAME, <span class="literal">null</span>, values);</span><br><span class="line">        <span class="keyword">if</span> (insert &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//根据城市名称更新数据</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">updateByName</span><span class="params">(String cityName,String tem,String updateTime)</span>&#123;</span><br><span class="line">        <span class="type">SQLiteDatabase</span> <span class="variable">db</span> <span class="operator">=</span> helper.getReadableDatabase();</span><br><span class="line">        <span class="type">ContentValues</span> <span class="variable">values</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ContentValues</span>();</span><br><span class="line"></span><br><span class="line">        values.put(<span class="string">&quot;cityName&quot;</span>, cityName);</span><br><span class="line">        values.put(<span class="string">&quot;tem&quot;</span>, tem);</span><br><span class="line">        values.put(<span class="string">&quot;updateTime&quot;</span>, updateTime);</span><br><span class="line">        <span class="type">long</span> <span class="variable">update</span> <span class="operator">=</span> db.update(CityDatabaseConfig.TABLE_NAME,values,<span class="string">&quot;cityName=?&quot;</span>, <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;cityName&#125;);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (update&gt;<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查询全部的信息</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;CityBean&gt; <span class="title function_">getAllCity</span><span class="params">()</span> &#123;</span><br><span class="line">        List&lt;CityBean&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="type">SQLiteDatabase</span> <span class="variable">db</span> <span class="operator">=</span> helper.getReadableDatabase();</span><br><span class="line">        <span class="type">Cursor</span> <span class="variable">cursor</span> <span class="operator">=</span> db.rawQuery(<span class="string">&quot;select * from &quot;</span> + CityDatabaseConfig.TABLE_NAME, <span class="literal">null</span>);</span><br><span class="line">        <span class="keyword">if</span> (cursor != <span class="literal">null</span> &amp;&amp; cursor.getCount() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">while</span> (cursor.moveToNext()) &#123;</span><br><span class="line"></span><br><span class="line">                <span class="type">String</span> <span class="variable">cityName</span> <span class="operator">=</span> cursor.getString(<span class="number">0</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">tem</span> <span class="operator">=</span> cursor.getString(<span class="number">1</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">updateTime</span> <span class="operator">=</span> cursor.getString(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">                <span class="type">CityBean</span> <span class="variable">cityBean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CityBean</span>(cityName,tem,updateTime);</span><br><span class="line">                list.add(cityBean);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据城市名查询一条信息</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> CityBean <span class="title function_">getCityByName</span><span class="params">(String cityName)</span> &#123;</span><br><span class="line">        <span class="type">CityBean</span> <span class="variable">cityBean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CityBean</span>();</span><br><span class="line">        <span class="type">SQLiteDatabase</span> <span class="variable">db</span> <span class="operator">=</span> helper.getReadableDatabase();</span><br><span class="line">        <span class="type">Cursor</span> <span class="variable">cursor</span> <span class="operator">=</span> db.rawQuery(<span class="string">&quot;select * from &quot;</span> + CityDatabaseConfig.TABLE_NAME + <span class="string">&quot; where cityName=?&quot;</span>, <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;cityName&#125;);</span><br><span class="line">        <span class="keyword">if</span> (cursor != <span class="literal">null</span> &amp;&amp; cursor.getCount() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">while</span> (cursor.moveToFirst()) &#123;</span><br><span class="line"></span><br><span class="line">                <span class="type">String</span> <span class="variable">cityNameResult</span> <span class="operator">=</span> cursor.getString(<span class="number">0</span>);</span><br><span class="line">                cityBean.setName(cityName);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> cityBean;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据城市名删除一条数据</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> cityName</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">delCityByName</span><span class="params">(String cityName)</span>&#123;</span><br><span class="line">        <span class="type">SQLiteDatabase</span> <span class="variable">db</span> <span class="operator">=</span> helper.getReadableDatabase();</span><br><span class="line"></span><br><span class="line">        <span class="type">long</span> <span class="variable">delRow</span> <span class="operator">=</span> db.delete(CityDatabaseConfig.TABLE_NAME, <span class="string">&quot;cityName=?&quot;</span>, <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;cityName&#125;);</span><br><span class="line">        <span class="keyword">if</span> (delRow &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="跳转页面，展示数据"><a href="#跳转页面，展示数据" class="headerlink" title="跳转页面，展示数据"></a>跳转页面，展示数据</h1><p>一些基本的方法写好后就是MainActivity.java文件，用Intent跳转到城市管理界面，注意先引入数据库操作工具</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">DBUtils</span> <span class="variable">dbUtils</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DBUtils</span>(MainActivity.<span class="built_in">this</span>);</span><br></pre></td></tr></table></figure><p>设置右上角图标的点击事件，此小圆点图标绑定为<strong>ivMore</strong><br><img src="https://img-blog.csdnimg.cn/389c3e6a59894b55b698d6fa9cdccb00.png" alt="tub"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">ivMore.setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View view)</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="literal">null</span> == dbUtils.getCityByName(tvCity.getText().toString()).getName()) &#123;</span><br><span class="line">                    <span class="comment">//数据库不存在此城市就插入</span></span><br><span class="line">                    dbUtils.insertData(tvCity.getText().toString(),tvTem.getText().toString(),tvTime.getText().toString());</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">//存在就更新</span></span><br><span class="line">                    dbUtils.updateByName(tvCity.getText().toString(),tvTem.getText().toString(),tvTime.getText().toString());</span><br><span class="line"><span class="comment">//                dbUtils.insertData(&quot;北京&quot;,&quot;30°C&quot;,&quot;2022-06-19 21:23:35&quot;);测试用</span></span><br><span class="line"><span class="comment">//                dbUtils.delCityByName(&quot;商丘&quot;);测试用</span></span><br><span class="line">                    List&lt;CityBean&gt; list = dbUtils.getAllCity();</span><br><span class="line">                    Log.d(<span class="string">&quot;getAllCity&quot;</span>, <span class="string">&quot;allList&lt;CityBean&gt;&gt;&gt;&gt;》》》&quot;</span> + list.toString());</span><br><span class="line"></span><br><span class="line">                    ToastUtil.showShortToast(MainActivity.<span class="built_in">this</span>, <span class="string">&quot;当前位置:&quot;</span> + tvCity.getText());</span><br><span class="line">                    <span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(MainActivity.<span class="built_in">this</span>, CityManagerActivity.class);</span><br><span class="line">                    Log.d(<span class="string">&quot;getNowCity&quot;</span>, <span class="string">&quot;nowCity&lt;CityBean&gt;&gt;&gt;&gt;》》》&quot;</span> + tvCity.getText());</span><br><span class="line"><span class="comment">//                要求跳转页面传值回来，requestCode：200;</span></span><br><span class="line">                    startActivityForResult(intent, <span class="number">200</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure><p>跳转到城市管理页面，添加activity.java文件，命名<strong>CityManagerActivity</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CityManagerActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> AddCityAdapter addCityAdapter;<span class="comment">//适配器</span></span><br><span class="line">    <span class="keyword">private</span> RecyclerView rvAddedCity;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> List&lt;CityBean&gt; cityDbBeanList;</span><br><span class="line">    DBUtils dbUtils= <span class="keyword">new</span> <span class="title class_">DBUtils</span>(CityManagerActivity.<span class="built_in">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.city_manager);</span><br><span class="line"></span><br><span class="line">        initView();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initView</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">        rvAddedCity = findViewById(R.id.city_manager);</span><br><span class="line"></span><br><span class="line">        cityDbBeanList = dbUtils.getAllCity();</span><br><span class="line">        Log.d(<span class="string">&quot;cityList&quot;</span>,<span class="string">&quot;&gt;&gt;&gt;&gt;&gt;数据库中的数据》》》》》》&quot;</span>+cityDbBeanList);</span><br><span class="line">        addCityAdapter = <span class="keyword">new</span> <span class="title class_">AddCityAdapter</span>(CityManagerActivity.<span class="built_in">this</span>,cityDbBeanList);</span><br><span class="line">        rvAddedCity.setAdapter(addCityAdapter);</span><br><span class="line">        <span class="type">LinearLayoutManager</span> <span class="variable">layoutManager</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">LinearLayoutManager</span>(<span class="built_in">this</span>, LinearLayoutManager.VERTICAL, <span class="literal">false</span>);</span><br><span class="line">        rvAddedCity.setLayoutManager(layoutManager);</span><br><span class="line"><span class="comment">//设置点击事件</span></span><br><span class="line">        addCityAdapter.setOnItemClickListener(<span class="keyword">new</span> <span class="title class_">AddCityAdapter</span>.OnItemClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onItemClick</span><span class="params">(View view, <span class="type">int</span> position)</span> &#123;</span><br><span class="line"><span class="comment">//                ToastUtil.showShotToast(CityManagerActivity.this, cityDbBeanList.get(position).getName());</span></span><br><span class="line">                <span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(CityManagerActivity.<span class="built_in">this</span>,MainActivity.class);</span><br><span class="line">                intent.putExtra(<span class="string">&quot;selectedCity&quot;</span>,cityDbBeanList.get(position).getName());</span><br><span class="line"><span class="comment">//返回MainActivity页面并传值setResult(200,intent);设置resultCode：200;</span></span><br><span class="line">                setResult(<span class="number">200</span>,intent);</span><br><span class="line">                finish();</span><br><span class="line"></span><br><span class="line"><span class="comment">//                ToastUtil.showShotToast(CityManagerActivity.this,&quot;finish&quot;);</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后既然是要求页面返回传值，MainActivity就要重写方法<code>onActivityResult</code>接受传来的值</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onActivityResult</span><span class="params">(<span class="type">int</span> requestCode, <span class="type">int</span> resultCode, <span class="meta">@Nullable</span> Intent data)</span> &#123;</span><br><span class="line">       <span class="built_in">super</span>.onActivityResult(requestCode, resultCode, data);</span><br><span class="line">       <span class="keyword">if</span> (requestCode == <span class="number">200</span> &amp;&amp; resultCode == <span class="number">200</span>) &#123;</span><br><span class="line">       <span class="comment">//getString拿到传来的值</span></span><br><span class="line">           <span class="type">String</span> <span class="variable">dt</span> <span class="operator">=</span> data.getExtras().getString(<span class="string">&quot;selectedCity&quot;</span>);</span><br><span class="line">           tvCity.setText(dt);</span><br><span class="line">           nowCity=dt;</span><br><span class="line">           <span class="comment">//重新从api根据传来的城市名称获取天气</span></span><br><span class="line">           getWeather(nowCity);</span><br><span class="line">           ToastUtil.showLongToast(<span class="built_in">this</span>,dt+<span class="string">&quot;天气更新😘~&quot;</span>);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>自此一部分功能就实现了，跳转城市管理页面，展示城市，指定城市展示天气信息，</p><blockquote><p>数据库操作实现了：</p><ol><li>拿到数据库所有城市信息、</li><li>插入一条数据、</li><li>根据城市名称更新数据、</li><li>删除一条数据待完成，，自行拓展，只要工具类删除方法写对，无非就是添加个事件调用删除方法</li></ol></blockquote><p>更精细化的搜索城市，主动根据搜索到的城市添加城市到数据库，后篇文章会逐渐完善，此篇文章主要是数据库的一些操作和适配器添加点击事件，订阅此栏可同步获取项目搭建过程😘😘</p><p>&#x3D;&#x3D;源码地址&#x3D;&#x3D;：<a href="https://gitee.com/guo-yc/weather-forcast3">Gitee</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> Java </tag>
            
            <tag> API </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>简易的安卓天气app(二)——适配器、每小时数据展示</title>
      <link href="/posts/002.html"/>
      <url>/posts/002.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>✅<a href="https://blog.csdn.net/m0_51390535/article/details/125302624?spm=1001.2014.3001.5502">简易的安卓天气app(一)——解析Json数据、数据类封装</a><br>📌<a href="https://blog.csdn.net/m0_51390535/article/details/125350399?spm=1001.2014.3001.5502">简易的安卓天气app(二)——适配器、每小时数据展示</a><br>✅<a href="https://blog.csdn.net/m0_51390535/article/details/125362820?spm=1001.2014.3001.5502">简易的安卓天气app(三)——城市管理、数据库操作</a><br>✅<a href="https://blog.csdn.net/m0_51390535/article/details/125397512?spm=1001.2014.3001.5502">简易的安卓天气app(四)——搜索城市、完善页面</a></p></blockquote><h1 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h1><p>拒绝画饼，先讲需求，项目结构，整体思路，第一章我们只是封装了两个数据类<strong>WeatherBean</strong>和<strong>DayWeatherBean</strong>(此类存的是下图的data数据，是个JsonArray，里面包了JsonObject，7个表示7天，由于只需拿到当天数据，所以第0项就是当天详细天气)，用来存放城市的当天天气，如果我们想要展示更精美的页面呢，或者说是展示更多的数据，比如，我们这里用<strong>RecyclerView</strong>展示<strong>一天中每个小时的天气</strong>，实现效果（若是想从当前时刻开始，获取小时温度，可自行实现，源码见页尾）<br><img src="https://img-blog.csdnimg.cn/b206a7486dc14e92ba1dac95905a8678.gif#pic_center" alt="0"></p><h1 id="涉及内容"><a href="#涉及内容" class="headerlink" title="涉及内容"></a>涉及内容</h1><ul><li>获取网络数据</li><li>数据实体类的封装</li><li>异步获取网络数据</li><li>Gson工具类解析Json</li><li>界面设计RecyclerView</li><li>适配器adatper</li></ul><h1 id="项目结构"><a href="#项目结构" class="headerlink" title="项目结构"></a>项目结构</h1><p><img src="https://img-blog.csdnimg.cn/aa45b625a5454d309733372b67e9efac.png#pic_center" alt="结构"></p><h1 id="界面设计"><a href="#界面设计" class="headerlink" title="界面设计"></a>界面设计</h1><p>既然用到了RecyclerView，那么就离不开adapter，RecyclerView负责准备一个框框，adapter负责把什么数据传到框内，顾名思义适配器<br>详细讲解C一下，第一篇就是，讲的非常全面，附加地址<a href="https://blog.csdn.net/huweiliyi/article/details/105779329?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522165555298516782388035800%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&request_id=165555298516782388035800&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-1-105779329-null-null.142%5Ev17%5Econtrol,157%5Ev15%5Enew_3&utm_term=RecyclerView&spm=1018.2226.3001.4187">Android RecyclerView最全使用详解</a><br>布局效果<br><img src="https://img-blog.csdnimg.cn/53e6d0a745bf404eb288034eae75a453.png#pic_center" alt="4">需要添加的RecyclerView</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">       <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">android:layout_marginRight</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">android:layout_height</span>=<span class="string">&quot;100dp&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">androidx.recyclerview.widget.RecyclerView</span></span></span><br><span class="line"><span class="tag">           <span class="attr">android:id</span>=<span class="string">&quot;@+id/rlv_hour_weather&quot;</span></span></span><br><span class="line"><span class="tag">           <span class="attr">android:background</span>=<span class="string">&quot;@drawable/blackground&quot;</span></span></span><br><span class="line"><span class="tag">           <span class="attr">android:alpha</span>=<span class="string">&quot;0.75&quot;</span></span></span><br><span class="line"><span class="tag">           <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">           <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span> /&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><p>id自定义名字，主要时在MainActivity里新增private RecyclerView rlvHourWeather;并findByView注册拿到之后就可以添加适配器了，想要哪个小页面传到这个RecyclerView中，，<br>每小时天气小界面：<br><img src="https://img-blog.csdnimg.cn/7c62edf1ad634674b6b43db3c06deefb.png#pic_center" alt="7"></p><p><img src="https://img-blog.csdnimg.cn/8e17ef01125440e89339bb8c66205398.png#pic_center" alt="6"></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;60dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;100dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:gravity</span>=<span class="string">&quot;center_horizontal&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:background</span>=<span class="string">&quot;@mipmap/bg&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_hours&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;8:00&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">&quot;@color/white&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;18sp&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/iv_weather&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;45dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;45dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:src</span>=<span class="string">&quot;@drawable/weather_yin&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_tem&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">&quot;@color/white&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;19sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">tools:text</span>=<span class="string">&quot;31&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="网络Json数据解析"><a href="#网络Json数据解析" class="headerlink" title="网络Json数据解析"></a>网络Json数据解析</h1><p>第一篇我们已经从天气api接口拿到了json并成功解析，还封装了两个实体类<br>下面四从api拿到的数据，里面的json数据格式化之后的形式，首先为了下面的讲解代码流畅性，这次先从解析此api接口的json数据入手<br><img src="https://img-blog.csdnimg.cn/c9802c3c42444b64b962dd41f98a9f55.png" alt="1">首先百度前往一个在线Json解析网站<a href="https://www.json.cn/">https://www.json.cn/</a><br>或者是在Idea里新建个json后缀的文件，复制粘贴进去，格式化后就得到一层一层封装起来的json数据<br>或者前往客户端Android Studio寻找一个插件如下图第一个GsonFormat，详细用法自行C一下<br><img src="https://img-blog.csdnimg.cn/46d93107fc504f80860bcd3c3dc3520c.png" alt="在这里插入图片描述">这里讲解就去了在线Json解析网站<a href="https://www.json.cn/">https://www.json.cn/</a>复制粘贴进去Json数据，转义和格式化后得到，<code>ps（自用的火狐浏览器挺好的，自带Json转换功能）</code><br><img src="https://img-blog.csdnimg.cn/1448bc05cd1843eb9288e3acb2cffaf8.png#pic_center" alt="在这里插入图片描述">第一篇文章已经写明，用到了<strong>第三方库Google的Gson工具</strong>，自动封装，两行代码完事，使用详情见第一篇文章，需要导包<br><img src="https://img-blog.csdnimg.cn/0fbb1b0730134f69bf60db0f7c994e38.png" alt="3"><br>想仔细学习，自己用JsonObject，JsonArray封装的，这篇文章不会讲太多，后面的文章会用到仔细封装，<code>ps|小窍门（观察&quot;[]&quot;和&quot;&#123;&#125;&quot;你就会发现规律）</code><br>我们要得到每小时的数据，就要找一个对象，里面封装的是每小时的天气，就是说data数据0下标当天天气里还有一个对象，包了每个小时共24小时的详细数据，下面图片是解析</p><p><img src="https://img-blog.csdnimg.cn/f45808fa1faa43c4a7261e17916e2050.png#pic_center" alt="4">所以，从此hours数据的结构得知有需要封装一个数据类，还是包在当日天气DayWeatherBean下的一个List<object>。</p><h1 id="每小时数据实体类封装"><a href="#每小时数据实体类封装" class="headerlink" title="每小时数据实体类封装"></a>每小时数据实体类封装</h1><p>此处这个数据类就叫做HoursWearBean，那么先修改当日天气DayWeatherBean，添加一个<br><code>private List&lt;HoursWeatherBean&gt; hoursWeatherBeanList;</code>属性，由于Gson会根据Json数据的属性名进行封装，所以就需要实现一个序列化接口<code>implements Serializable</code>，并添加注解<br><img src="https://img-blog.csdnimg.cn/429e13e02e17461faeb9de4545bc1abc.png" alt="5"><br>这样变量名就可以随便命名了<br>若是不想实现，就老老实实用<code>private List&lt;HoursWeatherBean&gt; hours;</code>，里面的变量名用hours命名之后就会发现可能报错，嘿嘿，每个小时数据里也有个hours<br>防止出错，属性可以都用一下注解，然后Get、Set修改一下，<br>接着就是每小时详细数据类的封装<br>HoursWeatherBean：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.google.gson.annotations.SerializedName;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HoursWeatherBean</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">    <span class="meta">@SerializedName(&quot;hours&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String hours;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SerializedName(&quot;wea_img&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String weaImg;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SerializedName(&quot;tem&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String tem;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getHours</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> hours;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setHours</span><span class="params">(String hours)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.hours = hours;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getWeaImg</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> weaImg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setWeaImg</span><span class="params">(String weaImg)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.weaImg = weaImg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getTem</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> tem;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setTem</span><span class="params">(String tem)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.tem = tem;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;HoursWeatherBean&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;hours=&#x27;&quot;</span> + hours + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, weaImg=&#x27;&quot;</span> + weaImg + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, tem=&#x27;&quot;</span> + tem + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="适配器HourWeatherAdapter"><a href="#适配器HourWeatherAdapter" class="headerlink" title="适配器HourWeatherAdapter"></a>适配器HourWeatherAdapter</h1><ol><li>继承自RecyclerView.Adapter，构造HourWeatherAdapter</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> Context mContext;</span><br><span class="line">   <span class="keyword">private</span> List&lt;HoursWeatherBean&gt; mHoursWeatherBeans;<span class="comment">//写Activity时传进来的List，需要展示的数据集合</span></span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="title function_">HourWeatherAdapter</span><span class="params">(Context context, List&lt;HoursWeatherBean&gt; hoursWeatherBeans)</span> &#123;</span><br><span class="line">       mContext = context;</span><br><span class="line">       <span class="built_in">this</span>.mHoursWeatherBeans = hoursWeatherBeans;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>新建class类<strong>HourViewHolder</strong></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">HourViewHolder</span> <span class="keyword">extends</span> <span class="title class_">RecyclerView</span>.ViewHolder &#123;</span><br><span class="line"></span><br><span class="line">       TextView tvHours, tvTem;</span><br><span class="line">       ImageView ivWeather;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">public</span> <span class="title function_">HourViewHolder</span><span class="params">(<span class="meta">@NonNull</span> View itemView)</span> &#123;</span><br><span class="line">           <span class="built_in">super</span>(itemView);</span><br><span class="line">           <span class="comment">//绑定小页面的组件</span></span><br><span class="line">           tvHours = itemView.findViewById(R.id.tv_hours);</span><br><span class="line">           tvTem = itemView.findViewById(R.id.tv_tem);</span><br><span class="line">           ivWeather = itemView.findViewById(R.id.iv_weather);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/e313fe8d4dd54dc2a8490171f6cfb8d5.png" alt="8"></p><ol start="3"><li>然后重写三个方法</li></ol><p>点击错误提示，快速重写三个方法</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@NonNull</span></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> HourViewHolder <span class="title function_">onCreateViewHolder</span><span class="params">(<span class="meta">@NonNull</span> ViewGroup parent, <span class="type">int</span> viewType)</span> &#123;</span><br><span class="line">   <span class="comment">//绑定View，每小时数据的小页面</span></span><br><span class="line">       <span class="type">View</span> <span class="variable">view</span> <span class="operator">=</span> LayoutInflater.from(mContext).inflate(R.layout.hour_item_layout, parent, <span class="literal">false</span>);</span><br><span class="line">       <span class="type">HourViewHolder</span> <span class="variable">hourViewHolder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HourViewHolder</span>(view);</span><br><span class="line">       <span class="keyword">return</span> hourViewHolder;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onBindViewHolder</span><span class="params">(<span class="meta">@NonNull</span> HourViewHolder holder, <span class="type">int</span> position)</span> &#123;</span><br><span class="line">       <span class="type">HoursWeatherBean</span> <span class="variable">hoursweatherBean</span> <span class="operator">=</span> mHoursWeatherBeans.get(position);</span><br><span class="line">       <span class="comment">//根据位置position传值</span></span><br><span class="line">       holder.tvTem.setText(hoursweatherBean.getTem()+<span class="string">&quot;℃&quot;</span>);</span><br><span class="line">       holder.tvHours.setText(hoursweatherBean.getHours().substring(<span class="number">0</span>,<span class="number">2</span>)+<span class="string">&quot;:00&quot;</span>);</span><br><span class="line">       holder.ivWeather.setImageResource(WeatherImgUtil.getImgResOfWeather(hoursweatherBean.getWeaImg()));</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getItemCount</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">return</span> (mHoursWeatherBeans == <span class="literal">null</span>) ? <span class="number">0</span> : mHoursWeatherBeans.size();</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h1 id="MainActivity-java"><a href="#MainActivity-java" class="headerlink" title="MainActivity.java"></a>MainActivity.java</h1><p>接着就是拿到Json数据，封装称为数据类，我代码中直接Gson封装成WeatherBean，里面封装有List<DayWeatherBean>，而DayWeatherBean中又有List<HoursWeatherBean>，一层一层包着，<br>当数据异步封装好后，<br>添加属性</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> HourWeatherAdapter mHourAdapter;<span class="comment">//适配器</span></span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> RecyclerView rlvHourWeather;<span class="comment">//RecyclerView </span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">       * 每小时温度</span></span><br><span class="line"><span class="comment">       * dayWeather.getHoursWeatherBeanList()==&gt;24小时数据List</span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line">      mHourAdapter = <span class="keyword">new</span> <span class="title class_">HourWeatherAdapter</span>(<span class="built_in">this</span>, dayWeather.getHoursWeatherBeanList());</span><br><span class="line">      rlvHourWeather.setAdapter(mHourAdapter);</span><br><span class="line">      <span class="comment">//数据水平布局</span></span><br><span class="line">      <span class="type">LinearLayoutManager</span> <span class="variable">layoutManager</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">LinearLayoutManager</span>(<span class="built_in">this</span>, LinearLayoutManager.HORIZONTAL, <span class="literal">false</span>);</span><br><span class="line">      rlvHourWeather.setLayoutManager(layoutManager);</span><br></pre></td></tr></table></figure><p>到此处就能完美展示每小时数据了，步骤在目录中，就是先设计界面，封装数据类，适配器，activity。代码行数有点小多，末尾附带源码<br>&#x3D;&#x3D;源码地址&#x3D;&#x3D;：</p><ul><li>gitee：<a href="https://gitee.com/guo-yc/weather-forcast2">WeatherForcast2</a></li><li>阿里云盘：<a href="https://www.aliyundrive.com/s/YT4GNZ8ipsY">WeatherForcast2</a><br> — 提取码：a82t</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> Java </tag>
            
            <tag> API </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>简易的安卓天气app(一)——解析Json数据、数据类封装</title>
      <link href="/posts/001.html"/>
      <url>/posts/001.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>📌<a href="https://blog.csdn.net/m0_51390535/article/details/125302624?spm=1001.2014.3001.5502">简易的安卓天气app(一)——解析Json数据、数据类封装</a><br>✅<a href="https://blog.csdn.net/m0_51390535/article/details/125350399?spm=1001.2014.3001.5502">简易的安卓天气app(二)——适配器、每小时数据展示</a><br>✅<a href="https://blog.csdn.net/m0_51390535/article/details/125362820?spm=1001.2014.3001.5502">简易的安卓天气app(三)——城市管理、数据库操作</a><br>✅<a href="https://blog.csdn.net/m0_51390535/article/details/125397512?spm=1001.2014.3001.5502">简易的安卓天气app(四)——搜索城市、完善页面</a></p></blockquote><h1 id="简述"><a href="#简述" class="headerlink" title="简述"></a>简述</h1><p>不罗嗦那么多没用的；；；<br>既然是简易的天气app，那么本demo就没有那麽多复杂的交互，页面跳转，只包括了针对api获取和解析数据放到app主页面，由于配置定位服务太繁琐，本次测试没有使用定位功能。<br>项目只包含一个主要activity_main.xml，两个封装的实体用来存数据<br>用到的天气api可前往官网注册账号获取：<a href="https://tianqiapi.com/">天气api</a></p><p>例如我这里注册好了我的账号，进入主页面得到下图的appid和appsecret<br><img src="https://img-blog.csdnimg.cn/deb89dde23494444bf43c31a4f82866b.png#pic_center" alt="appid">然后把这两个东西复制粘贴到下面的api中</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//里面的括号中的两个参数值换成你的，包括括号</span></span><br><span class="line">https:<span class="comment">//tianqiapi.com/api?version=v1&amp;appid=（你的appid）&amp;appsecret=（你的appsecret）</span></span><br></pre></td></tr></table></figure><p>&#x3D;&#x3D;注意&#x3D;&#x3D;：</p><blockquote><p>慎用此接口，每天有免费使用&#x3D;&#x3D;上限&#x3D;&#x3D;（如果你不想充钱）<br>地址栏搜索默认是当前所在城市，若是指定城市url后面加上&amp;city&#x3D;城市名，就行</p></blockquote><p>接着，访问此url结果如图，一长串的json数据<br><img src="https://img-blog.csdnimg.cn/4206ae96e1ae433ba6f966d5bac22d5a.png" alt="json数据">如果你的浏览器支持转为json格式，那么会得到更清晰的数据格式，方便后续对其进行封装，也可百度在线json格式化工具，复制原始数据进去，得到格式化jsn数据<br><img src="https://img-blog.csdnimg.cn/5118219aef8742d2a0c06e77833695f0.png" alt="json格式1">观察上图json数据，里面的嵌套关系决定了我们封装一个实体类肯定不能拿到全部信息，因为上图data，是一个json数组（JsonArray），里面包含了今天加上未来六天共七天的天气数据（JsonObject），所以data要单独封装成一个实体叫做DayWeatherBean，用来接受每天的数据。</p><h1 id="项目结构"><a href="#项目结构" class="headerlink" title="项目结构"></a>项目结构</h1><p><img src="https://img-blog.csdnimg.cn/7ca26d0558a14b31afd0bd0f3c3ed1f7.png#pic_center" alt="项目结构"></p><h1 id="api请求工具包"><a href="#api请求工具包" class="headerlink" title="api请求工具包"></a>api请求工具包</h1><p>那么既然是请求api解析数据，自然离不开HttpUrlConnection，如果学的不是HttpUrlConnection请自行根据更改。<br>首先封装一个工具包，表示根据指定地址网络请求得到数据，得到的是string字符串，实是json数据</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.net.HttpURLConnection;</span><br><span class="line"><span class="keyword">import</span> java.net.URL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">NetworkUtil</span> &#123;</span><br><span class="line">    <span class="comment">// 一天测试次数有限，慎用</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">URL_WEATHER</span> <span class="operator">=</span> <span class="string">&quot;https://tianqiapi.com/api?version=v1&amp;appid=（你的appid）&amp;appsecret=（你的appsecret）&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getWeather</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="type">HttpURLConnection</span> <span class="variable">connection</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">InputStreamReader</span> <span class="variable">inputStreamReader</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">bufferedReader</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="comment">// 连接网络</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">URL</span> <span class="variable">urL</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">URL</span>(URL_WEATHER);</span><br><span class="line">            connection = (HttpURLConnection) urL.openConnection();</span><br><span class="line">            connection.setRequestMethod(<span class="string">&quot;GET&quot;</span>);</span><br><span class="line">            connection.setConnectTimeout(<span class="number">5000</span>);</span><br><span class="line">            connection.setReadTimeout(<span class="number">5000</span>);</span><br><span class="line">            <span class="comment">// 从连接中读取数据(二进制)</span></span><br><span class="line">            <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> connection.getInputStream();</span><br><span class="line">            inputStreamReader = <span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(inputStream);</span><br><span class="line">            <span class="comment">// 二进制流送入缓冲区</span></span><br><span class="line">            bufferedReader = <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(inputStreamReader);</span><br><span class="line">            <span class="comment">// 容器</span></span><br><span class="line">            <span class="type">StringBuilder</span> <span class="variable">stringBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">            <span class="type">String</span> <span class="variable">line</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">            <span class="keyword">while</span> ((line = bufferedReader.readLine()) != <span class="literal">null</span>) &#123;</span><br><span class="line">                stringBuilder.append(line);</span><br><span class="line">            &#125;</span><br><span class="line">            result = stringBuilder.toString();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (connection != <span class="literal">null</span>) &#123;</span><br><span class="line">                connection.disconnect();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (inputStreamReader != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    inputStreamReader.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (bufferedReader != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    bufferedReader.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><mark class="hl-label pink">既然是网络请求，注意</mark> <blockquote><p>AndroidManifest中别忘了加<br><code>&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;</code></p></blockquote><p><img src="https://img-blog.csdnimg.cn/7b0089edd3554de2a6e80bd649413596.png#pic_center" alt="andxml"></p><h1 id="布局文件"><a href="#布局文件" class="headerlink" title="布局文件"></a>布局文件</h1><p>接着就是布局，随意，怎么好看怎么来，无非就是接受几个数据传给TextView</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:alpha</span>=<span class="string">&quot;0.8&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:background</span>=<span class="string">&quot;@mipmap/bg&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:gravity</span>=<span class="string">&quot;center_horizontal&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.MainActivity&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;郑州&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;25sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">&quot;@color/white&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_city&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/iv_weather&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;125dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;95dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:src</span>=<span class="string">&quot;@drawable/weather_yin&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_weather&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;阴转多云&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">&quot;@color/white&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;20sp&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_week&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;星期二&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">&quot;@color/white&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;16sp&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_tem&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;31°C&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">&quot;@color/white&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;100sp&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_tem_low_high&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;25°C/33°C&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">&quot;@color/white&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;20sp&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_time&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;更新时间:2022-06-15 08:22:23&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">&quot;@color/white&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;17sp&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginRight</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:alpha</span>=<span class="string">&quot;0.7&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;@drawable/blackground&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;120dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;105dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;65dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:src</span>=<span class="string">&quot;@drawable/fengli&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_win&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;南风3~4级&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textColor</span>=<span class="string">&quot;@color/white&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textSize</span>=<span class="string">&quot;16sp&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginRight</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">            <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_air&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;空气:43 | 优\n空气好，适宜外出&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textColor</span>=<span class="string">&quot;@color/white&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textSize</span>=<span class="string">&quot;18sp&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><p>效果图（上图有个阴转多云图，下方有源码，可自行了解，此次只拿数据传数据，不包括图片）<br><img src="https://img-blog.csdnimg.cn/85a041d1a2ec420b820c8312065f7ee3.png" alt="效果图"></p><h1 id="实体类"><a href="#实体类" class="headerlink" title="实体类"></a>实体类</h1><p>两个实体类<br><img src="https://img-blog.csdnimg.cn/301636c3f29848c2832ed7b602a3d1a7.png" alt="在这里插入图片描述"><br>一个WeatherBean是最上层json封装，一个是DayWeatherBean封装的data（前面已经解答过）</p><h3 id="WeatherBean"><a href="#WeatherBean" class="headerlink" title="WeatherBean"></a>WeatherBean</h3><p>没什么好说的，就下面几个属性，学爬虫的应该更了解<br><img src="https://img-blog.csdnimg.cn/df333535c12445beb4161f79b22f6b0d.png#pic_center" alt="在这里插入图片描述"><br>其他的属性String就行，挑重要信息拿，data就是··<code>List&lt;DayWeatherBean&gt;</code></p><p>此处命名不规范问题，由于使用的是Gson包封装，所以有一个实现类可用<br><code>public class WeatherBean implements Serializable</code><br>每个属性再加上序列化注解指定原始数据，就可解决，自行补充<br><img src="https://img-blog.csdnimg.cn/faf54d35eb6d4eb6baf93ed8d3838eb1.png" alt="在这里插入图片描述"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * TextView tv_city,tv_time,tv_weather,tv_week,tv_tem,tv_tem_low_high,tv_win,tv_air;7个</span></span><br><span class="line"><span class="comment"> * ImageView iv_weather;//天气图标</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WeatherBean</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String cityid;</span><br><span class="line">    <span class="keyword">private</span> String city;<span class="comment">//城市名称</span></span><br><span class="line">    <span class="keyword">private</span> String update_time;<span class="comment">//更新时间</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;DayWeatherBean&gt; data;<span class="comment">//获取今日天气，get[0]</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//toString()，get，set自行设置</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="DayWeatherBean"><a href="#DayWeatherBean" class="headerlink" title="DayWeatherBean"></a>DayWeatherBean</h3><p>接着根据api中data中的属性名选择性封装DayWeatherBean </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * TextView tv_city,tv_time,tv_weather,tv_week,tv_tem,tv_tem_low_high,tv_win,tv_air;7个</span></span><br><span class="line"><span class="comment"> * ImageView iv_weather;//天气图标</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DayWeatherBean</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String wea;<span class="comment">//天气</span></span><br><span class="line">    <span class="keyword">private</span> String wea_img;<span class="comment">//天气图标</span></span><br><span class="line">    <span class="keyword">private</span> String week;<span class="comment">//周几</span></span><br><span class="line">    <span class="keyword">private</span> String tem;<span class="comment">//温度</span></span><br><span class="line">    <span class="comment">//tv_tem_low_high=tem2+tem1拼接一起</span></span><br><span class="line">    <span class="keyword">private</span> String tem2;<span class="comment">//低温</span></span><br><span class="line">    <span class="keyword">private</span> String tem1;<span class="comment">//高温</span></span><br><span class="line">    <span class="comment">//tv_win=win+win_speed</span></span><br><span class="line">    <span class="keyword">private</span> String[] win;<span class="comment">//风力</span></span><br><span class="line">    <span class="keyword">private</span> String win_speed;<span class="comment">//风力等级</span></span><br><span class="line">    <span class="comment">//tv_air=air+air_level+air_tips拼接一起</span></span><br><span class="line">    <span class="keyword">private</span> String air;<span class="comment">//</span></span><br><span class="line">    <span class="keyword">private</span> String air_level;<span class="comment">//</span></span><br><span class="line">    <span class="keyword">private</span> String air_tips;<span class="comment">//</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//toString()，get，set自行设置</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="MainActivity"><a href="#MainActivity" class="headerlink" title="MainActivity"></a>MainActivity</h1><p>使用handler来异步处理<br>首先开辟一个子线程，拿到网页数据传给handler</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">getWeather</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 开启子线程，请求网络</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="comment">// 请求网络</span></span><br><span class="line">                <span class="type">String</span> <span class="variable">weatherJson</span> <span class="operator">=</span> NetworkUtil.getWeather();</span><br><span class="line">                <span class="comment">// 使用handler将数据传递给主线程</span></span><br><span class="line">                <span class="type">Message</span> <span class="variable">message</span> <span class="operator">=</span> Message.obtain();</span><br><span class="line">                message.what = <span class="number">0</span>;</span><br><span class="line">                message.obj = weatherJson;</span><br><span class="line">                mHandler.sendMessage(message);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).start();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>使用Gson序列化工具前别忘记添加依赖包<br><code>implementation &#39;com.google.code.gson:gson:2.8.5&#39;</code><br><img src="https://img-blog.csdnimg.cn/b58c484be7ec41bfbe0fba35d3ac0367.png#pic_center" alt="在这里插入图片描述"><br>添加代码后别忘了构建一下，右上角点一下<br><img src="https://img-blog.csdnimg.cn/15c9d1e722454264a9de1a3f116b064c.png#pic_center" alt="在这里插入图片描述"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="type">Handler</span> <span class="variable">mHandler</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Handler</span>(Looper.myLooper()) &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">handleMessage</span><span class="params">(<span class="meta">@NonNull</span> Message msg)</span> &#123;</span><br><span class="line">            <span class="built_in">super</span>.handleMessage(msg);</span><br><span class="line">            <span class="keyword">if</span> (msg.what == <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">weather</span> <span class="operator">=</span> (String) msg.obj;</span><br><span class="line">                Log.d(<span class="string">&quot;Main&quot;</span>, <span class="string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;原始数据--weather---&quot;</span> + weather);</span><br><span class="line">                <span class="keyword">if</span> (TextUtils.isEmpty(weather)) &#123;</span><br><span class="line">                    Toast.makeText(MainActivity.<span class="built_in">this</span>, <span class="string">&quot;天气数据为空！&quot;</span>, Toast.LENGTH_LONG).show();</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="type">Gson</span> <span class="variable">gson</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Gson</span>();<span class="comment">//Gson序列化工具，JsonObject也行，方法不同</span></span><br><span class="line">                <span class="type">WeatherBean</span> <span class="variable">weatherBean</span> <span class="operator">=</span> gson.fromJson(weather, WeatherBean.class);</span><br><span class="line">                <span class="keyword">if</span> (weatherBean != <span class="literal">null</span>) &#123;</span><br><span class="line">                    Log.d(<span class="string">&quot;Main&quot;</span>, <span class="string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;封装数据--weather---&quot;</span> + weatherBean.toString());</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                tvCity.setText(weatherBean.getCity());</span><br><span class="line">                tvTime.setText(weatherBean.getUpdate_time());</span><br><span class="line">                <span class="comment">/**</span></span><br><span class="line"><span class="comment">                 * 当天天气</span></span><br><span class="line"><span class="comment">                 */</span></span><br><span class="line">                dayWeather = weatherBean.getData().get(<span class="number">0</span>);</span><br><span class="line">                tvWeather.setText(dayWeather.getWea());</span><br><span class="line">                tvTem.setText(dayWeather.getTem());</span><br><span class="line">                tvTemLowHigh.setText(dayWeather.getTem2()+<span class="string">&quot;/&quot;</span>+dayWeather.getTem1());</span><br><span class="line">                tvWeek.setText(dayWeather.getWeek());</span><br><span class="line">                tvWin.setText(dayWeather.getWin()[<span class="number">0</span>]+dayWeather.getWin_speed());</span><br><span class="line">                tvAir.setText(<span class="string">&quot;空气:&quot;</span>+dayWeather.getAir()+<span class="string">&quot; | &quot;</span>+dayWeather.getAir_level()+<span class="string">&quot;\n&quot;</span>+dayWeather.getAir_tips());</span><br><span class="line">                ivWeather.setImageResource(WeatherImgUtil.getImgResOfWeather(dayWeather.getWea_img()));</span><br><span class="line">               <span class="comment">//此工具和图片源码中给出</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br></pre></td></tr></table></figure><p>查看是否获取到数据<br><img src="https://img-blog.csdnimg.cn/77f9e039eabe4cc29498596600de4b65.png" alt="在这里插入图片描述"></p><p>&#x3D;&#x3D;源码自取&#x3D;&#x3D;：<a href="https://gitee.com/guo-yc/weather-frocast">gitee</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> Java </tag>
            
            <tag> API </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Redis-安装与配置</title>
      <link href="/posts/306dd2fe.html"/>
      <url>/posts/306dd2fe.html</url>
      
        <content type="html"><![CDATA[<h1 id="1-Redis"><a href="#1-Redis" class="headerlink" title="1. Redis"></a>1. Redis</h1><h2 id="1-1-Redis的安装"><a href="#1-1-Redis的安装" class="headerlink" title="1.1. Redis的安装"></a>1.1. Redis的安装</h2><p>​大多数企业都是基于Linux服务器来部署项目，而且Redis官方也没有提供Windows版本的安装包。本教程会在Linux下部署redis。</p><p>​Linux版本为CentOS 7。</p><p>​Redis的官方网站地址：<a href="https://redis.io/">https://redis.io/</a></p><h3 id="1-1-1-Windows安装"><a href="#1-1-1-Windows安装" class="headerlink" title="1.1.1. Windows安装"></a>1.1.1. Windows安装</h3><p>​首先下载Redis压缩包，直接解压到指定目录即可，redis.conf配置文件</p><h3 id="1-1-2-Linux安装"><a href="#1-1-2-Linux安装" class="headerlink" title="1.1.2. Linux安装"></a>1.1.2. Linux安装</h3><p>​首先去Redis官网 <a href="https://redis.io/download/">download</a>下载linux版本压缩包，官网只提供.<em>tar</em>.<em>gz</em>格式在linux环境下部署的压缩包。<br>![在这里插入图片描述](<a href="https://img-blog.csdnimg.cn/77d11908ba614dab83b9477610b264d1.png?size_19#pic_center">https://img-blog.csdnimg.cn/77d11908ba614dab83b9477610b264d1.png?size_19#pic_center</a> &#x3D;590x270)</p><p>Redis是基于C语言编写的，因此首先需要安装Redis所需要的gcc依赖：<br>打开linux命令行界面输入下列命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y gcc tcl</span><br></pre></td></tr></table></figure><p>下载好的Redis安装包需要上传到虚拟机的指定目录，如此处我们上传的目录为根目录下的&#x2F;JavaTools&#x2F;Redis-5.0.14,可以使用&#x3D;&#x3D;Xftp&#x3D;&#x3D;上传。<br>![javatools](<a href="https://img-blog.csdnimg.cn/a973abec3ef646b7821005bb740b6eee.png#pic_center">https://img-blog.csdnimg.cn/a973abec3ef646b7821005bb740b6eee.png#pic_center</a> &#x3D;600x400)</p><blockquote><p>在根目录’&#x2F;‘下创建JavTools文件夹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="built_in">cd</span> /</span><br><span class="line">&gt;<span class="built_in">mkdir</span> JavTools</span><br></pre></td></tr></table></figure><p>后续操作可使用虚拟机连接工具Xftp</p></blockquote><p><img src="https://img-blog.csdnimg.cn/8b733e9506ed4985ae68a60b050bcd84.png?size_10#pic_center" alt="ftp"></p><blockquote><p>下载好的redis-5.0.14.tar.gz压缩包上传到Linux后解压缩</p><p>解压命令<code>tar -xzf redis-5.0.14.tar.gz</code></p><p>得到redis-5.0.14</p></blockquote><p>进入redis目录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> redis-5.0.14</span><br></pre></td></tr></table></figure><p>运行编译命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><blockquote><p>注意：</p><blockquote><p>可能会出现错误：jemalloc&#x2F;jemalloc.h：没有那个文件或目录，执行如下命令即可： </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;make MALLOC=libc</span><br></pre></td></tr></table></figure></blockquote></blockquote><p>make install可将redis的相关运行文件复制一份放到&#x3D;&#x3D;&#x2F;usr&#x2F;local&#x2F;bin&#x2F;&#x3D;&#x3D;下，这样就可以在任意目录下执行redis的命令了</p><p><img src="https://img-blog.csdnimg.cn/5a0222b53a9249c49489afb03e339d31.png#pic_center" alt="usr/local"></p><ul><li>redis-cli：是redis提供的命令行客户端</li><li>redis-server：是redis的服务端启动脚本</li><li>redis-sentinel：是redis的哨兵启动脚本</li></ul><hr><h4 id="启动Redis"><a href="#启动Redis" class="headerlink" title="启动Redis"></a>启动Redis</h4><p>这样就可以启动Redis服务了，启动方式例如：</p><ul><li>默认启动</li><li>指定配置启动</li><li>开机自启</li></ul><hr><p>1.默认启动：</p><p>在任意目录下输入redis-server命令即可启动Redis</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-server</span><br></pre></td></tr></table></figure><p>启动成功<br><img src="https://img-blog.csdnimg.cn/af2fe54d6e0046b0b9042c728be8ee6f.png" alt="在这里插入图片描述"></p><p>这种属于<code>前台启动</code>，会阻塞整个会话窗口，窗口关闭或者按下<code>CTRL + C</code>则Redis停止。不推荐使用。</p><hr><p>2.指定配置文件启动：</p><p>需要将Redis以<strong>后台</strong>方式启动，需要修改redis.conf配置文件，就在解压的目录<code>/JavaTools/redis-5.0.14</code>下：</p><p>进入redis-5.0.14编辑redis.conf</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> redis-5.0.14</span><br></pre></td></tr></table></figure><p>先将配置文件备份一份：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span> redis.conf redis.conf.bck</span><br></pre></td></tr></table></figure><p>然后修改redis.conf文件中的一些配置：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi redis.conf</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 允许访问的地址，默认是127.0.0.1，会导致只能在本地访问。修改为0.0.0.0则可以在任意IP访问，生产环境不要设置为0.0.0.0</span></span><br><span class="line"><span class="built_in">bind</span> 0.0.0.0</span><br><span class="line"><span class="comment"># 守护进程，修改为yes后即可后台运行</span></span><br><span class="line">daemonize <span class="built_in">yes</span></span><br><span class="line"><span class="comment"># 密码，设置后访问Redis必须输入密码</span></span><br><span class="line">requirepass qwer1234</span><br></pre></td></tr></table></figure><p>详细步骤前往博客<a href="https://blog.csdn.net/m0_51390535/article/details/124965190?spm=1001.2014.3001.5502">Redis配置文件</a></p><p>Redis的其它常见配置(不要求)：</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 监听的端口</span></span><br><span class="line"><span class="attr">port</span> <span class="string">6379</span></span><br><span class="line"><span class="comment"># 工作目录，默认是当前目录，也就是运行redis-server时的命令，日志、持久化等文件会保存在这个目录</span></span><br><span class="line"><span class="attr">dir</span> <span class="string">.</span></span><br><span class="line"><span class="comment"># 数据库数量，设置为1，代表只使用1个库，默认有16个库，编号0~15</span></span><br><span class="line"><span class="attr">databases</span> <span class="string">1</span></span><br><span class="line"><span class="comment"># 设置redis能够使用的最大内存</span></span><br><span class="line"><span class="attr">maxmemory</span> <span class="string">512mb</span></span><br><span class="line"><span class="comment"># 日志文件，默认为空，不记录日志，可以指定日志文件名</span></span><br><span class="line"><span class="attr">logfile</span> <span class="string">&quot;redis.log&quot;</span></span><br></pre></td></tr></table></figure><p>用配置文件启动Redis：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-server redis.conf</span><br></pre></td></tr></table></figure><p>停止服务：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 利用redis-cli来执行 shutdown 命令，即可停止 Redis 服务，</span></span><br><span class="line"><span class="comment"># 因为之前配置了密码，因此需要通过 -u 来指定密码</span></span><br><span class="line">redis-cli -u qwer1234 shutdown</span><br></pre></td></tr></table></figure><hr><p>3.开机自启：</p><p>我们也可以通过配置来实现开机自启。</p><p>首先，新建一个系统服务文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/systemd/system/redis.service</span><br></pre></td></tr></table></figure><p>内容如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=redis-server</span><br><span class="line">After=network.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=forking</span><br><span class="line">ExecStart=/usr/local/bin/redis-server /usr/local/src/redis-6.2.6/redis.conf</span><br><span class="line">PrivateTmp=true</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure><p>然后重载系统服务：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl daemon-reload</span><br></pre></td></tr></table></figure><p>现在，我们可以用下面这组命令来操作redis了：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启动</span></span><br><span class="line">systemctl start redis</span><br><span class="line"><span class="comment"># 停止</span></span><br><span class="line">systemctl stop redis</span><br><span class="line"><span class="comment"># 重启</span></span><br><span class="line">systemctl restart redis</span><br><span class="line"><span class="comment"># 查看状态</span></span><br><span class="line">systemctl status redis</span><br></pre></td></tr></table></figure><p>执行下面的命令，可以让redis开机自启：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">enable</span> redis</span><br></pre></td></tr></table></figure><hr><h2 id="1-2-Redis客户端cli"><a href="#1-2-Redis客户端cli" class="headerlink" title="1.2.Redis客户端cli"></a>1.2.Redis客户端cli</h2><h3 id="1-2-1-Redis命令行客户端"><a href="#1-2-1-Redis命令行客户端" class="headerlink" title="1.2.1.Redis命令行客户端"></a>1.2.1.Redis命令行客户端</h3><p>Redis安装完成后就自带了命令行客户端：redis-cli，使用方式如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-cli [options] [commonds]</span><br></pre></td></tr></table></figure><p>其中常见的options有：</p><ul><li><code>-h 127.0.0.1</code>：指定要连接的redis节点的IP地址，默认是127.0.0.1</li><li><code>-p 6379</code>：指定要连接的redis节点的端口，默认是6379</li><li><code>-a qwer1234</code>：指定redis的访问密码</li></ul><p>其中的commonds就是Redis的操作命令，例如：</p><ul><li><code>ping</code>：与redis服务端做心跳测试，服务端正常会返回<code>pong</code></li></ul><p>不指定commond时，会进入<code>redis-cli</code>的交互控制台：</p><p><img src="https://img-blog.csdnimg.cn/b1f36db50eef49d2a06b4c8bc6e75ff7.png#pic_center" alt="keys"></p><p>可以使用命令连接cli客户端</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-cli -h 本机地址 -p 6379</span><br></pre></td></tr></table></figure><p>配置文件设置有密码时，cli启动后需要输入密码</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">AUTH qwer1234 <span class="comment">#redis密码</span></span><br></pre></td></tr></table></figure><p>启动失败，尝试开放6379端口</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/sbin/iptables -I INPUT -p tcp --dport 6379 -j ACCEPT</span><br></pre></td></tr></table></figure><hr><p><strong>其他硬知识</strong></p><ul><li>查看redis进程是否存在<br><code>ps -ef |grep redis</code></li><li>检测6379端口是否在监听<br><code>netstat -lntp | grep 6379</code></li><li>停止redis，使用ctrl+c快捷键或者使用客户端 <code>redis-cli shutdown</code></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> Redis </tag>
            
            <tag> Redis-cli </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/posts/Hello.html"/>
      <url>/posts/Hello.html</url>
      
        <content type="html"><![CDATA[<!-- Front-matter---title:date:updated:type:comments:description:keywords:top_img:mathjax:katex:aside:aplayer:highlight_shrink:--- --><p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p><hr><h2 id="本地查看hexo"><a href="#本地查看hexo" class="headerlink" title="本地查看hexo"></a>本地查看hexo</h2><p>bash运行命令框<br>1.清除本地缓存</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo cl</span><br></pre></td></tr></table></figure><p>2.上传到本地</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo g</span><br></pre></td></tr></table></figure><p>3.本地运行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo s</span><br></pre></td></tr></table></figure><hr><h2 id="上传到Github"><a href="#上传到Github" class="headerlink" title="上传到Github"></a>上传到Github</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo g -d</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
  
  
    
    
    <entry>
      <title>categories</title>
      <link href="/categories/index.html"/>
      <url>/categories/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>link</title>
      <link href="/link/index.html"/>
      <url>/link/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>tags</title>
      <link href="/tags/index.html"/>
      <url>/tags/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
  
</search>
